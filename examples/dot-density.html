<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Deep-Insights.js | Populated Places</title>
    <meta name=viewport content="width=device-width initial-scale=1">
    <link rel="stylesheet" href="../dist/themes/css/deep-insights.css" />
    <script src="../dist/deep-insights.uncompressed.js"></script>
    <style type="text/css">
      html, body {
        position:relative;
        height: 100%;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="dashboard"></div>

    <script>
      window.onload = function() {
        var vizJSON = {
          "id": "077b428c-d5bf-11e5-8a3a-0e31c9be1b51",
          "version": "0.1.0",
          "title": "mamataakella_us_census_acs2013_5yr_census_tract_with_extra_vari",
          "likes": 0,
          "description": null,
          "scrollwheel": false,
          "legends": true,
          "url": null,
          "map_provider": "leaflet",
          "bounds": [
            [
              40.4774,
              -74.2589
            ],
            [
               40.9176,
              -73.7004
            ]
          ],
          "center": "[44.629269742675504,-121.7120223083096]",
          "zoom": 2,

          "user": {
            "fullname": "Stuart Lynn",
            "avatar_url": "https://s3.amazonaws.com/com.cartodb.users-assets.production/production/piensaenpixel/assets/20150507074635Captura%20de%20pantalla%202015-05-07%20a%20la%28s%29%2009.46.28.png"
          },

          "datasource": {
            "user_name": "stuartlynn",
            "maps_api_template": "https://{user}.cartodb.com:443",
            "force_cors": true,
            "stat_tag": "077b428c-d5bf-11e5-8a3a-0e31c9be1b51"
          },


          "widgets": [
            {
              "type": "formula",
              "title": "Total population",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "total_pop_",
                "operation": "sum"
              }
            },
            {
              "title": "Ethnicity",
              "type": "category",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "type": "aggregation",
                "column": "ethnicity",
                "aggregationColumn": "ethnicity",
                "aggregation": "count",
                "sync": true
              }
            },

            {
              "type": "histogram",
              "title": "Asian Population in census tact",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "asian_pop",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Black Population in census tact",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "black_pop",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Black Population in census tact",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "white_pop",
                "bins": 10
              },
            },
            {
              "type": "histogram",
              "title": "Median Household income",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "median_hou",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Median Household rent",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "median_ren",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Non us citizens",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "not_a_us_c",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Speaks spanish ",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "speaks_spa",
                "bins": 10
              }
            },
            {
              "type": "histogram",
              "title": "Gini Index",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "gini_index",
                "bins": 10
              },
            },

            {
              "type": "histogram",
              "title": "Median age",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "median_age",
                "bins": 10
              },
            },
             {
              "type": "histogram",
              "title": "Total Population",
              "layer_id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
              "options": {
                "column": "total_pop_",
                "bins": 10
              }
            }
          ],


          "updated_at": "2016-02-17T21:40:14+00:00",
          "layers": [
            {
              "options": {
                "default": "true",
                "url": "http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png",
                "subdomains": "abcd",
                "minZoom": "0",
                "maxZoom": "18",
                "name": "Positron",
                "className": "positron_rainbow_labels",
                "attribution": "&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>",
                "labels": {
                  "url": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png"
                },
                "urlTemplate": "http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png"
              },
              "infowindow": null,
              "tooltip": null,
              "id": "f5a78cef-5f4c-4cbc-b701-4ebdca067423",
              "order": 0,
              "type": "tiled"
            },
            {
              "type": "layergroup",
              "options": {
                "user_name": "stuartlynn",
                "maps_api_template": "https://{user}.cartodb.com:443",
                "sql_api_template": "https://{user}.cartodb.com:443",
                "tiler_protocol": "http",
                "tiler_domain": "cartodb.com",
                "tiler_port": "80",
                "sql_api_protocol": "http",
                "sql_api_domain": "cartodb.com",
                "sql_api_endpoint": "/api/v2/sql",
                "sql_api_port": 80,
                "filter": "mapnik",
                "layer_definition": {
                  "stat_tag": "077b428c-d5bf-11e5-8a3a-0e31c9be1b51",
                  "version": "1.0.1",
                  "layers": [
                    {
                      "id": "8c993676-fde3-4a3b-95ac-48f4480fa4e1",
                      "type": "CartoDB",
                      "infowindow": {
                        "fields": [],
                        "template_name": "table/views/infowindow_light",
                        "template": "<div class=\"cartodb-popup v2\">\n  <a href=\"#close\" class=\"cartodb-popup-close-button close\">x</a>\n  <div class=\"cartodb-popup-content-wrapper\">\n    <div class=\"cartodb-popup-content\">\n      {{#content.fields}}\n        {{#title}}<h4>{{title}}</h4>{{/title}}\n        {{#value}}\n          <p {{#type}}class=\"{{ type }}\"{{/type}}>{{{ value }}}</p>\n        {{/value}}\n        {{^value}}\n          <p class=\"empty\">null</p>\n        {{/value}}\n      {{/content.fields}}\n    </div>\n  </div>\n  <div class=\"cartodb-popup-tip-container\"></div>\n</div>\n",
                        "alternative_names": {},
                        "width": 226,
                        "maxHeight": 180
                      },
                      "tooltip": {
                        "fields": [],
                        "template_name": "tooltip_light",
                        "template": "<div class=\"cartodb-tooltip-content-wrapper\">\n  <div class=\"cartodb-tooltip-content\">\n  {{#fields}}\n    {{#title}}\n    <h4>{{title}}</h4>\n    {{/title}}\n    <p>{{{ value }}}</p>\n  {{/fields}}\n  </div>\n</div>",
                        "alternative_names": {},
                        "maxHeight": 180
                      },
                      "legend": {
                        "type": "none",
                        "show_title": false,
                        "title": "",
                        "template": "",
                        "visible": true
                      },
                      "order": 1,
                      "visible": true,
                      "options": {
                        "sql": "select * from mamataakella_us_census_acs2013_5yr_census_tract_with_extra_vari",
                        "layer_name": "mamataakella_us_census_acs2013_5yr_census_tract_with_extra_vari",
                        "cartocss": '#mamataakella_us_census_acs2013_5yr_census_tract_with_extra_vari{ marker-fill-opacity: 1; marker-placement: point; marker-type: ellipse; marker-width: 0.75; marker-allow-overlap: true; marker-line-width: 0; [zoom<=7]{ [ethnicity="white"]{marker-opacity:0.7;} } [zoom>=7] {marker-width: 1.0;} [zoom>=8] {marker-width: 1.5;} [zoom>=11]{marker-width: 2.0;} [zoom>=12]{marker-width: 2.5;} [zoom>=13]{marker-width: 3.0;} [zoom>=14]{marker-width: 3.5;} [ethnicity="hispanic"] { marker-fill: #FF8A00;}[ethnicity="black"] {marker-fill:#0B9F95;}[ethnicity="asian"] {marker-fill:#FF528C;}[ethnicity="white"] {marker-fill:#A0A3D4;}',
                        "cartocss_version": "2.1.1",
                        "interactivity": "cartodb_id",
                        "table_name": "\"\"."
                      }
                    }
                  ]
                },
                "attribution": ""
              }
            },
            {
              "options": {
                "default": "true",
                "url": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",
                "subdomains": "abcd",
                "minZoom": "0",
                "maxZoom": "18",
                "attribution": "&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>",
                "urlTemplate": "http://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png",
                "type": "Tiled",
                "name": "Positron Labels"
              },
              "infowindow": null,
              "tooltip": null,
              "id": "e587b023-56b6-4dfc-a96e-a5d7ee1216ac",
              "order": 2,
              "type": "tiled"
            }
          ],
          "overlays": [
            {
              "type": "share",
              "order": 2,
              "options": {
                "display": true,
                "x": 20,
                "y": 20
              },
              "template": ""
            },
            {
              "type": "search",
              "order": 3,
              "options": {
                "display": true,
                "x": 60,
                "y": 20
              },
              "template": ""
            },
            {
              "type": "zoom",
              "order": 6,
              "options": {
                "display": true,
                "x": 20,
                "y": 20
              },
              "template": "<a href=\"#zoom_in\" class=\"zoom_in\">+</a> <a href=\"#zoom_out\" class=\"zoom_out\">-</a>"
            },
            {
              "type": "loader",
              "order": 8,
              "options": {
                "display": true,
                "x": 20,
                "y": 150
              },
              "template": "<div class=\"loader\" original-title=\"\"></div>"
            },
            {
              "type": "logo",
              "order": 9,
              "options": {
                "display": true,
                "x": 10,
                "y": 40
              },
              "template": ""
            }
          ],
          "prev": null,
          "next": null,
          "transition_options": {
            "time": 0
          }
        }


        var dashboard = cartodb.deepInsights.createDashboard('#dashboard', vizJSON, {
          no_cdn: false,
          cartodb_logo: false
        });
        dashboard.vis.done(function() {
            window.dashboard = dashboard
          })
          .error(function(err) {
            console.error(err);
          });

        console.info('first widget is disabled on start, run the following the dev console to enable it:',
        'dashboard.widgets._widgetsCollection.at(0).update({sync_on_data_change: true, sync_on_bbox_change: true, title: "Min population"})')
      }
    </script>
  </body>
</html>
