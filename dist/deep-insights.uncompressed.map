{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "../cartodb.js/node_modules/backbone/backbone.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/functions.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/index.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/parser.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/renderer.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/renderer_js.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/torque-reference.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/call.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/color.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/comment.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/definition.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/dimension.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/element.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/expression.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/field.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/filter.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/filterset.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/fontset.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/frame_offset.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/imagefilter.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/invalid.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/keyword.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/layer.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/literal.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/operation.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/quoted.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/reference.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/rule.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/ruleset.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/selector.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/style.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/url.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/value.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/variable.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/lib/carto/tree/zoom.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/node_modules/mapnik-reference/index.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/carto/package.json",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/crossfilter/crossfilter.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/crossfilter/index.js",
    "../cartodb.js/node_modules/d3.cartodb/node_modules/topojson/build/topojson.js",
    "../cartodb.js/node_modules/d3.cartodb/src/core.js",
    "../cartodb.js/node_modules/d3.cartodb/src/filter.js",
    "../cartodb.js/node_modules/d3.cartodb/src/geo.js",
    "../cartodb.js/node_modules/d3.cartodb/src/index.js",
    "../cartodb.js/node_modules/d3.cartodb/src/leaflet_d3.js",
    "../cartodb.js/node_modules/d3.cartodb/src/net.js",
    "../cartodb.js/node_modules/d3.cartodb/src/providers/index.js",
    "../cartodb.js/node_modules/d3.cartodb/src/providers/sql.js",
    "../cartodb.js/node_modules/d3.cartodb/src/providers/windshaft.js",
    "../cartodb.js/node_modules/d3.cartodb/src/providers/xyz.js",
    "../cartodb.js/node_modules/d3.cartodb/src/renderer.js",
    "../cartodb.js/node_modules/d3.cartodb/src/tileloader.js",
    "../cartodb.js/node_modules/d3.cartodb/src/util.js",
    "../cartodb.js/node_modules/d3/d3.js",
    "../cartodb.js/node_modules/jquery/dist/jquery.js",
    "../cartodb.js/node_modules/leaflet/dist/leaflet-src.js",
    "../cartodb.js/node_modules/mustache/mustache.js",
    "../cartodb.js/node_modules/perfect-scrollbar/index.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/lib/class.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/lib/dom.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/lib/event-manager.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/lib/guid.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/lib/helper.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/main.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/default-setting.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/destroy.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/click-rail.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/drag-scrollbar.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/keyboard.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/mouse-wheel.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/native-scroll.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/selection.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/handler/touch.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/initialize.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/instances.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/update-geometry.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/update-scroll.js",
    "../cartodb.js/node_modules/perfect-scrollbar/src/js/plugin/update.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/animator-steps-range.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/animator.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/cartocss_reference.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/common.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/core.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/gmaps/CanvasLayer.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/gmaps/canvas_tile_layer.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/gmaps/gmaps_tileloader_mixin.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/gmaps/index.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/gmaps/torque.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/index.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/leaflet/canvas_layer.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/leaflet/index.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/leaflet/leaflet_tileloader_mixin.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/leaflet/torque.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/math.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/mercator.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/profiler.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/provider/index.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/provider/json.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/provider/jsonarray.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/provider/tilejson.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/provider/windshaft.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/renderer/cartocss_render.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/renderer/index.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/renderer/point.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/renderer/rectangle.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/renderer/torque_filters.js",
    "../cartodb.js/node_modules/torque.js/lib/torque/request.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/index.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/parser.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/renderer.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/renderer_js.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/call.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/definition.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/dimension.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/filterset.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/reference.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/lib/carto/tree/style.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/node_modules/mapnik-reference/index.js",
    "../cartodb.js/node_modules/torque.js/node_modules/carto/package.json",
    "../cartodb.js/node_modules/underscore/underscore.js",
    "../cartodb.js/package.json",
    "../cartodb.js/src/api/create-layer.js",
    "../cartodb.js/src/api/create-vis.js",
    "../cartodb.js/src/api/promise.js",
    "../cartodb.js/src/api/sql.js",
    "../cartodb.js/src/cartodb.js",
    "../cartodb.js/src/cdb.config.js",
    "../cartodb.js/src/cdb.errors.js",
    "../cartodb.js/src/cdb.js",
    "../cartodb.js/src/cdb.log.js",
    "../cartodb.js/src/cdb.templates.js",
    "../cartodb.js/src/core/config.js",
    "../cartodb.js/src/core/loader.js",
    "../cartodb.js/src/core/log.js",
    "../cartodb.js/src/core/log/error-list.js",
    "../cartodb.js/src/core/log/error.js",
    "../cartodb.js/src/core/model.js",
    "../cartodb.js/src/core/profiler.js",
    "../cartodb.js/src/core/sanitize.js",
    "../cartodb.js/src/core/template-list.js",
    "../cartodb.js/src/core/template.js",
    "../cartodb.js/src/core/util.js",
    "../cartodb.js/src/core/view.js",
    "../cartodb.js/src/dataviews/category-dataview-model.js",
    "../cartodb.js/src/dataviews/category-dataview/categories-collection.js",
    "../cartodb.js/src/dataviews/category-dataview/category-item-model.js",
    "../cartodb.js/src/dataviews/category-dataview/category-model-range.js",
    "../cartodb.js/src/dataviews/category-dataview/search-model.js",
    "../cartodb.js/src/dataviews/dataview-model-base.js",
    "../cartodb.js/src/dataviews/dataviews-collection.js",
    "../cartodb.js/src/dataviews/dataviews-factory.js",
    "../cartodb.js/src/dataviews/formula-dataview-model.js",
    "../cartodb.js/src/dataviews/histogram-dataview-model.js",
    "../cartodb.js/src/dataviews/histogram-dataview/histogram-data-model.js",
    "../cartodb.js/src/dataviews/list-dataview-model.js",
    "../cartodb.js/src/geo/cartodb-layer-common.js",
    "../cartodb.js/src/geo/cartodb-layer-group-anonymous-map.js",
    "../cartodb.js/src/geo/cartodb-layer-group-base.js",
    "../cartodb.js/src/geo/cartodb-layer-group-named-map.js",
    "../cartodb.js/src/geo/data-providers/geojson/category-geojson-data-provider.js",
    "../cartodb.js/src/geo/data-providers/geojson/formula-geojson-data-provider.js",
    "../cartodb.js/src/geo/data-providers/geojson/geojson-data-provider-base.js",
    "../cartodb.js/src/geo/data-providers/geojson/geojson-data-provider-factory.js",
    "../cartodb.js/src/geo/data-providers/geojson/histogram-geojson-data-provider.js",
    "../cartodb.js/src/geo/data-providers/geojson/list-geojson-data-provider.js",
    "../cartodb.js/src/geo/geocoder/nokia-geocoder.js",
    "../cartodb.js/src/geo/geocoder/yahoo-geocoder.js",
    "../cartodb.js/src/geo/geometry-view.js",
    "../cartodb.js/src/geo/geometry.js",
    "../cartodb.js/src/geo/gmaps.js",
    "../cartodb.js/src/geo/gmaps/cartodb-default-options.js",
    "../cartodb.js/src/geo/gmaps/gmaps-base-layer-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-cartodb-layer-group-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-default-map-style.js",
    "../cartodb.js/src/geo/gmaps/gmaps-layer-view-factory.js",
    "../cartodb.js/src/geo/gmaps/gmaps-layer-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-map-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-path-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-plain-layer-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-point-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-tiled-layer-view.js",
    "../cartodb.js/src/geo/gmaps/gmaps-torque-layer-view.js",
    "../cartodb.js/src/geo/gmaps/projector.js",
    "../cartodb.js/src/geo/leaflet.js",
    "../cartodb.js/src/geo/leaflet/leaflet-cartodb-layer-group-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-cartodb-vector-layer-group-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-gmaps-tiled-layer-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-layer-view-factory.js",
    "../cartodb.js/src/geo/leaflet/leaflet-layer-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-map-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-path-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-plain-layer-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-point-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-tiled-layer-view.js",
    "../cartodb.js/src/geo/leaflet/leaflet-torque-layer.js",
    "../cartodb.js/src/geo/leaflet/leaflet-wms-layer-view.js",
    "../cartodb.js/src/geo/map-view-factory.js",
    "../cartodb.js/src/geo/map-view.js",
    "../cartodb.js/src/geo/map.js",
    "../cartodb.js/src/geo/map/cartodb-layer.js",
    "../cartodb.js/src/geo/map/gmaps-base-layer.js",
    "../cartodb.js/src/geo/map/layer-model-base.js",
    "../cartodb.js/src/geo/map/layers.js",
    "../cartodb.js/src/geo/map/plain-layer.js",
    "../cartodb.js/src/geo/map/tile-layer.js",
    "../cartodb.js/src/geo/map/torque-layer.js",
    "../cartodb.js/src/geo/map/wms-layer.js",
    "../cartodb.js/src/geo/torque-layer-view-base.js",
    "../cartodb.js/src/geo/ui/annotation.js",
    "../cartodb.js/src/geo/ui/attribution/attribution-template.tpl",
    "../cartodb.js/src/geo/ui/attribution/attribution-view.js",
    "../cartodb.js/src/geo/ui/header.js",
    "../cartodb.js/src/geo/ui/image.js",
    "../cartodb.js/src/geo/ui/infobox.js",
    "../cartodb.js/src/geo/ui/infowindow-model.js",
    "../cartodb.js/src/geo/ui/infowindow.js",
    "../cartodb.js/src/geo/ui/layer-selector.js",
    "../cartodb.js/src/geo/ui/layer-view.js",
    "../cartodb.js/src/geo/ui/legend-exports.js",
    "../cartodb.js/src/geo/ui/legend-item-model.js",
    "../cartodb.js/src/geo/ui/legend-item.js",
    "../cartodb.js/src/geo/ui/legend-items.js",
    "../cartodb.js/src/geo/ui/legend-model.js",
    "../cartodb.js/src/geo/ui/legend.js",
    "../cartodb.js/src/geo/ui/legend/base-legend.js",
    "../cartodb.js/src/geo/ui/legend/bubble-legend.js",
    "../cartodb.js/src/geo/ui/legend/category-legend.js",
    "../cartodb.js/src/geo/ui/legend/choropleth-legend.js",
    "../cartodb.js/src/geo/ui/legend/color-legend.js",
    "../cartodb.js/src/geo/ui/legend/custom-legend.js",
    "../cartodb.js/src/geo/ui/legend/debug-legend.js",
    "../cartodb.js/src/geo/ui/legend/density-legend.js",
    "../cartodb.js/src/geo/ui/legend/intensity-legend.js",
    "../cartodb.js/src/geo/ui/legend/legend-bubble.js",
    "../cartodb.js/src/geo/ui/legend/legend-category.js",
    "../cartodb.js/src/geo/ui/legend/legend-choropleth.js",
    "../cartodb.js/src/geo/ui/legend/legend-color.js",
    "../cartodb.js/src/geo/ui/legend/legend-custom.js",
    "../cartodb.js/src/geo/ui/legend/legend-density.js",
    "../cartodb.js/src/geo/ui/legend/legend-intensity.js",
    "../cartodb.js/src/geo/ui/legend/legend-none.js",
    "../cartodb.js/src/geo/ui/legend/legend-stacked.js",
    "../cartodb.js/src/geo/ui/legend/legend-view-exports.js",
    "../cartodb.js/src/geo/ui/legend/none-legend.js",
    "../cartodb.js/src/geo/ui/legend/stacked-legend.js",
    "../cartodb.js/src/geo/ui/legends.js",
    "../cartodb.js/src/geo/ui/search/search.js",
    "../cartodb.js/src/geo/ui/search/search_infowindow_template.tpl",
    "../cartodb.js/src/geo/ui/search/search_template.tpl",
    "../cartodb.js/src/geo/ui/text.js",
    "../cartodb.js/src/geo/ui/tiles-loader.js",
    "../cartodb.js/src/geo/ui/tooltip.js",
    "../cartodb.js/src/geo/ui/zoom/zoom-template.tpl",
    "../cartodb.js/src/geo/ui/zoom/zoom-view.js",
    "../cartodb.js/src/index.js",
    "../cartodb.js/src/ui/common/dialog.js",
    "../cartodb.js/src/ui/common/dropdown.js",
    "../cartodb.js/src/ui/common/fullscreen/fullscreen-template.tpl",
    "../cartodb.js/src/ui/common/fullscreen/fullscreen-view.js",
    "../cartodb.js/src/ui/common/notification.js",
    "../cartodb.js/src/ui/common/table.js",
    "../cartodb.js/src/ui/common/table/row-view.js",
    "../cartodb.js/src/ui/common/table/row.js",
    "../cartodb.js/src/ui/common/table/table-data.js",
    "../cartodb.js/src/ui/common/table/table-properties.js",
    "../cartodb.js/src/util/backbone-abort-sync.js",
    "../cartodb.js/src/vis/infowindow-manager.js",
    "../cartodb.js/src/vis/layers.js",
    "../cartodb.js/src/vis/overlays.js",
    "../cartodb.js/src/vis/tooltip-manager.js",
    "../cartodb.js/src/vis/vis.js",
    "../cartodb.js/src/vis/vis/infowindow-template.js",
    "../cartodb.js/src/vis/vis/layers.js",
    "../cartodb.js/src/vis/vis/overlay.js",
    "../cartodb.js/src/vis/vis/overlays.js",
    "../cartodb.js/src/vis/vizjson.js",
    "../cartodb.js/src/windshaft/client.js",
    "../cartodb.js/src/windshaft/config.js",
    "../cartodb.js/src/windshaft/filters/base.js",
    "../cartodb.js/src/windshaft/filters/bounding-box.js",
    "../cartodb.js/src/windshaft/filters/category.js",
    "../cartodb.js/src/windshaft/filters/collection.js",
    "../cartodb.js/src/windshaft/filters/range.js",
    "../cartodb.js/src/windshaft/layergroup-config.js",
    "../cartodb.js/src/windshaft/namedmap-config.js",
    "../cartodb.js/src/windshaft/windshaft-map.js",
    "../cartodb.js/vendor/GeoJSON.js",
    "../cartodb.js/vendor/clip-path.js",
    "../cartodb.js/vendor/html-css-sanitizer-bundle.js",
    "../cartodb.js/vendor/lzma.js",
    "../cartodb.js/vendor/mousewheel.js",
    "../cartodb.js/vendor/mwheelIntent.js",
    "../cartodb.js/vendor/wax.cartodb.js",
    "node_modules/browserify/lib/_empty.js",
    "node_modules/browserify/node_modules/assert/assert.js",
    "node_modules/browserify/node_modules/inherits/inherits_browser.js",
    "node_modules/browserify/node_modules/path-browserify/index.js",
    "node_modules/browserify/node_modules/process/browser.js",
    "node_modules/browserify/node_modules/util/support/isBufferBrowser.js",
    "node_modules/browserify/node_modules/util/util.js",
    "node_modules/moment/moment.js",
    "src/create-dashboard.js",
    "src/dashboard-below-map-view.js",
    "src/dashboard-menu-view.js",
    "src/dashboard-menu-view.tpl",
    "src/dashboard-sidebar-view.js",
    "src/dashboard-sidebar.tpl",
    "src/dashboard-view.js",
    "src/dashboard.tpl",
    "src/formatter.js",
    "src/index.js",
    "src/widgets-service.js",
    "src/widgets/animate-values.js",
    "src/widgets/category/category-colors.js",
    "src/widgets/category/category-widget-model.js",
    "src/widgets/category/content-template.tpl",
    "src/widgets/category/content-view.js",
    "src/widgets/category/list/item/item-clickable-template.tpl",
    "src/widgets/category/list/item/item-unclickable-template.tpl",
    "src/widgets/category/list/item/item-view.js",
    "src/widgets/category/list/item/search-item-clickable-template.tpl",
    "src/widgets/category/list/item/search-item-view.js",
    "src/widgets/category/list/items-placeholder-template.tpl",
    "src/widgets/category/list/items-view.js",
    "src/widgets/category/list/search-items-no-results-template.tpl",
    "src/widgets/category/list/search-items-view.js",
    "src/widgets/category/locked-categories-collection.js",
    "src/widgets/category/options/options-template.tpl",
    "src/widgets/category/options/options-view.js",
    "src/widgets/category/paginator/paginator-template.tpl",
    "src/widgets/category/paginator/paginator-view.js",
    "src/widgets/category/paginator/search-paginator-template.tpl",
    "src/widgets/category/paginator/search-paginator-view.js",
    "src/widgets/category/stats/cats-template.tpl",
    "src/widgets/category/stats/stats-template.tpl",
    "src/widgets/category/stats/stats-view.js",
    "src/widgets/category/title/search-title-template.tpl",
    "src/widgets/category/title/search-title-view.js",
    "src/widgets/dropdown/template.tpl",
    "src/widgets/dropdown/widget-dropdown-view.js",
    "src/widgets/formula/animation-template.tpl",
    "src/widgets/formula/content-view.js",
    "src/widgets/formula/template.tpl",
    "src/widgets/histogram/animation-template.tpl",
    "src/widgets/histogram/chart.js",
    "src/widgets/histogram/content-view.js",
    "src/widgets/histogram/content.tpl",
    "src/widgets/histogram/histogram-title-template.tpl",
    "src/widgets/histogram/histogram-title-view.js",
    "src/widgets/histogram/histogram-widget-model.js",
    "src/widgets/histogram/placeholder.tpl",
    "src/widgets/list/content-template.tpl",
    "src/widgets/list/content-view.js",
    "src/widgets/list/edges-view.js",
    "src/widgets/list/item-template.tpl",
    "src/widgets/list/item-view.js",
    "src/widgets/list/items-view.js",
    "src/widgets/list/paginator-view.js",
    "src/widgets/list/placeholder-template.tpl",
    "src/widgets/time-series/content-view.js",
    "src/widgets/time-series/histogram-view.js",
    "src/widgets/time-series/placeholder.tpl",
    "src/widgets/time-series/time-series-header-view.js",
    "src/widgets/time-series/time-series-header.tpl",
    "src/widgets/time-series/torque-content-view.js",
    "src/widgets/time-series/torque-controls-view.js",
    "src/widgets/time-series/torque-controls.tpl",
    "src/widgets/time-series/torque-header-view.js",
    "src/widgets/time-series/torque-histogram-view.js",
    "src/widgets/time-series/torque-render-range-info-view.js",
    "src/widgets/time-series/torque-render-range-info.tpl",
    "src/widgets/time-series/torque-reset-render-range-view.js",
    "src/widgets/time-series/torque-reset-render-range.tpl",
    "src/widgets/time-series/torque-template.tpl",
    "src/widgets/time-series/torque-time-info-view.js",
    "src/widgets/time-series/torque-time-info.tpl",
    "src/widgets/time-series/torque-time-slider-view.js",
    "src/widgets/widget-error-template.tpl",
    "src/widgets/widget-error-view.js",
    "src/widgets/widget-loader-view.js",
    "src/widgets/widget-model.js",
    "src/widgets/widget-tooltip-view.js",
    "src/widgets/widget-view-factory.js",
    "src/widgets/widget-view.js",
    "src/widgets/widgets-collection.js"
  ],
  "names": [],
  "mappings": "AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACt2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7wBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACx3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACz3CA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACniBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC70SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1/RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC39RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzkBA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AChaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7PA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1eA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC7wBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AChSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC3QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5gDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACndA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/vBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtIA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC/yHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC/yGA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1nGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3mCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "//     Backbone.js 1.2.3\n\n//     (c) 2010-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = (typeof self == 'object' && self.self == self && self) ||\n            (typeof global == 'object' && global.global == global && global);\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch(e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.2.3';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return _[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return _[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return _[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return _[method].apply(_, args);\n      };\n    }\n  };\n  var addUnderscoreMethods = function(Class, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    return internalOn(this, name, callback, context);\n  };\n\n  // Guard the `listening` argument from the public API.\n  var internalOn = function(obj, name, callback, context, listening) {\n    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {\n        context: context,\n        ctx: obj,\n        listening: listening\n    });\n\n    if (listening) {\n      var listeners = obj._listeners || (obj._listeners = {});\n      listeners[listening.id] = listening;\n    }\n\n    return obj;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo =  function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};\n    }\n\n    // Bind callbacks on obj, and keep track of them on listening.\n    internalOn(obj, name, callback, this, listening);\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({ callback: callback, context: context, ctx: context || ctx, listening: listening });\n    }\n    return events;\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off =  function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n        context: context,\n        listeners: this._listeners\n    });\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening =  function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var i = 0, listening;\n    var context = options.context, listeners = options.listeners;\n\n    // Delete all events listeners and \"drop\" events.\n    if (!name && !callback && !context) {\n      var ids = _.keys(listeners);\n      for (; i < ids.length; i++) {\n        listening = listeners[ids[i]];\n        delete listeners[listening.id];\n        delete listening.listeningTo[listening.objId];\n      }\n      return;\n    }\n\n    var names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          listening = handler.listening;\n          if (listening && --listening.count === 0) {\n            delete listeners[listening.id];\n            delete listening.listeningTo[listening.objId];\n          }\n        }\n      }\n\n      // Update tail event if the list has any events.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n    if (_.size(events)) return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once =  function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n    return this.on(events, void 0, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce =  function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger =  function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, cb, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      this.id = this.get(this.idAttribute);\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n      }\n      return _.size(changed) ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.defaults({validate: true}, options));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n      omit: 0, chain: 1, isEmpty: 1 };\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  addUnderscoreMethods(Model, modelMethods, 'attributes');\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    for (var i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed) this.trigger('update', this, options);\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.defaults({}, options, setOptions);\n      if (options.parse && !this._isModel(models)) models = this.parse(models, options);\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model;\n      for (var i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length != set.length || _.some(this.models, function(model, index) {\n          return model !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length) this.trigger('update', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      var id = this.modelId(this._isModel(obj) ? obj.attributes : obj);\n      return this._byId[obj] || this._byId[id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp, callbackOpts) {\n        if (wait) collection.add(model, callbackOpts);\n        if (success) success.call(callbackOpts.context, model, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function (attrs) {\n      return attrs[this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed.length ? removed : false;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function (model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (event === 'change') {\n        var prevId = this.modelId(model.previousAttributes());\n        var id = this.modelId(model.attributes);\n        if (prevId !== id) {\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,\n      foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,\n      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n      sortBy: 3, indexBy: 3};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  addUnderscoreMethods(Collection, collectionMethods, 'models');\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], _.bind(method, this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = _.bind(this.checkUrl, this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var root = path.slice(0, this.root.length - 1) + '/';\n      return root === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var root = this.root.slice(0, -1) || '/';\n          this.location.replace(root + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function (eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function (eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var root = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        root = root.slice(0, -1) || '/';\n      }\n      var url = root + fragment;\n\n      // Strip the hash and decode for matching.\n      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getHash(this.iframe.contentWindow))) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent` constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n",
    "(function (tree) {\n\ntree.functions = {\n    rgb: function (r, g, b) {\n        return this.rgba(r, g, b, 1.0);\n    },\n    rgba: function (r, g, b, a) {\n        var rgb = [r, g, b].map(function (c) { return number(c); });\n        a = number(a);\n        if (rgb.some(isNaN) || isNaN(a)) return null;\n        return new tree.Color(rgb, a);\n    },\n    // Only require val\n    stop: function (val) {\n        var color, mode;\n        if (arguments.length > 1) color = arguments[1];\n        if (arguments.length > 2) mode = arguments[2];\n\n        return {\n            is: 'tag',\n            val: val,\n            color: color,\n            mode: mode,\n            toString: function(env) {\n                return '\\n\\t<stop value=\"' + val.ev(env) + '\"' +\n                    (color ? ' color=\"' + color.ev(env) + '\" ' : '') +\n                    (mode ? ' mode=\"' + mode.ev(env) + '\" ' : '') +\n                    '/>';\n            }\n        };\n    },\n    hsl: function (h, s, l) {\n        return this.hsla(h, s, l, 1.0);\n    },\n    hsla: function (h, s, l, a) {\n        h = (number(h) % 360) / 360;\n        s = number(s); l = number(l); a = number(a);\n        if ([h, s, l, a].some(isNaN)) return null;\n\n        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n            m1 = l * 2 - m2;\n\n        return this.rgba(hue(h + 1/3) * 255,\n                         hue(h)       * 255,\n                         hue(h - 1/3) * 255,\n                         a);\n\n        function hue(h) {\n            h = h < 0 ? h + 1 : (h > 1 ? h - 1 : h);\n            if      (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n            else if (h * 2 < 1) return m2;\n            else if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;\n            else                return m1;\n        }\n    },\n    hue: function (color) {\n        if (!('toHSL' in color)) return null;\n        return new tree.Dimension(Math.round(color.toHSL().h));\n    },\n    saturation: function (color) {\n        if (!('toHSL' in color)) return null;\n        return new tree.Dimension(Math.round(color.toHSL().s * 100), '%');\n    },\n    lightness: function (color) {\n        if (!('toHSL' in color)) return null;\n        return new tree.Dimension(Math.round(color.toHSL().l * 100), '%');\n    },\n    alpha: function (color) {\n        if (!('toHSL' in color)) return null;\n        return new tree.Dimension(color.toHSL().a);\n    },\n    saturate: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.s += amount.value / 100;\n        hsl.s = clamp(hsl.s);\n        return hsla(hsl);\n    },\n    desaturate: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.s -= amount.value / 100;\n        hsl.s = clamp(hsl.s);\n        return hsla(hsl);\n    },\n    lighten: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.l += amount.value / 100;\n        hsl.l = clamp(hsl.l);\n        return hsla(hsl);\n    },\n    darken: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.l -= amount.value / 100;\n        hsl.l = clamp(hsl.l);\n        return hsla(hsl);\n    },\n    fadein: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.a += amount.value / 100;\n        hsl.a = clamp(hsl.a);\n        return hsla(hsl);\n    },\n    fadeout: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n\n        hsl.a -= amount.value / 100;\n        hsl.a = clamp(hsl.a);\n        return hsla(hsl);\n    },\n    spin: function (color, amount) {\n        if (!('toHSL' in color)) return null;\n        var hsl = color.toHSL();\n        var hue = (hsl.h + amount.value) % 360;\n\n        hsl.h = hue < 0 ? 360 + hue : hue;\n\n        return hsla(hsl);\n    },\n    replace: function (entity, a, b) {\n        if (entity.is === 'field') {\n            return entity.toString + '.replace(' + a.toString() + ', ' + b.toString() + ')';\n        } else {\n            return entity.replace(a, b);\n        }\n    },\n    //\n    // Copyright (c) 2006-2009 Hampton Catlin, Nathan Weizenbaum, and Chris Eppstein\n    // http://sass-lang.com\n    //\n    mix: function (color1, color2, weight) {\n        var p = weight.value / 100.0;\n        var w = p * 2 - 1;\n        var a = color1.toHSL().a - color2.toHSL().a;\n\n        var w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n        var w2 = 1 - w1;\n\n        var rgb = [color1.rgb[0] * w1 + color2.rgb[0] * w2,\n                   color1.rgb[1] * w1 + color2.rgb[1] * w2,\n                   color1.rgb[2] * w1 + color2.rgb[2] * w2];\n\n        var alpha = color1.alpha * p + color2.alpha * (1 - p);\n\n        return new tree.Color(rgb, alpha);\n    },\n    greyscale: function (color) {\n        return this.desaturate(color, new tree.Dimension(100));\n    },\n    '%': function (quoted /* arg, arg, ...*/) {\n        var args = Array.prototype.slice.call(arguments, 1),\n            str = quoted.value;\n\n        for (var i = 0; i < args.length; i++) {\n            str = str.replace(/%s/,    args[i].value)\n                     .replace(/%[da]/, args[i].toString());\n        }\n        str = str.replace(/%%/g, '%');\n        return new tree.Quoted(str);\n    }\n};\n\nvar image_filter_functors = [\n    'emboss', 'blur', 'gray', 'sobel', 'edge-detect',\n    'x-gradient', 'y-gradient', 'sharpen'];\n\nfor (var i = 0; i < image_filter_functors.length; i++) {\n    var f = image_filter_functors[i];\n    tree.functions[f] = (function(f) {\n        return function() {\n            return new tree.ImageFilter(f);\n        };\n    })(f);\n}\n\ntree.functions['agg-stack-blur'] = function(x, y) {\n    return new tree.ImageFilter('agg-stack-blur', [x, y]);\n};\n\ntree.functions['scale-hsla'] = function(h0,h1,s0,s1,l0,l1,a0,a1) {\n    return new tree.ImageFilter('scale-hsla', [h0,h1,s0,s1,l0,l1,a0,a1]);\n};\n\nfunction hsla(h) {\n    return tree.functions.hsla(h.h, h.s, h.l, h.a);\n}\n\nfunction number(n) {\n    if (n instanceof tree.Dimension) {\n        return parseFloat(n.unit == '%' ? n.value / 100 : n.value);\n    } else if (typeof(n) === 'number') {\n        return n;\n    } else {\n        return NaN;\n    }\n}\n\nfunction clamp(val) {\n    return Math.min(1, Math.max(0, val));\n}\n\n})(require('./tree'));\n",
    "var util = require('util'),\n    fs = require('fs'),\n    path = require('path');\n\n\nfunction getVersion() {\n    if (process.browser) {\n        return require('../../package.json').version.split('.');\n    } else if (parseInt(process.version.split('.')[1], 10) > 4) {\n        return require('../../package.json').version.split('.');\n    } else {\n        // older node\n        var package_json = JSON.parse(fs.readFileSync(path.join(__dirname,'../../package.json')));\n        return package_json.version.split('.');\n    }\n}\n\nvar carto = {\n    version: getVersion(),\n    Parser: require('./parser').Parser,\n    Renderer: require('./renderer').Renderer,\n    tree: require('./tree'),\n    RendererJS: require('./renderer_js'),\n    default_reference: require('./torque-reference'),\n\n    // @TODO\n    writeError: function(ctx, options) {\n        var message = '';\n        var extract = ctx.extract;\n        var error = [];\n\n        options = options || {};\n\n        if (options.silent) { return; }\n\n        options.indent = options.indent || '';\n\n        if (!('index' in ctx) || !extract) {\n            return util.error(options.indent + (ctx.stack || ctx.message));\n        }\n\n        if (typeof(extract[0]) === 'string') {\n            error.push(stylize((ctx.line - 1) + ' ' + extract[0], 'grey'));\n        }\n\n        if (extract[1] === '' && typeof extract[2] === 'undefined') {\n            extract[1] = '¶';\n        }\n        error.push(ctx.line + ' ' + extract[1].slice(0, ctx.column) +\n            stylize(stylize(extract[1][ctx.column], 'bold') +\n            extract[1].slice(ctx.column + 1), 'yellow'));\n\n        if (typeof(extract[2]) === 'string') {\n            error.push(stylize((ctx.line + 1) + ' ' + extract[2], 'grey'));\n        }\n        error = options.indent + error.join('\\n' + options.indent) + '\\033[0m\\n';\n\n        message = options.indent + message + stylize(ctx.message, 'red');\n        if (ctx.filename) (message += stylize(' in ', 'red') + ctx.filename);\n\n        util.error(message, error);\n\n        if (ctx.callLine) {\n            util.error(stylize('from ', 'red') + (ctx.filename || ''));\n            util.error(stylize(ctx.callLine, 'grey') + ' ' + ctx.callExtract);\n        }\n        if (ctx.stack) { util.error(stylize(ctx.stack, 'red')); }\n    }\n};\n\nrequire('./tree/call');\nrequire('./tree/color');\nrequire('./tree/comment');\nrequire('./tree/definition');\nrequire('./tree/dimension');\nrequire('./tree/element');\nrequire('./tree/expression');\nrequire('./tree/filterset');\nrequire('./tree/filter');\nrequire('./tree/field');\nrequire('./tree/keyword');\nrequire('./tree/layer');\nrequire('./tree/literal');\nrequire('./tree/operation');\nrequire('./tree/quoted');\nrequire('./tree/imagefilter');\nrequire('./tree/reference');\nrequire('./tree/rule');\nrequire('./tree/ruleset');\nrequire('./tree/selector');\nrequire('./tree/style');\nrequire('./tree/url');\nrequire('./tree/value');\nrequire('./tree/variable');\nrequire('./tree/zoom');\nrequire('./tree/invalid');\nrequire('./tree/fontset');\nrequire('./tree/frame_offset');\nrequire('./functions');\n\nfor (var k in carto) { exports[k] = carto[k]; }\n\n// Stylize a string\nfunction stylize(str, style) {\n    var styles = {\n        'bold' : [1, 22],\n        'inverse' : [7, 27],\n        'underline' : [4, 24],\n        'yellow' : [33, 39],\n        'green' : [32, 39],\n        'red' : [31, 39],\n        'grey' : [90, 39]\n    };\n    return '\\033[' + styles[style][0] + 'm' + str +\n           '\\033[' + styles[style][1] + 'm';\n}\n",
    "var carto = exports,\n    tree = require('./tree'),\n    _ = global._ || require('underscore');\n\n//    Token matching is done with the `$` function, which either takes\n//    a terminal string or regexp, or a non-terminal function to call.\n//    It also takes care of moving all the indices forwards.\ncarto.Parser = function Parser(env) {\n    var input,       // LeSS input string\n        i,           // current index in `input`\n        j,           // current chunk\n        temp,        // temporarily holds a chunk's state, for backtracking\n        memo,        // temporarily holds `i`, when backtracking\n        furthest,    // furthest index the parser has gone to\n        chunks,      // chunkified input\n        current,     // index of current chunk, in `input`\n        parser;\n\n    var that = this;\n\n    // This function is called after all files\n    // have been imported through `@import`.\n    var finish = function() {};\n\n    function save()    {\n        temp = chunks[j];\n        memo = i;\n        current = i;\n    }\n    function restore() {\n        chunks[j] = temp;\n        i = memo;\n        current = i;\n    }\n\n    function sync() {\n        if (i > current) {\n            chunks[j] = chunks[j].slice(i - current);\n            current = i;\n        }\n    }\n    //\n    // Parse from a token, regexp or string, and move forward if match\n    //\n    function $(tok) {\n        var match, args, length, c, index, endIndex, k;\n\n        // Non-terminal\n        if (tok instanceof Function) {\n            return tok.call(parser.parsers);\n        // Terminal\n        // Either match a single character in the input,\n        // or match a regexp in the current chunk (chunk[j]).\n        } else if (typeof(tok) === 'string') {\n            match = input.charAt(i) === tok ? tok : null;\n            length = 1;\n            sync();\n        } else {\n            sync();\n\n            match = tok.exec(chunks[j]);\n            if (match) {\n                length = match[0].length;\n            } else {\n                return null;\n            }\n        }\n\n        // The match is confirmed, add the match length to `i`,\n        // and consume any extra white-space characters (' ' || '\\n')\n        // which come after that. The reason for this is that LeSS's\n        // grammar is mostly white-space insensitive.\n        if (match) {\n            var mem = i += length;\n            endIndex = i + chunks[j].length - length;\n\n            while (i < endIndex) {\n                c = input.charCodeAt(i);\n                if (! (c === 32 || c === 10 || c === 9)) { break; }\n                i++;\n            }\n            chunks[j] = chunks[j].slice(length + (i - mem));\n            current = i;\n\n            if (chunks[j].length === 0 && j < chunks.length - 1) { j++; }\n\n            if (typeof(match) === 'string') {\n                return match;\n            } else {\n                return match.length === 1 ? match[0] : match;\n            }\n        }\n    }\n\n    // Same as $(), but don't change the state of the parser,\n    // just return the match.\n    function peek(tok) {\n        if (typeof(tok) === 'string') {\n            return input.charAt(i) === tok;\n        } else {\n            return !!tok.test(chunks[j]);\n        }\n    }\n\n    function extractErrorLine(style, errorIndex) {\n        return (style.slice(0, errorIndex).match(/\\n/g) || '').length + 1;\n    }\n\n\n    // Make an error object from a passed set of properties.\n    // Accepted properties:\n    // - `message`: Text of the error message.\n    // - `filename`: Filename where the error occurred.\n    // - `index`: Char. index where the error occurred.\n    function makeError(err) {\n        var einput;\n\n        _(err).defaults({\n            index: furthest,\n            filename: env.filename,\n            message: 'Parse error.',\n            line: 0,\n            column: -1\n        });\n\n        if (err.filename && that.env.inputs && that.env.inputs[err.filename]) {\n            einput = that.env.inputs[err.filename];\n        } else {\n            einput = input;\n        }\n\n        err.line = extractErrorLine(einput, err.index);\n        for (var n = err.index; n >= 0 && einput.charAt(n) !== '\\n'; n--) {\n            err.column++;\n        }\n\n        return new Error(_('<%=filename%>:<%=line%>:<%=column%> <%=message%>').template(err));\n    }\n\n    this.env = env = env || {};\n    this.env.filename = this.env.filename || null;\n    this.env.inputs = this.env.inputs || {};\n\n    // The Parser\n    parser = {\n\n        extractErrorLine: extractErrorLine,\n        //\n        // Parse an input string into an abstract syntax tree.\n        // Throws an error on parse errors.\n        parse: function(str) {\n            var root, start, end, zone, line, lines, buff = [], c, error = null;\n\n            i = j = current = furthest = 0;\n            chunks = [];\n            input = str.replace(/\\r\\n/g, '\\n');\n            if (env.filename) {\n                that.env.inputs[env.filename] = input;\n            }\n\n            var early_exit = false;\n\n            // Split the input into chunks.\n            chunks = (function (chunks) {\n                var j = 0,\n                    skip = /(?:@\\{[\\w-]+\\}|[^\"'`\\{\\}\\/\\(\\)\\\\])+/g,\n                    comment = /\\/\\*(?:[^*]|\\*+[^\\/*])*\\*+\\/|\\/\\/.*/g,\n                    string = /\"((?:[^\"\\\\\\r\\n]|\\\\.)*)\"|'((?:[^'\\\\\\r\\n]|\\\\.)*)'|`((?:[^`]|\\\\.)*)`/g,\n                    level = 0,\n                    match,\n                    chunk = chunks[0],\n                    inParam;\n\n                for (var i = 0, c, cc; i < input.length;) {\n                    skip.lastIndex = i;\n                    if (match = skip.exec(input)) {\n                        if (match.index === i) {\n                            i += match[0].length;\n                            chunk.push(match[0]);\n                        }\n                    }\n                    c = input.charAt(i);\n                    comment.lastIndex = string.lastIndex = i;\n\n                    if (match = string.exec(input)) {\n                        if (match.index === i) {\n                            i += match[0].length;\n                            chunk.push(match[0]);\n                            continue;\n                        }\n                    }\n\n                    if (!inParam && c === '/') {\n                        cc = input.charAt(i + 1);\n                        if (cc === '/' || cc === '*') {\n                            if (match = comment.exec(input)) {\n                                if (match.index === i) {\n                                    i += match[0].length;\n                                    chunk.push(match[0]);\n                                    continue;\n                                }\n                            }\n                        }\n                    }\n\n                    switch (c) {\n                        case '{': if (! inParam) { level ++;        chunk.push(c);                           break; }\n                        case '}': if (! inParam) { level --;        chunk.push(c); chunks[++j] = chunk = []; break; }\n                        case '(': if (! inParam) { inParam = true;  chunk.push(c);                           break; }\n                        case ')': if (  inParam) { inParam = false; chunk.push(c);                           break; }\n                        default:                                    chunk.push(c);\n                    }\n\n                    i++;\n                }\n                if (level !== 0) {\n                    error = {\n                        index: i - 1,\n                        type: 'Parse',\n                        message: (level > 0) ? \"missing closing `}`\" : \"missing opening `{`\"\n                    };\n                }\n\n                return chunks.map(function (c) { return c.join(''); });\n            })([[]]);\n\n            if (error) {\n                throw makeError(error);\n            }\n\n            // Start with the primary rule.\n            // The whole syntax tree is held under a Ruleset node,\n            // with the `root` property set to true, so no `{}` are\n            // output.\n            root = new tree.Ruleset([], $(this.parsers.primary));\n            root.root = true;\n\n            // Get an array of Ruleset objects, flattened\n            // and sorted according to specificitySort\n            root.toList = (function() {\n                var line, lines, column;\n                return function(env) {\n                    env.error = function(e) {\n                        if (!env.errors) env.errors = new Error('');\n                        if (env.errors.message) {\n                            env.errors.message += '\\n' + makeError(e).message;\n                        } else {\n                            env.errors.message = makeError(e).message;\n                        }\n                    };\n                    env.frames = env.frames || [];\n\n\n                    // call populates Invalid-caused errors\n                    var definitions = this.flatten([], [], env);\n                    definitions.sort(specificitySort);\n                    return definitions;\n                };\n            })();\n\n            // Sort rules by specificity: this function expects selectors to be\n            // split already.\n            //\n            // Written to be used as a .sort(Function);\n            // argument.\n            //\n            // [1, 0, 0, 467] > [0, 0, 1, 520]\n            var specificitySort = function(a, b) {\n                var as = a.specificity;\n                var bs = b.specificity;\n\n                if (as[0] != bs[0]) return bs[0] - as[0];\n                if (as[1] != bs[1]) return bs[1] - as[1];\n                if (as[2] != bs[2]) return bs[2] - as[2];\n                return bs[3] - as[3];\n            };\n\n            return root;\n        },\n\n        // Here in, the parsing rules/functions\n        //\n        // The basic structure of the syntax tree generated is as follows:\n        //\n        //   Ruleset ->  Rule -> Value -> Expression -> Entity\n        //\n        //  In general, most rules will try to parse a token with the `$()` function, and if the return\n        //  value is truly, will return a new node, of the relevant type. Sometimes, we need to check\n        //  first, before parsing, that's when we use `peek()`.\n        parsers: {\n            // The `primary` rule is the *entry* and *exit* point of the parser.\n            // The rules here can appear at any level of the parse tree.\n            //\n            // The recursive nature of the grammar is an interplay between the `block`\n            // rule, which represents `{ ... }`, the `ruleset` rule, and this `primary` rule,\n            // as represented by this simplified grammar:\n            //\n            //     primary  →  (ruleset | rule)+\n            //     ruleset  →  selector+ block\n            //     block    →  '{' primary '}'\n            //\n            // Only at one point is the primary rule not called from the\n            // block rule: at the root level.\n            primary: function() {\n                var node, root = [];\n\n                while ((node = $(this.rule) || $(this.ruleset) ||\n                               $(this.comment)) ||\n                               $(/^[\\s\\n]+/) || (node = $(this.invalid))) {\n                    if (node) root.push(node);\n                }\n                return root;\n            },\n\n            invalid: function () {\n                var chunk = $(/^[^;\\n]*[;\\n]/);\n\n                // To fail gracefully, match everything until a semicolon or linebreak.\n                if (chunk) {\n                    return new tree.Invalid(chunk, memo);\n                }\n            },\n\n            // We create a Comment node for CSS comments `/* */`,\n            // but keep the LeSS comments `//` silent, by just skipping\n            // over them.\n            comment: function() {\n                var comment;\n\n                if (input.charAt(i) !== '/') return;\n\n                if (input.charAt(i + 1) === '/') {\n                    return new tree.Comment($(/^\\/\\/.*/), true);\n                } else if (comment = $(/^\\/\\*(?:[^*]|\\*+[^\\/*])*\\*+\\/\\n?/)) {\n                    return new tree.Comment(comment);\n                }\n            },\n\n            // Entities are tokens which can be found inside an Expression\n            entities: {\n\n                // A string, which supports escaping \" and ' \"milky way\" 'he\\'s the one!'\n                quoted: function() {\n                    if (input.charAt(i) !== '\"' && input.charAt(i) !== \"'\") return;\n                    var str = $(/^\"((?:[^\"\\\\\\r\\n]|\\\\.)*)\"|'((?:[^'\\\\\\r\\n]|\\\\.)*)'/);\n                    if (str) {\n                        return new tree.Quoted(str[1] || str[2]);\n                    }\n                },\n\n                // A reference to a Mapnik field, like [NAME]\n                // Behind the scenes, this has the same representation, but Carto\n                // needs to be careful to warn when unsupported operations are used.\n                field: function() {\n                    if (! $('[')) return;\n                    var field_name = $(/(^[^\\]]+)/);\n                    if (! $(']')) return;\n                    if (field_name) return new tree.Field(field_name[1]);\n                },\n\n                // This is a comparison operator\n                comparison: function() {\n                    var str = $(/^=~|=|!=|<=|>=|<|>/);\n                    if (str) {\n                        return str;\n                    }\n                },\n\n                // A catch-all word, such as: hard-light\n                // These can start with either a letter or a dash (-),\n                // and then contain numbers, underscores, and letters.\n                keyword: function() {\n                    var k = $(/^[A-Za-z-]+[A-Za-z-0-9_]*/);\n                    if (k) { return new tree.Keyword(k); }\n                },\n\n                // A function call like rgb(255, 0, 255)\n                // The arguments are parsed with the `entities.arguments` parser.\n                call: function() {\n                    var name, args;\n\n                    if (!(name = /^([\\w\\-]+|%)\\(/.exec(chunks[j]))) return;\n\n                    name = name[1];\n\n                    if (name === 'url') {\n                        // url() is handled by the url parser instead\n                        return null;\n                    } else {\n                        i += name.length;\n                    }\n\n                    $('('); // Parse the '(' and consume whitespace.\n\n                    args = $(this.entities['arguments']);\n\n                    if (!$(')')) return;\n\n                    if (name) {\n                        return new tree.Call(name, args, i);\n                    }\n                },\n                // Arguments are comma-separated expressions\n                'arguments': function() {\n                    var args = [], arg;\n\n                    while (arg = $(this.expression)) {\n                        args.push(arg);\n                        if (! $(',')) { break; }\n                    }\n\n                    return args;\n                },\n                literal: function() {\n                    return $(this.entities.dimension) ||\n                        $(this.entities.keywordcolor) ||\n                        $(this.entities.hexcolor) ||\n                        $(this.entities.quoted);\n                },\n\n                // Parse url() tokens\n                //\n                // We use a specific rule for urls, because they don't really behave like\n                // standard function calls. The difference is that the argument doesn't have\n                // to be enclosed within a string, so it can't be parsed as an Expression.\n                url: function() {\n                    var value;\n\n                    if (input.charAt(i) !== 'u' || !$(/^url\\(/)) return;\n                    value = $(this.entities.quoted) || $(this.entities.variable) ||\n                            $(/^[\\-\\w%@$\\/.&=:;#+?~]+/) || '';\n                    if (! $(')')) {\n                        return new tree.Invalid(value, memo, 'Missing closing ) in URL.');\n                    } else {\n                        return new tree.URL((typeof value.value !== 'undefined' ||\n                            value instanceof tree.Variable) ?\n                            value : new tree.Quoted(value));\n                    }\n                },\n\n                // A Variable entity, such as `@fink`, in\n                //\n                //     width: @fink + 2px\n                //\n                // We use a different parser for variable definitions,\n                // see `parsers.variable`.\n                variable: function() {\n                    var name, index = i;\n\n                    if (input.charAt(i) === '@' && (name = $(/^@[\\w-]+/))) {\n                        return new tree.Variable(name, index, env.filename);\n                    }\n                },\n\n                hexcolor: function() {\n                    var rgb;\n                    if (input.charAt(i) === '#' && (rgb = $(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/))) {\n                        return new tree.Color(rgb[1]);\n                    }\n                },\n\n                keywordcolor: function() {\n                    var rgb = chunks[j].match(/^[a-z]+/);\n                    if (rgb && rgb[0] in tree.Reference.data.colors) {\n                        return new tree.Color(tree.Reference.data.colors[$(/^[a-z]+/)]);\n                    }\n                },\n\n                // A Dimension, that is, a number and a unit. The only\n                // unit that has an effect is %\n                dimension: function() {\n                    var c = input.charCodeAt(i);\n                    if ((c > 57 || c < 45) || c === 47) return;\n                    var value = $(/^(-?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?)(\\%|\\w+)?/);\n                    if (value) {\n                        return new tree.Dimension(value[1], value[2], memo);\n                    }\n                }\n            },\n\n            // The variable part of a variable definition.\n            // Used in the `rule` parser. Like @fink:\n            variable: function() {\n                var name;\n\n                if (input.charAt(i) === '@' && (name = $(/^(@[\\w-]+)\\s*:/))) {\n                    return name[1];\n                }\n            },\n\n            // Entities are the smallest recognized token,\n            // and can be found inside a rule's value.\n            entity: function() {\n                return $(this.entities.call) ||\n                    $(this.entities.literal) ||\n                    $(this.entities.field) ||\n                    $(this.entities.variable) ||\n                    $(this.entities.url) ||\n                    $(this.entities.keyword);\n            },\n\n            // A Rule terminator. Note that we use `peek()` to check for '}',\n            // because the `block` rule will be expecting it, but we still need to make sure\n            // it's there, if ';' was ommitted.\n            end: function() {\n                return $(';') || peek('}');\n            },\n\n            // Elements are the building blocks for Selectors. They consist of\n            // an element name, such as a tag a class, or `*`.\n            element: function() {\n                var e = $(/^(?:[.#][\\w\\-]+|\\*|Map)/);\n                if (e) return new tree.Element(e);\n            },\n\n            // Attachments allow adding multiple lines, polygons etc. to an\n            // object. There can only be one attachment per selector.\n            attachment: function() {\n                var s = $(/^::([\\w\\-]+(?:\\/[\\w\\-]+)*)/);\n                if (s) return s[1];\n            },\n\n            // Selectors are made out of one or more Elements, see above.\n            selector: function() {\n                var a, attachment,\n                    e, elements = [],\n                    f, filters = new tree.Filterset(),\n                    z, zooms = [],\n                    frame_offset = tree.FrameOffset.none;\n                    segments = 0, conditions = 0;\n\n                while (\n                        (e = $(this.element)) ||\n                        (z = $(this.zoom)) ||\n                        (fo = $(this.frame_offset)) ||\n                        (f = $(this.filter)) ||\n                        (a = $(this.attachment))\n                    ) {\n                    segments++;\n                    if (e) {\n                        elements.push(e);\n                    } else if (z) {\n                        zooms.push(z);\n                        conditions++;\n                    } else if (fo) {\n                        frame_offset = fo;\n                        conditions++;\n                    } else if (f) {\n                        var err = filters.add(f);\n                        if (err) {\n                            throw makeError({\n                                message: err,\n                                index: i - 1\n                            });\n                        }\n                        conditions++;\n                    } else if (attachment) {\n                        throw makeError({\n                            message: 'Encountered second attachment name.',\n                            index: i - 1\n                        });\n                    } else {\n                        attachment = a;\n                    }\n\n                    var c = input.charAt(i);\n                    if (c === '{' || c === '}' || c === ';' || c === ',') { break; }\n                }\n\n                if (segments) {\n                    return new tree.Selector(filters, zooms, frame_offset, elements, attachment, conditions, memo);\n                }\n            },\n\n            filter: function() {\n                save();\n                var key, op, val;\n                if (! $('[')) return;\n                if (key = $(/^[a-zA-Z0-9\\-_]+/) ||\n                    $(this.entities.quoted) ||\n                    $(this.entities.variable) ||\n                    $(this.entities.keyword) ||\n                    $(this.entities.field)) {\n                    // TODO: remove at 1.0.0\n                    if (key instanceof tree.Quoted) {\n                        key = new tree.Field(key.toString());\n                    }\n                    if ((op = $(this.entities.comparison)) &&\n                        (val = $(this.entities.quoted) ||\n                             $(this.entities.variable) ||\n                             $(this.entities.dimension) ||\n                             $(this.entities.keyword) ||\n                             $(this.entities.field))) {\n                        if (! $(']')) {\n                            throw makeError({\n                                message: 'Missing closing ] of filter.',\n                                index: memo - 1\n                            });\n                        }\n                        if (!key.is) key = new tree.Field(key);\n                        return new tree.Filter(key, op, val, memo, env.filename);\n                    }\n                }\n            },\n\n            frame_offset: function() {\n                save();\n                var op, val;\n                if ($(/^\\[\\s*frame-offset/g) &&\n                    (op = $(this.entities.comparison)) &&\n                    (val = $(/^\\d+/)) &&\n                    $(']'))  {\n                        return tree.FrameOffset(op, val, memo);\n                }\n            },\n\n            zoom: function() {\n                save();\n                var op, val;\n                if ($(/^\\[\\s*zoom/g) &&\n                    (op = $(this.entities.comparison)) &&\n                    (val = $(this.entities.variable) || $(this.entities.dimension)) && $(']')) {\n                        return new tree.Zoom(op, val, memo);\n                } else {\n                    // backtrack\n                    restore();\n                }\n            },\n\n            // The `block` rule is used by `ruleset`\n            // It's a wrapper around the `primary` rule, with added `{}`.\n            block: function() {\n                var content;\n\n                if ($('{') && (content = $(this.primary)) && $('}')) {\n                    return content;\n                }\n            },\n\n            // div, .class, body > p {...}\n            ruleset: function() {\n                var selectors = [], s, f, l, rules, filters = [];\n                save();\n\n                while (s = $(this.selector)) {\n                    selectors.push(s);\n                    while ($(this.comment)) {}\n                    if (! $(',')) { break; }\n                    while ($(this.comment)) {}\n                }\n                if (s) {\n                    while ($(this.comment)) {}\n                }\n\n                if (selectors.length > 0 && (rules = $(this.block))) {\n                    if (selectors.length === 1 &&\n                        selectors[0].elements.length &&\n                        selectors[0].elements[0].value === 'Map') {\n                        var rs = new tree.Ruleset(selectors, rules);\n                        rs.isMap = true;\n                        return rs;\n                    }\n                    return new tree.Ruleset(selectors, rules);\n                } else {\n                    // Backtrack\n                    restore();\n                }\n            },\n\n            rule: function() {\n                var name, value, c = input.charAt(i);\n                save();\n\n                if (c === '.' || c === '#') { return; }\n\n                if (name = $(this.variable) || $(this.property)) {\n                    value = $(this.value);\n\n                    if (value && $(this.end)) {\n                        return new tree.Rule(name, value, memo, env.filename);\n                    } else {\n                        furthest = i;\n                        restore();\n                    }\n                }\n            },\n\n            font: function() {\n                var value = [], expression = [], weight, font, e;\n\n                while (e = $(this.entity)) {\n                    expression.push(e);\n                }\n\n                value.push(new tree.Expression(expression));\n\n                if ($(',')) {\n                    while (e = $(this.expression)) {\n                        value.push(e);\n                        if (! $(',')) { break; }\n                    }\n                }\n                return new tree.Value(value);\n            },\n\n            // A Value is a comma-delimited list of Expressions\n            // In a Rule, a Value represents everything after the `:`,\n            // and before the `;`.\n            value: function() {\n                var e, expressions = [];\n\n                while (e = $(this.expression)) {\n                    expressions.push(e);\n                    if (! $(',')) { break; }\n                }\n\n                if (expressions.length > 1) {\n                    return new tree.Value(expressions.map(function(e) {\n                        return e.value[0];\n                    }));\n                } else if (expressions.length === 1) {\n                    return new tree.Value(expressions);\n                }\n            },\n            // A sub-expression, contained by parenthensis\n            sub: function() {\n                var e;\n\n                if ($('(') && (e = $(this.expression)) && $(')')) {\n                    return e;\n                }\n            },\n            // This is a misnomer because it actually handles multiplication\n            // and division.\n            multiplication: function() {\n                var m, a, op, operation;\n                if (m = $(this.operand)) {\n                    while ((op = ($('/') || $('*') || $('%'))) && (a = $(this.operand))) {\n                        operation = new tree.Operation(op, [operation || m, a], memo);\n                    }\n                    return operation || m;\n                }\n            },\n            addition: function() {\n                var m, a, op, operation;\n                if (m = $(this.multiplication)) {\n                    while ((op = $(/^[-+]\\s+/) || (input.charAt(i - 1) != ' ' && ($('+') || $('-')))) &&\n                           (a = $(this.multiplication))) {\n                        operation = new tree.Operation(op, [operation || m, a], memo);\n                    }\n                    return operation || m;\n                }\n            },\n\n            // An operand is anything that can be part of an operation,\n            // such as a Color, or a Variable\n            operand: function() {\n                return $(this.sub) || $(this.entity);\n            },\n\n            // Expressions either represent mathematical operations,\n            // or white-space delimited Entities.  @var * 2\n            expression: function() {\n                var e, delim, entities = [], d;\n\n                while (e = $(this.addition) || $(this.entity)) {\n                    entities.push(e);\n                }\n\n                if (entities.length > 0) {\n                    return new tree.Expression(entities);\n                }\n            },\n            property: function() {\n                var name = $(/^(([a-z][-a-z_0-9]*\\/)?\\*?-?[-a-z_0-9]+)\\s*:/);\n                if (name) return name[1];\n            }\n        }\n    };\n    return parser;\n};\n",
    "var _ = global._ || require('underscore');\nvar carto = require('./index');\n\ncarto.Renderer = function Renderer(env, options) {\n    this.env = env || {};\n    this.options = options || {};\n    this.options.mapnik_version = this.options.mapnik_version || '3.0.0';\n};\n\n/**\n * Prepare a MSS document (given as an string) into a\n * XML Style fragment (mostly useful for debugging)\n *\n * @param {String} data the mss contents as a string.\n */\ncarto.Renderer.prototype.renderMSS = function render(data) {\n    // effects is a container for side-effects, which currently\n    // are limited to FontSets.\n    var env = _(this.env).defaults({\n        benchmark: false,\n        validation_data: false,\n        effects: []\n    });\n\n    if (!carto.tree.Reference.setVersion(this.options.mapnik_version)) {\n        throw new Error(\"Could not set mapnik version to \" + this.options.mapnik_version);\n    }\n\n    var output = [];\n    var styles = [];\n\n    if (env.benchmark) console.time('Parsing MSS');\n    var parser = (carto.Parser(env)).parse(data);\n    if (env.benchmark) console.timeEnd('Parsing MSS');\n\n    if (env.benchmark) console.time('Rule generation');\n    var rule_list = parser.toList(env);\n    if (env.benchmark) console.timeEnd('Rule generation');\n\n    if (env.benchmark) console.time('Rule inheritance');\n    var rules = inheritDefinitions(rule_list, env);\n    if (env.benchmark) console.timeEnd('Rule inheritance');\n\n    if (env.benchmark) console.time('Style sort');\n    var sorted = sortStyles(rules,env);\n    if (env.benchmark) console.timeEnd('Style sort');\n\n    if (env.benchmark) console.time('Total Style generation');\n    for (var k = 0, rule, style_name; k < sorted.length; k++) {\n        rule = sorted[k];\n        style_name = 'style' + (rule.attachment !== '__default__' ? '-' + rule.attachment : '');\n        styles.push(style_name);\n        var bench_name = '\\tStyle \"'+style_name+'\" (#'+k+') toXML';\n        if (env.benchmark) console.time(bench_name);\n        // env.effects can be modified by this call\n        output.push(carto.tree.StyleXML(style_name, rule.attachment, rule, env));\n        if (env.benchmark) console.timeEnd(bench_name);\n    }\n    if (env.benchmark) console.timeEnd('Total Style generation');\n    if (env.errors) throw env.errors;\n    return output.join('\\n');\n};\n\n/**\n * Prepare a MML document (given as an object) into a\n * fully-localized XML file ready for Mapnik2 consumption\n *\n * @param {String} m - the JSON file as a string.\n */\ncarto.Renderer.prototype.render = function render(m) {\n    // effects is a container for side-effects, which currently\n    // are limited to FontSets.\n    var env = _(this.env).defaults({\n        benchmark: false,\n        validation_data: false,\n        effects: [],\n        ppi: 90.714\n    });\n\n    if (!carto.tree.Reference.setVersion(this.options.mapnik_version)) {\n        throw new Error(\"Could not set mapnik version to \" + this.options.mapnik_version);\n    }\n\n    var output = [];\n\n    // Transform stylesheets into definitions.\n    var definitions = _(m.Stylesheet).chain()\n        .map(function(s) {\n            if (typeof s == 'string') {\n                throw new Error(\"Stylesheet object is expected not a string: '\" + s + \"'\");\n            }\n            // Passing the environment from stylesheet to stylesheet,\n            // allows frames and effects to be maintained.\n            env = _(env).extend({filename:s.id});\n\n            var time = +new Date(),\n                root = (carto.Parser(env)).parse(s.data);\n            if (env.benchmark)\n                console.warn('Parsing time: ' + (new Date() - time) + 'ms');\n            return root.toList(env);\n        })\n        .flatten()\n        .value();\n\n    function appliesTo(name, classIndex) {\n        return function(definition) {\n            return definition.appliesTo(l.name, classIndex);\n        };\n    }\n\n    // Iterate through layers and create styles custom-built\n    // for each of them, and apply those styles to the layers.\n    var styles, l, classIndex, rules, sorted, matching;\n    for (var i = 0; i < m.Layer.length; i++) {\n        l = m.Layer[i];\n        styles = [];\n        classIndex = {};\n\n        if (env.benchmark) console.warn('processing layer: ' + l.id);\n        // Classes are given as space-separated alphanumeric strings.\n        var classes = (l['class'] || '').split(/\\s+/g);\n        for (var j = 0; j < classes.length; j++) {\n            classIndex[classes[j]] = true;\n        }\n        matching = definitions.filter(appliesTo(l.name, classIndex));\n        rules = inheritDefinitions(matching, env);\n        sorted = sortStyles(rules, env);\n\n        for (var k = 0, rule, style_name; k < sorted.length; k++) {\n            rule = sorted[k];\n            style_name = l.name + (rule.attachment !== '__default__' ? '-' + rule.attachment : '');\n\n            // env.effects can be modified by this call\n            var styleXML = carto.tree.StyleXML(style_name, rule.attachment, rule, env);\n\n            if (styleXML) {\n                output.push(styleXML);\n                styles.push(style_name);\n            }\n        }\n\n        output.push(carto.tree.LayerXML(l, styles));\n    }\n\n    output.unshift(env.effects.map(function(e) {\n        return e.toXML(env);\n    }).join('\\n'));\n\n    var map_properties = getMapProperties(m, definitions, env);\n\n    // Exit on errors.\n    if (env.errors) throw env.errors;\n\n    // Pass TileJSON and other custom parameters through to Mapnik XML.\n    var parameters = _(m).reduce(function(memo, v, k) {\n        if (!v && v !== 0) return memo;\n\n        switch (k) {\n        // Known skippable properties.\n        case 'srs':\n        case 'Layer':\n        case 'Stylesheet':\n            break;\n        // Non URL-bound TileJSON properties.\n        case 'bounds':\n        case 'center':\n        case 'minzoom':\n        case 'maxzoom':\n        case 'version':\n            memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            break;\n        // Properties that require CDATA.\n        case 'name':\n        case 'description':\n        case 'legend':\n        case 'attribution':\n        case 'template':\n            memo.push('  <Parameter name=\"' + k + '\"><![CDATA[' + v + ']]></Parameter>');\n            break;\n        // Mapnik image format.\n        case 'format':\n            memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            break;\n        // Mapnik interactivity settings.\n        case 'interactivity':\n            memo.push('  <Parameter name=\"interactivity_layer\">' + v.layer + '</Parameter>');\n            memo.push('  <Parameter name=\"interactivity_fields\">' + v.fields + '</Parameter>');\n            break;\n        // Support any additional scalar properties.\n        default:\n            if ('string' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\"><![CDATA[' + v + ']]></Parameter>');\n            } else if ('number' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            } else if ('boolean' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            }\n            break;\n        }\n        return memo;\n    }, []);\n    if (parameters.length) output.unshift(\n        '<Parameters>\\n' +\n        parameters.join('\\n') +\n        '\\n</Parameters>\\n'\n    );\n\n    var properties = _(map_properties).map(function(v) { return ' ' + v; }).join('');\n\n    output.unshift(\n        '<?xml version=\"1.0\" ' +\n        'encoding=\"utf-8\"?>\\n' +\n        '<!DOCTYPE Map[]>\\n' +\n        '<Map' + properties +'>\\n');\n    output.push('</Map>');\n    return output.join('\\n');\n};\n\n/**\n * This function currently modifies 'current'\n * @param {Array}  current  current list of rules\n * @param {Object} definition a Definition object to add to the rules\n * @param {Object} byFilter an object/dictionary of existing filters. This is\n * actually keyed `attachment->filter`\n * @param {Object} env the current environment\n*/\nfunction addRules(current, definition, byFilter, env) {\n    var newFilters = definition.filters,\n        newRules = definition.rules,\n        updatedFilters, clone, previous;\n\n    // The current definition might have been split up into\n    // multiple definitions already.\n    for (var k = 0; k < current.length; k++) {\n        updatedFilters = current[k].filters.cloneWith(newFilters);\n        if (updatedFilters) {\n            previous = byFilter[updatedFilters];\n            if (previous) {\n                // There's already a definition with those exact\n                // filters. Add the current definitions' rules\n                // and stop processing it as the existing rule\n                // has already gone down the inheritance chain.\n                previous.addRules(newRules);\n            } else {\n                clone = current[k].clone(updatedFilters);\n                // Make sure that we're only maintaining the clone\n                // when we did actually add rules. If not, there's\n                // no need to keep the clone around.\n                if (clone.addRules(newRules)) {\n                    // We inserted an element before this one, so we need\n                    // to make sure that in the next loop iteration, we're\n                    // not performing the same task for this element again,\n                    // hence the k++.\n                    byFilter[updatedFilters] = clone;\n                    current.splice(k, 0, clone);\n                    k++;\n                }\n            }\n        } else if (updatedFilters === null) {\n            // if updatedFilters is null, then adding the filters doesn't\n            // invalidate or split the selector, so we addRules to the\n            // combined selector\n\n            // Filters can be added, but they don't change the\n            // filters. This means we don't have to split the\n            // definition.\n            //\n            // this is cloned here because of shared classes, see\n            // sharedclass.mss\n            current[k] = current[k].clone();\n            current[k].addRules(newRules);\n        }\n        // if updatedFeatures is false, then the filters split the rule,\n        // so they aren't the same inheritance chain\n    }\n    return current;\n}\n\n/**\n * Apply inherited styles from their ancestors to them.\n *\n * called either once per render (in the case of mss) or per layer\n * (for mml)\n *\n * @param {Object} definitions - a list of definitions objects\n *   that contain .rules\n * @param {Object} env - the environment\n * @return {Array<Array>} an array of arrays is returned,\n *   in which each array refers to a specific attachment\n */\nfunction inheritDefinitions(definitions, env) {\n    var inheritTime = +new Date();\n    // definitions are ordered by specificity,\n    // high (index 0) to low\n    var byAttachment = {},\n        byFilter = {};\n    var result = [];\n    var current, previous, attachment;\n\n    // Evaluate the filters specified by each definition with the given\n    // environment to correctly resolve variable references\n    definitions.forEach(function(d) {\n        d.filters.ev(env);\n    });\n\n    for (var i = 0; i < definitions.length; i++) {\n\n        attachment = definitions[i].attachment;\n        current = [definitions[i]];\n\n        if (!byAttachment[attachment]) {\n            byAttachment[attachment] = [];\n            byAttachment[attachment].attachment = attachment;\n            byFilter[attachment] = {};\n            result.push(byAttachment[attachment]);\n        }\n\n        // Iterate over all subsequent rules.\n        for (var j = i + 1; j < definitions.length; j++) {\n            if (definitions[j].attachment === attachment) {\n                // Only inherit rules from the same attachment.\n                current = addRules(current, definitions[j], byFilter[attachment], env);\n            }\n        }\n\n        for (var k = 0; k < current.length; k++) {\n            byFilter[attachment][current[k].filters] = current[k];\n            byAttachment[attachment].push(current[k]);\n        }\n    }\n\n    if (env.benchmark) console.warn('Inheritance time: ' + ((new Date() - inheritTime)) + 'ms');\n\n    return result;\n\n}\n\n// Sort styles by the minimum index of their rules.\n// This sorts a slice of the styles, so it returns a sorted\n// array but does not change the input.\nfunction sortStylesIndex(a, b) { return b.index - a.index; }\nfunction sortStyles(styles, env) {\n    for (var i = 0; i < styles.length; i++) {\n        var style = styles[i];\n        style.index = Infinity;\n        for (var b = 0; b < style.length; b++) {\n            var rules = style[b].rules;\n            for (var r = 0; r < rules.length; r++) {\n                var rule = rules[r];\n                if (rule.index < style.index) {\n                    style.index = rule.index;\n                }\n            }\n        }\n    }\n\n    var result = styles.slice();\n    result.sort(sortStylesIndex);\n    return result;\n}\n\n/**\n * Find a rule like Map { background-color: #fff; },\n * if any, and return a list of properties to be inserted\n * into the <Map element of the resulting XML. Translates\n * properties of the mml object at `m` directly into XML\n * properties.\n *\n * @param {Object} m the mml object.\n * @param {Array} definitions the output of toList.\n * @param {Object} env\n * @return {String} rendered properties.\n */\nfunction getMapProperties(m, definitions, env) {\n    var rules = {};\n    var symbolizers = carto.tree.Reference.data.symbolizers.map;\n\n    _(m).each(function(value, key) {\n        if (key in symbolizers) rules[key] = key + '=\"' + value + '\"';\n    });\n\n    definitions.filter(function(r) {\n        return r.elements.join('') === 'Map';\n    }).forEach(function(r) {\n        for (var i = 0; i < r.rules.length; i++) {\n            var key = r.rules[i].name;\n            if (!(key in symbolizers)) {\n                env.error({\n                    message: 'Rule ' + key + ' not allowed for Map.',\n                    index: r.rules[i].index\n                });\n            }\n            rules[key] = r.rules[i].ev(env).toXML(env);\n        }\n    });\n    return rules;\n}\n\nmodule.exports = carto;\nmodule.exports.addRules = addRules;\nmodule.exports.inheritDefinitions = inheritDefinitions;\nmodule.exports.sortStyles = sortStyles;\n",
    "(function(carto) {\nvar tree = require('./tree');\nvar _ = global._ || require('underscore');\n\n\nfunction CartoCSS(style, options) {\n  this.options = options || {};\n  this.imageURLs = [];\n  if(style) {\n    this.setStyle(style);\n  }\n}\n\nCartoCSS.Layer = function(shader, options) {\n  this.options = options;\n  this.shader = shader;\n};\n\n\nCartoCSS.Layer.prototype = {\n\n  fullName: function() {\n    return this.shader.attachment;\n  },\n\n  name: function() {\n    return this.fullName().split('::')[0];\n  },\n\n  // frames this layer need to be rendered\n  frames: function() {\n    return this.shader.frames;\n  },\n\n  attachment: function() {\n    return this.fullName().split('::')[1];\n  },\n\n  eval: function(prop) {\n    var p = this.shader[prop];\n    if (!p || !p.style) return;\n    return p.style({}, { zoom: 0, 'frame-offset': 0 });\n  },\n\n  /*\n   * `props`: feature properties\n   * `context`: rendering properties, i.e zoom\n   */\n  getStyle: function(props, context) {\n    var style = {};\n    for(var i in this.shader) {\n      if(i !== 'attachment' && i !== 'zoom' && i !== 'frames' && i !== 'symbolizers') {\n        style[i] = this.shader[i].style(props, context);\n      }\n    }\n    return style;\n  },\n\n  /**\n   * return the symbolizers that need to be rendered with \n   * this style. The order is the rendering order.\n   * @returns a list with 3 possible values 'line', 'marker', 'polygon'\n   */\n  getSymbolizers: function() {\n    return this.shader.symbolizers;\n  },\n\n  /**\n   * returns if the style varies with some feature property.\n   * Useful to optimize rendering\n   */\n  isVariable: function() {\n    for(var i in this.shader) {\n      if(i !== 'attachment' && i !== 'zoom' && i !== 'frames' && i !== 'symbolizers') {\n        if (!this.shader[i].constant) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n\n  getShader: function() {\n    return this.shader;\n  },\n\n  /**\n   * returns true if a feature needs to be rendered\n   */\n  filter: function(featureType, props, context) {\n    for(var i in this.shader) {\n     var s = this.shader[i](props, context);\n     if(s) {\n       return true;\n     }\n    }\n    return false;\n  },\n\n  //\n  // given a geoemtry type returns the transformed one acording the CartoCSS\n  // For points there are two kind of types: point and sprite, the first one \n  // is a circle, second one is an image sprite\n  //\n  // the other geometry types are the same than geojson (polygon, linestring...)\n  //\n  transformGeometry: function(type) {\n    return type;\n  },\n\n  transformGeometries: function(geojson) {\n    return geojson;\n  }\n\n};\n\nCartoCSS.prototype = {\n\n  setStyle: function(style) {\n    var layers = this.parse(style);\n    if(!layers) {\n      throw new Error(this.parse_env.errors);\n    }\n    this.layers = layers.map(function(shader) {\n        return new CartoCSS.Layer(shader);\n    });\n  },\n\n  getLayers: function() {\n    return this.layers;\n  },\n\n  getDefault: function() {\n    return this.findLayer({ attachment: '__default__' });\n  },\n\n  findLayer: function(where) {\n    return _.find(this.layers, function(value) {\n      for (var key in where) {\n        var v = value[key];\n        if (typeof(v) === 'function') {\n          v = v.call(value);\n        }\n        if (where[key] !== v) return false;\n      }\n      return true;\n    });\n  },\n\n  _createFn: function(ops) {\n    var body = ops.join('\\n');\n    if(this.options.debug) console.log(body);\n    return Function(\"data\",\"ctx\", \"var _value = null; \" +  body + \"; return _value; \");\n  },\n\n  _compile: function(shader) {\n    if(typeof shader === 'string') {\n        shader = eval(\"(function() { return \" + shader +\"; })()\");\n    }\n    this.shader_src = shader;\n    for(var attr in shader) {\n        var c = mapper[attr];\n        if(c) {\n            this.compiled[c] = eval(\"(function() { return shader[attr]; })();\");\n        }\n    }\n  },\n  getImageURLs: function(){\n    return this.imageURLs;\n  },\n\n  parse: function(cartocss) {\n    var parse_env = {\n      frames: [],\n      errors: [],\n      error: function(obj) {\n        this.errors.push(obj);\n      }\n    };\n    this.parse_env = parse_env;\n\n    var ruleset = null;\n    try {\n      ruleset = (new carto.Parser(parse_env)).parse(cartocss);\n    } catch(e) {\n      // add the style.mss string to match the response from the server\n      parse_env.errors.push(e.message);\n      return;\n    }\n    if(ruleset) {\n\n      function defKey(def) {\n        return def.elements[0] + \"::\" + def.attachment;\n      }\n      var defs = ruleset.toList(parse_env);\n      defs.reverse();\n      // group by elements[0].value::attachment\n      var layers = {};\n      for(var i = 0; i < defs.length; ++i) {\n        var def = defs[i];\n        var key = defKey(def);\n        var layer = layers[key] = (layers[key] || {\n          symbolizers: []\n        });\n        for(var u = 0; u<def.rules.length; u++){\n            if(def.rules[u].name === \"marker-file\" || def.rules[u].name === \"point-file\"){\n                var value = def.rules[u].value.value[0].value[0].value.value;\n                this.imageURLs.push(value);\n            }\n        } \n        layer.frames = [];\n        layer.zoom = tree.Zoom.all;\n        var props = def.toJS(parse_env);\n        if (this.options.debug) console.log(\"props\", props);\n        for(var v in props) {\n          var lyr = layer[v] = layer[v] || {\n            constant: false,\n            symbolizer: null,\n            js: [],\n            index: 0\n          };\n          // build javascript statements\n          lyr.js.push(props[v].map(function(a) { return a.js; }).join('\\n'));\n          // get symbolizer for prop\n          lyr.symbolizer = _.first(props[v].map(function(a) { return a.symbolizer; }));\n          // serach the max index to know rendering order\n          lyr.index = _.max(props[v].map(function(a) { return a.index; }).concat(lyr.index));\n          lyr.constant = !_.any(props[v].map(function(a) { return !a.constant; }));\n        }\n      }\n\n      var ordered_layers = [];\n      if (this.options.debug) console.log(layers);\n\n      var done = {};\n      for(var i = 0; i < defs.length; ++i) {\n        var def = defs[i];\n        var k = defKey(def);\n        var layer = layers[k];\n        if(!done[k]) {\n          if(this.options.debug) console.log(\"**\", k);\n          for(var prop in layer) {\n            if (prop !== 'zoom' && prop !== 'frames' && prop !== 'symbolizers') {\n              if(this.options.debug) console.log(\"*\", prop);\n              layer[prop].style = this._createFn(layer[prop].js);\n              layer.symbolizers.push(layer[prop].symbolizer);\n              layer.symbolizers = _.uniq(layer.symbolizers);\n            }\n          }\n          layer.attachment = k;\n          ordered_layers.push(layer);\n          done[k] = true;\n        }\n        layer.zoom |= def.zoom;\n        layer.frames.push(def.frame_offset);\n      }\n\n      // uniq the frames\n      for(i = 0; i < ordered_layers.length; ++i) {\n        ordered_layers[i].frames = _.uniq(ordered_layers[i].frames);\n      }\n\n      return ordered_layers;\n\n    }\n    return null;\n  }\n};\n\n\ncarto.RendererJS = function (options) {\n    this.options = options || {};\n    this.options.mapnik_version = this.options.mapnik_version || 'latest';\n};\n\n// Prepare a javascript object which contains the layers\ncarto.RendererJS.prototype.render = function render(cartocss, callback) {\n    var reference = require('./torque-reference');\n    tree.Reference.setData(reference.version.latest);\n    return new CartoCSS(cartocss, this.options);\n}\n\nif(typeof(module) !== 'undefined') {\n  module.exports = carto.RendererJS;\n}\n\n\n})(require('../carto'));\n",
    "var _mapnik_reference_latest = {\n    \"version\": \"2.1.1\",\n    \"style\": {\n        \"filter-mode\": {\n            \"type\": [\n                \"all\",\n                \"first\"\n            ],\n            \"doc\": \"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)\",\n            \"default-value\": \"all\",\n            \"default-meaning\": \"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true.\"\n        },\n        \"image-filters\": {\n            \"css\": \"image-filters\",\n            \"default-value\": \"none\",\n            \"default-meaning\": \"no filters\",\n            \"type\": \"functions\",\n            \"functions\": [\n                [\"agg-stack-blur\", 2],\n                [\"emboss\", 0],\n                [\"blur\", 0],\n                [\"gray\", 0],\n                [\"sobel\", 0],\n                [\"edge-detect\", 0],\n                [\"x-gradient\", 0],\n                [\"y-gradient\", 0],\n                [\"invert\", 0],\n                [\"sharpen\", 0],\n                [\"colorize-alpha\", -1],\n                [\"color-to-alpha\", 1],\n                [\"scale-hsla\", 8]\n            ],\n            \"doc\": \"A list of image filters.\"\n        },\n        \"comp-op\": {\n            \"css\": \"comp-op\",\n            \"default-value\": \"src-over\",\n            \"default-meaning\": \"add the current layer on top of other layers\",\n            \"doc\": \"Composite operation. This defines how this layer should behave relative to layers atop or below it.\",\n            \"type\": [\"clear\",\n                \"src\",\n                \"dst\",\n                \"src-over\",\n                \"source-over\", // added for torque\n                \"dst-over\",\n                \"src-in\",\n                \"dst-in\",\n                \"src-out\",\n                \"dst-out\",\n                \"src-atop\",\n                \"dst-atop\",\n                \"xor\",\n                \"plus\",\n                \"minus\",\n                \"multiply\",\n                \"screen\",\n                \"overlay\",\n                \"darken\",\n                \"lighten\",\n                \"lighter\", // added for torque\n                \"color-dodge\",\n                \"color-burn\",\n                \"hard-light\",\n                \"soft-light\",\n                \"difference\",\n                \"exclusion\",\n                \"contrast\",\n                \"invert\",\n                \"invert-rgb\",\n                \"grain-merge\",\n                \"grain-extract\",\n                \"hue\",\n                \"saturation\",\n                \"color\",\n                \"value\"\n            ]\n        },\n        \"opacity\": {\n            \"css\": \"opacity\",\n            \"type\": \"float\",\n            \"doc\": \"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)\",\n            \"default-value\": 1,\n            \"default-meaning\": \"no separate buffer will be used and no alpha will be applied to the style after rendering\"\n        }\n    },\n    \"layer\" : {\n        \"name\": {\n            \"default-value\": \"\",\n            \"type\":\"string\",\n            \"required\" : true,\n            \"default-meaning\": \"No layer name has been provided\",\n            \"doc\": \"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map\"\n        },\n        \"srs\": {\n            \"default-value\": \"\",\n            \"type\":\"string\",\n            \"default-meaning\": \"No srs value is provided and the value will be inherited from the Map's srs\",\n            \"doc\": \"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'\"\n        },\n        \"status\": {\n            \"default-value\": true,\n            \"type\":\"boolean\",\n            \"default-meaning\": \"This layer will be marked as active and available for processing\",\n            \"doc\": \"A property that can be set to false to disable this layer from being processed\"\n        },\n        \"minzoom\": {\n            \"default-value\": \"0\",\n            \"type\":\"float\",\n            \"default-meaning\": \"The layer will be visible at the minimum possible scale\",\n            \"doc\": \"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6\"\n        },\n        \"maxzoom\": {\n            \"default-value\": \"1.79769e+308\",\n            \"type\":\"float\",\n            \"default-meaning\": \"The layer will be visible at the maximum possible scale\",\n            \"doc\": \"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6\"\n        },\n        \"queryable\": {\n            \"default-value\": false,\n            \"type\":\"boolean\",\n            \"default-meaning\": \"The layer will not be available for the direct querying of data values\",\n            \"doc\": \"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true\"\n        },\n        \"clear-label-cache\": {\n            \"default-value\": false,\n            \"type\":\"boolean\",\n            \"default-meaning\": \"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer\",\n            \"doc\": \"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers\"\n        },\n        \"group-by\": {\n            \"default-value\": \"\",\n            \"type\":\"string\",\n            \"default-meaning\": \"No special layer grouping will be used during rendering\",\n            \"doc\": \"https://github.com/mapnik/mapnik/wiki/Grouped-rendering\"\n        },\n        \"buffer-size\": {\n            \"default-value\": \"0\",\n            \"type\":\"float\",\n            \"default-meaning\": \"No buffer will be used\",\n            \"doc\": \"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering\"\n        },\n        \"maximum-extent\": {\n            \"default-value\": \"none\",\n            \"type\":\"bbox\",\n            \"default-meaning\": \"No clipping extent will be used\",\n            \"doc\": \"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer.\"\n        }\n    },\n    \"symbolizers\" : {\n        \"*\": {\n            \"image-filters\": {\n                \"css\": \"image-filters\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"no filters\",\n                \"type\": \"functions\",\n                \"functions\": [\n                    [\"agg-stack-blur\", 2],\n                    [\"emboss\", 0],\n                    [\"blur\", 0],\n                    [\"gray\", 0],\n                    [\"sobel\", 0],\n                    [\"edge-detect\", 0],\n                    [\"x-gradient\", 0],\n                    [\"y-gradient\", 0],\n                    [\"invert\", 0],\n                    [\"sharpen\", 0],\n                    [\"colorize-alpha\", -1],\n                    [\"color-to-alpha\", 1],\n                    [\"scale-hsla\", 8]\n                ],\n                \"doc\": \"A list of image filters.\"\n            },\n            \"comp-op\": {\n                \"css\": \"comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current layer on top of other layers\",\n                \"doc\": \"Composite operation. This defines how this layer should behave relative to layers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"source-over\", // added for torque\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"lighter\", // added for torque\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            },\n            \"opacity\": {\n                \"css\": \"opacity\",\n                \"type\": \"float\",\n                \"doc\": \"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)\",\n                \"default-value\": 1,\n                \"default-meaning\": \"no separate buffer will be used and no alpha will be applied to the style after rendering\"\n            }\n        },\n        \"map\": {\n            \"background-color\": {\n                \"css\": \"background-color\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"transparent\",\n                \"type\": \"color\",\n                \"doc\": \"Map Background color\"\n            },\n            \"background-image\": {\n                \"css\": \"background-image\",\n                \"type\": \"uri\",\n                \"default-value\": \"\",\n                \"default-meaning\": \"transparent\",\n                \"doc\": \"An image that is repeated below all features on a map as a background.\",\n                \"description\": \"Map Background image\"\n            },\n            \"srs\": {\n                \"css\": \"srs\",\n                \"type\": \"string\",\n                \"default-value\": \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\",\n                \"default-meaning\": \"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space\",\n                \"doc\": \"Map spatial reference (proj4 string)\"\n            },\n            \"buffer-size\": {\n                \"css\": \"buffer-size\",\n                \"default-value\": \"0\",\n                \"type\":\"float\",\n                \"default-meaning\": \"No buffer will be used\",\n                \"doc\": \"Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with \\\"avoid-edges\\\".\"\n            },\n            \"maximum-extent\": {\n                \"css\": \"\",\n                \"default-value\": \"none\",\n                \"type\":\"bbox\",\n                \"default-meaning\": \"No clipping extent will be used\",\n                \"doc\": \"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map.\"\n            },\n            \"base\": {\n                \"css\": \"base\",\n                \"default-value\": \"\",\n                \"default-meaning\": \"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.\",\n                \"type\": \"string\",\n                \"doc\": \"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet.\"\n            },\n            \"paths-from-xml\": {\n                \"css\": \"\",\n                \"default-value\": true,\n                \"default-meaning\": \"Paths read from XML will be interpreted from the location of the XML\",\n                \"type\": \"boolean\",\n                \"doc\": \"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()\"\n            },\n            \"minimum-version\": {\n                \"css\": \"\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"Mapnik version will not be detected and no error will be thrown about compatibility\",\n                \"type\": \"string\",\n                \"doc\": \"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet\"\n            },\n            \"font-directory\": {\n                \"css\": \"font-directory\",\n                \"type\": \"uri\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"No map-specific fonts will be registered\",\n                \"doc\": \"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered).\"\n            }\n        },\n        \"polygon\": {\n            \"fill\": {\n                \"css\": \"polygon-fill\",\n                \"type\": \"color\",\n                \"default-value\": \"rgba(128,128,128,1)\",\n                \"default-meaning\": \"gray and fully opaque (alpha = 1), same as rgb(128,128,128)\",\n                \"doc\": \"Fill color to assign to a polygon\"\n            },\n            \"fill-opacity\": {\n                \"css\": \"polygon-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"The opacity of the polygon\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\"\n            },\n            \"gamma\": {\n                \"css\": \"polygon-gamma\",\n                \"type\": \"float\",\n                \"default-value\": 1,\n                \"default-meaning\": \"fully antialiased\",\n                \"range\": \"0-1\",\n                \"doc\": \"Level of antialiasing of polygon edges\"\n            },\n            \"gamma-method\": {\n                \"css\": \"polygon-gamma-method\",\n                \"type\": [\n                    \"power\",\n                    \"linear\",\n                    \"none\",\n                    \"threshold\",\n                    \"multiply\"\n                ],\n                \"default-value\": \"power\",\n                \"default-meaning\": \"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA\",\n                \"doc\": \"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h\"\n            },\n            \"clip\": {\n                \"css\": \"polygon-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"smooth\": {\n                \"css\": \"polygon-smooth\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no smoothing\",\n                \"range\": \"0-1\",\n                \"doc\": \"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries.\"\n            },\n            \"geometry-transform\": {\n                \"css\": \"polygon-geometry-transform\",\n                \"type\": \"functions\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"geometry will not be transformed\",\n                \"doc\": \"Allows transformation functions to be applied to the geometry.\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ]\n            },\n            \"comp-op\": {\n                \"css\": \"polygon-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"line\": {\n            \"stroke\": {\n                \"css\": \"line-color\",\n                \"default-value\": \"rgba(0,0,0,1)\",\n                \"type\": \"color\",\n                \"default-meaning\": \"black and fully opaque (alpha = 1), same as rgb(0,0,0)\",\n                \"doc\": \"The color of a drawn line\"\n            },\n            \"stroke-width\": {\n                \"css\": \"line-width\",\n                \"default-value\": 1,\n                \"type\": \"float\",\n                \"doc\": \"The width of a line in pixels\"\n            },\n            \"stroke-opacity\": {\n                \"css\": \"line-opacity\",\n                \"default-value\": 1,\n                \"type\": \"float\",\n                \"default-meaning\": \"opaque\",\n                \"doc\": \"The opacity of a line\"\n            },\n            \"stroke-linejoin\": {\n                \"css\": \"line-join\",\n                \"default-value\": \"miter\",\n                \"type\": [\n                    \"miter\",\n                    \"round\",\n                    \"bevel\"\n                ],\n                \"doc\": \"The behavior of lines when joining\"\n            },\n            \"stroke-linecap\": {\n                \"css\": \"line-cap\",\n                \"default-value\": \"butt\",\n                \"type\": [\n                    \"butt\",\n                    \"round\",\n                    \"square\"\n                ],\n                \"doc\": \"The display of line endings\"\n            },\n            \"stroke-gamma\": {\n                \"css\": \"line-gamma\",\n                \"type\": \"float\",\n                \"default-value\": 1,\n                \"default-meaning\": \"fully antialiased\",\n                \"range\": \"0-1\",\n                \"doc\": \"Level of antialiasing of stroke line\"\n            },\n            \"stroke-gamma-method\": {\n                \"css\": \"line-gamma-method\",\n                \"type\": [\n                    \"power\",\n                    \"linear\",\n                    \"none\",\n                    \"threshold\",\n                    \"multiply\"\n                ],\n                \"default-value\": \"power\",\n                \"default-meaning\": \"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA\",\n                \"doc\": \"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h\"\n            },\n            \"stroke-dasharray\": {\n                \"css\": \"line-dasharray\",\n                \"type\": \"numbers\",\n                \"doc\": \"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"solid line\"\n            },\n            \"stroke-dashoffset\": {\n                \"css\": \"line-dash-offset\",\n                \"type\": \"numbers\",\n                \"doc\": \"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"solid line\"\n            },\n            \"stroke-miterlimit\": {\n                \"css\": \"line-miterlimit\",\n                \"type\": \"float\",\n                \"doc\": \"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.\",\n                \"default-value\": 4.0,\n                \"default-meaning\": \"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'\"\n            },\n            \"clip\": {\n                \"css\": \"line-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"smooth\": {\n                \"css\": \"line-smooth\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no smoothing\",\n                \"range\": \"0-1\",\n                \"doc\": \"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries.\"\n            },\n            \"offset\": {\n                \"css\": \"line-offset\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no offset\",\n                \"doc\": \"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line).\"\n            },\n            \"rasterizer\": {\n                \"css\": \"line-rasterizer\",\n                \"type\": [\n                    \"full\",\n                    \"fast\"\n                ],\n                \"default-value\": \"full\",\n                \"doc\": \"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed.\"\n            },\n            \"geometry-transform\": {\n                \"css\": \"line-geometry-transform\",\n                \"type\": \"functions\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"geometry will not be transformed\",\n                \"doc\": \"Allows transformation functions to be applied to the geometry.\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ]\n            },\n            \"comp-op\": {\n                \"css\": \"line-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"markers\": {\n            \"file\": {\n                \"css\": \"marker-file\",\n                \"doc\": \"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.\",\n                \"default-value\": \"\",\n                \"default-meaning\": \"An ellipse or circle, if width equals height\",\n                \"type\": \"uri\"\n            },\n            \"opacity\": {\n                \"css\": \"marker-opacity\",\n                \"doc\": \"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke\",\n                \"default-value\": 1,\n                \"default-meaning\": \"The stroke-opacity and fill-opacity will be used\",\n                \"type\": \"float\"\n            },\n            \"fill-opacity\": {\n                \"css\": \"marker-fill-opacity\",\n                \"doc\": \"The fill opacity of the marker\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\",\n                \"type\": \"float\"\n            },\n            \"stroke\": {\n                \"css\": \"marker-line-color\",\n                \"doc\": \"The color of the stroke around a marker shape.\",\n                \"default-value\": \"black\",\n                \"type\": \"color\"\n            },\n            \"stroke-width\": {\n                \"css\": \"marker-line-width\",\n                \"doc\": \"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.\",\n                \"type\": \"float\"\n            },\n            \"stroke-opacity\": {\n                \"css\": \"marker-line-opacity\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\",\n                \"doc\": \"The opacity of a line\",\n                \"type\": \"float\"\n            },\n            \"placement\": {\n                \"css\": \"marker-placement\",\n                \"type\": [\n                    \"point\",\n                    \"line\",\n                    \"interior\"\n                ],\n                \"default-value\": \"point\",\n                \"default-meaning\": \"Place markers at the center point (centroid) of the geometry\",\n                \"doc\": \"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior\"\n            },\n            \"multi-policy\": {\n                \"css\": \"marker-multi-policy\",\n                \"type\": [\n                    \"each\",\n                    \"whole\",\n                    \"largest\"\n                ],\n                \"default-value\": \"each\",\n                \"default-meaning\": \"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each\",\n                \"doc\": \"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default).\"\n            },\n            \"marker-type\": {\n                \"css\": \"marker-type\",\n                \"type\": [\n                    \"arrow\",\n                    \"ellipse\",\n                    \"rectangle\"\n                ],\n                \"default-value\": \"ellipse\",\n                \"doc\": \"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)\"\n            },\n            \"width\": {\n                \"css\": \"marker-width\",\n                \"default-value\": 10,\n                \"doc\": \"The width of the marker, if using one of the default types.\",\n                \"type\": \"float\",\n                \"expression\": true\n            },\n            \"height\": {\n                \"css\": \"marker-height\",\n                \"default-value\": 10,\n                \"doc\": \"The height of the marker, if using one of the default types.\",\n                \"type\": \"float\",\n                \"expression\": true\n            },\n            \"fill\": {\n                \"css\": \"marker-fill\",\n                \"default-value\": \"blue\",\n                \"doc\": \"The color of the area of the marker.\",\n                \"type\": \"color\"\n            },\n            \"allow-overlap\": {\n                \"css\": \"marker-allow-overlap\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Control whether overlapping markers are shown or hidden.\",\n                \"default-meaning\": \"Do not allow makers to overlap with each other - overlapping markers will not be shown.\"\n            },\n            \"ignore-placement\": {\n                \"css\": \"marker-ignore-placement\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"default-meaning\": \"do not store the bbox of this geometry in the collision detector cache\",\n                \"doc\": \"value to control whether the placement of the feature will prevent the placement of other features\"\n            },\n            \"spacing\": {\n                \"css\": \"marker-spacing\",\n                \"doc\": \"Space between repeated labels\",\n                \"default-value\": 100,\n                \"type\": \"float\"\n            },\n            \"max-error\": {\n                \"css\": \"marker-max-error\",\n                \"type\": \"float\",\n                \"default-value\": 0.2,\n                \"doc\": \"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers.\"\n            },\n            \"transform\": {\n                \"css\": \"marker-transform\",\n                \"type\": \"functions\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ],\n                \"default-value\": \"\",\n                \"default-meaning\": \"No transformation\",\n                \"doc\": \"SVG transformation definition\"\n            },\n            \"clip\": {\n                \"css\": \"marker-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"smooth\": {\n                \"css\": \"marker-smooth\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no smoothing\",\n                \"range\": \"0-1\",\n                \"doc\": \"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries.\"\n            },\n            \"geometry-transform\": {\n                \"css\": \"marker-geometry-transform\",\n                \"type\": \"functions\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"geometry will not be transformed\",\n                \"doc\": \"Allows transformation functions to be applied to the geometry.\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ]\n            },\n            \"comp-op\": {\n                \"css\": \"marker-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"shield\": {\n            \"name\": {\n                \"css\": \"shield-name\",\n                \"type\": \"string\",\n                \"expression\": true,\n                \"serialization\": \"content\",\n                \"doc\": \"Value to use for a shield\\\"s text label. Data columns are specified using brackets like [column_name]\"\n            },\n            \"file\": {\n                \"css\": \"shield-file\",\n                \"required\": true,\n                \"type\": \"uri\",\n                \"default-value\": \"none\",\n                \"doc\": \"Image file to render behind the shield text\"\n            },\n            \"face-name\": {\n                \"css\": \"shield-face-name\",\n                \"type\": \"string\",\n                \"validate\": \"font\",\n                \"doc\": \"Font name and style to use for the shield text\",\n                \"default-value\": \"\",\n                \"required\": true\n            },\n            \"unlock-image\": {\n                \"css\": \"shield-unlock-image\",\n                \"type\": \"boolean\",\n                \"doc\": \"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image\",\n                \"default-value\": false,\n                \"default-meaning\": \"text alignment relative to the shield image uses the center of the image as the anchor for text positioning.\"\n            },\n            \"size\": {\n                \"css\": \"shield-size\",\n                \"type\": \"float\",\n                \"doc\": \"The size of the shield text in pixels\"\n            },\n            \"fill\": {\n                \"css\": \"shield-fill\",\n                \"type\": \"color\",\n                \"doc\": \"The color of the shield text\"\n            },\n            \"placement\": {\n                \"css\": \"shield-placement\",\n                \"type\": [\n                    \"point\",\n                    \"line\",\n                    \"vertex\",\n                    \"interior\"\n                ],\n                \"default-value\": \"point\",\n                \"doc\": \"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons.\"\n            },\n            \"avoid-edges\": {\n                \"css\": \"shield-avoid-edges\",\n                \"doc\": \"Tell positioning algorithm to avoid labeling near intersection edges.\",\n                \"type\": \"boolean\",\n                \"default-value\": false\n            },\n            \"allow-overlap\": {\n                \"css\": \"shield-allow-overlap\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Control whether overlapping shields are shown or hidden.\",\n                \"default-meaning\": \"Do not allow shields to overlap with other map elements already placed.\"\n            },\n            \"minimum-distance\": {\n                \"css\": \"shield-min-distance\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"doc\": \"Minimum distance to the next shield symbol, not necessarily the same shield.\"\n            },\n            \"spacing\": {\n                \"css\": \"shield-spacing\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"doc\": \"The spacing between repeated occurrences of the same shield on a line\"\n            },\n            \"minimum-padding\": {\n                \"css\": \"shield-min-padding\",\n                \"default-value\": 0,\n                \"doc\": \"Determines the minimum amount of padding that a shield gets relative to other shields\",\n                \"type\": \"float\"\n            },\n            \"wrap-width\": {\n                \"css\": \"shield-wrap-width\",\n                \"type\": \"unsigned\",\n                \"default-value\": 0,\n                \"doc\": \"Length of a chunk of text in characters before wrapping text\"\n            },\n            \"wrap-before\": {\n                \"css\": \"shield-wrap-before\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width.\"\n            },\n            \"wrap-character\": {\n                \"css\": \"shield-wrap-character\",\n                \"type\": \"string\",\n                \"default-value\": \" \",\n                \"doc\": \"Use this character instead of a space to wrap long names.\"\n            },\n            \"halo-fill\": {\n                \"css\": \"shield-halo-fill\",\n                \"type\": \"color\",\n                \"default-value\": \"#FFFFFF\",\n                \"default-meaning\": \"white\",\n                \"doc\": \"Specifies the color of the halo around the text.\"\n            },\n            \"halo-radius\": {\n                \"css\": \"shield-halo-radius\",\n                \"doc\": \"Specify the radius of the halo in pixels\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no halo\",\n                \"type\": \"float\"\n            },\n            \"character-spacing\": {\n                \"css\": \"shield-character-spacing\",\n                \"type\": \"unsigned\",\n                \"default-value\": 0,\n                \"doc\": \"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement.\"\n            },\n            \"line-spacing\": {\n                \"css\": \"shield-line-spacing\",\n                \"doc\": \"Vertical spacing between lines of multiline labels (in pixels)\",\n                \"type\": \"unsigned\"\n            },\n            \"dx\": {\n                \"css\": \"shield-text-dx\",\n                \"type\": \"float\",\n                \"doc\": \"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right\",\n                \"default-value\": 0\n            },\n            \"dy\": {\n                \"css\": \"shield-text-dy\",\n                \"type\": \"float\",\n                \"doc\": \"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down\",\n                \"default-value\": 0\n            },\n            \"shield-dx\": {\n                \"css\": \"shield-dx\",\n                \"type\": \"float\",\n                \"doc\": \"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right\",\n                \"default-value\": 0\n            },\n            \"shield-dy\": {\n                \"css\": \"shield-dy\",\n                \"type\": \"float\",\n                \"doc\": \"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down\",\n                \"default-value\": 0\n            },\n            \"opacity\": {\n                \"css\": \"shield-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"(Default 1.0) - opacity of the image used for the shield\",\n                \"default-value\": 1\n            },\n            \"text-opacity\": {\n                \"css\": \"shield-text-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"(Default 1.0) - opacity of the text placed on top of the shield\",\n                \"default-value\": 1\n            },\n            \"horizontal-alignment\": {\n                \"css\": \"shield-horizontal-alignment\",\n                \"type\": [\n                    \"left\",\n                    \"middle\",\n                    \"right\",\n                    \"auto\"\n                ],\n                \"doc\": \"The shield's horizontal alignment from its centerpoint\",\n                \"default-value\": \"auto\"\n            },\n            \"vertical-alignment\": {\n                \"css\": \"shield-vertical-alignment\",\n                \"type\": [\n                    \"top\",\n                    \"middle\",\n                    \"bottom\",\n                    \"auto\"\n                ],\n                \"doc\": \"The shield's vertical alignment from its centerpoint\",\n                \"default-value\": \"middle\"\n            },\n            \"text-transform\": {\n                \"css\": \"shield-text-transform\",\n                \"type\": [\n                    \"none\",\n                    \"uppercase\",\n                    \"lowercase\",\n                    \"capitalize\"\n                ],\n                \"doc\": \"Transform the case of the characters\",\n                \"default-value\": \"none\"\n            },\n            \"justify-alignment\": {\n                \"css\": \"shield-justify-alignment\",\n                \"type\": [\n                    \"left\",\n                    \"center\",\n                    \"right\",\n                    \"auto\"\n                ],\n                \"doc\": \"Define how text in a shield's label is justified\",\n                \"default-value\": \"auto\"\n            },\n            \"clip\": {\n                \"css\": \"shield-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"comp-op\": {\n                \"css\": \"shield-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"line-pattern\": {\n            \"file\": {\n                \"css\": \"line-pattern-file\",\n                \"type\": \"uri\",\n                \"default-value\": \"none\",\n                \"required\": true,\n                \"doc\": \"An image file to be repeated and warped along a line\"\n            },\n            \"clip\": {\n                \"css\": \"line-pattern-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"smooth\": {\n                \"css\": \"line-pattern-smooth\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no smoothing\",\n                \"range\": \"0-1\",\n                \"doc\": \"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries.\"\n            },\n            \"geometry-transform\": {\n                \"css\": \"line-pattern-geometry-transform\",\n                \"type\": \"functions\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"geometry will not be transformed\",\n                \"doc\": \"Allows transformation functions to be applied to the geometry.\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ]\n            },\n            \"comp-op\": {\n                \"css\": \"line-pattern-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"polygon-pattern\": {\n            \"file\": {\n                \"css\": \"polygon-pattern-file\",\n                \"type\": \"uri\",\n                \"default-value\": \"none\",\n                \"required\": true,\n                \"doc\": \"Image to use as a repeated pattern fill within a polygon\"\n            },\n            \"alignment\": {\n                \"css\": \"polygon-pattern-alignment\",\n                \"type\": [\n                    \"local\",\n                    \"global\"\n                ],\n                \"default-value\": \"local\",\n                \"doc\": \"Specify whether to align pattern fills to the layer or to the map.\"\n            },\n            \"gamma\": {\n                \"css\": \"polygon-pattern-gamma\",\n                \"type\": \"float\",\n                \"default-value\": 1,\n                \"default-meaning\": \"fully antialiased\",\n                \"range\": \"0-1\",\n                \"doc\": \"Level of antialiasing of polygon pattern edges\"\n            },\n            \"opacity\": {\n                \"css\": \"polygon-pattern-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"(Default 1.0) - Apply an opacity level to the image used for the pattern\",\n                \"default-value\": 1,\n                \"default-meaning\": \"The image is rendered without modifications\"\n            },\n            \"clip\": {\n                \"css\": \"polygon-pattern-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"smooth\": {\n                \"css\": \"polygon-pattern-smooth\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no smoothing\",\n                \"range\": \"0-1\",\n                \"doc\": \"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries.\"\n            },\n            \"geometry-transform\": {\n                \"css\": \"polygon-pattern-geometry-transform\",\n                \"type\": \"functions\",\n                \"default-value\": \"none\",\n                \"default-meaning\": \"geometry will not be transformed\",\n                \"doc\": \"Allows transformation functions to be applied to the geometry.\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ]\n            },\n            \"comp-op\": {\n                \"css\": \"polygon-pattern-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"raster\": {\n            \"opacity\": {\n                \"css\": \"raster-opacity\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\",\n                \"type\": \"float\",\n                \"doc\": \"The opacity of the raster symbolizer on top of other symbolizers.\"\n            },\n            \"filter-factor\": {\n                \"css\": \"raster-filter-factor\",\n                \"default-value\": -1,\n                \"default-meaning\": \"Allow the datasource to choose appropriate downscaling.\",\n                \"type\": \"float\",\n                \"doc\": \"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed.\"\n            },\n            \"scaling\": {\n                \"css\": \"raster-scaling\",\n                \"type\": [\n                    \"near\",\n                    \"fast\",\n                    \"bilinear\",\n                    \"bilinear8\",\n                    \"bicubic\",\n                    \"spline16\",\n                    \"spline36\",\n                    \"hanning\",\n                    \"hamming\",\n                    \"hermite\",\n                    \"kaiser\",\n                    \"quadric\",\n                    \"catrom\",\n                    \"gaussian\",\n                    \"bessel\",\n                    \"mitchell\",\n                    \"sinc\",\n                    \"lanczos\",\n                    \"blackman\"\n                ],\n                \"default-value\": \"near\",\n                \"doc\": \"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality.\"\n            },\n            \"mesh-size\": {\n                \"css\": \"raster-mesh-size\",\n                \"default-value\": 16,\n                \"default-meaning\": \"Reprojection mesh will be 1/16 of the resolution of the source image\",\n                \"type\": \"unsigned\",\n                \"doc\": \"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion.\"\n            },\n            \"comp-op\": {\n                \"css\": \"raster-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"point\": {\n            \"file\": {\n                \"css\": \"point-file\",\n                \"type\": \"uri\",\n                \"required\": false,\n                \"default-value\": \"none\",\n                \"doc\": \"Image file to represent a point\"\n            },\n            \"allow-overlap\": {\n                \"css\": \"point-allow-overlap\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Control whether overlapping points are shown or hidden.\",\n                \"default-meaning\": \"Do not allow points to overlap with each other - overlapping markers will not be shown.\"\n            },\n            \"ignore-placement\": {\n                \"css\": \"point-ignore-placement\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"default-meaning\": \"do not store the bbox of this geometry in the collision detector cache\",\n                \"doc\": \"value to control whether the placement of the feature will prevent the placement of other features\"\n            },\n            \"opacity\": {\n                \"css\": \"point-opacity\",\n                \"type\": \"float\",\n                \"default-value\": 1.0,\n                \"default-meaning\": \"Fully opaque\",\n                \"doc\": \"A value from 0 to 1 to control the opacity of the point\"\n            },\n            \"placement\": {\n                \"css\": \"point-placement\",\n                \"type\": [\n                    \"centroid\",\n                    \"interior\"\n                ],\n                \"doc\": \"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.\",\n                \"default-value\": \"centroid\"\n            },\n            \"transform\": {\n                \"css\": \"point-transform\",\n                \"type\": \"functions\",\n                \"functions\": [\n                    [\"matrix\", 6],\n                    [\"translate\", 2],\n                    [\"scale\", 2],\n                    [\"rotate\", 3],\n                    [\"skewX\", 1],\n                    [\"skewY\", 1]\n                ],\n                \"default-value\": \"\",\n                \"default-meaning\": \"No transformation\",\n                \"doc\": \"SVG transformation definition\"\n            },\n            \"comp-op\": {\n                \"css\": \"point-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"text\": {\n            \"name\": {\n                \"css\": \"text-name\",\n                \"type\": \"string\",\n                \"expression\": true,\n                \"required\": true,\n                \"default-value\": \"\",\n                \"serialization\": \"content\",\n                \"doc\": \"Value to use for a text label. Data columns are specified using brackets like [column_name]\"\n            },\n            \"face-name\": {\n                \"css\": \"text-face-name\",\n                \"type\": \"string\",\n                \"validate\": \"font\",\n                \"doc\": \"Font name and style to render a label in\",\n                \"required\": true\n            },\n            \"size\": {\n                \"css\": \"text-size\",\n                \"type\": \"float\",\n                \"default-value\": 10,\n                \"doc\": \"Text size in pixels\"\n            },\n            \"text-ratio\": {\n                \"css\": \"text-ratio\",\n                \"doc\": \"Define the amount of text (of the total) present on successive lines when wrapping occurs\",\n                \"default-value\": 0,\n                \"type\": \"unsigned\"\n            },\n            \"wrap-width\": {\n                \"css\": \"text-wrap-width\",\n                \"doc\": \"Length of a chunk of text in characters before wrapping text\",\n                \"default-value\": 0,\n                \"type\": \"unsigned\"\n            },\n            \"wrap-before\": {\n                \"css\": \"text-wrap-before\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width.\"\n            },\n            \"wrap-character\": {\n                \"css\": \"text-wrap-character\",\n                \"type\": \"string\",\n                \"default-value\": \" \",\n                \"doc\": \"Use this character instead of a space to wrap long text.\"\n            },\n            \"spacing\": {\n                \"css\": \"text-spacing\",\n                \"type\": \"unsigned\",\n                \"doc\": \"Distance between repeated text labels on a line (aka. label-spacing)\"\n            },\n            \"character-spacing\": {\n                \"css\": \"text-character-spacing\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"doc\": \"Horizontal spacing adjustment between characters in pixels\"\n            },\n            \"line-spacing\": {\n                \"css\": \"text-line-spacing\",\n                \"default-value\": 0,\n                \"type\": \"unsigned\",\n                \"doc\": \"Vertical spacing adjustment between lines in pixels\"\n            },\n            \"label-position-tolerance\": {\n                \"css\": \"text-label-position-tolerance\",\n                \"default-value\": 0,\n                \"type\": \"unsigned\",\n                \"doc\": \"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)\"\n            },\n            \"max-char-angle-delta\": {\n                \"css\": \"text-max-char-angle-delta\",\n                \"type\": \"float\",\n                \"default-value\": \"22.5\",\n                \"doc\": \"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners.\"\n            },\n            \"fill\": {\n                \"css\": \"text-fill\",\n                \"doc\": \"Specifies the color for the text\",\n                \"default-value\": \"#000000\",\n                \"type\": \"color\"\n            },\n            \"opacity\": {\n                \"css\": \"text-opacity\",\n                \"doc\": \"A number from 0 to 1 specifying the opacity for the text\",\n                \"default-value\": 1.0,\n                \"default-meaning\": \"Fully opaque\",\n                \"type\": \"float\"\n            },\n            \"halo-fill\": {\n                \"css\": \"text-halo-fill\",\n                \"type\": \"color\",\n                \"default-value\": \"#FFFFFF\",\n                \"default-meaning\": \"white\",\n                \"doc\": \"Specifies the color of the halo around the text.\"\n            },\n            \"halo-radius\": {\n                \"css\": \"text-halo-radius\",\n                \"doc\": \"Specify the radius of the halo in pixels\",\n                \"default-value\": 0,\n                \"default-meaning\": \"no halo\",\n                \"type\": \"float\"\n            },\n            \"dx\": {\n                \"css\": \"text-dx\",\n                \"type\": \"float\",\n                \"doc\": \"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right\",\n                \"default-value\": 0\n            },\n            \"dy\": {\n                \"css\": \"text-dy\",\n                \"type\": \"float\",\n                \"doc\": \"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down\",\n                \"default-value\": 0\n            },\n            \"vertical-alignment\": {\n                \"css\": \"text-vertical-alignment\",\n                \"type\": [\n                  \"top\",\n                  \"middle\",\n                  \"bottom\",\n                  \"auto\"\n                ],\n                \"doc\": \"Position of label relative to point position.\",\n                \"default-value\": \"auto\",\n                \"default-meaning\": \"Default affected by value of dy; \\\"bottom\\\" for dy>0, \\\"top\\\" for dy<0.\"\n            },\n            \"avoid-edges\": {\n                \"css\": \"text-avoid-edges\",\n                \"doc\": \"Tell positioning algorithm to avoid labeling near intersection edges.\",\n                \"default-value\": false,\n                \"type\": \"boolean\"\n            },\n            \"minimum-distance\": {\n                \"css\": \"text-min-distance\",\n                \"doc\": \"Minimum permitted distance to the next text symbolizer.\",\n                \"type\": \"float\"\n            },\n            \"minimum-padding\": {\n                \"css\": \"text-min-padding\",\n                \"doc\": \"Determines the minimum amount of padding that a text symbolizer gets relative to other text\",\n                \"type\": \"float\"\n            },\n            \"minimum-path-length\": {\n                \"css\": \"text-min-path-length\",\n                \"type\": \"float\",\n                \"default-value\": 0,\n                \"default-meaning\": \"place labels on all paths\",\n                \"doc\": \"Place labels only on paths longer than this value.\"\n            },\n            \"allow-overlap\": {\n                \"css\": \"text-allow-overlap\",\n                \"type\": \"boolean\",\n                \"default-value\": false,\n                \"doc\": \"Control whether overlapping text is shown or hidden.\",\n                \"default-meaning\": \"Do not allow text to overlap with other text - overlapping markers will not be shown.\"\n            },\n            \"orientation\": {\n                \"css\": \"text-orientation\",\n                \"type\": \"float\",\n                \"expression\": true,\n                \"doc\": \"Rotate the text.\"\n            },\n            \"placement\": {\n                \"css\": \"text-placement\",\n                \"type\": [\n                    \"point\",\n                    \"line\",\n                    \"vertex\",\n                    \"interior\"\n                ],\n                \"default-value\": \"point\",\n                \"doc\": \"Control the style of placement of a point versus the geometry it is attached to.\"\n            },\n            \"placement-type\": {\n                \"css\": \"text-placement-type\",\n                \"doc\": \"Re-position and/or re-size text to avoid overlaps. \\\"simple\\\" for basic algorithm (using text-placements string,) \\\"dummy\\\" to turn this feature off.\",\n                \"type\": [\n                    \"dummy\",\n                    \"simple\"\n                ],\n                \"default-value\": \"dummy\"\n            },\n            \"placements\": {\n                \"css\": \"text-placements\",\n                \"type\": \"string\",\n                \"default-value\": \"\",\n                \"doc\": \"If \\\"placement-type\\\" is set to \\\"simple\\\", use this \\\"POSITIONS,[SIZES]\\\" string. An example is `text-placements: \\\"E,NE,SE,W,NW,SW\\\";` \"\n            },\n            \"text-transform\": {\n                \"css\": \"text-transform\",\n                \"type\": [\n                    \"none\",\n                    \"uppercase\",\n                    \"lowercase\",\n                    \"capitalize\"\n                ],\n                \"doc\": \"Transform the case of the characters\",\n                \"default-value\": \"none\"\n            },\n            \"horizontal-alignment\": {\n                \"css\": \"text-horizontal-alignment\",\n                \"type\": [\n                    \"left\",\n                    \"middle\",\n                    \"right\",\n                    \"auto\"\n                ],\n                \"doc\": \"The text's horizontal alignment from its centerpoint\",\n                \"default-value\": \"auto\"\n            },\n            \"justify-alignment\": {\n                \"css\": \"text-align\",\n                \"type\": [\n                    \"left\",\n                    \"right\",\n                    \"center\",\n                    \"auto\"\n                ],\n                \"doc\": \"Define how text is justified\",\n                \"default-value\": \"auto\",\n                \"default-meaning\": \"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives\"\n            },\n            \"clip\": {\n                \"css\": \"text-clip\",\n                \"type\": \"boolean\",\n                \"default-value\": true,\n                \"default-meaning\": \"geometry will be clipped to map bounds before rendering\",\n                \"doc\": \"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts.\"\n            },\n            \"comp-op\": {\n                \"css\": \"text-comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current symbolizer on top of other symbolizer\",\n                \"doc\": \"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.\",\n                \"type\": [\"clear\",\n                    \"src\",\n                    \"dst\",\n                    \"src-over\",\n                    \"dst-over\",\n                    \"src-in\",\n                    \"dst-in\",\n                    \"src-out\",\n                    \"dst-out\",\n                    \"src-atop\",\n                    \"dst-atop\",\n                    \"xor\",\n                    \"plus\",\n                    \"minus\",\n                    \"multiply\",\n                    \"screen\",\n                    \"overlay\",\n                    \"darken\",\n                    \"lighten\",\n                    \"color-dodge\",\n                    \"color-burn\",\n                    \"hard-light\",\n                    \"soft-light\",\n                    \"difference\",\n                    \"exclusion\",\n                    \"contrast\",\n                    \"invert\",\n                    \"invert-rgb\",\n                    \"grain-merge\",\n                    \"grain-extract\",\n                    \"hue\",\n                    \"saturation\",\n                    \"color\",\n                    \"value\"\n                ]\n            }\n        },\n        \"building\": {\n            \"fill\": {\n                \"css\": \"building-fill\",\n                \"default-value\": \"#FFFFFF\",\n                \"doc\": \"The color of the buildings walls.\",\n                \"type\": \"color\"\n            },\n            \"fill-opacity\": {\n                \"css\": \"building-fill-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"The opacity of the building as a whole, including all walls.\",\n                \"default-value\": 1\n            },\n            \"height\": {\n                \"css\": \"building-height\",\n                \"doc\": \"The height of the building in pixels.\",\n                \"type\": \"float\",\n                \"expression\": true,\n                \"default-value\": \"0\"\n            }\n        },\n        \"torque\": {\n          \"-torque-clear-color\": {\n              \"css\": \"-torque-clear-color\",\n              \"type\": \"color\",\n              \"default-value\": \"rgba(255, 255, 255, 0)\",\n              \"default-meaning\": \"full clear\",\n              \"doc\": \"color used to clear canvas on each frame\"\n          },\n          \"-torque-frame-count\": {\n              \"css\": \"-torque-frame-count\",\n              \"default-value\": \"128\",\n              \"type\":\"float\",\n              \"default-meaning\": \"the data is broken into 128 time frames\",\n              \"doc\": \"Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used.\"\n          },\n          \"-torque-resolution\": {\n              \"css\": \"-torque-resolution\",\n              \"default-value\": \"2\",\n              \"type\":\"float\",\n              \"default-meaning\": \"\",\n              \"doc\": \"Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2\"\n          },\n          \"-torque-animation-duration\": {\n              \"css\": \"-torque-animation-duration\",\n              \"default-value\": \"30\",\n              \"type\":\"float\",\n              \"default-meaning\": \"the animation lasts 30 seconds\",\n              \"doc\": \"Animation duration in seconds\"\n          },\n          \"-torque-aggregation-function\": {\n              \"css\": \"-torque-aggregation-function\",\n              \"default-value\": \"count(cartodb_id)\",\n              \"type\": \"string\",\n              \"default-meaning\": \"the value for each cell is the count of points in that cell\",\n              \"doc\": \"A function used to calculate a value from the aggregate data for each cell. See -torque-resolution\"\n          },\n          \"-torque-time-attribute\": {\n              \"css\": \"-torque-time-attribute\",\n              \"default-value\": \"time\",\n              \"type\": \"string\",\n              \"default-meaning\": \"the data column in your table that is of a time based type\",\n              \"doc\": \"The table column that contains the time information used create the animation\"\n          },\n          \"-torque-data-aggregation\": {\n              \"css\": \"-torque-data-aggregation\",\n              \"default-value\": \"linear\",\n              \"type\": [\n                \"linear\",\n                \"cumulative\"\n              ],\n              \"default-meaning\": \"previous values are discarded\",\n              \"doc\": \"A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts\"\n          }\n        }\n    },\n    \"colors\": {\n        \"aliceblue\":  [240, 248, 255],\n        \"antiquewhite\":  [250, 235, 215],\n        \"aqua\":  [0, 255, 255],\n        \"aquamarine\":  [127, 255, 212],\n        \"azure\":  [240, 255, 255],\n        \"beige\":  [245, 245, 220],\n        \"bisque\":  [255, 228, 196],\n        \"black\":  [0, 0, 0],\n        \"blanchedalmond\":  [255,235,205],\n        \"blue\":  [0, 0, 255],\n        \"blueviolet\":  [138, 43, 226],\n        \"brown\":  [165, 42, 42],\n        \"burlywood\":  [222, 184, 135],\n        \"cadetblue\":  [95, 158, 160],\n        \"chartreuse\":  [127, 255, 0],\n        \"chocolate\":  [210, 105, 30],\n        \"coral\":  [255, 127, 80],\n        \"cornflowerblue\":  [100, 149, 237],\n        \"cornsilk\":  [255, 248, 220],\n        \"crimson\":  [220, 20, 60],\n        \"cyan\":  [0, 255, 255],\n        \"darkblue\":  [0, 0, 139],\n        \"darkcyan\":  [0, 139, 139],\n        \"darkgoldenrod\":  [184, 134, 11],\n        \"darkgray\":  [169, 169, 169],\n        \"darkgreen\":  [0, 100, 0],\n        \"darkgrey\":  [169, 169, 169],\n        \"darkkhaki\":  [189, 183, 107],\n        \"darkmagenta\":  [139, 0, 139],\n        \"darkolivegreen\":  [85, 107, 47],\n        \"darkorange\":  [255, 140, 0],\n        \"darkorchid\":  [153, 50, 204],\n        \"darkred\":  [139, 0, 0],\n        \"darksalmon\":  [233, 150, 122],\n        \"darkseagreen\":  [143, 188, 143],\n        \"darkslateblue\":  [72, 61, 139],\n        \"darkslategrey\":  [47, 79, 79],\n        \"darkturquoise\":  [0, 206, 209],\n        \"darkviolet\":  [148, 0, 211],\n        \"deeppink\":  [255, 20, 147],\n        \"deepskyblue\":  [0, 191, 255],\n        \"dimgray\":  [105, 105, 105],\n        \"dimgrey\":  [105, 105, 105],\n        \"dodgerblue\":  [30, 144, 255],\n        \"firebrick\":  [178, 34, 34],\n        \"floralwhite\":  [255, 250, 240],\n        \"forestgreen\":  [34, 139, 34],\n        \"fuchsia\":  [255, 0, 255],\n        \"gainsboro\":  [220, 220, 220],\n        \"ghostwhite\":  [248, 248, 255],\n        \"gold\":  [255, 215, 0],\n        \"goldenrod\":  [218, 165, 32],\n        \"gray\":  [128, 128, 128],\n        \"grey\":  [128, 128, 128],\n        \"green\":  [0, 128, 0],\n        \"greenyellow\":  [173, 255, 47],\n        \"honeydew\":  [240, 255, 240],\n        \"hotpink\":  [255, 105, 180],\n        \"indianred\":  [205, 92, 92],\n        \"indigo\":  [75, 0, 130],\n        \"ivory\":  [255, 255, 240],\n        \"khaki\":  [240, 230, 140],\n        \"lavender\":  [230, 230, 250],\n        \"lavenderblush\":  [255, 240, 245],\n        \"lawngreen\":  [124, 252, 0],\n        \"lemonchiffon\":  [255, 250, 205],\n        \"lightblue\":  [173, 216, 230],\n        \"lightcoral\":  [240, 128, 128],\n        \"lightcyan\":  [224, 255, 255],\n        \"lightgoldenrodyellow\":  [250, 250, 210],\n        \"lightgray\":  [211, 211, 211],\n        \"lightgreen\":  [144, 238, 144],\n        \"lightgrey\":  [211, 211, 211],\n        \"lightpink\":  [255, 182, 193],\n        \"lightsalmon\":  [255, 160, 122],\n        \"lightseagreen\":  [32, 178, 170],\n        \"lightskyblue\":  [135, 206, 250],\n        \"lightslategray\":  [119, 136, 153],\n        \"lightslategrey\":  [119, 136, 153],\n        \"lightsteelblue\":  [176, 196, 222],\n        \"lightyellow\":  [255, 255, 224],\n        \"lime\":  [0, 255, 0],\n        \"limegreen\":  [50, 205, 50],\n        \"linen\":  [250, 240, 230],\n        \"magenta\":  [255, 0, 255],\n        \"maroon\":  [128, 0, 0],\n        \"mediumaquamarine\":  [102, 205, 170],\n        \"mediumblue\":  [0, 0, 205],\n        \"mediumorchid\":  [186, 85, 211],\n        \"mediumpurple\":  [147, 112, 219],\n        \"mediumseagreen\":  [60, 179, 113],\n        \"mediumslateblue\":  [123, 104, 238],\n        \"mediumspringgreen\":  [0, 250, 154],\n        \"mediumturquoise\":  [72, 209, 204],\n        \"mediumvioletred\":  [199, 21, 133],\n        \"midnightblue\":  [25, 25, 112],\n        \"mintcream\":  [245, 255, 250],\n        \"mistyrose\":  [255, 228, 225],\n        \"moccasin\":  [255, 228, 181],\n        \"navajowhite\":  [255, 222, 173],\n        \"navy\":  [0, 0, 128],\n        \"oldlace\":  [253, 245, 230],\n        \"olive\":  [128, 128, 0],\n        \"olivedrab\":  [107, 142, 35],\n        \"orange\":  [255, 165, 0],\n        \"orangered\":  [255, 69, 0],\n        \"orchid\":  [218, 112, 214],\n        \"palegoldenrod\":  [238, 232, 170],\n        \"palegreen\":  [152, 251, 152],\n        \"paleturquoise\":  [175, 238, 238],\n        \"palevioletred\":  [219, 112, 147],\n        \"papayawhip\":  [255, 239, 213],\n        \"peachpuff\":  [255, 218, 185],\n        \"peru\":  [205, 133, 63],\n        \"pink\":  [255, 192, 203],\n        \"plum\":  [221, 160, 221],\n        \"powderblue\":  [176, 224, 230],\n        \"purple\":  [128, 0, 128],\n        \"red\":  [255, 0, 0],\n        \"rosybrown\":  [188, 143, 143],\n        \"royalblue\":  [65, 105, 225],\n        \"saddlebrown\":  [139, 69, 19],\n        \"salmon\":  [250, 128, 114],\n        \"sandybrown\":  [244, 164, 96],\n        \"seagreen\":  [46, 139, 87],\n        \"seashell\":  [255, 245, 238],\n        \"sienna\":  [160, 82, 45],\n        \"silver\":  [192, 192, 192],\n        \"skyblue\":  [135, 206, 235],\n        \"slateblue\":  [106, 90, 205],\n        \"slategray\":  [112, 128, 144],\n        \"slategrey\":  [112, 128, 144],\n        \"snow\":  [255, 250, 250],\n        \"springgreen\":  [0, 255, 127],\n        \"steelblue\":  [70, 130, 180],\n        \"tan\":  [210, 180, 140],\n        \"teal\":  [0, 128, 128],\n        \"thistle\":  [216, 191, 216],\n        \"tomato\":  [255, 99, 71],\n        \"turquoise\":  [64, 224, 208],\n        \"violet\":  [238, 130, 238],\n        \"wheat\":  [245, 222, 179],\n        \"white\":  [255, 255, 255],\n        \"whitesmoke\":  [245, 245, 245],\n        \"yellow\":  [255, 255, 0],\n        \"yellowgreen\":  [154, 205, 50],\n        \"transparent\":  [0, 0, 0, 0]\n    },\n    \"filter\": {\n        \"value\": [\n            \"true\",\n            \"false\",\n            \"null\",\n            \"point\",\n            \"linestring\",\n            \"polygon\",\n            \"collection\"\n        ]\n    }\n}\n\nmodule.exports = {\n  version: {\n    latest: _mapnik_reference_latest,\n    '2.1.1': _mapnik_reference_latest\n  }\n};\n",
    "/**\n * TODO: document this. What does this do?\n */\nif(typeof(module) !== \"undefined\") {\n  module.exports.find = function (obj, fun) {\n      for (var i = 0, r; i < obj.length; i++) {\n          if (r = fun.call(obj, obj[i])) { return r; }\n      }\n      return null;\n  };\n}\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\ntree.Call = function Call(name, args, index) {\n    this.name = name;\n    this.args = args;\n    this.index = index;\n};\n\ntree.Call.prototype = {\n    is: 'call',\n    // When evuating a function call,\n    // we either find the function in `tree.functions` [1],\n    // in which case we call it, passing the  evaluated arguments,\n    // or we simply print it out as it appeared originally [2].\n    // The *functions.js* file contains the built-in functions.\n    // The reason why we evaluate the arguments, is in the case where\n    // we try to pass a variable to a function, like: `saturate(@color)`.\n    // The function should receive the value, not the variable.\n    'ev': function(env) {\n        var args = this.args.map(function(a) { return a.ev(env); });\n\n        for (var i = 0; i < args.length; i++) {\n            if (args[i].is === 'undefined') {\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n        }\n\n        if (this.name in tree.functions) {\n            if (tree.functions[this.name].length <= args.length) {\n                var val = tree.functions[this.name].apply(tree.functions, args);\n                if (val === null) {\n                    env.error({\n                        message: 'incorrect arguments given to ' + this.name + '()',\n                        index: this.index,\n                        type: 'runtime',\n                        filename: this.filename\n                    });\n                    return { is: 'undefined', value: 'undefined' };\n                }\n                return val;\n            } else {\n                env.error({\n                    message: 'incorrect number of arguments for ' + this.name +\n                        '(). ' + tree.functions[this.name].length + ' expected.',\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n        } else {\n            var fn = tree.Reference.mapnikFunctions[this.name];\n            if (fn === undefined) {\n                var functions = _.pairs(tree.Reference.mapnikFunctions);\n                // cheap closest, needs improvement.\n                var name = this.name;\n                var mean = functions.map(function(f) {\n                    return [f[0], tree.Reference.editDistance(name, f[0]), f[1]];\n                }).sort(function(a, b) {\n                    return a[1] - b[1];\n                });\n                env.error({\n                    message: 'unknown function ' + this.name + '(), did you mean ' +\n                        mean[0][0] + '(' + mean[0][2] + ')',\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n            if (fn !== args.length &&\n                !(Array.isArray(fn) && _.include(fn, args.length)) &&\n                // support variable-arg functions like `colorize-alpha`\n                fn !== -1) {\n                env.error({\n                    message: 'function ' + this.name + '() takes ' +\n                        fn + ' arguments and was given ' + args.length,\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            } else {\n                // Save the evaluated versions of arguments\n                this.args = args;\n                return this;\n            }\n        }\n    },\n\n    toString: function(env, format) {\n        if (this.args.length) {\n            return this.name + '(' + this.args.join(',') + ')';\n        } else {\n            return this.name;\n        }\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n// RGB Colors - #ff0014, #eee\n// can be initialized with a 3 or 6 char string or a 3 or 4 element\n// numerical array\ntree.Color = function Color(rgb, a) {\n    // The end goal here, is to parse the arguments\n    // into an integer triplet, such as `128, 255, 0`\n    //\n    // This facilitates operations and conversions.\n    if (Array.isArray(rgb)) {\n        this.rgb = rgb.slice(0, 3);\n    } else if (rgb.length == 6) {\n        this.rgb = rgb.match(/.{2}/g).map(function(c) {\n            return parseInt(c, 16);\n        });\n    } else {\n        this.rgb = rgb.split('').map(function(c) {\n            return parseInt(c + c, 16);\n        });\n    }\n\n    if (typeof(a) === 'number') {\n        this.alpha = a;\n    } else if (rgb.length === 4) {\n        this.alpha = rgb[3];\n    } else {\n        this.alpha = 1;\n    }\n};\n\ntree.Color.prototype = {\n    is: 'color',\n    'ev': function() { return this; },\n\n    // If we have some transparency, the only way to represent it\n    // is via `rgba`. Otherwise, we use the hex representation,\n    // which has better compatibility with older browsers.\n    // Values are capped between `0` and `255`, rounded and zero-padded.\n    toString: function() {\n        if (this.alpha < 1.0) {\n            return 'rgba(' + this.rgb.map(function(c) {\n                return Math.round(c);\n            }).concat(this.alpha).join(', ') + ')';\n        } else {\n            return '#' + this.rgb.map(function(i) {\n                i = Math.round(i);\n                i = (i > 255 ? 255 : (i < 0 ? 0 : i)).toString(16);\n                return i.length === 1 ? '0' + i : i;\n            }).join('');\n        }\n    },\n\n    // Operations have to be done per-channel, if not,\n    // channels will spill onto each other. Once we have\n    // our result, in the form of an integer triplet,\n    // we create a new Color node to hold the result.\n    operate: function(env, op, other) {\n        var result = [];\n\n        if (! (other instanceof tree.Color)) {\n            other = other.toColor();\n        }\n\n        for (var c = 0; c < 3; c++) {\n            result[c] = tree.operate(op, this.rgb[c], other.rgb[c]);\n        }\n        return new tree.Color(result);\n    },\n\n    toHSL: function() {\n        var r = this.rgb[0] / 255,\n            g = this.rgb[1] / 255,\n            b = this.rgb[2] / 255,\n            a = this.alpha;\n\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\n        var h, s, l = (max + min) / 2, d = max - min;\n\n        if (max === min) {\n            h = s = 0;\n        } else {\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n            switch (max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return { h: h * 360, s: s, l: l, a: a };\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Comment = function Comment(value, silent) {\n    this.value = value;\n    this.silent = !!silent;\n};\n\ntree.Comment.prototype = {\n    toString: function(env) {\n        return '<!--' + this.value + '-->';\n    },\n    'ev': function() { return this; }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar assert = require('assert'),\n    _ = global._ || require('underscore');\n\n// A definition is the combination of a selector and rules, like\n// #foo {\n//     polygon-opacity:1.0;\n// }\n//\n// The selector can have filters\ntree.Definition = function Definition(selector, rules) {\n    this.elements = selector.elements;\n    assert.ok(selector.filters instanceof tree.Filterset);\n    this.rules = rules;\n    this.ruleIndex = {};\n    for (var i = 0; i < this.rules.length; i++) {\n        if ('zoom' in this.rules[i]) this.rules[i] = this.rules[i].clone();\n        this.rules[i].zoom = selector.zoom;\n        this.ruleIndex[this.rules[i].updateID()] = true;\n    }\n    this.filters = selector.filters;\n    this.zoom = selector.zoom;\n    this.frame_offset = selector.frame_offset;\n    this.attachment = selector.attachment || '__default__';\n    this.specificity = selector.specificity();\n};\n\ntree.Definition.prototype.toString = function() {\n    var str = this.filters.toString();\n    for (var i = 0; i < this.rules.length; i++) {\n        str += '\\n    ' + this.rules[i];\n    }\n    return str;\n};\n\ntree.Definition.prototype.clone = function(filters) {\n    if (filters) assert.ok(filters instanceof tree.Filterset);\n    var clone = Object.create(tree.Definition.prototype);\n    clone.rules = this.rules.slice();\n    clone.ruleIndex = _.clone(this.ruleIndex);\n    clone.filters = filters ? filters : this.filters.clone();\n    clone.attachment = this.attachment;\n    return clone;\n};\n\ntree.Definition.prototype.addRules = function(rules) {\n    var added = 0;\n\n    // Add only unique rules.\n    for (var i = 0; i < rules.length; i++) {\n        if (!this.ruleIndex[rules[i].id]) {\n            this.rules.push(rules[i]);\n            this.ruleIndex[rules[i].id] = true;\n            added++;\n        }\n    }\n\n    return added;\n};\n\n// Determine whether this selector matches a given id\n// and array of classes, by determining whether\n// all elements it contains match.\ntree.Definition.prototype.appliesTo = function(id, classes) {\n    for (var i = 0, l = this.elements.length; i < l; i++) {\n        var elem = this.elements[i];\n        if (!(elem.wildcard ||\n            (elem.type === 'class' && classes[elem.clean]) ||\n            (elem.type === 'id' && id === elem.clean))) return false;\n    }\n    return true;\n};\n\nfunction symbolizerName(symbolizer) {\n    function capitalize(str) { return str[1].toUpperCase(); }\n    return symbolizer.charAt(0).toUpperCase() +\n           symbolizer.slice(1).replace(/\\-./, capitalize) + 'Symbolizer';\n}\n\n// Get a simple list of the symbolizers, in order\nfunction symbolizerList(sym_order) {\n    return sym_order.sort(function(a, b) { return a[1] - b[1]; })\n        .map(function(v) { return v[0]; });\n}\n\ntree.Definition.prototype.symbolizersToXML = function(env, symbolizers, zoom) {\n    var xml = zoom.toXML(env).join('') + this.filters.toXML(env);\n\n    // Sort symbolizers by the index of their first property definition\n    var sym_order = [], indexes = [];\n    for (var key in symbolizers) {\n        indexes = [];\n        for (var prop in symbolizers[key]) {\n            indexes.push(symbolizers[key][prop].index);\n        }\n        var min_idx = Math.min.apply(Math, indexes);\n        sym_order.push([key, min_idx]);\n    }\n\n    sym_order = symbolizerList(sym_order);\n    var sym_count = 0;\n\n    for (var i = 0; i < sym_order.length; i++) {\n        var attributes = symbolizers[sym_order[i]];\n        var symbolizer = sym_order[i].split('/').pop();\n\n        // Skip the magical * symbolizer which is used for universal properties\n        // which are bubbled up to Style elements intead of Symbolizer elements.\n        if (symbolizer === '*') continue;\n        sym_count++;\n\n        var fail = tree.Reference.requiredProperties(symbolizer, attributes);\n        if (fail) {\n            var rule = attributes[Object.keys(attributes).shift()];\n            env.error({\n                message: fail,\n                index: rule.index,\n                filename: rule.filename\n            });\n        }\n\n        var name = symbolizerName(symbolizer);\n\n        var selfclosing = true, tagcontent;\n        xml += '    <' + name + ' ';\n        for (var j in attributes) {\n            if (symbolizer === 'map') env.error({\n                message: 'Map properties are not permitted in other rules',\n                index: attributes[j].index,\n                filename: attributes[j].filename\n            });\n            var x = tree.Reference.selector(attributes[j].name);\n            if (x && x.serialization && x.serialization === 'content') {\n                selfclosing = false;\n                tagcontent = attributes[j].ev(env).toXML(env, true);\n            } else if (x && x.serialization && x.serialization === 'tag') {\n                selfclosing = false;\n                tagcontent = attributes[j].ev(env).toXML(env, true);\n            } else {\n                xml += attributes[j].ev(env).toXML(env) + ' ';\n            }\n        }\n        if (selfclosing) {\n            xml += '/>\\n';\n        } else if (typeof tagcontent !== \"undefined\") {\n            if (tagcontent.indexOf('<') != -1) {\n                xml += '>' + tagcontent + '</' + name + '>\\n';\n            } else {\n                xml += '><![CDATA[' + tagcontent + ']]></' + name + '>\\n';\n            }\n        }\n    }\n    if (!sym_count || !xml) return '';\n    return '  <Rule>\\n' + xml + '  </Rule>\\n';\n};\n\n// Take a zoom range of zooms and 'i', the index of a rule in this.rules,\n// and finds all applicable symbolizers\ntree.Definition.prototype.collectSymbolizers = function(zooms, i) {\n    var symbolizers = {}, child;\n\n    for (var j = i; j < this.rules.length; j++) {\n        child = this.rules[j];\n        var key = child.instance + '/' + child.symbolizer;\n        if (zooms.current & child.zoom &&\n           (!(key in symbolizers) ||\n           (!(child.name in symbolizers[key])))) {\n            zooms.current &= child.zoom;\n            if (!(key in symbolizers)) {\n                symbolizers[key] = {};\n            }\n            symbolizers[key][child.name] = child;\n        }\n    }\n\n    if (Object.keys(symbolizers).length) {\n        zooms.rule &= (zooms.available &= ~zooms.current);\n        return symbolizers;\n    }\n};\n\n// The tree.Zoom.toString function ignores the holes in zoom ranges and outputs\n// scaledenominators that cover the whole range from the first to last bit set.\n// This algorithm can produces zoom ranges that may have holes. However,\n// when using the filter-mode=\"first\", more specific zoom filters will always\n// end up before broader ranges. The filter-mode will pick those first before\n// resorting to the zoom range with the hole and stop processing further rules.\ntree.Definition.prototype.toXML = function(env, existing) {\n    var filter = this.filters.toString();\n    if (!(filter in existing)) existing[filter] = tree.Zoom.all;\n\n    var available = tree.Zoom.all, xml = '', zoom, symbolizers,\n        zooms = { available: tree.Zoom.all };\n    for (var i = 0; i < this.rules.length && available; i++) {\n        zooms.rule = this.rules[i].zoom;\n        if (!(existing[filter] & zooms.rule)) continue;\n\n        while (zooms.current = zooms.rule & available) {\n            if (symbolizers = this.collectSymbolizers(zooms, i)) {\n                if (!(existing[filter] & zooms.current)) continue;\n                xml += this.symbolizersToXML(env, symbolizers,\n                    (new tree.Zoom()).setZoom(existing[filter] & zooms.current));\n                existing[filter] &= ~zooms.current;\n            }\n        }\n    }\n\n    return xml;\n};\n\ntree.Definition.prototype.toJS = function(env) {\n  var shaderAttrs = {};\n\n  // merge conditions from filters with zoom condition of the\n  // definition\n  var zoom = \"(\" + this.zoom + \" & (1 << ctx.zoom))\";\n  var frame_offset = this.frame_offset;\n  var _if = this.filters.toJS(env);\n  var filters = [zoom];\n  if(_if) filters.push(_if);\n  if(frame_offset) filters.push('ctx[\"frame-offset\"] === ' + frame_offset);\n  _if = filters.join(\" && \");\n  _.each(this.rules, function(rule) {\n      if(rule instanceof tree.Rule) {\n        shaderAttrs[rule.name] = shaderAttrs[rule.name] || [];\n\n        var r = {\n          index: rule.index,\n          symbolizer: rule.symbolizer\n        };\n\n        if (_if) {\n          r.js = \"if(\" + _if + \"){\" + rule.value.toJS(env) + \"}\"\n        } else {\n          r.js = rule.value.toJS(env);\n        }\n\n        r.constant = rule.value.ev(env).is !== 'field';\n        r.filtered = !!_if;\n\n        shaderAttrs[rule.name].push(r);\n      } else {\n        throw new Error(\"Ruleset not supported\");\n        //if (rule instanceof tree.Ruleset) {\n          //var sh = rule.toJS(env);\n          //for(var v in sh) {\n            //shaderAttrs[v] = shaderAttrs[v] || [];\n            //for(var attr in sh[v]) {\n              //shaderAttrs[v].push(sh[v][attr]);\n            //}\n          //}\n        //}\n      }\n  });\n  return shaderAttrs;\n};\n\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\n//\n// A number with a unit\n//\ntree.Dimension = function Dimension(value, unit, index) {\n    this.value = parseFloat(value);\n    this.unit = unit || null;\n    this.index = index;\n};\n\ntree.Dimension.prototype = {\n    is: 'float',\n    physical_units: ['m', 'cm', 'in', 'mm', 'pt', 'pc'],\n    screen_units: ['px', '%'],\n    all_units: ['m', 'cm', 'in', 'mm', 'pt', 'pc', 'px', '%'],\n    densities: {\n        m: 0.0254,\n        mm: 25.4,\n        cm: 2.54,\n        pt: 72,\n        pc: 6\n    },\n    ev: function (env) {\n        if (this.unit && !_.contains(this.all_units, this.unit)) {\n            env.error({\n                message: \"Invalid unit: '\" + this.unit + \"'\",\n                index: this.index\n            });\n            return { is: 'undefined', value: 'undefined' };\n        }\n\n        // normalize units which are not px or %\n        if (this.unit && _.contains(this.physical_units, this.unit)) {\n            if (!env.ppi) {\n                env.error({\n                    message: \"ppi is not set, so metric units can't be used\",\n                    index: this.index\n                });\n                return { is: 'undefined', value: 'undefined' };\n            }\n            // convert all units to inch\n            // convert inch to px using ppi\n            this.value = (this.value / this.densities[this.unit]) * env.ppi;\n            this.unit = 'px';\n        }\n\n        return this;\n    },\n    round: function() {\n        this.value = Math.round(this.value);\n        return this;\n    },\n    toColor: function() {\n        return new tree.Color([this.value, this.value, this.value]);\n    },\n    round: function() {\n        this.value = Math.round(this.value);\n        return this;\n    },\n    toString: function() {\n        return this.value.toString();\n    },\n    operate: function(env, op, other) {\n        if (this.unit === '%' && other.unit !== '%') {\n            env.error({\n                message: 'If two operands differ, the first must not be %',\n                index: this.index\n            });\n            return {\n                is: 'undefined',\n                value: 'undefined'\n            };\n        }\n\n        if (this.unit !== '%' && other.unit === '%') {\n            if (op === '*' || op === '/' || op === '%') {\n                env.error({\n                    message: 'Percent values can only be added or subtracted from other values',\n                    index: this.index\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n\n            return new tree.Dimension(tree.operate(op,\n                    this.value, this.value * other.value * 0.01),\n                this.unit);\n        }\n\n        //here the operands are either the same (% or undefined or px), or one is undefined and the other is px\n        return new tree.Dimension(tree.operate(op, this.value, other.value),\n            this.unit || other.unit);\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\n// An element is an id or class selector\ntree.Element = function Element(value) {\n    this.value = value.trim();\n    if (this.value[0] === '#') {\n        this.type = 'id';\n        this.clean = this.value.replace(/^#/, '');\n    }\n    if (this.value[0] === '.') {\n        this.type = 'class';\n        this.clean = this.value.replace(/^\\./, '');\n    }\n    if (this.value.indexOf('*') !== -1) {\n        this.type = 'wildcard';\n    }\n};\n\n// Determine the 'specificity matrix' of this\n// specific selector\ntree.Element.prototype.specificity = function() {\n    return [\n        (this.type === 'id') ? 1 : 0, // a\n        (this.type === 'class') ? 1 : 0  // b\n    ];\n};\n\ntree.Element.prototype.toString = function() { return this.value; };\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Expression = function Expression(value) {\n    this.value = value;\n};\n\ntree.Expression.prototype = {\n    is: 'expression',\n    ev: function(env) {\n        if (this.value.length > 1) {\n            return new tree.Expression(this.value.map(function(e) {\n                return e.ev(env);\n            }));\n        } else {\n            return this.value[0].ev(env);\n        }\n    },\n\n    toString: function(env) {\n        return this.value.map(function(e) {\n            return e.toString(env);\n        }).join(' ');\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Field = function Field(content) {\n    this.value = content || '';\n};\n\ntree.Field.prototype = {\n    is: 'field',\n    toString: function() {\n        return '[' + this.value + ']';\n    },\n    'ev': function() {\n        return this;\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Filter = function Filter(key, op, val, index, filename) {\n    this.key = key;\n    this.op = op;\n    this.val = val;\n    this.index = index;\n    this.filename = filename;\n\n    this.id = this.key + this.op + this.val;\n};\n\n// xmlsafe, numeric, suffix\nvar ops = {\n    '<': [' &lt; ', 'numeric'],\n    '>': [' &gt; ', 'numeric'],\n    '=': [' = ', 'both'],\n    '!=': [' != ', 'both'],\n    '<=': [' &lt;= ', 'numeric'],\n    '>=': [' &gt;= ', 'numeric'],\n    '=~': ['.match(', 'string', ')']\n};\n\ntree.Filter.prototype.ev = function(env) {\n    this.key = this.key.ev(env);\n    this.val = this.val.ev(env);\n    return this;\n};\n\ntree.Filter.prototype.toXML = function(env) {\n    if (tree.Reference.data.filter) {\n        if (this.key.is === 'keyword' && -1 === tree.Reference.data.filter.value.indexOf(this.key.toString())) {\n            env.error({\n                message: this.key.toString() + ' is not a valid keyword in a filter expression',\n                index: this.index,\n                filename: this.filename\n            });\n        }\n        if (this.val.is === 'keyword' && -1 === tree.Reference.data.filter.value.indexOf(this.val.toString())) {\n            env.error({\n                message: this.val.toString() + ' is not a valid keyword in a filter expression',\n                index: this.index,\n                filename: this.filename\n            });\n        }\n    }\n    var key = this.key.toString(false);\n    var val = this.val.toString(this.val.is == 'string');\n\n    if (\n        (ops[this.op][1] == 'numeric' && isNaN(val) && this.val.is !== 'field') ||\n        (ops[this.op][1] == 'string' && (val)[0] != \"'\")\n    ) {\n        env.error({\n            message: 'Cannot use operator \"' + this.op + '\" with value ' + this.val,\n            index: this.index,\n            filename: this.filename\n        });\n    }\n\n    return key + ops[this.op][0] + val + (ops[this.op][2] || '');\n};\n\ntree.Filter.prototype.toString = function() {\n    return '[' + this.id + ']';\n};\n\n})(require('../tree'));\n",
    "var tree = require('../tree');\nvar _ = global._ || require('underscore');\n\ntree.Filterset = function Filterset() {\n    this.filters = {};\n};\n\ntree.Filterset.prototype.toXML = function(env) {\n    var filters = [];\n    for (var id in this.filters) {\n        filters.push('(' + this.filters[id].toXML(env).trim() + ')');\n    }\n    if (filters.length) {\n        return '    <Filter>' + filters.join(' and ') + '</Filter>\\n';\n    } else {\n        return '';\n    }\n};\n\ntree.Filterset.prototype.toString = function() {\n    var arr = [];\n    for (var id in this.filters) arr.push(this.filters[id].id);\n    return arr.sort().join('\\t');\n};\n\ntree.Filterset.prototype.ev = function(env) {\n    for (var i in this.filters) {\n        this.filters[i].ev(env);\n    }\n    return this;\n};\n\ntree.Filterset.prototype.clone = function() {\n    var clone = new tree.Filterset();\n    for (var id in this.filters) {\n        clone.filters[id] = this.filters[id];\n    }\n    return clone;\n};\n\n// Note: other has to be a tree.Filterset.\ntree.Filterset.prototype.cloneWith = function(other) {\n    var additions = [];\n    for (var id in other.filters) {\n        var status = this.addable(other.filters[id]);\n        // status is true, false or null. if it's null we don't fail this\n        // clone nor do we add the filter.\n        if (status === false) {\n            return false;\n        }\n        if (status === true) {\n            // Adding the filter will override another value.\n            additions.push(other.filters[id]);\n        }\n    }\n\n    // Adding the other filters doesn't make this filterset invalid, but it\n    // doesn't add anything to it either.\n    if (!additions.length) {\n        return null;\n    }\n\n    // We can successfully add all filters. Now clone the filterset and add the\n    // new rules.\n    var clone = new tree.Filterset();\n\n    // We can add the rules that are already present without going through the\n    // add function as a Filterset is always in it's simplest canonical form.\n    for (id in this.filters) {\n        clone.filters[id] = this.filters[id];\n    }\n\n    // Only add new filters that actually change the filter.\n    while (id = additions.shift()) {\n        clone.add(id);\n    }\n\n    return clone;\n};\n\ntree.Filterset.prototype.toJS = function(env) {\n  var opMap = {\n    '=': '==='\n  };\n  return _.map(this.filters, function(filter) {\n    var op = filter.op;\n    if(op in opMap) {\n      op = opMap[op];\n    }\n    var val = filter.val;\n    if(filter._val !== undefined) {\n      val = filter._val.toString(true);\n    }\n    var attrs = \"data\";\n    return attrs + \".\" + filter.key.value  + \" \" + op + \" \" + (val.is === 'string' ? \"'\" + val.toString().replace(/'/g, \"\\\\'\") + \"'\" : val);\n  }).join(' && ');\n};\n\n// Returns true when the new filter can be added, false otherwise.\n// It can also return null, and on the other side we test for === true or\n// false\ntree.Filterset.prototype.addable = function(filter) {\n    var key = filter.key.toString(),\n        value = filter.val.toString();\n\n    if (value.match(/^[0-9]+(\\.[0-9]*)?$/)) value = parseFloat(value);\n\n    switch (filter.op) {\n        case '=':\n            // if there is already foo= and we're adding foo=\n            if (this.filters[key + '='] !== undefined) {\n                if (this.filters[key + '='].val.toString() != value) {\n                    return false;\n                } else {\n                    return null;\n                }\n            }\n            if (this.filters[key + '!=' + value] !== undefined) return false;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '>='] !== undefined  && this.filters[key + '>='].val > value) return false;\n            if (this.filters[key + '<='] !== undefined  && this.filters[key + '<='].val < value) return false;\n            return true;\n\n        case '=~':\n            return true;\n\n        case '!=':\n            if (this.filters[key + '='] !== undefined) return (this.filters[key + '='].val == value) ? false : null;\n            if (this.filters[key + '!=' + value] !== undefined) return null;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return null;\n            return true;\n\n        case '>':\n            if (key + '=' in this.filters) {\n                if (this.filters[key + '='].val <= value) {\n                    return false;\n                } else {\n                    return null;\n                }\n            }\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '<='] !== undefined  && this.filters[key + '<='].val <= value) return false;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '>='] !== undefined  && this.filters[key + '>='].val > value) return null;\n            return true;\n\n        case '>=':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val < value) ? false : null;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return false;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) return null;\n            return true;\n\n        case '<':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val >= value) ? false : null;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) return false;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return null;\n            return true;\n\n        case '<=':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val > value) ? false : null;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) return false;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val <= value) return null;\n            return true;\n    }\n};\n\n// Does the new filter constitute a conflict?\ntree.Filterset.prototype.conflict = function(filter) {\n    var key = filter.key.toString(),\n        value = filter.val.toString();\n\n    if (!isNaN(parseFloat(value))) value = parseFloat(value);\n\n    // if (a=b) && (a=c)\n    // if (a=b) && (a!=b)\n    // or (a!=b) && (a=b)\n    if ((filter.op === '=' && this.filters[key + '='] !== undefined &&\n        value != this.filters[key + '='].val.toString()) ||\n        (filter.op === '!=' && this.filters[key + '='] !== undefined &&\n        value == this.filters[key + '='].val.toString()) ||\n        (filter.op === '=' && this.filters[key + '!='] !== undefined &&\n        value == this.filters[key + '!='].val.toString())) {\n        return filter.toString() + ' added to ' + this.toString() + ' produces an invalid filter';\n    }\n\n    return false;\n};\n\n// Only call this function for filters that have been cleared by .addable().\ntree.Filterset.prototype.add = function(filter, env) {\n    var key = filter.key.toString(),\n        id,\n        op = filter.op,\n        conflict = this.conflict(filter),\n        numval;\n\n    if (conflict) return conflict;\n\n    if (op === '=') {\n        for (var i in this.filters) {\n            if (this.filters[i].key == key) delete this.filters[i];\n        }\n        this.filters[key + '='] = filter;\n    } else if (op === '!=') {\n        this.filters[key + '!=' + filter.val] = filter;\n    } else if (op === '=~') {\n        this.filters[key + '=~' + filter.val] = filter;\n    } else if (op === '>') {\n        // If there are other filters that are also >\n        // but are less than this one, they don't matter, so\n        // remove them.\n        for (var j in this.filters) {\n            if (this.filters[j].key == key && this.filters[j].val <= filter.val) {\n                delete this.filters[j];\n            }\n        }\n        this.filters[key + '>'] = filter;\n    } else if (op === '>=') {\n        for (var k in this.filters) {\n            numval = (+this.filters[k].val.toString());\n            if (this.filters[k].key == key && numval < filter.val) {\n                delete this.filters[k];\n            }\n        }\n        if (this.filters[key + '!=' + filter.val] !== undefined) {\n            delete this.filters[key + '!=' + filter.val];\n            filter.op = '>';\n            this.filters[key + '>'] = filter;\n        }\n        else {\n            this.filters[key + '>='] = filter;\n        }\n    } else if (op === '<') {\n        for (var l in this.filters) {\n            numval = (+this.filters[l].val.toString());\n            if (this.filters[l].key == key && numval >= filter.val) {\n                delete this.filters[l];\n            }\n        }\n        this.filters[key + '<'] = filter;\n    } else if (op === '<=') {\n        for (var m in this.filters) {\n            numval = (+this.filters[m].val.toString());\n            if (this.filters[m].key == key && numval > filter.val) {\n                delete this.filters[m];\n            }\n        }\n        if (this.filters[key + '!=' + filter.val] !== undefined) {\n            delete this.filters[key + '!=' + filter.val];\n            filter.op = '<';\n            this.filters[key + '<'] = filter;\n        }\n        else {\n            this.filters[key + '<='] = filter;\n        }\n    }\n};\n",
    "(function(tree) {\n\ntree._getFontSet = function(env, fonts) {\n    var fontKey = fonts.join('');\n    if (env._fontMap && env._fontMap[fontKey]) {\n        return env._fontMap[fontKey];\n    }\n\n    var new_fontset = new tree.FontSet(env, fonts);\n    env.effects.push(new_fontset);\n    if (!env._fontMap) env._fontMap = {};\n    env._fontMap[fontKey] = new_fontset;\n    return new_fontset;\n};\n\ntree.FontSet = function FontSet(env, fonts) {\n    this.fonts = fonts;\n    this.name = 'fontset-' + env.effects.length;\n};\n\ntree.FontSet.prototype.toXML = function(env) {\n    return '<FontSet name=\"' +\n        this.name +\n        '\">\\n' +\n        this.fonts.map(function(f) {\n            return '  <Font face-name=\"' + f +'\"/>';\n        }).join('\\n') +\n        '\\n</FontSet>';\n};\n\n})(require('../tree'));\n",
    "var tree = require('../tree');\n\n// Storage for Frame offset value\n// and stores them as bit-sequences so that they can be combined,\n// inverted, and compared quickly.\ntree.FrameOffset = function(op, value, index) {\n    value = parseInt(value, 10);\n    if (value > tree.FrameOffset.max || value <= 0) {\n        throw {\n            message: 'Only frame-offset levels between 1 and ' +\n                tree.FrameOffset.max + ' supported.',\n            index: index\n        };\n    }\n\n    if (op !== '=') {\n        throw {\n            message: 'only = operator is supported for frame-offset',\n            index: index\n        };\n    }\n    return value;\n};\n\ntree.FrameOffset.max = 32;\ntree.FrameOffset.none = 0;\n\n",
    "(function(tree) {\n\ntree.ImageFilter = function ImageFilter(filter, args) {\n    this.filter = filter;\n    this.args = args || null;\n};\n\ntree.ImageFilter.prototype = {\n    is: 'imagefilter',\n    ev: function() { return this; },\n\n    toString: function() {\n        if (this.args) {\n            return this.filter + '(' + this.args.join(',') + ')';\n        } else {\n            return this.filter;\n        }\n    }\n};\n\n\n})(require('../tree'));\n",
    "(function (tree) {\ntree.Invalid = function Invalid(chunk, index, message) {\n    this.chunk = chunk;\n    this.index = index;\n    this.type = 'syntax';\n    this.message = message || \"Invalid code: \" + this.chunk;\n};\n\ntree.Invalid.prototype.is = 'invalid';\n\ntree.Invalid.prototype.ev = function(env) {\n    env.error({\n        chunk: this.chunk,\n        index: this.index,\n        type: 'syntax',\n        message: this.message || \"Invalid code: \" + this.chunk\n    });\n    return {\n        is: 'undefined'\n    };\n};\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Keyword = function Keyword(value) {\n    this.value = value;\n    var special = {\n        'transparent': 'color',\n        'true': 'boolean',\n        'false': 'boolean'\n    };\n    this.is = special[value] ? special[value] : 'keyword';\n};\ntree.Keyword.prototype = {\n    ev: function() { return this; },\n    toString: function() { return this.value; }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.LayerXML = function(obj, styles) {\n    var dsoptions = [];\n    for (var i in obj.Datasource) {\n        dsoptions.push('<Parameter name=\"' + i + '\"><![CDATA[' +\n            obj.Datasource[i] + ']]></Parameter>');\n    }\n\n    var prop_string = '';\n    for (var prop in obj.properties) {\n        if (prop === 'minzoom') {\n            prop_string += '  maxzoom=\"' + tree.Zoom.ranges[obj.properties[prop]] + '\"\\n';\n        } else if (prop === 'maxzoom') {\n            prop_string += '  minzoom=\"' + tree.Zoom.ranges[obj.properties[prop]+1] + '\"\\n';\n        } else {\n            prop_string += '  ' + prop + '=\"' + obj.properties[prop] + '\"\\n';\n        }\n    }\n\n    return '<Layer' +\n        ' name=\"' + obj.name + '\"\\n' +\n        prop_string +\n        ((typeof obj.status === 'undefined') ? '' : '  status=\"' + obj.status + '\"\\n') +\n        ((typeof obj.srs === 'undefined') ? '' : '  srs=\"' + obj.srs + '\"') + '>\\n    ' +\n        styles.reverse().map(function(s) {\n            return '<StyleName>' + s + '</StyleName>';\n        }).join('\\n    ') +\n        (dsoptions.length ?\n        '\\n    <Datasource>\\n       ' +\n        dsoptions.join('\\n       ') +\n        '\\n    </Datasource>\\n'\n        : '') +\n        '  </Layer>\\n';\n};\n\n})(require('../tree'));\n",
    "// A literal is a literal string for Mapnik - the\n// result of the combination of a `tree.Field` with any\n// other type.\n(function(tree) {\n\ntree.Literal = function Field(content) {\n    this.value = content || '';\n    this.is = 'field';\n};\n\ntree.Literal.prototype = {\n    toString: function() {\n        return this.value;\n    },\n    'ev': function() {\n        return this;\n    }\n};\n\n})(require('../tree'));\n",
    "// An operation is an expression with an op in between two operands,\n// like 2 + 1.\n(function(tree) {\n\ntree.Operation = function Operation(op, operands, index) {\n    this.op = op.trim();\n    this.operands = operands;\n    this.index = index;\n};\n\ntree.Operation.prototype.is = 'operation';\n\ntree.Operation.prototype.ev = function(env) {\n    var a = this.operands[0].ev(env),\n        b = this.operands[1].ev(env),\n        temp;\n\n    if (a.is === 'undefined' || b.is === 'undefined') {\n        return {\n            is: 'undefined',\n            value: 'undefined'\n        };\n    }\n\n    if (a instanceof tree.Dimension && b instanceof tree.Color) {\n        if (this.op === '*' || this.op === '+') {\n            temp = b, b = a, a = temp;\n        } else {\n            env.error({\n                name: \"OperationError\",\n                message: \"Can't substract or divide a color from a number\",\n                index: this.index\n            });\n        }\n    }\n\n    // Only concatenate plain strings, because this is easily\n    // pre-processed\n    if (a instanceof tree.Quoted && b instanceof tree.Quoted && this.op !== '+') {\n        env.error({\n           message: \"Can't subtract, divide, or multiply strings.\",\n           index: this.index,\n           type: 'runtime',\n           filename: this.filename\n        });\n        return {\n            is: 'undefined',\n            value: 'undefined'\n        };\n    }\n\n    // Fields, literals, dimensions, and quoted strings can be combined.\n    if (a instanceof tree.Field || b instanceof tree.Field ||\n        a instanceof tree.Literal || b instanceof tree.Literal) {\n        if (a.is === 'color' || b.is === 'color') {\n            env.error({\n               message: \"Can't subtract, divide, or multiply colors in expressions.\",\n               index: this.index,\n               type: 'runtime',\n               filename: this.filename\n            });\n            return {\n                is: 'undefined',\n                value: 'undefined'\n            };\n        } else {\n            return new tree.Literal(a.ev(env).toString(true) + this.op + b.ev(env).toString(true));\n        }\n    }\n\n    if (a.operate === undefined) {\n        env.error({\n           message: 'Cannot do math with type ' + a.is + '.',\n           index: this.index,\n           type: 'runtime',\n           filename: this.filename\n        });\n        return {\n            is: 'undefined',\n            value: 'undefined'\n        };\n    }\n\n    return a.operate(env, this.op, b);\n};\n\ntree.operate = function(op, a, b) {\n    switch (op) {\n        case '+': return a + b;\n        case '-': return a - b;\n        case '*': return a * b;\n        case '%': return a % b;\n        case '/': return a / b;\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Quoted = function Quoted(content) {\n    this.value = content || '';\n};\n\ntree.Quoted.prototype = {\n    is: 'string',\n\n    toString: function(quotes) {\n        var escapedValue = this.value\n            .replace(/&/g, '&amp;')\n        var xmlvalue = escapedValue\n            .replace(/\\'/g, '\\\\\\'')\n            .replace(/\\\"/g, '&quot;')\n            .replace(/</g, '&lt;')\n            .replace(/\\>/g, '&gt;');\n        return (quotes === true) ? \"'\" + xmlvalue + \"'\" : escapedValue;\n    },\n\n    'ev': function() {\n        return this;\n    },\n\n    operate: function(env, op, other) {\n        return new tree.Quoted(tree.operate(op, this.toString(), other.toString(this.contains_field)));\n    }\n};\n\n})(require('../tree'));\n",
    "// Carto pulls in a reference from the `mapnik-reference`\n// module. This file builds indexes from that file for its various\n// options, and provides validation methods for property: value\n// combinations.\n(function(tree) {\n\nvar _ = global._ || require('underscore'),\n    ref = {};\n\nref.setData = function(data) {\n    ref.data = data;\n    ref.selector_cache = generateSelectorCache(data);\n    ref.mapnikFunctions = generateMapnikFunctions(data);\n\n    ref.mapnikFunctions.matrix = [6];\n    ref.mapnikFunctions.translate = [1, 2];\n    ref.mapnikFunctions.scale = [1, 2];\n    ref.mapnikFunctions.rotate = [1, 3];\n    ref.mapnikFunctions.skewX = [1];\n    ref.mapnikFunctions.skewY = [1];\n\n    ref.required_cache = generateRequiredProperties(data);\n};\n\nref.setVersion = function(version) {\n    var mapnik_reference = require('mapnik-reference');\n    if (mapnik_reference.version.hasOwnProperty(version)) {\n        ref.setData(mapnik_reference.version[version]);\n        return true;\n    } else {\n        return false;\n    }\n};\n\nref.selectorData = function(selector, i) {\n    if (ref.selector_cache[selector]) return ref.selector_cache[selector][i];\n};\n\nref.validSelector = function(selector) { return !!ref.selector_cache[selector]; };\nref.selectorName = function(selector) { return ref.selectorData(selector, 2); };\nref.selector = function(selector) { return ref.selectorData(selector, 0); };\nref.symbolizer = function(selector) { return ref.selectorData(selector, 1); };\n\nfunction generateSelectorCache(data) {\n    var index = {};\n    for (var i in data.symbolizers) {\n        for (var j in data.symbolizers[i]) {\n            if (data.symbolizers[i][j].hasOwnProperty('css')) {\n                index[data.symbolizers[i][j].css] = [data.symbolizers[i][j], i, j];\n            }\n        }\n    }\n    return index;\n}\n\nfunction generateMapnikFunctions(data) {\n    var functions = {};\n    for (var i in data.symbolizers) {\n        for (var j in data.symbolizers[i]) {\n            if (data.symbolizers[i][j].type === 'functions') {\n                for (var k = 0; k < data.symbolizers[i][j].functions.length; k++) {\n                    var fn = data.symbolizers[i][j].functions[k];\n                    functions[fn[0]] = fn[1];\n                }\n            }\n        }\n    }\n    return functions;\n}\n\nfunction generateRequiredProperties(data) {\n    var cache = {};\n    for (var symbolizer_name in data.symbolizers) {\n        cache[symbolizer_name] = [];\n        for (var j in data.symbolizers[symbolizer_name]) {\n            if (data.symbolizers[symbolizer_name][j].required) {\n                cache[symbolizer_name].push(data.symbolizers[symbolizer_name][j].css);\n            }\n        }\n    }\n    return cache;\n}\n\nref.requiredProperties = function(symbolizer_name, rules) {\n    var req = ref.required_cache[symbolizer_name];\n    for (var i in req) {\n        if (!(req[i] in rules)) {\n            return 'Property ' + req[i] + ' required for defining ' +\n                symbolizer_name + ' styles.';\n        }\n    }\n};\n\n// TODO: finish implementation - this is dead code\nref._validateValue = {\n    'font': function(env, value) {\n        if (env.validation_data && env.validation_data.fonts) {\n            return env.validation_data.fonts.indexOf(value) != -1;\n        } else {\n            return true;\n        }\n    }\n};\n\nref.isFont = function(selector) {\n    return ref.selector(selector).validate == 'font';\n};\n\n// https://gist.github.com/982927\nref.editDistance = function(a, b){\n    if (a.length === 0) return b.length;\n    if (b.length === 0) return a.length;\n    var matrix = [];\n    for (var i = 0; i <= b.length; i++) { matrix[i] = [i]; }\n    for (var j = 0; j <= a.length; j++) { matrix[0][j] = j; }\n    for (i = 1; i <= b.length; i++) {\n        for (j = 1; j <= a.length; j++) {\n            if (b.charAt(i-1) == a.charAt(j-1)) {\n                matrix[i][j] = matrix[i-1][j-1];\n            } else {\n                matrix[i][j] = Math.min(matrix[i-1][j-1] + 1, // substitution\n                    Math.min(matrix[i][j-1] + 1, // insertion\n                    matrix[i-1][j] + 1)); // deletion\n            }\n        }\n    }\n    return matrix[b.length][a.length];\n};\n\nfunction validateFunctions(value, selector) {\n    if (value.value[0].is === 'string') return true;\n    for (var i in value.value) {\n        for (var j in value.value[i].value) {\n            if (value.value[i].value[j].is !== 'call') return false;\n            var f = _.find(ref\n                .selector(selector).functions, function(x) {\n                    return x[0] == value.value[i].value[j].name;\n                });\n            if (!(f && f[1] == -1)) {\n                // This filter is unknown or given an incorrect number of arguments\n                if (!f || f[1] !== value.value[i].value[j].args.length) return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction validateKeyword(value, selector) {\n    if (typeof ref.selector(selector).type === 'object') {\n        return ref.selector(selector).type\n            .indexOf(value.value[0].value) !== -1;\n    } else {\n        // allow unquoted keywords as strings\n        return ref.selector(selector).type === 'string';\n    }\n}\n\nref.validValue = function(env, selector, value) {\n    var i, j;\n    // TODO: handle in reusable way\n    if (!ref.selector(selector)) {\n        return false;\n    } else if (value.value[0].is == 'keyword') {\n        return validateKeyword(value, selector);\n    } else if (value.value[0].is == 'undefined') {\n        // caught earlier in the chain - ignore here so that\n        // error is not overridden\n        return true;\n    } else if (ref.selector(selector).type == 'numbers') {\n        for (i in value.value) {\n            if (value.value[i].is !== 'float') {\n                return false;\n            }\n        }\n        return true;\n    } else if (ref.selector(selector).type == 'tags') {\n        if (!value.value) return false;\n        if (!value.value[0].value) {\n            return value.value[0].is === 'tag';\n        }\n        for (i = 0; i < value.value[0].value.length; i++) {\n            if (value.value[0].value[i].is !== 'tag') return false;\n        }\n        return true;\n    } else if (ref.selector(selector).type == 'functions') {\n        // For backwards compatibility, you can specify a string for `functions`-compatible\n        // values, though they will not be validated.\n        return validateFunctions(value, selector);\n    } else if (ref.selector(selector).type === 'unsigned') {\n        if (value.value[0].is === 'float') {\n            value.value[0].round();\n            return true;\n        } else {\n            return false;\n        }\n    } else if ((ref.selector(selector).expression)) {\n        return true;\n    } else {\n        if (ref.selector(selector).validate) {\n            var valid = false;\n            for (i = 0; i < value.value.length; i++) {\n                if (ref.selector(selector).type == value.value[i].is &&\n                    ref\n                        ._validateValue\n                            [ref.selector(selector).validate]\n                            (env, value.value[i].value)) {\n                    return true;\n                }\n            }\n            return valid;\n        } else {\n            return ref.selector(selector).type == value.value[0].is;\n        }\n    }\n};\n\ntree.Reference = ref;\n\n})(require('../tree'));\n",
    "(function(tree) {\n// a rule is a single property and value combination, or variable\n// name and value combination, like\n// polygon-opacity: 1.0; or @opacity: 1.0;\ntree.Rule = function Rule(name, value, index, filename) {\n    var parts = name.split('/');\n    this.name = parts.pop();\n    this.instance = parts.length ? parts[0] : '__default__';\n    this.value = (value instanceof tree.Value) ?\n        value : new tree.Value([value]);\n    this.index = index;\n    this.symbolizer = tree.Reference.symbolizer(this.name);\n    this.filename = filename;\n    this.variable = (name.charAt(0) === '@');\n};\n\ntree.Rule.prototype.is = 'rule';\n\ntree.Rule.prototype.clone = function() {\n    var clone = Object.create(tree.Rule.prototype);\n    clone.name = this.name;\n    clone.value = this.value;\n    clone.index = this.index;\n    clone.instance = this.instance;\n    clone.symbolizer = this.symbolizer;\n    clone.filename = this.filename;\n    clone.variable = this.variable;\n    return clone;\n};\n\ntree.Rule.prototype.updateID = function() {\n    return this.id = this.zoom + '#' + this.instance + '#' + this.name;\n};\n\ntree.Rule.prototype.toString = function() {\n    return '[' + tree.Zoom.toString(this.zoom) + '] ' + this.name + ': ' + this.value;\n};\n\nfunction getMean(name) {\n    return Object.keys(tree.Reference.selector_cache).map(function(f) {\n        return [f, tree.Reference.editDistance(name, f)];\n    }).sort(function(a, b) { return a[1] - b[1]; });\n}\n\n// second argument, if true, outputs the value of this\n// rule without the usual attribute=\"content\" wrapping. Right\n// now this is just for the TextSymbolizer, but applies to other\n// properties in reference.json which specify serialization=content\ntree.Rule.prototype.toXML = function(env, content, sep, format) {\n    if (!tree.Reference.validSelector(this.name)) {\n        var mean = getMean(this.name);\n        var mean_message = '';\n        if (mean[0][1] < 3) {\n            mean_message = '. Did you mean ' + mean[0][0] + '?';\n        }\n        return env.error({\n            message: \"Unrecognized rule: \" + this.name + mean_message,\n            index: this.index,\n            type: 'syntax',\n            filename: this.filename\n        });\n    }\n\n    if ((this.value instanceof tree.Value) &&\n        !tree.Reference.validValue(env, this.name, this.value)) {\n        if (!tree.Reference.selector(this.name)) {\n            return env.error({\n                message: 'Unrecognized property: ' +\n                    this.name,\n                index: this.index,\n                type: 'syntax',\n                filename: this.filename\n            });\n        } else {\n            var typename;\n            if (tree.Reference.selector(this.name).validate) {\n                typename = tree.Reference.selector(this.name).validate;\n            } else if (typeof tree.Reference.selector(this.name).type === 'object') {\n                typename = 'keyword (options: ' + tree.Reference.selector(this.name).type.join(', ') + ')';\n            } else {\n                typename = tree.Reference.selector(this.name).type;\n            }\n            return env.error({\n                message: 'Invalid value for ' +\n                    this.name +\n                    ', the type ' + typename +\n                    ' is expected. ' + this.value +\n                    ' (of type ' + this.value.value[0].is + ') ' +\n                    ' was given.',\n                index: this.index,\n                type: 'syntax',\n                filename: this.filename\n            });\n        }\n    }\n\n    if (this.variable) {\n        return '';\n    } else if (tree.Reference.isFont(this.name) && this.value.value.length > 1) {\n        var f = tree._getFontSet(env, this.value.value);\n        return 'fontset-name=\"' + f.name + '\"';\n    } else if (content) {\n        return this.value.toString(env, this.name, sep);\n    } else {\n        return tree.Reference.selectorName(this.name) +\n            '=\"' +\n            this.value.toString(env, this.name) +\n            '\"';\n    }\n};\n\n// TODO: Rule ev chain should add fontsets to env.frames\ntree.Rule.prototype.ev = function(context) {\n    return new tree.Rule(this.name,\n        this.value.ev(context),\n        this.index,\n        this.filename);\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Ruleset = function Ruleset(selectors, rules) {\n    this.selectors = selectors;\n    this.rules = rules;\n    // static cache of find() function\n    this._lookups = {};\n};\ntree.Ruleset.prototype = {\n    is: 'ruleset',\n    'ev': function(env) {\n        var i,\n            ruleset = new tree.Ruleset(this.selectors, this.rules.slice(0));\n        ruleset.root = this.root;\n\n        // push the current ruleset to the frames stack\n        env.frames.unshift(ruleset);\n\n        // Evaluate everything else\n        for (i = 0, rule; i < ruleset.rules.length; i++) {\n            rule = ruleset.rules[i];\n            ruleset.rules[i] = rule.ev ? rule.ev(env) : rule;\n        }\n\n        // Pop the stack\n        env.frames.shift();\n\n        return ruleset;\n    },\n    match: function(args) {\n        return !args || args.length === 0;\n    },\n    variables: function() {\n        if (this._variables) { return this._variables; }\n        else {\n            return this._variables = this.rules.reduce(function(hash, r) {\n                if (r instanceof tree.Rule && r.variable === true) {\n                    hash[r.name] = r;\n                }\n                return hash;\n            }, {});\n        }\n    },\n    variable: function(name) {\n        return this.variables()[name];\n    },\n    rulesets: function() {\n        if (this._rulesets) { return this._rulesets; }\n        else {\n            return this._rulesets = this.rules.filter(function(r) {\n                return (r instanceof tree.Ruleset);\n            });\n        }\n    },\n    find: function(selector, self) {\n        self = self || this;\n        var rules = [], rule, match,\n            key = selector.toString();\n\n        if (key in this._lookups) { return this._lookups[key]; }\n\n        this.rulesets().forEach(function(rule) {\n            if (rule !== self) {\n                for (var j = 0; j < rule.selectors.length; j++) {\n                    match = selector.match(rule.selectors[j]);\n                    if (match) {\n                        if (selector.elements.length > 1) {\n                            Array.prototype.push.apply(rules, rule.find(\n                                new tree.Selector(null, null, null, selector.elements.slice(1)), self));\n                        } else {\n                            rules.push(rule);\n                        }\n                        break;\n                    }\n                }\n            }\n        });\n        return this._lookups[key] = rules;\n    },\n    // Zooms can use variables. This replaces tree.Zoom objects on selectors\n    // with simple bit-arrays that we can compare easily.\n    evZooms: function(env) {\n        for (var i = 0; i < this.selectors.length; i++) {\n            var zval = tree.Zoom.all;\n            for (var z = 0; z < this.selectors[i].zoom.length; z++) {\n                zval = zval & this.selectors[i].zoom[z].ev(env).zoom;\n            }\n            this.selectors[i].zoom = zval;\n        }\n    },\n    flatten: function(result, parents, env) {\n        var selectors = [], i, j;\n        if (this.selectors.length === 0) {\n            env.frames = env.frames.concat(this.rules);\n        }\n        // evaluate zoom variables on this object.\n        this.evZooms(env);\n        for (i = 0; i < this.selectors.length; i++) {\n            var child = this.selectors[i];\n\n            if (!child.filters) {\n                // TODO: is this internal inconsistency?\n                // This is an invalid filterset.\n                continue;\n            }\n\n            if (parents.length) {\n                for (j = 0; j < parents.length; j++) {\n                    var parent = parents[j];\n\n                    var mergedFilters = parent.filters.cloneWith(child.filters);\n                    if (mergedFilters === null) {\n                        // Filters could be added, but they didn't change the\n                        // filters. This means that we only have to clone when\n                        // the zoom levels or the attachment is different too.\n                        if (parent.zoom === (parent.zoom & child.zoom) &&\n                            parent.frame_offset === child.frame_offset &&\n                            parent.attachment === child.attachment &&\n                            parent.elements.join() === child.elements.join()) {\n                            selectors.push(parent);\n                            continue;\n                        } else {\n                            mergedFilters = parent.filters;\n                        }\n                    } else if (!mergedFilters) {\n                        // The merged filters are invalid, that means we don't\n                        // have to clone.\n                        continue;\n                    }\n\n                    var clone = Object.create(tree.Selector.prototype);\n                    clone.filters = mergedFilters;\n                    clone.zoom = parent.zoom & child.zoom;\n                    clone.frame_offset = child.frame_offset;\n                    clone.elements = parent.elements.concat(child.elements);\n                    if (parent.attachment && child.attachment) {\n                        clone.attachment = parent.attachment + '/' + child.attachment;\n                    }\n                    else clone.attachment = child.attachment || parent.attachment;\n                    clone.conditions = parent.conditions + child.conditions;\n                    clone.index = child.index;\n                    selectors.push(clone);\n                }\n            } else {\n                selectors.push(child);\n            }\n        }\n\n        var rules = [];\n        for (i = 0; i < this.rules.length; i++) {\n            var rule = this.rules[i];\n\n            // Recursively flatten any nested rulesets\n            if (rule instanceof tree.Ruleset) {\n                rule.flatten(result, selectors, env);\n            } else if (rule instanceof tree.Rule) {\n                rules.push(rule);\n            } else if (rule instanceof tree.Invalid) {\n                env.error(rule);\n            }\n        }\n\n        var index = rules.length ? rules[0].index : false;\n        for (i = 0; i < selectors.length; i++) {\n            // For specificity sort, use the position of the first rule to allow\n            // defining attachments that are under current element as a descendant\n            // selector.\n            if (index !== false) {\n                selectors[i].index = index;\n            }\n            result.push(new tree.Definition(selectors[i], rules.slice()));\n        }\n\n        return result;\n    }\n};\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Selector = function Selector(filters, zoom, frame_offset, elements, attachment, conditions, index) {\n    this.elements = elements || [];\n    this.attachment = attachment;\n    this.filters = filters || {};\n    this.frame_offset = frame_offset;\n    this.zoom = typeof zoom !== 'undefined' ? zoom : tree.Zoom.all;\n    this.conditions = conditions;\n    this.index = index;\n};\n\n// Determine the specificity of this selector\n// based on the specificity of its elements - calling\n// Element.specificity() in order to do so\n//\n// [ID, Class, Filters, Position in document]\ntree.Selector.prototype.specificity = function() {\n    return this.elements.reduce(function(memo, e) {\n        var spec = e.specificity();\n        memo[0] += spec[0];\n        memo[1] += spec[1];\n        return memo;\n    }, [0, 0, this.conditions, this.index]);\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\n\n// Given a style's name, attachment, definitions, and an environment object,\n// return a stringified style for Mapnik\ntree.StyleXML = function(name, attachment, definitions, env) {\n    var existing = {};\n    var image_filters = [], image_filters_inflate = [], direct_image_filters = [], comp_op = [], opacity = [];\n\n    for (var i = 0; i < definitions.length; i++) {\n        for (var j = 0; j < definitions[i].rules.length; j++) {\n            if (definitions[i].rules[j].name === 'image-filters') {\n                image_filters.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'image-filters-inflate') {\n                image_filters_inflate.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'direct-image-filters') {\n                direct_image_filters.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'comp-op') {\n                comp_op.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'opacity') {\n                opacity.push(definitions[i].rules[j]);\n            }\n        }\n    }\n\n    var rules = definitions.map(function(definition) {\n        return definition.toXML(env, existing);\n    });\n\n    var attrs_xml = '';\n\n    if (image_filters.length) {\n        attrs_xml += ' image-filters=\"' + _.chain(image_filters)\n            // prevent identical filters from being duplicated in the style\n            .uniq(function(i) { return i.id; }).map(function(f) {\n            return f.ev(env).toXML(env, true, ',', 'image-filter');\n        }).value().join(',') + '\"';\n    }\n\n    if (image_filters_inflate.length) {\n        attrs_xml += ' image-filters-inflate=\"' + image_filters_inflate[0].value.ev(env).toString() + '\"';\n    }\n\n    if (direct_image_filters.length) {\n        attrs_xml += ' direct-image-filters=\"' + _.chain(direct_image_filters)\n            // prevent identical filters from being duplicated in the style\n            .uniq(function(i) { return i.id; }).map(function(f) {\n            return f.ev(env).toXML(env, true, ',', 'direct-image-filter');\n        }).value().join(',') + '\"';\n    }\n\n    if (comp_op.length && comp_op[0].value.ev(env).value != 'src-over') {\n        attrs_xml += ' comp-op=\"' + comp_op[0].value.ev(env).toString() + '\"';\n    }\n\n    if (opacity.length && opacity[0].value.ev(env).value != 1) {\n        attrs_xml += ' opacity=\"' + opacity[0].value.ev(env).toString() + '\"';\n    }\n    var rule_string = rules.join('');\n    if (!attrs_xml && !rule_string) return '';\n    return '<Style name=\"' + name + '\" filter-mode=\"first\"' + attrs_xml + '>\\n' + rule_string + '</Style>';\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.URL = function URL(val, paths) {\n    this.value = val;\n    this.paths = paths;\n};\n\ntree.URL.prototype = {\n    is: 'uri',\n    toString: function() {\n        return this.value.toString();\n    },\n    ev: function(ctx) {\n        return new tree.URL(this.value.ev(ctx), this.paths);\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Value = function Value(value) {\n    this.value = value;\n};\n\ntree.Value.prototype = {\n    is: 'value',\n    ev: function(env) {\n        if (this.value.length === 1) {\n            return this.value[0].ev(env);\n        } else {\n            return new tree.Value(this.value.map(function(v) {\n                return v.ev(env);\n            }));\n        }\n    },\n    toString: function(env, selector, sep, format) {\n        return this.value.map(function(e) {\n            return e.toString(env, format);\n        }).join(sep || ', ');\n    },\n    clone: function() {\n        var obj = Object.create(tree.Value.prototype);\n        if (Array.isArray(obj)) obj.value = this.value.slice();\n        else obj.value = this.value;\n        obj.is = this.is;\n        return obj;\n    },\n\n    toJS: function(env) {\n      //var v = this.value[0].value[0];\n      var val = this.ev(env);\n      var v = val.toString();\n      if(val.is === \"color\" || val.is === 'uri' || val.is === 'string' || val.is === 'keyword') {\n        v = \"'\" + v + \"'\";\n      } else if (val.is === 'field') {\n        // replace [variable] by ctx['variable']\n        v = v.replace(/\\[(.*)\\]/g, \"data['$1']\");\n      }else if (val.is === 'call') {\n        v = JSON.stringify({\n            name: val.name,\n            args: val.args\n        })\n      }\n      return \"_value = \" + v + \";\";\n    }\n\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\n\ntree.Variable = function Variable(name, index, filename) {\n    this.name = name;\n    this.index = index;\n    this.filename = filename;\n};\n\ntree.Variable.prototype = {\n    is: 'variable',\n    toString: function() {\n        return this.name;\n    },\n    ev: function(env) {\n        var variable,\n            v,\n            name = this.name;\n\n        if (this._css) return this._css;\n\n        var thisframe = env.frames.filter(function(f) {\n            return f.name == this.name;\n        }.bind(this));\n        if (thisframe.length) {\n            return thisframe[0].value.ev(env);\n        } else {\n            env.error({\n                message: 'variable ' + this.name + ' is undefined',\n                index: this.index,\n                type: 'runtime',\n                filename: this.filename\n            });\n            return {\n                is: 'undefined',\n                value: 'undefined'\n            };\n        }\n    }\n};\n\n})(require('../tree'));\n",
    "var tree = require('../tree');\n\n// Storage for zoom ranges. Only supports continuous ranges,\n// and stores them as bit-sequences so that they can be combined,\n// inverted, and compared quickly.\ntree.Zoom = function(op, value, index) {\n    this.op = op;\n    this.value = value;\n    this.index = index;\n};\n\ntree.Zoom.prototype.setZoom = function(zoom) {\n    this.zoom = zoom;\n    return this;\n};\n\ntree.Zoom.prototype.ev = function(env) {\n    var start = 0,\n        end = Infinity,\n        value = parseInt(this.value.ev(env).toString(), 10),\n        zoom = 0;\n\n    if (value > tree.Zoom.maxZoom || value < 0) {\n        env.error({\n            message: 'Only zoom levels between 0 and ' +\n                tree.Zoom.maxZoom + ' supported.',\n            index: this.index\n        });\n    }\n\n    switch (this.op) {\n        case '=':\n            this.zoom = 1 << value;\n            return this;\n        case '>':\n            start = value + 1;\n            break;\n        case '>=':\n            start = value;\n            break;\n        case '<':\n            end = value - 1;\n            break;\n        case '<=':\n            end = value;\n            break;\n    }\n    for (var i = 0; i <= tree.Zoom.maxZoom; i++) {\n        if (i >= start && i <= end) {\n            zoom |= (1 << i);\n        }\n    }\n    this.zoom = zoom;\n    return this;\n};\n\ntree.Zoom.prototype.toString = function() {\n    return this.zoom;\n};\n\n// Covers all zoomlevels from 0 to 22\ntree.Zoom.all = 0x7FFFFF;\n\ntree.Zoom.maxZoom = 22;\n\ntree.Zoom.ranges = {\n     0: 1000000000,\n     1: 500000000,\n     2: 200000000,\n     3: 100000000,\n     4: 50000000,\n     5: 25000000,\n     6: 12500000,\n     7: 6500000,\n     8: 3000000,\n     9: 1500000,\n    10: 750000,\n    11: 400000,\n    12: 200000,\n    13: 100000,\n    14: 50000,\n    15: 25000,\n    16: 12500,\n    17: 5000,\n    18: 2500,\n    19: 1500,\n    20: 750,\n    21: 500,\n    22: 250,\n    23: 100\n};\n\n// Only works for single range zooms. `[XXX....XXXXX.........]` is invalid.\ntree.Zoom.prototype.toXML = function() {\n    var conditions = [];\n    if (this.zoom != tree.Zoom.all) {\n        var start = null, end = null;\n        for (var i = 0; i <= tree.Zoom.maxZoom; i++) {\n            if (this.zoom & (1 << i)) {\n                if (start === null) start = i;\n                end = i;\n            }\n        }\n        if (start > 0) conditions.push('    <MaxScaleDenominator>' +\n            tree.Zoom.ranges[start] + '</MaxScaleDenominator>\\n');\n        if (end < 22) conditions.push('    <MinScaleDenominator>' +\n            tree.Zoom.ranges[end + 1] + '</MinScaleDenominator>\\n');\n    }\n    return conditions;\n};\n\ntree.Zoom.prototype.toString = function() {\n    var str = '';\n    for (var i = 0; i <= tree.Zoom.maxZoom; i++) {\n        str += (this.zoom & (1 << i)) ? 'X' : '.';\n    }\n    return str;\n};\n",
    "var fs = require('fs'),\n    path = require('path'),\n    existsSync = require('fs').existsSync || require('path').existsSync;\n\n// Load all stated versions into the module exports\nmodule.exports.version = {};\n\nvar refs = [\n '2.0.0',\n '2.0.1',\n '2.0.2',\n '2.1.0',\n '2.1.1',\n '2.2.0',\n '2.3.0',\n '3.0.0'\n];\n\nrefs.map(function(version) {\n    module.exports.version[version] = require(path.join(__dirname, version, 'reference.json'));\n    var ds_path = path.join(__dirname, version, 'datasources.json');\n    if (existsSync(ds_path)) {\n        module.exports.version[version].datasources = require(ds_path).datasources;\n    }\n});\n",
    "module.exports={\n  \"name\": \"carto\",\n  \"version\": \"0.15.1-cdb1\",\n  \"description\": \"CartoCSS Stylesheet Compiler\",\n  \"url\": \"https://github.com/cartodb/carto\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+ssh://git@github.com/cartodb/carto.git\"\n  },\n  \"author\": {\n    \"name\": \"CartoDB\",\n    \"url\": \"http://cartodb.com/\"\n  },\n  \"keywords\": [\n    \"maps\",\n    \"css\",\n    \"stylesheets\"\n  ],\n  \"contributors\": [\n    {\n      \"name\": \"Tom MacWright\",\n      \"email\": \"macwright@gmail.com\"\n    },\n    {\n      \"name\": \"Konstantin Käfer\"\n    },\n    {\n      \"name\": \"Alexis Sellier\",\n      \"email\": \"self@cloudhead.net\"\n    },\n    {\n      \"name\": \"Raul Ochoa\",\n      \"email\": \"rochoa@cartodb.com\"\n    },\n    {\n      \"name\": \"Javi Santana\",\n      \"email\": \"jsantana@cartodb.com\"\n    }\n  ],\n  \"licenses\": [\n    {\n      \"type\": \"Apache\"\n    }\n  ],\n  \"bin\": {\n    \"carto\": \"./bin/carto\"\n  },\n  \"man\": [\n    \"./man/carto.1\"\n  ],\n  \"main\": \"./lib/carto/index\",\n  \"engines\": {\n    \"node\": \">=0.4.x\"\n  },\n  \"dependencies\": {\n    \"underscore\": \"~1.6.0\",\n    \"mapnik-reference\": \"~6.0.2\",\n    \"optimist\": \"~0.6.0\"\n  },\n  \"devDependencies\": {\n    \"mocha\": \"1.12.x\",\n    \"jshint\": \"0.2.x\",\n    \"sax\": \"0.1.x\",\n    \"istanbul\": \"~0.2.14\",\n    \"coveralls\": \"~2.10.1\",\n    \"browserify\": \"~7.0.0\",\n    \"uglify-js\": \"1.3.3\"\n  },\n  \"scripts\": {\n    \"pretest\": \"npm install\",\n    \"test\": \"mocha -R spec\",\n    \"coverage\": \"istanbul cover ./node_modules/.bin/_mocha && coveralls < ./coverage/lcov.info\"\n  },\n  \"gitHead\": \"27850ed122a6f5dbfc5efa4938d8385bbcbc87c5\",\n  \"readme\": \"# CartoCSS\\n\\n[![Build Status](https://secure.travis-ci.org/mapbox/carto.png)](http://travis-ci.org/mapbox/carto)\\n\\nIs as stylesheet renderer for javascript, It's an evolution of the Mapnik renderer from Mapbox.\\nPlease, see original [Mapbox repo](http://github.com/mapbox/carto) for more information and credits\\n\\n## Quick Start\\n\\n```javascript\\n// shader is a CartoCSS object\\n\\nvar cartocss = [\\n    '#layer {',\\n    ' marker-width: [property]',\\n    ' marker-fill: red',\\n    '}'\\n].join('')\\nvar shader = new carto.RendererJS().render(cartocss);\\nvar layers = shader.getLayers()\\nfor (var i = 0; i < layers.length; ++i) {\\n    var layer = layers[i];\\n    console.log(\\\"layer name: \\\", layer.fullName())\\n    console.log(\\\"- frames: \\\", layer.frames())\\n    console.log(\\\"- attachment: \\\", layer.attachment())\\n\\n    var layerShader = layer.getStyle({ property: 1 }, { zoom: 10 })\\n    console.log(layerShader['marker-width']) // 1\\n    console.log(layerShader['marker-fill']) // #FF0000\\n}\\n\\n```\\n\\n# API\\n\\n## RendererJS\\n\\n### render(cartocss)\\n\\n## CartoCSS\\n\\ncompiled cartocss object\\n\\n### getLayers\\n\\nreturn the layers, an array of ``CartoCSS.Layer`` object\\n\\n### getDefault\\n\\nreturn the default layer (``CartoCSS.Layer``), usually the Map layer\\n\\n\\n### findLayer(where)\\n\\nfind a layer using where object.\\n\\n```\\nshader.findLayer({ name: 'test' })\\n```\\n\\n## CartoCSS.Layer\\n\\n### getStyle(props, context)\\n\\nreturn the evaluated style:\\n    - props: object containing properties needed to render the style. If the cartocss style uses\\n      some variables they should be passed in this object\\n    - context: rendering context variables like ``zoom`` or animation ``frame``\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n## Reference Documentation\\n\\n* [mapbox.com/carto](http://mapbox.com/carto/)\\n\\n\\n\",\n  \"readmeFilename\": \"README.md\",\n  \"bugs\": {\n    \"url\": \"https://github.com/cartodb/carto/issues\"\n  },\n  \"homepage\": \"https://github.com/cartodb/carto#readme\",\n  \"_id\": \"carto@0.15.1-cdb1\",\n  \"_shasum\": \"e9fc37db0867d45b3776cf08bf4342958038a438\",\n  \"_from\": \"git://github.com/CartoDB/carto.git#27850ed\",\n  \"_resolved\": \"git://github.com/CartoDB/carto.git#27850ed122a6f5dbfc5efa4938d8385bbcbc87c5\"\n}\n",
    "(function(exports){\ncrossfilter.version = \"1.3.12\";\nfunction crossfilter_identity(d) {\n  return d;\n}\ncrossfilter.permute = permute;\n\nfunction permute(array, index) {\n  for (var i = 0, n = index.length, copy = new Array(n); i < n; ++i) {\n    copy[i] = array[index[i]];\n  }\n  return copy;\n}\nvar bisect = crossfilter.bisect = bisect_by(crossfilter_identity);\n\nbisect.by = bisect_by;\n\nfunction bisect_by(f) {\n\n  // Locate the insertion point for x in a to maintain sorted order. The\n  // arguments lo and hi may be used to specify a subset of the array which\n  // should be considered; by default the entire array is used. If x is already\n  // present in a, the insertion point will be before (to the left of) any\n  // existing entries. The return value is suitable for use as the first\n  // argument to `array.splice` assuming that a is already sorted.\n  //\n  // The returned insertion point i partitions the array a into two halves so\n  // that all v < x for v in a[lo:i] for the left side and all v >= x for v in\n  // a[i:hi] for the right side.\n  function bisectLeft(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (f(a[mid]) < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  // Similar to bisectLeft, but returns an insertion point which comes after (to\n  // the right of) any existing entries of x in a.\n  //\n  // The returned insertion point i partitions the array into two halves so that\n  // all v <= x for v in a[lo:i] for the left side and all v > x for v in\n  // a[i:hi] for the right side.\n  function bisectRight(a, x, lo, hi) {\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (x < f(a[mid])) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  bisectRight.right = bisectRight;\n  bisectRight.left = bisectLeft;\n  return bisectRight;\n}\nvar heap = crossfilter.heap = heap_by(crossfilter_identity);\n\nheap.by = heap_by;\n\nfunction heap_by(f) {\n\n  // Builds a binary heap within the specified array a[lo:hi]. The heap has the\n  // property such that the parent a[lo+i] is always less than or equal to its\n  // two children: a[lo+2*i+1] and a[lo+2*i+2].\n  function heap(a, lo, hi) {\n    var n = hi - lo,\n        i = (n >>> 1) + 1;\n    while (--i > 0) sift(a, i, n, lo);\n    return a;\n  }\n\n  // Sorts the specified array a[lo:hi] in descending order, assuming it is\n  // already a heap.\n  function sort(a, lo, hi) {\n    var n = hi - lo,\n        t;\n    while (--n > 0) t = a[lo], a[lo] = a[lo + n], a[lo + n] = t, sift(a, 1, n, lo);\n    return a;\n  }\n\n  // Sifts the element a[lo+i-1] down the heap, where the heap is the contiguous\n  // slice of array a[lo:lo+n]. This method can also be used to update the heap\n  // incrementally, without incurring the full cost of reconstructing the heap.\n  function sift(a, i, n, lo) {\n    var d = a[--lo + i],\n        x = f(d),\n        child;\n    while ((child = i << 1) <= n) {\n      if (child < n && f(a[lo + child]) > f(a[lo + child + 1])) child++;\n      if (x <= f(a[lo + child])) break;\n      a[lo + i] = a[lo + child];\n      i = child;\n    }\n    a[lo + i] = d;\n  }\n\n  heap.sort = sort;\n  return heap;\n}\nvar heapselect = crossfilter.heapselect = heapselect_by(crossfilter_identity);\n\nheapselect.by = heapselect_by;\n\nfunction heapselect_by(f) {\n  var heap = heap_by(f);\n\n  // Returns a new array containing the top k elements in the array a[lo:hi].\n  // The returned array is not sorted, but maintains the heap property. If k is\n  // greater than hi - lo, then fewer than k elements will be returned. The\n  // order of elements in a is unchanged by this operation.\n  function heapselect(a, lo, hi, k) {\n    var queue = new Array(k = Math.min(hi - lo, k)),\n        min,\n        i,\n        x,\n        d;\n\n    for (i = 0; i < k; ++i) queue[i] = a[lo++];\n    heap(queue, 0, k);\n\n    if (lo < hi) {\n      min = f(queue[0]);\n      do {\n        if (x = f(d = a[lo]) > min) {\n          queue[0] = d;\n          min = f(heap(queue, 0, k)[0]);\n        }\n      } while (++lo < hi);\n    }\n\n    return queue;\n  }\n\n  return heapselect;\n}\nvar insertionsort = crossfilter.insertionsort = insertionsort_by(crossfilter_identity);\n\ninsertionsort.by = insertionsort_by;\n\nfunction insertionsort_by(f) {\n\n  function insertionsort(a, lo, hi) {\n    for (var i = lo + 1; i < hi; ++i) {\n      for (var j = i, t = a[i], x = f(t); j > lo && f(a[j - 1]) > x; --j) {\n        a[j] = a[j - 1];\n      }\n      a[j] = t;\n    }\n    return a;\n  }\n\n  return insertionsort;\n}\n// Algorithm designed by Vladimir Yaroslavskiy.\n// Implementation based on the Dart project; see lib/dart/LICENSE for details.\n\nvar quicksort = crossfilter.quicksort = quicksort_by(crossfilter_identity);\n\nquicksort.by = quicksort_by;\n\nfunction quicksort_by(f) {\n  var insertionsort = insertionsort_by(f);\n\n  function sort(a, lo, hi) {\n    return (hi - lo < quicksort_sizeThreshold\n        ? insertionsort\n        : quicksort)(a, lo, hi);\n  }\n\n  function quicksort(a, lo, hi) {\n    // Compute the two pivots by looking at 5 elements.\n    var sixth = (hi - lo) / 6 | 0,\n        i1 = lo + sixth,\n        i5 = hi - 1 - sixth,\n        i3 = lo + hi - 1 >> 1,  // The midpoint.\n        i2 = i3 - sixth,\n        i4 = i3 + sixth;\n\n    var e1 = a[i1], x1 = f(e1),\n        e2 = a[i2], x2 = f(e2),\n        e3 = a[i3], x3 = f(e3),\n        e4 = a[i4], x4 = f(e4),\n        e5 = a[i5], x5 = f(e5);\n\n    var t;\n\n    // Sort the selected 5 elements using a sorting network.\n    if (x1 > x2) t = e1, e1 = e2, e2 = t, t = x1, x1 = x2, x2 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n    if (x1 > x3) t = e1, e1 = e3, e3 = t, t = x1, x1 = x3, x3 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x1 > x4) t = e1, e1 = e4, e4 = t, t = x1, x1 = x4, x4 = t;\n    if (x3 > x4) t = e3, e3 = e4, e4 = t, t = x3, x3 = x4, x4 = t;\n    if (x2 > x5) t = e2, e2 = e5, e5 = t, t = x2, x2 = x5, x5 = t;\n    if (x2 > x3) t = e2, e2 = e3, e3 = t, t = x2, x2 = x3, x3 = t;\n    if (x4 > x5) t = e4, e4 = e5, e5 = t, t = x4, x4 = x5, x5 = t;\n\n    var pivot1 = e2, pivotValue1 = x2,\n        pivot2 = e4, pivotValue2 = x4;\n\n    // e2 and e4 have been saved in the pivot variables. They will be written\n    // back, once the partitioning is finished.\n    a[i1] = e1;\n    a[i2] = a[lo];\n    a[i3] = e3;\n    a[i4] = a[hi - 1];\n    a[i5] = e5;\n\n    var less = lo + 1,   // First element in the middle partition.\n        great = hi - 2;  // Last element in the middle partition.\n\n    // Note that for value comparison, <, <=, >= and > coerce to a primitive via\n    // Object.prototype.valueOf; == and === do not, so in order to be consistent\n    // with natural order (such as for Date objects), we must do two compares.\n    var pivotsEqual = pivotValue1 <= pivotValue2 && pivotValue1 >= pivotValue2;\n    if (pivotsEqual) {\n\n      // Degenerated case where the partitioning becomes a dutch national flag\n      // problem.\n      //\n      // [ |  < pivot  | == pivot | unpartitioned | > pivot  | ]\n      //  ^             ^          ^             ^            ^\n      // left         less         k           great         right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1) for x in ]left, less[ : x < pivot.\n      //   2) for x in [less, k[ : x == pivot.\n      //   3) for x in ]great, right[ : x > pivot.\n      for (var k = less; k <= great; ++k) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else if (xk > pivotValue1) {\n\n          // Find the first element <= pivot in the range [k - 1, great] and\n          // put [:ek:] there. We know that such an element must exist:\n          // When k == less, then el3 (which is equal to pivot) lies in the\n          // interval. Otherwise a[k - 1] == pivot and the search stops at k-1.\n          // Note that in the latter case invariant 2 will be violated for a\n          // short amount of time. The invariant will be restored when the\n          // pivots are put into their final positions.\n          while (true) {\n            var greatValue = f(a[great]);\n            if (greatValue > pivotValue1) {\n              great--;\n              // This is the only location in the while-loop where a new\n              // iteration is started.\n              continue;\n            } else if (greatValue < pivotValue1) {\n              // Triple exchange.\n              a[k] = a[less];\n              a[less++] = a[great];\n              a[great--] = ek;\n              break;\n            } else {\n              a[k] = a[great];\n              a[great--] = ek;\n              // Note: if great < k then we will exit the outer loop and fix\n              // invariant 2 (which we just violated).\n              break;\n            }\n          }\n        }\n      }\n    } else {\n\n      // We partition the list into three parts:\n      //  1. < pivot1\n      //  2. >= pivot1 && <= pivot2\n      //  3. > pivot2\n      //\n      // During the loop we have:\n      // [ | < pivot1 | >= pivot1 && <= pivot2 | unpartitioned  | > pivot2  | ]\n      //  ^            ^                        ^              ^             ^\n      // left         less                     k              great        right\n      //\n      // a[left] and a[right] are undefined and are filled after the\n      // partitioning.\n      //\n      // Invariants:\n      //   1. for x in ]left, less[ : x < pivot1\n      //   2. for x in [less, k[ : pivot1 <= x && x <= pivot2\n      //   3. for x in ]great, right[ : x > pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk < pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          ++less;\n        } else {\n          if (xk > pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue > pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] <= pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] >= pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // Move pivots into their final positions.\n    // We shrunk the list from both sides (a[left] and a[right] have\n    // meaningless values in them) and now we move elements from the first\n    // and third partition into these locations so that we can store the\n    // pivots.\n    a[lo] = a[less - 1];\n    a[less - 1] = pivot1;\n    a[hi - 1] = a[great + 1];\n    a[great + 1] = pivot2;\n\n    // The list is now partitioned into three partitions:\n    // [ < pivot1   | >= pivot1 && <= pivot2   |  > pivot2   ]\n    //  ^            ^                        ^             ^\n    // left         less                     great        right\n\n    // Recursive descent. (Don't include the pivot values.)\n    sort(a, lo, less - 1);\n    sort(a, great + 2, hi);\n\n    if (pivotsEqual) {\n      // All elements in the second partition are equal to the pivot. No\n      // need to sort them.\n      return a;\n    }\n\n    // In theory it should be enough to call _doSort recursively on the second\n    // partition.\n    // The Android source however removes the pivot elements from the recursive\n    // call if the second partition is too large (more than 2/3 of the list).\n    if (less < i1 && great > i5) {\n      var lessValue, greatValue;\n      while ((lessValue = f(a[less])) <= pivotValue1 && lessValue >= pivotValue1) ++less;\n      while ((greatValue = f(a[great])) <= pivotValue2 && greatValue >= pivotValue2) --great;\n\n      // Copy paste of the previous 3-way partitioning with adaptions.\n      //\n      // We partition the list into three parts:\n      //  1. == pivot1\n      //  2. > pivot1 && < pivot2\n      //  3. == pivot2\n      //\n      // During the loop we have:\n      // [ == pivot1 | > pivot1 && < pivot2 | unpartitioned  | == pivot2 ]\n      //              ^                      ^              ^\n      //            less                     k              great\n      //\n      // Invariants:\n      //   1. for x in [ *, less[ : x == pivot1\n      //   2. for x in [less, k[ : pivot1 < x && x < pivot2\n      //   3. for x in ]great, * ] : x == pivot2\n      for (var k = less; k <= great; k++) {\n        var ek = a[k], xk = f(ek);\n        if (xk <= pivotValue1 && xk >= pivotValue1) {\n          if (k !== less) {\n            a[k] = a[less];\n            a[less] = ek;\n          }\n          less++;\n        } else {\n          if (xk <= pivotValue2 && xk >= pivotValue2) {\n            while (true) {\n              var greatValue = f(a[great]);\n              if (greatValue <= pivotValue2 && greatValue >= pivotValue2) {\n                great--;\n                if (great < k) break;\n                // This is the only location inside the loop where a new\n                // iteration is started.\n                continue;\n              } else {\n                // a[great] < pivot2.\n                if (greatValue < pivotValue1) {\n                  // Triple exchange.\n                  a[k] = a[less];\n                  a[less++] = a[great];\n                  a[great--] = ek;\n                } else {\n                  // a[great] == pivot1.\n                  a[k] = a[great];\n                  a[great--] = ek;\n                }\n                break;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // The second partition has now been cleared of pivot elements and looks\n    // as follows:\n    // [  *  |  > pivot1 && < pivot2  | * ]\n    //        ^                      ^\n    //       less                  great\n    // Sort the second partition using recursive descent.\n\n    // The second partition looks as follows:\n    // [  *  |  >= pivot1 && <= pivot2  | * ]\n    //        ^                        ^\n    //       less                    great\n    // Simply sort it by recursive descent.\n\n    return sort(a, less, great + 1);\n  }\n\n  return sort;\n}\n\nvar quicksort_sizeThreshold = 32;\nvar crossfilter_array8 = crossfilter_arrayUntyped,\n    crossfilter_array16 = crossfilter_arrayUntyped,\n    crossfilter_array32 = crossfilter_arrayUntyped,\n    crossfilter_arrayLengthen = crossfilter_arrayLengthenUntyped,\n    crossfilter_arrayWiden = crossfilter_arrayWidenUntyped;\n\nif (typeof Uint8Array !== \"undefined\") {\n  crossfilter_array8 = function(n) { return new Uint8Array(n); };\n  crossfilter_array16 = function(n) { return new Uint16Array(n); };\n  crossfilter_array32 = function(n) { return new Uint32Array(n); };\n\n  crossfilter_arrayLengthen = function(array, length) {\n    if (array.length >= length) return array;\n    var copy = new array.constructor(length);\n    copy.set(array);\n    return copy;\n  };\n\n  crossfilter_arrayWiden = function(array, width) {\n    var copy;\n    switch (width) {\n      case 16: copy = crossfilter_array16(array.length); break;\n      case 32: copy = crossfilter_array32(array.length); break;\n      default: throw new Error(\"invalid array width!\");\n    }\n    copy.set(array);\n    return copy;\n  };\n}\n\nfunction crossfilter_arrayUntyped(n) {\n  var array = new Array(n), i = -1;\n  while (++i < n) array[i] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayLengthenUntyped(array, length) {\n  var n = array.length;\n  while (n < length) array[n++] = 0;\n  return array;\n}\n\nfunction crossfilter_arrayWidenUntyped(array, width) {\n  if (width > 32) throw new Error(\"invalid array width!\");\n  return array;\n}\nfunction crossfilter_filterExact(bisect, value) {\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, value, 0, n), bisect.right(values, value, 0, n)];\n  };\n}\n\nfunction crossfilter_filterRange(bisect, range) {\n  var min = range[0],\n      max = range[1];\n  return function(values) {\n    var n = values.length;\n    return [bisect.left(values, min, 0, n), bisect.left(values, max, 0, n)];\n  };\n}\n\nfunction crossfilter_filterAll(values) {\n  return [0, values.length];\n}\nfunction crossfilter_null() {\n  return null;\n}\nfunction crossfilter_zero() {\n  return 0;\n}\nfunction crossfilter_reduceIncrement(p) {\n  return p + 1;\n}\n\nfunction crossfilter_reduceDecrement(p) {\n  return p - 1;\n}\n\nfunction crossfilter_reduceAdd(f) {\n  return function(p, v) {\n    return p + +f(v);\n  };\n}\n\nfunction crossfilter_reduceSubtract(f) {\n  return function(p, v) {\n    return p - f(v);\n  };\n}\nexports.crossfilter = crossfilter;\n\nfunction crossfilter() {\n  var crossfilter = {\n    add: add,\n    remove: removeData,\n    dimension: dimension,\n    groupAll: groupAll,\n    size: size\n  };\n\n  var data = [], // the records\n      n = 0, // the number of records; data.length\n      m = 0, // a bit mask representing which dimensions are in use\n      M = 8, // number of dimensions that can fit in `filters`\n      filters = crossfilter_array8(0), // M bits per record; 1 is filtered out\n      filterListeners = [], // when the filters change\n      dataListeners = [], // when data is added\n      removeDataListeners = []; // when data is removed\n\n  // Adds the specified new records to this crossfilter.\n  function add(newData) {\n    var n0 = n,\n        n1 = newData.length;\n\n    // If there's actually new data to add…\n    // Merge the new data into the existing data.\n    // Lengthen the filter bitset to handle the new records.\n    // Notify listeners (dimensions and groups) that new data is available.\n    if (n1) {\n      data = data.concat(newData);\n      filters = crossfilter_arrayLengthen(filters, n += n1);\n      dataListeners.forEach(function(l) { l(newData, n0, n1); });\n    }\n\n    return crossfilter;\n  }\n\n  // Removes all records that match the current filters.\n  function removeData() {\n    var newIndex = crossfilter_index(n, n),\n        removed = [];\n    for (var i = 0, j = 0; i < n; ++i) {\n      if (filters[i]) newIndex[i] = j++;\n      else removed.push(i);\n    }\n\n    // Remove all matching records from groups.\n    filterListeners.forEach(function(l) { l(0, [], removed); });\n\n    // Update indexes.\n    removeDataListeners.forEach(function(l) { l(newIndex); });\n\n    // Remove old filters and data by overwriting.\n    for (var i = 0, j = 0, k; i < n; ++i) {\n      if (k = filters[i]) {\n        if (i !== j) filters[j] = k, data[j] = data[i];\n        ++j;\n      }\n    }\n    data.length = j;\n    while (n > j) filters[--n] = 0;\n  }\n\n  // Adds a new dimension with the specified value accessor function.\n  function dimension(value) {\n    var dimension = {\n      filter: filter,\n      filterExact: filterExact,\n      filterRange: filterRange,\n      filterFunction: filterFunction,\n      filterAll: filterAll,\n      top: top,\n      bottom: bottom,\n      group: group,\n      groupAll: groupAll,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var one = ~m & -~m, // lowest unset bit as mask, e.g., 00001000\n        zero = ~one, // inverted one, e.g., 11110111\n        values, // sorted, cached array\n        index, // value rank ↦ object id\n        newValues, // temporary array storing newly-added values\n        newIndex, // temporary array storing newly-added index\n        sort = quicksort_by(function(i) { return newValues[i]; }),\n        refilter = crossfilter_filterAll, // for recomputing filter\n        refilterFunction, // the custom filter function in use\n        indexListeners = [], // when data is added\n        dimensionGroups = [],\n        lo0 = 0,\n        hi0 = 0;\n\n    // Updating a dimension is a two-stage process. First, we must update the\n    // associated filters for the newly-added records. Once all dimensions have\n    // updated their filters, the groups are notified to update.\n    dataListeners.unshift(preAdd);\n    dataListeners.push(postAdd);\n\n    removeDataListeners.push(removeData);\n\n    // Incorporate any existing data into this dimension, and make sure that the\n    // filter bitset is wide enough to handle the new dimension.\n    m |= one;\n    if (M >= 32 ? !one : m & -(1 << M)) {\n      filters = crossfilter_arrayWiden(filters, M <<= 1);\n    }\n    preAdd(data, 0, n);\n    postAdd(data, 0, n);\n\n    // Incorporates the specified new records into this dimension.\n    // This function is responsible for updating filters, values, and index.\n    function preAdd(newData, n0, n1) {\n\n      // Permute new values into natural order using a sorted index.\n      newValues = newData.map(value);\n      newIndex = sort(crossfilter_range(n1), 0, n1);\n      newValues = permute(newValues, newIndex);\n\n      // Bisect newValues to determine which new records are selected.\n      var bounds = refilter(newValues), lo1 = bounds[0], hi1 = bounds[1], i;\n      if (refilterFunction) {\n        for (i = 0; i < n1; ++i) {\n          if (!refilterFunction(newValues[i], i)) filters[newIndex[i] + n0] |= one;\n        }\n      } else {\n        for (i = 0; i < lo1; ++i) filters[newIndex[i] + n0] |= one;\n        for (i = hi1; i < n1; ++i) filters[newIndex[i] + n0] |= one;\n      }\n\n      // If this dimension previously had no data, then we don't need to do the\n      // more expensive merge operation; use the new values and index as-is.\n      if (!n0) {\n        values = newValues;\n        index = newIndex;\n        lo0 = lo1;\n        hi0 = hi1;\n        return;\n      }\n\n      var oldValues = values,\n          oldIndex = index,\n          i0 = 0,\n          i1 = 0;\n\n      // Otherwise, create new arrays into which to merge new and old.\n      values = new Array(n);\n      index = crossfilter_index(n, n);\n\n      // Merge the old and new sorted values, and old and new index.\n      for (i = 0; i0 < n0 && i1 < n1; ++i) {\n        if (oldValues[i0] < newValues[i1]) {\n          values[i] = oldValues[i0];\n          index[i] = oldIndex[i0++];\n        } else {\n          values[i] = newValues[i1];\n          index[i] = newIndex[i1++] + n0;\n        }\n      }\n\n      // Add any remaining old values.\n      for (; i0 < n0; ++i0, ++i) {\n        values[i] = oldValues[i0];\n        index[i] = oldIndex[i0];\n      }\n\n      // Add any remaining new values.\n      for (; i1 < n1; ++i1, ++i) {\n        values[i] = newValues[i1];\n        index[i] = newIndex[i1] + n0;\n      }\n\n      // Bisect again to recompute lo0 and hi0.\n      bounds = refilter(values), lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // When all filters have updated, notify index listeners of the new values.\n    function postAdd(newData, n0, n1) {\n      indexListeners.forEach(function(l) { l(newValues, newIndex, n0, n1); });\n      newValues = newIndex = null;\n    }\n\n    function removeData(reIndex) {\n      for (var i = 0, j = 0, k; i < n; ++i) {\n        if (filters[k = index[i]]) {\n          if (i !== j) values[j] = values[i];\n          index[j] = reIndex[k];\n          ++j;\n        }\n      }\n      values.length = j;\n      while (j < n) index[j++] = 0;\n\n      // Bisect again to recompute lo0 and hi0.\n      var bounds = refilter(values);\n      lo0 = bounds[0], hi0 = bounds[1];\n    }\n\n    // Updates the selected values based on the specified bounds [lo, hi].\n    // This implementation is used by all the public filter methods.\n    function filterIndexBounds(bounds) {\n      var lo1 = bounds[0],\n          hi1 = bounds[1];\n\n      if (refilterFunction) {\n        refilterFunction = null;\n        filterIndexFunction(function(d, i) { return lo1 <= i && i < hi1; });\n        lo0 = lo1;\n        hi0 = hi1;\n        return dimension;\n      }\n\n      var i,\n          j,\n          k,\n          added = [],\n          removed = [];\n\n      // Fast incremental update based on previous lo index.\n      if (lo1 < lo0) {\n        for (i = lo1, j = Math.min(lo0, hi1); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (lo1 > lo0) {\n        for (i = lo0, j = Math.min(lo1, hi0); i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      // Fast incremental update based on previous hi index.\n      if (hi1 > hi0) {\n        for (i = Math.max(lo1, hi0), j = hi1; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          added.push(k);\n        }\n      } else if (hi1 < hi0) {\n        for (i = Math.max(lo0, hi1), j = hi0; i < j; ++i) {\n          filters[k = index[i]] ^= one;\n          removed.push(k);\n        }\n      }\n\n      lo0 = lo1;\n      hi0 = hi1;\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n      return dimension;\n    }\n\n    // Filters this dimension using the specified range, value, or null.\n    // If the range is null, this is equivalent to filterAll.\n    // If the range is an array, this is equivalent to filterRange.\n    // Otherwise, this is equivalent to filterExact.\n    function filter(range) {\n      return range == null\n          ? filterAll() : Array.isArray(range)\n          ? filterRange(range) : typeof range === \"function\"\n          ? filterFunction(range)\n          : filterExact(range);\n    }\n\n    // Filters this dimension to select the exact value.\n    function filterExact(value) {\n      return filterIndexBounds((refilter = crossfilter_filterExact(bisect, value))(values));\n    }\n\n    // Filters this dimension to select the specified range [lo, hi].\n    // The lower bound is inclusive, and the upper bound is exclusive.\n    function filterRange(range) {\n      return filterIndexBounds((refilter = crossfilter_filterRange(bisect, range))(values));\n    }\n\n    // Clears any filters on this dimension.\n    function filterAll() {\n      return filterIndexBounds((refilter = crossfilter_filterAll)(values));\n    }\n\n    // Filters this dimension using an arbitrary function.\n    function filterFunction(f) {\n      refilter = crossfilter_filterAll;\n\n      filterIndexFunction(refilterFunction = f);\n\n      lo0 = 0;\n      hi0 = n;\n\n      return dimension;\n    }\n\n    function filterIndexFunction(f) {\n      var i,\n          k,\n          x,\n          added = [],\n          removed = [];\n\n      for (i = 0; i < n; ++i) {\n        if (!(filters[k = index[i]] & one) ^ !!(x = f(values[i], i))) {\n          if (x) filters[k] &= zero, added.push(k);\n          else filters[k] |= one, removed.push(k);\n        }\n      }\n      filterListeners.forEach(function(l) { l(one, added, removed); });\n    }\n\n    // Returns the top K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function top(k) {\n      var array = [],\n          i = hi0,\n          j;\n\n      while (--i >= lo0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n      }\n\n      return array;\n    }\n\n    // Returns the bottom K selected records based on this dimension's order.\n    // Note: observes this dimension's filter, unlike group and groupAll.\n    function bottom(k) {\n      var array = [],\n          i = lo0,\n          j;\n\n      while (i < hi0 && k > 0) {\n        if (!filters[j = index[i]]) {\n          array.push(data[j]);\n          --k;\n        }\n        i++;\n      }\n\n      return array;\n    }\n\n    // Adds a new group to this dimension, using the specified key function.\n    function group(key) {\n      var group = {\n        top: top,\n        all: all,\n        reduce: reduce,\n        reduceCount: reduceCount,\n        reduceSum: reduceSum,\n        order: order,\n        orderNatural: orderNatural,\n        size: size,\n        dispose: dispose,\n        remove: dispose // for backwards-compatibility\n      };\n\n      // Ensure that this group will be removed when the dimension is removed.\n      dimensionGroups.push(group);\n\n      var groups, // array of {key, value}\n          groupIndex, // object id ↦ group id\n          groupWidth = 8,\n          groupCapacity = crossfilter_capacity(groupWidth),\n          k = 0, // cardinality\n          select,\n          heap,\n          reduceAdd,\n          reduceRemove,\n          reduceInitial,\n          update = crossfilter_null,\n          reset = crossfilter_null,\n          resetNeeded = true,\n          groupAll = key === crossfilter_null;\n\n      if (arguments.length < 1) key = crossfilter_identity;\n\n      // The group listens to the crossfilter for when any dimension changes, so\n      // that it can update the associated reduce values. It must also listen to\n      // the parent dimension for when data is added, and compute new keys.\n      filterListeners.push(update);\n      indexListeners.push(add);\n      removeDataListeners.push(removeData);\n\n      // Incorporate any existing data into the grouping.\n      add(values, index, 0, n);\n\n      // Incorporates the specified new values into this group.\n      // This function is responsible for updating groups and groupIndex.\n      function add(newValues, newIndex, n0, n1) {\n        var oldGroups = groups,\n            reIndex = crossfilter_index(k, groupCapacity),\n            add = reduceAdd,\n            initial = reduceInitial,\n            k0 = k, // old cardinality\n            i0 = 0, // index of old group\n            i1 = 0, // index of new record\n            j, // object id\n            g0, // old group\n            x0, // old key\n            x1, // new key\n            g, // group to add\n            x; // key of group to add\n\n        // If a reset is needed, we don't need to update the reduce values.\n        if (resetNeeded) add = initial = crossfilter_null;\n\n        // Reset the new groups (k is a lower bound).\n        // Also, make sure that groupIndex exists and is long enough.\n        groups = new Array(k), k = 0;\n        groupIndex = k0 > 1 ? crossfilter_arrayLengthen(groupIndex, n) : crossfilter_index(n, groupCapacity);\n\n        // Get the first old key (x0 of g0), if it exists.\n        if (k0) x0 = (g0 = oldGroups[0]).key;\n\n        // Find the first new key (x1), skipping NaN keys.\n        while (i1 < n1 && !((x1 = key(newValues[i1])) >= x1)) ++i1;\n\n        // While new keys remain…\n        while (i1 < n1) {\n\n          // Determine the lesser of the two current keys; new and old.\n          // If there are no old keys remaining, then always add the new key.\n          if (g0 && x0 <= x1) {\n            g = g0, x = x0;\n\n            // Record the new index of the old group.\n            reIndex[i0] = k;\n\n            // Retrieve the next old key.\n            if (g0 = oldGroups[++i0]) x0 = g0.key;\n          } else {\n            g = {key: x1, value: initial()}, x = x1;\n          }\n\n          // Add the lesser group.\n          groups[k] = g;\n\n          // Add any selected records belonging to the added group, while\n          // advancing the new key and populating the associated group index.\n          while (!(x1 > x)) {\n            groupIndex[j = newIndex[i1] + n0] = k;\n            if (!(filters[j] & zero)) g.value = add(g.value, data[j]);\n            if (++i1 >= n1) break;\n            x1 = key(newValues[i1]);\n          }\n\n          groupIncrement();\n        }\n\n        // Add any remaining old groups that were greater than all new keys.\n        // No incremental reduce is needed; these groups have no new records.\n        // Also record the new index of the old group.\n        while (i0 < k0) {\n          groups[reIndex[i0] = k] = oldGroups[i0++];\n          groupIncrement();\n        }\n\n        // If we added any new groups before any old groups,\n        // update the group index of all the old records.\n        if (k > i0) for (i0 = 0; i0 < n0; ++i0) {\n          groupIndex[i0] = reIndex[groupIndex[i0]];\n        }\n\n        // Modify the update and reset behavior based on the cardinality.\n        // If the cardinality is less than or equal to one, then the groupIndex\n        // is not needed. If the cardinality is zero, then there are no records\n        // and therefore no groups to update or reset. Note that we also must\n        // change the registered listener to point to the new method.\n        j = filterListeners.indexOf(update);\n        if (k > 1) {\n          update = updateMany;\n          reset = resetMany;\n        } else {\n          if (!k && groupAll) {\n            k = 1;\n            groups = [{key: null, value: initial()}];\n          }\n          if (k === 1) {\n            update = updateOne;\n            reset = resetOne;\n          } else {\n            update = crossfilter_null;\n            reset = crossfilter_null;\n          }\n          groupIndex = null;\n        }\n        filterListeners[j] = update;\n\n        // Count the number of added groups,\n        // and widen the group index as needed.\n        function groupIncrement() {\n          if (++k === groupCapacity) {\n            reIndex = crossfilter_arrayWiden(reIndex, groupWidth <<= 1);\n            groupIndex = crossfilter_arrayWiden(groupIndex, groupWidth);\n            groupCapacity = crossfilter_capacity(groupWidth);\n          }\n        }\n      }\n\n      function removeData() {\n        if (k > 1) {\n          var oldK = k,\n              oldGroups = groups,\n              seenGroups = crossfilter_index(oldK, oldK);\n\n          // Filter out non-matches by copying matching group index entries to\n          // the beginning of the array.\n          for (var i = 0, j = 0; i < n; ++i) {\n            if (filters[i]) {\n              seenGroups[groupIndex[j] = groupIndex[i]] = 1;\n              ++j;\n            }\n          }\n\n          // Reassemble groups including only those groups that were referred\n          // to by matching group index entries.  Note the new group index in\n          // seenGroups.\n          groups = [], k = 0;\n          for (i = 0; i < oldK; ++i) {\n            if (seenGroups[i]) {\n              seenGroups[i] = k++;\n              groups.push(oldGroups[i]);\n            }\n          }\n\n          if (k > 1) {\n            // Reindex the group index using seenGroups to find the new index.\n            for (var i = 0; i < j; ++i) groupIndex[i] = seenGroups[groupIndex[i]];\n          } else {\n            groupIndex = null;\n          }\n          filterListeners[filterListeners.indexOf(update)] = k > 1\n              ? (reset = resetMany, update = updateMany)\n              : k === 1 ? (reset = resetOne, update = updateOne)\n              : reset = update = crossfilter_null;\n        } else if (k === 1) {\n          if (groupAll) return;\n          for (var i = 0; i < n; ++i) if (filters[i]) return;\n          groups = [], k = 0;\n          filterListeners[filterListeners.indexOf(update)] =\n          update = reset = crossfilter_null;\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is greater than 1.\n      function updateMany(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g;\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g = groups[groupIndex[k]];\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g = groups[groupIndex[k]];\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Reduces the specified selected or deselected records.\n      // This function is only used when the cardinality is 1.\n      function updateOne(filterOne, added, removed) {\n        if (filterOne === one || resetNeeded) return;\n\n        var i,\n            k,\n            n,\n            g = groups[0];\n\n        // Add the added values.\n        for (i = 0, n = added.length; i < n; ++i) {\n          if (!(filters[k = added[i]] & zero)) {\n            g.value = reduceAdd(g.value, data[k]);\n          }\n        }\n\n        // Remove the removed values.\n        for (i = 0, n = removed.length; i < n; ++i) {\n          if ((filters[k = removed[i]] & zero) === filterOne) {\n            g.value = reduceRemove(g.value, data[k]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is greater than 1.\n      function resetMany() {\n        var i,\n            g;\n\n        // Reset all group values.\n        for (i = 0; i < k; ++i) {\n          groups[i].value = reduceInitial();\n        }\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g = groups[groupIndex[i]];\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Recomputes the group reduce values from scratch.\n      // This function is only used when the cardinality is 1.\n      function resetOne() {\n        var i,\n            g = groups[0];\n\n        // Reset the singleton group values.\n        g.value = reduceInitial();\n\n        // Add any selected records.\n        for (i = 0; i < n; ++i) {\n          if (!(filters[i] & zero)) {\n            g.value = reduceAdd(g.value, data[i]);\n          }\n        }\n      }\n\n      // Returns the array of group values, in the dimension's natural order.\n      function all() {\n        if (resetNeeded) reset(), resetNeeded = false;\n        return groups;\n      }\n\n      // Returns a new array containing the top K group values, in reduce order.\n      function top(k) {\n        var top = select(all(), 0, groups.length, k);\n        return heap.sort(top, 0, top.length);\n      }\n\n      // Sets the reduce behavior for this group to use the specified functions.\n      // This method lazily recomputes the reduce values, waiting until needed.\n      function reduce(add, remove, initial) {\n        reduceAdd = add;\n        reduceRemove = remove;\n        reduceInitial = initial;\n        resetNeeded = true;\n        return group;\n      }\n\n      // A convenience method for reducing by count.\n      function reduceCount() {\n        return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n      }\n\n      // A convenience method for reducing by sum(value).\n      function reduceSum(value) {\n        return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n      }\n\n      // Sets the reduce order, using the specified accessor.\n      function order(value) {\n        select = heapselect_by(valueOf);\n        heap = heap_by(valueOf);\n        function valueOf(d) { return value(d.value); }\n        return group;\n      }\n\n      // A convenience method for natural ordering by reduce value.\n      function orderNatural() {\n        return order(crossfilter_identity);\n      }\n\n      // Returns the cardinality of this group, irrespective of any filters.\n      function size() {\n        return k;\n      }\n\n      // Removes this group and associated event listeners.\n      function dispose() {\n        var i = filterListeners.indexOf(update);\n        if (i >= 0) filterListeners.splice(i, 1);\n        i = indexListeners.indexOf(add);\n        if (i >= 0) indexListeners.splice(i, 1);\n        i = removeDataListeners.indexOf(removeData);\n        if (i >= 0) removeDataListeners.splice(i, 1);\n        return group;\n      }\n\n      return reduceCount().orderNatural();\n    }\n\n    // A convenience function for generating a singleton group.\n    function groupAll() {\n      var g = group(crossfilter_null), all = g.all;\n      delete g.all;\n      delete g.top;\n      delete g.order;\n      delete g.orderNatural;\n      delete g.size;\n      g.value = function() { return all()[0].value; };\n      return g;\n    }\n\n    // Removes this dimension and associated groups and event listeners.\n    function dispose() {\n      dimensionGroups.forEach(function(group) { group.dispose(); });\n      var i = dataListeners.indexOf(preAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = dataListeners.indexOf(postAdd);\n      if (i >= 0) dataListeners.splice(i, 1);\n      i = removeDataListeners.indexOf(removeData);\n      if (i >= 0) removeDataListeners.splice(i, 1);\n      m &= zero;\n      return filterAll();\n    }\n\n    return dimension;\n  }\n\n  // A convenience method for groupAll on a dummy dimension.\n  // This implementation can be optimized since it always has cardinality 1.\n  function groupAll() {\n    var group = {\n      reduce: reduce,\n      reduceCount: reduceCount,\n      reduceSum: reduceSum,\n      value: value,\n      dispose: dispose,\n      remove: dispose // for backwards-compatibility\n    };\n\n    var reduceValue,\n        reduceAdd,\n        reduceRemove,\n        reduceInitial,\n        resetNeeded = true;\n\n    // The group listens to the crossfilter for when any dimension changes, so\n    // that it can update the reduce value. It must also listen to the parent\n    // dimension for when data is added.\n    filterListeners.push(update);\n    dataListeners.push(add);\n\n    // For consistency; actually a no-op since resetNeeded is true.\n    add(data, 0, n);\n\n    // Incorporates the specified new values into this group.\n    function add(newData, n0) {\n      var i;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = n0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Reduces the specified selected or deselected records.\n    function update(filterOne, added, removed) {\n      var i,\n          k,\n          n;\n\n      if (resetNeeded) return;\n\n      // Add the added values.\n      for (i = 0, n = added.length; i < n; ++i) {\n        if (!filters[k = added[i]]) {\n          reduceValue = reduceAdd(reduceValue, data[k]);\n        }\n      }\n\n      // Remove the removed values.\n      for (i = 0, n = removed.length; i < n; ++i) {\n        if (filters[k = removed[i]] === filterOne) {\n          reduceValue = reduceRemove(reduceValue, data[k]);\n        }\n      }\n    }\n\n    // Recomputes the group reduce value from scratch.\n    function reset() {\n      var i;\n\n      reduceValue = reduceInitial();\n\n      for (i = 0; i < n; ++i) {\n        if (!filters[i]) {\n          reduceValue = reduceAdd(reduceValue, data[i]);\n        }\n      }\n    }\n\n    // Sets the reduce behavior for this group to use the specified functions.\n    // This method lazily recomputes the reduce value, waiting until needed.\n    function reduce(add, remove, initial) {\n      reduceAdd = add;\n      reduceRemove = remove;\n      reduceInitial = initial;\n      resetNeeded = true;\n      return group;\n    }\n\n    // A convenience method for reducing by count.\n    function reduceCount() {\n      return reduce(crossfilter_reduceIncrement, crossfilter_reduceDecrement, crossfilter_zero);\n    }\n\n    // A convenience method for reducing by sum(value).\n    function reduceSum(value) {\n      return reduce(crossfilter_reduceAdd(value), crossfilter_reduceSubtract(value), crossfilter_zero);\n    }\n\n    // Returns the computed reduce value.\n    function value() {\n      if (resetNeeded) reset(), resetNeeded = false;\n      return reduceValue;\n    }\n\n    // Removes this group and associated event listeners.\n    function dispose() {\n      var i = filterListeners.indexOf(update);\n      if (i >= 0) filterListeners.splice(i);\n      i = dataListeners.indexOf(add);\n      if (i >= 0) dataListeners.splice(i);\n      return group;\n    }\n\n    return reduceCount();\n  }\n\n  // Returns the number of records in this crossfilter, irrespective of any filters.\n  function size() {\n    return n;\n  }\n\n  return arguments.length\n      ? add(arguments[0])\n      : crossfilter;\n}\n\n// Returns an array of size n, big enough to store ids up to m.\nfunction crossfilter_index(n, m) {\n  return (m < 0x101\n      ? crossfilter_array8 : m < 0x10001\n      ? crossfilter_array16\n      : crossfilter_array32)(n);\n}\n\n// Constructs a new array of size n, with sequential values from 0 to n - 1.\nfunction crossfilter_range(n) {\n  var range = crossfilter_index(n, n);\n  for (var i = -1; ++i < n;) range[i] = i;\n  return range;\n}\n\nfunction crossfilter_capacity(w) {\n  return w === 8\n      ? 0x100 : w === 16\n      ? 0x10000\n      : 0x100000000;\n}\n})(typeof exports !== 'undefined' && exports || this);\n",
    "module.exports = require(\"./crossfilter\").crossfilter;\n",
    "(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.topojson = {})));\n}(this, function (exports) { 'use strict';\n\n  function noop() {}\n\n  function absolute(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      point[0] = (x0 += point[0]) * kx + dx;\n      point[1] = (y0 += point[1]) * ky + dy;\n    };\n  }\n\n  function relative(transform) {\n    if (!transform) return noop;\n    var x0,\n        y0,\n        kx = transform.scale[0],\n        ky = transform.scale[1],\n        dx = transform.translate[0],\n        dy = transform.translate[1];\n    return function(point, i) {\n      if (!i) x0 = y0 = 0;\n      var x1 = (point[0] - dx) / kx | 0,\n          y1 = (point[1] - dy) / ky | 0;\n      point[0] = x1 - x0;\n      point[1] = y1 - y0;\n      x0 = x1;\n      y0 = y1;\n    };\n  }\n\n  function reverse(array, n) {\n    var t, j = array.length, i = j - n;\n    while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n  }\n\n  function bisect(a, x) {\n    var lo = 0, hi = a.length;\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (a[mid] < x) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function feature(topology, o) {\n    return o.type === \"GeometryCollection\" ? {\n      type: \"FeatureCollection\",\n      features: o.geometries.map(function(o) { return feature$1(topology, o); })\n    } : feature$1(topology, o);\n  }\n\n  function feature$1(topology, o) {\n    var f = {\n      type: \"Feature\",\n      id: o.id,\n      properties: o.properties || {},\n      geometry: object(topology, o)\n    };\n    if (o.id == null) delete f.id;\n    return f;\n  }\n\n  function object(topology, o) {\n    var absolute$$ = absolute(topology.transform),\n        arcs = topology.arcs;\n\n    function arc(i, points) {\n      if (points.length) points.pop();\n      for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length, p; k < n; ++k) {\n        points.push(p = a[k].slice());\n        absolute$$(p, k);\n      }\n      if (i < 0) reverse(points, n);\n    }\n\n    function point(p) {\n      p = p.slice();\n      absolute$$(p, 0);\n      return p;\n    }\n\n    function line(arcs) {\n      var points = [];\n      for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n      if (points.length < 2) points.push(points[0].slice());\n      return points;\n    }\n\n    function ring(arcs) {\n      var points = line(arcs);\n      while (points.length < 4) points.push(points[0].slice());\n      return points;\n    }\n\n    function polygon(arcs) {\n      return arcs.map(ring);\n    }\n\n    function geometry(o) {\n      var t = o.type;\n      return t === \"GeometryCollection\" ? {type: t, geometries: o.geometries.map(geometry)}\n          : t in geometryType ? {type: t, coordinates: geometryType[t](o)}\n          : null;\n    }\n\n    var geometryType = {\n      Point: function(o) { return point(o.coordinates); },\n      MultiPoint: function(o) { return o.coordinates.map(point); },\n      LineString: function(o) { return line(o.arcs); },\n      MultiLineString: function(o) { return o.arcs.map(line); },\n      Polygon: function(o) { return polygon(o.arcs); },\n      MultiPolygon: function(o) { return o.arcs.map(polygon); }\n    };\n\n    return geometry(o);\n  }\n\n  function stitchArcs(topology, arcs) {\n    var stitchedArcs = {},\n        fragmentByStart = {},\n        fragmentByEnd = {},\n        fragments = [],\n        emptyIndex = -1;\n\n    // Stitch empty arcs first, since they may be subsumed by other arcs.\n    arcs.forEach(function(i, j) {\n      var arc = topology.arcs[i < 0 ? ~i : i], t;\n      if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n        t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n      }\n    });\n\n    arcs.forEach(function(i) {\n      var e = ends(i),\n          start = e[0],\n          end = e[1],\n          f, g;\n\n      if (f = fragmentByEnd[start]) {\n        delete fragmentByEnd[f.end];\n        f.push(i);\n        f.end = end;\n        if (g = fragmentByStart[end]) {\n          delete fragmentByStart[g.start];\n          var fg = g === f ? f : f.concat(g);\n          fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else if (f = fragmentByStart[end]) {\n        delete fragmentByStart[f.start];\n        f.unshift(i);\n        f.start = start;\n        if (g = fragmentByEnd[start]) {\n          delete fragmentByEnd[g.end];\n          var gf = g === f ? f : g.concat(f);\n          fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n        } else {\n          fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        }\n      } else {\n        f = [i];\n        fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n      }\n    });\n\n    function ends(i) {\n      var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n      if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n      else p1 = arc[arc.length - 1];\n      return i < 0 ? [p1, p0] : [p0, p1];\n    }\n\n    function flush(fragmentByEnd, fragmentByStart) {\n      for (var k in fragmentByEnd) {\n        var f = fragmentByEnd[k];\n        delete fragmentByStart[f.start];\n        delete f.start;\n        delete f.end;\n        f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n        fragments.push(f);\n      }\n    }\n\n    flush(fragmentByEnd, fragmentByStart);\n    flush(fragmentByStart, fragmentByEnd);\n    arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n    return fragments;\n  }\n\n  function mesh(topology) {\n    return object(topology, meshArcs.apply(this, arguments));\n  }\n\n  function meshArcs(topology, o, filter) {\n    var arcs = [];\n\n    function arc(i) {\n      var j = i < 0 ? ~i : i;\n      (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n    }\n\n    function line(arcs) {\n      arcs.forEach(arc);\n    }\n\n    function polygon(arcs) {\n      arcs.forEach(line);\n    }\n\n    function geometry(o) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(geometry);\n      else if (o.type in geometryType) geom = o, geometryType[o.type](o.arcs);\n    }\n\n    if (arguments.length > 1) {\n      var geomsByArc = [],\n          geom;\n\n      var geometryType = {\n        LineString: line,\n        MultiLineString: polygon,\n        Polygon: polygon,\n        MultiPolygon: function(arcs) { arcs.forEach(polygon); }\n      };\n\n      geometry(o);\n\n      geomsByArc.forEach(arguments.length < 3\n          ? function(geoms) { arcs.push(geoms[0].i); }\n          : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n    } else {\n      for (var i = 0, n = topology.arcs.length; i < n; ++i) arcs.push(i);\n    }\n\n    return {type: \"MultiLineString\", arcs: stitchArcs(topology, arcs)};\n  }\n\n  function triangle(triangle) {\n    var a = triangle[0], b = triangle[1], c = triangle[2];\n    return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]));\n  }\n\n  function ring(ring) {\n    var i = -1,\n        n = ring.length,\n        a,\n        b = ring[n - 1],\n        area = 0;\n\n    while (++i < n) {\n      a = b;\n      b = ring[i];\n      area += a[0] * b[1] - a[1] * b[0];\n    }\n\n    return area / 2;\n  }\n\n  function merge(topology) {\n    return object(topology, mergeArcs.apply(this, arguments));\n  }\n\n  function mergeArcs(topology, objects) {\n    var polygonsByArc = {},\n        polygons = [],\n        components = [];\n\n    objects.forEach(function(o) {\n      if (o.type === \"Polygon\") register(o.arcs);\n      else if (o.type === \"MultiPolygon\") o.arcs.forEach(register);\n    });\n\n    function register(polygon) {\n      polygon.forEach(function(ring$$) {\n        ring$$.forEach(function(arc) {\n          (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n        });\n      });\n      polygons.push(polygon);\n    }\n\n    function exterior(ring$$) {\n      return ring(object(topology, {type: \"Polygon\", arcs: [ring$$]}).coordinates[0]) > 0; // TODO allow spherical?\n    }\n\n    polygons.forEach(function(polygon) {\n      if (!polygon._) {\n        var component = [],\n            neighbors = [polygon];\n        polygon._ = 1;\n        components.push(component);\n        while (polygon = neighbors.pop()) {\n          component.push(polygon);\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n                if (!polygon._) {\n                  polygon._ = 1;\n                  neighbors.push(polygon);\n                }\n              });\n            });\n          });\n        }\n      }\n    });\n\n    polygons.forEach(function(polygon) {\n      delete polygon._;\n    });\n\n    return {\n      type: \"MultiPolygon\",\n      arcs: components.map(function(polygons) {\n        var arcs = [], n;\n\n        // Extract the exterior (unique) arcs.\n        polygons.forEach(function(polygon) {\n          polygon.forEach(function(ring$$) {\n            ring$$.forEach(function(arc) {\n              if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n                arcs.push(arc);\n              }\n            });\n          });\n        });\n\n        // Stitch the arcs into one or more rings.\n        arcs = stitchArcs(topology, arcs);\n\n        // If more than one ring is returned,\n        // at most one of these rings can be the exterior;\n        // this exterior ring has the same winding order\n        // as any exterior ring in the original polygons.\n        if ((n = arcs.length) > 1) {\n          var sgn = exterior(polygons[0][0]);\n          for (var i = 0, t; i < n; ++i) {\n            if (sgn === exterior(arcs[i])) {\n              t = arcs[0], arcs[0] = arcs[i], arcs[i] = t;\n              break;\n            }\n          }\n        }\n\n        return arcs;\n      })\n    };\n  }\n\n  function neighbors(objects) {\n    var indexesByArc = {}, // arc index -> array of object indexes\n        neighbors = objects.map(function() { return []; });\n\n    function line(arcs, i) {\n      arcs.forEach(function(a) {\n        if (a < 0) a = ~a;\n        var o = indexesByArc[a];\n        if (o) o.push(i);\n        else indexesByArc[a] = [i];\n      });\n    }\n\n    function polygon(arcs, i) {\n      arcs.forEach(function(arc) { line(arc, i); });\n    }\n\n    function geometry(o, i) {\n      if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n      else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n    }\n\n    var geometryType = {\n      LineString: line,\n      MultiLineString: polygon,\n      Polygon: polygon,\n      MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n    };\n\n    objects.forEach(geometry);\n\n    for (var i in indexesByArc) {\n      for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n        for (var k = j + 1; k < m; ++k) {\n          var ij = indexes[j], ik = indexes[k], n;\n          if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n          if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n        }\n      }\n    }\n\n    return neighbors;\n  }\n\n  function compareArea(a, b) {\n    return a[1][2] - b[1][2];\n  }\n\n  function minAreaHeap() {\n    var heap = {},\n        array = [],\n        size = 0;\n\n    heap.push = function(object) {\n      up(array[object._ = size] = object, size++);\n      return size;\n    };\n\n    heap.pop = function() {\n      if (size <= 0) return;\n      var removed = array[0], object;\n      if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n      return removed;\n    };\n\n    heap.remove = function(removed) {\n      var i = removed._, object;\n      if (array[i] !== removed) return; // invalid request\n      if (i !== --size) object = array[size], (compareArea(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n      return i;\n    };\n\n    function up(object, i) {\n      while (i > 0) {\n        var j = ((i + 1) >> 1) - 1,\n            parent = array[j];\n        if (compareArea(object, parent) >= 0) break;\n        array[parent._ = i] = parent;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    function down(object, i) {\n      while (true) {\n        var r = (i + 1) << 1,\n            l = r - 1,\n            j = i,\n            child = array[j];\n        if (l < size && compareArea(array[l], child) < 0) child = array[j = l];\n        if (r < size && compareArea(array[r], child) < 0) child = array[j = r];\n        if (j === i) break;\n        array[child._ = i] = child;\n        array[object._ = i = j] = object;\n      }\n    }\n\n    return heap;\n  }\n\n  function presimplify(topology, triangleArea) {\n    var absolute$$ = absolute(topology.transform),\n        relative$$ = relative(topology.transform),\n        heap = minAreaHeap();\n\n    if (!triangleArea) triangleArea = triangle;\n\n    topology.arcs.forEach(function(arc) {\n      var triangles = [],\n          maxArea = 0,\n          triangle,\n          i,\n          n,\n          p;\n\n      // To store each point’s effective area, we create a new array rather than\n      // extending the passed-in point to workaround a Chrome/V8 bug (getting\n      // stuck in smi mode). For midpoints, the initial effective area of\n      // Infinity will be computed in the next step.\n      for (i = 0, n = arc.length; i < n; ++i) {\n        p = arc[i];\n        absolute$$(arc[i] = [p[0], p[1], Infinity], i);\n      }\n\n      for (i = 1, n = arc.length - 1; i < n; ++i) {\n        triangle = arc.slice(i - 1, i + 2);\n        triangle[1][2] = triangleArea(triangle);\n        triangles.push(triangle);\n        heap.push(triangle);\n      }\n\n      for (i = 0, n = triangles.length; i < n; ++i) {\n        triangle = triangles[i];\n        triangle.previous = triangles[i - 1];\n        triangle.next = triangles[i + 1];\n      }\n\n      while (triangle = heap.pop()) {\n        var previous = triangle.previous,\n            next = triangle.next;\n\n        // If the area of the current point is less than that of the previous point\n        // to be eliminated, use the latter's area instead. This ensures that the\n        // current point cannot be eliminated without eliminating previously-\n        // eliminated points.\n        if (triangle[1][2] < maxArea) triangle[1][2] = maxArea;\n        else maxArea = triangle[1][2];\n\n        if (previous) {\n          previous.next = next;\n          previous[2] = triangle[2];\n          update(previous);\n        }\n\n        if (next) {\n          next.previous = previous;\n          next[0] = triangle[0];\n          update(next);\n        }\n      }\n\n      arc.forEach(relative$$);\n    });\n\n    function update(triangle) {\n      heap.remove(triangle);\n      triangle[1][2] = triangleArea(triangle);\n      heap.push(triangle);\n    }\n\n    return topology;\n  }\n\n  var version = \"1.6.24\";\n\n  exports.version = version;\n  exports.mesh = mesh;\n  exports.meshArcs = meshArcs;\n  exports.merge = merge;\n  exports.mergeArcs = mergeArcs;\n  exports.feature = feature;\n  exports.neighbors = neighbors;\n  exports.presimplify = presimplify;\n\n}));",
    "var Event = {}\nEvent.on = function (evt, callback) {\n  var cb = this._evt_callbacks = this._evt_callbacks || {}\n  var l = cb[evt] || (cb[evt] = [])\n  l.push(callback)\n  return this\n}\n\nEvent.trigger = function (evt) {\n  var c = this._evt_callbacks && this._evt_callbacks[evt]\n  for (var i = 0; c && i < c.length; ++i) {\n    c[i].apply(this, Array.prototype.slice.call(arguments, 1))\n  }\n  return this\n}\n\nEvent.fire = Event.trigger\n\nEvent.off = function (evt, callback) {\n  var c = this._evt_callbacks && this._evt_callbacks[evt]\n  if (c && !callback) {\n    delete this._evt_callbacks[evt]\n    return this\n  }\n  var remove = []\n  for (var i = 0; c && i < c.length; ++i) {\n    if (c[i] === callback) remove.push(i)\n  }\n  while ((i = remove.pop()) !== undefined) c.splice(i, 1)\n  return this\n}\n\nEvent.callbacks = function (evt) {\n  return (this._evt_callbacks && this._evt_callbacks[evt]) || []\n}\n\nfunction extend () {\n  var objs = arguments\n  var a = objs[0]\n  for (var i = 1; i < objs.length; ++i) {\n    var b = objs[i]\n    for (var k in b) {\n      a[k] = b[k]\n    }\n  }\n  return a\n}\n\nfunction clone (a) {\n  return extend({}, a)\n}\n\nfunction isFunction (f) {\n  return typeof f === 'function' || false\n}\n\nfunction isArray (value) {\n  return value && typeof value === 'object' && Object.prototype.toString.call(value) === '[object Array]'\n}\n\n// types\nvar types = {\n  Uint8Array: typeof (global['Uint8Array']) !== 'undefined' ? global.Uint8Array : Array,\n  Uint8ClampedArray: typeof (global['Uint8ClampedArray']) !== 'undefined' ? global.Uint8ClampedArray : Array,\n  Uint32Array: typeof (global['Uint32Array']) !== 'undefined' ? global.Uint32Array : Array,\n  Int16Array: typeof (global['Int16Array']) !== 'undefined' ? global.Int16Array : Array,\n  Int32Array: typeof (global['Int32Array']) !== 'undefined' ? global.Int32Array : Array\n}\n\nfunction isBrowserSupported () {\n  return !!document.createElement('canvas')\n}\n\nfunction userAgent () {\n  return typeof navigator !== 'undefined' ? navigator.userAgent : ''\n}\n\nvar flags = {\n  sprites_to_images: userAgent().indexOf('Safari') === -1 && userAgent().indexOf('Firefox') === -1\n}\n\nmodule.exports = {\n  Event: Event,\n  extend: extend,\n  clone: clone,\n  isFunction: isFunction,\n  isArray: isArray,\n  types: types,\n  isBrowserSupported: isBrowserSupported,\n  flags: flags\n}\n",
    "var Crossfilter = require('crossfilter')\nvar cartodb = require('./')\n\nfunction Filter () {\n  this.crossfilter = new Crossfilter()\n  this.dimensions = {}\n  this.tiles = {}\n  this.visibleTiles = []\n  this.filters = {}\n}\n\ncartodb.d3.extend(Filter.prototype, cartodb.d3.Event, {\n  addTile: function (tilePoint, collection) {\n    var tilePointString = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    if (typeof this.tiles[tilePointString] !== 'undefined') return this.getTile(tilePoint)\n    this.crossfilter.add(collection.features.map(function (f) {\n      f.properties.tilePoint = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n      return f\n    }))\n    this.tiles[tilePointString] = true\n    return this.getTile(tilePoint)\n  },\n\n  removeTile: function (tilePoint) {\n    var tilePointString = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    if (!this.dimensions.tiles) {\n      return\n    }\n    this.dimensions.tiles.filter(tilePointString)\n    this.crossfilter.remove()\n    this.dimensions.tiles.filterAll()\n    delete this.tiles[tilePointString]\n  },\n\n  getTile: function (tilePoint) {\n    var tilePointString = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    if (!this.dimensions.tiles) {\n      this.dimensions.tiles = this.crossfilter.dimension(function (f) { return f.properties.tilePoint })\n    }\n    var tile = {type: 'FeatureCollection', features: null}\n    this.dimensions.tiles.filter(tilePointString)\n    tile.features = this.dimensions.tiles.top(Infinity)\n    this.dimensions.tiles.filterAll()\n    return tile\n  },\n\n  filterRange: function (column, range) {\n    this.filter(column, range)\n  },\n\n  filter: function (column, filterfn) {\n    this._createDimension(column)\n    this.dimensions[column].filter(filterfn)\n    this.filters[column] = filterfn\n    this.fire('filterApplied')\n  },\n\n  filterAccept: function (column, terms) {\n    this.filter(column, Filter.accept(terms))\n  },\n\n  filterReject: function (column, terms) {\n    this.filter(column, Filter.reject(terms))\n  },\n\n  clearFilters: function () {\n    for (var column in this.dimensions) {\n      this.dimensions[column].filterAll()\n      delete this.filters[column]\n    }\n    this.fire('filterApplied')\n  },\n\n  clearFilter: function (column) {\n    this.dimensions[column].filterAll()\n    delete this.filters[column]\n    this.fire('filterApplied')\n  },\n\n  getValues: function (ownFilter, column) {\n    if (!this.dimensions['tiles']) return []\n    var values = []\n    if (typeof ownFilter === 'undefined' || ownFilter){\n      values = this.dimensions['tiles'].top(Infinity)\n    }\n    else {\n      this._createDimension(column)\n      this.dimensions[column].filterAll()\n      var values = this.dimensions[column].top(Infinity)\n      this.dimensions[column].filter(this.filters[column])\n    }\n    var uniqueValues = []\n    var ids = {}\n    for (var i = 0; i < values.length; i++) {\n      if (!(values[i].properties.cartodb_id in ids)) {\n        uniqueValues.push(values[i])\n        ids[values[i].properties.cartodb_id] = true\n      }\n    }\n    var boundingBox = this.visibleTiles.tiles\n    var ring = this.visibleTiles.ring\n    if (boundingBox) {\n      uniqueValues = uniqueValues.filter(function(feature) {\n          return (this.visibleTiles.se.x >= feature.geometry.coordinates[0] &&\n              feature.geometry.coordinates[0] >= this.visibleTiles.nw.x && \n              this.visibleTiles.se.y <= feature.geometry.coordinates[1] &&\n              feature.geometry.coordinates[1] <= this.visibleTiles.nw.y)\n      }.bind(this))\n    }\n\n    return uniqueValues\n  },\n\n  getColumnValues: function (column, numberOfValues) {\n    this._createDimension(column)\n    return this.dimensions[column].group().top(numberOfValues ? numberOfValues : Infinity)\n  },\n\n\n  setBoundingBox: function (visible) {\n    this.visibleTiles = visible\n  },\n\n  getMax: function (column) { \n    this._createDimension(column)\n    try {\n      return this.dimensions[column].top(1)[0].properties[column]\n    }\n    catch(e) {\n      return null\n    }\n  },\n\n  getMin: function (column) { \n    this._createDimension(column)\n    try {\n      return this.dimensions[column].bottom(1)[0].properties[column]\n    }\n    catch(e) {\n      return null\n    }\n  },\n\n  getCount: function (column) {\n    this._createDimension(column)\n    return this.dimensions[column].groupAll().value()\n  },\n\n  _createDimension: function (column) {\n    if (!this.dimensions[column]) {\n      this.dimensions[column] = this.crossfilter.dimension(function (f) { return f.properties[column] })\n    }\n  }\n})\n\nFilter.accept = function (terms) {\n  if (terms === 'all') {\n    return function () { return true }\n  } else if (terms === 'none') {\n    return function () { return false }\n  }\n  var termsDict = {}\n  terms.forEach(function (t) {\n    termsDict[t] = true\n  })\n  return function (f) {\n    if (termsDict[f]) {\n      return true\n    }\n    return false\n  }\n}\n\nFilter.reject = function (terms) {\n  if (terms === 'all') {\n    return function () { return false }\n  } else if (terms === 'none') {\n    return function () { return true }\n  }\n  var termsDict = {}\n  terms.forEach(function (t) {\n    termsDict[t] = true\n  })\n  return function (f) {\n    if (!termsDict[f]) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Filter\n",
    "module.exports = {\n  tile2lon: function (x, z) {\n    return (x / Math.pow(2, z) * 360 - 180)\n  },\n  tile2lat: function (y, z) {\n    var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z)\n    return (180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n))))\n  },\n  geo2Webmercator: function (x_lon, y_lat) {\n    x_lon = x_lon % 180\n    // 0.017453292519943295 => Deg to rad constant\n    var num = x_lon * 0.017453292519943295\n    // 6378137 => Earth radius\n    var x = 6378137.0 * num\n    var a = y_lat * 0.017453292519943295\n    var x_mercator = x\n    var y_mercator = 3189068.5 * Math.log((1.0 + Math.sin(a)) / (1.0 - Math.sin(a)))\n    return {x: x_mercator, y: y_mercator}\n  },\n  webmercator2Geo: function(x, y) {\n    \n  },\n  wrapX: function (x, zoom) {\n    var limit_x = Math.pow(2, zoom)\n    var corrected_x = ((x % limit_x) + limit_x) % limit_x\n    return corrected_x\n  },\n  hashFeature: function (id, tilePoint) {\n    var x = tilePoint.x, z = tilePoint.zoom\n    if (typeof tilePoint === 'string') {\n      tilePoint = tilePoint.split(\":\")\n      x = tilePoint[0]\n      z = tilePoint[2]\n    }\n    var pane = Math.floor(x / Math.pow(2, z))\n    return [id, pane].join(':')\n  },\n  lng2tile: function (lon,zoom) { return (Math.floor((lon+180)/360*Math.pow(2,zoom))); },\n  lat2tile: function (lat,zoom) { return (Math.floor((1-Math.log(Math.tan(lat*Math.PI/180) + 1/Math.cos(lat*Math.PI/180))/Math.PI)/2 *Math.pow(2,zoom))); },\n\n  latLng2Tile: function (lat, lng, zoom) {\n    return {x: this.lng2tile(lng, zoom),\n            y: this.lat2tile(lat, zoom),\n            zoom: zoom}\n  }\n}\n",
    "module.exports.d3 = require('./core')\nrequire('./leaflet_d3.js')\nvar elements = {\n  Util: require('./util.js'),\n  geo: require('./geo.js'),\n  Renderer: require('./renderer.js'),\n  net: require('./net.js'),\n  Filter: require('./filter.js'),\n  provider: require('./providers')\n}\nfor (var key in elements) {\n  module.exports.d3[key] = elements[key]\n}\n",
    "var Renderer = require('./renderer')\nvar providers = require('./providers')\nvar TileLoader = require('./tileloader')\nvar geo = require('./geo')\nvar L = window.L\n\nL.CartoDBd3Layer = L.TileLayer.extend({\n  options: {\n    minZoom: 0,\n    maxZoom: 28,\n    tileSize: 256,\n    zoomOffset: 0,\n    tileBuffer: 50\n  },\n\n  events: {\n    featureOver: null,\n    featureOut: null,\n    featureClick: null\n  },\n\n  initialize: function (options) {\n    options = options || {}\n    this.renderers = []\n    this.svgTiles = {}\n    this.eventCallbacks = {}\n    this._animated = true\n    L.Util.setOptions(this, options)\n    var styles = this.options.styles\n    if (!styles) {\n      styles = [this.options.cartocss]\n      this.options.styles = styles\n    }\n    if (this.options.layers && this.options.user) {\n      this.provider = new providers.WindshaftProvider(this.options)\n    } else {\n      this.provider = new providers.XYZProvider(this.options)\n    }\n    this.provider.on('ready', this._resetRenderers.bind(this))\n  },\n\n  on: function (eventName, callback) {\n    if (eventName in this.events) {\n      if (this.renderers.length > 0) {\n        this.renderers.forEach(function (renderer) {\n          renderer.on(eventName, callback)\n        })\n      } else {\n        this.eventCallbacks[eventName] = callback\n      }\n    } else {\n      L.TileLayer.prototype.on.call(this, arguments[0], arguments[1])\n    }\n  },\n\n  _getVisibleTiles: function () {\n    var bounds = this._map.getBounds()\n    var zoom = this._map.getZoom()\n    var northWest = bounds.getNorthWest()\n    var southEast = bounds.getSouthEast()\n    var nwTile = geo.latLng2Tile(northWest.lat, northWest.lng, zoom)\n    var seTile = geo.latLng2Tile(southEast.lat, southEast.lng, zoom)\n    var tiles = []\n    var ring = []\n    for(var y = nwTile.y; y<=seTile.y; y++) {\n      for(var x = nwTile.x; x<=seTile.x; x++) {\n        if (y === nwTile.y || y === seTile.y || x === nwTile.x || x === seTile.x){\n          ring.push([x,y,zoom].join(':'))\n        }\n        else{\n          tiles.push([x,y,zoom].join(':'))\n        }\n      }\n    }\n    var se = geo.geo2Webmercator(southEast.lng, southEast.lat)\n    var nw = geo.geo2Webmercator(northWest.lng, northWest.lat)\n    return { tiles: tiles, ring: ring, se: se, nw: nw }\n  },\n\n  applyFilter: function (sublayerIndex, filterType, filterOptions) {\n    var sublayer = this.renderers[sublayerIndex]\n    switch (filterType) {\n      case 'accept':\n        sublayer.filter.filterAccept(filterOptions.column, filterOptions.values)\n        break\n      case 'reject':\n        sublayer.filter.filterReject(filterOptions.column, filterOptions.values)\n        break\n      case 'range':\n        sublayer.filter.filterRange(filterOptions.column, [filterOptions.min, filterOptions.max])\n        break\n    }\n    sublayer.redraw()\n  },\n\n  setProvider: function (options) {\n    this.styles = options.styles\n    this.provider.setURL(options.urlTemplate)\n  },\n  setUrl: function (url) {\n    this.setProvider({\n      styles: this.options.styles,\n      urlTemplate: url\n    })\n  },\n\n  featuresLoaded: function () {\n    if (!this.provider) return false\n    return this.provider.allTilesLoaded()\n  },\n\n  getFilter: function (layerIndex) {\n    return this.renderers[layerIndex].filter\n  },\n\n  getFeatures: function () {\n    var features = []\n    if (this.renderers.length > 0) {\n      this.renderers.forEach(function (r) {\n        features.push(r.filter.getValues())\n      })\n    }\n    return features\n  },\n\n  onAdd: function (map) {\n    this._map = map\n    this.options.map = map\n    this.options.layer = this\n    this._initContainer()\n\n    this.tileLoader = new TileLoader({\n      tileSize: this.options.tileSize,\n      maxZoom: this.options.maxZoom,\n      minZoom: this.options.minZoom,\n      provider: this.provider,\n      map: map\n    })\n    this.tileLoader.loadTiles()\n    this._tileContainer.setAttribute('class', 'leaflet-zoom-animated leaflet-tile-container')\n    this._bgBuffer.setAttribute('class', 'leaflet-zoom-animated leaflet-tile-container')\n    this.tileLoader.on('tileAdded', this._renderTile, this)\n    this.tileLoader.on('tileRemoved', this._clearTile, this)\n    this.tileLoader.on('tilesLoaded', function () {\n      this._setBoundingBox()\n      this.fire('featuresChanged', this.getFeatures())\n    }, this)\n    this._map.on({\n      'zoomanim': this._animateZoom,\n      'zoomend': this._endZoomAnim,\n      'moveend': this._setBoundingBox\n    }, this)\n  },\n\n  onRemove: function (map) {\n    this.tileLoader.unbindAndClearTiles()\n  },\n\n  addTo: function (map) {\n    map.addLayer(this)\n    return this\n  },\n\n  _setBoundingBox: function () {\n    var visible = this._getVisibleTiles()\n    this.renderers.forEach(function (renderer) {\n      renderer.filter.setBoundingBox(visible)\n    })\n  },\n\n  _resetRenderers: function () {\n    var self = this\n    if (this.renderers.length > 0) {\n      this.renderers = []\n    }\n    var styles = this.options.styles\n    if (styles.length > 0) {\n      for (var i = 0; i < styles.length; i++) {\n        this.renderers.push(new Renderer({\n          cartocss: styles[i],\n          index: i,\n          layer: this\n        }))\n      }\n    } else {\n      this.renderers.push(new Renderer({\n        cartocss: '',\n        index: 0,\n        layer: this\n      }))\n    }\n    for (var tileKey in this.svgTiles) {\n      var split = tileKey.split(':')\n      var tilePoint = {\n        x: parseInt(split[0], 10),\n        y: parseInt(split[1], 10),\n        zoom: parseInt(split[2], 10)\n      }\n      this.tileLoader._loadTile(tilePoint)\n    }\n    this.renderers.forEach(function (r) {\n      r.filter.on('filterApplied', function () {\n        self.fire('featuresChanged', self.getFeatures())\n      })\n      for (var key in self.eventCallbacks){\n        r.on(key, self.eventCallbacks[key])\n      }\n    })\n  },\n\n  _renderTile: function (data) {\n    var tilePoint = data.tilePoint\n    var geometry = data.geometry\n    var self = this\n    var tileKey = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    var tile = this.svgTiles[tileKey]\n    if (!tile) {\n      tile = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n      // tile.style.padding = this.options.tileBuffer + 'px'\n      // tile.style.margin = '-' + this.options.tileBuffer + 'px'\n      tile.setAttribute('class', 'leaflet-tile')\n      this.svgTiles[tileKey] = tile\n      this._tileContainer.appendChild(tile)\n    }\n\n    for (var i = 0; i < self.renderers.length; i++) {\n      if (geometry.features.length > 1 && geometry.features[0].type === 'FeatureCollection') { // This means there's more than one layer\n        if (geometry.features.length !== this.renderers.length) return\n      } else {\n        if (this.renderers.length > 1) return\n      }\n      var collection = self.renderers.length > 1 ? geometry.features[i] : geometry\n      self.renderers[i].render(tile, collection, tilePoint)\n    }\n\n    var tilePos = this._getTilePos(tilePoint)\n    tile.style.width = tile.style.height = this._getTileSize() + 'px'\n    L.DomUtil.setPosition(tile, tilePos, L.Browser.chrome)\n  },\n\n  _clearTile: function (data) {\n    var split = data.tileKey.split(':')\n    var tilePoint = {x: split[0], y: split[1], zoom: split[2]}\n    this.renderers.forEach(function (r) {\n      r.filter.removeTile(tilePoint)\n    })\n    if (this._tileContainer.hasChildNodes(this.svgTiles[data.tileKey])){\n      this._tileContainer.removeChild(this.svgTiles[data.tileKey])\n    }\n    delete this.svgTiles[data.tileKey]\n  },\n\n  _getTilePos: function (tilePoint) {\n    tilePoint = new L.Point(tilePoint.x, tilePoint.y)\n    var origin = this._map.getPixelOrigin()\n    var tileSize = this._getTileSize()\n\n    return tilePoint.multiplyBy(tileSize).subtract(origin)\n  },\n\n  latLngToLayerPoint: function (lat, lng) {\n    return this._map.latLngToLayerPoint(new L.LatLng(lat, lng))\n  },\n\n  _getTileSize: function () {\n    var map = this._map\n    var zoom = map.getZoom() + this.options.zoomOffset\n    var zoomN = this.options.maxNativeZoom\n    var tileSize = this.options.tileSize\n\n    if (zoomN && zoom > zoomN) {\n      tileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize)\n    }\n\n    return tileSize\n  },\n\n  setCartoCSS: function (index, cartocss) {\n    this.options.styles[index] = cartocss\n    this.renderers[index].setCartoCSS(cartocss)\n  },\n\n  _getLoadedTilesPercentage: function (container) {\n    var tiles = container.getElementsByTagName('svg')\n    var i, len\n    var count = 0\n\n    for (i = 0, len = tiles.length; i < len; i++) {\n      if (tiles[i].complete) {\n        count++\n      }\n    }\n    return count / len\n  },\n\n  _endZoomAnim: function () {\n    var front = this._tileContainer\n    var bg = this._bgBuffer\n    front.style.visibility = ''\n    front.parentNode.appendChild(front) // Bring to fore\n    bg.style.transform = ''\n    bg.innerHTML = ''\n    // force reflow\n    L.Util.falseFn(bg.offsetWidth)\n\n    this._animating = false\n  },\n\n  _stopLoadingImages: function (container) {\n    var tiles = Array.prototype.slice.call(container.getElementsByTagName('svg'))\n    var i, len, tile\n    this.tileLoader._tilesLoading = {}\n    for (i = 0, len = tiles.length; i < len; i++) {\n      tile = tiles[i]\n      tile.parentNode.removeChild(tile)\n    }\n    this.provider.abortPending()\n  }\n})\n",
    "var d3 = require('d3')\n\n// http://bl.ocks.org/tmcw/4494715\nmodule.exports.jsonp = function (url, callback) {\n  function rand () {\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'\n    var c = ''\n    var i = -1\n    while (++i < 15) c += chars.charAt(Math.floor(Math.random() * 52))\n    return c\n  }\n\n  function create (url) {\n    var e = url.match(/callback=(\\w+)/)\n    var c = e ? e[1] : rand()\n    window[c] = function (data) {\n      callback(data)\n      delete window[c]\n      script.remove()\n    }\n    return c\n  }\n\n  var cb = create(url)\n  var script = d3.select('head')\n      .append('script')\n      .attr('type', 'text/javascript')\n      .attr('src', url.replace(/(\\{|%7B)callback(\\{|%7D)/, cb))\n}\n\nmodule.exports.get = function get (url, callback, options) {\n  options = options || {\n    method: 'GET',\n    data: null,\n    responseType: 'text'\n  }\n  var Request = window.XMLHttpRequest\n  // from d3.js\n  if (global.XDomainRequest &&\n    !('withCredentials' in Request) &&\n    /^(http(s)?:)?\\/\\//.test(url)) Request = global.XDomainRequest\n\n  var req = new Request()\n  req.open(options.method, url, true)\n\n  function respond () {\n    var status = req.status\n    var r = options.responseType === 'arraybuffer' ? req.response : req.responseText\n    if (!status && r || status >= 200 && status < 300 || status === 304) {\n      callback(req)\n    } else {\n      callback(null)\n    }\n  }\n\n  'onload' in req\n    ? req.onload = req.onerror = respond\n    : req.onreadystatechange = function () { req.readyState > 3 && respond() }\n\n  req.onprogress = function () {}\n\n  req.responseType = options.responseType // 'arraybuffer'\n  if (options.data) {\n    req.setRequestHeader('Content-type', 'application/json')\n    // req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\")\n    req.setRequestHeader('Accept', '*')\n  }\n  req.send(options.data)\n  return req\n}\n",
    "module.exports = {\n  SQLProvider: require('./sql.js'),\n  XYZProvider: require('./xyz.js'),\n  WindshaftProvider: require('./windshaft.js')\n}\n",
    "var d3 = require('d3')\nvar geo = require('../geo')\n\nfunction SQLProvider (options) {\n  this.sql_api_template = options.sql_api_template || 'http://{user}.cartodb.com'\n  this.user = options.user\n  this.table = options.table\n  this.format = options.format\n  this.tileCache = {}\n}\n\nSQLProvider.prototype = {\n  getTile: function (tilePoint, callback) {\n    var tileData = this.tileCache[tilePoint.zoom + ':' + tilePoint.x + ':' + tilePoint.y]\n    if (tileData) {\n      callback(tilePoint, tileData)\n    } else {\n      var tileBB = {\n        n: geo.tile2lat(tilePoint.y, tilePoint.zoom),\n        s: geo.tile2lat(tilePoint.y + 1, tilePoint.zoom),\n        e: geo.tile2lon(tilePoint.x, tilePoint.zoom),\n        w: geo.tile2lon(tilePoint.x + 1, tilePoint.zoom)\n      }\n      var query = 'SELECT * FROM ' + this.table\n      query += ' WHERE the_geom && ST_MakeEnvelope({w},{s},{e},{n}, 4326)'\n      query = query\n      .replace('{w}', tileBB.w)\n      .replace('{s}', tileBB.s)\n      .replace('{e}', tileBB.e)\n      .replace('{n}', tileBB.n)\n\n      this.getGeometry(query, tilePoint.zoom, function (geometry) {\n        this.tileCache[tilePoint.zoom + ':' + tilePoint.x + ':' + tilePoint.y] = geometry\n        callback(tilePoint, geometry)\n      }.bind(this))\n    }\n  },\n\n  _query: function (sql, callback, format) {\n    var url = this.sql_api_template.replace('{user}', this.user)\n    url += '/api/v2/sql?q=' + encodeURIComponent(sql)\n    if (format) {\n      url += '&format=' + format\n    }\n    d3.json(url, callback)\n  },\n\n  getGeometry: function (sql, zoom, callback) {\n    // request the schema fist to extract columns and generate the final\n    // sql query with the right the_geom simplification for the zoom level.\n    // The current zoom level may not the best but good enough for a test\n    var schemaSQL = 'select * from (' + sql + ') __cdb limit 0'\n    this._query(schemaSQL, function (data) {\n      // generate the final sql. Ideally only variables used in cartocss\n      // should be requested\n      var columns = Object.keys(data.fields).filter(function (f) {\n        return f !== 'the_geom' && f !== 'the_geom_webmercator'\n      })\n\n      // pixel size with some factor to avoid remove geometries\n      var px = this.pixelSizeForZoom(zoom)\n      var the_geom = 'st_transform(st_simplify(st_snaptogrid(the_geom_webmercator, {px}, {px}), {px}/2), 3857) as the_geom'.replace(/{px}/g, px)\n      // generate the sql with all the columns + the geometry simplified\n      var finalSQL = 'select ' + columns.join(',') + ',' + the_geom + ' FROM (' + sql + ') __cdb'\n\n      this._query(finalSQL, function (collection) {\n        collection.features = collection.features.filter(function (d) {\n          return d.geometry && d.geometry.coordinates.length > 0\n        })\n        callback(collection)\n      }, 'geojson')\n    }.bind(this))\n  },\n\n  pixelSizeForZoom: function (zoom) {\n    var earth_circumference = 40075017\n    var tile_size = 256\n    var full_resolution = earth_circumference / tile_size\n    return full_resolution / Math.pow(2, zoom)\n  },\n  invalidateCache: function () {\n    this.tileCache = {}\n  }\n}\n\nmodule.exports = SQLProvider\n",
    "var cartodb = require('../')\nvar XYZProvider = require('./xyz.js')\n\nfunction WindshaftProvider (options) {\n  this.tiler_template = options.tiler_template || 'http://{user}.cartodb.com'\n  this.user = options.user\n  this.layers = options.layers;\n  this.format = options.format\n  this.options = options\n  this._tileQueue = []\n  this.initialize()\n  this._ready = false\n  this.requests = {}\n}\n\ncartodb.d3.extend(WindshaftProvider.prototype, cartodb.d3.Event, {\n\n  initialize: function () {\n    this.tiler_template = this.tiler_template.replace('{user}', this.user)\n    var mapconfig = this._generateMapconfig(this.table)\n    var url = this.tiler_template + '/api/v1/map?config=' + encodeURIComponent(JSON.stringify(mapconfig))\n    cartodb.d3.net.jsonp(url + '&callback=mapconfig', function (data) {\n      this.layergroup = data\n      this._ready = true\n      this.urlTemplate = this.tiler_template + '/api/v1/map/' + this.layergroup.layergroupid + '/mapnik/{z}/{x}/{y}.geojson'\n      XYZProvider.prototype._processQueue.apply(this)\n      this.fire('ready')\n    }.bind(this))\n  },\n\n  getTile: XYZProvider.prototype.getTile,\n\n  getGeometry: XYZProvider.prototype.getGeometry,\n\n  abortPending: XYZProvider.prototype.abortPending,\n\n  allTilesLoaded: XYZProvider.prototype.allTilesLoaded,\n\n  _generateMapconfig: function (table) {\n    var mapconfig = {\n      'version': '1.0.1',\n      'layers': this.layers.map(function(layer) {\n         return {\n           'type': 'cartodb',\n           'options': {\n             'sql': layer.sql,\n             'cartocss': layer.cartocss,\n             'cartocss_version': '2.1.1'\n           }\n         }\n      })\n    };\n    return mapconfig\n  }\n})\n\nmodule.exports = WindshaftProvider\n",
    "var d3 = require('d3')\nvar topojson = require('topojson')\nvar cartodb = require('../')\n\nfunction XYZProvider (options) {\n  this.format = options.format\n  this.urlTemplate = options.urlTemplate\n  this.tilejson = options.tilejson\n  this._tileQueue = []\n  this._ready = false\n  this.requests = {}\n  if (!this.urlTemplate) {\n    if (this.tilejson) {\n      this.urlTemplate = this.tilejson.tiles[0]\n      this._setReady()\n    }\n  } else {\n    this._setReady()\n  }\n}\n\ncartodb.d3.extend(XYZProvider.prototype, cartodb.d3.Event, {\n\n  getTile: function (tilePoint, callback) {\n    if (this._ready) {\n      var self = this\n      this.getGeometry(tilePoint, function (err, geometry) {\n        if (err) return\n        if (geometry.type === 'Topology') {\n          self.format = 'topojson'\n          geometry = topojson.feature(geometry, geometry.objects.vectile)\n        }\n        self.requests[[tilePoint.x, tilePoint.y, tilePoint.zoom].join(':')].complete = true\n        callback(tilePoint, geometry)\n      })\n    } else {\n      this._tileQueue.push([tilePoint, callback])\n    }\n  },\n\n  getGeometry: function (tilePoint, callback) {\n    var self = this\n    var url = this.urlTemplate\n      .replace('{x}', tilePoint.x)\n      .replace('{y}', tilePoint.y)\n      .replace('{z}', tilePoint.zoom)\n      .replace('{s}', 'abcd'[(tilePoint.x * tilePoint.y) % 4])\n      .replace('.png', '.geojson')\n    var tilePointString = [tilePoint.x, tilePoint.y, tilePoint.zoom].join(':')\n    var request = d3.json(url, callback)\n    this.requests[tilePointString] = request\n  },\n\n  _setReady: function () {\n    this._ready = true\n    window.setTimeout(function () {\n      this.fire('ready')\n      this._processQueue()\n    }.bind(this), 0)\n  },\n\n  setURL: function (url) {\n    this.urlTemplate = url\n    this._setReady()\n  },\n\n  abortPending: function () {\n    for (var tileKey in this.requests) {\n      this.requests[tileKey].abort()\n    }\n    this.requests = {}\n  },\n\n  allTilesLoaded: function () {\n    for (var request in this.requests) {\n      if (!this.requests[request].complete) return false\n    }\n    return true\n  },\n\n  _processQueue: function () {\n    var self = this\n    this._tileQueue.forEach(function (item) {\n      self.getTile.apply(self, item)\n    })\n  }\n})\n\nmodule.exports = XYZProvider\n",
    "/** global L **/\nvar d3 = global.d3 || require('d3')\nvar cartodb = global.cartodb || {}\nvar carto = global.carto || require('carto')\nvar _ = global._ || require('underscore')\nvar geo = require('./geo')\nvar Filter = require('./filter')\n\ncartodb.d3 = d3 || {}\n\nd3.selection.prototype.moveToFront = function () {\n  return this.each(function () {\n    this.parentNode.appendChild(this)\n  })\n}\n\nvar Renderer = function (options) {\n  this.options = options\n  this.index = options.index\n  if (options.cartocss) {\n    this.setCartoCSS(options.cartocss)\n  }\n  this.globalVariables = {}\n  this.layer = options.layer\n  this.filter = new Filter()\n  this.geometries = {}\n}\n\nRenderer.prototype = {\n  events: {\n    featureOver: null,\n    featureOut: null,\n    featureClick: null\n  },\n\n  /**\n   * changes a global variable in cartocss\n   * it can be used in carotcss in this way:\n   * [prop < global.variableName] {...}\n   *\n   * this function can be used passing an object with all the variables or just key value:\n   * layer.setGlobal('test', 1)\n   * layer.setGlobal({test: 1, bar: 3})\n   *\n   * layer will be refreshed after calling it\n   */\n  setGlobal: function () {\n    var args = Array.prototype.slice.call(arguments)\n    if (args.length === 2) {\n      this.globalVariables[args[0]] = args[1]\n    } else {\n      this.globalVariables = args[0]\n    }\n  },\n\n  setCartoCSS: function (cartocss) {\n    this.renderer = new carto.RendererJS()\n    this.shader = this.renderer.render(cartocss)\n    if (this.layer) {\n      for (var tileKey in this.layer.svgTiles) {\n        var tilePoint = tileKey.split(':')\n        tilePoint = {x: tilePoint[0], y: tilePoint[1], zoom: tilePoint[2]}\n        this.render(this.layer.svgTiles[tileKey], null, tilePoint, true)\n      }\n    }\n  },\n\n  on: function (eventName, callback) {\n    var self = this\n    if (eventName ==='featureOver') {\n      this.events.featureOver = function (f) {\n        this.style.cursor = 'pointer'\n        var selection = d3.select(this)\n        var properties = selection.data()[0].properties\n        var index = Renderer.getIndexFromFeature(this)\n        var layerPoint = self._getLayerPointFromEvent(self.layer._map, f)\n        var latLng = self.layer._map.layerPointToLatLng(layerPoint)\n        var pos = self.layer._map.layerPointToContainerPoint(layerPoint)\n        self.layer.eventCallbacks.featureOver(f, [ latLng.lat, latLng.lng ], pos, properties, index)\n      }\n    } else if (eventName ==='featureOut') {\n      this.events.featureOut = function (f) {\n        var selection = d3.select(this)\n        var properties = selection.data()[0].properties\n        var sym = this.attributes['class'].value\n        selection.reset = function () {\n          selection.style(self.styleForSymbolizer(sym, 'shader'))\n        }\n        var index = Renderer.getIndexFromFeature(this)\n        var layerPoint = self._getLayerPointFromEvent(self.layer._map, f)\n        var latLng = self.layer._map.layerPointToLatLng(layerPoint)\n        var pos = self.layer._map.layerPointToContainerPoint(layerPoint)\n        self.layer.eventCallbacks.featureOut(f, [ latLng.lat, latLng.lng ], pos, properties, index)\n      }\n    } else if (eventName ==='featureClick') {\n      this.events.featureClick = function (f) {\n        var selection = d3.select(this)\n        var properties = selection.data()[0].properties\n        var index = Renderer.getIndexFromFeature(this)\n        var layerPoint = self._getLayerPointFromEvent(self.layer._map, f)\n        var latLng = self.layer._map.layerPointToLatLng(layerPoint)\n        var pos = self.layer._map.layerPointToContainerPoint(layerPoint)\n        self.layer.eventCallbacks.featureClick(f, [ latLng.lat, latLng.lng ], pos, properties, index)\n      }\n    } else if (eventName ==='featuresChanged') {\n      this.filter.on('featuresChanged', callback)\n    }\n  },\n\n  _getLayerPointFromEvent: function (map, event) {\n    var curleft = 0;\n    var curtop = 0;\n    var obj = map.getContainer();\n\n    var x, y;\n    if (event.changedTouches && event.changedTouches.length > 0) {\n      x = event.changedTouches[0].clientX + window.scrollX;\n      y = event.changedTouches[0].clientY + window.scrollY;\n    } else {\n      x = event.clientX;\n      y = event.clientY;\n    }\n\n    var pointX;\n    var pointY;\n    // If the map is fixed at the top of the window, we can't use offsetParent\n    // cause there might be some scrolling that we need to take into account.\n    if (obj.offsetParent && obj.offsetTop > 0) {\n      do {\n        curleft += obj.offsetLeft;\n        curtop += obj.offsetTop;\n      } while (obj = obj.offsetParent);\n      pointX = x - curleft;\n      pointY = y - curtop;\n    } else {\n      var rect = obj.getBoundingClientRect();\n      var scrollX = (window.scrollX || window.pageXOffset);\n      var scrollY = (window.scrollY || window.pageYOffset);\n      pointX = (event.clientX ? event.clientX : x) - rect.left - obj.clientLeft - scrollX;\n      pointY = (event.clientY ? event.clientY : y) - rect.top - obj.clientTop - scrollY;\n    }\n    var point = new L.Point(pointX, pointY);\n    return map.containerPointToLayerPoint(point);\n  },\n\n  redraw: function (updating) {\n    if (this.layer) {\n      for (var tileKey in this.layer.svgTiles) {\n        var tilePoint = tileKey.split(':')\n        this.layer.svgTiles[tileKey].children[this.index].innerHTML = ''\n        tilePoint = {x: tilePoint[0], y: tilePoint[1], zoom: tilePoint[2]}\n        this.render(this.layer.svgTiles[tileKey], null, tilePoint, false)\n      }\n    }\n  },\n\n  // there are special rules for layers, for example \"::hover\", this function\n  // search for them and attach to the original layer, so if you have\n  // #test {}\n  // #test::hover {}\n  // this function will return an array with a single layer. That layer will contain a\n  // hover as an attribute\n  processLayersRules: function (layers) {\n    var specialAttachments = ['hover']\n    var realLayers = []\n    var attachments = []\n    // map layer names\n    var layerByName = {}\n    layers.forEach(function (layer) {\n      if (specialAttachments.indexOf(layer.attachment()) !== -1) {\n        attachments.push(layer)\n      } else {\n        layerByName[layer.name()] = layer\n        realLayers.push(layer)\n      }\n    })\n\n    // link attachment with layers\n    attachments.forEach(function (attachment) {\n      var n = layerByName[attachment.name()]\n      if (n) {\n        n[attachment.attachment()] = attachment\n      } else {\n        console.log('attachment without layer')\n      }\n    })\n\n    return realLayers\n  },\n\n  styleForSymbolizer: function (symbolyzer, shaderName) {\n    if (symbolyzer === 'polygon' || symbolyzer === 'line') {\n      return {\n        'fill': function (d) { return d[shaderName]['polygon-fill'] || 'none' },\n        'fill-opacity': function (d) { return d[shaderName]['polygon-opacity'] },\n        'stroke': function (d) { return d[shaderName]['line-color'] },\n        'stroke-width': function (d) { return d[shaderName]['line-width'] },\n        'stroke-opacity': function (d) { return d[shaderName]['line-opacity'] },\n        'mix-blend-mode': function (d) { return d[shaderName]['comp-op'] },\n        'stroke-dasharray': function (d) { return d[shaderName]['line-dasharray']}\n      }\n    } else if (symbolyzer === 'markers') {\n      return {\n        'fill': function (d) { return d[shaderName]['marker-fill'] || 'none' },\n        'fill-opacity': function (d) { return d[shaderName]['marker-fill-opacity'] },\n        'stroke': function (d) { return d[shaderName]['marker-line-color'] },\n        'stroke-opacity': function (d) { return d[shaderName]['marker-line-opacity'] },\n        'stroke-width': function (d) { return d[shaderName]['marker-line-width'] },\n        'radius': function (d) {\n          return d[shaderName]['marker-width'] / 2\n        },\n        'mix-blend-mode': function (d) { return d[shaderName]['comp-op'] },\n        'stroke-dasharray': function (d) { return d[shaderName]['line-dasharray']}\n      }\n    } else if (symbolyzer === 'text') {\n      return {\n        'fill': function (d) { return d[shaderName]['text-fill'] || 'none' },\n        'mix-blend-mode': function (d) { return d[shaderName]['comp-op'] }\n      }\n    }\n  },\n\n  generateProjection: function (tilePoint) {\n    var corrected_x = geo.wrapX(tilePoint.x, tilePoint.zoom)\n    return function (x, y) {\n      var earthRadius = 6378137 * 2 * Math.PI\n      var earthRadius2 = earthRadius / 2\n      var invEarth = 1.0 / earthRadius\n      var pixelScale = 256 * (1 << tilePoint.zoom)\n      x = pixelScale * (x + earthRadius2) * invEarth\n      y = pixelScale * (-y + earthRadius2) * invEarth\n      if (this.stream) {\n        this.stream.point(x - corrected_x * 256, y - tilePoint.y * 256)\n      } else {\n        return { x: x - corrected_x * 256, y: y - tilePoint.y * 256 }\n      }\n    }\n  },\n\n  render: function (svg, collection, tilePoint, updating) {\n    var self = this\n    collection = this.filter.addTile(tilePoint, collection) // It won't add duplicates\n    var g, styleLayers\n    var svgSel = d3.select(svg)\n    if (svg.children[this.index]) {\n      g = d3.select(svg.children[this.index])\n      styleLayers = g.data()\n    } else {\n      g = svgSel.append('g')\n    }\n    this.projection = this.generateProjection(tilePoint)\n    this.path = d3.geo.path().projection(d3.geo.transform({ point: this.projection }))\n\n    if (!this.shader || !collection || collection.features.length === 0) return\n    var layers = this.shader.getLayers()\n\n    // search for hovers and other special rules for the renderer\n    layers = this.processLayersRules(layers)\n\n    layers.forEach(function (layer, i) {\n      var thisGroup\n      var children = g[0][0].children\n      if(!children[i]) thisGroup = g.append('g')\n      else thisGroup = d3.select(children[i])\n      var sym = self._getSymbolizer(layer)\n      var features\n      if (!updating) {\n        features = self._createFeatures(layer, collection, thisGroup[0][0])\n      } else {\n        features = thisGroup.selectAll('.' + sym)\n      }\n      this.tilePoint = tilePoint\n      self._styleFeatures(layer, features, this)\n    })\n    svgSel.attr('class', svgSel.attr('class') + ' leaflet-tile-loaded')\n  },\n\n  _styleFeatures: function (layer, features, group) {\n    var sym = this._getSymbolizer(layer)\n    var self = this\n    features.each(function (d) {\n      if (!d.properties) d.properties = {}\n      var featureHash = geo.hashFeature(d.properties.cartodb_id, group.tilePoint)\n      if (!self.geometries[featureHash]) self.geometries[featureHash] = []\n      self.geometries[featureHash].push(this)\n      d.properties.global = self.globalVariables\n      d.shader = layer.getStyle(d.properties, {zoom: group.tilePoint.zoom, time: self.time})\n      this.onmousemove = self.events.featureOver\n      this.onmouseleave = self.events.featureOut\n      this.onclick = self.events.featureClick\n      if (layer.hover) {\n        d.shader_hover = layer.hover.getStyle(d.properties, { zoom: group.tilePoint.zoom, time: self.time })\n        _.defaults(d.shader_hover, d.shader)\n        self.events.featureOver = function (f) {\n          this.style.cursor = 'default'\n          var element = d3.select(this).data()[0]\n          var hash = geo.hashFeature(element.properties.cartodb_id, element.properties.tilePoint)\n          self.geometries[hash].forEach(function (feature) {\n            d3.select(feature).style(self.styleForSymbolizer(sym, 'shader_hover'))\n          })\n        }\n        self.events.featureOut = function () {\n          var element = d3.select(this).data()[0]\n          var hash = geo.hashFeature(element.properties.cartodb_id, element.properties.tilePoint)\n          self.geometries[hash].forEach(function (feature) {\n            d3.select(feature).style(self.styleForSymbolizer(sym, 'shader'))\n          })\n        }\n      }\n    })\n    if (sym === 'text') {\n      features = this._transformText(features)\n    }\n\n    var styleFn = self.styleForSymbolizer(this._getSymbolizer(layer), 'shader')\n    features.attr('r', styleFn.radius)\n    features.attr('mix-blend-mode', styleFn['mix-blend-mode'])\n    features.style(styleFn)\n  },\n\n  _createFeatures: function (layer, collection, group) {\n    var self = this\n    var sym = this._getSymbolizer(layer)\n    var geometry = collection.features\n    var transform = transformForSymbolizer(sym)\n    if (transform) {\n      geometry = geometry.map(transform)\n    }\n\n    // select based on symbolizer\n    var features = d3.select(group)\n      .selectAll('.' + sym)\n      .data(geometry)\n\n    if (sym === 'text') {\n      features.enter().append('svg:text').attr('class', sym)\n    } else if (sym === 'markers') {\n      features.enter().append('circle').attr('class', sym)\n      features.each(function(f) {\n        if (f.coordinates[0]){\n          var coords = self.projection.apply(this, f.coordinates)\n          this.setAttribute('cx', coords.x)\n          this.setAttribute('cy', coords.y)\n        }\n        else{\n          this.parentElement.removeChild(this)\n        }\n      })\n    } else {\n      features.enter().append('path').attr('class', sym)\n      features.attr('d', this.path)\n    }\n    features.exit().remove()\n    return features\n  },\n\n  _getSymbolizer: function (layer) {\n    var symbolizers = layer.getSymbolizers()\n    symbolizers = _.filter(symbolizers, function (f) {\n      return f !== '*'\n    })\n    // merge line and polygon symbolizers\n    symbolizers = _.uniq(symbolizers.map(function (d) { return d === 'line' ? 'polygon' : d }))\n    return symbolizers[0]\n  },\n\n  _transformText: function (feature) {\n    var self = this\n    feature.text(function (d) {\n      return d.shader['text-name']\n    })\n    feature.attr('dy', function (d) {\n      return d.shader['text-dy']\n    })\n    feature.attr('text-anchor', 'middle')\n    feature.attr('x', function (d) {\n      if (d.geometry.coordinates[0]) {\n        var p = self.projection(d.geometry.coordinates[0], d.geometry.coordinates[1])\n        return p.x\n      }\n      else {\n        this.remove()\n      }\n    })\n    feature.attr('y', function (d) {\n      if (d.geometry.coordinates[0]) {\n        var p = self.projection(d.geometry.coordinates[0], d.geometry.coordinates[1])\n        return p.y\n      }\n      else {\n        this.remove()\n      }\n    })\n    return feature\n  }\n}\n\nRenderer.getIndexFromFeature = function (element) {\n  var i = 0\n  var node = element.parentElement.parentElement\n  while (node = node.previousSibling) i ++\n  return i\n}\n\nfunction transformForSymbolizer (symbolizer) {\n  if (symbolizer === 'markers' || symbolizer === 'labels') {\n    var pathC = d3.geo.path().projection(function (d) { return d })\n    return function (d) {\n      return d._centroid || (d._centroid = {\n        type: 'Point',\n        properties: d.properties,\n        coordinates: pathC.centroid(d)\n      })\n    }\n  }\n  return null\n}\n\nmodule.exports = Renderer\n",
    "var L = window.L\n\nmodule.exports = L.Class.extend({\n  includes: L.Mixin.Events,\n\n  initialize: function (options) {\n    var self = this\n    this.options = options\n    this.provider = options.provider\n    this._map = options.map\n    this._tiles = {}\n    this._tilesLoading = {}\n    this._tilesToLoad = 0\n    this.lastDrag = 0\n    this._map.on('moveend', this._reloadTiles, this)\n    // this._map.on('drag', function () {\n    //   if ((this.dragging._lastTime - self.lastDrag) > 500) {\n    //     self.lastDrag = this.dragging._lastTime\n    //     self._reloadTiles()\n    //   }\n    // })\n  },\n\n  loadTiles: function () {\n    this._reloadTiles()\n  },\n\n  _reloadTiles: function () {\n    if (!this._map) {\n      return\n    }\n\n    var bounds = this._map.getPixelBounds()\n    var zoom = this._map.getZoom()\n    var tileSize = this.options.tileSize\n\n    if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n      return\n    }\n\n    var nwTilePoint = new L.Point(\n      Math.floor(bounds.min.x / tileSize),\n      Math.floor(bounds.min.y / tileSize)\n    )\n    var seTilePoint = new L.Point(\n      Math.floor(bounds.max.x / tileSize),\n      Math.floor(bounds.max.y / tileSize)\n    )\n    var tileBounds = new L.Bounds(nwTilePoint, seTilePoint)\n\n    this._addTilesFromCenterOut(tileBounds)\n    this._removeOtherTiles(tileBounds)\n  },\n\n  _addTilesFromCenterOut: function (bounds) {\n    var queue = []\n    var center = bounds.getCenter()\n    var zoom = this._map.getZoom()\n\n    var j, i, point\n\n    for (j = bounds.min.y; j <= bounds.max.y; j++) {\n      for (i = bounds.min.x; i <= bounds.max.x; i++) {\n        point = new L.Point(i, j)\n        point.zoom = zoom\n        if (this._tileShouldBeLoaded(point)) {\n          queue.push(point)\n        }\n      }\n    }\n\n    var tilesToLoad = queue.length\n\n    if (tilesToLoad === 0) {\n      return\n    }\n\n    // load tiles in order of their distance to center\n    queue.sort(function (a, b) {\n      return a.distanceTo(center) - b.distanceTo(center)\n    })\n\n    this._tilesToLoad += tilesToLoad\n\n    for (i = 0; i < tilesToLoad; i++) {\n      this._loadTile(queue[i])\n    }\n    this.fire('tilesLoading')\n  },\n\n  _loadTile: function (tilePoint) {\n    var tileKey = this._tileKey(tilePoint)\n    this._tilesLoading[tileKey] = tilePoint\n    this.provider.getTile(tilePoint, function (tilePoint, geometry) {\n      if (tilePoint.zoom !== this._map.getZoom()) return\n      this._tiles[tileKey] = true\n      delete this._tilesLoading[tileKey]\n      this._tilesToLoad--\n      this.fire('tileAdded', {tilePoint: tilePoint, geometry: geometry})\n      if (this.provider.allTilesLoaded()) {\n        this.fire('tilesLoaded')\n      }\n    }.bind(this))\n  },\n\n  _removeOtherTiles: function (bounds) {\n    var kArr, x, y, z, key\n    var zoom = this._map.getZoom()\n\n    for (key in this._tiles) {\n      if (this._tiles.hasOwnProperty(key)) {\n        kArr = key.split(':')\n        x = parseInt(kArr[0], 10)\n        y = parseInt(kArr[1], 10)\n        z = parseInt(kArr[2], 10)\n\n        // remove tile if it's out of bounds\n        if (zoom !== z || x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {\n          this._removeTile(key)\n        }\n      }\n    }\n  },\n\n  unbindAndClearTiles: function () {\n    this._map.off('moveend', this._reloadTiles, this)\n    this._map.off('zoomstart', this._invalidateProviderCache, this)\n    this._removeTiles()\n  },\n\n  _removeTiles: function (bounds) {\n    for (var key in this._tiles) {\n      this._removeTile(key)\n    }\n  },\n\n  _removeTile: function (key) {\n    this.fire('tileRemoved', { tileKey: key })\n    delete this._tiles[key]\n    delete this._tilesLoading[key]\n  },\n\n  _tileShouldBeLoaded: function (tilePoint) {\n    var k = this._tileKey(tilePoint)\n    return !(k in this._tiles) && !(k in this._tilesLoading)\n  },\n\n  _tileKey: function (tilePoint) {\n    return tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n  }\n})\n",
    "var L = window.L\nvar cartodb = require('../')\n\nmodule.exports = {\n  viz: function (url, map, done) {\n    cartodb.d3.net.jsonp(url + '?callback=vizjson', function (data) {\n      map.setView(JSON.parse(data.center), data.zoom)\n      // get base layer, not render anything in case of non ZXY layers\n      var baseLayer = data.layers[0]\n      if (baseLayer.options.urlTemplate) {\n        map.addLayer(new L.TileLayer(baseLayer.options.urlTemplate, {\n          subdomains: baseLayer.options.subdomains || 'abcd'\n        }))\n      } else if (baseLayer.options.color) {\n        document.getElementById('map').style['background-color'] = baseLayer.options.color\n      }\n      // assume first layer is the one with cartodb data\n      var cartodbLayer = data.layers[1]\n      if (cartodbLayer.type === 'layergroup') {\n        var layers = cartodbLayer.options.layer_definition.layers.map(function (layer) {\n          return {\n            // fix the \\n in sql\n            sql: layer.options.sql.replace(/\\n/g, ' '),\n            cartocss: layer.options.cartocss\n          }\n        })\n\n        var lyr = new L.CartoDBd3Layer({\n          user: cartodbLayer.options.user_name,\n          layers: layers,\n          styles: layers.map(function(l) { return l.cartocss })\n        }).addTo(map)\n\n        done(null, lyr, layers)\n      } else {\n        done(new Error('named maps not supported'))\n      }\n    })\n  }\n}\n",
    "!function() {\n  var d3 = {\n    version: \"3.5.8\"\n  };\n  var d3_arraySlice = [].slice, d3_array = function(list) {\n    return d3_arraySlice.call(list);\n  };\n  var d3_document = this.document;\n  function d3_documentElement(node) {\n    return node && (node.ownerDocument || node.document || node).documentElement;\n  }\n  function d3_window(node) {\n    return node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView);\n  }\n  if (d3_document) {\n    try {\n      d3_array(d3_document.documentElement.childNodes)[0].nodeType;\n    } catch (e) {\n      d3_array = function(list) {\n        var i = list.length, array = new Array(i);\n        while (i--) array[i] = list[i];\n        return array;\n      };\n    }\n  }\n  if (!Date.now) Date.now = function() {\n    return +new Date();\n  };\n  if (d3_document) {\n    try {\n      d3_document.createElement(\"DIV\").style.setProperty(\"opacity\", 0, \"\");\n    } catch (error) {\n      var d3_element_prototype = this.Element.prototype, d3_element_setAttribute = d3_element_prototype.setAttribute, d3_element_setAttributeNS = d3_element_prototype.setAttributeNS, d3_style_prototype = this.CSSStyleDeclaration.prototype, d3_style_setProperty = d3_style_prototype.setProperty;\n      d3_element_prototype.setAttribute = function(name, value) {\n        d3_element_setAttribute.call(this, name, value + \"\");\n      };\n      d3_element_prototype.setAttributeNS = function(space, local, value) {\n        d3_element_setAttributeNS.call(this, space, local, value + \"\");\n      };\n      d3_style_prototype.setProperty = function(name, value, priority) {\n        d3_style_setProperty.call(this, name, value + \"\", priority);\n      };\n    }\n  }\n  d3.ascending = d3_ascending;\n  function d3_ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n  d3.descending = function(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  };\n  d3.min = function(array, f) {\n    var i = -1, n = array.length, a, b;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && a > b) a = b;\n    }\n    return a;\n  };\n  d3.max = function(array, f) {\n    var i = -1, n = array.length, a, b;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b > a) a = b;\n    }\n    return a;\n  };\n  d3.extent = function(array, f) {\n    var i = -1, n = array.length, a, b, c;\n    if (arguments.length === 1) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) {\n        a = c = b;\n        break;\n      }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    } else {\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null && b >= b) {\n        a = c = b;\n        break;\n      }\n      while (++i < n) if ((b = f.call(array, array[i], i)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n    return [ a, c ];\n  };\n  function d3_number(x) {\n    return x === null ? NaN : +x;\n  }\n  function d3_numeric(x) {\n    return !isNaN(x);\n  }\n  d3.sum = function(array, f) {\n    var s = 0, n = array.length, a, i = -1;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = +array[i])) s += a;\n    } else {\n      while (++i < n) if (d3_numeric(a = +f.call(array, array[i], i))) s += a;\n    }\n    return s;\n  };\n  d3.mean = function(array, f) {\n    var s = 0, n = array.length, a, i = -1, j = n;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) s += a; else --j;\n    } else {\n      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) s += a; else --j;\n    }\n    if (j) return s / j;\n  };\n  d3.quantile = function(values, p) {\n    var H = (values.length - 1) * p + 1, h = Math.floor(H), v = +values[h - 1], e = H - h;\n    return e ? v + e * (values[h] - v) : v;\n  };\n  d3.median = function(array, f) {\n    var numbers = [], n = array.length, a, i = -1;\n    if (arguments.length === 1) {\n      while (++i < n) if (d3_numeric(a = d3_number(array[i]))) numbers.push(a);\n    } else {\n      while (++i < n) if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) numbers.push(a);\n    }\n    if (numbers.length) return d3.quantile(numbers.sort(d3_ascending), .5);\n  };\n  d3.variance = function(array, f) {\n    var n = array.length, m = 0, a, d, s = 0, i = -1, j = 0;\n    if (arguments.length === 1) {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    } else {\n      while (++i < n) {\n        if (d3_numeric(a = d3_number(f.call(array, array[i], i)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n    if (j > 1) return s / (j - 1);\n  };\n  d3.deviation = function() {\n    var v = d3.variance.apply(this, arguments);\n    return v ? Math.sqrt(v) : v;\n  };\n  function d3_bisector(compare) {\n    return {\n      left: function(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1; else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (arguments.length < 3) lo = 0;\n        if (arguments.length < 4) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid; else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n  var d3_bisect = d3_bisector(d3_ascending);\n  d3.bisectLeft = d3_bisect.left;\n  d3.bisect = d3.bisectRight = d3_bisect.right;\n  d3.bisector = function(f) {\n    return d3_bisector(f.length === 1 ? function(d, x) {\n      return d3_ascending(f(d), x);\n    } : f);\n  };\n  d3.shuffle = function(array, i0, i1) {\n    if ((m = arguments.length) < 3) {\n      i1 = array.length;\n      if (m < 2) i0 = 0;\n    }\n    var m = i1 - i0, t, i;\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0], array[m + i0] = array[i + i0], array[i + i0] = t;\n    }\n    return array;\n  };\n  d3.permute = function(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  };\n  d3.pairs = function(array) {\n    var i = 0, n = array.length - 1, p0, p1 = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [ p0 = p1, p1 = array[++i] ];\n    return pairs;\n  };\n  d3.zip = function() {\n    if (!(n = arguments.length)) return [];\n    for (var i = -1, m = d3.min(arguments, d3_zipLength), zips = new Array(m); ++i < m; ) {\n      for (var j = -1, n, zip = zips[i] = new Array(n); ++j < n; ) {\n        zip[j] = arguments[j][i];\n      }\n    }\n    return zips;\n  };\n  function d3_zipLength(d) {\n    return d.length;\n  }\n  d3.transpose = function(matrix) {\n    return d3.zip.apply(d3, matrix);\n  };\n  d3.keys = function(map) {\n    var keys = [];\n    for (var key in map) keys.push(key);\n    return keys;\n  };\n  d3.values = function(map) {\n    var values = [];\n    for (var key in map) values.push(map[key]);\n    return values;\n  };\n  d3.entries = function(map) {\n    var entries = [];\n    for (var key in map) entries.push({\n      key: key,\n      value: map[key]\n    });\n    return entries;\n  };\n  d3.merge = function(arrays) {\n    var n = arrays.length, m, i = -1, j = 0, merged, array;\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n    return merged;\n  };\n  var abs = Math.abs;\n  d3.range = function(start, stop, step) {\n    if (arguments.length < 3) {\n      step = 1;\n      if (arguments.length < 2) {\n        stop = start;\n        start = 0;\n      }\n    }\n    if ((stop - start) / step === Infinity) throw new Error(\"infinite range\");\n    var range = [], k = d3_range_integerScale(abs(step)), i = -1, j;\n    start *= k, stop *= k, step *= k;\n    if (step < 0) while ((j = start + step * ++i) > stop) range.push(j / k); else while ((j = start + step * ++i) < stop) range.push(j / k);\n    return range;\n  };\n  function d3_range_integerScale(x) {\n    var k = 1;\n    while (x * k % 1) k *= 10;\n    return k;\n  }\n  function d3_class(ctor, properties) {\n    for (var key in properties) {\n      Object.defineProperty(ctor.prototype, key, {\n        value: properties[key],\n        enumerable: false\n      });\n    }\n  }\n  d3.map = function(object, f) {\n    var map = new d3_Map();\n    if (object instanceof d3_Map) {\n      object.forEach(function(key, value) {\n        map.set(key, value);\n      });\n    } else if (Array.isArray(object)) {\n      var i = -1, n = object.length, o;\n      if (arguments.length === 1) while (++i < n) map.set(i, object[i]); else while (++i < n) map.set(f.call(object, o = object[i], i), o);\n    } else {\n      for (var key in object) map.set(key, object[key]);\n    }\n    return map;\n  };\n  function d3_Map() {\n    this._ = Object.create(null);\n  }\n  var d3_map_proto = \"__proto__\", d3_map_zero = \"\\x00\";\n  d3_class(d3_Map, {\n    has: d3_map_has,\n    get: function(key) {\n      return this._[d3_map_escape(key)];\n    },\n    set: function(key, value) {\n      return this._[d3_map_escape(key)] = value;\n    },\n    remove: d3_map_remove,\n    keys: d3_map_keys,\n    values: function() {\n      var values = [];\n      for (var key in this._) values.push(this._[key]);\n      return values;\n    },\n    entries: function() {\n      var entries = [];\n      for (var key in this._) entries.push({\n        key: d3_map_unescape(key),\n        value: this._[key]\n      });\n      return entries;\n    },\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function(f) {\n      for (var key in this._) f.call(this, d3_map_unescape(key), this._[key]);\n    }\n  });\n  function d3_map_escape(key) {\n    return (key += \"\") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key;\n  }\n  function d3_map_unescape(key) {\n    return (key += \"\")[0] === d3_map_zero ? key.slice(1) : key;\n  }\n  function d3_map_has(key) {\n    return d3_map_escape(key) in this._;\n  }\n  function d3_map_remove(key) {\n    return (key = d3_map_escape(key)) in this._ && delete this._[key];\n  }\n  function d3_map_keys() {\n    var keys = [];\n    for (var key in this._) keys.push(d3_map_unescape(key));\n    return keys;\n  }\n  function d3_map_size() {\n    var size = 0;\n    for (var key in this._) ++size;\n    return size;\n  }\n  function d3_map_empty() {\n    for (var key in this._) return false;\n    return true;\n  }\n  d3.nest = function() {\n    var nest = {}, keys = [], sortKeys = [], sortValues, rollup;\n    function map(mapType, array, depth) {\n      if (depth >= keys.length) return rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;\n      var i = -1, n = array.length, key = keys[depth++], keyValue, object, setter, valuesByKey = new d3_Map(), values;\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(object = array[i]))) {\n          values.push(object);\n        } else {\n          valuesByKey.set(keyValue, [ object ]);\n        }\n      }\n      if (mapType) {\n        object = mapType();\n        setter = function(keyValue, values) {\n          object.set(keyValue, map(mapType, values, depth));\n        };\n      } else {\n        object = {};\n        setter = function(keyValue, values) {\n          object[keyValue] = map(mapType, values, depth);\n        };\n      }\n      valuesByKey.forEach(setter);\n      return object;\n    }\n    function entries(map, depth) {\n      if (depth >= keys.length) return map;\n      var array = [], sortKey = sortKeys[depth++];\n      map.forEach(function(key, keyMap) {\n        array.push({\n          key: key,\n          values: entries(keyMap, depth)\n        });\n      });\n      return sortKey ? array.sort(function(a, b) {\n        return sortKey(a.key, b.key);\n      }) : array;\n    }\n    nest.map = function(array, mapType) {\n      return map(mapType, array, 0);\n    };\n    nest.entries = function(array) {\n      return entries(map(d3.map, array, 0), 0);\n    };\n    nest.key = function(d) {\n      keys.push(d);\n      return nest;\n    };\n    nest.sortKeys = function(order) {\n      sortKeys[keys.length - 1] = order;\n      return nest;\n    };\n    nest.sortValues = function(order) {\n      sortValues = order;\n      return nest;\n    };\n    nest.rollup = function(f) {\n      rollup = f;\n      return nest;\n    };\n    return nest;\n  };\n  d3.set = function(array) {\n    var set = new d3_Set();\n    if (array) for (var i = 0, n = array.length; i < n; ++i) set.add(array[i]);\n    return set;\n  };\n  function d3_Set() {\n    this._ = Object.create(null);\n  }\n  d3_class(d3_Set, {\n    has: d3_map_has,\n    add: function(key) {\n      this._[d3_map_escape(key += \"\")] = true;\n      return key;\n    },\n    remove: d3_map_remove,\n    values: d3_map_keys,\n    size: d3_map_size,\n    empty: d3_map_empty,\n    forEach: function(f) {\n      for (var key in this._) f.call(this, d3_map_unescape(key));\n    }\n  });\n  d3.behavior = {};\n  function d3_identity(d) {\n    return d;\n  }\n  d3.rebind = function(target, source) {\n    var i = 1, n = arguments.length, method;\n    while (++i < n) target[method = arguments[i]] = d3_rebind(target, source, source[method]);\n    return target;\n  };\n  function d3_rebind(target, source, method) {\n    return function() {\n      var value = method.apply(source, arguments);\n      return value === source ? target : value;\n    };\n  }\n  function d3_vendorSymbol(object, name) {\n    if (name in object) return name;\n    name = name.charAt(0).toUpperCase() + name.slice(1);\n    for (var i = 0, n = d3_vendorPrefixes.length; i < n; ++i) {\n      var prefixName = d3_vendorPrefixes[i] + name;\n      if (prefixName in object) return prefixName;\n    }\n  }\n  var d3_vendorPrefixes = [ \"webkit\", \"ms\", \"moz\", \"Moz\", \"o\", \"O\" ];\n  function d3_noop() {}\n  d3.dispatch = function() {\n    var dispatch = new d3_dispatch(), i = -1, n = arguments.length;\n    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    return dispatch;\n  };\n  function d3_dispatch() {}\n  d3_dispatch.prototype.on = function(type, listener) {\n    var i = type.indexOf(\".\"), name = \"\";\n    if (i >= 0) {\n      name = type.slice(i + 1);\n      type = type.slice(0, i);\n    }\n    if (type) return arguments.length < 2 ? this[type].on(name) : this[type].on(name, listener);\n    if (arguments.length === 2) {\n      if (listener == null) for (type in this) {\n        if (this.hasOwnProperty(type)) this[type].on(name, null);\n      }\n      return this;\n    }\n  };\n  function d3_dispatch_event(dispatch) {\n    var listeners = [], listenerByName = new d3_Map();\n    function event() {\n      var z = listeners, i = -1, n = z.length, l;\n      while (++i < n) if (l = z[i].on) l.apply(this, arguments);\n      return dispatch;\n    }\n    event.on = function(name, listener) {\n      var l = listenerByName.get(name), i;\n      if (arguments.length < 2) return l && l.on;\n      if (l) {\n        l.on = null;\n        listeners = listeners.slice(0, i = listeners.indexOf(l)).concat(listeners.slice(i + 1));\n        listenerByName.remove(name);\n      }\n      if (listener) listeners.push(listenerByName.set(name, {\n        on: listener\n      }));\n      return dispatch;\n    };\n    return event;\n  }\n  d3.event = null;\n  function d3_eventPreventDefault() {\n    d3.event.preventDefault();\n  }\n  function d3_eventSource() {\n    var e = d3.event, s;\n    while (s = e.sourceEvent) e = s;\n    return e;\n  }\n  function d3_eventDispatch(target) {\n    var dispatch = new d3_dispatch(), i = 0, n = arguments.length;\n    while (++i < n) dispatch[arguments[i]] = d3_dispatch_event(dispatch);\n    dispatch.of = function(thiz, argumentz) {\n      return function(e1) {\n        try {\n          var e0 = e1.sourceEvent = d3.event;\n          e1.target = target;\n          d3.event = e1;\n          dispatch[e1.type].apply(thiz, argumentz);\n        } finally {\n          d3.event = e0;\n        }\n      };\n    };\n    return dispatch;\n  }\n  d3.requote = function(s) {\n    return s.replace(d3_requote_re, \"\\\\$&\");\n  };\n  var d3_requote_re = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  var d3_subclass = {}.__proto__ ? function(object, prototype) {\n    object.__proto__ = prototype;\n  } : function(object, prototype) {\n    for (var property in prototype) object[property] = prototype[property];\n  };\n  function d3_selection(groups) {\n    d3_subclass(groups, d3_selectionPrototype);\n    return groups;\n  }\n  var d3_select = function(s, n) {\n    return n.querySelector(s);\n  }, d3_selectAll = function(s, n) {\n    return n.querySelectorAll(s);\n  }, d3_selectMatches = function(n, s) {\n    var d3_selectMatcher = n.matches || n[d3_vendorSymbol(n, \"matchesSelector\")];\n    d3_selectMatches = function(n, s) {\n      return d3_selectMatcher.call(n, s);\n    };\n    return d3_selectMatches(n, s);\n  };\n  if (typeof Sizzle === \"function\") {\n    d3_select = function(s, n) {\n      return Sizzle(s, n)[0] || null;\n    };\n    d3_selectAll = Sizzle;\n    d3_selectMatches = Sizzle.matchesSelector;\n  }\n  d3.selection = function() {\n    return d3.select(d3_document.documentElement);\n  };\n  var d3_selectionPrototype = d3.selection.prototype = [];\n  d3_selectionPrototype.select = function(selector) {\n    var subgroups = [], subgroup, subnode, group, node;\n    selector = d3_selection_selector(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n      for (var i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroup.push(subnode = selector.call(node, node.__data__, i, j));\n          if (subnode && \"__data__\" in node) subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_selector(selector) {\n    return typeof selector === \"function\" ? selector : function() {\n      return d3_select(selector, this);\n    };\n  }\n  d3_selectionPrototype.selectAll = function(selector) {\n    var subgroups = [], subgroup, node;\n    selector = d3_selection_selectorAll(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i, j)));\n          subgroup.parentNode = node;\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_selectorAll(selector) {\n    return typeof selector === \"function\" ? selector : function() {\n      return d3_selectAll(selector, this);\n    };\n  }\n  var d3_nsPrefix = {\n    svg: \"http://www.w3.org/2000/svg\",\n    xhtml: \"http://www.w3.org/1999/xhtml\",\n    xlink: \"http://www.w3.org/1999/xlink\",\n    xml: \"http://www.w3.org/XML/1998/namespace\",\n    xmlns: \"http://www.w3.org/2000/xmlns/\"\n  };\n  d3.ns = {\n    prefix: d3_nsPrefix,\n    qualify: function(name) {\n      var i = name.indexOf(\":\"), prefix = name;\n      if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n      return d3_nsPrefix.hasOwnProperty(prefix) ? {\n        space: d3_nsPrefix[prefix],\n        local: name\n      } : name;\n    }\n  };\n  d3_selectionPrototype.attr = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node();\n        name = d3.ns.qualify(name);\n        return name.local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name);\n      }\n      for (value in name) this.each(d3_selection_attr(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_attr(name, value));\n  };\n  function d3_selection_attr(name, value) {\n    name = d3.ns.qualify(name);\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n    function attrConstant() {\n      this.setAttribute(name, value);\n    }\n    function attrConstantNS() {\n      this.setAttributeNS(name.space, name.local, value);\n    }\n    function attrFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttribute(name); else this.setAttribute(name, x);\n    }\n    function attrFunctionNS() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.removeAttributeNS(name.space, name.local); else this.setAttributeNS(name.space, name.local, x);\n    }\n    return value == null ? name.local ? attrNullNS : attrNull : typeof value === \"function\" ? name.local ? attrFunctionNS : attrFunction : name.local ? attrConstantNS : attrConstant;\n  }\n  function d3_collapse(s) {\n    return s.trim().replace(/\\s+/g, \" \");\n  }\n  d3_selectionPrototype.classed = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") {\n        var node = this.node(), n = (name = d3_selection_classes(name)).length, i = -1;\n        if (value = node.classList) {\n          while (++i < n) if (!value.contains(name[i])) return false;\n        } else {\n          value = node.getAttribute(\"class\");\n          while (++i < n) if (!d3_selection_classedRe(name[i]).test(value)) return false;\n        }\n        return true;\n      }\n      for (value in name) this.each(d3_selection_classed(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_classed(name, value));\n  };\n  function d3_selection_classedRe(name) {\n    return new RegExp(\"(?:^|\\\\s+)\" + d3.requote(name) + \"(?:\\\\s+|$)\", \"g\");\n  }\n  function d3_selection_classes(name) {\n    return (name + \"\").trim().split(/^|\\s+/);\n  }\n  function d3_selection_classed(name, value) {\n    name = d3_selection_classes(name).map(d3_selection_classedName);\n    var n = name.length;\n    function classedConstant() {\n      var i = -1;\n      while (++i < n) name[i](this, value);\n    }\n    function classedFunction() {\n      var i = -1, x = value.apply(this, arguments);\n      while (++i < n) name[i](this, x);\n    }\n    return typeof value === \"function\" ? classedFunction : classedConstant;\n  }\n  function d3_selection_classedName(name) {\n    var re = d3_selection_classedRe(name);\n    return function(node, value) {\n      if (c = node.classList) return value ? c.add(name) : c.remove(name);\n      var c = node.getAttribute(\"class\") || \"\";\n      if (value) {\n        re.lastIndex = 0;\n        if (!re.test(c)) node.setAttribute(\"class\", d3_collapse(c + \" \" + name));\n      } else {\n        node.setAttribute(\"class\", d3_collapse(c.replace(re, \" \")));\n      }\n    };\n  }\n  d3_selectionPrototype.style = function(name, value, priority) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n        for (priority in name) this.each(d3_selection_style(priority, name[priority], value));\n        return this;\n      }\n      if (n < 2) {\n        var node = this.node();\n        return d3_window(node).getComputedStyle(node, null).getPropertyValue(name);\n      }\n      priority = \"\";\n    }\n    return this.each(d3_selection_style(name, value, priority));\n  };\n  function d3_selection_style(name, value, priority) {\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n    function styleConstant() {\n      this.style.setProperty(name, value, priority);\n    }\n    function styleFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) this.style.removeProperty(name); else this.style.setProperty(name, x, priority);\n    }\n    return value == null ? styleNull : typeof value === \"function\" ? styleFunction : styleConstant;\n  }\n  d3_selectionPrototype.property = function(name, value) {\n    if (arguments.length < 2) {\n      if (typeof name === \"string\") return this.node()[name];\n      for (value in name) this.each(d3_selection_property(value, name[value]));\n      return this;\n    }\n    return this.each(d3_selection_property(name, value));\n  };\n  function d3_selection_property(name, value) {\n    function propertyNull() {\n      delete this[name];\n    }\n    function propertyConstant() {\n      this[name] = value;\n    }\n    function propertyFunction() {\n      var x = value.apply(this, arguments);\n      if (x == null) delete this[name]; else this[name] = x;\n    }\n    return value == null ? propertyNull : typeof value === \"function\" ? propertyFunction : propertyConstant;\n  }\n  d3_selectionPrototype.text = function(value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function() {\n      var v = value.apply(this, arguments);\n      this.textContent = v == null ? \"\" : v;\n    } : value == null ? function() {\n      this.textContent = \"\";\n    } : function() {\n      this.textContent = value;\n    }) : this.node().textContent;\n  };\n  d3_selectionPrototype.html = function(value) {\n    return arguments.length ? this.each(typeof value === \"function\" ? function() {\n      var v = value.apply(this, arguments);\n      this.innerHTML = v == null ? \"\" : v;\n    } : value == null ? function() {\n      this.innerHTML = \"\";\n    } : function() {\n      this.innerHTML = value;\n    }) : this.node().innerHTML;\n  };\n  d3_selectionPrototype.append = function(name) {\n    name = d3_selection_creator(name);\n    return this.select(function() {\n      return this.appendChild(name.apply(this, arguments));\n    });\n  };\n  function d3_selection_creator(name) {\n    function create() {\n      var document = this.ownerDocument, namespace = this.namespaceURI;\n      return namespace ? document.createElementNS(namespace, name) : document.createElement(name);\n    }\n    function createNS() {\n      return this.ownerDocument.createElementNS(name.space, name.local);\n    }\n    return typeof name === \"function\" ? name : (name = d3.ns.qualify(name)).local ? createNS : create;\n  }\n  d3_selectionPrototype.insert = function(name, before) {\n    name = d3_selection_creator(name);\n    before = d3_selection_selector(before);\n    return this.select(function() {\n      return this.insertBefore(name.apply(this, arguments), before.apply(this, arguments) || null);\n    });\n  };\n  d3_selectionPrototype.remove = function() {\n    return this.each(d3_selectionRemove);\n  };\n  function d3_selectionRemove() {\n    var parent = this.parentNode;\n    if (parent) parent.removeChild(this);\n  }\n  d3_selectionPrototype.data = function(value, key) {\n    var i = -1, n = this.length, group, node;\n    if (!arguments.length) {\n      value = new Array(n = (group = this[0]).length);\n      while (++i < n) {\n        if (node = group[i]) {\n          value[i] = node.__data__;\n        }\n      }\n      return value;\n    }\n    function bind(group, groupData) {\n      var i, n = group.length, m = groupData.length, n0 = Math.min(n, m), updateNodes = new Array(m), enterNodes = new Array(m), exitNodes = new Array(n), node, nodeData;\n      if (key) {\n        var nodeByKeyValue = new d3_Map(), keyValues = new Array(n), keyValue;\n        for (i = -1; ++i < n; ) {\n          if (node = group[i]) {\n            if (nodeByKeyValue.has(keyValue = key.call(node, node.__data__, i))) {\n              exitNodes[i] = node;\n            } else {\n              nodeByKeyValue.set(keyValue, node);\n            }\n            keyValues[i] = keyValue;\n          }\n        }\n        for (i = -1; ++i < m; ) {\n          if (!(node = nodeByKeyValue.get(keyValue = key.call(groupData, nodeData = groupData[i], i)))) {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          } else if (node !== true) {\n            updateNodes[i] = node;\n            node.__data__ = nodeData;\n          }\n          nodeByKeyValue.set(keyValue, true);\n        }\n        for (i = -1; ++i < n; ) {\n          if (i in keyValues && nodeByKeyValue.get(keyValues[i]) !== true) {\n            exitNodes[i] = group[i];\n          }\n        }\n      } else {\n        for (i = -1; ++i < n0; ) {\n          node = group[i];\n          nodeData = groupData[i];\n          if (node) {\n            node.__data__ = nodeData;\n            updateNodes[i] = node;\n          } else {\n            enterNodes[i] = d3_selection_dataNode(nodeData);\n          }\n        }\n        for (;i < m; ++i) {\n          enterNodes[i] = d3_selection_dataNode(groupData[i]);\n        }\n        for (;i < n; ++i) {\n          exitNodes[i] = group[i];\n        }\n      }\n      enterNodes.update = updateNodes;\n      enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode;\n      enter.push(enterNodes);\n      update.push(updateNodes);\n      exit.push(exitNodes);\n    }\n    var enter = d3_selection_enter([]), update = d3_selection([]), exit = d3_selection([]);\n    if (typeof value === \"function\") {\n      while (++i < n) {\n        bind(group = this[i], value.call(group, group.parentNode.__data__, i));\n      }\n    } else {\n      while (++i < n) {\n        bind(group = this[i], value);\n      }\n    }\n    update.enter = function() {\n      return enter;\n    };\n    update.exit = function() {\n      return exit;\n    };\n    return update;\n  };\n  function d3_selection_dataNode(data) {\n    return {\n      __data__: data\n    };\n  }\n  d3_selectionPrototype.datum = function(value) {\n    return arguments.length ? this.property(\"__data__\", value) : this.property(\"__data__\");\n  };\n  d3_selectionPrototype.filter = function(filter) {\n    var subgroups = [], subgroup, group, node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = (group = this[j]).parentNode;\n      for (var i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  function d3_selection_filter(selector) {\n    return function() {\n      return d3_selectMatches(this, selector);\n    };\n  }\n  d3_selectionPrototype.order = function() {\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = group.length - 1, next = group[i], node; --i >= 0; ) {\n        if (node = group[i]) {\n          if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n          next = node;\n        }\n      }\n    }\n    return this;\n  };\n  d3_selectionPrototype.sort = function(comparator) {\n    comparator = d3_selection_sortComparator.apply(this, arguments);\n    for (var j = -1, m = this.length; ++j < m; ) this[j].sort(comparator);\n    return this.order();\n  };\n  function d3_selection_sortComparator(comparator) {\n    if (!arguments.length) comparator = d3_ascending;\n    return function(a, b) {\n      return a && b ? comparator(a.__data__, b.__data__) : !a - !b;\n    };\n  }\n  d3_selectionPrototype.each = function(callback) {\n    return d3_selection_each(this, function(node, i, j) {\n      callback.call(node, node.__data__, i, j);\n    });\n  };\n  function d3_selection_each(groups, callback) {\n    for (var j = 0, m = groups.length; j < m; j++) {\n      for (var group = groups[j], i = 0, n = group.length, node; i < n; i++) {\n        if (node = group[i]) callback(node, i, j);\n      }\n    }\n    return groups;\n  }\n  d3_selectionPrototype.call = function(callback) {\n    var args = d3_array(arguments);\n    callback.apply(args[0] = this, args);\n    return this;\n  };\n  d3_selectionPrototype.empty = function() {\n    return !this.node();\n  };\n  d3_selectionPrototype.node = function() {\n    for (var j = 0, m = this.length; j < m; j++) {\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        var node = group[i];\n        if (node) return node;\n      }\n    }\n    return null;\n  };\n  d3_selectionPrototype.size = function() {\n    var n = 0;\n    d3_selection_each(this, function() {\n      ++n;\n    });\n    return n;\n  };\n  function d3_selection_enter(selection) {\n    d3_subclass(selection, d3_selection_enterPrototype);\n    return selection;\n  }\n  var d3_selection_enterPrototype = [];\n  d3.selection.enter = d3_selection_enter;\n  d3.selection.enter.prototype = d3_selection_enterPrototype;\n  d3_selection_enterPrototype.append = d3_selectionPrototype.append;\n  d3_selection_enterPrototype.empty = d3_selectionPrototype.empty;\n  d3_selection_enterPrototype.node = d3_selectionPrototype.node;\n  d3_selection_enterPrototype.call = d3_selectionPrototype.call;\n  d3_selection_enterPrototype.size = d3_selectionPrototype.size;\n  d3_selection_enterPrototype.select = function(selector) {\n    var subgroups = [], subgroup, subnode, upgroup, group, node;\n    for (var j = -1, m = this.length; ++j < m; ) {\n      upgroup = (group = this[j]).update;\n      subgroups.push(subgroup = []);\n      subgroup.parentNode = group.parentNode;\n      for (var i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i, j));\n          subnode.__data__ = node.__data__;\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_selection(subgroups);\n  };\n  d3_selection_enterPrototype.insert = function(name, before) {\n    if (arguments.length < 2) before = d3_selection_enterInsertBefore(this);\n    return d3_selectionPrototype.insert.call(this, name, before);\n  };\n  function d3_selection_enterInsertBefore(enter) {\n    var i0, j0;\n    return function(d, i, j) {\n      var group = enter[j].update, n = group.length, node;\n      if (j != j0) j0 = j, i0 = 0;\n      if (i >= i0) i0 = i + 1;\n      while (!(node = group[i0]) && ++i0 < n) ;\n      return node;\n    };\n  }\n  d3.select = function(node) {\n    var group;\n    if (typeof node === \"string\") {\n      group = [ d3_select(node, d3_document) ];\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = [ node ];\n      group.parentNode = d3_documentElement(node);\n    }\n    return d3_selection([ group ]);\n  };\n  d3.selectAll = function(nodes) {\n    var group;\n    if (typeof nodes === \"string\") {\n      group = d3_array(d3_selectAll(nodes, d3_document));\n      group.parentNode = d3_document.documentElement;\n    } else {\n      group = d3_array(nodes);\n      group.parentNode = null;\n    }\n    return d3_selection([ group ]);\n  };\n  d3_selectionPrototype.on = function(type, listener, capture) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof type !== \"string\") {\n        if (n < 2) listener = false;\n        for (capture in type) this.each(d3_selection_on(capture, type[capture], listener));\n        return this;\n      }\n      if (n < 2) return (n = this.node()[\"__on\" + type]) && n._;\n      capture = false;\n    }\n    return this.each(d3_selection_on(type, listener, capture));\n  };\n  function d3_selection_on(type, listener, capture) {\n    var name = \"__on\" + type, i = type.indexOf(\".\"), wrap = d3_selection_onListener;\n    if (i > 0) type = type.slice(0, i);\n    var filter = d3_selection_onFilters.get(type);\n    if (filter) type = filter, wrap = d3_selection_onFilter;\n    function onRemove() {\n      var l = this[name];\n      if (l) {\n        this.removeEventListener(type, l, l.$);\n        delete this[name];\n      }\n    }\n    function onAdd() {\n      var l = wrap(listener, d3_array(arguments));\n      onRemove.call(this);\n      this.addEventListener(type, this[name] = l, l.$ = capture);\n      l._ = listener;\n    }\n    function removeAll() {\n      var re = new RegExp(\"^__on([^.]+)\" + d3.requote(type) + \"$\"), match;\n      for (var name in this) {\n        if (match = name.match(re)) {\n          var l = this[name];\n          this.removeEventListener(match[1], l, l.$);\n          delete this[name];\n        }\n      }\n    }\n    return i ? listener ? onAdd : onRemove : listener ? d3_noop : removeAll;\n  }\n  var d3_selection_onFilters = d3.map({\n    mouseenter: \"mouseover\",\n    mouseleave: \"mouseout\"\n  });\n  if (d3_document) {\n    d3_selection_onFilters.forEach(function(k) {\n      if (\"on\" + k in d3_document) d3_selection_onFilters.remove(k);\n    });\n  }\n  function d3_selection_onListener(listener, argumentz) {\n    return function(e) {\n      var o = d3.event;\n      d3.event = e;\n      argumentz[0] = this.__data__;\n      try {\n        listener.apply(this, argumentz);\n      } finally {\n        d3.event = o;\n      }\n    };\n  }\n  function d3_selection_onFilter(listener, argumentz) {\n    var l = d3_selection_onListener(listener, argumentz);\n    return function(e) {\n      var target = this, related = e.relatedTarget;\n      if (!related || related !== target && !(related.compareDocumentPosition(target) & 8)) {\n        l.call(target, e);\n      }\n    };\n  }\n  var d3_event_dragSelect, d3_event_dragId = 0;\n  function d3_event_dragSuppress(node) {\n    var name = \".dragsuppress-\" + ++d3_event_dragId, click = \"click\" + name, w = d3.select(d3_window(node)).on(\"touchmove\" + name, d3_eventPreventDefault).on(\"dragstart\" + name, d3_eventPreventDefault).on(\"selectstart\" + name, d3_eventPreventDefault);\n    if (d3_event_dragSelect == null) {\n      d3_event_dragSelect = \"onselectstart\" in node ? false : d3_vendorSymbol(node.style, \"userSelect\");\n    }\n    if (d3_event_dragSelect) {\n      var style = d3_documentElement(node).style, select = style[d3_event_dragSelect];\n      style[d3_event_dragSelect] = \"none\";\n    }\n    return function(suppressClick) {\n      w.on(name, null);\n      if (d3_event_dragSelect) style[d3_event_dragSelect] = select;\n      if (suppressClick) {\n        var off = function() {\n          w.on(click, null);\n        };\n        w.on(click, function() {\n          d3_eventPreventDefault();\n          off();\n        }, true);\n        setTimeout(off, 0);\n      }\n    };\n  }\n  d3.mouse = function(container) {\n    return d3_mousePoint(container, d3_eventSource());\n  };\n  var d3_mouse_bug44083 = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;\n  function d3_mousePoint(container, e) {\n    if (e.changedTouches) e = e.changedTouches[0];\n    var svg = container.ownerSVGElement || container;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      if (d3_mouse_bug44083 < 0) {\n        var window = d3_window(container);\n        if (window.scrollX || window.scrollY) {\n          svg = d3.select(\"body\").append(\"svg\").style({\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            margin: 0,\n            padding: 0,\n            border: \"none\"\n          }, \"important\");\n          var ctm = svg[0][0].getScreenCTM();\n          d3_mouse_bug44083 = !(ctm.f || ctm.e);\n          svg.remove();\n        }\n      }\n      if (d3_mouse_bug44083) point.x = e.pageX, point.y = e.pageY; else point.x = e.clientX, \n      point.y = e.clientY;\n      point = point.matrixTransform(container.getScreenCTM().inverse());\n      return [ point.x, point.y ];\n    }\n    var rect = container.getBoundingClientRect();\n    return [ e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop ];\n  }\n  d3.touch = function(container, touches, identifier) {\n    if (arguments.length < 3) identifier = touches, touches = d3_eventSource().changedTouches;\n    if (touches) for (var i = 0, n = touches.length, touch; i < n; ++i) {\n      if ((touch = touches[i]).identifier === identifier) {\n        return d3_mousePoint(container, touch);\n      }\n    }\n  };\n  d3.behavior.drag = function() {\n    var event = d3_eventDispatch(drag, \"drag\", \"dragstart\", \"dragend\"), origin = null, mousedown = dragstart(d3_noop, d3.mouse, d3_window, \"mousemove\", \"mouseup\"), touchstart = dragstart(d3_behavior_dragTouchId, d3.touch, d3_identity, \"touchmove\", \"touchend\");\n    function drag() {\n      this.on(\"mousedown.drag\", mousedown).on(\"touchstart.drag\", touchstart);\n    }\n    function dragstart(id, position, subject, move, end) {\n      return function() {\n        var that = this, target = d3.event.target, parent = that.parentNode, dispatch = event.of(that, arguments), dragged = 0, dragId = id(), dragName = \".drag\" + (dragId == null ? \"\" : \"-\" + dragId), dragOffset, dragSubject = d3.select(subject(target)).on(move + dragName, moved).on(end + dragName, ended), dragRestore = d3_event_dragSuppress(target), position0 = position(parent, dragId);\n        if (origin) {\n          dragOffset = origin.apply(that, arguments);\n          dragOffset = [ dragOffset.x - position0[0], dragOffset.y - position0[1] ];\n        } else {\n          dragOffset = [ 0, 0 ];\n        }\n        dispatch({\n          type: \"dragstart\"\n        });\n        function moved() {\n          var position1 = position(parent, dragId), dx, dy;\n          if (!position1) return;\n          dx = position1[0] - position0[0];\n          dy = position1[1] - position0[1];\n          dragged |= dx | dy;\n          position0 = position1;\n          dispatch({\n            type: \"drag\",\n            x: position1[0] + dragOffset[0],\n            y: position1[1] + dragOffset[1],\n            dx: dx,\n            dy: dy\n          });\n        }\n        function ended() {\n          if (!position(parent, dragId)) return;\n          dragSubject.on(move + dragName, null).on(end + dragName, null);\n          dragRestore(dragged && d3.event.target === target);\n          dispatch({\n            type: \"dragend\"\n          });\n        }\n      };\n    }\n    drag.origin = function(x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return drag;\n    };\n    return d3.rebind(drag, event, \"on\");\n  };\n  function d3_behavior_dragTouchId() {\n    return d3.event.changedTouches[0].identifier;\n  }\n  d3.touches = function(container, touches) {\n    if (arguments.length < 2) touches = d3_eventSource().touches;\n    return touches ? d3_array(touches).map(function(touch) {\n      var point = d3_mousePoint(container, touch);\n      point.identifier = touch.identifier;\n      return point;\n    }) : [];\n  };\n  var ε = 1e-6, ε2 = ε * ε, π = Math.PI, τ = 2 * π, τε = τ - ε, halfπ = π / 2, d3_radians = π / 180, d3_degrees = 180 / π;\n  function d3_sgn(x) {\n    return x > 0 ? 1 : x < 0 ? -1 : 0;\n  }\n  function d3_cross2d(a, b, c) {\n    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0]);\n  }\n  function d3_acos(x) {\n    return x > 1 ? 0 : x < -1 ? π : Math.acos(x);\n  }\n  function d3_asin(x) {\n    return x > 1 ? halfπ : x < -1 ? -halfπ : Math.asin(x);\n  }\n  function d3_sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n  function d3_cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n  function d3_tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n  function d3_haversin(x) {\n    return (x = Math.sin(x / 2)) * x;\n  }\n  var ρ = Math.SQRT2, ρ2 = 2, ρ4 = 4;\n  d3.interpolateZoom = function(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2], dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, i, S;\n    if (d2 < ε2) {\n      S = Math.log(w1 / w0) / ρ;\n      i = function(t) {\n        return [ ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(ρ * t * S) ];\n      };\n    } else {\n      var d1 = Math.sqrt(d2), b0 = (w1 * w1 - w0 * w0 + ρ4 * d2) / (2 * w0 * ρ2 * d1), b1 = (w1 * w1 - w0 * w0 - ρ4 * d2) / (2 * w1 * ρ2 * d1), r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0), r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / ρ;\n      i = function(t) {\n        var s = t * S, coshr0 = d3_cosh(r0), u = w0 / (ρ2 * d1) * (coshr0 * d3_tanh(ρ * s + r0) - d3_sinh(r0));\n        return [ ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh(ρ * s + r0) ];\n      };\n    }\n    i.duration = S * 1e3;\n    return i;\n  };\n  d3.behavior.zoom = function() {\n    var view = {\n      x: 0,\n      y: 0,\n      k: 1\n    }, translate0, center0, center, size = [ 960, 500 ], scaleExtent = d3_behavior_zoomInfinity, duration = 250, zooming = 0, mousedown = \"mousedown.zoom\", mousemove = \"mousemove.zoom\", mouseup = \"mouseup.zoom\", mousewheelTimer, touchstart = \"touchstart.zoom\", touchtime, event = d3_eventDispatch(zoom, \"zoomstart\", \"zoom\", \"zoomend\"), x0, x1, y0, y1;\n    if (!d3_behavior_zoomWheel) {\n      d3_behavior_zoomWheel = \"onwheel\" in d3_document ? (d3_behavior_zoomDelta = function() {\n        return -d3.event.deltaY * (d3.event.deltaMode ? 120 : 1);\n      }, \"wheel\") : \"onmousewheel\" in d3_document ? (d3_behavior_zoomDelta = function() {\n        return d3.event.wheelDelta;\n      }, \"mousewheel\") : (d3_behavior_zoomDelta = function() {\n        return -d3.event.detail;\n      }, \"MozMousePixelScroll\");\n    }\n    function zoom(g) {\n      g.on(mousedown, mousedowned).on(d3_behavior_zoomWheel + \".zoom\", mousewheeled).on(\"dblclick.zoom\", dblclicked).on(touchstart, touchstarted);\n    }\n    zoom.event = function(g) {\n      g.each(function() {\n        var dispatch = event.of(this, arguments), view1 = view;\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.zoom\", function() {\n            view = this.__chart__ || {\n              x: 0,\n              y: 0,\n              k: 1\n            };\n            zoomstarted(dispatch);\n          }).tween(\"zoom:zoom\", function() {\n            var dx = size[0], dy = size[1], cx = center0 ? center0[0] : dx / 2, cy = center0 ? center0[1] : dy / 2, i = d3.interpolateZoom([ (cx - view.x) / view.k, (cy - view.y) / view.k, dx / view.k ], [ (cx - view1.x) / view1.k, (cy - view1.y) / view1.k, dx / view1.k ]);\n            return function(t) {\n              var l = i(t), k = dx / l[2];\n              this.__chart__ = view = {\n                x: cx - l[0] * k,\n                y: cy - l[1] * k,\n                k: k\n              };\n              zoomed(dispatch);\n            };\n          }).each(\"interrupt.zoom\", function() {\n            zoomended(dispatch);\n          }).each(\"end.zoom\", function() {\n            zoomended(dispatch);\n          });\n        } else {\n          this.__chart__ = view;\n          zoomstarted(dispatch);\n          zoomed(dispatch);\n          zoomended(dispatch);\n        }\n      });\n    };\n    zoom.translate = function(_) {\n      if (!arguments.length) return [ view.x, view.y ];\n      view = {\n        x: +_[0],\n        y: +_[1],\n        k: view.k\n      };\n      rescale();\n      return zoom;\n    };\n    zoom.scale = function(_) {\n      if (!arguments.length) return view.k;\n      view = {\n        x: view.x,\n        y: view.y,\n        k: null\n      };\n      scaleTo(+_);\n      rescale();\n      return zoom;\n    };\n    zoom.scaleExtent = function(_) {\n      if (!arguments.length) return scaleExtent;\n      scaleExtent = _ == null ? d3_behavior_zoomInfinity : [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.center = function(_) {\n      if (!arguments.length) return center;\n      center = _ && [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.size = function(_) {\n      if (!arguments.length) return size;\n      size = _ && [ +_[0], +_[1] ];\n      return zoom;\n    };\n    zoom.duration = function(_) {\n      if (!arguments.length) return duration;\n      duration = +_;\n      return zoom;\n    };\n    zoom.x = function(z) {\n      if (!arguments.length) return x1;\n      x1 = z;\n      x0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n    zoom.y = function(z) {\n      if (!arguments.length) return y1;\n      y1 = z;\n      y0 = z.copy();\n      view = {\n        x: 0,\n        y: 0,\n        k: 1\n      };\n      return zoom;\n    };\n    function location(p) {\n      return [ (p[0] - view.x) / view.k, (p[1] - view.y) / view.k ];\n    }\n    function point(l) {\n      return [ l[0] * view.k + view.x, l[1] * view.k + view.y ];\n    }\n    function scaleTo(s) {\n      view.k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], s));\n    }\n    function translateTo(p, l) {\n      l = point(l);\n      view.x += p[0] - l[0];\n      view.y += p[1] - l[1];\n    }\n    function zoomTo(that, p, l, k) {\n      that.__chart__ = {\n        x: view.x,\n        y: view.y,\n        k: view.k\n      };\n      scaleTo(Math.pow(2, k));\n      translateTo(center0 = p, l);\n      that = d3.select(that);\n      if (duration > 0) that = that.transition().duration(duration);\n      that.call(zoom.event);\n    }\n    function rescale() {\n      if (x1) x1.domain(x0.range().map(function(x) {\n        return (x - view.x) / view.k;\n      }).map(x0.invert));\n      if (y1) y1.domain(y0.range().map(function(y) {\n        return (y - view.y) / view.k;\n      }).map(y0.invert));\n    }\n    function zoomstarted(dispatch) {\n      if (!zooming++) dispatch({\n        type: \"zoomstart\"\n      });\n    }\n    function zoomed(dispatch) {\n      rescale();\n      dispatch({\n        type: \"zoom\",\n        scale: view.k,\n        translate: [ view.x, view.y ]\n      });\n    }\n    function zoomended(dispatch) {\n      if (!--zooming) dispatch({\n        type: \"zoomend\"\n      }), center0 = null;\n    }\n    function mousedowned() {\n      var that = this, target = d3.event.target, dispatch = event.of(that, arguments), dragged = 0, subject = d3.select(d3_window(that)).on(mousemove, moved).on(mouseup, ended), location0 = location(d3.mouse(that)), dragRestore = d3_event_dragSuppress(that);\n      d3_selection_interrupt.call(that);\n      zoomstarted(dispatch);\n      function moved() {\n        dragged = 1;\n        translateTo(d3.mouse(that), location0);\n        zoomed(dispatch);\n      }\n      function ended() {\n        subject.on(mousemove, null).on(mouseup, null);\n        dragRestore(dragged && d3.event.target === target);\n        zoomended(dispatch);\n      }\n    }\n    function touchstarted() {\n      var that = this, dispatch = event.of(that, arguments), locations0 = {}, distance0 = 0, scale0, zoomName = \".zoom-\" + d3.event.changedTouches[0].identifier, touchmove = \"touchmove\" + zoomName, touchend = \"touchend\" + zoomName, targets = [], subject = d3.select(that), dragRestore = d3_event_dragSuppress(that);\n      started();\n      zoomstarted(dispatch);\n      subject.on(mousedown, null).on(touchstart, started);\n      function relocate() {\n        var touches = d3.touches(that);\n        scale0 = view.k;\n        touches.forEach(function(t) {\n          if (t.identifier in locations0) locations0[t.identifier] = location(t);\n        });\n        return touches;\n      }\n      function started() {\n        var target = d3.event.target;\n        d3.select(target).on(touchmove, moved).on(touchend, ended);\n        targets.push(target);\n        var changed = d3.event.changedTouches;\n        for (var i = 0, n = changed.length; i < n; ++i) {\n          locations0[changed[i].identifier] = null;\n        }\n        var touches = relocate(), now = Date.now();\n        if (touches.length === 1) {\n          if (now - touchtime < 500) {\n            var p = touches[0];\n            zoomTo(that, p, locations0[p.identifier], Math.floor(Math.log(view.k) / Math.LN2) + 1);\n            d3_eventPreventDefault();\n          }\n          touchtime = now;\n        } else if (touches.length > 1) {\n          var p = touches[0], q = touches[1], dx = p[0] - q[0], dy = p[1] - q[1];\n          distance0 = dx * dx + dy * dy;\n        }\n      }\n      function moved() {\n        var touches = d3.touches(that), p0, l0, p1, l1;\n        d3_selection_interrupt.call(that);\n        for (var i = 0, n = touches.length; i < n; ++i, l1 = null) {\n          p1 = touches[i];\n          if (l1 = locations0[p1.identifier]) {\n            if (l0) break;\n            p0 = p1, l0 = l1;\n          }\n        }\n        if (l1) {\n          var distance1 = (distance1 = p1[0] - p0[0]) * distance1 + (distance1 = p1[1] - p0[1]) * distance1, scale1 = distance0 && Math.sqrt(distance1 / distance0);\n          p0 = [ (p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2 ];\n          l0 = [ (l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2 ];\n          scaleTo(scale1 * scale0);\n        }\n        touchtime = null;\n        translateTo(p0, l0);\n        zoomed(dispatch);\n      }\n      function ended() {\n        if (d3.event.touches.length) {\n          var changed = d3.event.changedTouches;\n          for (var i = 0, n = changed.length; i < n; ++i) {\n            delete locations0[changed[i].identifier];\n          }\n          for (var identifier in locations0) {\n            return void relocate();\n          }\n        }\n        d3.selectAll(targets).on(zoomName, null);\n        subject.on(mousedown, mousedowned).on(touchstart, touchstarted);\n        dragRestore();\n        zoomended(dispatch);\n      }\n    }\n    function mousewheeled() {\n      var dispatch = event.of(this, arguments);\n      if (mousewheelTimer) clearTimeout(mousewheelTimer); else d3_selection_interrupt.call(this), \n      translate0 = location(center0 = center || d3.mouse(this)), zoomstarted(dispatch);\n      mousewheelTimer = setTimeout(function() {\n        mousewheelTimer = null;\n        zoomended(dispatch);\n      }, 50);\n      d3_eventPreventDefault();\n      scaleTo(Math.pow(2, d3_behavior_zoomDelta() * .002) * view.k);\n      translateTo(center0, translate0);\n      zoomed(dispatch);\n    }\n    function dblclicked() {\n      var p = d3.mouse(this), k = Math.log(view.k) / Math.LN2;\n      zoomTo(this, p, location(p), d3.event.shiftKey ? Math.ceil(k) - 1 : Math.floor(k) + 1);\n    }\n    return d3.rebind(zoom, event, \"on\");\n  };\n  var d3_behavior_zoomInfinity = [ 0, Infinity ], d3_behavior_zoomDelta, d3_behavior_zoomWheel;\n  d3.color = d3_color;\n  function d3_color() {}\n  d3_color.prototype.toString = function() {\n    return this.rgb() + \"\";\n  };\n  d3.hsl = d3_hsl;\n  function d3_hsl(h, s, l) {\n    return this instanceof d3_hsl ? void (this.h = +h, this.s = +s, this.l = +l) : arguments.length < 2 ? h instanceof d3_hsl ? new d3_hsl(h.h, h.s, h.l) : d3_rgb_parse(\"\" + h, d3_rgb_hsl, d3_hsl) : new d3_hsl(h, s, l);\n  }\n  var d3_hslPrototype = d3_hsl.prototype = new d3_color();\n  d3_hslPrototype.brighter = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, this.l / k);\n  };\n  d3_hslPrototype.darker = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_hsl(this.h, this.s, k * this.l);\n  };\n  d3_hslPrototype.rgb = function() {\n    return d3_hsl_rgb(this.h, this.s, this.l);\n  };\n  function d3_hsl_rgb(h, s, l) {\n    var m1, m2;\n    h = isNaN(h) ? 0 : (h %= 360) < 0 ? h + 360 : h;\n    s = isNaN(s) ? 0 : s < 0 ? 0 : s > 1 ? 1 : s;\n    l = l < 0 ? 0 : l > 1 ? 1 : l;\n    m2 = l <= .5 ? l * (1 + s) : l + s - l * s;\n    m1 = 2 * l - m2;\n    function v(h) {\n      if (h > 360) h -= 360; else if (h < 0) h += 360;\n      if (h < 60) return m1 + (m2 - m1) * h / 60;\n      if (h < 180) return m2;\n      if (h < 240) return m1 + (m2 - m1) * (240 - h) / 60;\n      return m1;\n    }\n    function vv(h) {\n      return Math.round(v(h) * 255);\n    }\n    return new d3_rgb(vv(h + 120), vv(h), vv(h - 120));\n  }\n  d3.hcl = d3_hcl;\n  function d3_hcl(h, c, l) {\n    return this instanceof d3_hcl ? void (this.h = +h, this.c = +c, this.l = +l) : arguments.length < 2 ? h instanceof d3_hcl ? new d3_hcl(h.h, h.c, h.l) : h instanceof d3_lab ? d3_lab_hcl(h.l, h.a, h.b) : d3_lab_hcl((h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : new d3_hcl(h, c, l);\n  }\n  var d3_hclPrototype = d3_hcl.prototype = new d3_color();\n  d3_hclPrototype.brighter = function(k) {\n    return new d3_hcl(this.h, this.c, Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)));\n  };\n  d3_hclPrototype.darker = function(k) {\n    return new d3_hcl(this.h, this.c, Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)));\n  };\n  d3_hclPrototype.rgb = function() {\n    return d3_hcl_lab(this.h, this.c, this.l).rgb();\n  };\n  function d3_hcl_lab(h, c, l) {\n    if (isNaN(h)) h = 0;\n    if (isNaN(c)) c = 0;\n    return new d3_lab(l, Math.cos(h *= d3_radians) * c, Math.sin(h) * c);\n  }\n  d3.lab = d3_lab;\n  function d3_lab(l, a, b) {\n    return this instanceof d3_lab ? void (this.l = +l, this.a = +a, this.b = +b) : arguments.length < 2 ? l instanceof d3_lab ? new d3_lab(l.l, l.a, l.b) : l instanceof d3_hcl ? d3_hcl_lab(l.h, l.c, l.l) : d3_rgb_lab((l = d3_rgb(l)).r, l.g, l.b) : new d3_lab(l, a, b);\n  }\n  var d3_lab_K = 18;\n  var d3_lab_X = .95047, d3_lab_Y = 1, d3_lab_Z = 1.08883;\n  var d3_labPrototype = d3_lab.prototype = new d3_color();\n  d3_labPrototype.brighter = function(k) {\n    return new d3_lab(Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n  d3_labPrototype.darker = function(k) {\n    return new d3_lab(Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)), this.a, this.b);\n  };\n  d3_labPrototype.rgb = function() {\n    return d3_lab_rgb(this.l, this.a, this.b);\n  };\n  function d3_lab_rgb(l, a, b) {\n    var y = (l + 16) / 116, x = y + a / 500, z = y - b / 200;\n    x = d3_lab_xyz(x) * d3_lab_X;\n    y = d3_lab_xyz(y) * d3_lab_Y;\n    z = d3_lab_xyz(z) * d3_lab_Z;\n    return new d3_rgb(d3_xyz_rgb(3.2404542 * x - 1.5371385 * y - .4985314 * z), d3_xyz_rgb(-.969266 * x + 1.8760108 * y + .041556 * z), d3_xyz_rgb(.0556434 * x - .2040259 * y + 1.0572252 * z));\n  }\n  function d3_lab_hcl(l, a, b) {\n    return l > 0 ? new d3_hcl(Math.atan2(b, a) * d3_degrees, Math.sqrt(a * a + b * b), l) : new d3_hcl(NaN, NaN, l);\n  }\n  function d3_lab_xyz(x) {\n    return x > .206893034 ? x * x * x : (x - 4 / 29) / 7.787037;\n  }\n  function d3_xyz_lab(x) {\n    return x > .008856 ? Math.pow(x, 1 / 3) : 7.787037 * x + 4 / 29;\n  }\n  function d3_xyz_rgb(r) {\n    return Math.round(255 * (r <= .00304 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055));\n  }\n  d3.rgb = d3_rgb;\n  function d3_rgb(r, g, b) {\n    return this instanceof d3_rgb ? void (this.r = ~~r, this.g = ~~g, this.b = ~~b) : arguments.length < 2 ? r instanceof d3_rgb ? new d3_rgb(r.r, r.g, r.b) : d3_rgb_parse(\"\" + r, d3_rgb, d3_hsl_rgb) : new d3_rgb(r, g, b);\n  }\n  function d3_rgbNumber(value) {\n    return new d3_rgb(value >> 16, value >> 8 & 255, value & 255);\n  }\n  function d3_rgbString(value) {\n    return d3_rgbNumber(value) + \"\";\n  }\n  var d3_rgbPrototype = d3_rgb.prototype = new d3_color();\n  d3_rgbPrototype.brighter = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    var r = this.r, g = this.g, b = this.b, i = 30;\n    if (!r && !g && !b) return new d3_rgb(i, i, i);\n    if (r && r < i) r = i;\n    if (g && g < i) g = i;\n    if (b && b < i) b = i;\n    return new d3_rgb(Math.min(255, r / k), Math.min(255, g / k), Math.min(255, b / k));\n  };\n  d3_rgbPrototype.darker = function(k) {\n    k = Math.pow(.7, arguments.length ? k : 1);\n    return new d3_rgb(k * this.r, k * this.g, k * this.b);\n  };\n  d3_rgbPrototype.hsl = function() {\n    return d3_rgb_hsl(this.r, this.g, this.b);\n  };\n  d3_rgbPrototype.toString = function() {\n    return \"#\" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b);\n  };\n  function d3_rgb_hex(v) {\n    return v < 16 ? \"0\" + Math.max(0, v).toString(16) : Math.min(255, v).toString(16);\n  }\n  function d3_rgb_parse(format, rgb, hsl) {\n    var r = 0, g = 0, b = 0, m1, m2, color;\n    m1 = /([a-z]+)\\((.*)\\)/.exec(format = format.toLowerCase());\n    if (m1) {\n      m2 = m1[2].split(\",\");\n      switch (m1[1]) {\n       case \"hsl\":\n        {\n          return hsl(parseFloat(m2[0]), parseFloat(m2[1]) / 100, parseFloat(m2[2]) / 100);\n        }\n\n       case \"rgb\":\n        {\n          return rgb(d3_rgb_parseNumber(m2[0]), d3_rgb_parseNumber(m2[1]), d3_rgb_parseNumber(m2[2]));\n        }\n      }\n    }\n    if (color = d3_rgb_names.get(format)) {\n      return rgb(color.r, color.g, color.b);\n    }\n    if (format != null && format.charAt(0) === \"#\" && !isNaN(color = parseInt(format.slice(1), 16))) {\n      if (format.length === 4) {\n        r = (color & 3840) >> 4;\n        r = r >> 4 | r;\n        g = color & 240;\n        g = g >> 4 | g;\n        b = color & 15;\n        b = b << 4 | b;\n      } else if (format.length === 7) {\n        r = (color & 16711680) >> 16;\n        g = (color & 65280) >> 8;\n        b = color & 255;\n      }\n    }\n    return rgb(r, g, b);\n  }\n  function d3_rgb_hsl(r, g, b) {\n    var min = Math.min(r /= 255, g /= 255, b /= 255), max = Math.max(r, g, b), d = max - min, h, s, l = (max + min) / 2;\n    if (d) {\n      s = l < .5 ? d / (max + min) : d / (2 - max - min);\n      if (r == max) h = (g - b) / d + (g < b ? 6 : 0); else if (g == max) h = (b - r) / d + 2; else h = (r - g) / d + 4;\n      h *= 60;\n    } else {\n      h = NaN;\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new d3_hsl(h, s, l);\n  }\n  function d3_rgb_lab(r, g, b) {\n    r = d3_rgb_xyz(r);\n    g = d3_rgb_xyz(g);\n    b = d3_rgb_xyz(b);\n    var x = d3_xyz_lab((.4124564 * r + .3575761 * g + .1804375 * b) / d3_lab_X), y = d3_xyz_lab((.2126729 * r + .7151522 * g + .072175 * b) / d3_lab_Y), z = d3_xyz_lab((.0193339 * r + .119192 * g + .9503041 * b) / d3_lab_Z);\n    return d3_lab(116 * y - 16, 500 * (x - y), 200 * (y - z));\n  }\n  function d3_rgb_xyz(r) {\n    return (r /= 255) <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4);\n  }\n  function d3_rgb_parseNumber(c) {\n    var f = parseFloat(c);\n    return c.charAt(c.length - 1) === \"%\" ? Math.round(f * 2.55) : f;\n  }\n  var d3_rgb_names = d3.map({\n    aliceblue: 15792383,\n    antiquewhite: 16444375,\n    aqua: 65535,\n    aquamarine: 8388564,\n    azure: 15794175,\n    beige: 16119260,\n    bisque: 16770244,\n    black: 0,\n    blanchedalmond: 16772045,\n    blue: 255,\n    blueviolet: 9055202,\n    brown: 10824234,\n    burlywood: 14596231,\n    cadetblue: 6266528,\n    chartreuse: 8388352,\n    chocolate: 13789470,\n    coral: 16744272,\n    cornflowerblue: 6591981,\n    cornsilk: 16775388,\n    crimson: 14423100,\n    cyan: 65535,\n    darkblue: 139,\n    darkcyan: 35723,\n    darkgoldenrod: 12092939,\n    darkgray: 11119017,\n    darkgreen: 25600,\n    darkgrey: 11119017,\n    darkkhaki: 12433259,\n    darkmagenta: 9109643,\n    darkolivegreen: 5597999,\n    darkorange: 16747520,\n    darkorchid: 10040012,\n    darkred: 9109504,\n    darksalmon: 15308410,\n    darkseagreen: 9419919,\n    darkslateblue: 4734347,\n    darkslategray: 3100495,\n    darkslategrey: 3100495,\n    darkturquoise: 52945,\n    darkviolet: 9699539,\n    deeppink: 16716947,\n    deepskyblue: 49151,\n    dimgray: 6908265,\n    dimgrey: 6908265,\n    dodgerblue: 2003199,\n    firebrick: 11674146,\n    floralwhite: 16775920,\n    forestgreen: 2263842,\n    fuchsia: 16711935,\n    gainsboro: 14474460,\n    ghostwhite: 16316671,\n    gold: 16766720,\n    goldenrod: 14329120,\n    gray: 8421504,\n    green: 32768,\n    greenyellow: 11403055,\n    grey: 8421504,\n    honeydew: 15794160,\n    hotpink: 16738740,\n    indianred: 13458524,\n    indigo: 4915330,\n    ivory: 16777200,\n    khaki: 15787660,\n    lavender: 15132410,\n    lavenderblush: 16773365,\n    lawngreen: 8190976,\n    lemonchiffon: 16775885,\n    lightblue: 11393254,\n    lightcoral: 15761536,\n    lightcyan: 14745599,\n    lightgoldenrodyellow: 16448210,\n    lightgray: 13882323,\n    lightgreen: 9498256,\n    lightgrey: 13882323,\n    lightpink: 16758465,\n    lightsalmon: 16752762,\n    lightseagreen: 2142890,\n    lightskyblue: 8900346,\n    lightslategray: 7833753,\n    lightslategrey: 7833753,\n    lightsteelblue: 11584734,\n    lightyellow: 16777184,\n    lime: 65280,\n    limegreen: 3329330,\n    linen: 16445670,\n    magenta: 16711935,\n    maroon: 8388608,\n    mediumaquamarine: 6737322,\n    mediumblue: 205,\n    mediumorchid: 12211667,\n    mediumpurple: 9662683,\n    mediumseagreen: 3978097,\n    mediumslateblue: 8087790,\n    mediumspringgreen: 64154,\n    mediumturquoise: 4772300,\n    mediumvioletred: 13047173,\n    midnightblue: 1644912,\n    mintcream: 16121850,\n    mistyrose: 16770273,\n    moccasin: 16770229,\n    navajowhite: 16768685,\n    navy: 128,\n    oldlace: 16643558,\n    olive: 8421376,\n    olivedrab: 7048739,\n    orange: 16753920,\n    orangered: 16729344,\n    orchid: 14315734,\n    palegoldenrod: 15657130,\n    palegreen: 10025880,\n    paleturquoise: 11529966,\n    palevioletred: 14381203,\n    papayawhip: 16773077,\n    peachpuff: 16767673,\n    peru: 13468991,\n    pink: 16761035,\n    plum: 14524637,\n    powderblue: 11591910,\n    purple: 8388736,\n    rebeccapurple: 6697881,\n    red: 16711680,\n    rosybrown: 12357519,\n    royalblue: 4286945,\n    saddlebrown: 9127187,\n    salmon: 16416882,\n    sandybrown: 16032864,\n    seagreen: 3050327,\n    seashell: 16774638,\n    sienna: 10506797,\n    silver: 12632256,\n    skyblue: 8900331,\n    slateblue: 6970061,\n    slategray: 7372944,\n    slategrey: 7372944,\n    snow: 16775930,\n    springgreen: 65407,\n    steelblue: 4620980,\n    tan: 13808780,\n    teal: 32896,\n    thistle: 14204888,\n    tomato: 16737095,\n    turquoise: 4251856,\n    violet: 15631086,\n    wheat: 16113331,\n    white: 16777215,\n    whitesmoke: 16119285,\n    yellow: 16776960,\n    yellowgreen: 10145074\n  });\n  d3_rgb_names.forEach(function(key, value) {\n    d3_rgb_names.set(key, d3_rgbNumber(value));\n  });\n  function d3_functor(v) {\n    return typeof v === \"function\" ? v : function() {\n      return v;\n    };\n  }\n  d3.functor = d3_functor;\n  d3.xhr = d3_xhrType(d3_identity);\n  function d3_xhrType(response) {\n    return function(url, mimeType, callback) {\n      if (arguments.length === 2 && typeof mimeType === \"function\") callback = mimeType, \n      mimeType = null;\n      return d3_xhr(url, mimeType, response, callback);\n    };\n  }\n  function d3_xhr(url, mimeType, response, callback) {\n    var xhr = {}, dispatch = d3.dispatch(\"beforesend\", \"progress\", \"load\", \"error\"), headers = {}, request = new XMLHttpRequest(), responseType = null;\n    if (this.XDomainRequest && !(\"withCredentials\" in request) && /^(http(s)?:)?\\/\\//.test(url)) request = new XDomainRequest();\n    \"onload\" in request ? request.onload = request.onerror = respond : request.onreadystatechange = function() {\n      request.readyState > 3 && respond();\n    };\n    function respond() {\n      var status = request.status, result;\n      if (!status && d3_xhrHasResponse(request) || status >= 200 && status < 300 || status === 304) {\n        try {\n          result = response.call(xhr, request);\n        } catch (e) {\n          dispatch.error.call(xhr, e);\n          return;\n        }\n        dispatch.load.call(xhr, result);\n      } else {\n        dispatch.error.call(xhr, request);\n      }\n    }\n    request.onprogress = function(event) {\n      var o = d3.event;\n      d3.event = event;\n      try {\n        dispatch.progress.call(xhr, request);\n      } finally {\n        d3.event = o;\n      }\n    };\n    xhr.header = function(name, value) {\n      name = (name + \"\").toLowerCase();\n      if (arguments.length < 2) return headers[name];\n      if (value == null) delete headers[name]; else headers[name] = value + \"\";\n      return xhr;\n    };\n    xhr.mimeType = function(value) {\n      if (!arguments.length) return mimeType;\n      mimeType = value == null ? null : value + \"\";\n      return xhr;\n    };\n    xhr.responseType = function(value) {\n      if (!arguments.length) return responseType;\n      responseType = value;\n      return xhr;\n    };\n    xhr.response = function(value) {\n      response = value;\n      return xhr;\n    };\n    [ \"get\", \"post\" ].forEach(function(method) {\n      xhr[method] = function() {\n        return xhr.send.apply(xhr, [ method ].concat(d3_array(arguments)));\n      };\n    });\n    xhr.send = function(method, data, callback) {\n      if (arguments.length === 2 && typeof data === \"function\") callback = data, data = null;\n      request.open(method, url, true);\n      if (mimeType != null && !(\"accept\" in headers)) headers[\"accept\"] = mimeType + \",*/*\";\n      if (request.setRequestHeader) for (var name in headers) request.setRequestHeader(name, headers[name]);\n      if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);\n      if (responseType != null) request.responseType = responseType;\n      if (callback != null) xhr.on(\"error\", callback).on(\"load\", function(request) {\n        callback(null, request);\n      });\n      dispatch.beforesend.call(xhr, request);\n      request.send(data == null ? null : data);\n      return xhr;\n    };\n    xhr.abort = function() {\n      request.abort();\n      return xhr;\n    };\n    d3.rebind(xhr, dispatch, \"on\");\n    return callback == null ? xhr : xhr.get(d3_xhr_fixCallback(callback));\n  }\n  function d3_xhr_fixCallback(callback) {\n    return callback.length === 1 ? function(error, request) {\n      callback(error == null ? request : null);\n    } : callback;\n  }\n  function d3_xhrHasResponse(request) {\n    var type = request.responseType;\n    return type && type !== \"text\" ? request.response : request.responseText;\n  }\n  d3.dsv = function(delimiter, mimeType) {\n    var reFormat = new RegExp('[\"' + delimiter + \"\\n]\"), delimiterCode = delimiter.charCodeAt(0);\n    function dsv(url, row, callback) {\n      if (arguments.length < 3) callback = row, row = null;\n      var xhr = d3_xhr(url, mimeType, row == null ? response : typedResponse(row), callback);\n      xhr.row = function(_) {\n        return arguments.length ? xhr.response((row = _) == null ? response : typedResponse(_)) : row;\n      };\n      return xhr;\n    }\n    function response(request) {\n      return dsv.parse(request.responseText);\n    }\n    function typedResponse(f) {\n      return function(request) {\n        return dsv.parse(request.responseText, f);\n      };\n    }\n    dsv.parse = function(text, f) {\n      var o;\n      return dsv.parseRows(text, function(row, i) {\n        if (o) return o(row, i - 1);\n        var a = new Function(\"d\", \"return {\" + row.map(function(name, i) {\n          return JSON.stringify(name) + \": d[\" + i + \"]\";\n        }).join(\",\") + \"}\");\n        o = f ? function(row, i) {\n          return f(a(row), i);\n        } : a;\n      });\n    };\n    dsv.parseRows = function(text, f) {\n      var EOL = {}, EOF = {}, rows = [], N = text.length, I = 0, n = 0, t, eol;\n      function token() {\n        if (I >= N) return EOF;\n        if (eol) return eol = false, EOL;\n        var j = I;\n        if (text.charCodeAt(j) === 34) {\n          var i = j;\n          while (i++ < N) {\n            if (text.charCodeAt(i) === 34) {\n              if (text.charCodeAt(i + 1) !== 34) break;\n              ++i;\n            }\n          }\n          I = i + 2;\n          var c = text.charCodeAt(i + 1);\n          if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(i + 2) === 10) ++I;\n          } else if (c === 10) {\n            eol = true;\n          }\n          return text.slice(j + 1, i).replace(/\"\"/g, '\"');\n        }\n        while (I < N) {\n          var c = text.charCodeAt(I++), k = 1;\n          if (c === 10) eol = true; else if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(I) === 10) ++I, ++k;\n          } else if (c !== delimiterCode) continue;\n          return text.slice(j, I - k);\n        }\n        return text.slice(j);\n      }\n      while ((t = token()) !== EOF) {\n        var a = [];\n        while (t !== EOL && t !== EOF) {\n          a.push(t);\n          t = token();\n        }\n        if (f && (a = f(a, n++)) == null) continue;\n        rows.push(a);\n      }\n      return rows;\n    };\n    dsv.format = function(rows) {\n      if (Array.isArray(rows[0])) return dsv.formatRows(rows);\n      var fieldSet = new d3_Set(), fields = [];\n      rows.forEach(function(row) {\n        for (var field in row) {\n          if (!fieldSet.has(field)) {\n            fields.push(fieldSet.add(field));\n          }\n        }\n      });\n      return [ fields.map(formatValue).join(delimiter) ].concat(rows.map(function(row) {\n        return fields.map(function(field) {\n          return formatValue(row[field]);\n        }).join(delimiter);\n      })).join(\"\\n\");\n    };\n    dsv.formatRows = function(rows) {\n      return rows.map(formatRow).join(\"\\n\");\n    };\n    function formatRow(row) {\n      return row.map(formatValue).join(delimiter);\n    }\n    function formatValue(text) {\n      return reFormat.test(text) ? '\"' + text.replace(/\\\"/g, '\"\"') + '\"' : text;\n    }\n    return dsv;\n  };\n  d3.csv = d3.dsv(\",\", \"text/csv\");\n  d3.tsv = d3.dsv(\"\t\", \"text/tab-separated-values\");\n  var d3_timer_queueHead, d3_timer_queueTail, d3_timer_interval, d3_timer_timeout, d3_timer_frame = this[d3_vendorSymbol(this, \"requestAnimationFrame\")] || function(callback) {\n    setTimeout(callback, 17);\n  };\n  d3.timer = function() {\n    d3_timer.apply(this, arguments);\n  };\n  function d3_timer(callback, delay, then) {\n    var n = arguments.length;\n    if (n < 2) delay = 0;\n    if (n < 3) then = Date.now();\n    var time = then + delay, timer = {\n      c: callback,\n      t: time,\n      n: null\n    };\n    if (d3_timer_queueTail) d3_timer_queueTail.n = timer; else d3_timer_queueHead = timer;\n    d3_timer_queueTail = timer;\n    if (!d3_timer_interval) {\n      d3_timer_timeout = clearTimeout(d3_timer_timeout);\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n    return timer;\n  }\n  function d3_timer_step() {\n    var now = d3_timer_mark(), delay = d3_timer_sweep() - now;\n    if (delay > 24) {\n      if (isFinite(delay)) {\n        clearTimeout(d3_timer_timeout);\n        d3_timer_timeout = setTimeout(d3_timer_step, delay);\n      }\n      d3_timer_interval = 0;\n    } else {\n      d3_timer_interval = 1;\n      d3_timer_frame(d3_timer_step);\n    }\n  }\n  d3.timer.flush = function() {\n    d3_timer_mark();\n    d3_timer_sweep();\n  };\n  function d3_timer_mark() {\n    var now = Date.now(), timer = d3_timer_queueHead;\n    while (timer) {\n      if (now >= timer.t && timer.c(now - timer.t)) timer.c = null;\n      timer = timer.n;\n    }\n    return now;\n  }\n  function d3_timer_sweep() {\n    var t0, t1 = d3_timer_queueHead, time = Infinity;\n    while (t1) {\n      if (t1.c) {\n        if (t1.t < time) time = t1.t;\n        t1 = (t0 = t1).n;\n      } else {\n        t1 = t0 ? t0.n = t1.n : d3_timer_queueHead = t1.n;\n      }\n    }\n    d3_timer_queueTail = t0;\n    return time;\n  }\n  function d3_format_precision(x, p) {\n    return p - (x ? Math.ceil(Math.log(x) / Math.LN10) : 1);\n  }\n  d3.round = function(x, n) {\n    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x);\n  };\n  var d3_formatPrefixes = [ \"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"µ\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\" ].map(d3_formatPrefix);\n  d3.formatPrefix = function(value, precision) {\n    var i = 0;\n    if (value = +value) {\n      if (value < 0) value *= -1;\n      if (precision) value = d3.round(value, d3_format_precision(value, precision));\n      i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n      i = Math.max(-24, Math.min(24, Math.floor((i - 1) / 3) * 3));\n    }\n    return d3_formatPrefixes[8 + i / 3];\n  };\n  function d3_formatPrefix(d, i) {\n    var k = Math.pow(10, abs(8 - i) * 3);\n    return {\n      scale: i > 8 ? function(d) {\n        return d / k;\n      } : function(d) {\n        return d * k;\n      },\n      symbol: d\n    };\n  }\n  function d3_locale_numberFormat(locale) {\n    var locale_decimal = locale.decimal, locale_thousands = locale.thousands, locale_grouping = locale.grouping, locale_currency = locale.currency, formatGroup = locale_grouping && locale_thousands ? function(value, width) {\n      var i = value.length, t = [], j = 0, g = locale_grouping[0], length = 0;\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = locale_grouping[j = (j + 1) % locale_grouping.length];\n      }\n      return t.reverse().join(locale_thousands);\n    } : d3_identity;\n    return function(specifier) {\n      var match = d3_format_re.exec(specifier), fill = match[1] || \" \", align = match[2] || \">\", sign = match[3] || \"-\", symbol = match[4] || \"\", zfill = match[5], width = +match[6], comma = match[7], precision = match[8], type = match[9], scale = 1, prefix = \"\", suffix = \"\", integer = false, exponent = true;\n      if (precision) precision = +precision.substring(1);\n      if (zfill || fill === \"0\" && align === \"=\") {\n        zfill = fill = \"0\";\n        align = \"=\";\n      }\n      switch (type) {\n       case \"n\":\n        comma = true;\n        type = \"g\";\n        break;\n\n       case \"%\":\n        scale = 100;\n        suffix = \"%\";\n        type = \"f\";\n        break;\n\n       case \"p\":\n        scale = 100;\n        suffix = \"%\";\n        type = \"r\";\n        break;\n\n       case \"b\":\n       case \"o\":\n       case \"x\":\n       case \"X\":\n        if (symbol === \"#\") prefix = \"0\" + type.toLowerCase();\n\n       case \"c\":\n        exponent = false;\n\n       case \"d\":\n        integer = true;\n        precision = 0;\n        break;\n\n       case \"s\":\n        scale = -1;\n        type = \"r\";\n        break;\n      }\n      if (symbol === \"$\") prefix = locale_currency[0], suffix = locale_currency[1];\n      if (type == \"r\" && !precision) type = \"g\";\n      if (precision != null) {\n        if (type == \"g\") precision = Math.max(1, Math.min(21, precision)); else if (type == \"e\" || type == \"f\") precision = Math.max(0, Math.min(20, precision));\n      }\n      type = d3_format_types.get(type) || d3_format_typeDefault;\n      var zcomma = zfill && comma;\n      return function(value) {\n        var fullSuffix = suffix;\n        if (integer && value % 1) return \"\";\n        var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, \"-\") : sign === \"-\" ? \"\" : sign;\n        if (scale < 0) {\n          var unit = d3.formatPrefix(value, precision);\n          value = unit.scale(value);\n          fullSuffix = unit.symbol + suffix;\n        } else {\n          value *= scale;\n        }\n        value = type(value, precision);\n        var i = value.lastIndexOf(\".\"), before, after;\n        if (i < 0) {\n          var j = exponent ? value.lastIndexOf(\"e\") : -1;\n          if (j < 0) before = value, after = \"\"; else before = value.substring(0, j), after = value.substring(j);\n        } else {\n          before = value.substring(0, i);\n          after = locale_decimal + value.substring(i + 1);\n        }\n        if (!zfill && comma) before = formatGroup(before, Infinity);\n        var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length), padding = length < width ? new Array(length = width - length + 1).join(fill) : \"\";\n        if (zcomma) before = formatGroup(padding + before, padding.length ? width - after.length : Infinity);\n        negative += prefix;\n        value = before + after;\n        return (align === \"<\" ? negative + value + padding : align === \">\" ? padding + negative + value : align === \"^\" ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix;\n      };\n    };\n  }\n  var d3_format_re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n  var d3_format_types = d3.map({\n    b: function(x) {\n      return x.toString(2);\n    },\n    c: function(x) {\n      return String.fromCharCode(x);\n    },\n    o: function(x) {\n      return x.toString(8);\n    },\n    x: function(x) {\n      return x.toString(16);\n    },\n    X: function(x) {\n      return x.toString(16).toUpperCase();\n    },\n    g: function(x, p) {\n      return x.toPrecision(p);\n    },\n    e: function(x, p) {\n      return x.toExponential(p);\n    },\n    f: function(x, p) {\n      return x.toFixed(p);\n    },\n    r: function(x, p) {\n      return (x = d3.round(x, d3_format_precision(x, p))).toFixed(Math.max(0, Math.min(20, d3_format_precision(x * (1 + 1e-15), p))));\n    }\n  });\n  function d3_format_typeDefault(x) {\n    return x + \"\";\n  }\n  var d3_time = d3.time = {}, d3_date = Date;\n  function d3_date_utc() {\n    this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0]);\n  }\n  d3_date_utc.prototype = {\n    getDate: function() {\n      return this._.getUTCDate();\n    },\n    getDay: function() {\n      return this._.getUTCDay();\n    },\n    getFullYear: function() {\n      return this._.getUTCFullYear();\n    },\n    getHours: function() {\n      return this._.getUTCHours();\n    },\n    getMilliseconds: function() {\n      return this._.getUTCMilliseconds();\n    },\n    getMinutes: function() {\n      return this._.getUTCMinutes();\n    },\n    getMonth: function() {\n      return this._.getUTCMonth();\n    },\n    getSeconds: function() {\n      return this._.getUTCSeconds();\n    },\n    getTime: function() {\n      return this._.getTime();\n    },\n    getTimezoneOffset: function() {\n      return 0;\n    },\n    valueOf: function() {\n      return this._.valueOf();\n    },\n    setDate: function() {\n      d3_time_prototype.setUTCDate.apply(this._, arguments);\n    },\n    setDay: function() {\n      d3_time_prototype.setUTCDay.apply(this._, arguments);\n    },\n    setFullYear: function() {\n      d3_time_prototype.setUTCFullYear.apply(this._, arguments);\n    },\n    setHours: function() {\n      d3_time_prototype.setUTCHours.apply(this._, arguments);\n    },\n    setMilliseconds: function() {\n      d3_time_prototype.setUTCMilliseconds.apply(this._, arguments);\n    },\n    setMinutes: function() {\n      d3_time_prototype.setUTCMinutes.apply(this._, arguments);\n    },\n    setMonth: function() {\n      d3_time_prototype.setUTCMonth.apply(this._, arguments);\n    },\n    setSeconds: function() {\n      d3_time_prototype.setUTCSeconds.apply(this._, arguments);\n    },\n    setTime: function() {\n      d3_time_prototype.setTime.apply(this._, arguments);\n    }\n  };\n  var d3_time_prototype = Date.prototype;\n  function d3_time_interval(local, step, number) {\n    function round(date) {\n      var d0 = local(date), d1 = offset(d0, 1);\n      return date - d0 < d1 - date ? d0 : d1;\n    }\n    function ceil(date) {\n      step(date = local(new d3_date(date - 1)), 1);\n      return date;\n    }\n    function offset(date, k) {\n      step(date = new d3_date(+date), k);\n      return date;\n    }\n    function range(t0, t1, dt) {\n      var time = ceil(t0), times = [];\n      if (dt > 1) {\n        while (time < t1) {\n          if (!(number(time) % dt)) times.push(new Date(+time));\n          step(time, 1);\n        }\n      } else {\n        while (time < t1) times.push(new Date(+time)), step(time, 1);\n      }\n      return times;\n    }\n    function range_utc(t0, t1, dt) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = t0;\n        return range(utc, t1, dt);\n      } finally {\n        d3_date = Date;\n      }\n    }\n    local.floor = local;\n    local.round = round;\n    local.ceil = ceil;\n    local.offset = offset;\n    local.range = range;\n    var utc = local.utc = d3_time_interval_utc(local);\n    utc.floor = utc;\n    utc.round = d3_time_interval_utc(round);\n    utc.ceil = d3_time_interval_utc(ceil);\n    utc.offset = d3_time_interval_utc(offset);\n    utc.range = range_utc;\n    return local;\n  }\n  function d3_time_interval_utc(method) {\n    return function(date, k) {\n      try {\n        d3_date = d3_date_utc;\n        var utc = new d3_date_utc();\n        utc._ = date;\n        return method(utc, k)._;\n      } finally {\n        d3_date = Date;\n      }\n    };\n  }\n  d3_time.year = d3_time_interval(function(date) {\n    date = d3_time.day(date);\n    date.setMonth(0, 1);\n    return date;\n  }, function(date, offset) {\n    date.setFullYear(date.getFullYear() + offset);\n  }, function(date) {\n    return date.getFullYear();\n  });\n  d3_time.years = d3_time.year.range;\n  d3_time.years.utc = d3_time.year.utc.range;\n  d3_time.day = d3_time_interval(function(date) {\n    var day = new d3_date(2e3, 0);\n    day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate());\n    return day;\n  }, function(date, offset) {\n    date.setDate(date.getDate() + offset);\n  }, function(date) {\n    return date.getDate() - 1;\n  });\n  d3_time.days = d3_time.day.range;\n  d3_time.days.utc = d3_time.day.utc.range;\n  d3_time.dayOfYear = function(date) {\n    var year = d3_time.year(date);\n    return Math.floor((date - year - (date.getTimezoneOffset() - year.getTimezoneOffset()) * 6e4) / 864e5);\n  };\n  [ \"sunday\", \"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\", \"saturday\" ].forEach(function(day, i) {\n    i = 7 - i;\n    var interval = d3_time[day] = d3_time_interval(function(date) {\n      (date = d3_time.day(date)).setDate(date.getDate() - (date.getDay() + i) % 7);\n      return date;\n    }, function(date, offset) {\n      date.setDate(date.getDate() + Math.floor(offset) * 7);\n    }, function(date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7) - (day !== i);\n    });\n    d3_time[day + \"s\"] = interval.range;\n    d3_time[day + \"s\"].utc = interval.utc.range;\n    d3_time[day + \"OfYear\"] = function(date) {\n      var day = d3_time.year(date).getDay();\n      return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7);\n    };\n  });\n  d3_time.week = d3_time.sunday;\n  d3_time.weeks = d3_time.sunday.range;\n  d3_time.weeks.utc = d3_time.sunday.utc.range;\n  d3_time.weekOfYear = d3_time.sundayOfYear;\n  function d3_locale_timeFormat(locale) {\n    var locale_dateTime = locale.dateTime, locale_date = locale.date, locale_time = locale.time, locale_periods = locale.periods, locale_days = locale.days, locale_shortDays = locale.shortDays, locale_months = locale.months, locale_shortMonths = locale.shortMonths;\n    function d3_time_format(template) {\n      var n = template.length;\n      function format(date) {\n        var string = [], i = -1, j = 0, c, p, f;\n        while (++i < n) {\n          if (template.charCodeAt(i) === 37) {\n            string.push(template.slice(j, i));\n            if ((p = d3_time_formatPads[c = template.charAt(++i)]) != null) c = template.charAt(++i);\n            if (f = d3_time_formats[c]) c = f(date, p == null ? c === \"e\" ? \" \" : \"0\" : p);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n        string.push(template.slice(j, i));\n        return string.join(\"\");\n      }\n      format.parse = function(string) {\n        var d = {\n          y: 1900,\n          m: 0,\n          d: 1,\n          H: 0,\n          M: 0,\n          S: 0,\n          L: 0,\n          Z: null\n        }, i = d3_time_parse(d, template, string, 0);\n        if (i != string.length) return null;\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n        var localZ = d.Z != null && d3_date !== d3_date_utc, date = new (localZ ? d3_date_utc : d3_date)();\n        if (\"j\" in d) date.setFullYear(d.y, 0, d.j); else if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          date.setFullYear(d.y, 0, 1);\n          date.setFullYear(d.y, 0, \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (date.getDay() + 5) % 7 : d.w + d.U * 7 - (date.getDay() + 6) % 7);\n        } else date.setFullYear(d.y, d.m, d.d);\n        date.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L);\n        return localZ ? date._ : date;\n      };\n      format.toString = function() {\n        return template;\n      };\n      return format;\n    }\n    function d3_time_parse(date, template, string, j) {\n      var c, p, t, i = 0, n = template.length, m = string.length;\n      while (i < n) {\n        if (j >= m) return -1;\n        c = template.charCodeAt(i++);\n        if (c === 37) {\n          t = template.charAt(i++);\n          p = d3_time_parsers[t in d3_time_formatPads ? template.charAt(i++) : t];\n          if (!p || (j = p(date, string, j)) < 0) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n      return j;\n    }\n    d3_time_format.utc = function(template) {\n      var local = d3_time_format(template);\n      function format(date) {\n        try {\n          d3_date = d3_date_utc;\n          var utc = new d3_date();\n          utc._ = date;\n          return local(utc);\n        } finally {\n          d3_date = Date;\n        }\n      }\n      format.parse = function(string) {\n        try {\n          d3_date = d3_date_utc;\n          var date = local.parse(string);\n          return date && date._;\n        } finally {\n          d3_date = Date;\n        }\n      };\n      format.toString = local.toString;\n      return format;\n    };\n    d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti;\n    var d3_time_periodLookup = d3.map(), d3_time_dayRe = d3_time_formatRe(locale_days), d3_time_dayLookup = d3_time_formatLookup(locale_days), d3_time_dayAbbrevRe = d3_time_formatRe(locale_shortDays), d3_time_dayAbbrevLookup = d3_time_formatLookup(locale_shortDays), d3_time_monthRe = d3_time_formatRe(locale_months), d3_time_monthLookup = d3_time_formatLookup(locale_months), d3_time_monthAbbrevRe = d3_time_formatRe(locale_shortMonths), d3_time_monthAbbrevLookup = d3_time_formatLookup(locale_shortMonths);\n    locale_periods.forEach(function(p, i) {\n      d3_time_periodLookup.set(p.toLowerCase(), i);\n    });\n    var d3_time_formats = {\n      a: function(d) {\n        return locale_shortDays[d.getDay()];\n      },\n      A: function(d) {\n        return locale_days[d.getDay()];\n      },\n      b: function(d) {\n        return locale_shortMonths[d.getMonth()];\n      },\n      B: function(d) {\n        return locale_months[d.getMonth()];\n      },\n      c: d3_time_format(locale_dateTime),\n      d: function(d, p) {\n        return d3_time_formatPad(d.getDate(), p, 2);\n      },\n      e: function(d, p) {\n        return d3_time_formatPad(d.getDate(), p, 2);\n      },\n      H: function(d, p) {\n        return d3_time_formatPad(d.getHours(), p, 2);\n      },\n      I: function(d, p) {\n        return d3_time_formatPad(d.getHours() % 12 || 12, p, 2);\n      },\n      j: function(d, p) {\n        return d3_time_formatPad(1 + d3_time.dayOfYear(d), p, 3);\n      },\n      L: function(d, p) {\n        return d3_time_formatPad(d.getMilliseconds(), p, 3);\n      },\n      m: function(d, p) {\n        return d3_time_formatPad(d.getMonth() + 1, p, 2);\n      },\n      M: function(d, p) {\n        return d3_time_formatPad(d.getMinutes(), p, 2);\n      },\n      p: function(d) {\n        return locale_periods[+(d.getHours() >= 12)];\n      },\n      S: function(d, p) {\n        return d3_time_formatPad(d.getSeconds(), p, 2);\n      },\n      U: function(d, p) {\n        return d3_time_formatPad(d3_time.sundayOfYear(d), p, 2);\n      },\n      w: function(d) {\n        return d.getDay();\n      },\n      W: function(d, p) {\n        return d3_time_formatPad(d3_time.mondayOfYear(d), p, 2);\n      },\n      x: d3_time_format(locale_date),\n      X: d3_time_format(locale_time),\n      y: function(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 100, p, 2);\n      },\n      Y: function(d, p) {\n        return d3_time_formatPad(d.getFullYear() % 1e4, p, 4);\n      },\n      Z: d3_time_zone,\n      \"%\": function() {\n        return \"%\";\n      }\n    };\n    var d3_time_parsers = {\n      a: d3_time_parseWeekdayAbbrev,\n      A: d3_time_parseWeekday,\n      b: d3_time_parseMonthAbbrev,\n      B: d3_time_parseMonth,\n      c: d3_time_parseLocaleFull,\n      d: d3_time_parseDay,\n      e: d3_time_parseDay,\n      H: d3_time_parseHour24,\n      I: d3_time_parseHour24,\n      j: d3_time_parseDayOfYear,\n      L: d3_time_parseMilliseconds,\n      m: d3_time_parseMonthNumber,\n      M: d3_time_parseMinutes,\n      p: d3_time_parseAmPm,\n      S: d3_time_parseSeconds,\n      U: d3_time_parseWeekNumberSunday,\n      w: d3_time_parseWeekdayNumber,\n      W: d3_time_parseWeekNumberMonday,\n      x: d3_time_parseLocaleDate,\n      X: d3_time_parseLocaleTime,\n      y: d3_time_parseYear,\n      Y: d3_time_parseFullYear,\n      Z: d3_time_parseZone,\n      \"%\": d3_time_parseLiteralPercent\n    };\n    function d3_time_parseWeekdayAbbrev(date, string, i) {\n      d3_time_dayAbbrevRe.lastIndex = 0;\n      var n = d3_time_dayAbbrevRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseWeekday(date, string, i) {\n      d3_time_dayRe.lastIndex = 0;\n      var n = d3_time_dayRe.exec(string.slice(i));\n      return n ? (date.w = d3_time_dayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseMonthAbbrev(date, string, i) {\n      d3_time_monthAbbrevRe.lastIndex = 0;\n      var n = d3_time_monthAbbrevRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseMonth(date, string, i) {\n      d3_time_monthRe.lastIndex = 0;\n      var n = d3_time_monthRe.exec(string.slice(i));\n      return n ? (date.m = d3_time_monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n    function d3_time_parseLocaleFull(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.c.toString(), string, i);\n    }\n    function d3_time_parseLocaleDate(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.x.toString(), string, i);\n    }\n    function d3_time_parseLocaleTime(date, string, i) {\n      return d3_time_parse(date, d3_time_formats.X.toString(), string, i);\n    }\n    function d3_time_parseAmPm(date, string, i) {\n      var n = d3_time_periodLookup.get(string.slice(i, i += 2).toLowerCase());\n      return n == null ? -1 : (date.p = n, i);\n    }\n    return d3_time_format;\n  }\n  var d3_time_formatPads = {\n    \"-\": \"\",\n    _: \" \",\n    \"0\": \"0\"\n  }, d3_time_numberRe = /^\\s*\\d+/, d3_time_percentRe = /^%/;\n  function d3_time_formatPad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\", string = (sign ? -value : value) + \"\", length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n  function d3_time_formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(d3.requote).join(\"|\") + \")\", \"i\");\n  }\n  function d3_time_formatLookup(names) {\n    var map = new d3_Map(), i = -1, n = names.length;\n    while (++i < n) map.set(names[i].toLowerCase(), i);\n    return map;\n  }\n  function d3_time_parseWeekdayNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 1));\n    return n ? (date.w = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseWeekNumberSunday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.U = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseWeekNumberMonday(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i));\n    return n ? (date.W = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseFullYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 4));\n    return n ? (date.y = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.y = d3_time_expandYear(+n[0]), i + n[0].length) : -1;\n  }\n  function d3_time_parseZone(date, string, i) {\n    return /^[+-]\\d{4}$/.test(string = string.slice(i, i + 5)) ? (date.Z = -string, \n    i + 5) : -1;\n  }\n  function d3_time_expandYear(d) {\n    return d + (d > 68 ? 1900 : 2e3);\n  }\n  function d3_time_parseMonthNumber(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.m = n[0] - 1, i + n[0].length) : -1;\n  }\n  function d3_time_parseDay(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.d = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseDayOfYear(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.j = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseHour24(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.H = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseMinutes(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.M = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseSeconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 2));\n    return n ? (date.S = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_parseMilliseconds(date, string, i) {\n    d3_time_numberRe.lastIndex = 0;\n    var n = d3_time_numberRe.exec(string.slice(i, i + 3));\n    return n ? (date.L = +n[0], i + n[0].length) : -1;\n  }\n  function d3_time_zone(d) {\n    var z = d.getTimezoneOffset(), zs = z > 0 ? \"-\" : \"+\", zh = abs(z) / 60 | 0, zm = abs(z) % 60;\n    return zs + d3_time_formatPad(zh, \"0\", 2) + d3_time_formatPad(zm, \"0\", 2);\n  }\n  function d3_time_parseLiteralPercent(date, string, i) {\n    d3_time_percentRe.lastIndex = 0;\n    var n = d3_time_percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n  function d3_time_formatMulti(formats) {\n    var n = formats.length, i = -1;\n    while (++i < n) formats[i][0] = this(formats[i][0]);\n    return function(date) {\n      var i = 0, f = formats[i];\n      while (!f[1](date)) f = formats[++i];\n      return f[0](date);\n    };\n  }\n  d3.locale = function(locale) {\n    return {\n      numberFormat: d3_locale_numberFormat(locale),\n      timeFormat: d3_locale_timeFormat(locale)\n    };\n  };\n  var d3_locale_enUS = d3.locale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [ 3 ],\n    currency: [ \"$\", \"\" ],\n    dateTime: \"%a %b %e %X %Y\",\n    date: \"%m/%d/%Y\",\n    time: \"%H:%M:%S\",\n    periods: [ \"AM\", \"PM\" ],\n    days: [ \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\" ],\n    shortDays: [ \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\" ],\n    months: [ \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\" ],\n    shortMonths: [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ]\n  });\n  d3.format = d3_locale_enUS.numberFormat;\n  d3.geo = {};\n  function d3_adder() {}\n  d3_adder.prototype = {\n    s: 0,\n    t: 0,\n    add: function(y) {\n      d3_adderSum(y, this.t, d3_adderTemp);\n      d3_adderSum(d3_adderTemp.s, this.s, this);\n      if (this.s) this.t += d3_adderTemp.t; else this.s = d3_adderTemp.t;\n    },\n    reset: function() {\n      this.s = this.t = 0;\n    },\n    valueOf: function() {\n      return this.s;\n    }\n  };\n  var d3_adderTemp = new d3_adder();\n  function d3_adderSum(a, b, o) {\n    var x = o.s = a + b, bv = x - a, av = x - bv;\n    o.t = a - av + (b - bv);\n  }\n  d3.geo.stream = function(object, listener) {\n    if (object && d3_geo_streamObjectType.hasOwnProperty(object.type)) {\n      d3_geo_streamObjectType[object.type](object, listener);\n    } else {\n      d3_geo_streamGeometry(object, listener);\n    }\n  };\n  function d3_geo_streamGeometry(geometry, listener) {\n    if (geometry && d3_geo_streamGeometryType.hasOwnProperty(geometry.type)) {\n      d3_geo_streamGeometryType[geometry.type](geometry, listener);\n    }\n  }\n  var d3_geo_streamObjectType = {\n    Feature: function(feature, listener) {\n      d3_geo_streamGeometry(feature.geometry, listener);\n    },\n    FeatureCollection: function(object, listener) {\n      var features = object.features, i = -1, n = features.length;\n      while (++i < n) d3_geo_streamGeometry(features[i].geometry, listener);\n    }\n  };\n  var d3_geo_streamGeometryType = {\n    Sphere: function(object, listener) {\n      listener.sphere();\n    },\n    Point: function(object, listener) {\n      object = object.coordinates;\n      listener.point(object[0], object[1], object[2]);\n    },\n    MultiPoint: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) object = coordinates[i], listener.point(object[0], object[1], object[2]);\n    },\n    LineString: function(object, listener) {\n      d3_geo_streamLine(object.coordinates, listener, 0);\n    },\n    MultiLineString: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) d3_geo_streamLine(coordinates[i], listener, 0);\n    },\n    Polygon: function(object, listener) {\n      d3_geo_streamPolygon(object.coordinates, listener);\n    },\n    MultiPolygon: function(object, listener) {\n      var coordinates = object.coordinates, i = -1, n = coordinates.length;\n      while (++i < n) d3_geo_streamPolygon(coordinates[i], listener);\n    },\n    GeometryCollection: function(object, listener) {\n      var geometries = object.geometries, i = -1, n = geometries.length;\n      while (++i < n) d3_geo_streamGeometry(geometries[i], listener);\n    }\n  };\n  function d3_geo_streamLine(coordinates, listener, closed) {\n    var i = -1, n = coordinates.length - closed, coordinate;\n    listener.lineStart();\n    while (++i < n) coordinate = coordinates[i], listener.point(coordinate[0], coordinate[1], coordinate[2]);\n    listener.lineEnd();\n  }\n  function d3_geo_streamPolygon(coordinates, listener) {\n    var i = -1, n = coordinates.length;\n    listener.polygonStart();\n    while (++i < n) d3_geo_streamLine(coordinates[i], listener, 1);\n    listener.polygonEnd();\n  }\n  d3.geo.area = function(object) {\n    d3_geo_areaSum = 0;\n    d3.geo.stream(object, d3_geo_area);\n    return d3_geo_areaSum;\n  };\n  var d3_geo_areaSum, d3_geo_areaRingSum = new d3_adder();\n  var d3_geo_area = {\n    sphere: function() {\n      d3_geo_areaSum += 4 * π;\n    },\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function() {\n      d3_geo_areaRingSum.reset();\n      d3_geo_area.lineStart = d3_geo_areaRingStart;\n    },\n    polygonEnd: function() {\n      var area = 2 * d3_geo_areaRingSum;\n      d3_geo_areaSum += area < 0 ? 4 * π + area : area;\n      d3_geo_area.lineStart = d3_geo_area.lineEnd = d3_geo_area.point = d3_noop;\n    }\n  };\n  function d3_geo_areaRingStart() {\n    var λ00, φ00, λ0, cosφ0, sinφ0;\n    d3_geo_area.point = function(λ, φ) {\n      d3_geo_area.point = nextPoint;\n      λ0 = (λ00 = λ) * d3_radians, cosφ0 = Math.cos(φ = (φ00 = φ) * d3_radians / 2 + π / 4), \n      sinφ0 = Math.sin(φ);\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      φ = φ * d3_radians / 2 + π / 4;\n      var dλ = λ - λ0, sdλ = dλ >= 0 ? 1 : -1, adλ = sdλ * dλ, cosφ = Math.cos(φ), sinφ = Math.sin(φ), k = sinφ0 * sinφ, u = cosφ0 * cosφ + k * Math.cos(adλ), v = k * sdλ * Math.sin(adλ);\n      d3_geo_areaRingSum.add(Math.atan2(v, u));\n      λ0 = λ, cosφ0 = cosφ, sinφ0 = sinφ;\n    }\n    d3_geo_area.lineEnd = function() {\n      nextPoint(λ00, φ00);\n    };\n  }\n  function d3_geo_cartesian(spherical) {\n    var λ = spherical[0], φ = spherical[1], cosφ = Math.cos(φ);\n    return [ cosφ * Math.cos(λ), cosφ * Math.sin(λ), Math.sin(φ) ];\n  }\n  function d3_geo_cartesianDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n  }\n  function d3_geo_cartesianCross(a, b) {\n    return [ a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0] ];\n  }\n  function d3_geo_cartesianAdd(a, b) {\n    a[0] += b[0];\n    a[1] += b[1];\n    a[2] += b[2];\n  }\n  function d3_geo_cartesianScale(vector, k) {\n    return [ vector[0] * k, vector[1] * k, vector[2] * k ];\n  }\n  function d3_geo_cartesianNormalize(d) {\n    var l = Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n    d[0] /= l;\n    d[1] /= l;\n    d[2] /= l;\n  }\n  function d3_geo_spherical(cartesian) {\n    return [ Math.atan2(cartesian[1], cartesian[0]), d3_asin(cartesian[2]) ];\n  }\n  function d3_geo_sphericalEqual(a, b) {\n    return abs(a[0] - b[0]) < ε && abs(a[1] - b[1]) < ε;\n  }\n  d3.geo.bounds = function() {\n    var λ0, φ0, λ1, φ1, λ_, λ__, φ__, p0, dλSum, ranges, range;\n    var bound = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        bound.point = ringPoint;\n        bound.lineStart = ringStart;\n        bound.lineEnd = ringEnd;\n        dλSum = 0;\n        d3_geo_area.polygonStart();\n      },\n      polygonEnd: function() {\n        d3_geo_area.polygonEnd();\n        bound.point = point;\n        bound.lineStart = lineStart;\n        bound.lineEnd = lineEnd;\n        if (d3_geo_areaRingSum < 0) λ0 = -(λ1 = 180), φ0 = -(φ1 = 90); else if (dλSum > ε) φ1 = 90; else if (dλSum < -ε) φ0 = -90;\n        range[0] = λ0, range[1] = λ1;\n      }\n    };\n    function point(λ, φ) {\n      ranges.push(range = [ λ0 = λ, λ1 = λ ]);\n      if (φ < φ0) φ0 = φ;\n      if (φ > φ1) φ1 = φ;\n    }\n    function linePoint(λ, φ) {\n      var p = d3_geo_cartesian([ λ * d3_radians, φ * d3_radians ]);\n      if (p0) {\n        var normal = d3_geo_cartesianCross(p0, p), equatorial = [ normal[1], -normal[0], 0 ], inflection = d3_geo_cartesianCross(equatorial, normal);\n        d3_geo_cartesianNormalize(inflection);\n        inflection = d3_geo_spherical(inflection);\n        var dλ = λ - λ_, s = dλ > 0 ? 1 : -1, λi = inflection[0] * d3_degrees * s, antimeridian = abs(dλ) > 180;\n        if (antimeridian ^ (s * λ_ < λi && λi < s * λ)) {\n          var φi = inflection[1] * d3_degrees;\n          if (φi > φ1) φ1 = φi;\n        } else if (λi = (λi + 360) % 360 - 180, antimeridian ^ (s * λ_ < λi && λi < s * λ)) {\n          var φi = -inflection[1] * d3_degrees;\n          if (φi < φ0) φ0 = φi;\n        } else {\n          if (φ < φ0) φ0 = φ;\n          if (φ > φ1) φ1 = φ;\n        }\n        if (antimeridian) {\n          if (λ < λ_) {\n            if (angle(λ0, λ) > angle(λ0, λ1)) λ1 = λ;\n          } else {\n            if (angle(λ, λ1) > angle(λ0, λ1)) λ0 = λ;\n          }\n        } else {\n          if (λ1 >= λ0) {\n            if (λ < λ0) λ0 = λ;\n            if (λ > λ1) λ1 = λ;\n          } else {\n            if (λ > λ_) {\n              if (angle(λ0, λ) > angle(λ0, λ1)) λ1 = λ;\n            } else {\n              if (angle(λ, λ1) > angle(λ0, λ1)) λ0 = λ;\n            }\n          }\n        }\n      } else {\n        point(λ, φ);\n      }\n      p0 = p, λ_ = λ;\n    }\n    function lineStart() {\n      bound.point = linePoint;\n    }\n    function lineEnd() {\n      range[0] = λ0, range[1] = λ1;\n      bound.point = point;\n      p0 = null;\n    }\n    function ringPoint(λ, φ) {\n      if (p0) {\n        var dλ = λ - λ_;\n        dλSum += abs(dλ) > 180 ? dλ + (dλ > 0 ? 360 : -360) : dλ;\n      } else λ__ = λ, φ__ = φ;\n      d3_geo_area.point(λ, φ);\n      linePoint(λ, φ);\n    }\n    function ringStart() {\n      d3_geo_area.lineStart();\n    }\n    function ringEnd() {\n      ringPoint(λ__, φ__);\n      d3_geo_area.lineEnd();\n      if (abs(dλSum) > ε) λ0 = -(λ1 = 180);\n      range[0] = λ0, range[1] = λ1;\n      p0 = null;\n    }\n    function angle(λ0, λ1) {\n      return (λ1 -= λ0) < 0 ? λ1 + 360 : λ1;\n    }\n    function compareRanges(a, b) {\n      return a[0] - b[0];\n    }\n    function withinRange(x, range) {\n      return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n    }\n    return function(feature) {\n      φ1 = λ1 = -(λ0 = φ0 = Infinity);\n      ranges = [];\n      d3.geo.stream(feature, bound);\n      var n = ranges.length;\n      if (n) {\n        ranges.sort(compareRanges);\n        for (var i = 1, a = ranges[0], b, merged = [ a ]; i < n; ++i) {\n          b = ranges[i];\n          if (withinRange(b[0], a) || withinRange(b[1], a)) {\n            if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n            if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n          } else {\n            merged.push(a = b);\n          }\n        }\n        var best = -Infinity, dλ;\n        for (var n = merged.length - 1, i = 0, a = merged[n], b; i <= n; a = b, ++i) {\n          b = merged[i];\n          if ((dλ = angle(a[1], b[0])) > best) best = dλ, λ0 = b[0], λ1 = a[1];\n        }\n      }\n      ranges = range = null;\n      return λ0 === Infinity || φ0 === Infinity ? [ [ NaN, NaN ], [ NaN, NaN ] ] : [ [ λ0, φ0 ], [ λ1, φ1 ] ];\n    };\n  }();\n  d3.geo.centroid = function(object) {\n    d3_geo_centroidW0 = d3_geo_centroidW1 = d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n    d3.geo.stream(object, d3_geo_centroid);\n    var x = d3_geo_centroidX2, y = d3_geo_centroidY2, z = d3_geo_centroidZ2, m = x * x + y * y + z * z;\n    if (m < ε2) {\n      x = d3_geo_centroidX1, y = d3_geo_centroidY1, z = d3_geo_centroidZ1;\n      if (d3_geo_centroidW1 < ε) x = d3_geo_centroidX0, y = d3_geo_centroidY0, z = d3_geo_centroidZ0;\n      m = x * x + y * y + z * z;\n      if (m < ε2) return [ NaN, NaN ];\n    }\n    return [ Math.atan2(y, x) * d3_degrees, d3_asin(z / Math.sqrt(m)) * d3_degrees ];\n  };\n  var d3_geo_centroidW0, d3_geo_centroidW1, d3_geo_centroidX0, d3_geo_centroidY0, d3_geo_centroidZ0, d3_geo_centroidX1, d3_geo_centroidY1, d3_geo_centroidZ1, d3_geo_centroidX2, d3_geo_centroidY2, d3_geo_centroidZ2;\n  var d3_geo_centroid = {\n    sphere: d3_noop,\n    point: d3_geo_centroidPoint,\n    lineStart: d3_geo_centroidLineStart,\n    lineEnd: d3_geo_centroidLineEnd,\n    polygonStart: function() {\n      d3_geo_centroid.lineStart = d3_geo_centroidRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_centroid.lineStart = d3_geo_centroidLineStart;\n    }\n  };\n  function d3_geo_centroidPoint(λ, φ) {\n    λ *= d3_radians;\n    var cosφ = Math.cos(φ *= d3_radians);\n    d3_geo_centroidPointXYZ(cosφ * Math.cos(λ), cosφ * Math.sin(λ), Math.sin(φ));\n  }\n  function d3_geo_centroidPointXYZ(x, y, z) {\n    ++d3_geo_centroidW0;\n    d3_geo_centroidX0 += (x - d3_geo_centroidX0) / d3_geo_centroidW0;\n    d3_geo_centroidY0 += (y - d3_geo_centroidY0) / d3_geo_centroidW0;\n    d3_geo_centroidZ0 += (z - d3_geo_centroidZ0) / d3_geo_centroidW0;\n  }\n  function d3_geo_centroidLineStart() {\n    var x0, y0, z0;\n    d3_geo_centroid.point = function(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians);\n      x0 = cosφ * Math.cos(λ);\n      y0 = cosφ * Math.sin(λ);\n      z0 = Math.sin(φ);\n      d3_geo_centroid.point = nextPoint;\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians), x = cosφ * Math.cos(λ), y = cosφ * Math.sin(λ), z = Math.sin(φ), w = Math.atan2(Math.sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n  function d3_geo_centroidLineEnd() {\n    d3_geo_centroid.point = d3_geo_centroidPoint;\n  }\n  function d3_geo_centroidRingStart() {\n    var λ00, φ00, x0, y0, z0;\n    d3_geo_centroid.point = function(λ, φ) {\n      λ00 = λ, φ00 = φ;\n      d3_geo_centroid.point = nextPoint;\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians);\n      x0 = cosφ * Math.cos(λ);\n      y0 = cosφ * Math.sin(λ);\n      z0 = Math.sin(φ);\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    };\n    d3_geo_centroid.lineEnd = function() {\n      nextPoint(λ00, φ00);\n      d3_geo_centroid.lineEnd = d3_geo_centroidLineEnd;\n      d3_geo_centroid.point = d3_geo_centroidPoint;\n    };\n    function nextPoint(λ, φ) {\n      λ *= d3_radians;\n      var cosφ = Math.cos(φ *= d3_radians), x = cosφ * Math.cos(λ), y = cosφ * Math.sin(λ), z = Math.sin(φ), cx = y0 * z - z0 * y, cy = z0 * x - x0 * z, cz = x0 * y - y0 * x, m = Math.sqrt(cx * cx + cy * cy + cz * cz), u = x0 * x + y0 * y + z0 * z, v = m && -d3_acos(u) / m, w = Math.atan2(m, u);\n      d3_geo_centroidX2 += v * cx;\n      d3_geo_centroidY2 += v * cy;\n      d3_geo_centroidZ2 += v * cz;\n      d3_geo_centroidW1 += w;\n      d3_geo_centroidX1 += w * (x0 + (x0 = x));\n      d3_geo_centroidY1 += w * (y0 + (y0 = y));\n      d3_geo_centroidZ1 += w * (z0 + (z0 = z));\n      d3_geo_centroidPointXYZ(x0, y0, z0);\n    }\n  }\n  function d3_geo_compose(a, b) {\n    function compose(x, y) {\n      return x = a(x, y), b(x[0], x[1]);\n    }\n    if (a.invert && b.invert) compose.invert = function(x, y) {\n      return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n    };\n    return compose;\n  }\n  function d3_true() {\n    return true;\n  }\n  function d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener) {\n    var subject = [], clip = [];\n    segments.forEach(function(segment) {\n      if ((n = segment.length - 1) <= 0) return;\n      var n, p0 = segment[0], p1 = segment[n];\n      if (d3_geo_sphericalEqual(p0, p1)) {\n        listener.lineStart();\n        for (var i = 0; i < n; ++i) listener.point((p0 = segment[i])[0], p0[1]);\n        listener.lineEnd();\n        return;\n      }\n      var a = new d3_geo_clipPolygonIntersection(p0, segment, null, true), b = new d3_geo_clipPolygonIntersection(p0, null, a, false);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n      a = new d3_geo_clipPolygonIntersection(p1, segment, null, false);\n      b = new d3_geo_clipPolygonIntersection(p1, null, a, true);\n      a.o = b;\n      subject.push(a);\n      clip.push(b);\n    });\n    clip.sort(compare);\n    d3_geo_clipPolygonLinkCircular(subject);\n    d3_geo_clipPolygonLinkCircular(clip);\n    if (!subject.length) return;\n    for (var i = 0, entry = clipStartInside, n = clip.length; i < n; ++i) {\n      clip[i].e = entry = !entry;\n    }\n    var start = subject[0], points, point;\n    while (1) {\n      var current = start, isSubject = true;\n      while (current.v) if ((current = current.n) === start) return;\n      points = current.z;\n      listener.lineStart();\n      do {\n        current.v = current.o.v = true;\n        if (current.e) {\n          if (isSubject) {\n            for (var i = 0, n = points.length; i < n; ++i) listener.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.n.x, 1, listener);\n          }\n          current = current.n;\n        } else {\n          if (isSubject) {\n            points = current.p.z;\n            for (var i = points.length - 1; i >= 0; --i) listener.point((point = points[i])[0], point[1]);\n          } else {\n            interpolate(current.x, current.p.x, -1, listener);\n          }\n          current = current.p;\n        }\n        current = current.o;\n        points = current.z;\n        isSubject = !isSubject;\n      } while (!current.v);\n      listener.lineEnd();\n    }\n  }\n  function d3_geo_clipPolygonLinkCircular(array) {\n    if (!(n = array.length)) return;\n    var n, i = 0, a = array[0], b;\n    while (++i < n) {\n      a.n = b = array[i];\n      b.p = a;\n      a = b;\n    }\n    a.n = b = array[0];\n    b.p = a;\n  }\n  function d3_geo_clipPolygonIntersection(point, points, other, entry) {\n    this.x = point;\n    this.z = points;\n    this.o = other;\n    this.e = entry;\n    this.v = false;\n    this.n = this.p = null;\n  }\n  function d3_geo_clip(pointVisible, clipLine, interpolate, clipStart) {\n    return function(rotate, listener) {\n      var line = clipLine(listener), rotatedClipStart = rotate.invert(clipStart[0], clipStart[1]);\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          clip.point = pointRing;\n          clip.lineStart = ringStart;\n          clip.lineEnd = ringEnd;\n          segments = [];\n          polygon = [];\n        },\n        polygonEnd: function() {\n          clip.point = point;\n          clip.lineStart = lineStart;\n          clip.lineEnd = lineEnd;\n          segments = d3.merge(segments);\n          var clipStartInside = d3_geo_pointInPolygon(rotatedClipStart, polygon);\n          if (segments.length) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            d3_geo_clipPolygon(segments, d3_geo_clipSort, clipStartInside, interpolate, listener);\n          } else if (clipStartInside) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n            interpolate(null, null, 1, listener);\n            listener.lineEnd();\n          }\n          if (polygonStarted) listener.polygonEnd(), polygonStarted = false;\n          segments = polygon = null;\n        },\n        sphere: function() {\n          listener.polygonStart();\n          listener.lineStart();\n          interpolate(null, null, 1, listener);\n          listener.lineEnd();\n          listener.polygonEnd();\n        }\n      };\n      function point(λ, φ) {\n        var point = rotate(λ, φ);\n        if (pointVisible(λ = point[0], φ = point[1])) listener.point(λ, φ);\n      }\n      function pointLine(λ, φ) {\n        var point = rotate(λ, φ);\n        line.point(point[0], point[1]);\n      }\n      function lineStart() {\n        clip.point = pointLine;\n        line.lineStart();\n      }\n      function lineEnd() {\n        clip.point = point;\n        line.lineEnd();\n      }\n      var segments;\n      var buffer = d3_geo_clipBufferListener(), ringListener = clipLine(buffer), polygonStarted = false, polygon, ring;\n      function pointRing(λ, φ) {\n        ring.push([ λ, φ ]);\n        var point = rotate(λ, φ);\n        ringListener.point(point[0], point[1]);\n      }\n      function ringStart() {\n        ringListener.lineStart();\n        ring = [];\n      }\n      function ringEnd() {\n        pointRing(ring[0][0], ring[0][1]);\n        ringListener.lineEnd();\n        var clean = ringListener.clean(), ringSegments = buffer.buffer(), segment, n = ringSegments.length;\n        ring.pop();\n        polygon.push(ring);\n        ring = null;\n        if (!n) return;\n        if (clean & 1) {\n          segment = ringSegments[0];\n          var n = segment.length - 1, i = -1, point;\n          if (n > 0) {\n            if (!polygonStarted) listener.polygonStart(), polygonStarted = true;\n            listener.lineStart();\n            while (++i < n) listener.point((point = segment[i])[0], point[1]);\n            listener.lineEnd();\n          }\n          return;\n        }\n        if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n        segments.push(ringSegments.filter(d3_geo_clipSegmentLength1));\n      }\n      return clip;\n    };\n  }\n  function d3_geo_clipSegmentLength1(segment) {\n    return segment.length > 1;\n  }\n  function d3_geo_clipBufferListener() {\n    var lines = [], line;\n    return {\n      lineStart: function() {\n        lines.push(line = []);\n      },\n      point: function(λ, φ) {\n        line.push([ λ, φ ]);\n      },\n      lineEnd: d3_noop,\n      buffer: function() {\n        var buffer = lines;\n        lines = [];\n        line = null;\n        return buffer;\n      },\n      rejoin: function() {\n        if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n      }\n    };\n  }\n  function d3_geo_clipSort(a, b) {\n    return ((a = a.x)[0] < 0 ? a[1] - halfπ - ε : halfπ - a[1]) - ((b = b.x)[0] < 0 ? b[1] - halfπ - ε : halfπ - b[1]);\n  }\n  var d3_geo_clipAntimeridian = d3_geo_clip(d3_true, d3_geo_clipAntimeridianLine, d3_geo_clipAntimeridianInterpolate, [ -π, -π / 2 ]);\n  function d3_geo_clipAntimeridianLine(listener) {\n    var λ0 = NaN, φ0 = NaN, sλ0 = NaN, clean;\n    return {\n      lineStart: function() {\n        listener.lineStart();\n        clean = 1;\n      },\n      point: function(λ1, φ1) {\n        var sλ1 = λ1 > 0 ? π : -π, dλ = abs(λ1 - λ0);\n        if (abs(dλ - π) < ε) {\n          listener.point(λ0, φ0 = (φ0 + φ1) / 2 > 0 ? halfπ : -halfπ);\n          listener.point(sλ0, φ0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(sλ1, φ0);\n          listener.point(λ1, φ0);\n          clean = 0;\n        } else if (sλ0 !== sλ1 && dλ >= π) {\n          if (abs(λ0 - sλ0) < ε) λ0 -= sλ0 * ε;\n          if (abs(λ1 - sλ1) < ε) λ1 -= sλ1 * ε;\n          φ0 = d3_geo_clipAntimeridianIntersect(λ0, φ0, λ1, φ1);\n          listener.point(sλ0, φ0);\n          listener.lineEnd();\n          listener.lineStart();\n          listener.point(sλ1, φ0);\n          clean = 0;\n        }\n        listener.point(λ0 = λ1, φ0 = φ1);\n        sλ0 = sλ1;\n      },\n      lineEnd: function() {\n        listener.lineEnd();\n        λ0 = φ0 = NaN;\n      },\n      clean: function() {\n        return 2 - clean;\n      }\n    };\n  }\n  function d3_geo_clipAntimeridianIntersect(λ0, φ0, λ1, φ1) {\n    var cosφ0, cosφ1, sinλ0_λ1 = Math.sin(λ0 - λ1);\n    return abs(sinλ0_λ1) > ε ? Math.atan((Math.sin(φ0) * (cosφ1 = Math.cos(φ1)) * Math.sin(λ1) - Math.sin(φ1) * (cosφ0 = Math.cos(φ0)) * Math.sin(λ0)) / (cosφ0 * cosφ1 * sinλ0_λ1)) : (φ0 + φ1) / 2;\n  }\n  function d3_geo_clipAntimeridianInterpolate(from, to, direction, listener) {\n    var φ;\n    if (from == null) {\n      φ = direction * halfπ;\n      listener.point(-π, φ);\n      listener.point(0, φ);\n      listener.point(π, φ);\n      listener.point(π, 0);\n      listener.point(π, -φ);\n      listener.point(0, -φ);\n      listener.point(-π, -φ);\n      listener.point(-π, 0);\n      listener.point(-π, φ);\n    } else if (abs(from[0] - to[0]) > ε) {\n      var s = from[0] < to[0] ? π : -π;\n      φ = direction * s / 2;\n      listener.point(-s, φ);\n      listener.point(0, φ);\n      listener.point(s, φ);\n    } else {\n      listener.point(to[0], to[1]);\n    }\n  }\n  function d3_geo_pointInPolygon(point, polygon) {\n    var meridian = point[0], parallel = point[1], meridianNormal = [ Math.sin(meridian), -Math.cos(meridian), 0 ], polarAngle = 0, winding = 0;\n    d3_geo_areaRingSum.reset();\n    for (var i = 0, n = polygon.length; i < n; ++i) {\n      var ring = polygon[i], m = ring.length;\n      if (!m) continue;\n      var point0 = ring[0], λ0 = point0[0], φ0 = point0[1] / 2 + π / 4, sinφ0 = Math.sin(φ0), cosφ0 = Math.cos(φ0), j = 1;\n      while (true) {\n        if (j === m) j = 0;\n        point = ring[j];\n        var λ = point[0], φ = point[1] / 2 + π / 4, sinφ = Math.sin(φ), cosφ = Math.cos(φ), dλ = λ - λ0, sdλ = dλ >= 0 ? 1 : -1, adλ = sdλ * dλ, antimeridian = adλ > π, k = sinφ0 * sinφ;\n        d3_geo_areaRingSum.add(Math.atan2(k * sdλ * Math.sin(adλ), cosφ0 * cosφ + k * Math.cos(adλ)));\n        polarAngle += antimeridian ? dλ + sdλ * τ : dλ;\n        if (antimeridian ^ λ0 >= meridian ^ λ >= meridian) {\n          var arc = d3_geo_cartesianCross(d3_geo_cartesian(point0), d3_geo_cartesian(point));\n          d3_geo_cartesianNormalize(arc);\n          var intersection = d3_geo_cartesianCross(meridianNormal, arc);\n          d3_geo_cartesianNormalize(intersection);\n          var φarc = (antimeridian ^ dλ >= 0 ? -1 : 1) * d3_asin(intersection[2]);\n          if (parallel > φarc || parallel === φarc && (arc[0] || arc[1])) {\n            winding += antimeridian ^ dλ >= 0 ? 1 : -1;\n          }\n        }\n        if (!j++) break;\n        λ0 = λ, sinφ0 = sinφ, cosφ0 = cosφ, point0 = point;\n      }\n    }\n    return (polarAngle < -ε || polarAngle < ε && d3_geo_areaRingSum < 0) ^ winding & 1;\n  }\n  function d3_geo_clipCircle(radius) {\n    var cr = Math.cos(radius), smallRadius = cr > 0, notHemisphere = abs(cr) > ε, interpolate = d3_geo_circleInterpolate(radius, 6 * d3_radians);\n    return d3_geo_clip(visible, clipLine, interpolate, smallRadius ? [ 0, -radius ] : [ -π, radius - π ]);\n    function visible(λ, φ) {\n      return Math.cos(λ) * Math.cos(φ) > cr;\n    }\n    function clipLine(listener) {\n      var point0, c0, v0, v00, clean;\n      return {\n        lineStart: function() {\n          v00 = v0 = false;\n          clean = 1;\n        },\n        point: function(λ, φ) {\n          var point1 = [ λ, φ ], point2, v = visible(λ, φ), c = smallRadius ? v ? 0 : code(λ, φ) : v ? code(λ + (λ < 0 ? π : -π), φ) : 0;\n          if (!point0 && (v00 = v0 = v)) listener.lineStart();\n          if (v !== v0) {\n            point2 = intersect(point0, point1);\n            if (d3_geo_sphericalEqual(point0, point2) || d3_geo_sphericalEqual(point1, point2)) {\n              point1[0] += ε;\n              point1[1] += ε;\n              v = visible(point1[0], point1[1]);\n            }\n          }\n          if (v !== v0) {\n            clean = 0;\n            if (v) {\n              listener.lineStart();\n              point2 = intersect(point1, point0);\n              listener.point(point2[0], point2[1]);\n            } else {\n              point2 = intersect(point0, point1);\n              listener.point(point2[0], point2[1]);\n              listener.lineEnd();\n            }\n            point0 = point2;\n          } else if (notHemisphere && point0 && smallRadius ^ v) {\n            var t;\n            if (!(c & c0) && (t = intersect(point1, point0, true))) {\n              clean = 0;\n              if (smallRadius) {\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n              } else {\n                listener.point(t[1][0], t[1][1]);\n                listener.lineEnd();\n                listener.lineStart();\n                listener.point(t[0][0], t[0][1]);\n              }\n            }\n          }\n          if (v && (!point0 || !d3_geo_sphericalEqual(point0, point1))) {\n            listener.point(point1[0], point1[1]);\n          }\n          point0 = point1, v0 = v, c0 = c;\n        },\n        lineEnd: function() {\n          if (v0) listener.lineEnd();\n          point0 = null;\n        },\n        clean: function() {\n          return clean | (v00 && v0) << 1;\n        }\n      };\n    }\n    function intersect(a, b, two) {\n      var pa = d3_geo_cartesian(a), pb = d3_geo_cartesian(b);\n      var n1 = [ 1, 0, 0 ], n2 = d3_geo_cartesianCross(pa, pb), n2n2 = d3_geo_cartesianDot(n2, n2), n1n2 = n2[0], determinant = n2n2 - n1n2 * n1n2;\n      if (!determinant) return !two && a;\n      var c1 = cr * n2n2 / determinant, c2 = -cr * n1n2 / determinant, n1xn2 = d3_geo_cartesianCross(n1, n2), A = d3_geo_cartesianScale(n1, c1), B = d3_geo_cartesianScale(n2, c2);\n      d3_geo_cartesianAdd(A, B);\n      var u = n1xn2, w = d3_geo_cartesianDot(A, u), uu = d3_geo_cartesianDot(u, u), t2 = w * w - uu * (d3_geo_cartesianDot(A, A) - 1);\n      if (t2 < 0) return;\n      var t = Math.sqrt(t2), q = d3_geo_cartesianScale(u, (-w - t) / uu);\n      d3_geo_cartesianAdd(q, A);\n      q = d3_geo_spherical(q);\n      if (!two) return q;\n      var λ0 = a[0], λ1 = b[0], φ0 = a[1], φ1 = b[1], z;\n      if (λ1 < λ0) z = λ0, λ0 = λ1, λ1 = z;\n      var δλ = λ1 - λ0, polar = abs(δλ - π) < ε, meridian = polar || δλ < ε;\n      if (!polar && φ1 < φ0) z = φ0, φ0 = φ1, φ1 = z;\n      if (meridian ? polar ? φ0 + φ1 > 0 ^ q[1] < (abs(q[0] - λ0) < ε ? φ0 : φ1) : φ0 <= q[1] && q[1] <= φ1 : δλ > π ^ (λ0 <= q[0] && q[0] <= λ1)) {\n        var q1 = d3_geo_cartesianScale(u, (-w + t) / uu);\n        d3_geo_cartesianAdd(q1, A);\n        return [ q, d3_geo_spherical(q1) ];\n      }\n    }\n    function code(λ, φ) {\n      var r = smallRadius ? radius : π - radius, code = 0;\n      if (λ < -r) code |= 1; else if (λ > r) code |= 2;\n      if (φ < -r) code |= 4; else if (φ > r) code |= 8;\n      return code;\n    }\n  }\n  function d3_geom_clipLine(x0, y0, x1, y1) {\n    return function(line) {\n      var a = line.a, b = line.b, ax = a.x, ay = a.y, bx = b.x, by = b.y, t0 = 0, t1 = 1, dx = bx - ax, dy = by - ay, r;\n      r = x0 - ax;\n      if (!dx && r > 0) return;\n      r /= dx;\n      if (dx < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dx > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n      r = x1 - ax;\n      if (!dx && r < 0) return;\n      r /= dx;\n      if (dx < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dx > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n      r = y0 - ay;\n      if (!dy && r > 0) return;\n      r /= dy;\n      if (dy < 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      } else if (dy > 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      }\n      r = y1 - ay;\n      if (!dy && r < 0) return;\n      r /= dy;\n      if (dy < 0) {\n        if (r > t1) return;\n        if (r > t0) t0 = r;\n      } else if (dy > 0) {\n        if (r < t0) return;\n        if (r < t1) t1 = r;\n      }\n      if (t0 > 0) line.a = {\n        x: ax + t0 * dx,\n        y: ay + t0 * dy\n      };\n      if (t1 < 1) line.b = {\n        x: ax + t1 * dx,\n        y: ay + t1 * dy\n      };\n      return line;\n    };\n  }\n  var d3_geo_clipExtentMAX = 1e9;\n  d3.geo.clipExtent = function() {\n    var x0, y0, x1, y1, stream, clip, clipExtent = {\n      stream: function(output) {\n        if (stream) stream.valid = false;\n        stream = clip(output);\n        stream.valid = true;\n        return stream;\n      },\n      extent: function(_) {\n        if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];\n        clip = d3_geo_clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]);\n        if (stream) stream.valid = false, stream = null;\n        return clipExtent;\n      }\n    };\n    return clipExtent.extent([ [ 0, 0 ], [ 960, 500 ] ]);\n  };\n  function d3_geo_clipExtent(x0, y0, x1, y1) {\n    return function(listener) {\n      var listener_ = listener, bufferListener = d3_geo_clipBufferListener(), clipLine = d3_geom_clipLine(x0, y0, x1, y1), segments, polygon, ring;\n      var clip = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          listener = bufferListener;\n          segments = [];\n          polygon = [];\n          clean = true;\n        },\n        polygonEnd: function() {\n          listener = listener_;\n          segments = d3.merge(segments);\n          var clipStartInside = insidePolygon([ x0, y1 ]), inside = clean && clipStartInside, visible = segments.length;\n          if (inside || visible) {\n            listener.polygonStart();\n            if (inside) {\n              listener.lineStart();\n              interpolate(null, null, 1, listener);\n              listener.lineEnd();\n            }\n            if (visible) {\n              d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener);\n            }\n            listener.polygonEnd();\n          }\n          segments = polygon = ring = null;\n        }\n      };\n      function insidePolygon(p) {\n        var wn = 0, n = polygon.length, y = p[1];\n        for (var i = 0; i < n; ++i) {\n          for (var j = 1, v = polygon[i], m = v.length, a = v[0], b; j < m; ++j) {\n            b = v[j];\n            if (a[1] <= y) {\n              if (b[1] > y && d3_cross2d(a, b, p) > 0) ++wn;\n            } else {\n              if (b[1] <= y && d3_cross2d(a, b, p) < 0) --wn;\n            }\n            a = b;\n          }\n        }\n        return wn !== 0;\n      }\n      function interpolate(from, to, direction, listener) {\n        var a = 0, a1 = 0;\n        if (from == null || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoints(from, to) < 0 ^ direction > 0) {\n          do {\n            listener.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n          } while ((a = (a + direction + 4) % 4) !== a1);\n        } else {\n          listener.point(to[0], to[1]);\n        }\n      }\n      function pointVisible(x, y) {\n        return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n      }\n      function point(x, y) {\n        if (pointVisible(x, y)) listener.point(x, y);\n      }\n      var x__, y__, v__, x_, y_, v_, first, clean;\n      function lineStart() {\n        clip.point = linePoint;\n        if (polygon) polygon.push(ring = []);\n        first = true;\n        v_ = false;\n        x_ = y_ = NaN;\n      }\n      function lineEnd() {\n        if (segments) {\n          linePoint(x__, y__);\n          if (v__ && v_) bufferListener.rejoin();\n          segments.push(bufferListener.buffer());\n        }\n        clip.point = point;\n        if (v_) listener.lineEnd();\n      }\n      function linePoint(x, y) {\n        x = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, x));\n        y = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, y));\n        var v = pointVisible(x, y);\n        if (polygon) ring.push([ x, y ]);\n        if (first) {\n          x__ = x, y__ = y, v__ = v;\n          first = false;\n          if (v) {\n            listener.lineStart();\n            listener.point(x, y);\n          }\n        } else {\n          if (v && v_) listener.point(x, y); else {\n            var l = {\n              a: {\n                x: x_,\n                y: y_\n              },\n              b: {\n                x: x,\n                y: y\n              }\n            };\n            if (clipLine(l)) {\n              if (!v_) {\n                listener.lineStart();\n                listener.point(l.a.x, l.a.y);\n              }\n              listener.point(l.b.x, l.b.y);\n              if (!v) listener.lineEnd();\n              clean = false;\n            } else if (v) {\n              listener.lineStart();\n              listener.point(x, y);\n              clean = false;\n            }\n          }\n        }\n        x_ = x, y_ = y, v_ = v;\n      }\n      return clip;\n    };\n    function corner(p, direction) {\n      return abs(p[0] - x0) < ε ? direction > 0 ? 0 : 3 : abs(p[0] - x1) < ε ? direction > 0 ? 2 : 1 : abs(p[1] - y0) < ε ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2;\n    }\n    function compare(a, b) {\n      return comparePoints(a.x, b.x);\n    }\n    function comparePoints(a, b) {\n      var ca = corner(a, 1), cb = corner(b, 1);\n      return ca !== cb ? ca - cb : ca === 0 ? b[1] - a[1] : ca === 1 ? a[0] - b[0] : ca === 2 ? a[1] - b[1] : b[0] - a[0];\n    }\n  }\n  function d3_geo_conic(projectAt) {\n    var φ0 = 0, φ1 = π / 3, m = d3_geo_projectionMutator(projectAt), p = m(φ0, φ1);\n    p.parallels = function(_) {\n      if (!arguments.length) return [ φ0 / π * 180, φ1 / π * 180 ];\n      return m(φ0 = _[0] * π / 180, φ1 = _[1] * π / 180);\n    };\n    return p;\n  }\n  function d3_geo_conicEqualArea(φ0, φ1) {\n    var sinφ0 = Math.sin(φ0), n = (sinφ0 + Math.sin(φ1)) / 2, C = 1 + sinφ0 * (2 * n - sinφ0), ρ0 = Math.sqrt(C) / n;\n    function forward(λ, φ) {\n      var ρ = Math.sqrt(C - 2 * n * Math.sin(φ)) / n;\n      return [ ρ * Math.sin(λ *= n), ρ0 - ρ * Math.cos(λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = ρ0 - y;\n      return [ Math.atan2(x, ρ0_y) / n, d3_asin((C - (x * x + ρ0_y * ρ0_y) * n * n) / (2 * n)) ];\n    };\n    return forward;\n  }\n  (d3.geo.conicEqualArea = function() {\n    return d3_geo_conic(d3_geo_conicEqualArea);\n  }).raw = d3_geo_conicEqualArea;\n  d3.geo.albers = function() {\n    return d3.geo.conicEqualArea().rotate([ 96, 0 ]).center([ -.6, 38.7 ]).parallels([ 29.5, 45.5 ]).scale(1070);\n  };\n  d3.geo.albersUsa = function() {\n    var lower48 = d3.geo.albers();\n    var alaska = d3.geo.conicEqualArea().rotate([ 154, 0 ]).center([ -2, 58.5 ]).parallels([ 55, 65 ]);\n    var hawaii = d3.geo.conicEqualArea().rotate([ 157, 0 ]).center([ -3, 19.9 ]).parallels([ 8, 18 ]);\n    var point, pointStream = {\n      point: function(x, y) {\n        point = [ x, y ];\n      }\n    }, lower48Point, alaskaPoint, hawaiiPoint;\n    function albersUsa(coordinates) {\n      var x = coordinates[0], y = coordinates[1];\n      point = null;\n      (lower48Point(x, y), point) || (alaskaPoint(x, y), point) || hawaiiPoint(x, y);\n      return point;\n    }\n    albersUsa.invert = function(coordinates) {\n      var k = lower48.scale(), t = lower48.translate(), x = (coordinates[0] - t[0]) / k, y = (coordinates[1] - t[1]) / k;\n      return (y >= .12 && y < .234 && x >= -.425 && x < -.214 ? alaska : y >= .166 && y < .234 && x >= -.214 && x < -.115 ? hawaii : lower48).invert(coordinates);\n    };\n    albersUsa.stream = function(stream) {\n      var lower48Stream = lower48.stream(stream), alaskaStream = alaska.stream(stream), hawaiiStream = hawaii.stream(stream);\n      return {\n        point: function(x, y) {\n          lower48Stream.point(x, y);\n          alaskaStream.point(x, y);\n          hawaiiStream.point(x, y);\n        },\n        sphere: function() {\n          lower48Stream.sphere();\n          alaskaStream.sphere();\n          hawaiiStream.sphere();\n        },\n        lineStart: function() {\n          lower48Stream.lineStart();\n          alaskaStream.lineStart();\n          hawaiiStream.lineStart();\n        },\n        lineEnd: function() {\n          lower48Stream.lineEnd();\n          alaskaStream.lineEnd();\n          hawaiiStream.lineEnd();\n        },\n        polygonStart: function() {\n          lower48Stream.polygonStart();\n          alaskaStream.polygonStart();\n          hawaiiStream.polygonStart();\n        },\n        polygonEnd: function() {\n          lower48Stream.polygonEnd();\n          alaskaStream.polygonEnd();\n          hawaiiStream.polygonEnd();\n        }\n      };\n    };\n    albersUsa.precision = function(_) {\n      if (!arguments.length) return lower48.precision();\n      lower48.precision(_);\n      alaska.precision(_);\n      hawaii.precision(_);\n      return albersUsa;\n    };\n    albersUsa.scale = function(_) {\n      if (!arguments.length) return lower48.scale();\n      lower48.scale(_);\n      alaska.scale(_ * .35);\n      hawaii.scale(_);\n      return albersUsa.translate(lower48.translate());\n    };\n    albersUsa.translate = function(_) {\n      if (!arguments.length) return lower48.translate();\n      var k = lower48.scale(), x = +_[0], y = +_[1];\n      lower48Point = lower48.translate(_).clipExtent([ [ x - .455 * k, y - .238 * k ], [ x + .455 * k, y + .238 * k ] ]).stream(pointStream).point;\n      alaskaPoint = alaska.translate([ x - .307 * k, y + .201 * k ]).clipExtent([ [ x - .425 * k + ε, y + .12 * k + ε ], [ x - .214 * k - ε, y + .234 * k - ε ] ]).stream(pointStream).point;\n      hawaiiPoint = hawaii.translate([ x - .205 * k, y + .212 * k ]).clipExtent([ [ x - .214 * k + ε, y + .166 * k + ε ], [ x - .115 * k - ε, y + .234 * k - ε ] ]).stream(pointStream).point;\n      return albersUsa;\n    };\n    return albersUsa.scale(1070);\n  };\n  var d3_geo_pathAreaSum, d3_geo_pathAreaPolygon, d3_geo_pathArea = {\n    point: d3_noop,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: function() {\n      d3_geo_pathAreaPolygon = 0;\n      d3_geo_pathArea.lineStart = d3_geo_pathAreaRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_pathArea.lineStart = d3_geo_pathArea.lineEnd = d3_geo_pathArea.point = d3_noop;\n      d3_geo_pathAreaSum += abs(d3_geo_pathAreaPolygon / 2);\n    }\n  };\n  function d3_geo_pathAreaRingStart() {\n    var x00, y00, x0, y0;\n    d3_geo_pathArea.point = function(x, y) {\n      d3_geo_pathArea.point = nextPoint;\n      x00 = x0 = x, y00 = y0 = y;\n    };\n    function nextPoint(x, y) {\n      d3_geo_pathAreaPolygon += y0 * x - x0 * y;\n      x0 = x, y0 = y;\n    }\n    d3_geo_pathArea.lineEnd = function() {\n      nextPoint(x00, y00);\n    };\n  }\n  var d3_geo_pathBoundsX0, d3_geo_pathBoundsY0, d3_geo_pathBoundsX1, d3_geo_pathBoundsY1;\n  var d3_geo_pathBounds = {\n    point: d3_geo_pathBoundsPoint,\n    lineStart: d3_noop,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n  function d3_geo_pathBoundsPoint(x, y) {\n    if (x < d3_geo_pathBoundsX0) d3_geo_pathBoundsX0 = x;\n    if (x > d3_geo_pathBoundsX1) d3_geo_pathBoundsX1 = x;\n    if (y < d3_geo_pathBoundsY0) d3_geo_pathBoundsY0 = y;\n    if (y > d3_geo_pathBoundsY1) d3_geo_pathBoundsY1 = y;\n  }\n  function d3_geo_pathBuffer() {\n    var pointCircle = d3_geo_pathBufferCircle(4.5), buffer = [];\n    var stream = {\n      point: point,\n      lineStart: function() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function(_) {\n        pointCircle = d3_geo_pathBufferCircle(_);\n        return stream;\n      },\n      result: function() {\n        if (buffer.length) {\n          var result = buffer.join(\"\");\n          buffer = [];\n          return result;\n        }\n      }\n    };\n    function point(x, y) {\n      buffer.push(\"M\", x, \",\", y, pointCircle);\n    }\n    function pointLineStart(x, y) {\n      buffer.push(\"M\", x, \",\", y);\n      stream.point = pointLine;\n    }\n    function pointLine(x, y) {\n      buffer.push(\"L\", x, \",\", y);\n    }\n    function lineEnd() {\n      stream.point = point;\n    }\n    function lineEndPolygon() {\n      buffer.push(\"Z\");\n    }\n    return stream;\n  }\n  function d3_geo_pathBufferCircle(radius) {\n    return \"m0,\" + radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius + \"z\";\n  }\n  var d3_geo_pathCentroid = {\n    point: d3_geo_pathCentroidPoint,\n    lineStart: d3_geo_pathCentroidLineStart,\n    lineEnd: d3_geo_pathCentroidLineEnd,\n    polygonStart: function() {\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidRingStart;\n    },\n    polygonEnd: function() {\n      d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n      d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidLineStart;\n      d3_geo_pathCentroid.lineEnd = d3_geo_pathCentroidLineEnd;\n    }\n  };\n  function d3_geo_pathCentroidPoint(x, y) {\n    d3_geo_centroidX0 += x;\n    d3_geo_centroidY0 += y;\n    ++d3_geo_centroidZ0;\n  }\n  function d3_geo_pathCentroidLineStart() {\n    var x0, y0;\n    d3_geo_pathCentroid.point = function(x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    };\n    function nextPoint(x, y) {\n      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n  }\n  function d3_geo_pathCentroidLineEnd() {\n    d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint;\n  }\n  function d3_geo_pathCentroidRingStart() {\n    var x00, y00, x0, y0;\n    d3_geo_pathCentroid.point = function(x, y) {\n      d3_geo_pathCentroid.point = nextPoint;\n      d3_geo_pathCentroidPoint(x00 = x0 = x, y00 = y0 = y);\n    };\n    function nextPoint(x, y) {\n      var dx = x - x0, dy = y - y0, z = Math.sqrt(dx * dx + dy * dy);\n      d3_geo_centroidX1 += z * (x0 + x) / 2;\n      d3_geo_centroidY1 += z * (y0 + y) / 2;\n      d3_geo_centroidZ1 += z;\n      z = y0 * x - x0 * y;\n      d3_geo_centroidX2 += z * (x0 + x);\n      d3_geo_centroidY2 += z * (y0 + y);\n      d3_geo_centroidZ2 += z * 3;\n      d3_geo_pathCentroidPoint(x0 = x, y0 = y);\n    }\n    d3_geo_pathCentroid.lineEnd = function() {\n      nextPoint(x00, y00);\n    };\n  }\n  function d3_geo_pathContext(context) {\n    var pointRadius = 4.5;\n    var stream = {\n      point: point,\n      lineStart: function() {\n        stream.point = pointLineStart;\n      },\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        stream.lineEnd = lineEndPolygon;\n      },\n      polygonEnd: function() {\n        stream.lineEnd = lineEnd;\n        stream.point = point;\n      },\n      pointRadius: function(_) {\n        pointRadius = _;\n        return stream;\n      },\n      result: d3_noop\n    };\n    function point(x, y) {\n      context.moveTo(x + pointRadius, y);\n      context.arc(x, y, pointRadius, 0, τ);\n    }\n    function pointLineStart(x, y) {\n      context.moveTo(x, y);\n      stream.point = pointLine;\n    }\n    function pointLine(x, y) {\n      context.lineTo(x, y);\n    }\n    function lineEnd() {\n      stream.point = point;\n    }\n    function lineEndPolygon() {\n      context.closePath();\n    }\n    return stream;\n  }\n  function d3_geo_resample(project) {\n    var δ2 = .5, cosMinDistance = Math.cos(30 * d3_radians), maxDepth = 16;\n    function resample(stream) {\n      return (maxDepth ? resampleRecursive : resampleNone)(stream);\n    }\n    function resampleNone(stream) {\n      return d3_geo_transformPoint(stream, function(x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      });\n    }\n    function resampleRecursive(stream) {\n      var λ00, φ00, x00, y00, a00, b00, c00, λ0, x0, y0, a0, b0, c0;\n      var resample = {\n        point: point,\n        lineStart: lineStart,\n        lineEnd: lineEnd,\n        polygonStart: function() {\n          stream.polygonStart();\n          resample.lineStart = ringStart;\n        },\n        polygonEnd: function() {\n          stream.polygonEnd();\n          resample.lineStart = lineStart;\n        }\n      };\n      function point(x, y) {\n        x = project(x, y);\n        stream.point(x[0], x[1]);\n      }\n      function lineStart() {\n        x0 = NaN;\n        resample.point = linePoint;\n        stream.lineStart();\n      }\n      function linePoint(λ, φ) {\n        var c = d3_geo_cartesian([ λ, φ ]), p = project(λ, φ);\n        resampleLineTo(x0, y0, λ0, a0, b0, c0, x0 = p[0], y0 = p[1], λ0 = λ, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n        stream.point(x0, y0);\n      }\n      function lineEnd() {\n        resample.point = point;\n        stream.lineEnd();\n      }\n      function ringStart() {\n        lineStart();\n        resample.point = ringPoint;\n        resample.lineEnd = ringEnd;\n      }\n      function ringPoint(λ, φ) {\n        linePoint(λ00 = λ, φ00 = φ), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n        resample.point = linePoint;\n      }\n      function ringEnd() {\n        resampleLineTo(x0, y0, λ0, a0, b0, c0, x00, y00, λ00, a00, b00, c00, maxDepth, stream);\n        resample.lineEnd = lineEnd;\n        lineEnd();\n      }\n      return resample;\n    }\n    function resampleLineTo(x0, y0, λ0, a0, b0, c0, x1, y1, λ1, a1, b1, c1, depth, stream) {\n      var dx = x1 - x0, dy = y1 - y0, d2 = dx * dx + dy * dy;\n      if (d2 > 4 * δ2 && depth--) {\n        var a = a0 + a1, b = b0 + b1, c = c0 + c1, m = Math.sqrt(a * a + b * b + c * c), φ2 = Math.asin(c /= m), λ2 = abs(abs(c) - 1) < ε || abs(λ0 - λ1) < ε ? (λ0 + λ1) / 2 : Math.atan2(b, a), p = project(λ2, φ2), x2 = p[0], y2 = p[1], dx2 = x2 - x0, dy2 = y2 - y0, dz = dy * dx2 - dx * dy2;\n        if (dz * dz / d2 > δ2 || abs((dx * dx2 + dy * dy2) / d2 - .5) > .3 || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) {\n          resampleLineTo(x0, y0, λ0, a0, b0, c0, x2, y2, λ2, a /= m, b /= m, c, depth, stream);\n          stream.point(x2, y2);\n          resampleLineTo(x2, y2, λ2, a, b, c, x1, y1, λ1, a1, b1, c1, depth, stream);\n        }\n      }\n    }\n    resample.precision = function(_) {\n      if (!arguments.length) return Math.sqrt(δ2);\n      maxDepth = (δ2 = _ * _) > 0 && 16;\n      return resample;\n    };\n    return resample;\n  }\n  d3.geo.path = function() {\n    var pointRadius = 4.5, projection, context, projectStream, contextStream, cacheStream;\n    function path(object) {\n      if (object) {\n        if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n        if (!cacheStream || !cacheStream.valid) cacheStream = projectStream(contextStream);\n        d3.geo.stream(object, cacheStream);\n      }\n      return contextStream.result();\n    }\n    path.area = function(object) {\n      d3_geo_pathAreaSum = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathArea));\n      return d3_geo_pathAreaSum;\n    };\n    path.centroid = function(object) {\n      d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0;\n      d3.geo.stream(object, projectStream(d3_geo_pathCentroid));\n      return d3_geo_centroidZ2 ? [ d3_geo_centroidX2 / d3_geo_centroidZ2, d3_geo_centroidY2 / d3_geo_centroidZ2 ] : d3_geo_centroidZ1 ? [ d3_geo_centroidX1 / d3_geo_centroidZ1, d3_geo_centroidY1 / d3_geo_centroidZ1 ] : d3_geo_centroidZ0 ? [ d3_geo_centroidX0 / d3_geo_centroidZ0, d3_geo_centroidY0 / d3_geo_centroidZ0 ] : [ NaN, NaN ];\n    };\n    path.bounds = function(object) {\n      d3_geo_pathBoundsX1 = d3_geo_pathBoundsY1 = -(d3_geo_pathBoundsX0 = d3_geo_pathBoundsY0 = Infinity);\n      d3.geo.stream(object, projectStream(d3_geo_pathBounds));\n      return [ [ d3_geo_pathBoundsX0, d3_geo_pathBoundsY0 ], [ d3_geo_pathBoundsX1, d3_geo_pathBoundsY1 ] ];\n    };\n    path.projection = function(_) {\n      if (!arguments.length) return projection;\n      projectStream = (projection = _) ? _.stream || d3_geo_pathProjectStream(_) : d3_identity;\n      return reset();\n    };\n    path.context = function(_) {\n      if (!arguments.length) return context;\n      contextStream = (context = _) == null ? new d3_geo_pathBuffer() : new d3_geo_pathContext(_);\n      if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n      return reset();\n    };\n    path.pointRadius = function(_) {\n      if (!arguments.length) return pointRadius;\n      pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n      return path;\n    };\n    function reset() {\n      cacheStream = null;\n      return path;\n    }\n    return path.projection(d3.geo.albersUsa()).context(null);\n  };\n  function d3_geo_pathProjectStream(project) {\n    var resample = d3_geo_resample(function(x, y) {\n      return project([ x * d3_degrees, y * d3_degrees ]);\n    });\n    return function(stream) {\n      return d3_geo_projectionRadians(resample(stream));\n    };\n  }\n  d3.geo.transform = function(methods) {\n    return {\n      stream: function(stream) {\n        var transform = new d3_geo_transform(stream);\n        for (var k in methods) transform[k] = methods[k];\n        return transform;\n      }\n    };\n  };\n  function d3_geo_transform(stream) {\n    this.stream = stream;\n  }\n  d3_geo_transform.prototype = {\n    point: function(x, y) {\n      this.stream.point(x, y);\n    },\n    sphere: function() {\n      this.stream.sphere();\n    },\n    lineStart: function() {\n      this.stream.lineStart();\n    },\n    lineEnd: function() {\n      this.stream.lineEnd();\n    },\n    polygonStart: function() {\n      this.stream.polygonStart();\n    },\n    polygonEnd: function() {\n      this.stream.polygonEnd();\n    }\n  };\n  function d3_geo_transformPoint(stream, point) {\n    return {\n      point: point,\n      sphere: function() {\n        stream.sphere();\n      },\n      lineStart: function() {\n        stream.lineStart();\n      },\n      lineEnd: function() {\n        stream.lineEnd();\n      },\n      polygonStart: function() {\n        stream.polygonStart();\n      },\n      polygonEnd: function() {\n        stream.polygonEnd();\n      }\n    };\n  }\n  d3.geo.projection = d3_geo_projection;\n  d3.geo.projectionMutator = d3_geo_projectionMutator;\n  function d3_geo_projection(project) {\n    return d3_geo_projectionMutator(function() {\n      return project;\n    })();\n  }\n  function d3_geo_projectionMutator(projectAt) {\n    var project, rotate, projectRotate, projectResample = d3_geo_resample(function(x, y) {\n      x = project(x, y);\n      return [ x[0] * k + δx, δy - x[1] * k ];\n    }), k = 150, x = 480, y = 250, λ = 0, φ = 0, δλ = 0, δφ = 0, δγ = 0, δx, δy, preclip = d3_geo_clipAntimeridian, postclip = d3_identity, clipAngle = null, clipExtent = null, stream;\n    function projection(point) {\n      point = projectRotate(point[0] * d3_radians, point[1] * d3_radians);\n      return [ point[0] * k + δx, δy - point[1] * k ];\n    }\n    function invert(point) {\n      point = projectRotate.invert((point[0] - δx) / k, (δy - point[1]) / k);\n      return point && [ point[0] * d3_degrees, point[1] * d3_degrees ];\n    }\n    projection.stream = function(output) {\n      if (stream) stream.valid = false;\n      stream = d3_geo_projectionRadians(preclip(rotate, projectResample(postclip(output))));\n      stream.valid = true;\n      return stream;\n    };\n    projection.clipAngle = function(_) {\n      if (!arguments.length) return clipAngle;\n      preclip = _ == null ? (clipAngle = _, d3_geo_clipAntimeridian) : d3_geo_clipCircle((clipAngle = +_) * d3_radians);\n      return invalidate();\n    };\n    projection.clipExtent = function(_) {\n      if (!arguments.length) return clipExtent;\n      clipExtent = _;\n      postclip = _ ? d3_geo_clipExtent(_[0][0], _[0][1], _[1][0], _[1][1]) : d3_identity;\n      return invalidate();\n    };\n    projection.scale = function(_) {\n      if (!arguments.length) return k;\n      k = +_;\n      return reset();\n    };\n    projection.translate = function(_) {\n      if (!arguments.length) return [ x, y ];\n      x = +_[0];\n      y = +_[1];\n      return reset();\n    };\n    projection.center = function(_) {\n      if (!arguments.length) return [ λ * d3_degrees, φ * d3_degrees ];\n      λ = _[0] % 360 * d3_radians;\n      φ = _[1] % 360 * d3_radians;\n      return reset();\n    };\n    projection.rotate = function(_) {\n      if (!arguments.length) return [ δλ * d3_degrees, δφ * d3_degrees, δγ * d3_degrees ];\n      δλ = _[0] % 360 * d3_radians;\n      δφ = _[1] % 360 * d3_radians;\n      δγ = _.length > 2 ? _[2] % 360 * d3_radians : 0;\n      return reset();\n    };\n    d3.rebind(projection, projectResample, \"precision\");\n    function reset() {\n      projectRotate = d3_geo_compose(rotate = d3_geo_rotation(δλ, δφ, δγ), project);\n      var center = project(λ, φ);\n      δx = x - center[0] * k;\n      δy = y + center[1] * k;\n      return invalidate();\n    }\n    function invalidate() {\n      if (stream) stream.valid = false, stream = null;\n      return projection;\n    }\n    return function() {\n      project = projectAt.apply(this, arguments);\n      projection.invert = project.invert && invert;\n      return reset();\n    };\n  }\n  function d3_geo_projectionRadians(stream) {\n    return d3_geo_transformPoint(stream, function(x, y) {\n      stream.point(x * d3_radians, y * d3_radians);\n    });\n  }\n  function d3_geo_equirectangular(λ, φ) {\n    return [ λ, φ ];\n  }\n  (d3.geo.equirectangular = function() {\n    return d3_geo_projection(d3_geo_equirectangular);\n  }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular;\n  d3.geo.rotation = function(rotate) {\n    rotate = d3_geo_rotation(rotate[0] % 360 * d3_radians, rotate[1] * d3_radians, rotate.length > 2 ? rotate[2] * d3_radians : 0);\n    function forward(coordinates) {\n      coordinates = rotate(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    }\n    forward.invert = function(coordinates) {\n      coordinates = rotate.invert(coordinates[0] * d3_radians, coordinates[1] * d3_radians);\n      return coordinates[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates;\n    };\n    return forward;\n  };\n  function d3_geo_identityRotation(λ, φ) {\n    return [ λ > π ? λ - τ : λ < -π ? λ + τ : λ, φ ];\n  }\n  d3_geo_identityRotation.invert = d3_geo_equirectangular;\n  function d3_geo_rotation(δλ, δφ, δγ) {\n    return δλ ? δφ || δγ ? d3_geo_compose(d3_geo_rotationλ(δλ), d3_geo_rotationφγ(δφ, δγ)) : d3_geo_rotationλ(δλ) : δφ || δγ ? d3_geo_rotationφγ(δφ, δγ) : d3_geo_identityRotation;\n  }\n  function d3_geo_forwardRotationλ(δλ) {\n    return function(λ, φ) {\n      return λ += δλ, [ λ > π ? λ - τ : λ < -π ? λ + τ : λ, φ ];\n    };\n  }\n  function d3_geo_rotationλ(δλ) {\n    var rotation = d3_geo_forwardRotationλ(δλ);\n    rotation.invert = d3_geo_forwardRotationλ(-δλ);\n    return rotation;\n  }\n  function d3_geo_rotationφγ(δφ, δγ) {\n    var cosδφ = Math.cos(δφ), sinδφ = Math.sin(δφ), cosδγ = Math.cos(δγ), sinδγ = Math.sin(δγ);\n    function rotation(λ, φ) {\n      var cosφ = Math.cos(φ), x = Math.cos(λ) * cosφ, y = Math.sin(λ) * cosφ, z = Math.sin(φ), k = z * cosδφ + x * sinδφ;\n      return [ Math.atan2(y * cosδγ - k * sinδγ, x * cosδφ - z * sinδφ), d3_asin(k * cosδγ + y * sinδγ) ];\n    }\n    rotation.invert = function(λ, φ) {\n      var cosφ = Math.cos(φ), x = Math.cos(λ) * cosφ, y = Math.sin(λ) * cosφ, z = Math.sin(φ), k = z * cosδγ - y * sinδγ;\n      return [ Math.atan2(y * cosδγ + z * sinδγ, x * cosδφ + k * sinδφ), d3_asin(k * cosδφ - x * sinδφ) ];\n    };\n    return rotation;\n  }\n  d3.geo.circle = function() {\n    var origin = [ 0, 0 ], angle, precision = 6, interpolate;\n    function circle() {\n      var center = typeof origin === \"function\" ? origin.apply(this, arguments) : origin, rotate = d3_geo_rotation(-center[0] * d3_radians, -center[1] * d3_radians, 0).invert, ring = [];\n      interpolate(null, null, 1, {\n        point: function(x, y) {\n          ring.push(x = rotate(x, y));\n          x[0] *= d3_degrees, x[1] *= d3_degrees;\n        }\n      });\n      return {\n        type: \"Polygon\",\n        coordinates: [ ring ]\n      };\n    }\n    circle.origin = function(x) {\n      if (!arguments.length) return origin;\n      origin = x;\n      return circle;\n    };\n    circle.angle = function(x) {\n      if (!arguments.length) return angle;\n      interpolate = d3_geo_circleInterpolate((angle = +x) * d3_radians, precision * d3_radians);\n      return circle;\n    };\n    circle.precision = function(_) {\n      if (!arguments.length) return precision;\n      interpolate = d3_geo_circleInterpolate(angle * d3_radians, (precision = +_) * d3_radians);\n      return circle;\n    };\n    return circle.angle(90);\n  };\n  function d3_geo_circleInterpolate(radius, precision) {\n    var cr = Math.cos(radius), sr = Math.sin(radius);\n    return function(from, to, direction, listener) {\n      var step = direction * precision;\n      if (from != null) {\n        from = d3_geo_circleAngle(cr, from);\n        to = d3_geo_circleAngle(cr, to);\n        if (direction > 0 ? from < to : from > to) from += direction * τ;\n      } else {\n        from = radius + direction * τ;\n        to = radius - .5 * step;\n      }\n      for (var point, t = from; direction > 0 ? t > to : t < to; t -= step) {\n        listener.point((point = d3_geo_spherical([ cr, -sr * Math.cos(t), -sr * Math.sin(t) ]))[0], point[1]);\n      }\n    };\n  }\n  function d3_geo_circleAngle(cr, point) {\n    var a = d3_geo_cartesian(point);\n    a[0] -= cr;\n    d3_geo_cartesianNormalize(a);\n    var angle = d3_acos(-a[1]);\n    return ((-a[2] < 0 ? -angle : angle) + 2 * Math.PI - ε) % (2 * Math.PI);\n  }\n  d3.geo.distance = function(a, b) {\n    var Δλ = (b[0] - a[0]) * d3_radians, φ0 = a[1] * d3_radians, φ1 = b[1] * d3_radians, sinΔλ = Math.sin(Δλ), cosΔλ = Math.cos(Δλ), sinφ0 = Math.sin(φ0), cosφ0 = Math.cos(φ0), sinφ1 = Math.sin(φ1), cosφ1 = Math.cos(φ1), t;\n    return Math.atan2(Math.sqrt((t = cosφ1 * sinΔλ) * t + (t = cosφ0 * sinφ1 - sinφ0 * cosφ1 * cosΔλ) * t), sinφ0 * sinφ1 + cosφ0 * cosφ1 * cosΔλ);\n  };\n  d3.geo.graticule = function() {\n    var x1, x0, X1, X0, y1, y0, Y1, Y0, dx = 10, dy = dx, DX = 90, DY = 360, x, y, X, Y, precision = 2.5;\n    function graticule() {\n      return {\n        type: \"MultiLineString\",\n        coordinates: lines()\n      };\n    }\n    function lines() {\n      return d3.range(Math.ceil(X0 / DX) * DX, X1, DX).map(X).concat(d3.range(Math.ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(d3.range(Math.ceil(x0 / dx) * dx, x1, dx).filter(function(x) {\n        return abs(x % DX) > ε;\n      }).map(x)).concat(d3.range(Math.ceil(y0 / dy) * dy, y1, dy).filter(function(y) {\n        return abs(y % DY) > ε;\n      }).map(y));\n    }\n    graticule.lines = function() {\n      return lines().map(function(coordinates) {\n        return {\n          type: \"LineString\",\n          coordinates: coordinates\n        };\n      });\n    };\n    graticule.outline = function() {\n      return {\n        type: \"Polygon\",\n        coordinates: [ X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1)) ]\n      };\n    };\n    graticule.extent = function(_) {\n      if (!arguments.length) return graticule.minorExtent();\n      return graticule.majorExtent(_).minorExtent(_);\n    };\n    graticule.majorExtent = function(_) {\n      if (!arguments.length) return [ [ X0, Y0 ], [ X1, Y1 ] ];\n      X0 = +_[0][0], X1 = +_[1][0];\n      Y0 = +_[0][1], Y1 = +_[1][1];\n      if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n      if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.minorExtent = function(_) {\n      if (!arguments.length) return [ [ x0, y0 ], [ x1, y1 ] ];\n      x0 = +_[0][0], x1 = +_[1][0];\n      y0 = +_[0][1], y1 = +_[1][1];\n      if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n      if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n      return graticule.precision(precision);\n    };\n    graticule.step = function(_) {\n      if (!arguments.length) return graticule.minorStep();\n      return graticule.majorStep(_).minorStep(_);\n    };\n    graticule.majorStep = function(_) {\n      if (!arguments.length) return [ DX, DY ];\n      DX = +_[0], DY = +_[1];\n      return graticule;\n    };\n    graticule.minorStep = function(_) {\n      if (!arguments.length) return [ dx, dy ];\n      dx = +_[0], dy = +_[1];\n      return graticule;\n    };\n    graticule.precision = function(_) {\n      if (!arguments.length) return precision;\n      precision = +_;\n      x = d3_geo_graticuleX(y0, y1, 90);\n      y = d3_geo_graticuleY(x0, x1, precision);\n      X = d3_geo_graticuleX(Y0, Y1, 90);\n      Y = d3_geo_graticuleY(X0, X1, precision);\n      return graticule;\n    };\n    return graticule.majorExtent([ [ -180, -90 + ε ], [ 180, 90 - ε ] ]).minorExtent([ [ -180, -80 - ε ], [ 180, 80 + ε ] ]);\n  };\n  function d3_geo_graticuleX(y0, y1, dy) {\n    var y = d3.range(y0, y1 - ε, dy).concat(y1);\n    return function(x) {\n      return y.map(function(y) {\n        return [ x, y ];\n      });\n    };\n  }\n  function d3_geo_graticuleY(x0, x1, dx) {\n    var x = d3.range(x0, x1 - ε, dx).concat(x1);\n    return function(y) {\n      return x.map(function(x) {\n        return [ x, y ];\n      });\n    };\n  }\n  function d3_source(d) {\n    return d.source;\n  }\n  function d3_target(d) {\n    return d.target;\n  }\n  d3.geo.greatArc = function() {\n    var source = d3_source, source_, target = d3_target, target_;\n    function greatArc() {\n      return {\n        type: \"LineString\",\n        coordinates: [ source_ || source.apply(this, arguments), target_ || target.apply(this, arguments) ]\n      };\n    }\n    greatArc.distance = function() {\n      return d3.geo.distance(source_ || source.apply(this, arguments), target_ || target.apply(this, arguments));\n    };\n    greatArc.source = function(_) {\n      if (!arguments.length) return source;\n      source = _, source_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n    greatArc.target = function(_) {\n      if (!arguments.length) return target;\n      target = _, target_ = typeof _ === \"function\" ? null : _;\n      return greatArc;\n    };\n    greatArc.precision = function() {\n      return arguments.length ? greatArc : 0;\n    };\n    return greatArc;\n  };\n  d3.geo.interpolate = function(source, target) {\n    return d3_geo_interpolate(source[0] * d3_radians, source[1] * d3_radians, target[0] * d3_radians, target[1] * d3_radians);\n  };\n  function d3_geo_interpolate(x0, y0, x1, y1) {\n    var cy0 = Math.cos(y0), sy0 = Math.sin(y0), cy1 = Math.cos(y1), sy1 = Math.sin(y1), kx0 = cy0 * Math.cos(x0), ky0 = cy0 * Math.sin(x0), kx1 = cy1 * Math.cos(x1), ky1 = cy1 * Math.sin(x1), d = 2 * Math.asin(Math.sqrt(d3_haversin(y1 - y0) + cy0 * cy1 * d3_haversin(x1 - x0))), k = 1 / Math.sin(d);\n    var interpolate = d ? function(t) {\n      var B = Math.sin(t *= d) * k, A = Math.sin(d - t) * k, x = A * kx0 + B * kx1, y = A * ky0 + B * ky1, z = A * sy0 + B * sy1;\n      return [ Math.atan2(y, x) * d3_degrees, Math.atan2(z, Math.sqrt(x * x + y * y)) * d3_degrees ];\n    } : function() {\n      return [ x0 * d3_degrees, y0 * d3_degrees ];\n    };\n    interpolate.distance = d;\n    return interpolate;\n  }\n  d3.geo.length = function(object) {\n    d3_geo_lengthSum = 0;\n    d3.geo.stream(object, d3_geo_length);\n    return d3_geo_lengthSum;\n  };\n  var d3_geo_lengthSum;\n  var d3_geo_length = {\n    sphere: d3_noop,\n    point: d3_noop,\n    lineStart: d3_geo_lengthLineStart,\n    lineEnd: d3_noop,\n    polygonStart: d3_noop,\n    polygonEnd: d3_noop\n  };\n  function d3_geo_lengthLineStart() {\n    var λ0, sinφ0, cosφ0;\n    d3_geo_length.point = function(λ, φ) {\n      λ0 = λ * d3_radians, sinφ0 = Math.sin(φ *= d3_radians), cosφ0 = Math.cos(φ);\n      d3_geo_length.point = nextPoint;\n    };\n    d3_geo_length.lineEnd = function() {\n      d3_geo_length.point = d3_geo_length.lineEnd = d3_noop;\n    };\n    function nextPoint(λ, φ) {\n      var sinφ = Math.sin(φ *= d3_radians), cosφ = Math.cos(φ), t = abs((λ *= d3_radians) - λ0), cosΔλ = Math.cos(t);\n      d3_geo_lengthSum += Math.atan2(Math.sqrt((t = cosφ * Math.sin(t)) * t + (t = cosφ0 * sinφ - sinφ0 * cosφ * cosΔλ) * t), sinφ0 * sinφ + cosφ0 * cosφ * cosΔλ);\n      λ0 = λ, sinφ0 = sinφ, cosφ0 = cosφ;\n    }\n  }\n  function d3_geo_azimuthal(scale, angle) {\n    function azimuthal(λ, φ) {\n      var cosλ = Math.cos(λ), cosφ = Math.cos(φ), k = scale(cosλ * cosφ);\n      return [ k * cosφ * Math.sin(λ), k * Math.sin(φ) ];\n    }\n    azimuthal.invert = function(x, y) {\n      var ρ = Math.sqrt(x * x + y * y), c = angle(ρ), sinc = Math.sin(c), cosc = Math.cos(c);\n      return [ Math.atan2(x * sinc, ρ * cosc), Math.asin(ρ && y * sinc / ρ) ];\n    };\n    return azimuthal;\n  }\n  var d3_geo_azimuthalEqualArea = d3_geo_azimuthal(function(cosλcosφ) {\n    return Math.sqrt(2 / (1 + cosλcosφ));\n  }, function(ρ) {\n    return 2 * Math.asin(ρ / 2);\n  });\n  (d3.geo.azimuthalEqualArea = function() {\n    return d3_geo_projection(d3_geo_azimuthalEqualArea);\n  }).raw = d3_geo_azimuthalEqualArea;\n  var d3_geo_azimuthalEquidistant = d3_geo_azimuthal(function(cosλcosφ) {\n    var c = Math.acos(cosλcosφ);\n    return c && c / Math.sin(c);\n  }, d3_identity);\n  (d3.geo.azimuthalEquidistant = function() {\n    return d3_geo_projection(d3_geo_azimuthalEquidistant);\n  }).raw = d3_geo_azimuthalEquidistant;\n  function d3_geo_conicConformal(φ0, φ1) {\n    var cosφ0 = Math.cos(φ0), t = function(φ) {\n      return Math.tan(π / 4 + φ / 2);\n    }, n = φ0 === φ1 ? Math.sin(φ0) : Math.log(cosφ0 / Math.cos(φ1)) / Math.log(t(φ1) / t(φ0)), F = cosφ0 * Math.pow(t(φ0), n) / n;\n    if (!n) return d3_geo_mercator;\n    function forward(λ, φ) {\n      if (F > 0) {\n        if (φ < -halfπ + ε) φ = -halfπ + ε;\n      } else {\n        if (φ > halfπ - ε) φ = halfπ - ε;\n      }\n      var ρ = F / Math.pow(t(φ), n);\n      return [ ρ * Math.sin(n * λ), F - ρ * Math.cos(n * λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = F - y, ρ = d3_sgn(n) * Math.sqrt(x * x + ρ0_y * ρ0_y);\n      return [ Math.atan2(x, ρ0_y) / n, 2 * Math.atan(Math.pow(F / ρ, 1 / n)) - halfπ ];\n    };\n    return forward;\n  }\n  (d3.geo.conicConformal = function() {\n    return d3_geo_conic(d3_geo_conicConformal);\n  }).raw = d3_geo_conicConformal;\n  function d3_geo_conicEquidistant(φ0, φ1) {\n    var cosφ0 = Math.cos(φ0), n = φ0 === φ1 ? Math.sin(φ0) : (cosφ0 - Math.cos(φ1)) / (φ1 - φ0), G = cosφ0 / n + φ0;\n    if (abs(n) < ε) return d3_geo_equirectangular;\n    function forward(λ, φ) {\n      var ρ = G - φ;\n      return [ ρ * Math.sin(n * λ), G - ρ * Math.cos(n * λ) ];\n    }\n    forward.invert = function(x, y) {\n      var ρ0_y = G - y;\n      return [ Math.atan2(x, ρ0_y) / n, G - d3_sgn(n) * Math.sqrt(x * x + ρ0_y * ρ0_y) ];\n    };\n    return forward;\n  }\n  (d3.geo.conicEquidistant = function() {\n    return d3_geo_conic(d3_geo_conicEquidistant);\n  }).raw = d3_geo_conicEquidistant;\n  var d3_geo_gnomonic = d3_geo_azimuthal(function(cosλcosφ) {\n    return 1 / cosλcosφ;\n  }, Math.atan);\n  (d3.geo.gnomonic = function() {\n    return d3_geo_projection(d3_geo_gnomonic);\n  }).raw = d3_geo_gnomonic;\n  function d3_geo_mercator(λ, φ) {\n    return [ λ, Math.log(Math.tan(π / 4 + φ / 2)) ];\n  }\n  d3_geo_mercator.invert = function(x, y) {\n    return [ x, 2 * Math.atan(Math.exp(y)) - halfπ ];\n  };\n  function d3_geo_mercatorProjection(project) {\n    var m = d3_geo_projection(project), scale = m.scale, translate = m.translate, clipExtent = m.clipExtent, clipAuto;\n    m.scale = function() {\n      var v = scale.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n    m.translate = function() {\n      var v = translate.apply(m, arguments);\n      return v === m ? clipAuto ? m.clipExtent(null) : m : v;\n    };\n    m.clipExtent = function(_) {\n      var v = clipExtent.apply(m, arguments);\n      if (v === m) {\n        if (clipAuto = _ == null) {\n          var k = π * scale(), t = translate();\n          clipExtent([ [ t[0] - k, t[1] - k ], [ t[0] + k, t[1] + k ] ]);\n        }\n      } else if (clipAuto) {\n        v = null;\n      }\n      return v;\n    };\n    return m.clipExtent(null);\n  }\n  (d3.geo.mercator = function() {\n    return d3_geo_mercatorProjection(d3_geo_mercator);\n  }).raw = d3_geo_mercator;\n  var d3_geo_orthographic = d3_geo_azimuthal(function() {\n    return 1;\n  }, Math.asin);\n  (d3.geo.orthographic = function() {\n    return d3_geo_projection(d3_geo_orthographic);\n  }).raw = d3_geo_orthographic;\n  var d3_geo_stereographic = d3_geo_azimuthal(function(cosλcosφ) {\n    return 1 / (1 + cosλcosφ);\n  }, function(ρ) {\n    return 2 * Math.atan(ρ);\n  });\n  (d3.geo.stereographic = function() {\n    return d3_geo_projection(d3_geo_stereographic);\n  }).raw = d3_geo_stereographic;\n  function d3_geo_transverseMercator(λ, φ) {\n    return [ Math.log(Math.tan(π / 4 + φ / 2)), -λ ];\n  }\n  d3_geo_transverseMercator.invert = function(x, y) {\n    return [ -y, 2 * Math.atan(Math.exp(x)) - halfπ ];\n  };\n  (d3.geo.transverseMercator = function() {\n    var projection = d3_geo_mercatorProjection(d3_geo_transverseMercator), center = projection.center, rotate = projection.rotate;\n    projection.center = function(_) {\n      return _ ? center([ -_[1], _[0] ]) : (_ = center(), [ _[1], -_[0] ]);\n    };\n    projection.rotate = function(_) {\n      return _ ? rotate([ _[0], _[1], _.length > 2 ? _[2] + 90 : 90 ]) : (_ = rotate(), \n      [ _[0], _[1], _[2] - 90 ]);\n    };\n    return rotate([ 0, 0, 90 ]);\n  }).raw = d3_geo_transverseMercator;\n  d3.geom = {};\n  function d3_geom_pointX(d) {\n    return d[0];\n  }\n  function d3_geom_pointY(d) {\n    return d[1];\n  }\n  d3.geom.hull = function(vertices) {\n    var x = d3_geom_pointX, y = d3_geom_pointY;\n    if (arguments.length) return hull(vertices);\n    function hull(data) {\n      if (data.length < 3) return [];\n      var fx = d3_functor(x), fy = d3_functor(y), i, n = data.length, points = [], flippedPoints = [];\n      for (i = 0; i < n; i++) {\n        points.push([ +fx.call(this, data[i], i), +fy.call(this, data[i], i), i ]);\n      }\n      points.sort(d3_geom_hullOrder);\n      for (i = 0; i < n; i++) flippedPoints.push([ points[i][0], -points[i][1] ]);\n      var upper = d3_geom_hullUpper(points), lower = d3_geom_hullUpper(flippedPoints);\n      var skipLeft = lower[0] === upper[0], skipRight = lower[lower.length - 1] === upper[upper.length - 1], polygon = [];\n      for (i = upper.length - 1; i >= 0; --i) polygon.push(data[points[upper[i]][2]]);\n      for (i = +skipLeft; i < lower.length - skipRight; ++i) polygon.push(data[points[lower[i]][2]]);\n      return polygon;\n    }\n    hull.x = function(_) {\n      return arguments.length ? (x = _, hull) : x;\n    };\n    hull.y = function(_) {\n      return arguments.length ? (y = _, hull) : y;\n    };\n    return hull;\n  };\n  function d3_geom_hullUpper(points) {\n    var n = points.length, hull = [ 0, 1 ], hs = 2;\n    for (var i = 2; i < n; i++) {\n      while (hs > 1 && d3_cross2d(points[hull[hs - 2]], points[hull[hs - 1]], points[i]) <= 0) --hs;\n      hull[hs++] = i;\n    }\n    return hull.slice(0, hs);\n  }\n  function d3_geom_hullOrder(a, b) {\n    return a[0] - b[0] || a[1] - b[1];\n  }\n  d3.geom.polygon = function(coordinates) {\n    d3_subclass(coordinates, d3_geom_polygonPrototype);\n    return coordinates;\n  };\n  var d3_geom_polygonPrototype = d3.geom.polygon.prototype = [];\n  d3_geom_polygonPrototype.area = function() {\n    var i = -1, n = this.length, a, b = this[n - 1], area = 0;\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      area += a[1] * b[0] - a[0] * b[1];\n    }\n    return area * .5;\n  };\n  d3_geom_polygonPrototype.centroid = function(k) {\n    var i = -1, n = this.length, x = 0, y = 0, a, b = this[n - 1], c;\n    if (!arguments.length) k = -1 / (6 * this.area());\n    while (++i < n) {\n      a = b;\n      b = this[i];\n      c = a[0] * b[1] - b[0] * a[1];\n      x += (a[0] + b[0]) * c;\n      y += (a[1] + b[1]) * c;\n    }\n    return [ x * k, y * k ];\n  };\n  d3_geom_polygonPrototype.clip = function(subject) {\n    var input, closed = d3_geom_polygonClosed(subject), i = -1, n = this.length - d3_geom_polygonClosed(this), j, m, a = this[n - 1], b, c, d;\n    while (++i < n) {\n      input = subject.slice();\n      subject.length = 0;\n      b = this[i];\n      c = input[(m = input.length - closed) - 1];\n      j = -1;\n      while (++j < m) {\n        d = input[j];\n        if (d3_geom_polygonInside(d, a, b)) {\n          if (!d3_geom_polygonInside(c, a, b)) {\n            subject.push(d3_geom_polygonIntersect(c, d, a, b));\n          }\n          subject.push(d);\n        } else if (d3_geom_polygonInside(c, a, b)) {\n          subject.push(d3_geom_polygonIntersect(c, d, a, b));\n        }\n        c = d;\n      }\n      if (closed) subject.push(subject[0]);\n      a = b;\n    }\n    return subject;\n  };\n  function d3_geom_polygonInside(p, a, b) {\n    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0]);\n  }\n  function d3_geom_polygonIntersect(c, d, a, b) {\n    var x1 = c[0], x3 = a[0], x21 = d[0] - x1, x43 = b[0] - x3, y1 = c[1], y3 = a[1], y21 = d[1] - y1, y43 = b[1] - y3, ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);\n    return [ x1 + ua * x21, y1 + ua * y21 ];\n  }\n  function d3_geom_polygonClosed(coordinates) {\n    var a = coordinates[0], b = coordinates[coordinates.length - 1];\n    return !(a[0] - b[0] || a[1] - b[1]);\n  }\n  var d3_geom_voronoiEdges, d3_geom_voronoiCells, d3_geom_voronoiBeaches, d3_geom_voronoiBeachPool = [], d3_geom_voronoiFirstCircle, d3_geom_voronoiCircles, d3_geom_voronoiCirclePool = [];\n  function d3_geom_voronoiBeach() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.edge = this.site = this.circle = null;\n  }\n  function d3_geom_voronoiCreateBeach(site) {\n    var beach = d3_geom_voronoiBeachPool.pop() || new d3_geom_voronoiBeach();\n    beach.site = site;\n    return beach;\n  }\n  function d3_geom_voronoiDetachBeach(beach) {\n    d3_geom_voronoiDetachCircle(beach);\n    d3_geom_voronoiBeaches.remove(beach);\n    d3_geom_voronoiBeachPool.push(beach);\n    d3_geom_voronoiRedBlackNode(beach);\n  }\n  function d3_geom_voronoiRemoveBeach(beach) {\n    var circle = beach.circle, x = circle.x, y = circle.cy, vertex = {\n      x: x,\n      y: y\n    }, previous = beach.P, next = beach.N, disappearing = [ beach ];\n    d3_geom_voronoiDetachBeach(beach);\n    var lArc = previous;\n    while (lArc.circle && abs(x - lArc.circle.x) < ε && abs(y - lArc.circle.cy) < ε) {\n      previous = lArc.P;\n      disappearing.unshift(lArc);\n      d3_geom_voronoiDetachBeach(lArc);\n      lArc = previous;\n    }\n    disappearing.unshift(lArc);\n    d3_geom_voronoiDetachCircle(lArc);\n    var rArc = next;\n    while (rArc.circle && abs(x - rArc.circle.x) < ε && abs(y - rArc.circle.cy) < ε) {\n      next = rArc.N;\n      disappearing.push(rArc);\n      d3_geom_voronoiDetachBeach(rArc);\n      rArc = next;\n    }\n    disappearing.push(rArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var nArcs = disappearing.length, iArc;\n    for (iArc = 1; iArc < nArcs; ++iArc) {\n      rArc = disappearing[iArc];\n      lArc = disappearing[iArc - 1];\n      d3_geom_voronoiSetEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n    }\n    lArc = disappearing[0];\n    rArc = disappearing[nArcs - 1];\n    rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, rArc.site, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n  function d3_geom_voronoiAddBeach(site) {\n    var x = site.x, directrix = site.y, lArc, rArc, dxl, dxr, node = d3_geom_voronoiBeaches._;\n    while (node) {\n      dxl = d3_geom_voronoiLeftBreakPoint(node, directrix) - x;\n      if (dxl > ε) node = node.L; else {\n        dxr = x - d3_geom_voronoiRightBreakPoint(node, directrix);\n        if (dxr > ε) {\n          if (!node.R) {\n            lArc = node;\n            break;\n          }\n          node = node.R;\n        } else {\n          if (dxl > -ε) {\n            lArc = node.P;\n            rArc = node;\n          } else if (dxr > -ε) {\n            lArc = node;\n            rArc = node.N;\n          } else {\n            lArc = rArc = node;\n          }\n          break;\n        }\n      }\n    }\n    var newArc = d3_geom_voronoiCreateBeach(site);\n    d3_geom_voronoiBeaches.insert(lArc, newArc);\n    if (!lArc && !rArc) return;\n    if (lArc === rArc) {\n      d3_geom_voronoiDetachCircle(lArc);\n      rArc = d3_geom_voronoiCreateBeach(lArc.site);\n      d3_geom_voronoiBeaches.insert(newArc, rArc);\n      newArc.edge = rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      d3_geom_voronoiAttachCircle(lArc);\n      d3_geom_voronoiAttachCircle(rArc);\n      return;\n    }\n    if (!rArc) {\n      newArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site);\n      return;\n    }\n    d3_geom_voronoiDetachCircle(lArc);\n    d3_geom_voronoiDetachCircle(rArc);\n    var lSite = lArc.site, ax = lSite.x, ay = lSite.y, bx = site.x - ax, by = site.y - ay, rSite = rArc.site, cx = rSite.x - ax, cy = rSite.y - ay, d = 2 * (bx * cy - by * cx), hb = bx * bx + by * by, hc = cx * cx + cy * cy, vertex = {\n      x: (cy * hb - by * hc) / d + ax,\n      y: (bx * hc - cx * hb) / d + ay\n    };\n    d3_geom_voronoiSetEdgeEnd(rArc.edge, lSite, rSite, vertex);\n    newArc.edge = d3_geom_voronoiCreateEdge(lSite, site, null, vertex);\n    rArc.edge = d3_geom_voronoiCreateEdge(site, rSite, null, vertex);\n    d3_geom_voronoiAttachCircle(lArc);\n    d3_geom_voronoiAttachCircle(rArc);\n  }\n  function d3_geom_voronoiLeftBreakPoint(arc, directrix) {\n    var site = arc.site, rfocx = site.x, rfocy = site.y, pby2 = rfocy - directrix;\n    if (!pby2) return rfocx;\n    var lArc = arc.P;\n    if (!lArc) return -Infinity;\n    site = lArc.site;\n    var lfocx = site.x, lfocy = site.y, plby2 = lfocy - directrix;\n    if (!plby2) return lfocx;\n    var hl = lfocx - rfocx, aby2 = 1 / pby2 - 1 / plby2, b = hl / plby2;\n    if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n    return (rfocx + lfocx) / 2;\n  }\n  function d3_geom_voronoiRightBreakPoint(arc, directrix) {\n    var rArc = arc.N;\n    if (rArc) return d3_geom_voronoiLeftBreakPoint(rArc, directrix);\n    var site = arc.site;\n    return site.y === directrix ? site.x : Infinity;\n  }\n  function d3_geom_voronoiCell(site) {\n    this.site = site;\n    this.edges = [];\n  }\n  d3_geom_voronoiCell.prototype.prepare = function() {\n    var halfEdges = this.edges, iHalfEdge = halfEdges.length, edge;\n    while (iHalfEdge--) {\n      edge = halfEdges[iHalfEdge].edge;\n      if (!edge.b || !edge.a) halfEdges.splice(iHalfEdge, 1);\n    }\n    halfEdges.sort(d3_geom_voronoiHalfEdgeOrder);\n    return halfEdges.length;\n  };\n  function d3_geom_voronoiCloseCells(extent) {\n    var x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], x2, y2, x3, y3, cells = d3_geom_voronoiCells, iCell = cells.length, cell, iHalfEdge, halfEdges, nHalfEdges, start, end;\n    while (iCell--) {\n      cell = cells[iCell];\n      if (!cell || !cell.prepare()) continue;\n      halfEdges = cell.edges;\n      nHalfEdges = halfEdges.length;\n      iHalfEdge = 0;\n      while (iHalfEdge < nHalfEdges) {\n        end = halfEdges[iHalfEdge].end(), x3 = end.x, y3 = end.y;\n        start = halfEdges[++iHalfEdge % nHalfEdges].start(), x2 = start.x, y2 = start.y;\n        if (abs(x3 - x2) > ε || abs(y3 - y2) > ε) {\n          halfEdges.splice(iHalfEdge, 0, new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(cell.site, end, abs(x3 - x0) < ε && y1 - y3 > ε ? {\n            x: x0,\n            y: abs(x2 - x0) < ε ? y2 : y1\n          } : abs(y3 - y1) < ε && x1 - x3 > ε ? {\n            x: abs(y2 - y1) < ε ? x2 : x1,\n            y: y1\n          } : abs(x3 - x1) < ε && y3 - y0 > ε ? {\n            x: x1,\n            y: abs(x2 - x1) < ε ? y2 : y0\n          } : abs(y3 - y0) < ε && x3 - x0 > ε ? {\n            x: abs(y2 - y0) < ε ? x2 : x0,\n            y: y0\n          } : null), cell.site, null));\n          ++nHalfEdges;\n        }\n      }\n    }\n  }\n  function d3_geom_voronoiHalfEdgeOrder(a, b) {\n    return b.angle - a.angle;\n  }\n  function d3_geom_voronoiCircle() {\n    d3_geom_voronoiRedBlackNode(this);\n    this.x = this.y = this.arc = this.site = this.cy = null;\n  }\n  function d3_geom_voronoiAttachCircle(arc) {\n    var lArc = arc.P, rArc = arc.N;\n    if (!lArc || !rArc) return;\n    var lSite = lArc.site, cSite = arc.site, rSite = rArc.site;\n    if (lSite === rSite) return;\n    var bx = cSite.x, by = cSite.y, ax = lSite.x - bx, ay = lSite.y - by, cx = rSite.x - bx, cy = rSite.y - by;\n    var d = 2 * (ax * cy - ay * cx);\n    if (d >= -ε2) return;\n    var ha = ax * ax + ay * ay, hc = cx * cx + cy * cy, x = (cy * ha - ay * hc) / d, y = (ax * hc - cx * ha) / d, cy = y + by;\n    var circle = d3_geom_voronoiCirclePool.pop() || new d3_geom_voronoiCircle();\n    circle.arc = arc;\n    circle.site = cSite;\n    circle.x = x + bx;\n    circle.y = cy + Math.sqrt(x * x + y * y);\n    circle.cy = cy;\n    arc.circle = circle;\n    var before = null, node = d3_geom_voronoiCircles._;\n    while (node) {\n      if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {\n        if (node.L) node = node.L; else {\n          before = node.P;\n          break;\n        }\n      } else {\n        if (node.R) node = node.R; else {\n          before = node;\n          break;\n        }\n      }\n    }\n    d3_geom_voronoiCircles.insert(before, circle);\n    if (!before) d3_geom_voronoiFirstCircle = circle;\n  }\n  function d3_geom_voronoiDetachCircle(arc) {\n    var circle = arc.circle;\n    if (circle) {\n      if (!circle.P) d3_geom_voronoiFirstCircle = circle.N;\n      d3_geom_voronoiCircles.remove(circle);\n      d3_geom_voronoiCirclePool.push(circle);\n      d3_geom_voronoiRedBlackNode(circle);\n      arc.circle = null;\n    }\n  }\n  function d3_geom_voronoiClipEdges(extent) {\n    var edges = d3_geom_voronoiEdges, clip = d3_geom_clipLine(extent[0][0], extent[0][1], extent[1][0], extent[1][1]), i = edges.length, e;\n    while (i--) {\n      e = edges[i];\n      if (!d3_geom_voronoiConnectEdge(e, extent) || !clip(e) || abs(e.a.x - e.b.x) < ε && abs(e.a.y - e.b.y) < ε) {\n        e.a = e.b = null;\n        edges.splice(i, 1);\n      }\n    }\n  }\n  function d3_geom_voronoiConnectEdge(edge, extent) {\n    var vb = edge.b;\n    if (vb) return true;\n    var va = edge.a, x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], lSite = edge.l, rSite = edge.r, lx = lSite.x, ly = lSite.y, rx = rSite.x, ry = rSite.y, fx = (lx + rx) / 2, fy = (ly + ry) / 2, fm, fb;\n    if (ry === ly) {\n      if (fx < x0 || fx >= x1) return;\n      if (lx > rx) {\n        if (!va) va = {\n          x: fx,\n          y: y0\n        }; else if (va.y >= y1) return;\n        vb = {\n          x: fx,\n          y: y1\n        };\n      } else {\n        if (!va) va = {\n          x: fx,\n          y: y1\n        }; else if (va.y < y0) return;\n        vb = {\n          x: fx,\n          y: y0\n        };\n      }\n    } else {\n      fm = (lx - rx) / (ry - ly);\n      fb = fy - fm * fx;\n      if (fm < -1 || fm > 1) {\n        if (lx > rx) {\n          if (!va) va = {\n            x: (y0 - fb) / fm,\n            y: y0\n          }; else if (va.y >= y1) return;\n          vb = {\n            x: (y1 - fb) / fm,\n            y: y1\n          };\n        } else {\n          if (!va) va = {\n            x: (y1 - fb) / fm,\n            y: y1\n          }; else if (va.y < y0) return;\n          vb = {\n            x: (y0 - fb) / fm,\n            y: y0\n          };\n        }\n      } else {\n        if (ly < ry) {\n          if (!va) va = {\n            x: x0,\n            y: fm * x0 + fb\n          }; else if (va.x >= x1) return;\n          vb = {\n            x: x1,\n            y: fm * x1 + fb\n          };\n        } else {\n          if (!va) va = {\n            x: x1,\n            y: fm * x1 + fb\n          }; else if (va.x < x0) return;\n          vb = {\n            x: x0,\n            y: fm * x0 + fb\n          };\n        }\n      }\n    }\n    edge.a = va;\n    edge.b = vb;\n    return true;\n  }\n  function d3_geom_voronoiEdge(lSite, rSite) {\n    this.l = lSite;\n    this.r = rSite;\n    this.a = this.b = null;\n  }\n  function d3_geom_voronoiCreateEdge(lSite, rSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, rSite);\n    d3_geom_voronoiEdges.push(edge);\n    if (va) d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, va);\n    if (vb) d3_geom_voronoiSetEdgeEnd(edge, rSite, lSite, vb);\n    d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, lSite, rSite));\n    d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, rSite, lSite));\n    return edge;\n  }\n  function d3_geom_voronoiCreateBorderEdge(lSite, va, vb) {\n    var edge = new d3_geom_voronoiEdge(lSite, null);\n    edge.a = va;\n    edge.b = vb;\n    d3_geom_voronoiEdges.push(edge);\n    return edge;\n  }\n  function d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, vertex) {\n    if (!edge.a && !edge.b) {\n      edge.a = vertex;\n      edge.l = lSite;\n      edge.r = rSite;\n    } else if (edge.l === rSite) {\n      edge.b = vertex;\n    } else {\n      edge.a = vertex;\n    }\n  }\n  function d3_geom_voronoiHalfEdge(edge, lSite, rSite) {\n    var va = edge.a, vb = edge.b;\n    this.edge = edge;\n    this.site = lSite;\n    this.angle = rSite ? Math.atan2(rSite.y - lSite.y, rSite.x - lSite.x) : edge.l === lSite ? Math.atan2(vb.x - va.x, va.y - vb.y) : Math.atan2(va.x - vb.x, vb.y - va.y);\n  }\n  d3_geom_voronoiHalfEdge.prototype = {\n    start: function() {\n      return this.edge.l === this.site ? this.edge.a : this.edge.b;\n    },\n    end: function() {\n      return this.edge.l === this.site ? this.edge.b : this.edge.a;\n    }\n  };\n  function d3_geom_voronoiRedBlackTree() {\n    this._ = null;\n  }\n  function d3_geom_voronoiRedBlackNode(node) {\n    node.U = node.C = node.L = node.R = node.P = node.N = null;\n  }\n  d3_geom_voronoiRedBlackTree.prototype = {\n    insert: function(after, node) {\n      var parent, grandpa, uncle;\n      if (after) {\n        node.P = after;\n        node.N = after.N;\n        if (after.N) after.N.P = node;\n        after.N = node;\n        if (after.R) {\n          after = after.R;\n          while (after.L) after = after.L;\n          after.L = node;\n        } else {\n          after.R = node;\n        }\n        parent = after;\n      } else if (this._) {\n        after = d3_geom_voronoiRedBlackFirst(this._);\n        node.P = null;\n        node.N = after;\n        after.P = after.L = node;\n        parent = after;\n      } else {\n        node.P = node.N = null;\n        this._ = node;\n        parent = null;\n      }\n      node.L = node.R = null;\n      node.U = parent;\n      node.C = true;\n      after = node;\n      while (parent && parent.C) {\n        grandpa = parent.U;\n        if (parent === grandpa.L) {\n          uncle = grandpa.R;\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.R) {\n              d3_geom_voronoiRedBlackRotateLeft(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, grandpa);\n          }\n        } else {\n          uncle = grandpa.L;\n          if (uncle && uncle.C) {\n            parent.C = uncle.C = false;\n            grandpa.C = true;\n            after = grandpa;\n          } else {\n            if (after === parent.L) {\n              d3_geom_voronoiRedBlackRotateRight(this, parent);\n              after = parent;\n              parent = after.U;\n            }\n            parent.C = false;\n            grandpa.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, grandpa);\n          }\n        }\n        parent = after.U;\n      }\n      this._.C = false;\n    },\n    remove: function(node) {\n      if (node.N) node.N.P = node.P;\n      if (node.P) node.P.N = node.N;\n      node.N = node.P = null;\n      var parent = node.U, sibling, left = node.L, right = node.R, next, red;\n      if (!left) next = right; else if (!right) next = left; else next = d3_geom_voronoiRedBlackFirst(right);\n      if (parent) {\n        if (parent.L === node) parent.L = next; else parent.R = next;\n      } else {\n        this._ = next;\n      }\n      if (left && right) {\n        red = next.C;\n        next.C = node.C;\n        next.L = left;\n        left.U = next;\n        if (next !== right) {\n          parent = next.U;\n          next.U = node.U;\n          node = next.R;\n          parent.L = node;\n          next.R = right;\n          right.U = next;\n        } else {\n          next.U = parent;\n          parent = next;\n          node = next.R;\n        }\n      } else {\n        red = node.C;\n        node = next;\n      }\n      if (node) node.U = parent;\n      if (red) return;\n      if (node && node.C) {\n        node.C = false;\n        return;\n      }\n      do {\n        if (node === this._) break;\n        if (node === parent.L) {\n          sibling = parent.R;\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            sibling = parent.R;\n          }\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.R || !sibling.R.C) {\n              sibling.L.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateRight(this, sibling);\n              sibling = parent.R;\n            }\n            sibling.C = parent.C;\n            parent.C = sibling.R.C = false;\n            d3_geom_voronoiRedBlackRotateLeft(this, parent);\n            node = this._;\n            break;\n          }\n        } else {\n          sibling = parent.L;\n          if (sibling.C) {\n            sibling.C = false;\n            parent.C = true;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            sibling = parent.L;\n          }\n          if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n            if (!sibling.L || !sibling.L.C) {\n              sibling.R.C = false;\n              sibling.C = true;\n              d3_geom_voronoiRedBlackRotateLeft(this, sibling);\n              sibling = parent.L;\n            }\n            sibling.C = parent.C;\n            parent.C = sibling.L.C = false;\n            d3_geom_voronoiRedBlackRotateRight(this, parent);\n            node = this._;\n            break;\n          }\n        }\n        sibling.C = true;\n        node = parent;\n        parent = parent.U;\n      } while (!node.C);\n      if (node) node.C = false;\n    }\n  };\n  function d3_geom_voronoiRedBlackRotateLeft(tree, node) {\n    var p = node, q = node.R, parent = p.U;\n    if (parent) {\n      if (parent.L === p) parent.L = q; else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n    q.U = parent;\n    p.U = q;\n    p.R = q.L;\n    if (p.R) p.R.U = p;\n    q.L = p;\n  }\n  function d3_geom_voronoiRedBlackRotateRight(tree, node) {\n    var p = node, q = node.L, parent = p.U;\n    if (parent) {\n      if (parent.L === p) parent.L = q; else parent.R = q;\n    } else {\n      tree._ = q;\n    }\n    q.U = parent;\n    p.U = q;\n    p.L = q.R;\n    if (p.L) p.L.U = p;\n    q.R = p;\n  }\n  function d3_geom_voronoiRedBlackFirst(node) {\n    while (node.L) node = node.L;\n    return node;\n  }\n  function d3_geom_voronoi(sites, bbox) {\n    var site = sites.sort(d3_geom_voronoiVertexOrder).pop(), x0, y0, circle;\n    d3_geom_voronoiEdges = [];\n    d3_geom_voronoiCells = new Array(sites.length);\n    d3_geom_voronoiBeaches = new d3_geom_voronoiRedBlackTree();\n    d3_geom_voronoiCircles = new d3_geom_voronoiRedBlackTree();\n    while (true) {\n      circle = d3_geom_voronoiFirstCircle;\n      if (site && (!circle || site.y < circle.y || site.y === circle.y && site.x < circle.x)) {\n        if (site.x !== x0 || site.y !== y0) {\n          d3_geom_voronoiCells[site.i] = new d3_geom_voronoiCell(site);\n          d3_geom_voronoiAddBeach(site);\n          x0 = site.x, y0 = site.y;\n        }\n        site = sites.pop();\n      } else if (circle) {\n        d3_geom_voronoiRemoveBeach(circle.arc);\n      } else {\n        break;\n      }\n    }\n    if (bbox) d3_geom_voronoiClipEdges(bbox), d3_geom_voronoiCloseCells(bbox);\n    var diagram = {\n      cells: d3_geom_voronoiCells,\n      edges: d3_geom_voronoiEdges\n    };\n    d3_geom_voronoiBeaches = d3_geom_voronoiCircles = d3_geom_voronoiEdges = d3_geom_voronoiCells = null;\n    return diagram;\n  }\n  function d3_geom_voronoiVertexOrder(a, b) {\n    return b.y - a.y || b.x - a.x;\n  }\n  d3.geom.voronoi = function(points) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, fx = x, fy = y, clipExtent = d3_geom_voronoiClipExtent;\n    if (points) return voronoi(points);\n    function voronoi(data) {\n      var polygons = new Array(data.length), x0 = clipExtent[0][0], y0 = clipExtent[0][1], x1 = clipExtent[1][0], y1 = clipExtent[1][1];\n      d3_geom_voronoi(sites(data), clipExtent).cells.forEach(function(cell, i) {\n        var edges = cell.edges, site = cell.site, polygon = polygons[i] = edges.length ? edges.map(function(e) {\n          var s = e.start();\n          return [ s.x, s.y ];\n        }) : site.x >= x0 && site.x <= x1 && site.y >= y0 && site.y <= y1 ? [ [ x0, y1 ], [ x1, y1 ], [ x1, y0 ], [ x0, y0 ] ] : [];\n        polygon.point = data[i];\n      });\n      return polygons;\n    }\n    function sites(data) {\n      return data.map(function(d, i) {\n        return {\n          x: Math.round(fx(d, i) / ε) * ε,\n          y: Math.round(fy(d, i) / ε) * ε,\n          i: i\n        };\n      });\n    }\n    voronoi.links = function(data) {\n      return d3_geom_voronoi(sites(data)).edges.filter(function(edge) {\n        return edge.l && edge.r;\n      }).map(function(edge) {\n        return {\n          source: data[edge.l.i],\n          target: data[edge.r.i]\n        };\n      });\n    };\n    voronoi.triangles = function(data) {\n      var triangles = [];\n      d3_geom_voronoi(sites(data)).cells.forEach(function(cell, i) {\n        var site = cell.site, edges = cell.edges.sort(d3_geom_voronoiHalfEdgeOrder), j = -1, m = edges.length, e0, s0, e1 = edges[m - 1].edge, s1 = e1.l === site ? e1.r : e1.l;\n        while (++j < m) {\n          e0 = e1;\n          s0 = s1;\n          e1 = edges[j].edge;\n          s1 = e1.l === site ? e1.r : e1.l;\n          if (i < s0.i && i < s1.i && d3_geom_voronoiTriangleArea(site, s0, s1) < 0) {\n            triangles.push([ data[i], data[s0.i], data[s1.i] ]);\n          }\n        }\n      });\n      return triangles;\n    };\n    voronoi.x = function(_) {\n      return arguments.length ? (fx = d3_functor(x = _), voronoi) : x;\n    };\n    voronoi.y = function(_) {\n      return arguments.length ? (fy = d3_functor(y = _), voronoi) : y;\n    };\n    voronoi.clipExtent = function(_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent;\n      clipExtent = _ == null ? d3_geom_voronoiClipExtent : _;\n      return voronoi;\n    };\n    voronoi.size = function(_) {\n      if (!arguments.length) return clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent && clipExtent[1];\n      return voronoi.clipExtent(_ && [ [ 0, 0 ], _ ]);\n    };\n    return voronoi;\n  };\n  var d3_geom_voronoiClipExtent = [ [ -1e6, -1e6 ], [ 1e6, 1e6 ] ];\n  function d3_geom_voronoiTriangleArea(a, b, c) {\n    return (a.x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y);\n  }\n  d3.geom.delaunay = function(vertices) {\n    return d3.geom.voronoi().triangles(vertices);\n  };\n  d3.geom.quadtree = function(points, x1, y1, x2, y2) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, compat;\n    if (compat = arguments.length) {\n      x = d3_geom_quadtreeCompatX;\n      y = d3_geom_quadtreeCompatY;\n      if (compat === 3) {\n        y2 = y1;\n        x2 = x1;\n        y1 = x1 = 0;\n      }\n      return quadtree(points);\n    }\n    function quadtree(data) {\n      var d, fx = d3_functor(x), fy = d3_functor(y), xs, ys, i, n, x1_, y1_, x2_, y2_;\n      if (x1 != null) {\n        x1_ = x1, y1_ = y1, x2_ = x2, y2_ = y2;\n      } else {\n        x2_ = y2_ = -(x1_ = y1_ = Infinity);\n        xs = [], ys = [];\n        n = data.length;\n        if (compat) for (i = 0; i < n; ++i) {\n          d = data[i];\n          if (d.x < x1_) x1_ = d.x;\n          if (d.y < y1_) y1_ = d.y;\n          if (d.x > x2_) x2_ = d.x;\n          if (d.y > y2_) y2_ = d.y;\n          xs.push(d.x);\n          ys.push(d.y);\n        } else for (i = 0; i < n; ++i) {\n          var x_ = +fx(d = data[i], i), y_ = +fy(d, i);\n          if (x_ < x1_) x1_ = x_;\n          if (y_ < y1_) y1_ = y_;\n          if (x_ > x2_) x2_ = x_;\n          if (y_ > y2_) y2_ = y_;\n          xs.push(x_);\n          ys.push(y_);\n        }\n      }\n      var dx = x2_ - x1_, dy = y2_ - y1_;\n      if (dx > dy) y2_ = y1_ + dx; else x2_ = x1_ + dy;\n      function insert(n, d, x, y, x1, y1, x2, y2) {\n        if (isNaN(x) || isNaN(y)) return;\n        if (n.leaf) {\n          var nx = n.x, ny = n.y;\n          if (nx != null) {\n            if (abs(nx - x) + abs(ny - y) < .01) {\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            } else {\n              var nPoint = n.point;\n              n.x = n.y = n.point = null;\n              insertChild(n, nPoint, nx, ny, x1, y1, x2, y2);\n              insertChild(n, d, x, y, x1, y1, x2, y2);\n            }\n          } else {\n            n.x = x, n.y = y, n.point = d;\n          }\n        } else {\n          insertChild(n, d, x, y, x1, y1, x2, y2);\n        }\n      }\n      function insertChild(n, d, x, y, x1, y1, x2, y2) {\n        var xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym, i = below << 1 | right;\n        n.leaf = false;\n        n = n.nodes[i] || (n.nodes[i] = d3_geom_quadtreeNode());\n        if (right) x1 = xm; else x2 = xm;\n        if (below) y1 = ym; else y2 = ym;\n        insert(n, d, x, y, x1, y1, x2, y2);\n      }\n      var root = d3_geom_quadtreeNode();\n      root.add = function(d) {\n        insert(root, d, +fx(d, ++i), +fy(d, i), x1_, y1_, x2_, y2_);\n      };\n      root.visit = function(f) {\n        d3_geom_quadtreeVisit(f, root, x1_, y1_, x2_, y2_);\n      };\n      root.find = function(point) {\n        return d3_geom_quadtreeFind(root, point[0], point[1], x1_, y1_, x2_, y2_);\n      };\n      i = -1;\n      if (x1 == null) {\n        while (++i < n) {\n          insert(root, data[i], xs[i], ys[i], x1_, y1_, x2_, y2_);\n        }\n        --i;\n      } else data.forEach(root.add);\n      xs = ys = data = d = null;\n      return root;\n    }\n    quadtree.x = function(_) {\n      return arguments.length ? (x = _, quadtree) : x;\n    };\n    quadtree.y = function(_) {\n      return arguments.length ? (y = _, quadtree) : y;\n    };\n    quadtree.extent = function(_) {\n      if (!arguments.length) return x1 == null ? null : [ [ x1, y1 ], [ x2, y2 ] ];\n      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = +_[0][0], y1 = +_[0][1], x2 = +_[1][0], \n      y2 = +_[1][1];\n      return quadtree;\n    };\n    quadtree.size = function(_) {\n      if (!arguments.length) return x1 == null ? null : [ x2 - x1, y2 - y1 ];\n      if (_ == null) x1 = y1 = x2 = y2 = null; else x1 = y1 = 0, x2 = +_[0], y2 = +_[1];\n      return quadtree;\n    };\n    return quadtree;\n  };\n  function d3_geom_quadtreeCompatX(d) {\n    return d.x;\n  }\n  function d3_geom_quadtreeCompatY(d) {\n    return d.y;\n  }\n  function d3_geom_quadtreeNode() {\n    return {\n      leaf: true,\n      nodes: [],\n      point: null,\n      x: null,\n      y: null\n    };\n  }\n  function d3_geom_quadtreeVisit(f, node, x1, y1, x2, y2) {\n    if (!f(node, x1, y1, x2, y2)) {\n      var sx = (x1 + x2) * .5, sy = (y1 + y2) * .5, children = node.nodes;\n      if (children[0]) d3_geom_quadtreeVisit(f, children[0], x1, y1, sx, sy);\n      if (children[1]) d3_geom_quadtreeVisit(f, children[1], sx, y1, x2, sy);\n      if (children[2]) d3_geom_quadtreeVisit(f, children[2], x1, sy, sx, y2);\n      if (children[3]) d3_geom_quadtreeVisit(f, children[3], sx, sy, x2, y2);\n    }\n  }\n  function d3_geom_quadtreeFind(root, x, y, x0, y0, x3, y3) {\n    var minDistance2 = Infinity, closestPoint;\n    (function find(node, x1, y1, x2, y2) {\n      if (x1 > x3 || y1 > y3 || x2 < x0 || y2 < y0) return;\n      if (point = node.point) {\n        var point, dx = x - node.x, dy = y - node.y, distance2 = dx * dx + dy * dy;\n        if (distance2 < minDistance2) {\n          var distance = Math.sqrt(minDistance2 = distance2);\n          x0 = x - distance, y0 = y - distance;\n          x3 = x + distance, y3 = y + distance;\n          closestPoint = point;\n        }\n      }\n      var children = node.nodes, xm = (x1 + x2) * .5, ym = (y1 + y2) * .5, right = x >= xm, below = y >= ym;\n      for (var i = below << 1 | right, j = i + 4; i < j; ++i) {\n        if (node = children[i & 3]) switch (i & 3) {\n         case 0:\n          find(node, x1, y1, xm, ym);\n          break;\n\n         case 1:\n          find(node, xm, y1, x2, ym);\n          break;\n\n         case 2:\n          find(node, x1, ym, xm, y2);\n          break;\n\n         case 3:\n          find(node, xm, ym, x2, y2);\n          break;\n        }\n      }\n    })(root, x0, y0, x3, y3);\n    return closestPoint;\n  }\n  d3.interpolateRgb = d3_interpolateRgb;\n  function d3_interpolateRgb(a, b) {\n    a = d3.rgb(a);\n    b = d3.rgb(b);\n    var ar = a.r, ag = a.g, ab = a.b, br = b.r - ar, bg = b.g - ag, bb = b.b - ab;\n    return function(t) {\n      return \"#\" + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t));\n    };\n  }\n  d3.interpolateObject = d3_interpolateObject;\n  function d3_interpolateObject(a, b) {\n    var i = {}, c = {}, k;\n    for (k in a) {\n      if (k in b) {\n        i[k] = d3_interpolate(a[k], b[k]);\n      } else {\n        c[k] = a[k];\n      }\n    }\n    for (k in b) {\n      if (!(k in a)) {\n        c[k] = b[k];\n      }\n    }\n    return function(t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n  d3.interpolateNumber = d3_interpolateNumber;\n  function d3_interpolateNumber(a, b) {\n    a = +a, b = +b;\n    return function(t) {\n      return a * (1 - t) + b * t;\n    };\n  }\n  d3.interpolateString = d3_interpolateString;\n  function d3_interpolateString(a, b) {\n    var bi = d3_interpolate_numberA.lastIndex = d3_interpolate_numberB.lastIndex = 0, am, bm, bs, i = -1, s = [], q = [];\n    a = a + \"\", b = b + \"\";\n    while ((am = d3_interpolate_numberA.exec(a)) && (bm = d3_interpolate_numberB.exec(b))) {\n      if ((bs = bm.index) > bi) {\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) {\n        if (s[i]) s[i] += bm; else s[++i] = bm;\n      } else {\n        s[++i] = null;\n        q.push({\n          i: i,\n          x: d3_interpolateNumber(am, bm)\n        });\n      }\n      bi = d3_interpolate_numberB.lastIndex;\n    }\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; else s[++i] = bs;\n    }\n    return s.length < 2 ? q[0] ? (b = q[0].x, function(t) {\n      return b(t) + \"\";\n    }) : function() {\n      return b;\n    } : (b = q.length, function(t) {\n      for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    });\n  }\n  var d3_interpolate_numberA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g, d3_interpolate_numberB = new RegExp(d3_interpolate_numberA.source, \"g\");\n  d3.interpolate = d3_interpolate;\n  function d3_interpolate(a, b) {\n    var i = d3.interpolators.length, f;\n    while (--i >= 0 && !(f = d3.interpolators[i](a, b))) ;\n    return f;\n  }\n  d3.interpolators = [ function(a, b) {\n    var t = typeof b;\n    return (t === \"string\" ? d3_rgb_names.has(b.toLowerCase()) || /^(#|rgb\\(|hsl\\()/i.test(b) ? d3_interpolateRgb : d3_interpolateString : b instanceof d3_color ? d3_interpolateRgb : Array.isArray(b) ? d3_interpolateArray : t === \"object\" && isNaN(b) ? d3_interpolateObject : d3_interpolateNumber)(a, b);\n  } ];\n  d3.interpolateArray = d3_interpolateArray;\n  function d3_interpolateArray(a, b) {\n    var x = [], c = [], na = a.length, nb = b.length, n0 = Math.min(a.length, b.length), i;\n    for (i = 0; i < n0; ++i) x.push(d3_interpolate(a[i], b[i]));\n    for (;i < na; ++i) c[i] = a[i];\n    for (;i < nb; ++i) c[i] = b[i];\n    return function(t) {\n      for (i = 0; i < n0; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n  var d3_ease_default = function() {\n    return d3_identity;\n  };\n  var d3_ease = d3.map({\n    linear: d3_ease_default,\n    poly: d3_ease_poly,\n    quad: function() {\n      return d3_ease_quad;\n    },\n    cubic: function() {\n      return d3_ease_cubic;\n    },\n    sin: function() {\n      return d3_ease_sin;\n    },\n    exp: function() {\n      return d3_ease_exp;\n    },\n    circle: function() {\n      return d3_ease_circle;\n    },\n    elastic: d3_ease_elastic,\n    back: d3_ease_back,\n    bounce: function() {\n      return d3_ease_bounce;\n    }\n  });\n  var d3_ease_mode = d3.map({\n    \"in\": d3_identity,\n    out: d3_ease_reverse,\n    \"in-out\": d3_ease_reflect,\n    \"out-in\": function(f) {\n      return d3_ease_reflect(d3_ease_reverse(f));\n    }\n  });\n  d3.ease = function(name) {\n    var i = name.indexOf(\"-\"), t = i >= 0 ? name.slice(0, i) : name, m = i >= 0 ? name.slice(i + 1) : \"in\";\n    t = d3_ease.get(t) || d3_ease_default;\n    m = d3_ease_mode.get(m) || d3_identity;\n    return d3_ease_clamp(m(t.apply(null, d3_arraySlice.call(arguments, 1))));\n  };\n  function d3_ease_clamp(f) {\n    return function(t) {\n      return t <= 0 ? 0 : t >= 1 ? 1 : f(t);\n    };\n  }\n  function d3_ease_reverse(f) {\n    return function(t) {\n      return 1 - f(1 - t);\n    };\n  }\n  function d3_ease_reflect(f) {\n    return function(t) {\n      return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t));\n    };\n  }\n  function d3_ease_quad(t) {\n    return t * t;\n  }\n  function d3_ease_cubic(t) {\n    return t * t * t;\n  }\n  function d3_ease_cubicInOut(t) {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    var t2 = t * t, t3 = t2 * t;\n    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n  }\n  function d3_ease_poly(e) {\n    return function(t) {\n      return Math.pow(t, e);\n    };\n  }\n  function d3_ease_sin(t) {\n    return 1 - Math.cos(t * halfπ);\n  }\n  function d3_ease_exp(t) {\n    return Math.pow(2, 10 * (t - 1));\n  }\n  function d3_ease_circle(t) {\n    return 1 - Math.sqrt(1 - t * t);\n  }\n  function d3_ease_elastic(a, p) {\n    var s;\n    if (arguments.length < 2) p = .45;\n    if (arguments.length) s = p / τ * Math.asin(1 / a); else a = 1, s = p / 4;\n    return function(t) {\n      return 1 + a * Math.pow(2, -10 * t) * Math.sin((t - s) * τ / p);\n    };\n  }\n  function d3_ease_back(s) {\n    if (!s) s = 1.70158;\n    return function(t) {\n      return t * t * ((s + 1) * t - s);\n    };\n  }\n  function d3_ease_bounce(t) {\n    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;\n  }\n  d3.interpolateHcl = d3_interpolateHcl;\n  function d3_interpolateHcl(a, b) {\n    a = d3.hcl(a);\n    b = d3.hcl(b);\n    var ah = a.h, ac = a.c, al = a.l, bh = b.h - ah, bc = b.c - ac, bl = b.l - al;\n    if (isNaN(bc)) bc = 0, ac = isNaN(ac) ? b.c : ac;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;\n    return function(t) {\n      return d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + \"\";\n    };\n  }\n  d3.interpolateHsl = d3_interpolateHsl;\n  function d3_interpolateHsl(a, b) {\n    a = d3.hsl(a);\n    b = d3.hsl(b);\n    var ah = a.h, as = a.s, al = a.l, bh = b.h - ah, bs = b.s - as, bl = b.l - al;\n    if (isNaN(bs)) bs = 0, as = isNaN(as) ? b.s : as;\n    if (isNaN(bh)) bh = 0, ah = isNaN(ah) ? b.h : ah; else if (bh > 180) bh -= 360; else if (bh < -180) bh += 360;\n    return function(t) {\n      return d3_hsl_rgb(ah + bh * t, as + bs * t, al + bl * t) + \"\";\n    };\n  }\n  d3.interpolateLab = d3_interpolateLab;\n  function d3_interpolateLab(a, b) {\n    a = d3.lab(a);\n    b = d3.lab(b);\n    var al = a.l, aa = a.a, ab = a.b, bl = b.l - al, ba = b.a - aa, bb = b.b - ab;\n    return function(t) {\n      return d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + \"\";\n    };\n  }\n  d3.interpolateRound = d3_interpolateRound;\n  function d3_interpolateRound(a, b) {\n    b -= a;\n    return function(t) {\n      return Math.round(a + b * t);\n    };\n  }\n  d3.transform = function(string) {\n    var g = d3_document.createElementNS(d3.ns.prefix.svg, \"g\");\n    return (d3.transform = function(string) {\n      if (string != null) {\n        g.setAttribute(\"transform\", string);\n        var t = g.transform.baseVal.consolidate();\n      }\n      return new d3_transform(t ? t.matrix : d3_transformIdentity);\n    })(string);\n  };\n  function d3_transform(m) {\n    var r0 = [ m.a, m.b ], r1 = [ m.c, m.d ], kx = d3_transformNormalize(r0), kz = d3_transformDot(r0, r1), ky = d3_transformNormalize(d3_transformCombine(r1, r0, -kz)) || 0;\n    if (r0[0] * r1[1] < r1[0] * r0[1]) {\n      r0[0] *= -1;\n      r0[1] *= -1;\n      kx *= -1;\n      kz *= -1;\n    }\n    this.rotate = (kx ? Math.atan2(r0[1], r0[0]) : Math.atan2(-r1[0], r1[1])) * d3_degrees;\n    this.translate = [ m.e, m.f ];\n    this.scale = [ kx, ky ];\n    this.skew = ky ? Math.atan2(kz, ky) * d3_degrees : 0;\n  }\n  d3_transform.prototype.toString = function() {\n    return \"translate(\" + this.translate + \")rotate(\" + this.rotate + \")skewX(\" + this.skew + \")scale(\" + this.scale + \")\";\n  };\n  function d3_transformDot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n  }\n  function d3_transformNormalize(a) {\n    var k = Math.sqrt(d3_transformDot(a, a));\n    if (k) {\n      a[0] /= k;\n      a[1] /= k;\n    }\n    return k;\n  }\n  function d3_transformCombine(a, b, k) {\n    a[0] += k * b[0];\n    a[1] += k * b[1];\n    return a;\n  }\n  var d3_transformIdentity = {\n    a: 1,\n    b: 0,\n    c: 0,\n    d: 1,\n    e: 0,\n    f: 0\n  };\n  d3.interpolateTransform = d3_interpolateTransform;\n  function d3_interpolateTransformPop(s) {\n    return s.length ? s.pop() + \",\" : \"\";\n  }\n  function d3_interpolateTranslate(ta, tb, s, q) {\n    if (ta[0] !== tb[0] || ta[1] !== tb[1]) {\n      var i = s.push(\"translate(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ta[0], tb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ta[1], tb[1])\n      });\n    } else if (tb[0] || tb[1]) {\n      s.push(\"translate(\" + tb + \")\");\n    }\n  }\n  function d3_interpolateRotate(ra, rb, s, q) {\n    if (ra !== rb) {\n      if (ra - rb > 180) rb += 360; else if (rb - ra > 180) ra += 360;\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"rotate(\", null, \")\") - 2,\n        x: d3_interpolateNumber(ra, rb)\n      });\n    } else if (rb) {\n      s.push(d3_interpolateTransformPop(s) + \"rotate(\" + rb + \")\");\n    }\n  }\n  function d3_interpolateSkew(wa, wb, s, q) {\n    if (wa !== wb) {\n      q.push({\n        i: s.push(d3_interpolateTransformPop(s) + \"skewX(\", null, \")\") - 2,\n        x: d3_interpolateNumber(wa, wb)\n      });\n    } else if (wb) {\n      s.push(d3_interpolateTransformPop(s) + \"skewX(\" + wb + \")\");\n    }\n  }\n  function d3_interpolateScale(ka, kb, s, q) {\n    if (ka[0] !== kb[0] || ka[1] !== kb[1]) {\n      var i = s.push(d3_interpolateTransformPop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({\n        i: i - 4,\n        x: d3_interpolateNumber(ka[0], kb[0])\n      }, {\n        i: i - 2,\n        x: d3_interpolateNumber(ka[1], kb[1])\n      });\n    } else if (kb[0] !== 1 || kb[1] !== 1) {\n      s.push(d3_interpolateTransformPop(s) + \"scale(\" + kb + \")\");\n    }\n  }\n  function d3_interpolateTransform(a, b) {\n    var s = [], q = [];\n    a = d3.transform(a), b = d3.transform(b);\n    d3_interpolateTranslate(a.translate, b.translate, s, q);\n    d3_interpolateRotate(a.rotate, b.rotate, s, q);\n    d3_interpolateSkew(a.skew, b.skew, s, q);\n    d3_interpolateScale(a.scale, b.scale, s, q);\n    a = b = null;\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  }\n  function d3_uninterpolateNumber(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function(x) {\n      return (x - a) / b;\n    };\n  }\n  function d3_uninterpolateClamp(a, b) {\n    b = (b -= a = +a) || 1 / b;\n    return function(x) {\n      return Math.max(0, Math.min(1, (x - a) / b));\n    };\n  }\n  d3.layout = {};\n  d3.layout.bundle = function() {\n    return function(links) {\n      var paths = [], i = -1, n = links.length;\n      while (++i < n) paths.push(d3_layout_bundlePath(links[i]));\n      return paths;\n    };\n  };\n  function d3_layout_bundlePath(link) {\n    var start = link.source, end = link.target, lca = d3_layout_bundleLeastCommonAncestor(start, end), points = [ start ];\n    while (start !== lca) {\n      start = start.parent;\n      points.push(start);\n    }\n    var k = points.length;\n    while (end !== lca) {\n      points.splice(k, 0, end);\n      end = end.parent;\n    }\n    return points;\n  }\n  function d3_layout_bundleAncestors(node) {\n    var ancestors = [], parent = node.parent;\n    while (parent != null) {\n      ancestors.push(node);\n      node = parent;\n      parent = parent.parent;\n    }\n    ancestors.push(node);\n    return ancestors;\n  }\n  function d3_layout_bundleLeastCommonAncestor(a, b) {\n    if (a === b) return a;\n    var aNodes = d3_layout_bundleAncestors(a), bNodes = d3_layout_bundleAncestors(b), aNode = aNodes.pop(), bNode = bNodes.pop(), sharedNode = null;\n    while (aNode === bNode) {\n      sharedNode = aNode;\n      aNode = aNodes.pop();\n      bNode = bNodes.pop();\n    }\n    return sharedNode;\n  }\n  d3.layout.chord = function() {\n    var chord = {}, chords, groups, matrix, n, padding = 0, sortGroups, sortSubgroups, sortChords;\n    function relayout() {\n      var subgroups = {}, groupSums = [], groupIndex = d3.range(n), subgroupIndex = [], k, x, x0, i, j;\n      chords = [];\n      groups = [];\n      k = 0, i = -1;\n      while (++i < n) {\n        x = 0, j = -1;\n        while (++j < n) {\n          x += matrix[i][j];\n        }\n        groupSums.push(x);\n        subgroupIndex.push(d3.range(n));\n        k += x;\n      }\n      if (sortGroups) {\n        groupIndex.sort(function(a, b) {\n          return sortGroups(groupSums[a], groupSums[b]);\n        });\n      }\n      if (sortSubgroups) {\n        subgroupIndex.forEach(function(d, i) {\n          d.sort(function(a, b) {\n            return sortSubgroups(matrix[i][a], matrix[i][b]);\n          });\n        });\n      }\n      k = (τ - padding * n) / k;\n      x = 0, i = -1;\n      while (++i < n) {\n        x0 = x, j = -1;\n        while (++j < n) {\n          var di = groupIndex[i], dj = subgroupIndex[di][j], v = matrix[di][dj], a0 = x, a1 = x += v * k;\n          subgroups[di + \"-\" + dj] = {\n            index: di,\n            subindex: dj,\n            startAngle: a0,\n            endAngle: a1,\n            value: v\n          };\n        }\n        groups[di] = {\n          index: di,\n          startAngle: x0,\n          endAngle: x,\n          value: (x - x0) / k\n        };\n        x += padding;\n      }\n      i = -1;\n      while (++i < n) {\n        j = i - 1;\n        while (++j < n) {\n          var source = subgroups[i + \"-\" + j], target = subgroups[j + \"-\" + i];\n          if (source.value || target.value) {\n            chords.push(source.value < target.value ? {\n              source: target,\n              target: source\n            } : {\n              source: source,\n              target: target\n            });\n          }\n        }\n      }\n      if (sortChords) resort();\n    }\n    function resort() {\n      chords.sort(function(a, b) {\n        return sortChords((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2);\n      });\n    }\n    chord.matrix = function(x) {\n      if (!arguments.length) return matrix;\n      n = (matrix = x) && matrix.length;\n      chords = groups = null;\n      return chord;\n    };\n    chord.padding = function(x) {\n      if (!arguments.length) return padding;\n      padding = x;\n      chords = groups = null;\n      return chord;\n    };\n    chord.sortGroups = function(x) {\n      if (!arguments.length) return sortGroups;\n      sortGroups = x;\n      chords = groups = null;\n      return chord;\n    };\n    chord.sortSubgroups = function(x) {\n      if (!arguments.length) return sortSubgroups;\n      sortSubgroups = x;\n      chords = null;\n      return chord;\n    };\n    chord.sortChords = function(x) {\n      if (!arguments.length) return sortChords;\n      sortChords = x;\n      if (chords) resort();\n      return chord;\n    };\n    chord.chords = function() {\n      if (!chords) relayout();\n      return chords;\n    };\n    chord.groups = function() {\n      if (!groups) relayout();\n      return groups;\n    };\n    return chord;\n  };\n  d3.layout.force = function() {\n    var force = {}, event = d3.dispatch(\"start\", \"tick\", \"end\"), timer, size = [ 1, 1 ], drag, alpha, friction = .9, linkDistance = d3_layout_forceLinkDistance, linkStrength = d3_layout_forceLinkStrength, charge = -30, chargeDistance2 = d3_layout_forceChargeDistance2, gravity = .1, theta2 = .64, nodes = [], links = [], distances, strengths, charges;\n    function repulse(node) {\n      return function(quad, x1, _, x2) {\n        if (quad.point !== node) {\n          var dx = quad.cx - node.x, dy = quad.cy - node.y, dw = x2 - x1, dn = dx * dx + dy * dy;\n          if (dw * dw / theta2 < dn) {\n            if (dn < chargeDistance2) {\n              var k = quad.charge / dn;\n              node.px -= dx * k;\n              node.py -= dy * k;\n            }\n            return true;\n          }\n          if (quad.point && dn && dn < chargeDistance2) {\n            var k = quad.pointCharge / dn;\n            node.px -= dx * k;\n            node.py -= dy * k;\n          }\n        }\n        return !quad.charge;\n      };\n    }\n    force.tick = function() {\n      if ((alpha *= .99) < .005) {\n        timer = null;\n        event.end({\n          type: \"end\",\n          alpha: alpha = 0\n        });\n        return true;\n      }\n      var n = nodes.length, m = links.length, q, i, o, s, t, l, k, x, y;\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        s = o.source;\n        t = o.target;\n        x = t.x - s.x;\n        y = t.y - s.y;\n        if (l = x * x + y * y) {\n          l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l;\n          x *= l;\n          y *= l;\n          t.x -= x * (k = s.weight + t.weight ? s.weight / (s.weight + t.weight) : .5);\n          t.y -= y * k;\n          s.x += x * (k = 1 - k);\n          s.y += y * k;\n        }\n      }\n      if (k = alpha * gravity) {\n        x = size[0] / 2;\n        y = size[1] / 2;\n        i = -1;\n        if (k) while (++i < n) {\n          o = nodes[i];\n          o.x += (x - o.x) * k;\n          o.y += (y - o.y) * k;\n        }\n      }\n      if (charge) {\n        d3_layout_forceAccumulate(q = d3.geom.quadtree(nodes), alpha, charges);\n        i = -1;\n        while (++i < n) {\n          if (!(o = nodes[i]).fixed) {\n            q.visit(repulse(o));\n          }\n        }\n      }\n      i = -1;\n      while (++i < n) {\n        o = nodes[i];\n        if (o.fixed) {\n          o.x = o.px;\n          o.y = o.py;\n        } else {\n          o.x -= (o.px - (o.px = o.x)) * friction;\n          o.y -= (o.py - (o.py = o.y)) * friction;\n        }\n      }\n      event.tick({\n        type: \"tick\",\n        alpha: alpha\n      });\n    };\n    force.nodes = function(x) {\n      if (!arguments.length) return nodes;\n      nodes = x;\n      return force;\n    };\n    force.links = function(x) {\n      if (!arguments.length) return links;\n      links = x;\n      return force;\n    };\n    force.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return force;\n    };\n    force.linkDistance = function(x) {\n      if (!arguments.length) return linkDistance;\n      linkDistance = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.distance = force.linkDistance;\n    force.linkStrength = function(x) {\n      if (!arguments.length) return linkStrength;\n      linkStrength = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.friction = function(x) {\n      if (!arguments.length) return friction;\n      friction = +x;\n      return force;\n    };\n    force.charge = function(x) {\n      if (!arguments.length) return charge;\n      charge = typeof x === \"function\" ? x : +x;\n      return force;\n    };\n    force.chargeDistance = function(x) {\n      if (!arguments.length) return Math.sqrt(chargeDistance2);\n      chargeDistance2 = x * x;\n      return force;\n    };\n    force.gravity = function(x) {\n      if (!arguments.length) return gravity;\n      gravity = +x;\n      return force;\n    };\n    force.theta = function(x) {\n      if (!arguments.length) return Math.sqrt(theta2);\n      theta2 = x * x;\n      return force;\n    };\n    force.alpha = function(x) {\n      if (!arguments.length) return alpha;\n      x = +x;\n      if (alpha) {\n        if (x > 0) {\n          alpha = x;\n        } else {\n          timer.c = null, timer.t = NaN, timer = null;\n          event.start({\n            type: \"end\",\n            alpha: alpha = 0\n          });\n        }\n      } else if (x > 0) {\n        event.start({\n          type: \"start\",\n          alpha: alpha = x\n        });\n        timer = d3_timer(force.tick);\n      }\n      return force;\n    };\n    force.start = function() {\n      var i, n = nodes.length, m = links.length, w = size[0], h = size[1], neighbors, o;\n      for (i = 0; i < n; ++i) {\n        (o = nodes[i]).index = i;\n        o.weight = 0;\n      }\n      for (i = 0; i < m; ++i) {\n        o = links[i];\n        if (typeof o.source == \"number\") o.source = nodes[o.source];\n        if (typeof o.target == \"number\") o.target = nodes[o.target];\n        ++o.source.weight;\n        ++o.target.weight;\n      }\n      for (i = 0; i < n; ++i) {\n        o = nodes[i];\n        if (isNaN(o.x)) o.x = position(\"x\", w);\n        if (isNaN(o.y)) o.y = position(\"y\", h);\n        if (isNaN(o.px)) o.px = o.x;\n        if (isNaN(o.py)) o.py = o.y;\n      }\n      distances = [];\n      if (typeof linkDistance === \"function\") for (i = 0; i < m; ++i) distances[i] = +linkDistance.call(this, links[i], i); else for (i = 0; i < m; ++i) distances[i] = linkDistance;\n      strengths = [];\n      if (typeof linkStrength === \"function\") for (i = 0; i < m; ++i) strengths[i] = +linkStrength.call(this, links[i], i); else for (i = 0; i < m; ++i) strengths[i] = linkStrength;\n      charges = [];\n      if (typeof charge === \"function\") for (i = 0; i < n; ++i) charges[i] = +charge.call(this, nodes[i], i); else for (i = 0; i < n; ++i) charges[i] = charge;\n      function position(dimension, size) {\n        if (!neighbors) {\n          neighbors = new Array(n);\n          for (j = 0; j < n; ++j) {\n            neighbors[j] = [];\n          }\n          for (j = 0; j < m; ++j) {\n            var o = links[j];\n            neighbors[o.source.index].push(o.target);\n            neighbors[o.target.index].push(o.source);\n          }\n        }\n        var candidates = neighbors[i], j = -1, l = candidates.length, x;\n        while (++j < l) if (!isNaN(x = candidates[j][dimension])) return x;\n        return Math.random() * size;\n      }\n      return force.resume();\n    };\n    force.resume = function() {\n      return force.alpha(.1);\n    };\n    force.stop = function() {\n      return force.alpha(0);\n    };\n    force.drag = function() {\n      if (!drag) drag = d3.behavior.drag().origin(d3_identity).on(\"dragstart.force\", d3_layout_forceDragstart).on(\"drag.force\", dragmove).on(\"dragend.force\", d3_layout_forceDragend);\n      if (!arguments.length) return drag;\n      this.on(\"mouseover.force\", d3_layout_forceMouseover).on(\"mouseout.force\", d3_layout_forceMouseout).call(drag);\n    };\n    function dragmove(d) {\n      d.px = d3.event.x, d.py = d3.event.y;\n      force.resume();\n    }\n    return d3.rebind(force, event, \"on\");\n  };\n  function d3_layout_forceDragstart(d) {\n    d.fixed |= 2;\n  }\n  function d3_layout_forceDragend(d) {\n    d.fixed &= ~6;\n  }\n  function d3_layout_forceMouseover(d) {\n    d.fixed |= 4;\n    d.px = d.x, d.py = d.y;\n  }\n  function d3_layout_forceMouseout(d) {\n    d.fixed &= ~4;\n  }\n  function d3_layout_forceAccumulate(quad, alpha, charges) {\n    var cx = 0, cy = 0;\n    quad.charge = 0;\n    if (!quad.leaf) {\n      var nodes = quad.nodes, n = nodes.length, i = -1, c;\n      while (++i < n) {\n        c = nodes[i];\n        if (c == null) continue;\n        d3_layout_forceAccumulate(c, alpha, charges);\n        quad.charge += c.charge;\n        cx += c.charge * c.cx;\n        cy += c.charge * c.cy;\n      }\n    }\n    if (quad.point) {\n      if (!quad.leaf) {\n        quad.point.x += Math.random() - .5;\n        quad.point.y += Math.random() - .5;\n      }\n      var k = alpha * charges[quad.point.index];\n      quad.charge += quad.pointCharge = k;\n      cx += k * quad.point.x;\n      cy += k * quad.point.y;\n    }\n    quad.cx = cx / quad.charge;\n    quad.cy = cy / quad.charge;\n  }\n  var d3_layout_forceLinkDistance = 20, d3_layout_forceLinkStrength = 1, d3_layout_forceChargeDistance2 = Infinity;\n  d3.layout.hierarchy = function() {\n    var sort = d3_layout_hierarchySort, children = d3_layout_hierarchyChildren, value = d3_layout_hierarchyValue;\n    function hierarchy(root) {\n      var stack = [ root ], nodes = [], node;\n      root.depth = 0;\n      while ((node = stack.pop()) != null) {\n        nodes.push(node);\n        if ((childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {\n          var n, childs, child;\n          while (--n >= 0) {\n            stack.push(child = childs[n]);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n          if (value) node.value = 0;\n          node.children = childs;\n        } else {\n          if (value) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          delete node.children;\n        }\n      }\n      d3_layout_hierarchyVisitAfter(root, function(node) {\n        var childs, parent;\n        if (sort && (childs = node.children)) childs.sort(sort);\n        if (value && (parent = node.parent)) parent.value += node.value;\n      });\n      return nodes;\n    }\n    hierarchy.sort = function(x) {\n      if (!arguments.length) return sort;\n      sort = x;\n      return hierarchy;\n    };\n    hierarchy.children = function(x) {\n      if (!arguments.length) return children;\n      children = x;\n      return hierarchy;\n    };\n    hierarchy.value = function(x) {\n      if (!arguments.length) return value;\n      value = x;\n      return hierarchy;\n    };\n    hierarchy.revalue = function(root) {\n      if (value) {\n        d3_layout_hierarchyVisitBefore(root, function(node) {\n          if (node.children) node.value = 0;\n        });\n        d3_layout_hierarchyVisitAfter(root, function(node) {\n          var parent;\n          if (!node.children) node.value = +value.call(hierarchy, node, node.depth) || 0;\n          if (parent = node.parent) parent.value += node.value;\n        });\n      }\n      return root;\n    };\n    return hierarchy;\n  };\n  function d3_layout_hierarchyRebind(object, hierarchy) {\n    d3.rebind(object, hierarchy, \"sort\", \"children\", \"value\");\n    object.nodes = object;\n    object.links = d3_layout_hierarchyLinks;\n    return object;\n  }\n  function d3_layout_hierarchyVisitBefore(node, callback) {\n    var nodes = [ node ];\n    while ((node = nodes.pop()) != null) {\n      callback(node);\n      if ((children = node.children) && (n = children.length)) {\n        var n, children;\n        while (--n >= 0) nodes.push(children[n]);\n      }\n    }\n  }\n  function d3_layout_hierarchyVisitAfter(node, callback) {\n    var nodes = [ node ], nodes2 = [];\n    while ((node = nodes.pop()) != null) {\n      nodes2.push(node);\n      if ((children = node.children) && (n = children.length)) {\n        var i = -1, n, children;\n        while (++i < n) nodes.push(children[i]);\n      }\n    }\n    while ((node = nodes2.pop()) != null) {\n      callback(node);\n    }\n  }\n  function d3_layout_hierarchyChildren(d) {\n    return d.children;\n  }\n  function d3_layout_hierarchyValue(d) {\n    return d.value;\n  }\n  function d3_layout_hierarchySort(a, b) {\n    return b.value - a.value;\n  }\n  function d3_layout_hierarchyLinks(nodes) {\n    return d3.merge(nodes.map(function(parent) {\n      return (parent.children || []).map(function(child) {\n        return {\n          source: parent,\n          target: child\n        };\n      });\n    }));\n  }\n  d3.layout.partition = function() {\n    var hierarchy = d3.layout.hierarchy(), size = [ 1, 1 ];\n    function position(node, x, dx, dy) {\n      var children = node.children;\n      node.x = x;\n      node.y = node.depth * dy;\n      node.dx = dx;\n      node.dy = dy;\n      if (children && (n = children.length)) {\n        var i = -1, n, c, d;\n        dx = node.value ? dx / node.value : 0;\n        while (++i < n) {\n          position(c = children[i], x, d = c.value * dx, dy);\n          x += d;\n        }\n      }\n    }\n    function depth(node) {\n      var children = node.children, d = 0;\n      if (children && (n = children.length)) {\n        var i = -1, n;\n        while (++i < n) d = Math.max(d, depth(children[i]));\n      }\n      return 1 + d;\n    }\n    function partition(d, i) {\n      var nodes = hierarchy.call(this, d, i);\n      position(nodes[0], 0, size[0], size[1] / depth(nodes[0]));\n      return nodes;\n    }\n    partition.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return partition;\n    };\n    return d3_layout_hierarchyRebind(partition, hierarchy);\n  };\n  d3.layout.pie = function() {\n    var value = Number, sort = d3_layout_pieSortByValue, startAngle = 0, endAngle = τ, padAngle = 0;\n    function pie(data) {\n      var n = data.length, values = data.map(function(d, i) {\n        return +value.call(pie, d, i);\n      }), a = +(typeof startAngle === \"function\" ? startAngle.apply(this, arguments) : startAngle), da = (typeof endAngle === \"function\" ? endAngle.apply(this, arguments) : endAngle) - a, p = Math.min(Math.abs(da) / n, +(typeof padAngle === \"function\" ? padAngle.apply(this, arguments) : padAngle)), pa = p * (da < 0 ? -1 : 1), sum = d3.sum(values), k = sum ? (da - n * pa) / sum : 0, index = d3.range(n), arcs = [], v;\n      if (sort != null) index.sort(sort === d3_layout_pieSortByValue ? function(i, j) {\n        return values[j] - values[i];\n      } : function(i, j) {\n        return sort(data[i], data[j]);\n      });\n      index.forEach(function(i) {\n        arcs[i] = {\n          data: data[i],\n          value: v = values[i],\n          startAngle: a,\n          endAngle: a += v * k + pa,\n          padAngle: p\n        };\n      });\n      return arcs;\n    }\n    pie.value = function(_) {\n      if (!arguments.length) return value;\n      value = _;\n      return pie;\n    };\n    pie.sort = function(_) {\n      if (!arguments.length) return sort;\n      sort = _;\n      return pie;\n    };\n    pie.startAngle = function(_) {\n      if (!arguments.length) return startAngle;\n      startAngle = _;\n      return pie;\n    };\n    pie.endAngle = function(_) {\n      if (!arguments.length) return endAngle;\n      endAngle = _;\n      return pie;\n    };\n    pie.padAngle = function(_) {\n      if (!arguments.length) return padAngle;\n      padAngle = _;\n      return pie;\n    };\n    return pie;\n  };\n  var d3_layout_pieSortByValue = {};\n  d3.layout.stack = function() {\n    var values = d3_identity, order = d3_layout_stackOrderDefault, offset = d3_layout_stackOffsetZero, out = d3_layout_stackOut, x = d3_layout_stackX, y = d3_layout_stackY;\n    function stack(data, index) {\n      if (!(n = data.length)) return data;\n      var series = data.map(function(d, i) {\n        return values.call(stack, d, i);\n      });\n      var points = series.map(function(d) {\n        return d.map(function(v, i) {\n          return [ x.call(stack, v, i), y.call(stack, v, i) ];\n        });\n      });\n      var orders = order.call(stack, points, index);\n      series = d3.permute(series, orders);\n      points = d3.permute(points, orders);\n      var offsets = offset.call(stack, points, index);\n      var m = series[0].length, n, i, j, o;\n      for (j = 0; j < m; ++j) {\n        out.call(stack, series[0][j], o = offsets[j], points[0][j][1]);\n        for (i = 1; i < n; ++i) {\n          out.call(stack, series[i][j], o += points[i - 1][j][1], points[i][j][1]);\n        }\n      }\n      return data;\n    }\n    stack.values = function(x) {\n      if (!arguments.length) return values;\n      values = x;\n      return stack;\n    };\n    stack.order = function(x) {\n      if (!arguments.length) return order;\n      order = typeof x === \"function\" ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault;\n      return stack;\n    };\n    stack.offset = function(x) {\n      if (!arguments.length) return offset;\n      offset = typeof x === \"function\" ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero;\n      return stack;\n    };\n    stack.x = function(z) {\n      if (!arguments.length) return x;\n      x = z;\n      return stack;\n    };\n    stack.y = function(z) {\n      if (!arguments.length) return y;\n      y = z;\n      return stack;\n    };\n    stack.out = function(z) {\n      if (!arguments.length) return out;\n      out = z;\n      return stack;\n    };\n    return stack;\n  };\n  function d3_layout_stackX(d) {\n    return d.x;\n  }\n  function d3_layout_stackY(d) {\n    return d.y;\n  }\n  function d3_layout_stackOut(d, y0, y) {\n    d.y0 = y0;\n    d.y = y;\n  }\n  var d3_layout_stackOrders = d3.map({\n    \"inside-out\": function(data) {\n      var n = data.length, i, j, max = data.map(d3_layout_stackMaxIndex), sums = data.map(d3_layout_stackReduceSum), index = d3.range(n).sort(function(a, b) {\n        return max[a] - max[b];\n      }), top = 0, bottom = 0, tops = [], bottoms = [];\n      for (i = 0; i < n; ++i) {\n        j = index[i];\n        if (top < bottom) {\n          top += sums[j];\n          tops.push(j);\n        } else {\n          bottom += sums[j];\n          bottoms.push(j);\n        }\n      }\n      return bottoms.reverse().concat(tops);\n    },\n    reverse: function(data) {\n      return d3.range(data.length).reverse();\n    },\n    \"default\": d3_layout_stackOrderDefault\n  });\n  var d3_layout_stackOffsets = d3.map({\n    silhouette: function(data) {\n      var n = data.length, m = data[0].length, sums = [], max = 0, i, j, o, y0 = [];\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];\n        if (o > max) max = o;\n        sums.push(o);\n      }\n      for (j = 0; j < m; ++j) {\n        y0[j] = (max - sums[j]) / 2;\n      }\n      return y0;\n    },\n    wiggle: function(data) {\n      var n = data.length, x = data[0], m = x.length, i, j, k, s1, s2, s3, dx, o, o0, y0 = [];\n      y0[0] = o = o0 = 0;\n      for (j = 1; j < m; ++j) {\n        for (i = 0, s1 = 0; i < n; ++i) s1 += data[i][j][1];\n        for (i = 0, s2 = 0, dx = x[j][0] - x[j - 1][0]; i < n; ++i) {\n          for (k = 0, s3 = (data[i][j][1] - data[i][j - 1][1]) / (2 * dx); k < i; ++k) {\n            s3 += (data[k][j][1] - data[k][j - 1][1]) / dx;\n          }\n          s2 += s3 * data[i][j][1];\n        }\n        y0[j] = o -= s1 ? s2 / s1 * dx : 0;\n        if (o < o0) o0 = o;\n      }\n      for (j = 0; j < m; ++j) y0[j] -= o0;\n      return y0;\n    },\n    expand: function(data) {\n      var n = data.length, m = data[0].length, k = 1 / n, i, j, o, y0 = [];\n      for (j = 0; j < m; ++j) {\n        for (i = 0, o = 0; i < n; i++) o += data[i][j][1];\n        if (o) for (i = 0; i < n; i++) data[i][j][1] /= o; else for (i = 0; i < n; i++) data[i][j][1] = k;\n      }\n      for (j = 0; j < m; ++j) y0[j] = 0;\n      return y0;\n    },\n    zero: d3_layout_stackOffsetZero\n  });\n  function d3_layout_stackOrderDefault(data) {\n    return d3.range(data.length);\n  }\n  function d3_layout_stackOffsetZero(data) {\n    var j = -1, m = data[0].length, y0 = [];\n    while (++j < m) y0[j] = 0;\n    return y0;\n  }\n  function d3_layout_stackMaxIndex(array) {\n    var i = 1, j = 0, v = array[0][1], k, n = array.length;\n    for (;i < n; ++i) {\n      if ((k = array[i][1]) > v) {\n        j = i;\n        v = k;\n      }\n    }\n    return j;\n  }\n  function d3_layout_stackReduceSum(d) {\n    return d.reduce(d3_layout_stackSum, 0);\n  }\n  function d3_layout_stackSum(p, d) {\n    return p + d[1];\n  }\n  d3.layout.histogram = function() {\n    var frequency = true, valuer = Number, ranger = d3_layout_histogramRange, binner = d3_layout_histogramBinSturges;\n    function histogram(data, i) {\n      var bins = [], values = data.map(valuer, this), range = ranger.call(this, values, i), thresholds = binner.call(this, range, values, i), bin, i = -1, n = values.length, m = thresholds.length - 1, k = frequency ? 1 : 1 / n, x;\n      while (++i < m) {\n        bin = bins[i] = [];\n        bin.dx = thresholds[i + 1] - (bin.x = thresholds[i]);\n        bin.y = 0;\n      }\n      if (m > 0) {\n        i = -1;\n        while (++i < n) {\n          x = values[i];\n          if (x >= range[0] && x <= range[1]) {\n            bin = bins[d3.bisect(thresholds, x, 1, m) - 1];\n            bin.y += k;\n            bin.push(data[i]);\n          }\n        }\n      }\n      return bins;\n    }\n    histogram.value = function(x) {\n      if (!arguments.length) return valuer;\n      valuer = x;\n      return histogram;\n    };\n    histogram.range = function(x) {\n      if (!arguments.length) return ranger;\n      ranger = d3_functor(x);\n      return histogram;\n    };\n    histogram.bins = function(x) {\n      if (!arguments.length) return binner;\n      binner = typeof x === \"number\" ? function(range) {\n        return d3_layout_histogramBinFixed(range, x);\n      } : d3_functor(x);\n      return histogram;\n    };\n    histogram.frequency = function(x) {\n      if (!arguments.length) return frequency;\n      frequency = !!x;\n      return histogram;\n    };\n    return histogram;\n  };\n  function d3_layout_histogramBinSturges(range, values) {\n    return d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + 1));\n  }\n  function d3_layout_histogramBinFixed(range, n) {\n    var x = -1, b = +range[0], m = (range[1] - b) / n, f = [];\n    while (++x <= n) f[x] = m * x + b;\n    return f;\n  }\n  function d3_layout_histogramRange(values) {\n    return [ d3.min(values), d3.max(values) ];\n  }\n  d3.layout.pack = function() {\n    var hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort), padding = 0, size = [ 1, 1 ], radius;\n    function pack(d, i) {\n      var nodes = hierarchy.call(this, d, i), root = nodes[0], w = size[0], h = size[1], r = radius == null ? Math.sqrt : typeof radius === \"function\" ? radius : function() {\n        return radius;\n      };\n      root.x = root.y = 0;\n      d3_layout_hierarchyVisitAfter(root, function(d) {\n        d.r = +r(d.value);\n      });\n      d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n      if (padding) {\n        var dr = padding * (radius ? 1 : Math.max(2 * root.r / w, 2 * root.r / h)) / 2;\n        d3_layout_hierarchyVisitAfter(root, function(d) {\n          d.r += dr;\n        });\n        d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings);\n        d3_layout_hierarchyVisitAfter(root, function(d) {\n          d.r -= dr;\n        });\n      }\n      d3_layout_packTransform(root, w / 2, h / 2, radius ? 1 : 1 / Math.max(2 * root.r / w, 2 * root.r / h));\n      return nodes;\n    }\n    pack.size = function(_) {\n      if (!arguments.length) return size;\n      size = _;\n      return pack;\n    };\n    pack.radius = function(_) {\n      if (!arguments.length) return radius;\n      radius = _ == null || typeof _ === \"function\" ? _ : +_;\n      return pack;\n    };\n    pack.padding = function(_) {\n      if (!arguments.length) return padding;\n      padding = +_;\n      return pack;\n    };\n    return d3_layout_hierarchyRebind(pack, hierarchy);\n  };\n  function d3_layout_packSort(a, b) {\n    return a.value - b.value;\n  }\n  function d3_layout_packInsert(a, b) {\n    var c = a._pack_next;\n    a._pack_next = b;\n    b._pack_prev = a;\n    b._pack_next = c;\n    c._pack_prev = b;\n  }\n  function d3_layout_packSplice(a, b) {\n    a._pack_next = b;\n    b._pack_prev = a;\n  }\n  function d3_layout_packIntersects(a, b) {\n    var dx = b.x - a.x, dy = b.y - a.y, dr = a.r + b.r;\n    return .999 * dr * dr > dx * dx + dy * dy;\n  }\n  function d3_layout_packSiblings(node) {\n    if (!(nodes = node.children) || !(n = nodes.length)) return;\n    var nodes, xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, a, b, c, i, j, k, n;\n    function bound(node) {\n      xMin = Math.min(node.x - node.r, xMin);\n      xMax = Math.max(node.x + node.r, xMax);\n      yMin = Math.min(node.y - node.r, yMin);\n      yMax = Math.max(node.y + node.r, yMax);\n    }\n    nodes.forEach(d3_layout_packLink);\n    a = nodes[0];\n    a.x = -a.r;\n    a.y = 0;\n    bound(a);\n    if (n > 1) {\n      b = nodes[1];\n      b.x = b.r;\n      b.y = 0;\n      bound(b);\n      if (n > 2) {\n        c = nodes[2];\n        d3_layout_packPlace(a, b, c);\n        bound(c);\n        d3_layout_packInsert(a, c);\n        a._pack_prev = c;\n        d3_layout_packInsert(c, b);\n        b = a._pack_next;\n        for (i = 3; i < n; i++) {\n          d3_layout_packPlace(a, b, c = nodes[i]);\n          var isect = 0, s1 = 1, s2 = 1;\n          for (j = b._pack_next; j !== b; j = j._pack_next, s1++) {\n            if (d3_layout_packIntersects(j, c)) {\n              isect = 1;\n              break;\n            }\n          }\n          if (isect == 1) {\n            for (k = a._pack_prev; k !== j._pack_prev; k = k._pack_prev, s2++) {\n              if (d3_layout_packIntersects(k, c)) {\n                break;\n              }\n            }\n          }\n          if (isect) {\n            if (s1 < s2 || s1 == s2 && b.r < a.r) d3_layout_packSplice(a, b = j); else d3_layout_packSplice(a = k, b);\n            i--;\n          } else {\n            d3_layout_packInsert(a, c);\n            b = c;\n            bound(c);\n          }\n        }\n      }\n    }\n    var cx = (xMin + xMax) / 2, cy = (yMin + yMax) / 2, cr = 0;\n    for (i = 0; i < n; i++) {\n      c = nodes[i];\n      c.x -= cx;\n      c.y -= cy;\n      cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));\n    }\n    node.r = cr;\n    nodes.forEach(d3_layout_packUnlink);\n  }\n  function d3_layout_packLink(node) {\n    node._pack_next = node._pack_prev = node;\n  }\n  function d3_layout_packUnlink(node) {\n    delete node._pack_next;\n    delete node._pack_prev;\n  }\n  function d3_layout_packTransform(node, x, y, k) {\n    var children = node.children;\n    node.x = x += k * node.x;\n    node.y = y += k * node.y;\n    node.r *= k;\n    if (children) {\n      var i = -1, n = children.length;\n      while (++i < n) d3_layout_packTransform(children[i], x, y, k);\n    }\n  }\n  function d3_layout_packPlace(a, b, c) {\n    var db = a.r + c.r, dx = b.x - a.x, dy = b.y - a.y;\n    if (db && (dx || dy)) {\n      var da = b.r + c.r, dc = dx * dx + dy * dy;\n      da *= da;\n      db *= db;\n      var x = .5 + (db - da) / (2 * dc), y = Math.sqrt(Math.max(0, 2 * da * (db + dc) - (db -= dc) * db - da * da)) / (2 * dc);\n      c.x = a.x + x * dx + y * dy;\n      c.y = a.y + x * dy - y * dx;\n    } else {\n      c.x = a.x + db;\n      c.y = a.y;\n    }\n  }\n  d3.layout.tree = function() {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = null;\n    function tree(d, i) {\n      var nodes = hierarchy.call(this, d, i), root0 = nodes[0], root1 = wrapTree(root0);\n      d3_layout_hierarchyVisitAfter(root1, firstWalk), root1.parent.m = -root1.z;\n      d3_layout_hierarchyVisitBefore(root1, secondWalk);\n      if (nodeSize) d3_layout_hierarchyVisitBefore(root0, sizeNode); else {\n        var left = root0, right = root0, bottom = root0;\n        d3_layout_hierarchyVisitBefore(root0, function(node) {\n          if (node.x < left.x) left = node;\n          if (node.x > right.x) right = node;\n          if (node.depth > bottom.depth) bottom = node;\n        });\n        var tx = separation(left, right) / 2 - left.x, kx = size[0] / (right.x + separation(right, left) / 2 + tx), ky = size[1] / (bottom.depth || 1);\n        d3_layout_hierarchyVisitBefore(root0, function(node) {\n          node.x = (node.x + tx) * kx;\n          node.y = node.depth * ky;\n        });\n      }\n      return nodes;\n    }\n    function wrapTree(root0) {\n      var root1 = {\n        A: null,\n        children: [ root0 ]\n      }, queue = [ root1 ], node1;\n      while ((node1 = queue.pop()) != null) {\n        for (var children = node1.children, child, i = 0, n = children.length; i < n; ++i) {\n          queue.push((children[i] = child = {\n            _: children[i],\n            parent: node1,\n            children: (child = children[i].children) && child.slice() || [],\n            A: null,\n            a: null,\n            z: 0,\n            m: 0,\n            c: 0,\n            s: 0,\n            t: null,\n            i: i\n          }).a = child);\n        }\n      }\n      return root1.children[0];\n    }\n    function firstWalk(v) {\n      var children = v.children, siblings = v.parent.children, w = v.i ? siblings[v.i - 1] : null;\n      if (children.length) {\n        d3_layout_treeShift(v);\n        var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n        if (w) {\n          v.z = w.z + separation(v._, w._);\n          v.m = v.z - midpoint;\n        } else {\n          v.z = midpoint;\n        }\n      } else if (w) {\n        v.z = w.z + separation(v._, w._);\n      }\n      v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n    }\n    function secondWalk(v) {\n      v._.x = v.z + v.parent.m;\n      v.m += v.parent.m;\n    }\n    function apportion(v, w, ancestor) {\n      if (w) {\n        var vip = v, vop = v, vim = w, vom = vip.parent.children[0], sip = vip.m, sop = vop.m, sim = vim.m, som = vom.m, shift;\n        while (vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim && vip) {\n          vom = d3_layout_treeLeft(vom);\n          vop = d3_layout_treeRight(vop);\n          vop.a = v;\n          shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n          if (shift > 0) {\n            d3_layout_treeMove(d3_layout_treeAncestor(vim, v, ancestor), v, shift);\n            sip += shift;\n            sop += shift;\n          }\n          sim += vim.m;\n          sip += vip.m;\n          som += vom.m;\n          sop += vop.m;\n        }\n        if (vim && !d3_layout_treeRight(vop)) {\n          vop.t = vim;\n          vop.m += sim - sop;\n        }\n        if (vip && !d3_layout_treeLeft(vom)) {\n          vom.t = vip;\n          vom.m += sip - som;\n          ancestor = v;\n        }\n      }\n      return ancestor;\n    }\n    function sizeNode(node) {\n      node.x *= size[0];\n      node.y = node.depth * size[1];\n    }\n    tree.separation = function(x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return tree;\n    };\n    tree.size = function(x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null ? sizeNode : null;\n      return tree;\n    };\n    tree.nodeSize = function(x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) == null ? null : sizeNode;\n      return tree;\n    };\n    return d3_layout_hierarchyRebind(tree, hierarchy);\n  };\n  function d3_layout_treeSeparation(a, b) {\n    return a.parent == b.parent ? 1 : 2;\n  }\n  function d3_layout_treeLeft(v) {\n    var children = v.children;\n    return children.length ? children[0] : v.t;\n  }\n  function d3_layout_treeRight(v) {\n    var children = v.children, n;\n    return (n = children.length) ? children[n - 1] : v.t;\n  }\n  function d3_layout_treeMove(wm, wp, shift) {\n    var change = shift / (wp.i - wm.i);\n    wp.c -= change;\n    wp.s += shift;\n    wm.c += change;\n    wp.z += shift;\n    wp.m += shift;\n  }\n  function d3_layout_treeShift(v) {\n    var shift = 0, change = 0, children = v.children, i = children.length, w;\n    while (--i >= 0) {\n      w = children[i];\n      w.z += shift;\n      w.m += shift;\n      shift += w.s + (change += w.c);\n    }\n  }\n  function d3_layout_treeAncestor(vim, v, ancestor) {\n    return vim.a.parent === v.parent ? vim.a : ancestor;\n  }\n  d3.layout.cluster = function() {\n    var hierarchy = d3.layout.hierarchy().sort(null).value(null), separation = d3_layout_treeSeparation, size = [ 1, 1 ], nodeSize = false;\n    function cluster(d, i) {\n      var nodes = hierarchy.call(this, d, i), root = nodes[0], previousNode, x = 0;\n      d3_layout_hierarchyVisitAfter(root, function(node) {\n        var children = node.children;\n        if (children && children.length) {\n          node.x = d3_layout_clusterX(children);\n          node.y = d3_layout_clusterY(children);\n        } else {\n          node.x = previousNode ? x += separation(node, previousNode) : 0;\n          node.y = 0;\n          previousNode = node;\n        }\n      });\n      var left = d3_layout_clusterLeft(root), right = d3_layout_clusterRight(root), x0 = left.x - separation(left, right) / 2, x1 = right.x + separation(right, left) / 2;\n      d3_layout_hierarchyVisitAfter(root, nodeSize ? function(node) {\n        node.x = (node.x - root.x) * size[0];\n        node.y = (root.y - node.y) * size[1];\n      } : function(node) {\n        node.x = (node.x - x0) / (x1 - x0) * size[0];\n        node.y = (1 - (root.y ? node.y / root.y : 1)) * size[1];\n      });\n      return nodes;\n    }\n    cluster.separation = function(x) {\n      if (!arguments.length) return separation;\n      separation = x;\n      return cluster;\n    };\n    cluster.size = function(x) {\n      if (!arguments.length) return nodeSize ? null : size;\n      nodeSize = (size = x) == null;\n      return cluster;\n    };\n    cluster.nodeSize = function(x) {\n      if (!arguments.length) return nodeSize ? size : null;\n      nodeSize = (size = x) != null;\n      return cluster;\n    };\n    return d3_layout_hierarchyRebind(cluster, hierarchy);\n  };\n  function d3_layout_clusterY(children) {\n    return 1 + d3.max(children, function(child) {\n      return child.y;\n    });\n  }\n  function d3_layout_clusterX(children) {\n    return children.reduce(function(x, child) {\n      return x + child.x;\n    }, 0) / children.length;\n  }\n  function d3_layout_clusterLeft(node) {\n    var children = node.children;\n    return children && children.length ? d3_layout_clusterLeft(children[0]) : node;\n  }\n  function d3_layout_clusterRight(node) {\n    var children = node.children, n;\n    return children && (n = children.length) ? d3_layout_clusterRight(children[n - 1]) : node;\n  }\n  d3.layout.treemap = function() {\n    var hierarchy = d3.layout.hierarchy(), round = Math.round, size = [ 1, 1 ], padding = null, pad = d3_layout_treemapPadNull, sticky = false, stickies, mode = \"squarify\", ratio = .5 * (1 + Math.sqrt(5));\n    function scale(children, k) {\n      var i = -1, n = children.length, child, area;\n      while (++i < n) {\n        area = (child = children[i]).value * (k < 0 ? 0 : k);\n        child.area = isNaN(area) || area <= 0 ? 0 : area;\n      }\n    }\n    function squarify(node) {\n      var children = node.children;\n      if (children && children.length) {\n        var rect = pad(node), row = [], remaining = children.slice(), child, best = Infinity, score, u = mode === \"slice\" ? rect.dx : mode === \"dice\" ? rect.dy : mode === \"slice-dice\" ? node.depth & 1 ? rect.dy : rect.dx : Math.min(rect.dx, rect.dy), n;\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n        while ((n = remaining.length) > 0) {\n          row.push(child = remaining[n - 1]);\n          row.area += child.area;\n          if (mode !== \"squarify\" || (score = worst(row, u)) <= best) {\n            remaining.pop();\n            best = score;\n          } else {\n            row.area -= row.pop().area;\n            position(row, u, rect, false);\n            u = Math.min(rect.dx, rect.dy);\n            row.length = row.area = 0;\n            best = Infinity;\n          }\n        }\n        if (row.length) {\n          position(row, u, rect, true);\n          row.length = row.area = 0;\n        }\n        children.forEach(squarify);\n      }\n    }\n    function stickify(node) {\n      var children = node.children;\n      if (children && children.length) {\n        var rect = pad(node), remaining = children.slice(), child, row = [];\n        scale(remaining, rect.dx * rect.dy / node.value);\n        row.area = 0;\n        while (child = remaining.pop()) {\n          row.push(child);\n          row.area += child.area;\n          if (child.z != null) {\n            position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length);\n            row.length = row.area = 0;\n          }\n        }\n        children.forEach(stickify);\n      }\n    }\n    function worst(row, u) {\n      var s = row.area, r, rmax = 0, rmin = Infinity, i = -1, n = row.length;\n      while (++i < n) {\n        if (!(r = row[i].area)) continue;\n        if (r < rmin) rmin = r;\n        if (r > rmax) rmax = r;\n      }\n      s *= s;\n      u *= u;\n      return s ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : Infinity;\n    }\n    function position(row, u, rect, flush) {\n      var i = -1, n = row.length, x = rect.x, y = rect.y, v = u ? round(row.area / u) : 0, o;\n      if (u == rect.dx) {\n        if (flush || v > rect.dy) v = rect.dy;\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dy = v;\n          x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : 0);\n        }\n        o.z = true;\n        o.dx += rect.x + rect.dx - x;\n        rect.y += v;\n        rect.dy -= v;\n      } else {\n        if (flush || v > rect.dx) v = rect.dx;\n        while (++i < n) {\n          o = row[i];\n          o.x = x;\n          o.y = y;\n          o.dx = v;\n          y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : 0);\n        }\n        o.z = false;\n        o.dy += rect.y + rect.dy - y;\n        rect.x += v;\n        rect.dx -= v;\n      }\n    }\n    function treemap(d) {\n      var nodes = stickies || hierarchy(d), root = nodes[0];\n      root.x = root.y = 0;\n      if (root.value) root.dx = size[0], root.dy = size[1]; else root.dx = root.dy = 0;\n      if (stickies) hierarchy.revalue(root);\n      scale([ root ], root.dx * root.dy / root.value);\n      (stickies ? stickify : squarify)(root);\n      if (sticky) stickies = nodes;\n      return nodes;\n    }\n    treemap.size = function(x) {\n      if (!arguments.length) return size;\n      size = x;\n      return treemap;\n    };\n    treemap.padding = function(x) {\n      if (!arguments.length) return padding;\n      function padFunction(node) {\n        var p = x.call(treemap, node, node.depth);\n        return p == null ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, typeof p === \"number\" ? [ p, p, p, p ] : p);\n      }\n      function padConstant(node) {\n        return d3_layout_treemapPad(node, x);\n      }\n      var type;\n      pad = (padding = x) == null ? d3_layout_treemapPadNull : (type = typeof x) === \"function\" ? padFunction : type === \"number\" ? (x = [ x, x, x, x ], \n      padConstant) : padConstant;\n      return treemap;\n    };\n    treemap.round = function(x) {\n      if (!arguments.length) return round != Number;\n      round = x ? Math.round : Number;\n      return treemap;\n    };\n    treemap.sticky = function(x) {\n      if (!arguments.length) return sticky;\n      sticky = x;\n      stickies = null;\n      return treemap;\n    };\n    treemap.ratio = function(x) {\n      if (!arguments.length) return ratio;\n      ratio = x;\n      return treemap;\n    };\n    treemap.mode = function(x) {\n      if (!arguments.length) return mode;\n      mode = x + \"\";\n      return treemap;\n    };\n    return d3_layout_hierarchyRebind(treemap, hierarchy);\n  };\n  function d3_layout_treemapPadNull(node) {\n    return {\n      x: node.x,\n      y: node.y,\n      dx: node.dx,\n      dy: node.dy\n    };\n  }\n  function d3_layout_treemapPad(node, padding) {\n    var x = node.x + padding[3], y = node.y + padding[0], dx = node.dx - padding[1] - padding[3], dy = node.dy - padding[0] - padding[2];\n    if (dx < 0) {\n      x += dx / 2;\n      dx = 0;\n    }\n    if (dy < 0) {\n      y += dy / 2;\n      dy = 0;\n    }\n    return {\n      x: x,\n      y: y,\n      dx: dx,\n      dy: dy\n    };\n  }\n  d3.random = {\n    normal: function(µ, σ) {\n      var n = arguments.length;\n      if (n < 2) σ = 1;\n      if (n < 1) µ = 0;\n      return function() {\n        var x, y, r;\n        do {\n          x = Math.random() * 2 - 1;\n          y = Math.random() * 2 - 1;\n          r = x * x + y * y;\n        } while (!r || r > 1);\n        return µ + σ * x * Math.sqrt(-2 * Math.log(r) / r);\n      };\n    },\n    logNormal: function() {\n      var random = d3.random.normal.apply(d3, arguments);\n      return function() {\n        return Math.exp(random());\n      };\n    },\n    bates: function(m) {\n      var random = d3.random.irwinHall(m);\n      return function() {\n        return random() / m;\n      };\n    },\n    irwinHall: function(m) {\n      return function() {\n        for (var s = 0, j = 0; j < m; j++) s += Math.random();\n        return s;\n      };\n    }\n  };\n  d3.scale = {};\n  function d3_scaleExtent(domain) {\n    var start = domain[0], stop = domain[domain.length - 1];\n    return start < stop ? [ start, stop ] : [ stop, start ];\n  }\n  function d3_scaleRange(scale) {\n    return scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range());\n  }\n  function d3_scale_bilinear(domain, range, uninterpolate, interpolate) {\n    var u = uninterpolate(domain[0], domain[1]), i = interpolate(range[0], range[1]);\n    return function(x) {\n      return i(u(x));\n    };\n  }\n  function d3_scale_nice(domain, nice) {\n    var i0 = 0, i1 = domain.length - 1, x0 = domain[i0], x1 = domain[i1], dx;\n    if (x1 < x0) {\n      dx = i0, i0 = i1, i1 = dx;\n      dx = x0, x0 = x1, x1 = dx;\n    }\n    domain[i0] = nice.floor(x0);\n    domain[i1] = nice.ceil(x1);\n    return domain;\n  }\n  function d3_scale_niceStep(step) {\n    return step ? {\n      floor: function(x) {\n        return Math.floor(x / step) * step;\n      },\n      ceil: function(x) {\n        return Math.ceil(x / step) * step;\n      }\n    } : d3_scale_niceIdentity;\n  }\n  var d3_scale_niceIdentity = {\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n  function d3_scale_polylinear(domain, range, uninterpolate, interpolate) {\n    var u = [], i = [], j = 0, k = Math.min(domain.length, range.length) - 1;\n    if (domain[k] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n    while (++j <= k) {\n      u.push(uninterpolate(domain[j - 1], domain[j]));\n      i.push(interpolate(range[j - 1], range[j]));\n    }\n    return function(x) {\n      var j = d3.bisect(domain, x, 1, k) - 1;\n      return i[j](u[j](x));\n    };\n  }\n  d3.scale.linear = function() {\n    return d3_scale_linear([ 0, 1 ], [ 0, 1 ], d3_interpolate, false);\n  };\n  function d3_scale_linear(domain, range, interpolate, clamp) {\n    var output, input;\n    function rescale() {\n      var linear = Math.min(domain.length, range.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear, uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;\n      output = linear(domain, range, uninterpolate, interpolate);\n      input = linear(range, domain, uninterpolate, d3_interpolate);\n      return scale;\n    }\n    function scale(x) {\n      return output(x);\n    }\n    scale.invert = function(y) {\n      return input(y);\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(Number);\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.rangeRound = function(x) {\n      return scale.range(x).interpolate(d3_interpolateRound);\n    };\n    scale.clamp = function(x) {\n      if (!arguments.length) return clamp;\n      clamp = x;\n      return rescale();\n    };\n    scale.interpolate = function(x) {\n      if (!arguments.length) return interpolate;\n      interpolate = x;\n      return rescale();\n    };\n    scale.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    scale.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    scale.nice = function(m) {\n      d3_scale_linearNice(domain, m);\n      return rescale();\n    };\n    scale.copy = function() {\n      return d3_scale_linear(domain, range, interpolate, clamp);\n    };\n    return rescale();\n  }\n  function d3_scale_linearRebind(scale, linear) {\n    return d3.rebind(scale, linear, \"range\", \"rangeRound\", \"interpolate\", \"clamp\");\n  }\n  function d3_scale_linearNice(domain, m) {\n    return d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2]));\n  }\n  function d3_scale_linearTickRange(domain, m) {\n    if (m == null) m = 10;\n    var extent = d3_scaleExtent(domain), span = extent[1] - extent[0], step = Math.pow(10, Math.floor(Math.log(span / m) / Math.LN10)), err = m / span * step;\n    if (err <= .15) step *= 10; else if (err <= .35) step *= 5; else if (err <= .75) step *= 2;\n    extent[0] = Math.ceil(extent[0] / step) * step;\n    extent[1] = Math.floor(extent[1] / step) * step + step * .5;\n    extent[2] = step;\n    return extent;\n  }\n  function d3_scale_linearTicks(domain, m) {\n    return d3.range.apply(d3, d3_scale_linearTickRange(domain, m));\n  }\n  function d3_scale_linearTickFormat(domain, m, format) {\n    var range = d3_scale_linearTickRange(domain, m);\n    if (format) {\n      var match = d3_format_re.exec(format);\n      match.shift();\n      if (match[8] === \"s\") {\n        var prefix = d3.formatPrefix(Math.max(abs(range[0]), abs(range[1])));\n        if (!match[7]) match[7] = \".\" + d3_scale_linearPrecision(prefix.scale(range[2]));\n        match[8] = \"f\";\n        format = d3.format(match.join(\"\"));\n        return function(d) {\n          return format(prefix.scale(d)) + prefix.symbol;\n        };\n      }\n      if (!match[7]) match[7] = \".\" + d3_scale_linearFormatPrecision(match[8], range);\n      format = match.join(\"\");\n    } else {\n      format = \",.\" + d3_scale_linearPrecision(range[2]) + \"f\";\n    }\n    return d3.format(format);\n  }\n  var d3_scale_linearFormatSignificant = {\n    s: 1,\n    g: 1,\n    p: 1,\n    r: 1,\n    e: 1\n  };\n  function d3_scale_linearPrecision(value) {\n    return -Math.floor(Math.log(value) / Math.LN10 + .01);\n  }\n  function d3_scale_linearFormatPrecision(type, range) {\n    var p = d3_scale_linearPrecision(range[2]);\n    return type in d3_scale_linearFormatSignificant ? Math.abs(p - d3_scale_linearPrecision(Math.max(abs(range[0]), abs(range[1])))) + +(type !== \"e\") : p - (type === \"%\") * 2;\n  }\n  d3.scale.log = function() {\n    return d3_scale_log(d3.scale.linear().domain([ 0, 1 ]), 10, true, [ 1, 10 ]);\n  };\n  function d3_scale_log(linear, base, positive, domain) {\n    function log(x) {\n      return (positive ? Math.log(x < 0 ? 0 : x) : -Math.log(x > 0 ? 0 : -x)) / Math.log(base);\n    }\n    function pow(x) {\n      return positive ? Math.pow(base, x) : -Math.pow(base, -x);\n    }\n    function scale(x) {\n      return linear(log(x));\n    }\n    scale.invert = function(x) {\n      return pow(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      positive = x[0] >= 0;\n      linear.domain((domain = x.map(Number)).map(log));\n      return scale;\n    };\n    scale.base = function(_) {\n      if (!arguments.length) return base;\n      base = +_;\n      linear.domain(domain.map(log));\n      return scale;\n    };\n    scale.nice = function() {\n      var niced = d3_scale_nice(domain.map(log), positive ? Math : d3_scale_logNiceNegative);\n      linear.domain(niced);\n      domain = niced.map(pow);\n      return scale;\n    };\n    scale.ticks = function() {\n      var extent = d3_scaleExtent(domain), ticks = [], u = extent[0], v = extent[1], i = Math.floor(log(u)), j = Math.ceil(log(v)), n = base % 1 ? 2 : base;\n      if (isFinite(j - i)) {\n        if (positive) {\n          for (;i < j; i++) for (var k = 1; k < n; k++) ticks.push(pow(i) * k);\n          ticks.push(pow(i));\n        } else {\n          ticks.push(pow(i));\n          for (;i++ < j; ) for (var k = n - 1; k > 0; k--) ticks.push(pow(i) * k);\n        }\n        for (i = 0; ticks[i] < u; i++) {}\n        for (j = ticks.length; ticks[j - 1] > v; j--) {}\n        ticks = ticks.slice(i, j);\n      }\n      return ticks;\n    };\n    scale.tickFormat = function(n, format) {\n      if (!arguments.length) return d3_scale_logFormat;\n      if (arguments.length < 2) format = d3_scale_logFormat; else if (typeof format !== \"function\") format = d3.format(format);\n      var k = Math.max(.1, n / scale.ticks().length), f = positive ? (e = 1e-12, Math.ceil) : (e = -1e-12, \n      Math.floor), e;\n      return function(d) {\n        return d / pow(f(log(d) + e)) <= k ? format(d) : \"\";\n      };\n    };\n    scale.copy = function() {\n      return d3_scale_log(linear.copy(), base, positive, domain);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  var d3_scale_logFormat = d3.format(\".0e\"), d3_scale_logNiceNegative = {\n    floor: function(x) {\n      return -Math.ceil(-x);\n    },\n    ceil: function(x) {\n      return -Math.floor(-x);\n    }\n  };\n  d3.scale.pow = function() {\n    return d3_scale_pow(d3.scale.linear(), 1, [ 0, 1 ]);\n  };\n  function d3_scale_pow(linear, exponent, domain) {\n    var powp = d3_scale_powPow(exponent), powb = d3_scale_powPow(1 / exponent);\n    function scale(x) {\n      return linear(powp(x));\n    }\n    scale.invert = function(x) {\n      return powb(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      linear.domain((domain = x.map(Number)).map(powp));\n      return scale;\n    };\n    scale.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    scale.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    scale.nice = function(m) {\n      return scale.domain(d3_scale_linearNice(domain, m));\n    };\n    scale.exponent = function(x) {\n      if (!arguments.length) return exponent;\n      powp = d3_scale_powPow(exponent = x);\n      powb = d3_scale_powPow(1 / exponent);\n      linear.domain(domain.map(powp));\n      return scale;\n    };\n    scale.copy = function() {\n      return d3_scale_pow(linear.copy(), exponent, domain);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  function d3_scale_powPow(e) {\n    return function(x) {\n      return x < 0 ? -Math.pow(-x, e) : Math.pow(x, e);\n    };\n  }\n  d3.scale.sqrt = function() {\n    return d3.scale.pow().exponent(.5);\n  };\n  d3.scale.ordinal = function() {\n    return d3_scale_ordinal([], {\n      t: \"range\",\n      a: [ [] ]\n    });\n  };\n  function d3_scale_ordinal(domain, ranger) {\n    var index, range, rangeBand;\n    function scale(x) {\n      return range[((index.get(x) || (ranger.t === \"range\" ? index.set(x, domain.push(x)) : NaN)) - 1) % range.length];\n    }\n    function steps(start, step) {\n      return d3.range(domain.length).map(function(i) {\n        return start + step * i;\n      });\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = [];\n      index = new d3_Map();\n      var i = -1, n = x.length, xi;\n      while (++i < n) if (!index.has(xi = x[i])) index.set(xi, domain.push(xi));\n      return scale[ranger.t].apply(scale, ranger.a);\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      rangeBand = 0;\n      ranger = {\n        t: \"range\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangePoints = function(x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = (start + stop) / 2, \n      0) : (stop - start) / (domain.length - 1 + padding);\n      range = steps(start + step * padding / 2, step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangePoints\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeRoundPoints = function(x, padding) {\n      if (arguments.length < 2) padding = 0;\n      var start = x[0], stop = x[1], step = domain.length < 2 ? (start = stop = Math.round((start + stop) / 2), \n      0) : (stop - start) / (domain.length - 1 + padding) | 0;\n      range = steps(start + Math.round(step * padding / 2 + (stop - start - (domain.length - 1 + padding) * step) / 2), step);\n      rangeBand = 0;\n      ranger = {\n        t: \"rangeRoundPoints\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeBands = function(x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = (stop - start) / (domain.length - padding + 2 * outerPadding);\n      range = steps(start + step * outerPadding, step);\n      if (reverse) range.reverse();\n      rangeBand = step * (1 - padding);\n      ranger = {\n        t: \"rangeBands\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeRoundBands = function(x, padding, outerPadding) {\n      if (arguments.length < 2) padding = 0;\n      if (arguments.length < 3) outerPadding = padding;\n      var reverse = x[1] < x[0], start = x[reverse - 0], stop = x[1 - reverse], step = Math.floor((stop - start) / (domain.length - padding + 2 * outerPadding));\n      range = steps(start + Math.round((stop - start - (domain.length - padding) * step) / 2), step);\n      if (reverse) range.reverse();\n      rangeBand = Math.round(step * (1 - padding));\n      ranger = {\n        t: \"rangeRoundBands\",\n        a: arguments\n      };\n      return scale;\n    };\n    scale.rangeBand = function() {\n      return rangeBand;\n    };\n    scale.rangeExtent = function() {\n      return d3_scaleExtent(ranger.a[0]);\n    };\n    scale.copy = function() {\n      return d3_scale_ordinal(domain, ranger);\n    };\n    return scale.domain(domain);\n  }\n  d3.scale.category10 = function() {\n    return d3.scale.ordinal().range(d3_category10);\n  };\n  d3.scale.category20 = function() {\n    return d3.scale.ordinal().range(d3_category20);\n  };\n  d3.scale.category20b = function() {\n    return d3.scale.ordinal().range(d3_category20b);\n  };\n  d3.scale.category20c = function() {\n    return d3.scale.ordinal().range(d3_category20c);\n  };\n  var d3_category10 = [ 2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175 ].map(d3_rgbString);\n  var d3_category20 = [ 2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725 ].map(d3_rgbString);\n  var d3_category20b = [ 3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654 ].map(d3_rgbString);\n  var d3_category20c = [ 3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081 ].map(d3_rgbString);\n  d3.scale.quantile = function() {\n    return d3_scale_quantile([], []);\n  };\n  function d3_scale_quantile(domain, range) {\n    var thresholds;\n    function rescale() {\n      var k = 0, q = range.length;\n      thresholds = [];\n      while (++k < q) thresholds[k - 1] = d3.quantile(domain, k / q);\n      return scale;\n    }\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3.bisect(thresholds, x)];\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(d3_number).filter(d3_numeric).sort(d3_ascending);\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.quantiles = function() {\n      return thresholds;\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      return y < 0 ? [ NaN, NaN ] : [ y > 0 ? thresholds[y - 1] : domain[0], y < thresholds.length ? thresholds[y] : domain[domain.length - 1] ];\n    };\n    scale.copy = function() {\n      return d3_scale_quantile(domain, range);\n    };\n    return rescale();\n  }\n  d3.scale.quantize = function() {\n    return d3_scale_quantize(0, 1, [ 0, 1 ]);\n  };\n  function d3_scale_quantize(x0, x1, range) {\n    var kx, i;\n    function scale(x) {\n      return range[Math.max(0, Math.min(i, Math.floor(kx * (x - x0))))];\n    }\n    function rescale() {\n      kx = range.length / (x1 - x0);\n      i = range.length - 1;\n      return scale;\n    }\n    scale.domain = function(x) {\n      if (!arguments.length) return [ x0, x1 ];\n      x0 = +x[0];\n      x1 = +x[x.length - 1];\n      return rescale();\n    };\n    scale.range = function(x) {\n      if (!arguments.length) return range;\n      range = x;\n      return rescale();\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      y = y < 0 ? NaN : y / kx + x0;\n      return [ y, y + 1 / kx ];\n    };\n    scale.copy = function() {\n      return d3_scale_quantize(x0, x1, range);\n    };\n    return rescale();\n  }\n  d3.scale.threshold = function() {\n    return d3_scale_threshold([ .5 ], [ 0, 1 ]);\n  };\n  function d3_scale_threshold(domain, range) {\n    function scale(x) {\n      if (x <= x) return range[d3.bisect(domain, x)];\n    }\n    scale.domain = function(_) {\n      if (!arguments.length) return domain;\n      domain = _;\n      return scale;\n    };\n    scale.range = function(_) {\n      if (!arguments.length) return range;\n      range = _;\n      return scale;\n    };\n    scale.invertExtent = function(y) {\n      y = range.indexOf(y);\n      return [ domain[y - 1], domain[y] ];\n    };\n    scale.copy = function() {\n      return d3_scale_threshold(domain, range);\n    };\n    return scale;\n  }\n  d3.scale.identity = function() {\n    return d3_scale_identity([ 0, 1 ]);\n  };\n  function d3_scale_identity(domain) {\n    function identity(x) {\n      return +x;\n    }\n    identity.invert = identity;\n    identity.domain = identity.range = function(x) {\n      if (!arguments.length) return domain;\n      domain = x.map(identity);\n      return identity;\n    };\n    identity.ticks = function(m) {\n      return d3_scale_linearTicks(domain, m);\n    };\n    identity.tickFormat = function(m, format) {\n      return d3_scale_linearTickFormat(domain, m, format);\n    };\n    identity.copy = function() {\n      return d3_scale_identity(domain);\n    };\n    return identity;\n  }\n  d3.svg = {};\n  function d3_zero() {\n    return 0;\n  }\n  d3.svg.arc = function() {\n    var innerRadius = d3_svg_arcInnerRadius, outerRadius = d3_svg_arcOuterRadius, cornerRadius = d3_zero, padRadius = d3_svg_arcAuto, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle, padAngle = d3_svg_arcPadAngle;\n    function arc() {\n      var r0 = Math.max(0, +innerRadius.apply(this, arguments)), r1 = Math.max(0, +outerRadius.apply(this, arguments)), a0 = startAngle.apply(this, arguments) - halfπ, a1 = endAngle.apply(this, arguments) - halfπ, da = Math.abs(a1 - a0), cw = a0 > a1 ? 0 : 1;\n      if (r1 < r0) rc = r1, r1 = r0, r0 = rc;\n      if (da >= τε) return circleSegment(r1, cw) + (r0 ? circleSegment(r0, 1 - cw) : \"\") + \"Z\";\n      var rc, cr, rp, ap, p0 = 0, p1 = 0, x0, y0, x1, y1, x2, y2, x3, y3, path = [];\n      if (ap = (+padAngle.apply(this, arguments) || 0) / 2) {\n        rp = padRadius === d3_svg_arcAuto ? Math.sqrt(r0 * r0 + r1 * r1) : +padRadius.apply(this, arguments);\n        if (!cw) p1 *= -1;\n        if (r1) p1 = d3_asin(rp / r1 * Math.sin(ap));\n        if (r0) p0 = d3_asin(rp / r0 * Math.sin(ap));\n      }\n      if (r1) {\n        x0 = r1 * Math.cos(a0 + p1);\n        y0 = r1 * Math.sin(a0 + p1);\n        x1 = r1 * Math.cos(a1 - p1);\n        y1 = r1 * Math.sin(a1 - p1);\n        var l1 = Math.abs(a1 - a0 - 2 * p1) <= π ? 0 : 1;\n        if (p1 && d3_svg_arcSweep(x0, y0, x1, y1) === cw ^ l1) {\n          var h1 = (a0 + a1) / 2;\n          x0 = r1 * Math.cos(h1);\n          y0 = r1 * Math.sin(h1);\n          x1 = y1 = null;\n        }\n      } else {\n        x0 = y0 = 0;\n      }\n      if (r0) {\n        x2 = r0 * Math.cos(a1 - p0);\n        y2 = r0 * Math.sin(a1 - p0);\n        x3 = r0 * Math.cos(a0 + p0);\n        y3 = r0 * Math.sin(a0 + p0);\n        var l0 = Math.abs(a0 - a1 + 2 * p0) <= π ? 0 : 1;\n        if (p0 && d3_svg_arcSweep(x2, y2, x3, y3) === 1 - cw ^ l0) {\n          var h0 = (a0 + a1) / 2;\n          x2 = r0 * Math.cos(h0);\n          y2 = r0 * Math.sin(h0);\n          x3 = y3 = null;\n        }\n      } else {\n        x2 = y2 = 0;\n      }\n      if (da > ε && (rc = Math.min(Math.abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments))) > .001) {\n        cr = r0 < r1 ^ cw ? 0 : 1;\n        var rc1 = rc, rc0 = rc;\n        if (da < π) {\n          var oc = x3 == null ? [ x2, y2 ] : x1 == null ? [ x0, y0 ] : d3_geom_polygonIntersect([ x0, y0 ], [ x3, y3 ], [ x1, y1 ], [ x2, y2 ]), ax = x0 - oc[0], ay = y0 - oc[1], bx = x1 - oc[0], by = y1 - oc[1], kc = 1 / Math.sin(Math.acos((ax * bx + ay * by) / (Math.sqrt(ax * ax + ay * ay) * Math.sqrt(bx * bx + by * by))) / 2), lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n          rc0 = Math.min(rc, (r0 - lc) / (kc - 1));\n          rc1 = Math.min(rc, (r1 - lc) / (kc + 1));\n        }\n        if (x1 != null) {\n          var t30 = d3_svg_arcCornerTangents(x3 == null ? [ x2, y2 ] : [ x3, y3 ], [ x0, y0 ], r1, rc1, cw), t12 = d3_svg_arcCornerTangents([ x1, y1 ], [ x2, y2 ], r1, rc1, cw);\n          if (rc === rc1) {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t30[1], \"A\", r1, \",\", r1, \" 0 \", 1 - cw ^ d3_svg_arcSweep(t30[1][0], t30[1][1], t12[1][0], t12[1][1]), \",\", cw, \" \", t12[1], \"A\", rc1, \",\", rc1, \" 0 0,\", cr, \" \", t12[0]);\n          } else {\n            path.push(\"M\", t30[0], \"A\", rc1, \",\", rc1, \" 0 1,\", cr, \" \", t12[0]);\n          }\n        } else {\n          path.push(\"M\", x0, \",\", y0);\n        }\n        if (x3 != null) {\n          var t03 = d3_svg_arcCornerTangents([ x0, y0 ], [ x3, y3 ], r0, -rc0, cw), t21 = d3_svg_arcCornerTangents([ x2, y2 ], x1 == null ? [ x0, y0 ] : [ x1, y1 ], r0, -rc0, cw);\n          if (rc === rc0) {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t21[1], \"A\", r0, \",\", r0, \" 0 \", cw ^ d3_svg_arcSweep(t21[1][0], t21[1][1], t03[1][0], t03[1][1]), \",\", 1 - cw, \" \", t03[1], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          } else {\n            path.push(\"L\", t21[0], \"A\", rc0, \",\", rc0, \" 0 0,\", cr, \" \", t03[0]);\n          }\n        } else {\n          path.push(\"L\", x2, \",\", y2);\n        }\n      } else {\n        path.push(\"M\", x0, \",\", y0);\n        if (x1 != null) path.push(\"A\", r1, \",\", r1, \" 0 \", l1, \",\", cw, \" \", x1, \",\", y1);\n        path.push(\"L\", x2, \",\", y2);\n        if (x3 != null) path.push(\"A\", r0, \",\", r0, \" 0 \", l0, \",\", 1 - cw, \" \", x3, \",\", y3);\n      }\n      path.push(\"Z\");\n      return path.join(\"\");\n    }\n    function circleSegment(r1, cw) {\n      return \"M0,\" + r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + -r1 + \"A\" + r1 + \",\" + r1 + \" 0 1,\" + cw + \" 0,\" + r1;\n    }\n    arc.innerRadius = function(v) {\n      if (!arguments.length) return innerRadius;\n      innerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.outerRadius = function(v) {\n      if (!arguments.length) return outerRadius;\n      outerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.cornerRadius = function(v) {\n      if (!arguments.length) return cornerRadius;\n      cornerRadius = d3_functor(v);\n      return arc;\n    };\n    arc.padRadius = function(v) {\n      if (!arguments.length) return padRadius;\n      padRadius = v == d3_svg_arcAuto ? d3_svg_arcAuto : d3_functor(v);\n      return arc;\n    };\n    arc.startAngle = function(v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return arc;\n    };\n    arc.endAngle = function(v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return arc;\n    };\n    arc.padAngle = function(v) {\n      if (!arguments.length) return padAngle;\n      padAngle = d3_functor(v);\n      return arc;\n    };\n    arc.centroid = function() {\n      var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2, a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - halfπ;\n      return [ Math.cos(a) * r, Math.sin(a) * r ];\n    };\n    return arc;\n  };\n  var d3_svg_arcAuto = \"auto\";\n  function d3_svg_arcInnerRadius(d) {\n    return d.innerRadius;\n  }\n  function d3_svg_arcOuterRadius(d) {\n    return d.outerRadius;\n  }\n  function d3_svg_arcStartAngle(d) {\n    return d.startAngle;\n  }\n  function d3_svg_arcEndAngle(d) {\n    return d.endAngle;\n  }\n  function d3_svg_arcPadAngle(d) {\n    return d && d.padAngle;\n  }\n  function d3_svg_arcSweep(x0, y0, x1, y1) {\n    return (x0 - x1) * y0 - (y0 - y1) * x0 > 0 ? 0 : 1;\n  }\n  function d3_svg_arcCornerTangents(p0, p1, r1, rc, cw) {\n    var x01 = p0[0] - p1[0], y01 = p0[1] - p1[1], lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01), ox = lo * y01, oy = -lo * x01, x1 = p0[0] + ox, y1 = p0[1] + oy, x2 = p1[0] + ox, y2 = p1[1] + oy, x3 = (x1 + x2) / 2, y3 = (y1 + y2) / 2, dx = x2 - x1, dy = y2 - y1, d2 = dx * dx + dy * dy, r = r1 - rc, D = x1 * y2 - x2 * y1, d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D)), cx0 = (D * dy - dx * d) / d2, cy0 = (-D * dx - dy * d) / d2, cx1 = (D * dy + dx * d) / d2, cy1 = (-D * dx + dy * d) / d2, dx0 = cx0 - x3, dy0 = cy0 - y3, dx1 = cx1 - x3, dy1 = cy1 - y3;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n    return [ [ cx0 - ox, cy0 - oy ], [ cx0 * r1 / r, cy0 * r1 / r ] ];\n  }\n  function d3_svg_line(projection) {\n    var x = d3_geom_pointX, y = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, tension = .7;\n    function line(data) {\n      var segments = [], points = [], i = -1, n = data.length, d, fx = d3_functor(x), fy = d3_functor(y);\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points), tension));\n      }\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points.push([ +fx.call(this, d, i), +fy.call(this, d, i) ]);\n        } else if (points.length) {\n          segment();\n          points = [];\n        }\n      }\n      if (points.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n    line.x = function(_) {\n      if (!arguments.length) return x;\n      x = _;\n      return line;\n    };\n    line.y = function(_) {\n      if (!arguments.length) return y;\n      y = _;\n      return line;\n    };\n    line.defined = function(_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return line;\n    };\n    line.interpolate = function(_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      return line;\n    };\n    line.tension = function(_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return line;\n    };\n    return line;\n  }\n  d3.svg.line = function() {\n    return d3_svg_line(d3_identity);\n  };\n  var d3_svg_lineInterpolators = d3.map({\n    linear: d3_svg_lineLinear,\n    \"linear-closed\": d3_svg_lineLinearClosed,\n    step: d3_svg_lineStep,\n    \"step-before\": d3_svg_lineStepBefore,\n    \"step-after\": d3_svg_lineStepAfter,\n    basis: d3_svg_lineBasis,\n    \"basis-open\": d3_svg_lineBasisOpen,\n    \"basis-closed\": d3_svg_lineBasisClosed,\n    bundle: d3_svg_lineBundle,\n    cardinal: d3_svg_lineCardinal,\n    \"cardinal-open\": d3_svg_lineCardinalOpen,\n    \"cardinal-closed\": d3_svg_lineCardinalClosed,\n    monotone: d3_svg_lineMonotone\n  });\n  d3_svg_lineInterpolators.forEach(function(key, value) {\n    value.key = key;\n    value.closed = /-closed$/.test(key);\n  });\n  function d3_svg_lineLinear(points) {\n    return points.length > 1 ? points.join(\"L\") : points + \"Z\";\n  }\n  function d3_svg_lineLinearClosed(points) {\n    return points.join(\"L\") + \"Z\";\n  }\n  function d3_svg_lineStep(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"H\", (p[0] + (p = points[i])[0]) / 2, \"V\", p[1]);\n    if (n > 1) path.push(\"H\", p[0]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineStepBefore(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"V\", (p = points[i])[1], \"H\", p[0]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineStepAfter(points) {\n    var i = 0, n = points.length, p = points[0], path = [ p[0], \",\", p[1] ];\n    while (++i < n) path.push(\"H\", (p = points[i])[0], \"V\", p[1]);\n    return path.join(\"\");\n  }\n  function d3_svg_lineCardinalOpen(points, tension) {\n    return points.length < 4 ? d3_svg_lineLinear(points) : points[1] + d3_svg_lineHermite(points.slice(1, -1), d3_svg_lineCardinalTangents(points, tension));\n  }\n  function d3_svg_lineCardinalClosed(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinearClosed(points) : points[0] + d3_svg_lineHermite((points.push(points[0]), \n    points), d3_svg_lineCardinalTangents([ points[points.length - 2] ].concat(points, [ points[1] ]), tension));\n  }\n  function d3_svg_lineCardinal(points, tension) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension));\n  }\n  function d3_svg_lineHermite(points, tangents) {\n    if (tangents.length < 1 || points.length != tangents.length && points.length != tangents.length + 2) {\n      return d3_svg_lineLinear(points);\n    }\n    var quad = points.length != tangents.length, path = \"\", p0 = points[0], p = points[1], t0 = tangents[0], t = t0, pi = 1;\n    if (quad) {\n      path += \"Q\" + (p[0] - t0[0] * 2 / 3) + \",\" + (p[1] - t0[1] * 2 / 3) + \",\" + p[0] + \",\" + p[1];\n      p0 = points[1];\n      pi = 2;\n    }\n    if (tangents.length > 1) {\n      t = tangents[1];\n      p = points[pi];\n      pi++;\n      path += \"C\" + (p0[0] + t0[0]) + \",\" + (p0[1] + t0[1]) + \",\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n      for (var i = 2; i < tangents.length; i++, pi++) {\n        p = points[pi];\n        t = tangents[i];\n        path += \"S\" + (p[0] - t[0]) + \",\" + (p[1] - t[1]) + \",\" + p[0] + \",\" + p[1];\n      }\n    }\n    if (quad) {\n      var lp = points[pi];\n      path += \"Q\" + (p[0] + t[0] * 2 / 3) + \",\" + (p[1] + t[1] * 2 / 3) + \",\" + lp[0] + \",\" + lp[1];\n    }\n    return path;\n  }\n  function d3_svg_lineCardinalTangents(points, tension) {\n    var tangents = [], a = (1 - tension) / 2, p0, p1 = points[0], p2 = points[1], i = 1, n = points.length;\n    while (++i < n) {\n      p0 = p1;\n      p1 = p2;\n      p2 = points[i];\n      tangents.push([ a * (p2[0] - p0[0]), a * (p2[1] - p0[1]) ]);\n    }\n    return tangents;\n  }\n  function d3_svg_lineBasis(points) {\n    if (points.length < 3) return d3_svg_lineLinear(points);\n    var i = 1, n = points.length, pi = points[0], x0 = pi[0], y0 = pi[1], px = [ x0, x0, x0, (pi = points[1])[0] ], py = [ y0, y0, y0, pi[1] ], path = [ x0, \",\", y0, \"L\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];\n    points.push(points[n - 1]);\n    while (++i <= n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    points.pop();\n    path.push(\"L\", pi);\n    return path.join(\"\");\n  }\n  function d3_svg_lineBasisOpen(points) {\n    if (points.length < 4) return d3_svg_lineLinear(points);\n    var path = [], i = -1, n = points.length, pi, px = [ 0 ], py = [ 0 ];\n    while (++i < 3) {\n      pi = points[i];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n    path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + \",\" + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py));\n    --i;\n    while (++i < n) {\n      pi = points[i];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    return path.join(\"\");\n  }\n  function d3_svg_lineBasisClosed(points) {\n    var path, i = -1, n = points.length, m = n + 4, pi, px = [], py = [];\n    while (++i < 4) {\n      pi = points[i % n];\n      px.push(pi[0]);\n      py.push(pi[1]);\n    }\n    path = [ d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py) ];\n    --i;\n    while (++i < m) {\n      pi = points[i % n];\n      px.shift();\n      px.push(pi[0]);\n      py.shift();\n      py.push(pi[1]);\n      d3_svg_lineBasisBezier(path, px, py);\n    }\n    return path.join(\"\");\n  }\n  function d3_svg_lineBundle(points, tension) {\n    var n = points.length - 1;\n    if (n) {\n      var x0 = points[0][0], y0 = points[0][1], dx = points[n][0] - x0, dy = points[n][1] - y0, i = -1, p, t;\n      while (++i <= n) {\n        p = points[i];\n        t = i / n;\n        p[0] = tension * p[0] + (1 - tension) * (x0 + t * dx);\n        p[1] = tension * p[1] + (1 - tension) * (y0 + t * dy);\n      }\n    }\n    return d3_svg_lineBasis(points);\n  }\n  function d3_svg_lineDot4(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n  }\n  var d3_svg_lineBasisBezier1 = [ 0, 2 / 3, 1 / 3, 0 ], d3_svg_lineBasisBezier2 = [ 0, 1 / 3, 2 / 3, 0 ], d3_svg_lineBasisBezier3 = [ 0, 1 / 6, 2 / 3, 1 / 6 ];\n  function d3_svg_lineBasisBezier(path, x, y) {\n    path.push(\"C\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), \",\", d3_svg_lineDot4(d3_svg_lineBasisBezier3, y));\n  }\n  function d3_svg_lineSlope(p0, p1) {\n    return (p1[1] - p0[1]) / (p1[0] - p0[0]);\n  }\n  function d3_svg_lineFiniteDifferences(points) {\n    var i = 0, j = points.length - 1, m = [], p0 = points[0], p1 = points[1], d = m[0] = d3_svg_lineSlope(p0, p1);\n    while (++i < j) {\n      m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + 1]))) / 2;\n    }\n    m[i] = d;\n    return m;\n  }\n  function d3_svg_lineMonotoneTangents(points) {\n    var tangents = [], d, a, b, s, m = d3_svg_lineFiniteDifferences(points), i = -1, j = points.length - 1;\n    while (++i < j) {\n      d = d3_svg_lineSlope(points[i], points[i + 1]);\n      if (abs(d) < ε) {\n        m[i] = m[i + 1] = 0;\n      } else {\n        a = m[i] / d;\n        b = m[i + 1] / d;\n        s = a * a + b * b;\n        if (s > 9) {\n          s = d * 3 / Math.sqrt(s);\n          m[i] = s * a;\n          m[i + 1] = s * b;\n        }\n      }\n    }\n    i = -1;\n    while (++i <= j) {\n      s = (points[Math.min(j, i + 1)][0] - points[Math.max(0, i - 1)][0]) / (6 * (1 + m[i] * m[i]));\n      tangents.push([ s || 0, m[i] * s || 0 ]);\n    }\n    return tangents;\n  }\n  function d3_svg_lineMonotone(points) {\n    return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineMonotoneTangents(points));\n  }\n  d3.svg.line.radial = function() {\n    var line = d3_svg_line(d3_svg_lineRadial);\n    line.radius = line.x, delete line.x;\n    line.angle = line.y, delete line.y;\n    return line;\n  };\n  function d3_svg_lineRadial(points) {\n    var point, i = -1, n = points.length, r, a;\n    while (++i < n) {\n      point = points[i];\n      r = point[0];\n      a = point[1] - halfπ;\n      point[0] = r * Math.cos(a);\n      point[1] = r * Math.sin(a);\n    }\n    return points;\n  }\n  function d3_svg_area(projection) {\n    var x0 = d3_geom_pointX, x1 = d3_geom_pointX, y0 = 0, y1 = d3_geom_pointY, defined = d3_true, interpolate = d3_svg_lineLinear, interpolateKey = interpolate.key, interpolateReverse = interpolate, L = \"L\", tension = .7;\n    function area(data) {\n      var segments = [], points0 = [], points1 = [], i = -1, n = data.length, d, fx0 = d3_functor(x0), fy0 = d3_functor(y0), fx1 = x0 === x1 ? function() {\n        return x;\n      } : d3_functor(x1), fy1 = y0 === y1 ? function() {\n        return y;\n      } : d3_functor(y1), x, y;\n      function segment() {\n        segments.push(\"M\", interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), \"Z\");\n      }\n      while (++i < n) {\n        if (defined.call(this, d = data[i], i)) {\n          points0.push([ x = +fx0.call(this, d, i), y = +fy0.call(this, d, i) ]);\n          points1.push([ +fx1.call(this, d, i), +fy1.call(this, d, i) ]);\n        } else if (points0.length) {\n          segment();\n          points0 = [];\n          points1 = [];\n        }\n      }\n      if (points0.length) segment();\n      return segments.length ? segments.join(\"\") : null;\n    }\n    area.x = function(_) {\n      if (!arguments.length) return x1;\n      x0 = x1 = _;\n      return area;\n    };\n    area.x0 = function(_) {\n      if (!arguments.length) return x0;\n      x0 = _;\n      return area;\n    };\n    area.x1 = function(_) {\n      if (!arguments.length) return x1;\n      x1 = _;\n      return area;\n    };\n    area.y = function(_) {\n      if (!arguments.length) return y1;\n      y0 = y1 = _;\n      return area;\n    };\n    area.y0 = function(_) {\n      if (!arguments.length) return y0;\n      y0 = _;\n      return area;\n    };\n    area.y1 = function(_) {\n      if (!arguments.length) return y1;\n      y1 = _;\n      return area;\n    };\n    area.defined = function(_) {\n      if (!arguments.length) return defined;\n      defined = _;\n      return area;\n    };\n    area.interpolate = function(_) {\n      if (!arguments.length) return interpolateKey;\n      if (typeof _ === \"function\") interpolateKey = interpolate = _; else interpolateKey = (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key;\n      interpolateReverse = interpolate.reverse || interpolate;\n      L = interpolate.closed ? \"M\" : \"L\";\n      return area;\n    };\n    area.tension = function(_) {\n      if (!arguments.length) return tension;\n      tension = _;\n      return area;\n    };\n    return area;\n  }\n  d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter;\n  d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore;\n  d3.svg.area = function() {\n    return d3_svg_area(d3_identity);\n  };\n  d3.svg.area.radial = function() {\n    var area = d3_svg_area(d3_svg_lineRadial);\n    area.radius = area.x, delete area.x;\n    area.innerRadius = area.x0, delete area.x0;\n    area.outerRadius = area.x1, delete area.x1;\n    area.angle = area.y, delete area.y;\n    area.startAngle = area.y0, delete area.y0;\n    area.endAngle = area.y1, delete area.y1;\n    return area;\n  };\n  d3.svg.chord = function() {\n    var source = d3_source, target = d3_target, radius = d3_svg_chordRadius, startAngle = d3_svg_arcStartAngle, endAngle = d3_svg_arcEndAngle;\n    function chord(d, i) {\n      var s = subgroup(this, source, d, i), t = subgroup(this, target, d, i);\n      return \"M\" + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (equals(s, t) ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + \"Z\";\n    }\n    function subgroup(self, f, d, i) {\n      var subgroup = f.call(self, d, i), r = radius.call(self, subgroup, i), a0 = startAngle.call(self, subgroup, i) - halfπ, a1 = endAngle.call(self, subgroup, i) - halfπ;\n      return {\n        r: r,\n        a0: a0,\n        a1: a1,\n        p0: [ r * Math.cos(a0), r * Math.sin(a0) ],\n        p1: [ r * Math.cos(a1), r * Math.sin(a1) ]\n      };\n    }\n    function equals(a, b) {\n      return a.a0 == b.a0 && a.a1 == b.a1;\n    }\n    function arc(r, p, a) {\n      return \"A\" + r + \",\" + r + \" 0 \" + +(a > π) + \",1 \" + p;\n    }\n    function curve(r0, p0, r1, p1) {\n      return \"Q 0,0 \" + p1;\n    }\n    chord.radius = function(v) {\n      if (!arguments.length) return radius;\n      radius = d3_functor(v);\n      return chord;\n    };\n    chord.source = function(v) {\n      if (!arguments.length) return source;\n      source = d3_functor(v);\n      return chord;\n    };\n    chord.target = function(v) {\n      if (!arguments.length) return target;\n      target = d3_functor(v);\n      return chord;\n    };\n    chord.startAngle = function(v) {\n      if (!arguments.length) return startAngle;\n      startAngle = d3_functor(v);\n      return chord;\n    };\n    chord.endAngle = function(v) {\n      if (!arguments.length) return endAngle;\n      endAngle = d3_functor(v);\n      return chord;\n    };\n    return chord;\n  };\n  function d3_svg_chordRadius(d) {\n    return d.radius;\n  }\n  d3.svg.diagonal = function() {\n    var source = d3_source, target = d3_target, projection = d3_svg_diagonalProjection;\n    function diagonal(d, i) {\n      var p0 = source.call(this, d, i), p3 = target.call(this, d, i), m = (p0.y + p3.y) / 2, p = [ p0, {\n        x: p0.x,\n        y: m\n      }, {\n        x: p3.x,\n        y: m\n      }, p3 ];\n      p = p.map(projection);\n      return \"M\" + p[0] + \"C\" + p[1] + \" \" + p[2] + \" \" + p[3];\n    }\n    diagonal.source = function(x) {\n      if (!arguments.length) return source;\n      source = d3_functor(x);\n      return diagonal;\n    };\n    diagonal.target = function(x) {\n      if (!arguments.length) return target;\n      target = d3_functor(x);\n      return diagonal;\n    };\n    diagonal.projection = function(x) {\n      if (!arguments.length) return projection;\n      projection = x;\n      return diagonal;\n    };\n    return diagonal;\n  };\n  function d3_svg_diagonalProjection(d) {\n    return [ d.x, d.y ];\n  }\n  d3.svg.diagonal.radial = function() {\n    var diagonal = d3.svg.diagonal(), projection = d3_svg_diagonalProjection, projection_ = diagonal.projection;\n    diagonal.projection = function(x) {\n      return arguments.length ? projection_(d3_svg_diagonalRadialProjection(projection = x)) : projection;\n    };\n    return diagonal;\n  };\n  function d3_svg_diagonalRadialProjection(projection) {\n    return function() {\n      var d = projection.apply(this, arguments), r = d[0], a = d[1] - halfπ;\n      return [ r * Math.cos(a), r * Math.sin(a) ];\n    };\n  }\n  d3.svg.symbol = function() {\n    var type = d3_svg_symbolType, size = d3_svg_symbolSize;\n    function symbol(d, i) {\n      return (d3_svg_symbols.get(type.call(this, d, i)) || d3_svg_symbolCircle)(size.call(this, d, i));\n    }\n    symbol.type = function(x) {\n      if (!arguments.length) return type;\n      type = d3_functor(x);\n      return symbol;\n    };\n    symbol.size = function(x) {\n      if (!arguments.length) return size;\n      size = d3_functor(x);\n      return symbol;\n    };\n    return symbol;\n  };\n  function d3_svg_symbolSize() {\n    return 64;\n  }\n  function d3_svg_symbolType() {\n    return \"circle\";\n  }\n  function d3_svg_symbolCircle(size) {\n    var r = Math.sqrt(size / π);\n    return \"M0,\" + r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + -r + \"A\" + r + \",\" + r + \" 0 1,1 0,\" + r + \"Z\";\n  }\n  var d3_svg_symbols = d3.map({\n    circle: d3_svg_symbolCircle,\n    cross: function(size) {\n      var r = Math.sqrt(size / 5) / 2;\n      return \"M\" + -3 * r + \",\" + -r + \"H\" + -r + \"V\" + -3 * r + \"H\" + r + \"V\" + -r + \"H\" + 3 * r + \"V\" + r + \"H\" + r + \"V\" + 3 * r + \"H\" + -r + \"V\" + r + \"H\" + -3 * r + \"Z\";\n    },\n    diamond: function(size) {\n      var ry = Math.sqrt(size / (2 * d3_svg_symbolTan30)), rx = ry * d3_svg_symbolTan30;\n      return \"M0,\" + -ry + \"L\" + rx + \",0\" + \" 0,\" + ry + \" \" + -rx + \",0\" + \"Z\";\n    },\n    square: function(size) {\n      var r = Math.sqrt(size) / 2;\n      return \"M\" + -r + \",\" + -r + \"L\" + r + \",\" + -r + \" \" + r + \",\" + r + \" \" + -r + \",\" + r + \"Z\";\n    },\n    \"triangle-down\": function(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + ry + \"L\" + rx + \",\" + -ry + \" \" + -rx + \",\" + -ry + \"Z\";\n    },\n    \"triangle-up\": function(size) {\n      var rx = Math.sqrt(size / d3_svg_symbolSqrt3), ry = rx * d3_svg_symbolSqrt3 / 2;\n      return \"M0,\" + -ry + \"L\" + rx + \",\" + ry + \" \" + -rx + \",\" + ry + \"Z\";\n    }\n  });\n  d3.svg.symbolTypes = d3_svg_symbols.keys();\n  var d3_svg_symbolSqrt3 = Math.sqrt(3), d3_svg_symbolTan30 = Math.tan(30 * d3_radians);\n  d3_selectionPrototype.transition = function(name) {\n    var id = d3_transitionInheritId || ++d3_transitionId, ns = d3_transitionNamespace(name), subgroups = [], subgroup, node, transition = d3_transitionInherit || {\n      time: Date.now(),\n      ease: d3_ease_cubicInOut,\n      delay: 0,\n      duration: 250\n    };\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) d3_transitionNode(node, i, ns, id, transition);\n        subgroup.push(node);\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_selectionPrototype.interrupt = function(name) {\n    return this.each(name == null ? d3_selection_interrupt : d3_selection_interruptNS(d3_transitionNamespace(name)));\n  };\n  var d3_selection_interrupt = d3_selection_interruptNS(d3_transitionNamespace());\n  function d3_selection_interruptNS(ns) {\n    return function() {\n      var lock, activeId, active;\n      if ((lock = this[ns]) && (active = lock[activeId = lock.active])) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        if (--lock.count) delete lock[activeId]; else delete this[ns];\n        lock.active += .5;\n        active.event && active.event.interrupt.call(this, this.__data__, active.index);\n      }\n    };\n  }\n  function d3_transition(groups, ns, id) {\n    d3_subclass(groups, d3_transitionPrototype);\n    groups.namespace = ns;\n    groups.id = id;\n    return groups;\n  }\n  var d3_transitionPrototype = [], d3_transitionId = 0, d3_transitionInheritId, d3_transitionInherit;\n  d3_transitionPrototype.call = d3_selectionPrototype.call;\n  d3_transitionPrototype.empty = d3_selectionPrototype.empty;\n  d3_transitionPrototype.node = d3_selectionPrototype.node;\n  d3_transitionPrototype.size = d3_selectionPrototype.size;\n  d3.transition = function(selection, name) {\n    return selection && selection.transition ? d3_transitionInheritId ? selection.transition(name) : selection : d3.selection().transition(selection);\n  };\n  d3.transition.prototype = d3_transitionPrototype;\n  d3_transitionPrototype.select = function(selector) {\n    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnode, node;\n    selector = d3_selection_selector(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if ((node = group[i]) && (subnode = selector.call(node, node.__data__, i, j))) {\n          if (\"__data__\" in node) subnode.__data__ = node.__data__;\n          d3_transitionNode(subnode, i, ns, id, node[ns][id]);\n          subgroup.push(subnode);\n        } else {\n          subgroup.push(null);\n        }\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_transitionPrototype.selectAll = function(selector) {\n    var id = this.id, ns = this.namespace, subgroups = [], subgroup, subnodes, node, subnode, transition;\n    selector = d3_selection_selectorAll(selector);\n    for (var j = -1, m = this.length; ++j < m; ) {\n      for (var group = this[j], i = -1, n = group.length; ++i < n; ) {\n        if (node = group[i]) {\n          transition = node[ns][id];\n          subnodes = selector.call(node, node.__data__, i, j);\n          subgroups.push(subgroup = []);\n          for (var k = -1, o = subnodes.length; ++k < o; ) {\n            if (subnode = subnodes[k]) d3_transitionNode(subnode, k, ns, id, transition);\n            subgroup.push(subnode);\n          }\n        }\n      }\n    }\n    return d3_transition(subgroups, ns, id);\n  };\n  d3_transitionPrototype.filter = function(filter) {\n    var subgroups = [], subgroup, group, node;\n    if (typeof filter !== \"function\") filter = d3_selection_filter(filter);\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if ((node = group[i]) && filter.call(node, node.__data__, i, j)) {\n          subgroup.push(node);\n        }\n      }\n    }\n    return d3_transition(subgroups, this.namespace, this.id);\n  };\n  d3_transitionPrototype.tween = function(name, tween) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 2) return this.node()[ns][id].tween.get(name);\n    return d3_selection_each(this, tween == null ? function(node) {\n      node[ns][id].tween.remove(name);\n    } : function(node) {\n      node[ns][id].tween.set(name, tween);\n    });\n  };\n  function d3_transition_tween(groups, name, value, tween) {\n    var id = groups.id, ns = groups.namespace;\n    return d3_selection_each(groups, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].tween.set(name, tween(value.call(node, node.__data__, i, j)));\n    } : (value = tween(value), function(node) {\n      node[ns][id].tween.set(name, value);\n    }));\n  }\n  d3_transitionPrototype.attr = function(nameNS, value) {\n    if (arguments.length < 2) {\n      for (value in nameNS) this.attr(value, nameNS[value]);\n      return this;\n    }\n    var interpolate = nameNS == \"transform\" ? d3_interpolateTransform : d3_interpolate, name = d3.ns.qualify(nameNS);\n    function attrNull() {\n      this.removeAttribute(name);\n    }\n    function attrNullNS() {\n      this.removeAttributeNS(name.space, name.local);\n    }\n    function attrTween(b) {\n      return b == null ? attrNull : (b += \"\", function() {\n        var a = this.getAttribute(name), i;\n        return a !== b && (i = interpolate(a, b), function(t) {\n          this.setAttribute(name, i(t));\n        });\n      });\n    }\n    function attrTweenNS(b) {\n      return b == null ? attrNullNS : (b += \"\", function() {\n        var a = this.getAttributeNS(name.space, name.local), i;\n        return a !== b && (i = interpolate(a, b), function(t) {\n          this.setAttributeNS(name.space, name.local, i(t));\n        });\n      });\n    }\n    return d3_transition_tween(this, \"attr.\" + nameNS, value, name.local ? attrTweenNS : attrTween);\n  };\n  d3_transitionPrototype.attrTween = function(nameNS, tween) {\n    var name = d3.ns.qualify(nameNS);\n    function attrTween(d, i) {\n      var f = tween.call(this, d, i, this.getAttribute(name));\n      return f && function(t) {\n        this.setAttribute(name, f(t));\n      };\n    }\n    function attrTweenNS(d, i) {\n      var f = tween.call(this, d, i, this.getAttributeNS(name.space, name.local));\n      return f && function(t) {\n        this.setAttributeNS(name.space, name.local, f(t));\n      };\n    }\n    return this.tween(\"attr.\" + nameNS, name.local ? attrTweenNS : attrTween);\n  };\n  d3_transitionPrototype.style = function(name, value, priority) {\n    var n = arguments.length;\n    if (n < 3) {\n      if (typeof name !== \"string\") {\n        if (n < 2) value = \"\";\n        for (priority in name) this.style(priority, name[priority], value);\n        return this;\n      }\n      priority = \"\";\n    }\n    function styleNull() {\n      this.style.removeProperty(name);\n    }\n    function styleString(b) {\n      return b == null ? styleNull : (b += \"\", function() {\n        var a = d3_window(this).getComputedStyle(this, null).getPropertyValue(name), i;\n        return a !== b && (i = d3_interpolate(a, b), function(t) {\n          this.style.setProperty(name, i(t), priority);\n        });\n      });\n    }\n    return d3_transition_tween(this, \"style.\" + name, value, styleString);\n  };\n  d3_transitionPrototype.styleTween = function(name, tween, priority) {\n    if (arguments.length < 3) priority = \"\";\n    function styleTween(d, i) {\n      var f = tween.call(this, d, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(name));\n      return f && function(t) {\n        this.style.setProperty(name, f(t), priority);\n      };\n    }\n    return this.tween(\"style.\" + name, styleTween);\n  };\n  d3_transitionPrototype.text = function(value) {\n    return d3_transition_tween(this, \"text\", value, d3_transition_text);\n  };\n  function d3_transition_text(b) {\n    if (b == null) b = \"\";\n    return function() {\n      this.textContent = b;\n    };\n  }\n  d3_transitionPrototype.remove = function() {\n    var ns = this.namespace;\n    return this.each(\"end.transition\", function() {\n      var p;\n      if (this[ns].count < 2 && (p = this.parentNode)) p.removeChild(this);\n    });\n  };\n  d3_transitionPrototype.ease = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].ease;\n    if (typeof value !== \"function\") value = d3.ease.apply(d3, arguments);\n    return d3_selection_each(this, function(node) {\n      node[ns][id].ease = value;\n    });\n  };\n  d3_transitionPrototype.delay = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].delay;\n    return d3_selection_each(this, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].delay = +value.call(node, node.__data__, i, j);\n    } : (value = +value, function(node) {\n      node[ns][id].delay = value;\n    }));\n  };\n  d3_transitionPrototype.duration = function(value) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 1) return this.node()[ns][id].duration;\n    return d3_selection_each(this, typeof value === \"function\" ? function(node, i, j) {\n      node[ns][id].duration = Math.max(1, value.call(node, node.__data__, i, j));\n    } : (value = Math.max(1, value), function(node) {\n      node[ns][id].duration = value;\n    }));\n  };\n  d3_transitionPrototype.each = function(type, listener) {\n    var id = this.id, ns = this.namespace;\n    if (arguments.length < 2) {\n      var inherit = d3_transitionInherit, inheritId = d3_transitionInheritId;\n      try {\n        d3_transitionInheritId = id;\n        d3_selection_each(this, function(node, i, j) {\n          d3_transitionInherit = node[ns][id];\n          type.call(node, node.__data__, i, j);\n        });\n      } finally {\n        d3_transitionInherit = inherit;\n        d3_transitionInheritId = inheritId;\n      }\n    } else {\n      d3_selection_each(this, function(node) {\n        var transition = node[ns][id];\n        (transition.event || (transition.event = d3.dispatch(\"start\", \"end\", \"interrupt\"))).on(type, listener);\n      });\n    }\n    return this;\n  };\n  d3_transitionPrototype.transition = function() {\n    var id0 = this.id, id1 = ++d3_transitionId, ns = this.namespace, subgroups = [], subgroup, group, node, transition;\n    for (var j = 0, m = this.length; j < m; j++) {\n      subgroups.push(subgroup = []);\n      for (var group = this[j], i = 0, n = group.length; i < n; i++) {\n        if (node = group[i]) {\n          transition = node[ns][id0];\n          d3_transitionNode(node, i, ns, id1, {\n            time: transition.time,\n            ease: transition.ease,\n            delay: transition.delay + transition.duration,\n            duration: transition.duration\n          });\n        }\n        subgroup.push(node);\n      }\n    }\n    return d3_transition(subgroups, ns, id1);\n  };\n  function d3_transitionNamespace(name) {\n    return name == null ? \"__transition__\" : \"__transition_\" + name + \"__\";\n  }\n  function d3_transitionNode(node, i, ns, id, inherit) {\n    var lock = node[ns] || (node[ns] = {\n      active: 0,\n      count: 0\n    }), transition = lock[id], time, timer, duration, ease, tweens;\n    function schedule(elapsed) {\n      var delay = transition.delay;\n      timer.t = delay + time;\n      if (delay <= elapsed) return start(elapsed - delay);\n      timer.c = start;\n    }\n    function start(elapsed) {\n      var activeId = lock.active, active = lock[activeId];\n      if (active) {\n        active.timer.c = null;\n        active.timer.t = NaN;\n        --lock.count;\n        delete lock[activeId];\n        active.event && active.event.interrupt.call(node, node.__data__, active.index);\n      }\n      for (var cancelId in lock) {\n        if (+cancelId < id) {\n          var cancel = lock[cancelId];\n          cancel.timer.c = null;\n          cancel.timer.t = NaN;\n          --lock.count;\n          delete lock[cancelId];\n        }\n      }\n      lock.active = id;\n      transition.event && transition.event.start.call(node, node.__data__, i);\n      tweens = [];\n      transition.tween.forEach(function(key, value) {\n        if (value = value.call(node, node.__data__, i)) {\n          tweens.push(value);\n        }\n      });\n      ease = transition.ease;\n      duration = transition.duration;\n      timer.c = tick;\n      d3_timer(function() {\n        if (timer.c && tick(elapsed || 1)) {\n          timer.c = null;\n          timer.t = NaN;\n        }\n        return 1;\n      }, 0, time);\n    }\n    function tick(elapsed) {\n      var t = elapsed / duration, e = ease(t), n = tweens.length;\n      while (n > 0) {\n        tweens[--n].call(node, e);\n      }\n      if (t >= 1) {\n        transition.event && transition.event.end.call(node, node.__data__, i);\n        if (--lock.count) delete lock[id]; else delete node[ns];\n        return 1;\n      }\n    }\n    if (!transition) {\n      time = inherit.time;\n      timer = d3_timer(schedule, 0, time);\n      transition = lock[id] = {\n        tween: new d3_Map(),\n        time: time,\n        timer: timer,\n        delay: inherit.delay,\n        duration: inherit.duration,\n        ease: inherit.ease,\n        index: i\n      };\n      inherit = null;\n      ++lock.count;\n    }\n  }\n  d3.svg.axis = function() {\n    var scale = d3.scale.linear(), orient = d3_svg_axisDefaultOrient, innerTickSize = 6, outerTickSize = 6, tickPadding = 3, tickArguments_ = [ 10 ], tickValues = null, tickFormat_;\n    function axis(g) {\n      g.each(function() {\n        var g = d3.select(this);\n        var scale0 = this.__chart__ || scale, scale1 = this.__chart__ = scale.copy();\n        var ticks = tickValues == null ? scale1.ticks ? scale1.ticks.apply(scale1, tickArguments_) : scale1.domain() : tickValues, tickFormat = tickFormat_ == null ? scale1.tickFormat ? scale1.tickFormat.apply(scale1, tickArguments_) : d3_identity : tickFormat_, tick = g.selectAll(\".tick\").data(ticks, scale1), tickEnter = tick.enter().insert(\"g\", \".domain\").attr(\"class\", \"tick\").style(\"opacity\", ε), tickExit = d3.transition(tick.exit()).style(\"opacity\", ε).remove(), tickUpdate = d3.transition(tick.order()).style(\"opacity\", 1), tickSpacing = Math.max(innerTickSize, 0) + tickPadding, tickTransform;\n        var range = d3_scaleRange(scale1), path = g.selectAll(\".domain\").data([ 0 ]), pathUpdate = (path.enter().append(\"path\").attr(\"class\", \"domain\"), \n        d3.transition(path));\n        tickEnter.append(\"line\");\n        tickEnter.append(\"text\");\n        var lineEnter = tickEnter.select(\"line\"), lineUpdate = tickUpdate.select(\"line\"), text = tick.select(\"text\").text(tickFormat), textEnter = tickEnter.select(\"text\"), textUpdate = tickUpdate.select(\"text\"), sign = orient === \"top\" || orient === \"left\" ? -1 : 1, x1, x2, y1, y2;\n        if (orient === \"bottom\" || orient === \"top\") {\n          tickTransform = d3_svg_axisX, x1 = \"x\", y1 = \"y\", x2 = \"x2\", y2 = \"y2\";\n          text.attr(\"dy\", sign < 0 ? \"0em\" : \".71em\").style(\"text-anchor\", \"middle\");\n          pathUpdate.attr(\"d\", \"M\" + range[0] + \",\" + sign * outerTickSize + \"V0H\" + range[1] + \"V\" + sign * outerTickSize);\n        } else {\n          tickTransform = d3_svg_axisY, x1 = \"y\", y1 = \"x\", x2 = \"y2\", y2 = \"x2\";\n          text.attr(\"dy\", \".32em\").style(\"text-anchor\", sign < 0 ? \"end\" : \"start\");\n          pathUpdate.attr(\"d\", \"M\" + sign * outerTickSize + \",\" + range[0] + \"H0V\" + range[1] + \"H\" + sign * outerTickSize);\n        }\n        lineEnter.attr(y2, sign * innerTickSize);\n        textEnter.attr(y1, sign * tickSpacing);\n        lineUpdate.attr(x2, 0).attr(y2, sign * innerTickSize);\n        textUpdate.attr(x1, 0).attr(y1, sign * tickSpacing);\n        if (scale1.rangeBand) {\n          var x = scale1, dx = x.rangeBand() / 2;\n          scale0 = scale1 = function(d) {\n            return x(d) + dx;\n          };\n        } else if (scale0.rangeBand) {\n          scale0 = scale1;\n        } else {\n          tickExit.call(tickTransform, scale1, scale0);\n        }\n        tickEnter.call(tickTransform, scale0, scale1);\n        tickUpdate.call(tickTransform, scale1, scale1);\n      });\n    }\n    axis.scale = function(x) {\n      if (!arguments.length) return scale;\n      scale = x;\n      return axis;\n    };\n    axis.orient = function(x) {\n      if (!arguments.length) return orient;\n      orient = x in d3_svg_axisOrients ? x + \"\" : d3_svg_axisDefaultOrient;\n      return axis;\n    };\n    axis.ticks = function() {\n      if (!arguments.length) return tickArguments_;\n      tickArguments_ = d3_array(arguments);\n      return axis;\n    };\n    axis.tickValues = function(x) {\n      if (!arguments.length) return tickValues;\n      tickValues = x;\n      return axis;\n    };\n    axis.tickFormat = function(x) {\n      if (!arguments.length) return tickFormat_;\n      tickFormat_ = x;\n      return axis;\n    };\n    axis.tickSize = function(x) {\n      var n = arguments.length;\n      if (!n) return innerTickSize;\n      innerTickSize = +x;\n      outerTickSize = +arguments[n - 1];\n      return axis;\n    };\n    axis.innerTickSize = function(x) {\n      if (!arguments.length) return innerTickSize;\n      innerTickSize = +x;\n      return axis;\n    };\n    axis.outerTickSize = function(x) {\n      if (!arguments.length) return outerTickSize;\n      outerTickSize = +x;\n      return axis;\n    };\n    axis.tickPadding = function(x) {\n      if (!arguments.length) return tickPadding;\n      tickPadding = +x;\n      return axis;\n    };\n    axis.tickSubdivide = function() {\n      return arguments.length && axis;\n    };\n    return axis;\n  };\n  var d3_svg_axisDefaultOrient = \"bottom\", d3_svg_axisOrients = {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  };\n  function d3_svg_axisX(selection, x0, x1) {\n    selection.attr(\"transform\", function(d) {\n      var v0 = x0(d);\n      return \"translate(\" + (isFinite(v0) ? v0 : x1(d)) + \",0)\";\n    });\n  }\n  function d3_svg_axisY(selection, y0, y1) {\n    selection.attr(\"transform\", function(d) {\n      var v0 = y0(d);\n      return \"translate(0,\" + (isFinite(v0) ? v0 : y1(d)) + \")\";\n    });\n  }\n  d3.svg.brush = function() {\n    var event = d3_eventDispatch(brush, \"brushstart\", \"brush\", \"brushend\"), x = null, y = null, xExtent = [ 0, 0 ], yExtent = [ 0, 0 ], xExtentDomain, yExtentDomain, xClamp = true, yClamp = true, resizes = d3_svg_brushResizes[0];\n    function brush(g) {\n      g.each(function() {\n        var g = d3.select(this).style(\"pointer-events\", \"all\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\").on(\"mousedown.brush\", brushstart).on(\"touchstart.brush\", brushstart);\n        var background = g.selectAll(\".background\").data([ 0 ]);\n        background.enter().append(\"rect\").attr(\"class\", \"background\").style(\"visibility\", \"hidden\").style(\"cursor\", \"crosshair\");\n        g.selectAll(\".extent\").data([ 0 ]).enter().append(\"rect\").attr(\"class\", \"extent\").style(\"cursor\", \"move\");\n        var resize = g.selectAll(\".resize\").data(resizes, d3_identity);\n        resize.exit().remove();\n        resize.enter().append(\"g\").attr(\"class\", function(d) {\n          return \"resize \" + d;\n        }).style(\"cursor\", function(d) {\n          return d3_svg_brushCursor[d];\n        }).append(\"rect\").attr(\"x\", function(d) {\n          return /[ew]$/.test(d) ? -3 : null;\n        }).attr(\"y\", function(d) {\n          return /^[ns]/.test(d) ? -3 : null;\n        }).attr(\"width\", 6).attr(\"height\", 6).style(\"visibility\", \"hidden\");\n        resize.style(\"display\", brush.empty() ? \"none\" : null);\n        var gUpdate = d3.transition(g), backgroundUpdate = d3.transition(background), range;\n        if (x) {\n          range = d3_scaleRange(x);\n          backgroundUpdate.attr(\"x\", range[0]).attr(\"width\", range[1] - range[0]);\n          redrawX(gUpdate);\n        }\n        if (y) {\n          range = d3_scaleRange(y);\n          backgroundUpdate.attr(\"y\", range[0]).attr(\"height\", range[1] - range[0]);\n          redrawY(gUpdate);\n        }\n        redraw(gUpdate);\n      });\n    }\n    brush.event = function(g) {\n      g.each(function() {\n        var event_ = event.of(this, arguments), extent1 = {\n          x: xExtent,\n          y: yExtent,\n          i: xExtentDomain,\n          j: yExtentDomain\n        }, extent0 = this.__chart__ || extent1;\n        this.__chart__ = extent1;\n        if (d3_transitionInheritId) {\n          d3.select(this).transition().each(\"start.brush\", function() {\n            xExtentDomain = extent0.i;\n            yExtentDomain = extent0.j;\n            xExtent = extent0.x;\n            yExtent = extent0.y;\n            event_({\n              type: \"brushstart\"\n            });\n          }).tween(\"brush:brush\", function() {\n            var xi = d3_interpolateArray(xExtent, extent1.x), yi = d3_interpolateArray(yExtent, extent1.y);\n            xExtentDomain = yExtentDomain = null;\n            return function(t) {\n              xExtent = extent1.x = xi(t);\n              yExtent = extent1.y = yi(t);\n              event_({\n                type: \"brush\",\n                mode: \"resize\"\n              });\n            };\n          }).each(\"end.brush\", function() {\n            xExtentDomain = extent1.i;\n            yExtentDomain = extent1.j;\n            event_({\n              type: \"brush\",\n              mode: \"resize\"\n            });\n            event_({\n              type: \"brushend\"\n            });\n          });\n        } else {\n          event_({\n            type: \"brushstart\"\n          });\n          event_({\n            type: \"brush\",\n            mode: \"resize\"\n          });\n          event_({\n            type: \"brushend\"\n          });\n        }\n      });\n    };\n    function redraw(g) {\n      g.selectAll(\".resize\").attr(\"transform\", function(d) {\n        return \"translate(\" + xExtent[+/e$/.test(d)] + \",\" + yExtent[+/^s/.test(d)] + \")\";\n      });\n    }\n    function redrawX(g) {\n      g.select(\".extent\").attr(\"x\", xExtent[0]);\n      g.selectAll(\".extent,.n>rect,.s>rect\").attr(\"width\", xExtent[1] - xExtent[0]);\n    }\n    function redrawY(g) {\n      g.select(\".extent\").attr(\"y\", yExtent[0]);\n      g.selectAll(\".extent,.e>rect,.w>rect\").attr(\"height\", yExtent[1] - yExtent[0]);\n    }\n    function brushstart() {\n      var target = this, eventTarget = d3.select(d3.event.target), event_ = event.of(target, arguments), g = d3.select(target), resizing = eventTarget.datum(), resizingX = !/^(n|s)$/.test(resizing) && x, resizingY = !/^(e|w)$/.test(resizing) && y, dragging = eventTarget.classed(\"extent\"), dragRestore = d3_event_dragSuppress(target), center, origin = d3.mouse(target), offset;\n      var w = d3.select(d3_window(target)).on(\"keydown.brush\", keydown).on(\"keyup.brush\", keyup);\n      if (d3.event.changedTouches) {\n        w.on(\"touchmove.brush\", brushmove).on(\"touchend.brush\", brushend);\n      } else {\n        w.on(\"mousemove.brush\", brushmove).on(\"mouseup.brush\", brushend);\n      }\n      g.interrupt().selectAll(\"*\").interrupt();\n      if (dragging) {\n        origin[0] = xExtent[0] - origin[0];\n        origin[1] = yExtent[0] - origin[1];\n      } else if (resizing) {\n        var ex = +/w$/.test(resizing), ey = +/^n/.test(resizing);\n        offset = [ xExtent[1 - ex] - origin[0], yExtent[1 - ey] - origin[1] ];\n        origin[0] = xExtent[ex];\n        origin[1] = yExtent[ey];\n      } else if (d3.event.altKey) center = origin.slice();\n      g.style(\"pointer-events\", \"none\").selectAll(\".resize\").style(\"display\", null);\n      d3.select(\"body\").style(\"cursor\", eventTarget.style(\"cursor\"));\n      event_({\n        type: \"brushstart\"\n      });\n      brushmove();\n      function keydown() {\n        if (d3.event.keyCode == 32) {\n          if (!dragging) {\n            center = null;\n            origin[0] -= xExtent[1];\n            origin[1] -= yExtent[1];\n            dragging = 2;\n          }\n          d3_eventPreventDefault();\n        }\n      }\n      function keyup() {\n        if (d3.event.keyCode == 32 && dragging == 2) {\n          origin[0] += xExtent[1];\n          origin[1] += yExtent[1];\n          dragging = 0;\n          d3_eventPreventDefault();\n        }\n      }\n      function brushmove() {\n        var point = d3.mouse(target), moved = false;\n        if (offset) {\n          point[0] += offset[0];\n          point[1] += offset[1];\n        }\n        if (!dragging) {\n          if (d3.event.altKey) {\n            if (!center) center = [ (xExtent[0] + xExtent[1]) / 2, (yExtent[0] + yExtent[1]) / 2 ];\n            origin[0] = xExtent[+(point[0] < center[0])];\n            origin[1] = yExtent[+(point[1] < center[1])];\n          } else center = null;\n        }\n        if (resizingX && move1(point, x, 0)) {\n          redrawX(g);\n          moved = true;\n        }\n        if (resizingY && move1(point, y, 1)) {\n          redrawY(g);\n          moved = true;\n        }\n        if (moved) {\n          redraw(g);\n          event_({\n            type: \"brush\",\n            mode: dragging ? \"move\" : \"resize\"\n          });\n        }\n      }\n      function move1(point, scale, i) {\n        var range = d3_scaleRange(scale), r0 = range[0], r1 = range[1], position = origin[i], extent = i ? yExtent : xExtent, size = extent[1] - extent[0], min, max;\n        if (dragging) {\n          r0 -= position;\n          r1 -= size + position;\n        }\n        min = (i ? yClamp : xClamp) ? Math.max(r0, Math.min(r1, point[i])) : point[i];\n        if (dragging) {\n          max = (min += position) + size;\n        } else {\n          if (center) position = Math.max(r0, Math.min(r1, 2 * center[i] - min));\n          if (position < min) {\n            max = min;\n            min = position;\n          } else {\n            max = position;\n          }\n        }\n        if (extent[0] != min || extent[1] != max) {\n          if (i) yExtentDomain = null; else xExtentDomain = null;\n          extent[0] = min;\n          extent[1] = max;\n          return true;\n        }\n      }\n      function brushend() {\n        brushmove();\n        g.style(\"pointer-events\", \"all\").selectAll(\".resize\").style(\"display\", brush.empty() ? \"none\" : null);\n        d3.select(\"body\").style(\"cursor\", null);\n        w.on(\"mousemove.brush\", null).on(\"mouseup.brush\", null).on(\"touchmove.brush\", null).on(\"touchend.brush\", null).on(\"keydown.brush\", null).on(\"keyup.brush\", null);\n        dragRestore();\n        event_({\n          type: \"brushend\"\n        });\n      }\n    }\n    brush.x = function(z) {\n      if (!arguments.length) return x;\n      x = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n    brush.y = function(z) {\n      if (!arguments.length) return y;\n      y = z;\n      resizes = d3_svg_brushResizes[!x << 1 | !y];\n      return brush;\n    };\n    brush.clamp = function(z) {\n      if (!arguments.length) return x && y ? [ xClamp, yClamp ] : x ? xClamp : y ? yClamp : null;\n      if (x && y) xClamp = !!z[0], yClamp = !!z[1]; else if (x) xClamp = !!z; else if (y) yClamp = !!z;\n      return brush;\n    };\n    brush.extent = function(z) {\n      var x0, x1, y0, y1, t;\n      if (!arguments.length) {\n        if (x) {\n          if (xExtentDomain) {\n            x0 = xExtentDomain[0], x1 = xExtentDomain[1];\n          } else {\n            x0 = xExtent[0], x1 = xExtent[1];\n            if (x.invert) x0 = x.invert(x0), x1 = x.invert(x1);\n            if (x1 < x0) t = x0, x0 = x1, x1 = t;\n          }\n        }\n        if (y) {\n          if (yExtentDomain) {\n            y0 = yExtentDomain[0], y1 = yExtentDomain[1];\n          } else {\n            y0 = yExtent[0], y1 = yExtent[1];\n            if (y.invert) y0 = y.invert(y0), y1 = y.invert(y1);\n            if (y1 < y0) t = y0, y0 = y1, y1 = t;\n          }\n        }\n        return x && y ? [ [ x0, y0 ], [ x1, y1 ] ] : x ? [ x0, x1 ] : y && [ y0, y1 ];\n      }\n      if (x) {\n        x0 = z[0], x1 = z[1];\n        if (y) x0 = x0[0], x1 = x1[0];\n        xExtentDomain = [ x0, x1 ];\n        if (x.invert) x0 = x(x0), x1 = x(x1);\n        if (x1 < x0) t = x0, x0 = x1, x1 = t;\n        if (x0 != xExtent[0] || x1 != xExtent[1]) xExtent = [ x0, x1 ];\n      }\n      if (y) {\n        y0 = z[0], y1 = z[1];\n        if (x) y0 = y0[1], y1 = y1[1];\n        yExtentDomain = [ y0, y1 ];\n        if (y.invert) y0 = y(y0), y1 = y(y1);\n        if (y1 < y0) t = y0, y0 = y1, y1 = t;\n        if (y0 != yExtent[0] || y1 != yExtent[1]) yExtent = [ y0, y1 ];\n      }\n      return brush;\n    };\n    brush.clear = function() {\n      if (!brush.empty()) {\n        xExtent = [ 0, 0 ], yExtent = [ 0, 0 ];\n        xExtentDomain = yExtentDomain = null;\n      }\n      return brush;\n    };\n    brush.empty = function() {\n      return !!x && xExtent[0] == xExtent[1] || !!y && yExtent[0] == yExtent[1];\n    };\n    return d3.rebind(brush, event, \"on\");\n  };\n  var d3_svg_brushCursor = {\n    n: \"ns-resize\",\n    e: \"ew-resize\",\n    s: \"ns-resize\",\n    w: \"ew-resize\",\n    nw: \"nwse-resize\",\n    ne: \"nesw-resize\",\n    se: \"nwse-resize\",\n    sw: \"nesw-resize\"\n  };\n  var d3_svg_brushResizes = [ [ \"n\", \"e\", \"s\", \"w\", \"nw\", \"ne\", \"se\", \"sw\" ], [ \"e\", \"w\" ], [ \"n\", \"s\" ], [] ];\n  var d3_time_format = d3_time.format = d3_locale_enUS.timeFormat;\n  var d3_time_formatUtc = d3_time_format.utc;\n  var d3_time_formatIso = d3_time_formatUtc(\"%Y-%m-%dT%H:%M:%S.%LZ\");\n  d3_time_format.iso = Date.prototype.toISOString && +new Date(\"2000-01-01T00:00:00.000Z\") ? d3_time_formatIsoNative : d3_time_formatIso;\n  function d3_time_formatIsoNative(date) {\n    return date.toISOString();\n  }\n  d3_time_formatIsoNative.parse = function(string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  };\n  d3_time_formatIsoNative.toString = d3_time_formatIso.toString;\n  d3_time.second = d3_time_interval(function(date) {\n    return new d3_date(Math.floor(date / 1e3) * 1e3);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 1e3);\n  }, function(date) {\n    return date.getSeconds();\n  });\n  d3_time.seconds = d3_time.second.range;\n  d3_time.seconds.utc = d3_time.second.utc.range;\n  d3_time.minute = d3_time_interval(function(date) {\n    return new d3_date(Math.floor(date / 6e4) * 6e4);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 6e4);\n  }, function(date) {\n    return date.getMinutes();\n  });\n  d3_time.minutes = d3_time.minute.range;\n  d3_time.minutes.utc = d3_time.minute.utc.range;\n  d3_time.hour = d3_time_interval(function(date) {\n    var timezone = date.getTimezoneOffset() / 60;\n    return new d3_date((Math.floor(date / 36e5 - timezone) + timezone) * 36e5);\n  }, function(date, offset) {\n    date.setTime(date.getTime() + Math.floor(offset) * 36e5);\n  }, function(date) {\n    return date.getHours();\n  });\n  d3_time.hours = d3_time.hour.range;\n  d3_time.hours.utc = d3_time.hour.utc.range;\n  d3_time.month = d3_time_interval(function(date) {\n    date = d3_time.day(date);\n    date.setDate(1);\n    return date;\n  }, function(date, offset) {\n    date.setMonth(date.getMonth() + offset);\n  }, function(date) {\n    return date.getMonth();\n  });\n  d3_time.months = d3_time.month.range;\n  d3_time.months.utc = d3_time.month.utc.range;\n  function d3_time_scale(linear, methods, format) {\n    function scale(x) {\n      return linear(x);\n    }\n    scale.invert = function(x) {\n      return d3_time_scaleDate(linear.invert(x));\n    };\n    scale.domain = function(x) {\n      if (!arguments.length) return linear.domain().map(d3_time_scaleDate);\n      linear.domain(x);\n      return scale;\n    };\n    function tickMethod(extent, count) {\n      var span = extent[1] - extent[0], target = span / count, i = d3.bisect(d3_time_scaleSteps, target);\n      return i == d3_time_scaleSteps.length ? [ methods.year, d3_scale_linearTickRange(extent.map(function(d) {\n        return d / 31536e6;\n      }), count)[2] ] : !i ? [ d3_time_scaleMilliseconds, d3_scale_linearTickRange(extent, count)[2] ] : methods[target / d3_time_scaleSteps[i - 1] < d3_time_scaleSteps[i] / target ? i - 1 : i];\n    }\n    scale.nice = function(interval, skip) {\n      var domain = scale.domain(), extent = d3_scaleExtent(domain), method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" && tickMethod(extent, interval);\n      if (method) interval = method[0], skip = method[1];\n      function skipped(date) {\n        return !isNaN(date) && !interval.range(date, d3_time_scaleDate(+date + 1), skip).length;\n      }\n      return scale.domain(d3_scale_nice(domain, skip > 1 ? {\n        floor: function(date) {\n          while (skipped(date = interval.floor(date))) date = d3_time_scaleDate(date - 1);\n          return date;\n        },\n        ceil: function(date) {\n          while (skipped(date = interval.ceil(date))) date = d3_time_scaleDate(+date + 1);\n          return date;\n        }\n      } : interval));\n    };\n    scale.ticks = function(interval, skip) {\n      var extent = d3_scaleExtent(scale.domain()), method = interval == null ? tickMethod(extent, 10) : typeof interval === \"number\" ? tickMethod(extent, interval) : !interval.range && [ {\n        range: interval\n      }, skip ];\n      if (method) interval = method[0], skip = method[1];\n      return interval.range(extent[0], d3_time_scaleDate(+extent[1] + 1), skip < 1 ? 1 : skip);\n    };\n    scale.tickFormat = function() {\n      return format;\n    };\n    scale.copy = function() {\n      return d3_time_scale(linear.copy(), methods, format);\n    };\n    return d3_scale_linearRebind(scale, linear);\n  }\n  function d3_time_scaleDate(t) {\n    return new Date(t);\n  }\n  var d3_time_scaleSteps = [ 1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6 ];\n  var d3_time_scaleLocalMethods = [ [ d3_time.second, 1 ], [ d3_time.second, 5 ], [ d3_time.second, 15 ], [ d3_time.second, 30 ], [ d3_time.minute, 1 ], [ d3_time.minute, 5 ], [ d3_time.minute, 15 ], [ d3_time.minute, 30 ], [ d3_time.hour, 1 ], [ d3_time.hour, 3 ], [ d3_time.hour, 6 ], [ d3_time.hour, 12 ], [ d3_time.day, 1 ], [ d3_time.day, 2 ], [ d3_time.week, 1 ], [ d3_time.month, 1 ], [ d3_time.month, 3 ], [ d3_time.year, 1 ] ];\n  var d3_time_scaleLocalFormat = d3_time_format.multi([ [ \".%L\", function(d) {\n    return d.getMilliseconds();\n  } ], [ \":%S\", function(d) {\n    return d.getSeconds();\n  } ], [ \"%I:%M\", function(d) {\n    return d.getMinutes();\n  } ], [ \"%I %p\", function(d) {\n    return d.getHours();\n  } ], [ \"%a %d\", function(d) {\n    return d.getDay() && d.getDate() != 1;\n  } ], [ \"%b %d\", function(d) {\n    return d.getDate() != 1;\n  } ], [ \"%B\", function(d) {\n    return d.getMonth();\n  } ], [ \"%Y\", d3_true ] ]);\n  var d3_time_scaleMilliseconds = {\n    range: function(start, stop, step) {\n      return d3.range(Math.ceil(start / step) * step, +stop, step).map(d3_time_scaleDate);\n    },\n    floor: d3_identity,\n    ceil: d3_identity\n  };\n  d3_time_scaleLocalMethods.year = d3_time.year;\n  d3_time.scale = function() {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat);\n  };\n  var d3_time_scaleUtcMethods = d3_time_scaleLocalMethods.map(function(m) {\n    return [ m[0].utc, m[1] ];\n  });\n  var d3_time_scaleUtcFormat = d3_time_formatUtc.multi([ [ \".%L\", function(d) {\n    return d.getUTCMilliseconds();\n  } ], [ \":%S\", function(d) {\n    return d.getUTCSeconds();\n  } ], [ \"%I:%M\", function(d) {\n    return d.getUTCMinutes();\n  } ], [ \"%I %p\", function(d) {\n    return d.getUTCHours();\n  } ], [ \"%a %d\", function(d) {\n    return d.getUTCDay() && d.getUTCDate() != 1;\n  } ], [ \"%b %d\", function(d) {\n    return d.getUTCDate() != 1;\n  } ], [ \"%B\", function(d) {\n    return d.getUTCMonth();\n  } ], [ \"%Y\", d3_true ] ]);\n  d3_time_scaleUtcMethods.year = d3_time.year.utc;\n  d3_time.scale.utc = function() {\n    return d3_time_scale(d3.scale.linear(), d3_time_scaleUtcMethods, d3_time_scaleUtcFormat);\n  };\n  d3.text = d3_xhrType(function(request) {\n    return request.responseText;\n  });\n  d3.json = function(url, callback) {\n    return d3_xhr(url, \"application/json\", d3_json, callback);\n  };\n  function d3_json(request) {\n    return JSON.parse(request.responseText);\n  }\n  d3.html = function(url, callback) {\n    return d3_xhr(url, \"text/html\", d3_html, callback);\n  };\n  function d3_html(request) {\n    var range = d3_document.createRange();\n    range.selectNode(d3_document.body);\n    return range.createContextualFragment(request.responseText);\n  }\n  d3.xml = d3_xhrType(function(request) {\n    return request.responseXML;\n  });\n  if (typeof define === \"function\" && define.amd) define(this.d3 = d3); else if (typeof module === \"object\" && module.exports) module.exports = d3; else this.d3 = d3;\n}();",
    "/*!\n * jQuery JavaScript Library v2.1.4\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2015-04-28T16:01Z\n */\n\n(function( global, factory ) {\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Support: Firefox 18+\n// Can't be in strict mode, several libs including ASP.NET trace\n// the stack via arguments.caller.callee and Firefox dies if\n// you try to trace through \"use strict\" call chains. (#13335)\n//\n\nvar arr = [];\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar support = {};\n\n\n\nvar\n\t// Use the correct document accordingly with window argument (sandbox)\n\tdocument = window.document,\n\n\tversion = \"2.1.4\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android<4.1\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([\\da-z])/gi,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// Start with an empty selector\n\tselector: \"\",\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num != null ?\n\n\t\t\t// Return just the one element from the set\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\n\n\t\t\t// Return all the elements in a clean array\n\t\t\tslice.call( this );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\t\tret.context = this.context;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\t// (You can seed the arguments with an array of args, but this is\n\t// only used internally.)\n\teach: function( callback, args ) {\n\t\treturn jQuery.each( this, callback, args );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map(this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t}));\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor(null);\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend({\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type(obj) === \"function\";\n\t},\n\n\tisArray: Array.isArray,\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\t\t// parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t// adding 1 corrects loss of precision from parseFloat (#15100)\n\t\treturn !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\t// Not plain objects:\n\t\t// - Any object or value whose internal [[Class]] property is not \"[object Object]\"\n\t\t// - DOM nodes\n\t\t// - window\n\t\tif ( jQuery.type( obj ) !== \"object\" || obj.nodeType || jQuery.isWindow( obj ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( obj.constructor &&\n\t\t\t\t!hasOwn.call( obj.constructor.prototype, \"isPrototypeOf\" ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the function hasn't returned already, we're confident that\n\t\t// |obj| is a plain object, created by {} or constructed with new Object\n\t\treturn true;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\t\t// Support: Android<4.0, iOS<6 (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call(obj) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tvar script,\n\t\t\tindirect = eval;\n\n\t\tcode = jQuery.trim( code );\n\n\t\tif ( code ) {\n\t\t\t// If the code includes a valid, prologue position\n\t\t\t// strict mode pragma, execute code by injecting a\n\t\t\t// script tag into the document.\n\t\t\tif ( code.indexOf(\"use strict\") === 1 ) {\n\t\t\t\tscript = document.createElement(\"script\");\n\t\t\t\tscript.text = code;\n\t\t\t\tdocument.head.appendChild( script ).parentNode.removeChild( script );\n\t\t\t} else {\n\t\t\t// Otherwise, avoid the DOM node creation, insertion\n\t\t\t// and removal by using an indirect global eval\n\t\t\t\tindirect( code );\n\t\t\t}\n\t\t}\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE9-11+\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\t// args is for internal usage only\n\teach: function( obj, callback, args ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = obj.length,\n\t\t\tisArray = isArraylike( obj );\n\n\t\tif ( args ) {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.apply( obj[ i ], args );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t\t} else {\n\t\t\tif ( isArray ) {\n\t\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( i in obj ) {\n\t\t\t\t\tvalue = callback.call( obj[ i ], i, obj[ i ] );\n\n\t\t\t\t\tif ( value === false ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android<4.1\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArraylike( Object(arr) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar value,\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tisArray = isArraylike( elems ),\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArray ) {\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n});\n\n// Populate the class2type map\njQuery.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(i, name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\nfunction isArraylike( obj ) {\n\n\t// Support: iOS 8.2 (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\tif ( obj.nodeType === 1 && length ) {\n\t\treturn true;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.2.0-pre\n * http://sizzlejs.com/\n *\n * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-12-16\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// General-purpose constants\n\tMAX_NEGATIVE = 1 << 31,\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// http://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\t// http://www.w3.org/TR/css3-syntax/#characters\n\tcharacterEncoding = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\n\n\t// Loosely modeled on CSS identifier characters\n\t// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\t// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = characterEncoding.replace( \"w\", \"w#\" ),\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + characterEncoding + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + characterEncoding + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + characterEncoding + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + characterEncoding + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + characterEncoding.replace( \"w\", \"w*\" ) + \")\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\trescape = /'|\\\\/g,\n\n\t// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t};\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar match, elem, m, nodeType,\n\t\t// QSA vars\n\t\ti, groups, old, nid, newContext, newSelector;\n\n\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\n\tcontext = context || document;\n\tresults = results || [];\n\tnodeType = context.nodeType;\n\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\tif ( !seed && documentIsHTML ) {\n\n\t\t// Try to shortcut find operations when possible (e.g., not under DocumentFragment)\n\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\t\t\t// Speed-up: Sizzle(\"#ID\")\n\t\t\tif ( (m = match[1]) ) {\n\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\telem = context.getElementById( m );\n\t\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t\t// nodes that are no longer in the document (jQuery #6963)\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Handle the case where IE, Opera, and Webkit return items\n\t\t\t\t\t\t// by name instead of ID\n\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Context is not a document\n\t\t\t\t\tif ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&\n\t\t\t\t\t\tcontains( context, elem ) && elem.id === m ) {\n\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Speed-up: Sizzle(\"TAG\")\n\t\t\t} else if ( match[2] ) {\n\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\treturn results;\n\n\t\t\t// Speed-up: Sizzle(\".CLASS\")\n\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName ) {\n\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\n\t\t// QSA path\n\t\tif ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\t\t\tnid = old = expando;\n\t\t\tnewContext = context;\n\t\t\tnewSelector = nodeType !== 1 && selector;\n\n\t\t\t// qSA works strangely on Element-rooted queries\n\t\t\t// We can work around this by specifying an extra ID on the root\n\t\t\t// and working up from there (Thanks to Andrew Dupont for the technique)\n\t\t\t// IE 8 doesn't work on object elements\n\t\t\tif ( nodeType === 1 && context.nodeName.toLowerCase() !== \"object\" ) {\n\t\t\t\tgroups = tokenize( selector );\n\n\t\t\t\tif ( (old = context.getAttribute(\"id\")) ) {\n\t\t\t\t\tnid = old.replace( rescape, \"\\\\$&\" );\n\t\t\t\t} else {\n\t\t\t\t\tcontext.setAttribute( \"id\", nid );\n\t\t\t\t}\n\t\t\t\tnid = \"[id='\" + nid + \"'] \";\n\n\t\t\t\ti = groups.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tgroups[i] = nid + toSelector( groups[i] );\n\t\t\t\t}\n\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;\n\t\t\t\tnewSelector = groups.join(\",\");\n\t\t\t}\n\n\t\t\tif ( newSelector ) {\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch(qsaError) {\n\t\t\t\t} finally {\n\t\t\t\t\tif ( !old ) {\n\t\t\t\t\t\tcontext.removeAttribute(\"id\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {Function(string, Object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created div and expects a boolean result\n */\nfunction assert( fn ) {\n\tvar div = document.createElement(\"div\");\n\n\ttry {\n\t\treturn !!fn( div );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( div.parentNode ) {\n\t\t\tdiv.parentNode.removeChild( div );\n\t\t}\n\t\t// release memory in IE\n\t\tdiv = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = attrs.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\t( ~b.sourceIndex || MAX_NEGATIVE ) -\n\t\t\t( ~a.sourceIndex || MAX_NEGATIVE );\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, parent,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// If no document and documentElement is available, return\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Set our document\n\tdocument = doc;\n\tdocElem = doc.documentElement;\n\tparent = doc.defaultView;\n\n\t// Support: IE>8\n\t// If iframe document is assigned to \"document\" variable and if iframe has been reloaded,\n\t// IE will throw \"permission denied\" error when accessing \"document\" variable, see jQuery #13936\n\t// IE6-8 do not support the defaultView property so parent will be undefined\n\tif ( parent && parent !== parent.top ) {\n\t\t// IE11 does not have attachEvent, so all must suffer\n\t\tif ( parent.addEventListener ) {\n\t\t\tparent.addEventListener( \"unload\", unloadHandler, false );\n\t\t} else if ( parent.attachEvent ) {\n\t\t\tparent.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Support tests\n\t---------------------------------------------------------------------- */\n\tdocumentIsHTML = !isXML( doc );\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( div ) {\n\t\tdiv.className = \"i\";\n\t\treturn !div.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( div ) {\n\t\tdiv.appendChild( doc.createComment(\"\") );\n\t\treturn !div.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( doc.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( div ) {\n\t\tdocElem.appendChild( div ).id = expando;\n\t\treturn !doc.getElementsByName || !doc.getElementsByName( expando ).length;\n\t});\n\n\t// ID find and filter\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\t// Check parentNode to catch when Blackberry 4.6 returns\n\t\t\t\t// nodes that are no longer in the document #6963\n\t\t\t\treturn m && m.parentNode ? [ m ] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\t// Support: IE6/7\n\t\t// getElementById is not reliable as a find shortcut\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" && elem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See http://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( div ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// http://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( div ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\f]' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( div.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !div.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+\n\t\t\tif ( !div.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibing-combinator selector` fails\n\t\t\tif ( !div.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( div ) {\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = doc.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tdiv.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( div.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !div.querySelectorAll(\":enabled\").length ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tdiv.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( div ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( div, \"div\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( div, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully does not implement inclusive descendent\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === doc ? -1 :\n\t\t\t\tb === doc ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn doc;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, outerCache, node, diff, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\t\t\t\t\t\t\touterCache = parent[ expando ] || (parent[ expando ] = {});\n\t\t\t\t\t\t\tcache = outerCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[0] === dirruns && cache[1];\n\t\t\t\t\t\t\tdiff = cache[0] === dirruns && cache[2];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\touterCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {\n\t\t\t\t\t\t\tdiff = cache[1];\n\n\t\t\t\t\t\t// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\tif ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {\n\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": function( elem ) {\n\t\t\treturn elem.disabled === false;\n\t\t},\n\n\t\t\"disabled\": function( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tcheckNonElements = base && dir === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\t\t\t\t\t\tif ( (oldCache = outerCache[ dir ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\touterCache[ dir ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context !== document && context;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Keep `i` a string if there are no elements so `matchedCount` will be \"00\" below\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\tmatchedCount += i;\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is no seed and only one group\n\tif ( match.length === 1 ) {\n\n\t\t// Take a shortcut and set the context if the root selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\trsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( div1 ) {\n\t// Should return 1, but returns 4 (following)\n\treturn div1.compareDocumentPosition( document.createElement(\"div\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( div ) {\n\tdiv.innerHTML = \"<a href='#'></a>\";\n\treturn div.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( div ) {\n\tdiv.innerHTML = \"<input/>\";\n\tdiv.firstChild.setAttribute( \"value\", \"\" );\n\treturn div.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( div ) {\n\treturn div.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\njQuery.expr[\":\"] = jQuery.expr.pseudos;\njQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\n\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = (/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/);\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\t/* jshint -W018 */\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t});\n\n\t}\n\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t});\n\n\t}\n\n\tif ( typeof qualifier === \"string\" ) {\n\t\tif ( risSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t}\n\n\t\tqualifier = jQuery.filter( qualifier, elements );\n\t}\n\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) >= 0 ) !== not;\n\t});\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t}));\n};\n\njQuery.fn.extend({\n\tfind: function( selector ) {\n\t\tvar i,\n\t\t\tlen = this.length,\n\t\t\tret = [],\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter(function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) );\n\t\t}\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\t// Needed because $( selector, context ) becomes $( context ).find( selector )\n\t\tret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );\n\t\tret.selector = this.selector ? this.selector + \" \" + selector : selector;\n\t\treturn ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], false) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow(this, selector || [], true) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n});\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\n\n\tinit = jQuery.fn.init = function( selector, context ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[0] === \"<\" && selector[ selector.length - 1 ] === \">\" && selector.length >= 3 ) {\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && (match[1] || !context) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[1] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[0] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[1],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[2] );\n\n\t\t\t\t\t// Support: Blackberry 4.6\n\t\t\t\t\t// gEBID returns nodes no longer in the document (#6963)\n\t\t\t\t\tif ( elem && elem.parentNode ) {\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t\tthis[0] = elem;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.context = document;\n\t\t\t\t\tthis.selector = selector;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || rootjQuery ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis.context = this[0] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn typeof rootjQuery.ready !== \"undefined\" ?\n\t\t\t\trootjQuery.ready( selector ) :\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\tif ( selector.selector !== undefined ) {\n\t\t\tthis.selector = selector.selector;\n\t\t\tthis.context = selector.context;\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.extend({\n\tdir: function( elem, dir, until ) {\n\t\tvar matched = [],\n\t\t\ttruncate = until !== undefined;\n\n\t\twhile ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmatched.push( elem );\n\t\t\t}\n\t\t}\n\t\treturn matched;\n\t},\n\n\tsibling: function( n, elem ) {\n\t\tvar matched = [];\n\n\t\tfor ( ; n; n = n.nextSibling ) {\n\t\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\t\tmatched.push( n );\n\t\t\t}\n\t\t}\n\n\t\treturn matched;\n\t}\n});\n\njQuery.fn.extend({\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter(function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[i] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\tpos = rneedsContext.test( selectors ) || typeof selectors !== \"string\" ?\n\t\t\t\tjQuery( selectors, context || this.context ) :\n\t\t\t\t0;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tfor ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {\n\t\t\t\t// Always skip document fragments\n\t\t\t\tif ( cur.nodeType < 11 && (pos ?\n\t\t\t\t\tpos.index(cur) > -1 :\n\n\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\tjQuery.find.matchesSelector(cur, selectors)) ) {\n\n\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.unique(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter(selector)\n\t\t);\n\t}\n});\n\nfunction sibling( cur, dir ) {\n\twhile ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each({\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn jQuery.dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn jQuery.dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn jQuery.sibling( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.unique( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n});\nvar rnotwhite = (/\\S+/g);\n\n\n\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// Flag to know if list is currently firing\n\t\tfiring,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\tfiringLength = 0;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ](function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ]\n\t\t\tdeferred[ tuple[0] ] = function() {\n\t\t\t\tdeferred[ tuple[0] + \"With\" ]( this === deferred ? promise : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// Add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\n\n\n// The deferred used on DOM ready\nvar readyList;\n\njQuery.fn.ready = function( fn ) {\n\t// Add the callback\n\tjQuery.ready.promise().done( fn );\n\n\treturn this;\n};\n\njQuery.extend({\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\n\t\t// Trigger any bound ready events\n\t\tif ( jQuery.fn.triggerHandler ) {\n\t\t\tjQuery( document ).triggerHandler( \"ready\" );\n\t\t\tjQuery( document ).off( \"ready\" );\n\t\t}\n\t}\n});\n\n/**\n * The ready event handler and self cleanup method\n */\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed, false );\n\twindow.removeEventListener( \"load\", completed, false );\n\tjQuery.ready();\n}\n\njQuery.ready.promise = function( obj ) {\n\tif ( !readyList ) {\n\n\t\treadyList = jQuery.Deferred();\n\n\t\t// Catch cases where $(document).ready() is called after the browser event has already occurred.\n\t\t// We once tried to use readyState \"interactive\" here, but it caused issues like the one\n\t\t// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15\n\t\tif ( document.readyState === \"complete\" ) {\n\t\t\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\t\t\tsetTimeout( jQuery.ready );\n\n\t\t} else {\n\n\t\t\t// Use the handy event callback\n\t\t\tdocument.addEventListener( \"DOMContentLoaded\", completed, false );\n\n\t\t\t// A fallback to window.onload, that will always work\n\t\t\twindow.addEventListener( \"load\", completed, false );\n\t\t}\n\t}\n\treturn readyList.promise( obj );\n};\n\n// Kick off the DOM ready check even if the user does not\njQuery.ready.promise();\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\tjQuery.access( elems, fn, i, key[i], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn chainable ?\n\t\telems :\n\n\t\t// Gets\n\t\tbulk ?\n\t\t\tfn.call( elems ) :\n\t\t\tlen ? fn( elems[0], key ) : emptyGet;\n};\n\n\n/**\n * Determines whether an object can have data\n */\njQuery.acceptData = function( owner ) {\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\t/* jshint -W018 */\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\nfunction Data() {\n\t// Support: Android<4,\n\t// Old WebKit does not have Object.preventExtensions/freeze method,\n\t// return new empty object instead with no [[set]] accessor\n\tObject.defineProperty( this.cache = {}, 0, {\n\t\tget: function() {\n\t\t\treturn {};\n\t\t}\n\t});\n\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\nData.accepts = jQuery.acceptData;\n\nData.prototype = {\n\tkey: function( owner ) {\n\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t// but we should not, see #8335.\n\t\t// Always return the key for a frozen object.\n\t\tif ( !Data.accepts( owner ) ) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar descriptor = {},\n\t\t\t// Check if the owner object already has a cache key\n\t\t\tunlock = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !unlock ) {\n\t\t\tunlock = Data.uid++;\n\n\t\t\t// Secure it in a non-enumerable, non-writable property\n\t\t\ttry {\n\t\t\t\tdescriptor[ this.expando ] = { value: unlock };\n\t\t\t\tObject.defineProperties( owner, descriptor );\n\n\t\t\t// Support: Android<4\n\t\t\t// Fallback to a less secure definition\n\t\t\t} catch ( e ) {\n\t\t\t\tdescriptor[ this.expando ] = unlock;\n\t\t\t\tjQuery.extend( owner, descriptor );\n\t\t\t}\n\t\t}\n\n\t\t// Ensure the cache object\n\t\tif ( !this.cache[ unlock ] ) {\n\t\t\tthis.cache[ unlock ] = {};\n\t\t}\n\n\t\treturn unlock;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\t// There may be an unlock assigned to this node,\n\t\t\t// if there is no entry for this \"owner\", create one inline\n\t\t\t// and set the unlock as though an owner entry had always existed\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\t// Handle: [ owner, key, value ] args\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ data ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\t\t\t// Fresh assignments by object are shallow copied\n\t\t\tif ( jQuery.isEmptyObject( cache ) ) {\n\t\t\t\tjQuery.extend( this.cache[ unlock ], data );\n\t\t\t// Otherwise, copy the properties one-by-one to the cache object\n\t\t\t} else {\n\t\t\t\tfor ( prop in data ) {\n\t\t\t\t\tcache[ prop ] = data[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\t// Either a valid cache is found, or will be created.\n\t\t// New caches will be created and the unlock returned,\n\t\t// allowing direct access to the newly created\n\t\t// empty data object. A valid owner object must be provided.\n\t\tvar cache = this.cache[ this.key( owner ) ];\n\n\t\treturn key === undefined ?\n\t\t\tcache : cache[ key ];\n\t},\n\taccess: function( owner, key, value ) {\n\t\tvar stored;\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t((key && typeof key === \"string\") && value === undefined) ) {\n\n\t\t\tstored = this.get( owner, key );\n\n\t\t\treturn stored !== undefined ?\n\t\t\t\tstored : this.get( owner, jQuery.camelCase(key) );\n\t\t}\n\n\t\t// [*]When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i, name, camel,\n\t\t\tunlock = this.key( owner ),\n\t\t\tcache = this.cache[ unlock ];\n\n\t\tif ( key === undefined ) {\n\t\t\tthis.cache[ unlock ] = {};\n\n\t\t} else {\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( jQuery.isArray( key ) ) {\n\t\t\t\t// If \"name\" is an array of keys...\n\t\t\t\t// When data is initially created, via (\"key\", \"val\") signature,\n\t\t\t\t// keys will be converted to camelCase.\n\t\t\t\t// Since there is no way to tell _how_ a key was added, remove\n\t\t\t\t// both plain key and camelCase key. #12786\n\t\t\t\t// This will only penalize the array argument path.\n\t\t\t\tname = key.concat( key.map( jQuery.camelCase ) );\n\t\t\t} else {\n\t\t\t\tcamel = jQuery.camelCase( key );\n\t\t\t\t// Try the string as a key before any manipulation\n\t\t\t\tif ( key in cache ) {\n\t\t\t\t\tname = [ key, camel ];\n\t\t\t\t} else {\n\t\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\t\tname = camel;\n\t\t\t\t\tname = name in cache ?\n\t\t\t\t\t\t[ name ] : ( name.match( rnotwhite ) || [] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti = name.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ name[ i ] ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\treturn !jQuery.isEmptyObject(\n\t\t\tthis.cache[ owner[ this.expando ] ] || {}\n\t\t);\n\t},\n\tdiscard: function( owner ) {\n\t\tif ( owner[ this.expando ] ) {\n\t\t\tdelete this.cache[ owner[ this.expando ] ];\n\t\t}\n\t}\n};\nvar data_priv = new Data();\n\nvar data_user = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /([A-Z])/g;\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$1\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? jQuery.parseJSON( data ) :\n\t\t\t\t\tdata;\n\t\t\t} catch( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdata_user.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend({\n\thasData: function( elem ) {\n\t\treturn data_user.hasData( elem ) || data_priv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn data_user.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdata_user.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to data_priv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn data_priv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdata_priv.remove( elem, name );\n\t}\n});\n\njQuery.fn.extend({\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = data_user.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !data_priv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE11+\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice(5) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata_priv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each(function() {\n\t\t\t\tdata_user.set( this, key );\n\t\t\t});\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data,\n\t\t\t\tcamelKey = jQuery.camelCase( key );\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key as-is\n\t\t\t\tdata = data_user.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// with the key camelized\n\t\t\t\tdata = data_user.get( elem, camelKey );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, camelKey, undefined );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each(function() {\n\t\t\t\t// First, attempt to store a copy or reference of any\n\t\t\t\t// data that might've been store with a camelCased key.\n\t\t\t\tvar data = data_user.get( this, camelKey );\n\n\t\t\t\t// For HTML5 data-* attribute interop, we have to\n\t\t\t\t// store property names with dashes in a camelCase form.\n\t\t\t\t// This might not apply to all properties...*\n\t\t\t\tdata_user.set( this, camelKey, value );\n\n\t\t\t\t// *... In the case of properties that might _actually_\n\t\t\t\t// have dashes, we need to also store a copy of that\n\t\t\t\t// unchanged property.\n\t\t\t\tif ( key.indexOf(\"-\") !== -1 && data !== undefined ) {\n\t\t\t\t\tdata_user.set( this, key, value );\n\t\t\t\t}\n\t\t\t});\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each(function() {\n\t\t\tdata_user.remove( this, key );\n\t\t});\n\t}\n});\n\n\njQuery.extend({\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = data_priv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = data_priv.access( elem, type, jQuery.makeArray(data) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn data_priv.get( elem, key ) || data_priv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks(\"once memory\").add(function() {\n\t\t\t\tdata_priv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t})\n\t\t});\n\t}\n});\n\njQuery.fn.extend({\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[0], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each(function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[0] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t});\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t});\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = data_priv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n});\nvar pnum = (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source;\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHidden = function( elem, el ) {\n\t\t// isHidden might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\t\treturn jQuery.css( elem, \"display\" ) === \"none\" || !jQuery.contains( elem.ownerDocument, elem );\n\t};\n\nvar rcheckableType = (/^(?:checkbox|radio)$/i);\n\n\n\n(function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Safari<=5.1\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Safari<=5.1, Android<4.2\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE<=11+\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n})();\nvar strundefined = typeof undefined;\n\n\n\nsupport.focusinBubbles = \"onfocusin\" in window;\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,\n\trfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)$/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !(events = elemData.events) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !(eventHandle = elemData.handle) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend({\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join(\".\")\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !(handlers = events[ type ]) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = data_priv.hasData( elem ) && data_priv.get( elem );\n\n\t\tif ( !elemData || !(events = elemData.events) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[t] ) || [];\n\t\t\ttype = origType = tmp[1];\n\t\t\tnamespaces = ( tmp[2] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[2] && new RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector || selector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdelete elemData.handle;\n\t\t\tdata_priv.remove( elem, \"events\" );\n\t\t}\n\t},\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split(\".\") : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf(\".\") >= 0 ) {\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split(\".\");\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf(\":\") < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join(\".\");\n\t\tevent.namespace_re = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === (elem.ownerDocument || document) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( data_priv.get( cur, \"events\" ) || {} )[ event.type ] && data_priv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && jQuery.acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&\n\t\t\t\tjQuery.acceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\tdispatch: function( event ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tevent = jQuery.event.fix( event );\n\n\t\tvar i, j, ret, matched, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\targs = slice.call( arguments ),\n\t\t\thandlers = ( data_priv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[0] = event;\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )\n\t\t\t\t\t\t\t.apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( (event.result = ret) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, matches, sel, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t// Avoid non-left-click bubbling in Firefox (#3861)\n\t\tif ( delegateCount && cur.nodeType && (!event.button || event.type !== \"click\") ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.disabled !== true || event.type !== \"click\" ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) >= 0 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push({ elem: cur, handlers: matches });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\t// Includes some event props shared by KeyEvent and MouseEvent\n\tprops: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\n\n\tfixHooks: {},\n\n\tkeyHooks: {\n\t\tprops: \"char charCode key keyCode\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\n\t\t\t// Add which for key events\n\t\t\tif ( event.which == null ) {\n\t\t\t\tevent.which = original.charCode != null ? original.charCode : original.keyCode;\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tmouseHooks: {\n\t\tprops: \"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\n\t\tfilter: function( event, original ) {\n\t\t\tvar eventDoc, doc, body,\n\t\t\t\tbutton = original.button;\n\n\t\t\t// Calculate pageX/Y if missing and clientX/Y available\n\t\t\tif ( event.pageX == null && original.clientX != null ) {\n\t\t\t\teventDoc = event.target.ownerDocument || document;\n\t\t\t\tdoc = eventDoc.documentElement;\n\t\t\t\tbody = eventDoc.body;\n\n\t\t\t\tevent.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );\n\t\t\t\tevent.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );\n\t\t\t}\n\n\t\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\t\t// Note: button is not normalized, so don't use it\n\t\t\tif ( !event.which && button !== undefined ) {\n\t\t\t\tevent.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t\t}\n\n\t\t\treturn event;\n\t\t}\n\t},\n\n\tfix: function( event ) {\n\t\tif ( event[ jQuery.expando ] ) {\n\t\t\treturn event;\n\t\t}\n\n\t\t// Create a writable copy of the event object and normalize some properties\n\t\tvar i, prop, copy,\n\t\t\ttype = event.type,\n\t\t\toriginalEvent = event,\n\t\t\tfixHook = this.fixHooks[ type ];\n\n\t\tif ( !fixHook ) {\n\t\t\tthis.fixHooks[ type ] = fixHook =\n\t\t\t\trmouseEvent.test( type ) ? this.mouseHooks :\n\t\t\t\trkeyEvent.test( type ) ? this.keyHooks :\n\t\t\t\t{};\n\t\t}\n\t\tcopy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;\n\n\t\tevent = new jQuery.Event( originalEvent );\n\n\t\ti = copy.length;\n\t\twhile ( i-- ) {\n\t\t\tprop = copy[ i ];\n\t\t\tevent[ prop ] = originalEvent[ prop ];\n\t\t}\n\n\t\t// Support: Cordova 2.5 (WebKit) (#13255)\n\t\t// All events should have a target; Cordova deviceready doesn't\n\t\tif ( !event.target ) {\n\t\t\tevent.target = document;\n\t\t}\n\n\t\t// Support: Safari 6.0+, Chrome<28\n\t\t// Target should not be a text node (#504, #13143)\n\t\tif ( event.target.nodeType === 3 ) {\n\t\t\tevent.target = event.target.parentNode;\n\t\t}\n\n\t\treturn fixHook.filter ? fixHook.filter( event, originalEvent ) : event;\n\t},\n\n\tspecial: {\n\t\tload: {\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tsimulate: function( type, elem, event, bubble ) {\n\t\t// Piggyback on a donor event to simulate a different one.\n\t\t// Fake originalEvent to avoid donor's stopPropagation, but if the\n\t\t// simulated event prevents default then we do the same on the donor.\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true,\n\t\t\t\toriginalEvent: {}\n\t\t\t}\n\t\t);\n\t\tif ( bubble ) {\n\t\t\tjQuery.event.trigger( e, null, elem );\n\t\t} else {\n\t\t\tjQuery.event.dispatch.call( elem, e );\n\t\t}\n\t\tif ( e.isDefaultPrevented() ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle, false );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\t// Allow instantiation without the 'new' keyword\n\tif ( !(this instanceof jQuery.Event) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\t\t\t\t// Support: Android<4.0\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && e.preventDefault ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopPropagation ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && e.stopImmediatePropagation ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// Support: Chrome 15+\njQuery.each({\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mousenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || (related !== target && !jQuery.contains( target, related )) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n});\n\n// Support: Firefox, Chrome, Safari\n// Create \"bubbling\" focus and blur events\nif ( !support.focusinBubbles ) {\n\tjQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );\n\t\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdata_priv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = data_priv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdata_priv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdata_priv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n}\n\njQuery.fn.extend({\n\n\ton: function( types, selector, data, fn, /*INTERNAL*/ one ) {\n\t\tvar origFn, type;\n\n\t\t// Types can be a map of types/handlers\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-Object, selector, data )\n\t\t\tif ( typeof selector !== \"string\" ) {\n\t\t\t\t// ( types-Object, data )\n\t\t\t\tdata = data || selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.on( type, selector, data, types[ type ], one );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( data == null && fn == null ) {\n\t\t\t// ( types, fn )\n\t\t\tfn = selector;\n\t\t\tdata = selector = undefined;\n\t\t} else if ( fn == null ) {\n\t\t\tif ( typeof selector === \"string\" ) {\n\t\t\t\t// ( types, selector, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = undefined;\n\t\t\t} else {\n\t\t\t\t// ( types, data, fn )\n\t\t\t\tfn = data;\n\t\t\t\tdata = selector;\n\t\t\t\tselector = undefined;\n\t\t\t}\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t} else if ( !fn ) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif ( one === 1 ) {\n\t\t\torigFn = fn;\n\t\t\tfn = function( event ) {\n\t\t\t\t// Can use an empty set, since event contains the info\n\t\t\t\tjQuery().off( event );\n\t\t\t\treturn origFn.apply( this, arguments );\n\t\t\t};\n\t\t\t// Use same guid so caller can remove using origFn\n\t\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.add( this, types, fn, data, selector );\n\t\t});\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn this.on( types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ? handleObj.origType + \".\" + handleObj.namespace : handleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t});\n\t},\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t});\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[0];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n});\n\n\nvar\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\n\trtagName = /<([\\w:]+)/,\n\trhtml = /<|&#?\\w+;/,\n\trnoInnerhtml = /<(?:script|style|link)/i,\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptType = /^$|\\/(?:java|ecma)script/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\n\n\t// We have to close these tags to support XHTML (#13200)\n\twrapMap = {\n\n\t\t// Support: IE9\n\t\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t\tthead: [ 1, \"<table>\", \"</table>\" ],\n\t\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\t\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\t\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t\t_default: [ 0, \"\", \"\" ]\n\t};\n\n// Support: IE9\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: 1.x compatibility\n// Manipulating tables requires a tbody\nfunction manipulationTarget( elem, content ) {\n\treturn jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ?\n\n\t\telem.getElementsByTagName(\"tbody\")[0] ||\n\t\t\telem.appendChild( elem.ownerDocument.createElement(\"tbody\") ) :\n\t\telem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute(\"type\");\n\t}\n\n\treturn elem;\n}\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdata_priv.set(\n\t\t\telems[ i ], \"globalEval\", !refElements || data_priv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( data_priv.hasData( src ) ) {\n\t\tpdataOld = data_priv.access( src );\n\t\tpdataCur = data_priv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( data_user.hasData( src ) ) {\n\t\tudataOld = data_user.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdata_user.set( dest, udataCur );\n\t}\n}\n\nfunction getAll( context, tag ) {\n\tvar ret = context.getElementsByTagName ? context.getElementsByTagName( tag || \"*\" ) :\n\t\t\tcontext.querySelectorAll ? context.querySelectorAll( tag || \"*\" ) :\n\t\t\t[];\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], ret ) :\n\t\tret;\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\njQuery.extend({\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tbuildFragment: function( elems, context, scripts, selection ) {\n\t\tvar elem, tmp, tag, wrap, contains, j,\n\t\t\tfragment = context.createDocumentFragment(),\n\t\t\tnodes = [],\n\t\t\ti = 0,\n\t\t\tl = elems.length;\n\n\t\tfor ( ; i < l; i++ ) {\n\t\t\telem = elems[ i ];\n\n\t\t\tif ( elem || elem === 0 ) {\n\n\t\t\t\t// Add nodes directly\n\t\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t\t// Convert non-html into a text node\n\t\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t\t// Convert html into DOM nodes\n\t\t\t\t} else {\n\t\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement(\"div\") );\n\n\t\t\t\t\t// Deserialize a standard representation\n\t\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\t\ttmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, \"<$1></$2>\" ) + wrap[ 2 ];\n\n\t\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\t\tj = wrap[ 0 ];\n\t\t\t\t\twhile ( j-- ) {\n\t\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: QtWebKit, PhantomJS\n\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t\t// Remember the top-level container\n\t\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\t\ttmp.textContent = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove wrapper from fragment\n\t\tfragment.textContent = \"\";\n\n\t\ti = 0;\n\t\twhile ( (elem = nodes[ i++ ]) ) {\n\n\t\t\t// #4087 - If origin and destination elements are the same, and this is\n\t\t\t// that element, do not do anything\n\t\t\tif ( selection && jQuery.inArray( elem, selection ) !== -1 ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t\t// Append to fragment\n\t\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t\t// Preserve script evaluation history\n\t\t\tif ( contains ) {\n\t\t\t\tsetGlobalEval( tmp );\n\t\t\t}\n\n\t\t\t// Capture executables\n\t\t\tif ( scripts ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (elem = tmp[ j++ ]) ) {\n\t\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\t\tscripts.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fragment;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type, key,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[ i ]) !== undefined; i++ ) {\n\t\t\tif ( jQuery.acceptData( elem ) ) {\n\t\t\t\tkey = elem[ data_priv.expando ];\n\n\t\t\t\tif ( key && (data = data_priv.cache[ key ]) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( data_priv.cache[ key ] ) {\n\t\t\t\t\t\t// Discard any remaining `private` data\n\t\t\t\t\t\tdelete data_priv.cache[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Discard any remaining `user` data\n\t\t\tdelete data_user.cache[ elem[ data_user.expando ] ];\n\t\t}\n\t}\n});\n\njQuery.fn.extend({\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each(function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t});\n\t},\n\n\tprepend: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t});\n\t},\n\n\tbefore: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t});\n\t},\n\n\tafter: function() {\n\t\treturn this.domManip( arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t});\n\t},\n\n\tremove: function( selector, keepData /* Internal Use Only */ ) {\n\t\tvar elem,\n\t\t\telems = selector ? jQuery.filter( selector, this ) : this,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = elems[i]) != null; i++ ) {\n\t\t\tif ( !keepData && elem.nodeType === 1 ) {\n\t\t\t\tjQuery.cleanData( getAll( elem ) );\n\t\t\t}\n\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\tif ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\t\t\tsetGlobalEval( getAll( elem, \"script\" ) );\n\t\t\t\t}\n\t\t\t\telem.parentNode.removeChild( elem );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; (elem = this[i]) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map(function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t});\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = value.replace( rxhtmlTag, \"<$1></$2>\" );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar arg = arguments[ 0 ];\n\n\t\t// Make the changes, replacing each context element with the new content\n\t\tthis.domManip( arguments, function( elem ) {\n\t\t\targ = this.parentNode;\n\n\t\t\tjQuery.cleanData( getAll( this ) );\n\n\t\t\tif ( arg ) {\n\t\t\t\targ.replaceChild( elem, this );\n\t\t\t}\n\t\t});\n\n\t\t// Force removal if there was no new content (e.g., from empty arguments)\n\t\treturn arg && (arg.length || arg.nodeType) ? this : this.remove();\n\t},\n\n\tdetach: function( selector ) {\n\t\treturn this.remove( selector, true );\n\t},\n\n\tdomManip: function( args, callback ) {\n\n\t\t// Flatten any nested arrays\n\t\targs = concat.apply( [], args );\n\n\t\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tset = this,\n\t\t\tiNoClone = l - 1,\n\t\t\tvalue = args[ 0 ],\n\t\t\tisFunction = jQuery.isFunction( value );\n\n\t\t// We can't cloneNode fragments that contain checked, in WebKit\n\t\tif ( isFunction ||\n\t\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\t\treturn this.each(function( index ) {\n\t\t\t\tvar self = set.eq( index );\n\t\t\t\tif ( isFunction ) {\n\t\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t\t}\n\t\t\t\tself.domManip( args, callback );\n\t\t\t});\n\t\t}\n\n\t\tif ( l ) {\n\t\t\tfragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );\n\t\t\tfirst = fragment.firstChild;\n\n\t\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\t\tfragment = first;\n\t\t\t}\n\n\t\t\tif ( first ) {\n\t\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\t\thasScripts = scripts.length;\n\n\t\t\t\t// Use the original fragment for the last item instead of the first because it can end up\n\t\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\tnode = fragment;\n\n\t\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\t\t\t// Support: QtWebKit\n\t\t\t\t\t\t\t// jQuery.merge because push.apply(_, arraylike) throws\n\t\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback.call( this[ i ], node, i );\n\t\t\t\t}\n\n\t\t\t\tif ( hasScripts ) {\n\t\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t\t// Reenable scripts\n\t\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t\t!data_priv.access( node, \"globalEval\" ) && jQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\t\tif ( node.src ) {\n\t\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.globalEval( node.textContent.replace( rcleanScript, \"\" ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\njQuery.each({\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: QtWebKit\n\t\t\t// .get() because push.apply(_, arraylike) throws\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n});\n\n\nvar iframe,\n\telemdisplay = {};\n\n/**\n * Retrieve the actual display of a element\n * @param {String} name nodeName of the element\n * @param {Object} doc Document object\n */\n// Called only from within defaultDisplay\nfunction actualDisplay( name, doc ) {\n\tvar style,\n\t\telem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),\n\n\t\t// getDefaultComputedStyle might be reliably used only on attached element\n\t\tdisplay = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?\n\n\t\t\t// Use of this method is a temporary fix (more like optimization) until something better comes along,\n\t\t\t// since it was removed from specification and supported only in FF\n\t\t\tstyle.display : jQuery.css( elem[ 0 ], \"display\" );\n\n\t// We don't have any data stored on the element,\n\t// so use \"detach\" method as fast way to get rid of the element\n\telem.detach();\n\n\treturn display;\n}\n\n/**\n * Try to determine the default display value of an element\n * @param {String} nodeName\n */\nfunction defaultDisplay( nodeName ) {\n\tvar doc = document,\n\t\tdisplay = elemdisplay[ nodeName ];\n\n\tif ( !display ) {\n\t\tdisplay = actualDisplay( nodeName, doc );\n\n\t\t// If the simple way fails, read from inside an iframe\n\t\tif ( display === \"none\" || !display ) {\n\n\t\t\t// Use the already-created iframe if possible\n\t\t\tiframe = (iframe || jQuery( \"<iframe frameborder='0' width='0' height='0'/>\" )).appendTo( doc.documentElement );\n\n\t\t\t// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse\n\t\t\tdoc = iframe[ 0 ].contentDocument;\n\n\t\t\t// Support: IE\n\t\t\tdoc.write();\n\t\t\tdoc.close();\n\n\t\t\tdisplay = actualDisplay( nodeName, doc );\n\t\t\tiframe.detach();\n\t\t}\n\n\t\t// Store the correct default display\n\t\telemdisplay[ nodeName ] = display;\n\t}\n\n\treturn display;\n}\nvar rmargin = (/^margin/);\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\t\t// Support: IE<=11+, Firefox<=30+ (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tif ( elem.ownerDocument.defaultView.opener ) {\n\t\t\treturn elem.ownerDocument.defaultView.getComputedStyle( elem, null );\n\t\t}\n\n\t\treturn window.getComputedStyle( elem, null );\n\t};\n\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// Support: IE9\n\t// getPropertyValue is only needed for .css('filter') (#12537)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\t}\n\n\tif ( computed ) {\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// Support: iOS < 6\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels\n\t\t// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values\n\t\tif ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\t\t// Support: IE\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn (this.get = hookFn).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\n(function() {\n\tvar pixelPositionVal, boxSizingReliableVal,\n\t\tdocElem = document.documentElement,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE9-11+\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;\" +\n\t\t\"position:absolute\";\n\tcontainer.appendChild( div );\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computePixelPositionAndBoxSizingReliable() {\n\t\tdiv.style.cssText =\n\t\t\t// Support: Firefox<29, Android 2.3\n\t\t\t// Vendor-prefix box-sizing\n\t\t\t\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;\" +\n\t\t\t\"box-sizing:border-box;display:block;margin-top:1%;top:1%;\" +\n\t\t\t\"border:1px;padding:1px;width:4px;position:absolute\";\n\t\tdiv.innerHTML = \"\";\n\t\tdocElem.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div, null );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\tdocElem.removeChild( container );\n\t}\n\n\t// Support: node.js jsdom\n\t// Don't assume that getComputedStyle is a property of the global object\n\tif ( window.getComputedStyle ) {\n\t\tjQuery.extend( support, {\n\t\t\tpixelPosition: function() {\n\n\t\t\t\t// This test is executed only once but we still do memoizing\n\t\t\t\t// since we can use the boxSizingReliable pre-computing.\n\t\t\t\t// No need to check if the test was already performed, though.\n\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\treturn pixelPositionVal;\n\t\t\t},\n\t\t\tboxSizingReliable: function() {\n\t\t\t\tif ( boxSizingReliableVal == null ) {\n\t\t\t\t\tcomputePixelPositionAndBoxSizingReliable();\n\t\t\t\t}\n\t\t\t\treturn boxSizingReliableVal;\n\t\t\t},\n\t\t\treliableMarginRight: function() {\n\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Check if div with explicit width and no margin-right incorrectly\n\t\t\t\t// gets computed margin-right based on width of container. (#3333)\n\t\t\t\t// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right\n\t\t\t\t// This support function is only executed once so no memoizing is needed.\n\t\t\t\tvar ret,\n\t\t\t\t\tmarginDiv = div.appendChild( document.createElement( \"div\" ) );\n\n\t\t\t\t// Reset CSS: box-sizing; display; margin; border; padding\n\t\t\t\tmarginDiv.style.cssText = div.style.cssText =\n\t\t\t\t\t// Support: Firefox<29, Android 2.3\n\t\t\t\t\t// Vendor-prefix box-sizing\n\t\t\t\t\t\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;\" +\n\t\t\t\t\t\"box-sizing:content-box;display:block;margin:0;border:0;padding:0\";\n\t\t\t\tmarginDiv.style.marginRight = marginDiv.style.width = \"0\";\n\t\t\t\tdiv.style.width = \"1px\";\n\t\t\t\tdocElem.appendChild( container );\n\n\t\t\t\tret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );\n\n\t\t\t\tdocElem.removeChild( container );\n\t\t\t\tdiv.removeChild( marginDiv );\n\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t});\n\t}\n})();\n\n\n// A method for quickly swapping in/out CSS properties to get correct calculations.\njQuery.swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar\n\t// Swappable if display is none or starts with table except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trnumsplit = new RegExp( \"^(\" + pnum + \")(.*)$\", \"i\" ),\n\trrelNum = new RegExp( \"^([+-])=(\" + pnum + \")\", \"i\" ),\n\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"O\", \"Moz\", \"ms\" ];\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( style, name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in style ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[0].toUpperCase() + name.slice(1),\n\t\torigName = name,\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in style ) {\n\t\t\treturn name;\n\t\t}\n\t}\n\n\treturn origName;\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\tvar matches = rnumsplit.exec( value );\n\treturn matches ?\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\t\t// Both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// At this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\t\t\t// At this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// At this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar valueIsBorderBox = true,\n\t\tval = name === \"width\" ? elem.offsetWidth : elem.offsetHeight,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// Some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test(val) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// Check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// Use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem, hidden,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvalues[ index ] = data_priv.get( elem, \"olddisplay\" );\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\t\t\t// Reset the inline display of this element to learn if it is\n\t\t\t// being hidden by cascaded rules or not\n\t\t\tif ( !values[ index ] && display === \"none\" ) {\n\t\t\t\telem.style.display = \"\";\n\t\t\t}\n\n\t\t\t// Set elements which have been overridden with display: none\n\t\t\t// in a stylesheet to whatever the default browser style is\n\t\t\t// for such an element\n\t\t\tif ( elem.style.display === \"\" && isHidden( elem ) ) {\n\t\t\t\tvalues[ index ] = data_priv.access( elem, \"olddisplay\", defaultDisplay(elem.nodeName) );\n\t\t\t}\n\t\t} else {\n\t\t\thidden = isHidden( elem );\n\n\t\t\tif ( display !== \"none\" || !hidden ) {\n\t\t\t\tdata_priv.set( elem, \"olddisplay\", hidden ? display : jQuery.css( elem, \"display\" ) );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of most of the elements in a second loop\n\t// to avoid the constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\t\tif ( !show || elem.style.display === \"none\" || elem.style.display === \"\" ) {\n\t\t\telem.style.display = show ? values[ index ] || \"\" : \"none\";\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.extend({\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && (ret = rrelNum.exec( value )) ) {\n\t\t\t\tvalue = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number, add 'px' to the (except for certain CSS properties)\n\t\t\tif ( type === \"number\" && !jQuery.cssNumber[ origName ] ) {\n\t\t\t\tvalue += \"px\";\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !(\"set\" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {\n\t\t\t\tstyle[ name ] = value;\n\t\t\t}\n\n\t\t} else {\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || jQuery.isNumeric( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n});\n\njQuery.each([ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) && elem.offsetWidth === 0 ?\n\t\t\t\t\tjQuery.swap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t}) :\n\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar styles = extra && getStyles( elem );\n\t\t\treturn setPositiveNumber( elem, value, extra ?\n\t\t\t\taugmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t) : 0\n\t\t\t);\n\t\t}\n\t};\n});\n\n// Support: Android 2.3\njQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn jQuery.swap( elem, { \"display\": \"inline-block\" },\n\t\t\t\tcurCSS, [ elem, \"marginRight\" ] );\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each({\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split(\" \") : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n});\n\njQuery.fn.extend({\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t},\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( isHidden( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t});\n\t}\n});\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || \"swing\";\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\tif ( tween.elem[ tween.prop ] != null &&\n\t\t\t\t(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE9\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t}\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back Compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trfxnum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" ),\n\trrun = /queueHooks$/,\n\tanimationPrefilters = [ defaultPrefilter ],\n\ttweeners = {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value ),\n\t\t\t\ttarget = tween.cur(),\n\t\t\t\tparts = rfxnum.exec( value ),\n\t\t\t\tunit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t\t\t// Starting value computation is required for potential unit mismatches\n\t\t\t\tstart = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +target ) &&\n\t\t\t\t\trfxnum.exec( jQuery.css( tween.elem, prop ) ),\n\t\t\t\tscale = 1,\n\t\t\t\tmaxIterations = 20;\n\n\t\t\tif ( start && start[ 3 ] !== unit ) {\n\t\t\t\t// Trust units reported by jQuery.css\n\t\t\t\tunit = unit || start[ 3 ];\n\n\t\t\t\t// Make sure we update the tween properties later on\n\t\t\t\tparts = parts || [];\n\n\t\t\t\t// Iteratively approximate from a nonzero starting point\n\t\t\t\tstart = +target || 1;\n\n\t\t\t\tdo {\n\t\t\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\t\t\tscale = scale || \".5\";\n\n\t\t\t\t\t// Adjust and apply\n\t\t\t\t\tstart = start / scale;\n\t\t\t\t\tjQuery.style( tween.elem, prop, start + unit );\n\n\t\t\t\t// Update scale, tolerating zero or NaN from tween.cur(),\n\t\t\t\t// break the loop if scale is unchanged or perfect, or if we've just had enough\n\t\t\t\t} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );\n\t\t\t}\n\n\t\t\t// Update tween properties\n\t\t\tif ( parts ) {\n\t\t\t\tstart = tween.start = +start || +target || 0;\n\t\t\t\ttween.unit = unit;\n\t\t\t\t// If a +=/-= token was provided, we're doing a relative animation\n\t\t\t\ttween.end = parts[ 1 ] ?\n\t\t\t\t\tstart + ( parts[ 1 ] + 1 ) * parts[ 2 ] :\n\t\t\t\t\t+parts[ 2 ];\n\t\t\t}\n\n\t\t\treturn tween;\n\t\t} ]\n\t};\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\tsetTimeout(function() {\n\t\tfxNow = undefined;\n\t});\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4 ; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( tweeners[ prop ] || [] ).concat( tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( (tween = collection[ index ].call( animation, prop, value )) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\t/* jshint validthis: true */\n\tvar prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHidden( elem ),\n\t\tdataShow = data_priv.get( elem, \"fxshow\" );\n\n\t// Handle queue: false promises\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always(function() {\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always(function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t// Height/width overflow pass\n\tif ( elem.nodeType === 1 && ( \"height\" in props || \"width\" in props ) ) {\n\t\t// Make sure that nothing sneaks out\n\t\t// Record all 3 overflow attributes because IE9-10 do not\n\t\t// change the overflow attribute when overflowX and\n\t\t// overflowY are set to the same value\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Set display property to inline-block for height/width\n\t\t// animations on inline elements that are having width/height animated\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\n\t\t// Test default display if display is currently \"none\"\n\t\tcheckDisplay = display === \"none\" ?\n\t\t\tdata_priv.get( elem, \"olddisplay\" ) || defaultDisplay( elem.nodeName ) : display;\n\n\t\tif ( checkDisplay === \"inline\" && jQuery.css( elem, \"float\" ) === \"none\" ) {\n\t\t\tstyle.display = \"inline-block\";\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always(function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t});\n\t}\n\n\t// show/hide pass\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.exec( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\n\t\t// Any non-fx value stops us from restoring the original display value\n\t\t} else {\n\t\t\tdisplay = undefined;\n\t\t}\n\t}\n\n\tif ( !jQuery.isEmptyObject( orig ) ) {\n\t\tif ( dataShow ) {\n\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\thidden = dataShow.hidden;\n\t\t\t}\n\t\t} else {\n\t\t\tdataShow = data_priv.access( elem, \"fxshow\", {} );\n\t\t}\n\n\t\t// Store state if its toggle - enables .stop().toggle() to \"reverse\"\n\t\tif ( toggle ) {\n\t\t\tdataShow.hidden = !hidden;\n\t\t}\n\t\tif ( hidden ) {\n\t\t\tjQuery( elem ).show();\n\t\t} else {\n\t\t\tanim.done(function() {\n\t\t\t\tjQuery( elem ).hide();\n\t\t\t});\n\t\t}\n\t\tanim.done(function() {\n\t\t\tvar prop;\n\n\t\t\tdata_priv.remove( elem, \"fxshow\" );\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t}\n\t\t});\n\t\tfor ( prop in orig ) {\n\t\t\ttween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\n\t\t\tif ( !( prop in dataShow ) ) {\n\t\t\t\tdataShow[ prop ] = tween.start;\n\t\t\t\tif ( hidden ) {\n\t\t\t\t\ttween.end = tween.start;\n\t\t\t\t\ttween.start = prop === \"width\" || prop === \"height\" ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t// If this is a noop like .hide().hide(), restore an overwritten display value\n\t} else if ( (display === \"none\" ? defaultDisplay( elem.nodeName ) : display) === \"inline\" ) {\n\t\tstyle.display = display;\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = animationPrefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t}),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\t\t\t\t// Support: Android 2.3\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ]);\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise({\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, { specialEasing: {} }, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length ; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length ; index++ ) {\n\t\tresult = animationPrefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t})\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.split(\" \");\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length ; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\ttweeners[ prop ] = tweeners[ prop ] || [];\n\t\t\ttweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tanimationPrefilters.unshift( callback );\n\t\t} else {\n\t\t\tanimationPrefilters.push( callback );\n\t\t}\n\t}\n});\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\topt.duration = jQuery.fx.off ? 0 : typeof opt.duration === \"number\" ? opt.duration :\n\t\topt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend({\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHidden ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate({ opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || data_priv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = data_priv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t});\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each(function() {\n\t\t\tvar index,\n\t\t\t\tdata = data_priv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t});\n\t}\n});\n\njQuery.each([ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n});\n\n// Generate shortcuts for custom animations\njQuery.each({\n\tslideDown: genFx(\"show\"),\n\tslideUp: genFx(\"hide\"),\n\tslideToggle: genFx(\"toggle\"),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n});\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\n\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tclearInterval( timerId );\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t});\n};\n\n\n(function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: iOS<=5.1, Android<=4.2+\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE<=11+\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: Android<=2.3\n\t// Options inside disabled selects are incorrectly marked as disabled\n\tselect.disabled = true;\n\tsupport.optDisabled = !opt.disabled;\n\n\t// Support: IE<=11+\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n})();\n\n\nvar nodeHook, boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend({\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tattr: function( elem, name, value ) {\n\t\tvar hooks, ret,\n\t\t\tnType = elem.nodeType;\n\n\t\t// don't get/set attributes on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === strundefined ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// All attributes are lowercase\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\tname = name.toLowerCase();\n\t\t\thooks = jQuery.attrHooks[ name ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\n\t\t\t} else if ( hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {\n\t\t\t\treturn ret;\n\n\t\t\t} else {\n\t\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t} else if ( hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ) {\n\t\t\treturn ret;\n\n\t\t} else {\n\t\t\tret = jQuery.find.attr( elem, name );\n\n\t\t\t// Non-existent attributes return null, we normalize to undefined\n\t\t\treturn ret == null ?\n\t\t\t\tundefined :\n\t\t\t\tret;\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name, propName,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( (name = attrNames[i++]) ) {\n\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\n\t\t\t\t// Boolean attributes get special treatment (#10870)\n\t\t\t\tif ( jQuery.expr.match.bool.test( name ) ) {\n\t\t\t\t\t// Set corresponding property to false\n\t\t\t\t\telem[ propName ] = false;\n\t\t\t\t}\n\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle;\n\t\tif ( !isXML ) {\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ name ];\n\t\t\tattrHandle[ name ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tname.toLowerCase() :\n\t\t\t\tnull;\n\t\t\tattrHandle[ name ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n});\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i;\n\njQuery.fn.extend({\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each(function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t},\n\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks, notxml,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( !elem || nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotxml = nType !== 1 || !jQuery.isXMLDoc( elem );\n\n\t\tif ( notxml ) {\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\treturn hooks && \"set\" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?\n\t\t\t\tret :\n\t\t\t\t( elem[ name ] = value );\n\n\t\t} else {\n\t\t\treturn hooks && \"get\" in hooks && (ret = hooks.get( elem, name )) !== null ?\n\t\t\t\tret :\n\t\t\t\telem[ name ];\n\t\t}\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\t\t\t\treturn elem.hasAttribute( \"tabindex\" ) || rfocusable.test( elem.nodeName ) || elem.href ?\n\t\t\t\t\telem.tabIndex :\n\t\t\t\t\t-1;\n\t\t\t}\n\t\t}\n\t}\n});\n\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\njQuery.each([\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n});\n\n\n\n\nvar rclass = /[\\t\\r\\n\\f]/g;\n\njQuery.fn.extend({\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( proceed ) {\n\t\t\t// The disjunction here is for better compressibility (see removeClass)\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\" \"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, clazz, j, finalValue,\n\t\t\tproceed = arguments.length === 0 || typeof value === \"string\" && value,\n\t\t\ti = 0,\n\t\t\tlen = this.length;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, this.className ) );\n\t\t\t});\n\t\t}\n\t\tif ( proceed ) {\n\t\t\tclasses = ( value || \"\" ).match( rnotwhite ) || [];\n\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\telem = this[ i ];\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( elem.className ?\n\t\t\t\t\t( \" \" + elem.className + \" \" ).replace( rclass, \" \" ) :\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( (clazz = classes[j++]) ) {\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) >= 0 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = value ? jQuery.trim( cur ) : \"\";\n\t\t\t\t\tif ( elem.className !== finalValue ) {\n\t\t\t\t\t\telem.className = finalValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tif ( type === \"string\" ) {\n\t\t\t\t// Toggle individual class names\n\t\t\t\tvar className,\n\t\t\t\t\ti = 0,\n\t\t\t\t\tself = jQuery( this ),\n\t\t\t\t\tclassNames = value.match( rnotwhite ) || [];\n\n\t\t\t\twhile ( (className = classNames[ i++ ]) ) {\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( type === strundefined || type === \"boolean\" ) {\n\t\t\t\tif ( this.className ) {\n\t\t\t\t\t// store className if set\n\t\t\t\t\tdata_priv.set( this, \"__className__\", this.className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tthis.className = this.className || value === false ? \"\" : data_priv.get( this, \"__className__\" ) || \"\";\n\t\t\t}\n\t\t});\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className = \" \" + selector + \" \",\n\t\t\ti = 0,\n\t\t\tl = this.length;\n\t\tfor ( ; i < l; i++ ) {\n\t\t\tif ( this[i].nodeType === 1 && (\" \" + this[i].className + \" \").replace(rclass, \" \").indexOf( className ) >= 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n});\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend({\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[0];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks && \"get\" in hooks && (ret = hooks.get( elem, \"value\" )) !== undefined ) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\t\t\t\t\t// Handle most common string cases\n\t\t\t\t\tret.replace(rreturn, \"\") :\n\t\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each(function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !(\"set\" in hooks) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t});\n\t}\n});\n\njQuery.extend({\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\t\t\t\t\t// Support: IE10-11+\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\tjQuery.trim( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\" || index < 0,\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// IE6-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t( support.optDisabled ? !option.disabled : option.getAttribute( \"disabled\" ) === null ) &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\t\t\t\t\tif ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n});\n\n// Radios and checkboxes getter/setter\njQuery.each([ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\n\t\t};\n\t}\n});\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\njQuery.each( (\"blur focus focusin focusout load resize scroll unload click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup error contextmenu\").split(\" \"), function( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n});\n\njQuery.fn.extend({\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t},\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ? this.off( selector, \"**\" ) : this.off( types, selector || \"**\", fn );\n\t}\n});\n\n\nvar nonce = jQuery.now();\n\nvar rquery = (/\\?/);\n\n\n\n// Support: Android 2.3\n// Workaround failure to string-cast null input\njQuery.parseJSON = function( data ) {\n\treturn JSON.parse( data + \"\" );\n};\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, tmp;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE9\n\ttry {\n\t\ttmp = new DOMParser();\n\t\txml = tmp.parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\trurl = /^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Document location\n\tajaxLocation = window.location.href,\n\n\t// Segment location into parts\n\tajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( (dataType = dataTypes[i++]) ) {\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[0] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t(structure[ dataType ] = structure[ dataType ] || []).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t});\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[0] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s[ \"throws\" ] ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn { state: \"parsererror\", error: conv ? e : \"No conversion from \" + prev + \" to \" + current };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend({\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: ajaxLocation,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /xml/,\n\t\t\thtml: /html/,\n\t\t\tjson: /json/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": jQuery.parseJSON,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\t\t\t// Cross-domain detection vars\n\t\t\tparts,\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\t\t\t// Loop variable\n\t\t\ti,\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks(\"once memory\"),\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\t\t\t// The jqXHR state\n\t\t\tstate = 0,\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( state === 2 ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( (match = rheaders.exec( responseHeadersString )) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[1].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn state === 2 ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tvar lname = name.toLowerCase();\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\tname = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( !state ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\t// Lazy-add the new callback in a way that preserves old ones\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR ).complete = completeDeferred.add;\n\t\tjqXHR.success = jqXHR.done;\n\t\tjqXHR.error = jqXHR.fail;\n\n\t\t// Remove hash character (#7531: and string promotion)\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || ajaxLocation ) + \"\" ).replace( rhash, \"\" )\n\t\t\t.replace( rprotocol, ajaxLocParts[ 1 ] + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = jQuery.trim( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when we have a protocol:host:port mismatch\n\t\tif ( s.crossDomain == null ) {\n\t\t\tparts = rurl.exec( s.url.toLowerCase() );\n\t\t\ts.crossDomain = !!( parts &&\n\t\t\t\t( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||\n\t\t\t\t\t( parts[ 3 ] || ( parts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) !==\n\t\t\t\t\t\t( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === \"http:\" ? \"80\" : \"443\" ) ) )\n\t\t\t);\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( state === 2 ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger(\"ajaxStart\");\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\tcacheURL = s.url;\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL = ( s.url += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data );\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\ts.url = rts.test( cacheURL ) ?\n\n\t\t\t\t\t// If there is already a '_' parameter, set its value\n\t\t\t\t\tcacheURL.replace( rts, \"$1_=\" + nonce++ ) :\n\n\t\t\t\t\t// Otherwise add one to the end\n\t\t\t\t\tcacheURL + ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + nonce++;\n\t\t\t}\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tfor ( i in { success: 1, error: 1, complete: 1 } ) {\n\t\t\tjqXHR[ i ]( s[ i ] );\n\t\t}\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = setTimeout(function() {\n\t\t\t\t\tjqXHR.abort(\"timeout\");\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tstate = 1;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Propagate exception as error if not done\n\t\t\t\tif ( state < 2 ) {\n\t\t\t\t\tdone( -1, e );\n\t\t\t\t// Simply rethrow otherwise\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Called once\n\t\t\tif ( state === 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// State is \"done\" now\n\t\t\tstate = 2;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\tclearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"Last-Modified\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader(\"etag\");\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger(\"ajaxStop\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n});\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\treturn jQuery.ajax({\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t});\n\t};\n});\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax({\n\t\turl: url,\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t});\n};\n\n\njQuery.fn.extend({\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapAll( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\tif ( this[ 0 ] ) {\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map(function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t}).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each(function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call(this, i) );\n\t\t\t});\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t});\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each(function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );\n\t\t});\n\t},\n\n\tunwrap: function() {\n\t\treturn this.parent().each(function() {\n\t\t\tif ( !jQuery.nodeName( this, \"body\" ) ) {\n\t\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t\t}\n\t\t}).end();\n\t}\n});\n\n\njQuery.expr.filters.hidden = function( elem ) {\n\t// Support: Opera <= 12.12\n\t// Opera reports offsetWidths and offsetHeights less than zero on some elements\n\treturn elem.offsetWidth <= 0 && elem.offsetHeight <= 0;\n};\njQuery.expr.filters.visible = function( elem ) {\n\treturn !jQuery.expr.filters.hidden( elem );\n};\n\n\n\n\nvar r20 = /%20/g,\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams( prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add );\n\t\t\t}\n\t\t});\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, value ) {\n\t\t\t// If value is a function, invoke it and return its value\n\t\t\tvalue = jQuery.isFunction( value ) ? value() : ( value == null ? \"\" : value );\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" + encodeURIComponent( value );\n\t\t};\n\n\t// Set traditional to true for jQuery <= 1.3.2 behavior.\n\tif ( traditional === undefined ) {\n\t\ttraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t});\n\n\t} else {\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" ).replace( r20, \"+\" );\n};\n\njQuery.fn.extend({\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map(function() {\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t})\n\t\t.filter(function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t})\n\t\t.map(function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ) {\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t}) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t}).get();\n\t}\n});\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new XMLHttpRequest();\n\t} catch( e ) {}\n};\n\nvar xhrId = 0,\n\txhrCallbacks = {},\n\txhrSuccessStatus = {\n\t\t// file protocol always yields status code 0, assume 200\n\t\t0: 200,\n\t\t// Support: IE9\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\n// Support: IE9\n// Open requests must be manually aborted on unload (#5280)\n// See https://support.microsoft.com/kb/2856746 for more info\nif ( window.attachEvent ) {\n\twindow.attachEvent( \"onunload\", function() {\n\t\tfor ( var key in xhrCallbacks ) {\n\t\t\txhrCallbacks[ key ]();\n\t\t}\n\t});\n}\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport(function( options ) {\n\tvar callback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr(),\n\t\t\t\t\tid = ++xhrId;\n\n\t\t\t\txhr.open( options.type, options.url, options.async, options.username, options.password );\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[\"X-Requested-With\"] ) {\n\t\t\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tdelete xhrCallbacks[ id ];\n\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t// file: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\t\t\t\t\t\t\t\t\t// Support: IE9\n\t\t\t\t\t\t\t\t\t// Accessing binary-data responseText throws an exception\n\t\t\t\t\t\t\t\t\t// (#11426)\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText === \"string\" ? {\n\t\t\t\t\t\t\t\t\t\ttext: xhr.responseText\n\t\t\t\t\t\t\t\t\t} : undefined,\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\txhr.onerror = callback(\"error\");\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = xhrCallbacks[ id ] = callback(\"abort\");\n\n\t\t\t\ttry {\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\n// Install script dataType\njQuery.ajaxSetup({\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /(?:java|ecma)script/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n});\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n});\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery(\"<script>\").prop({\n\t\t\t\t\tasync: true,\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t}).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup({\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n});\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" && !( s.contentType || \"\" ).indexOf(\"application/x-www-form-urlencoded\") && rjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[\"script json\"] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always(function() {\n\t\t\t// Restore preexisting value\n\t\t\twindow[ callbackName ] = overwritten;\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\t\t\t\t// make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t});\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n});\n\n\n\n\n// data: string of html\n// context (optional): If specified, the fragment will be created in this context, defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\tcontext = context || document;\n\n\tvar parsed = rsingleTag.exec( data ),\n\t\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[1] ) ];\n\t}\n\n\tparsed = jQuery.buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n// Keep a copy of the old load method\nvar _load = jQuery.fn.load;\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tif ( typeof url !== \"string\" && _load ) {\n\t\treturn _load.apply( this, arguments );\n\t}\n\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf(\" \");\n\n\tif ( off >= 0 ) {\n\t\tselector = jQuery.trim( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax({\n\t\t\turl: url,\n\n\t\t\t// if \"type\" variable is undefined, then \"GET\" method will be used\n\t\t\ttype: type,\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t}).done(function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery(\"<div>\").append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t}).complete( callback && function( jqXHR, status ) {\n\t\t\tself.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t});\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [ \"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\" ], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n});\n\n\n\n\njQuery.expr.filters.animated = function( elem ) {\n\treturn jQuery.grep(jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t}).length;\n};\n\n\n\n\nvar docElem = window.document.documentElement;\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf(\"auto\") > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\t\t\toptions = options.call( elem, i, curOffset );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend({\n\toffset: function( options ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each(function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t});\n\t\t}\n\n\t\tvar docElem, win,\n\t\t\telem = this[ 0 ],\n\t\t\tbox = { top: 0, left: 0 },\n\t\t\tdoc = elem && elem.ownerDocument;\n\n\t\tif ( !doc ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocElem = doc.documentElement;\n\n\t\t// Make sure it's not a disconnected DOM node\n\t\tif ( !jQuery.contains( docElem, elem ) ) {\n\t\t\treturn box;\n\t\t}\n\n\t\t// Support: BlackBerry 5, iOS 3 (original iPhone)\n\t\t// If we don't have gBCR, just use 0,0 rather than error\n\t\tif ( typeof elem.getBoundingClientRect !== strundefined ) {\n\t\t\tbox = elem.getBoundingClientRect();\n\t\t}\n\t\twin = getWindow( doc );\n\t\treturn {\n\t\t\ttop: box.top + win.pageYOffset - docElem.clientTop,\n\t\t\tleft: box.left + win.pageXOffset - docElem.clientLeft\n\t\t};\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset.top += jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true );\n\t\t\tparentOffset.left += jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true );\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\toffsetParent: function() {\n\t\treturn this.map(function() {\n\t\t\tvar offsetParent = this.offsetParent || docElem;\n\n\t\t\twhile ( offsetParent && ( !jQuery.nodeName( offsetParent, \"html\" ) && jQuery.css( offsetParent, \"position\" ) === \"static\" ) ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || docElem;\n\t\t});\n\t}\n});\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : window.pageXOffset,\n\t\t\t\t\ttop ? val : window.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length, null );\n\t};\n});\n\n// Support: Safari<7+, Chrome<37+\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n});\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name }, function( defaultExtra, funcName ) {\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\t\t\t\t\t// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there\n\t\t\t\t\t// isn't a whole lot we can do. See pull request at this URL for discussion:\n\t\t\t\t\t// https://github.com/jquery/jquery/pull/764\n\t\t\t\t\treturn elem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable, null );\n\t\t};\n\t});\n});\n\n\n// The number of elements contained in the matched element set\njQuery.fn.size = function() {\n\treturn this.length;\n};\n\njQuery.fn.andSelf = jQuery.fn.addBack;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t});\n}\n\n\n\n\nvar\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( typeof noGlobal === strundefined ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n\n}));\n",
    "/*\n Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com\n (c) 2010-2013, Vladimir Agafonkin\n (c) 2010-2011, CloudMade\n*/\n(function (window, document, undefined) {\r\nvar oldL = window.L,\r\n    L = {};\r\n\r\nL.version = '0.7.2';\r\n\r\n// define Leaflet for Node module pattern loaders, including Browserify\r\nif (typeof module === 'object' && typeof module.exports === 'object') {\r\n\tmodule.exports = L;\r\n\r\n// define Leaflet as an AMD module\r\n} else if (typeof define === 'function' && define.amd) {\r\n\tdefine(L);\r\n}\r\n\r\n// define Leaflet as a global L variable, saving the original L to restore later if needed\r\n\r\nL.noConflict = function () {\r\n\twindow.L = oldL;\r\n\treturn this;\r\n};\r\n\r\nwindow.L = L;\r\n\n\n/*\r\n * L.Util contains various utility functions used throughout Leaflet code.\r\n */\r\n\r\nL.Util = {\r\n\textend: function (dest) { // (Object[, Object, ...]) ->\r\n\t\tvar sources = Array.prototype.slice.call(arguments, 1),\r\n\t\t    i, j, len, src;\r\n\r\n\t\tfor (j = 0, len = sources.length; j < len; j++) {\r\n\t\t\tsrc = sources[j] || {};\r\n\t\t\tfor (i in src) {\r\n\t\t\t\tif (src.hasOwnProperty(i)) {\r\n\t\t\t\t\tdest[i] = src[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dest;\r\n\t},\r\n\r\n\tbind: function (fn, obj) { // (Function, Object) -> Function\r\n\t\tvar args = arguments.length > 2 ? Array.prototype.slice.call(arguments, 2) : null;\r\n\t\treturn function () {\r\n\t\t\treturn fn.apply(obj, args || arguments);\r\n\t\t};\r\n\t},\r\n\r\n\tstamp: (function () {\r\n\t\tvar lastId = 0,\r\n\t\t    key = '_leaflet_id';\r\n\t\treturn function (obj) {\r\n\t\t\tobj[key] = obj[key] || ++lastId;\r\n\t\t\treturn obj[key];\r\n\t\t};\r\n\t}()),\r\n\r\n\tinvokeEach: function (obj, method, context) {\r\n\t\tvar i, args;\r\n\r\n\t\tif (typeof obj === 'object') {\r\n\t\t\targs = Array.prototype.slice.call(arguments, 3);\r\n\r\n\t\t\tfor (i in obj) {\r\n\t\t\t\tmethod.apply(context, [i, obj[i]].concat(args));\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\tlimitExecByInterval: function (fn, time, context) {\r\n\t\tvar lock, execOnUnlock;\r\n\r\n\t\treturn function wrapperFn() {\r\n\t\t\tvar args = arguments;\r\n\r\n\t\t\tif (lock) {\r\n\t\t\t\texecOnUnlock = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlock = true;\r\n\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tlock = false;\r\n\r\n\t\t\t\tif (execOnUnlock) {\r\n\t\t\t\t\twrapperFn.apply(context, args);\r\n\t\t\t\t\texecOnUnlock = false;\r\n\t\t\t\t}\r\n\t\t\t}, time);\r\n\r\n\t\t\tfn.apply(context, args);\r\n\t\t};\r\n\t},\r\n\r\n\tfalseFn: function () {\r\n\t\treturn false;\r\n\t},\r\n\r\n\tformatNum: function (num, digits) {\r\n\t\tvar pow = Math.pow(10, digits || 5);\r\n\t\treturn Math.round(num * pow) / pow;\r\n\t},\r\n\r\n\ttrim: function (str) {\r\n\t\treturn str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n\t},\r\n\r\n\tsplitWords: function (str) {\r\n\t\treturn L.Util.trim(str).split(/\\s+/);\r\n\t},\r\n\r\n\tsetOptions: function (obj, options) {\r\n\t\tobj.options = L.extend({}, obj.options, options);\r\n\t\treturn obj.options;\r\n\t},\r\n\r\n\tgetParamString: function (obj, existingUrl, uppercase) {\r\n\t\tvar params = [];\r\n\t\tfor (var i in obj) {\r\n\t\t\tparams.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\r\n\t\t}\r\n\t\treturn ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\r\n\t},\r\n\ttemplate: function (str, data) {\r\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\r\n\t\t\tvar value = data[key];\r\n\t\t\tif (value === undefined) {\r\n\t\t\t\tthrow new Error('No value provided for variable ' + str);\r\n\t\t\t} else if (typeof value === 'function') {\r\n\t\t\t\tvalue = value(data);\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t});\r\n\t},\r\n\r\n\tisArray: Array.isArray || function (obj) {\r\n\t\treturn (Object.prototype.toString.call(obj) === '[object Array]');\r\n\t},\r\n\r\n\temptyImageUrl: 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\r\n};\r\n\r\n(function () {\r\n\r\n\t// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\r\n\tfunction getPrefixed(name) {\r\n\t\tvar i, fn,\r\n\t\t    prefixes = ['webkit', 'moz', 'o', 'ms'];\r\n\r\n\t\tfor (i = 0; i < prefixes.length && !fn; i++) {\r\n\t\t\tfn = window[prefixes[i] + name];\r\n\t\t}\r\n\r\n\t\treturn fn;\r\n\t}\r\n\r\n\tvar lastTime = 0;\r\n\r\n\tfunction timeoutDefer(fn) {\r\n\t\tvar time = +new Date(),\r\n\t\t    timeToCall = Math.max(0, 16 - (time - lastTime));\r\n\r\n\t\tlastTime = time + timeToCall;\r\n\t\treturn window.setTimeout(fn, timeToCall);\r\n\t}\r\n\r\n\tvar requestFn = window.requestAnimationFrame ||\r\n\t        getPrefixed('RequestAnimationFrame') || timeoutDefer;\r\n\r\n\tvar cancelFn = window.cancelAnimationFrame ||\r\n\t        getPrefixed('CancelAnimationFrame') ||\r\n\t        getPrefixed('CancelRequestAnimationFrame') ||\r\n\t        function (id) { window.clearTimeout(id); };\r\n\r\n\r\n\tL.Util.requestAnimFrame = function (fn, context, immediate, element) {\r\n\t\tfn = L.bind(fn, context);\r\n\r\n\t\tif (immediate && requestFn === timeoutDefer) {\r\n\t\t\tfn();\r\n\t\t} else {\r\n\t\t\treturn requestFn.call(window, fn, element);\r\n\t\t}\r\n\t};\r\n\r\n\tL.Util.cancelAnimFrame = function (id) {\r\n\t\tif (id) {\r\n\t\t\tcancelFn.call(window, id);\r\n\t\t}\r\n\t};\r\n\r\n}());\r\n\r\n// shortcuts for most used utility functions\r\nL.extend = L.Util.extend;\r\nL.bind = L.Util.bind;\r\nL.stamp = L.Util.stamp;\r\nL.setOptions = L.Util.setOptions;\r\n\n\n/*\r\n * L.Class powers the OOP facilities of the library.\r\n * Thanks to John Resig and Dean Edwards for inspiration!\r\n */\r\n\r\nL.Class = function () {};\r\n\r\nL.Class.extend = function (props) {\r\n\r\n\t// extended class with the new prototype\r\n\tvar NewClass = function () {\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tif (this._initHooks) {\r\n\t\t\tthis.callInitHooks();\r\n\t\t}\r\n\t};\r\n\r\n\t// instantiate class without calling constructor\r\n\tvar F = function () {};\r\n\tF.prototype = this.prototype;\r\n\r\n\tvar proto = new F();\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t//inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tL.extend(NewClass, props.statics);\r\n\t\tdelete props.statics;\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tL.Util.extend.apply(null, [proto].concat(props.includes));\r\n\t\tdelete props.includes;\r\n\t}\r\n\r\n\t// merge options\r\n\tif (props.options && proto.options) {\r\n\t\tprops.options = L.extend({}, proto.options, props.options);\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tL.extend(proto, props);\r\n\r\n\tproto._initHooks = [];\r\n\r\n\tvar parent = this;\r\n\t// jshint camelcase: false\r\n\tNewClass.__super__ = parent.prototype;\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parent.prototype.callInitHooks) {\r\n\t\t\tparent.prototype.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// method for adding properties to prototype\r\nL.Class.include = function (props) {\r\n\tL.extend(this.prototype, props);\r\n};\r\n\r\n// merge new default options to the Class\r\nL.Class.mergeOptions = function (options) {\r\n\tL.extend(this.prototype.options, options);\r\n};\r\n\r\n// add a constructor hook\r\nL.Class.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n};\r\n\n\n/*\r\n * L.Mixin.Events is used to add custom events functionality to Leaflet classes.\r\n */\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\nL.Mixin = {};\r\n\r\nL.Mixin.Events = {\r\n\r\n\taddEventListener: function (types, fn, context) { // (String, Function[, Object]) or (Object[, Object])\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (L.Util.invokeEach(types, this.addEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar events = this[eventsKey] = this[eventsKey] || {},\r\n\t\t    contextId = context && context !== this && L.stamp(context),\r\n\t\t    i, len, event, type, indexKey, indexLenKey, typeIndex;\r\n\r\n\t\t// types can be a string of space-separated words\r\n\t\ttypes = L.Util.splitWords(types);\r\n\r\n\t\tfor (i = 0, len = types.length; i < len; i++) {\r\n\t\t\tevent = {\r\n\t\t\t\taction: fn,\r\n\t\t\t\tcontext: context || this\r\n\t\t\t};\r\n\t\t\ttype = types[i];\r\n\r\n\t\t\tif (contextId) {\r\n\t\t\t\t// store listeners of a particular context in a separate hash (if it has an id)\r\n\t\t\t\t// gives a major performance boost when removing thousands of map layers\r\n\r\n\t\t\t\tindexKey = type + '_idx';\r\n\t\t\t\tindexLenKey = indexKey + '_len';\r\n\r\n\t\t\t\ttypeIndex = events[indexKey] = events[indexKey] || {};\r\n\r\n\t\t\t\tif (!typeIndex[contextId]) {\r\n\t\t\t\t\ttypeIndex[contextId] = [];\r\n\r\n\t\t\t\t\t// keep track of the number of keys in the index to quickly check if it's empty\r\n\t\t\t\t\tevents[indexLenKey] = (events[indexLenKey] || 0) + 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttypeIndex[contextId].push(event);\r\n\r\n\r\n\t\t\t} else {\r\n\t\t\t\tevents[type] = events[type] || [];\r\n\t\t\t\tevents[type].push(event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasEventListeners: function (type) { // (String) -> Boolean\r\n\t\tvar events = this[eventsKey];\r\n\t\treturn !!events && ((type in events && events[type].length > 0) ||\r\n\t\t                    (type + '_idx' in events && events[type + '_idx_len'] > 0));\r\n\t},\r\n\r\n\tremoveEventListener: function (types, fn, context) { // ([String, Function, Object]) or (Object[, Object])\r\n\r\n\t\tif (!this[eventsKey]) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif (!types) {\r\n\t\t\treturn this.clearAllEventListeners();\r\n\t\t}\r\n\r\n\t\tif (L.Util.invokeEach(types, this.removeEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar events = this[eventsKey],\r\n\t\t    contextId = context && context !== this && L.stamp(context),\r\n\t\t    i, len, type, listeners, j, indexKey, indexLenKey, typeIndex, removed;\r\n\r\n\t\ttypes = L.Util.splitWords(types);\r\n\r\n\t\tfor (i = 0, len = types.length; i < len; i++) {\r\n\t\t\ttype = types[i];\r\n\t\t\tindexKey = type + '_idx';\r\n\t\t\tindexLenKey = indexKey + '_len';\r\n\r\n\t\t\ttypeIndex = events[indexKey];\r\n\r\n\t\t\tif (!fn) {\r\n\t\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\t\tdelete events[type];\r\n\t\t\t\tdelete events[indexKey];\r\n\t\t\t\tdelete events[indexLenKey];\r\n\r\n\t\t\t} else {\r\n\t\t\t\tlisteners = contextId && typeIndex ? typeIndex[contextId] : events[type];\r\n\r\n\t\t\t\tif (listeners) {\r\n\t\t\t\t\tfor (j = listeners.length - 1; j >= 0; j--) {\r\n\t\t\t\t\t\tif ((listeners[j].action === fn) && (!context || (listeners[j].context === context))) {\r\n\t\t\t\t\t\t\tremoved = listeners.splice(j, 1);\r\n\t\t\t\t\t\t\t// set the old action to a no-op, because it is possible\r\n\t\t\t\t\t\t\t// that the listener is being iterated over as part of a dispatch\r\n\t\t\t\t\t\t\tremoved[0].action = L.Util.falseFn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (context && typeIndex && (listeners.length === 0)) {\r\n\t\t\t\t\t\tdelete typeIndex[contextId];\r\n\t\t\t\t\t\tevents[indexLenKey]--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclearAllEventListeners: function () {\r\n\t\tdelete this[eventsKey];\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfireEvent: function (type, data) { // (String[, Object])\r\n\t\tif (!this.hasEventListeners(type)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar event = L.Util.extend({}, data, { type: type, target: this });\r\n\r\n\t\tvar events = this[eventsKey],\r\n\t\t    listeners, i, len, typeIndex, contextId;\r\n\r\n\t\tif (events[type]) {\r\n\t\t\t// make sure adding/removing listeners inside other listeners won't cause infinite loop\r\n\t\t\tlisteners = events[type].slice();\r\n\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// fire event for the context-indexed listeners as well\r\n\t\ttypeIndex = events[type + '_idx'];\r\n\r\n\t\tfor (contextId in typeIndex) {\r\n\t\t\tlisteners = typeIndex[contextId].slice();\r\n\r\n\t\t\tif (listeners) {\r\n\t\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tlisteners[i].action.call(listeners[i].context, event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddOneTimeEventListener: function (types, fn, context) {\r\n\r\n\t\tif (L.Util.invokeEach(types, this.addOneTimeEventListener, this, fn, context)) { return this; }\r\n\r\n\t\tvar handler = L.bind(function () {\r\n\t\t\tthis\r\n\t\t\t    .removeEventListener(types, fn, context)\r\n\t\t\t    .removeEventListener(types, handler, context);\r\n\t\t}, this);\r\n\r\n\t\treturn this\r\n\t\t    .addEventListener(types, fn, context)\r\n\t\t    .addEventListener(types, handler, context);\r\n\t}\r\n};\r\n\r\nL.Mixin.Events.on = L.Mixin.Events.addEventListener;\r\nL.Mixin.Events.off = L.Mixin.Events.removeEventListener;\r\nL.Mixin.Events.once = L.Mixin.Events.addOneTimeEventListener;\r\nL.Mixin.Events.fire = L.Mixin.Events.fireEvent;\r\n\n\n/*\r\n * L.Browser handles different browser and feature detections for internal Leaflet use.\r\n */\r\n\r\n(function () {\r\n\r\n\tvar ie = 'ActiveXObject' in window,\r\n\t\tielt9 = ie && !document.addEventListener,\r\n\r\n\t    // terrible browser detection to work around Safari / iOS / Android browser bugs\r\n\t    ua = navigator.userAgent.toLowerCase(),\r\n\t    webkit = ua.indexOf('webkit') !== -1,\r\n\t    chrome = ua.indexOf('chrome') !== -1,\r\n\t    phantomjs = ua.indexOf('phantom') !== -1,\r\n\t    android = ua.indexOf('android') !== -1,\r\n\t    android23 = ua.search('android [23]') !== -1,\r\n\t\tgecko = ua.indexOf('gecko') !== -1,\r\n\r\n\t    mobile = typeof orientation !== undefined + '',\r\n\t    msPointer = window.navigator && window.navigator.msPointerEnabled &&\r\n\t              window.navigator.msMaxTouchPoints && !window.PointerEvent,\r\n\t\tpointer = (window.PointerEvent && window.navigator.pointerEnabled && window.navigator.maxTouchPoints) ||\r\n\t\t\t\t  msPointer,\r\n\t    retina = ('devicePixelRatio' in window && window.devicePixelRatio > 1) ||\r\n\t             ('matchMedia' in window && window.matchMedia('(min-resolution:144dpi)') &&\r\n\t              window.matchMedia('(min-resolution:144dpi)').matches),\r\n\r\n\t    doc = document.documentElement,\r\n\t    ie3d = ie && ('transition' in doc.style),\r\n\t    webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23,\r\n\t    gecko3d = 'MozPerspective' in doc.style,\r\n\t    opera3d = 'OTransition' in doc.style,\r\n\t    any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d || opera3d) && !phantomjs;\r\n\r\n\r\n\t// PhantomJS has 'ontouchstart' in document.documentElement, but doesn't actually support touch.\r\n\t// https://github.com/Leaflet/Leaflet/pull/1434#issuecomment-13843151\r\n\r\n\tvar touch = !window.L_NO_TOUCH && !phantomjs && (function () {\r\n\r\n\t\tvar startName = 'ontouchstart';\r\n\r\n\t\t// IE10+ (We simulate these into touch* events in L.DomEvent and L.DomEvent.Pointer) or WebKit, etc.\r\n\t\tif (pointer || (startName in doc)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Firefox/Gecko\r\n\t\tvar div = document.createElement('div'),\r\n\t\t    supported = false;\r\n\r\n\t\tif (!div.setAttribute) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdiv.setAttribute(startName, 'return;');\r\n\r\n\t\tif (typeof div[startName] === 'function') {\r\n\t\t\tsupported = true;\r\n\t\t}\r\n\r\n\t\tdiv.removeAttribute(startName);\r\n\t\tdiv = null;\r\n\r\n\t\treturn supported;\r\n\t}());\r\n\r\n\r\n\tL.Browser = {\r\n\t\tie: ie,\r\n\t\tielt9: ielt9,\r\n\t\twebkit: webkit,\r\n\t\tgecko: gecko && !webkit && !window.opera && !ie,\r\n\r\n\t\tandroid: android,\r\n\t\tandroid23: android23,\r\n\r\n\t\tchrome: chrome,\r\n\r\n\t\tie3d: ie3d,\r\n\t\twebkit3d: webkit3d,\r\n\t\tgecko3d: gecko3d,\r\n\t\topera3d: opera3d,\r\n\t\tany3d: any3d,\r\n\r\n\t\tmobile: mobile,\r\n\t\tmobileWebkit: mobile && webkit,\r\n\t\tmobileWebkit3d: mobile && webkit3d,\r\n\t\tmobileOpera: mobile && window.opera,\r\n\r\n\t\ttouch: touch,\r\n\t\tmsPointer: msPointer,\r\n\t\tpointer: pointer,\r\n\r\n\t\tretina: retina\r\n\t};\r\n\r\n}());\r\n\n\n/*\r\n * L.Point represents a point with x and y coordinates.\r\n */\r\n\r\nL.Point = function (/*Number*/ x, /*Number*/ y, /*Boolean*/ round) {\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\tthis.y = (round ? Math.round(y) : y);\r\n};\r\n\r\nL.Point.prototype = {\r\n\r\n\tclone: function () {\r\n\t\treturn new L.Point(this.x, this.y);\r\n\t},\r\n\r\n\t// non-destructive, returns a new point\r\n\tadd: function (point) {\r\n\t\treturn this.clone()._add(L.point(point));\r\n\t},\r\n\r\n\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t_add: function (point) {\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(L.point(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\tequals: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\tcontains: function (point) {\r\n\t\tpoint = L.point(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        L.Util.formatNum(this.x) + ', ' +\r\n\t\t        L.Util.formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\nL.point = function (x, y, round) {\r\n\tif (x instanceof L.Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (L.Util.isArray(x)) {\r\n\t\treturn new L.Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\treturn new L.Point(x, y, round);\r\n};\r\n\n\n/*\r\n * L.Bounds represents a rectangular area on the screen in pixel coordinates.\r\n */\r\n\r\nL.Bounds = function (a, b) { //(Point, Point) or Point[]\r\n\tif (!a) { return; }\r\n\r\n\tvar points = b ? [a, b] : a;\r\n\r\n\tfor (var i = 0, len = points.length; i < len; i++) {\r\n\t\tthis.extend(points[i]);\r\n\t}\r\n};\r\n\r\nL.Bounds.prototype = {\r\n\t// extend the bounds to contain the given point\r\n\textend: function (point) { // (Point)\r\n\t\tpoint = L.point(point);\r\n\r\n\t\tif (!this.min && !this.max) {\r\n\t\t\tthis.min = point.clone();\r\n\t\t\tthis.max = point.clone();\r\n\t\t} else {\r\n\t\t\tthis.min.x = Math.min(point.x, this.min.x);\r\n\t\t\tthis.max.x = Math.max(point.x, this.max.x);\r\n\t\t\tthis.min.y = Math.min(point.y, this.min.y);\r\n\t\t\tthis.max.y = Math.max(point.y, this.max.y);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetCenter: function (round) { // (Boolean) -> Point\r\n\t\treturn new L.Point(\r\n\t\t        (this.min.x + this.max.x) / 2,\r\n\t\t        (this.min.y + this.max.y) / 2, round);\r\n\t},\r\n\r\n\tgetBottomLeft: function () { // -> Point\r\n\t\treturn new L.Point(this.min.x, this.max.y);\r\n\t},\r\n\r\n\tgetTopRight: function () { // -> Point\r\n\t\treturn new L.Point(this.max.x, this.min.y);\r\n\t},\r\n\r\n\tgetSize: function () {\r\n\t\treturn this.max.subtract(this.min);\r\n\t},\r\n\r\n\tcontains: function (obj) { // (Bounds) or (Point) -> Boolean\r\n\t\tvar min, max;\r\n\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.Point) {\r\n\t\t\tobj = L.point(obj);\r\n\t\t} else {\r\n\t\t\tobj = L.bounds(obj);\r\n\t\t}\r\n\r\n\t\tif (obj instanceof L.Bounds) {\r\n\t\t\tmin = obj.min;\r\n\t\t\tmax = obj.max;\r\n\t\t} else {\r\n\t\t\tmin = max = obj;\r\n\t\t}\r\n\r\n\t\treturn (min.x >= this.min.x) &&\r\n\t\t       (max.x <= this.max.x) &&\r\n\t\t       (min.y >= this.min.y) &&\r\n\t\t       (max.y <= this.max.y);\r\n\t},\r\n\r\n\tintersects: function (bounds) { // (Bounds) -> Boolean\r\n\t\tbounds = L.bounds(bounds);\r\n\r\n\t\tvar min = this.min,\r\n\t\t    max = this.max,\r\n\t\t    min2 = bounds.min,\r\n\t\t    max2 = bounds.max,\r\n\t\t    xIntersects = (max2.x >= min.x) && (min2.x <= max.x),\r\n\t\t    yIntersects = (max2.y >= min.y) && (min2.y <= max.y);\r\n\r\n\t\treturn xIntersects && yIntersects;\r\n\t},\r\n\r\n\tisValid: function () {\r\n\t\treturn !!(this.min && this.max);\r\n\t}\r\n};\r\n\r\nL.bounds = function (a, b) { // (Bounds) or (Point, Point) or (Point[])\r\n\tif (!a || a instanceof L.Bounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new L.Bounds(a, b);\r\n};\r\n\n\n/*\r\n * L.Transformation is an utility class to perform simple point transformations through a 2d-matrix.\r\n */\r\n\r\nL.Transformation = function (a, b, c, d) {\r\n\tthis._a = a;\r\n\tthis._b = b;\r\n\tthis._c = c;\r\n\tthis._d = d;\r\n};\r\n\r\nL.Transformation.prototype = {\r\n\ttransform: function (point, scale) { // (Point, Number) -> Point\r\n\t\treturn this._transform(point.clone(), scale);\r\n\t},\r\n\r\n\t// destructive transform (faster)\r\n\t_transform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\tpoint.x = scale * (this._a * point.x + this._b);\r\n\t\tpoint.y = scale * (this._c * point.y + this._d);\r\n\t\treturn point;\r\n\t},\r\n\r\n\tuntransform: function (point, scale) {\r\n\t\tscale = scale || 1;\r\n\t\treturn new L.Point(\r\n\t\t        (point.x / scale - this._b) / this._a,\r\n\t\t        (point.y / scale - this._d) / this._c);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.DomUtil contains various utility functions for working with DOM.\r\n */\r\n\r\nL.DomUtil = {\r\n\tget: function (id) {\r\n\t\treturn (typeof id === 'string' ? document.getElementById(id) : id);\r\n\t},\r\n\r\n\tgetStyle: function (el, style) {\r\n\r\n\t\tvar value = el.style[style];\r\n\r\n\t\tif (!value && el.currentStyle) {\r\n\t\t\tvalue = el.currentStyle[style];\r\n\t\t}\r\n\r\n\t\tif ((!value || value === 'auto') && document.defaultView) {\r\n\t\t\tvar css = document.defaultView.getComputedStyle(el, null);\r\n\t\t\tvalue = css ? css[style] : null;\r\n\t\t}\r\n\r\n\t\treturn value === 'auto' ? null : value;\r\n\t},\r\n\r\n\tgetViewportOffset: function (element) {\r\n\r\n\t\tvar top = 0,\r\n\t\t    left = 0,\r\n\t\t    el = element,\r\n\t\t    docBody = document.body,\r\n\t\t    docEl = document.documentElement,\r\n\t\t    pos;\r\n\r\n\t\tdo {\r\n\t\t\ttop  += el.offsetTop  || 0;\r\n\t\t\tleft += el.offsetLeft || 0;\r\n\r\n\t\t\t//add borders\r\n\t\t\ttop += parseInt(L.DomUtil.getStyle(el, 'borderTopWidth'), 10) || 0;\r\n\t\t\tleft += parseInt(L.DomUtil.getStyle(el, 'borderLeftWidth'), 10) || 0;\r\n\r\n\t\t\tpos = L.DomUtil.getStyle(el, 'position');\r\n\r\n\t\t\tif (el.offsetParent === docBody && pos === 'absolute') { break; }\r\n\r\n\t\t\tif (pos === 'fixed') {\r\n\t\t\t\ttop  += docBody.scrollTop  || docEl.scrollTop  || 0;\r\n\t\t\t\tleft += docBody.scrollLeft || docEl.scrollLeft || 0;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (pos === 'relative' && !el.offsetLeft) {\r\n\t\t\t\tvar width = L.DomUtil.getStyle(el, 'width'),\r\n\t\t\t\t    maxWidth = L.DomUtil.getStyle(el, 'max-width'),\r\n\t\t\t\t    r = el.getBoundingClientRect();\r\n\r\n\t\t\t\tif (width !== 'none' || maxWidth !== 'none') {\r\n\t\t\t\t\tleft += r.left + el.clientLeft;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//calculate full y offset since we're breaking out of the loop\r\n\t\t\t\ttop += r.top + (docBody.scrollTop  || docEl.scrollTop  || 0);\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tel = el.offsetParent;\r\n\r\n\t\t} while (el);\r\n\r\n\t\tel = element;\r\n\r\n\t\tdo {\r\n\t\t\tif (el === docBody) { break; }\r\n\r\n\t\t\ttop  -= el.scrollTop  || 0;\r\n\t\t\tleft -= el.scrollLeft || 0;\r\n\r\n\t\t\tel = el.parentNode;\r\n\t\t} while (el);\r\n\r\n\t\treturn new L.Point(left, top);\r\n\t},\r\n\r\n\tdocumentIsLtr: function () {\r\n\t\tif (!L.DomUtil._docIsLtrCached) {\r\n\t\t\tL.DomUtil._docIsLtrCached = true;\r\n\t\t\tL.DomUtil._docIsLtr = L.DomUtil.getStyle(document.body, 'direction') === 'ltr';\r\n\t\t}\r\n\t\treturn L.DomUtil._docIsLtr;\r\n\t},\r\n\r\n\tcreate: function (tagName, className, container) {\r\n\r\n\t\tvar el = document.createElement(tagName);\r\n\t\tel.className = className;\r\n\r\n\t\tif (container) {\r\n\t\t\tcontainer.appendChild(el);\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t},\r\n\r\n\thasClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\treturn el.classList.contains(name);\r\n\t\t}\r\n\t\tvar className = L.DomUtil._getClass(el);\r\n\t\treturn className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\r\n\t},\r\n\r\n\taddClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\tvar classes = L.Util.splitWords(name);\r\n\t\t\tfor (var i = 0, len = classes.length; i < len; i++) {\r\n\t\t\t\tel.classList.add(classes[i]);\r\n\t\t\t}\r\n\t\t} else if (!L.DomUtil.hasClass(el, name)) {\r\n\t\t\tvar className = L.DomUtil._getClass(el);\r\n\t\t\tL.DomUtil._setClass(el, (className ? className + ' ' : '') + name);\r\n\t\t}\r\n\t},\r\n\r\n\tremoveClass: function (el, name) {\r\n\t\tif (el.classList !== undefined) {\r\n\t\t\tel.classList.remove(name);\r\n\t\t} else {\r\n\t\t\tL.DomUtil._setClass(el, L.Util.trim((' ' + L.DomUtil._getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\r\n\t\t}\r\n\t},\r\n\r\n\t_setClass: function (el, name) {\r\n\t\tif (el.className.baseVal === undefined) {\r\n\t\t\tel.className = name;\r\n\t\t} else {\r\n\t\t\t// in case of SVG element\r\n\t\t\tel.className.baseVal = name;\r\n\t\t}\r\n\t},\r\n\r\n\t_getClass: function (el) {\r\n\t\treturn el.className.baseVal === undefined ? el.className : el.className.baseVal;\r\n\t},\r\n\r\n\tsetOpacity: function (el, value) {\r\n\r\n\t\tif ('opacity' in el.style) {\r\n\t\t\tel.style.opacity = value;\r\n\r\n\t\t} else if ('filter' in el.style) {\r\n\r\n\t\t\tvar filter = false,\r\n\t\t\t    filterName = 'DXImageTransform.Microsoft.Alpha';\r\n\r\n\t\t\t// filters collection throws an error if we try to retrieve a filter that doesn't exist\r\n\t\t\ttry {\r\n\t\t\t\tfilter = el.filters.item(filterName);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// don't set opacity to 1 if we haven't already set an opacity,\r\n\t\t\t\t// it isn't needed and breaks transparent pngs.\r\n\t\t\t\tif (value === 1) { return; }\r\n\t\t\t}\r\n\r\n\t\t\tvalue = Math.round(value * 100);\r\n\r\n\t\t\tif (filter) {\r\n\t\t\t\tfilter.Enabled = (value !== 100);\r\n\t\t\t\tfilter.Opacity = value;\r\n\t\t\t} else {\r\n\t\t\t\tel.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttestProp: function (props) {\r\n\r\n\t\tvar style = document.documentElement.style;\r\n\r\n\t\tfor (var i = 0; i < props.length; i++) {\r\n\t\t\tif (props[i] in style) {\r\n\t\t\t\treturn props[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tgetTranslateString: function (point) {\r\n\t\t// on WebKit browsers (Chrome/Safari/iOS Safari/Android) using translate3d instead of translate\r\n\t\t// makes animation smoother as it ensures HW accel is used. Firefox 13 doesn't care\r\n\t\t// (same speed either way), Opera 12 doesn't support translate3d\r\n\r\n\t\tvar is3d = L.Browser.webkit3d,\r\n\t\t    open = 'translate' + (is3d ? '3d' : '') + '(',\r\n\t\t    close = (is3d ? ',0' : '') + ')';\r\n\r\n\t\treturn open + point.x + 'px,' + point.y + 'px' + close;\r\n\t},\r\n\r\n\tgetScaleString: function (scale, origin) {\r\n\r\n\t\tvar preTranslateStr = L.DomUtil.getTranslateString(origin.add(origin.multiplyBy(-1 * scale))),\r\n\t\t    scaleStr = ' scale(' + scale + ') ';\r\n\r\n\t\treturn preTranslateStr + scaleStr;\r\n\t},\r\n\r\n\tsetPosition: function (el, point, disable3D) { // (HTMLElement, Point[, Boolean])\r\n\r\n\t\t// jshint camelcase: false\r\n\t\tel._leaflet_pos = point;\r\n\r\n\t\tif (!disable3D && L.Browser.any3d) {\r\n\t\t\tel.style[L.DomUtil.TRANSFORM] =  L.DomUtil.getTranslateString(point);\r\n\t\t} else {\r\n\t\t\tel.style.left = point.x + 'px';\r\n\t\t\tel.style.top = point.y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\tgetPosition: function (el) {\r\n\t\t// this method is only used for elements previously positioned using setPosition,\r\n\t\t// so it's safe to cache the position for performance\r\n\r\n\t\t// jshint camelcase: false\r\n\t\treturn el._leaflet_pos;\r\n\t}\r\n};\r\n\r\n\r\n// prefix style property names\r\n\r\nL.DomUtil.TRANSFORM = L.DomUtil.testProp(\r\n        ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\r\n\r\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\r\n// the same for the transitionend event, in particular the Android 4.1 stock browser\r\n\r\nL.DomUtil.TRANSITION = L.DomUtil.testProp(\r\n        ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\r\n\r\nL.DomUtil.TRANSITION_END =\r\n        L.DomUtil.TRANSITION === 'webkitTransition' || L.DomUtil.TRANSITION === 'OTransition' ?\r\n        L.DomUtil.TRANSITION + 'End' : 'transitionend';\r\n\r\n(function () {\r\n    if ('onselectstart' in document) {\r\n        L.extend(L.DomUtil, {\r\n            disableTextSelection: function () {\r\n                L.DomEvent.on(window, 'selectstart', L.DomEvent.preventDefault);\r\n            },\r\n\r\n            enableTextSelection: function () {\r\n                L.DomEvent.off(window, 'selectstart', L.DomEvent.preventDefault);\r\n            }\r\n        });\r\n    } else {\r\n        var userSelectProperty = L.DomUtil.testProp(\r\n            ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\r\n\r\n        L.extend(L.DomUtil, {\r\n            disableTextSelection: function () {\r\n                if (userSelectProperty) {\r\n                    var style = document.documentElement.style;\r\n                    this._userSelect = style[userSelectProperty];\r\n                    style[userSelectProperty] = 'none';\r\n                }\r\n            },\r\n\r\n            enableTextSelection: function () {\r\n                if (userSelectProperty) {\r\n                    document.documentElement.style[userSelectProperty] = this._userSelect;\r\n                    delete this._userSelect;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\tL.extend(L.DomUtil, {\r\n\t\tdisableImageDrag: function () {\r\n\t\t\tL.DomEvent.on(window, 'dragstart', L.DomEvent.preventDefault);\r\n\t\t},\r\n\r\n\t\tenableImageDrag: function () {\r\n\t\t\tL.DomEvent.off(window, 'dragstart', L.DomEvent.preventDefault);\r\n\t\t}\r\n\t});\r\n})();\r\n\n\n/*\r\n * L.LatLng represents a geographical point with latitude and longitude coordinates.\r\n */\r\n\r\nL.LatLng = function (lat, lng, alt) { // (Number, Number, Number)\r\n\tlat = parseFloat(lat);\r\n\tlng = parseFloat(lng);\r\n\r\n\tif (isNaN(lat) || isNaN(lng)) {\r\n\t\tthrow new Error('Invalid LatLng object: (' + lat + ', ' + lng + ')');\r\n\t}\r\n\r\n\tthis.lat = lat;\r\n\tthis.lng = lng;\r\n\r\n\tif (alt !== undefined) {\r\n\t\tthis.alt = parseFloat(alt);\r\n\t}\r\n};\r\n\r\nL.extend(L.LatLng, {\r\n\tDEG_TO_RAD: Math.PI / 180,\r\n\tRAD_TO_DEG: 180 / Math.PI,\r\n\tMAX_MARGIN: 1.0E-9 // max margin of error for the \"equals\" check\r\n});\r\n\r\nL.LatLng.prototype = {\r\n\tequals: function (obj) { // (LatLng) -> Boolean\r\n\t\tif (!obj) { return false; }\r\n\r\n\t\tobj = L.latLng(obj);\r\n\r\n\t\tvar margin = Math.max(\r\n\t\t        Math.abs(this.lat - obj.lat),\r\n\t\t        Math.abs(this.lng - obj.lng));\r\n\r\n\t\treturn margin <= L.LatLng.MAX_MARGIN;\r\n\t},\r\n\r\n\ttoString: function (precision) { // (Number) -> String\r\n\t\treturn 'LatLng(' +\r\n\t\t        L.Util.formatNum(this.lat, precision) + ', ' +\r\n\t\t        L.Util.formatNum(this.lng, precision) + ')';\r\n\t},\r\n\r\n\t// Haversine distance formula, see http://en.wikipedia.org/wiki/Haversine_formula\r\n\t// TODO move to projection code, LatLng shouldn't know about Earth\r\n\tdistanceTo: function (other) { // (LatLng) -> Number\r\n\t\tother = L.latLng(other);\r\n\r\n\t\tvar R = 6378137, // earth radius in meters\r\n\t\t    d2r = L.LatLng.DEG_TO_RAD,\r\n\t\t    dLat = (other.lat - this.lat) * d2r,\r\n\t\t    dLon = (other.lng - this.lng) * d2r,\r\n\t\t    lat1 = this.lat * d2r,\r\n\t\t    lat2 = other.lat * d2r,\r\n\t\t    sin1 = Math.sin(dLat / 2),\r\n\t\t    sin2 = Math.sin(dLon / 2);\r\n\r\n\t\tvar a = sin1 * sin1 + sin2 * sin2 * Math.cos(lat1) * Math.cos(lat2);\r\n\r\n\t\treturn R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\t},\r\n\r\n\twrap: function (a, b) { // (Number, Number) -> LatLng\r\n\t\tvar lng = this.lng;\r\n\r\n\t\ta = a || -180;\r\n\t\tb = b ||  180;\r\n\r\n\t\tlng = (lng + b) % (b - a) + (lng < a || lng === b ? b : a);\r\n\r\n\t\treturn new L.LatLng(this.lat, lng);\r\n\t}\r\n};\r\n\r\nL.latLng = function (a, b) { // (LatLng) or ([Number, Number]) or (Number, Number)\r\n\tif (a instanceof L.LatLng) {\r\n\t\treturn a;\r\n\t}\r\n\tif (L.Util.isArray(a)) {\r\n\t\tif (typeof a[0] === 'number' || typeof a[0] === 'string') {\r\n\t\t\treturn new L.LatLng(a[0], a[1], a[2]);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\tif (a === undefined || a === null) {\r\n\t\treturn a;\r\n\t}\r\n\tif (typeof a === 'object' && 'lat' in a) {\r\n\t\treturn new L.LatLng(a.lat, 'lng' in a ? a.lng : a.lon);\r\n\t}\r\n\tif (b === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\treturn new L.LatLng(a, b);\r\n};\r\n\r\n\n\n/*\r\n * L.LatLngBounds represents a rectangular area on the map in geographical coordinates.\r\n */\r\n\r\nL.LatLngBounds = function (southWest, northEast) { // (LatLng, LatLng) or (LatLng[])\r\n\tif (!southWest) { return; }\r\n\r\n\tvar latlngs = northEast ? [southWest, northEast] : southWest;\r\n\r\n\tfor (var i = 0, len = latlngs.length; i < len; i++) {\r\n\t\tthis.extend(latlngs[i]);\r\n\t}\r\n};\r\n\r\nL.LatLngBounds.prototype = {\r\n\t// extend the bounds to contain the given point or bounds\r\n\textend: function (obj) { // (LatLng) or (LatLngBounds)\r\n\t\tif (!obj) { return this; }\r\n\r\n\t\tvar latLng = L.latLng(obj);\r\n\t\tif (latLng !== null) {\r\n\t\t\tobj = latLng;\r\n\t\t} else {\r\n\t\t\tobj = L.latLngBounds(obj);\r\n\t\t}\r\n\r\n\t\tif (obj instanceof L.LatLng) {\r\n\t\t\tif (!this._southWest && !this._northEast) {\r\n\t\t\t\tthis._southWest = new L.LatLng(obj.lat, obj.lng);\r\n\t\t\t\tthis._northEast = new L.LatLng(obj.lat, obj.lng);\r\n\t\t\t} else {\r\n\t\t\t\tthis._southWest.lat = Math.min(obj.lat, this._southWest.lat);\r\n\t\t\t\tthis._southWest.lng = Math.min(obj.lng, this._southWest.lng);\r\n\r\n\t\t\t\tthis._northEast.lat = Math.max(obj.lat, this._northEast.lat);\r\n\t\t\t\tthis._northEast.lng = Math.max(obj.lng, this._northEast.lng);\r\n\t\t\t}\r\n\t\t} else if (obj instanceof L.LatLngBounds) {\r\n\t\t\tthis.extend(obj._southWest);\r\n\t\t\tthis.extend(obj._northEast);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// extend the bounds by a percentage\r\n\tpad: function (bufferRatio) { // (Number) -> LatLngBounds\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    heightBuffer = Math.abs(sw.lat - ne.lat) * bufferRatio,\r\n\t\t    widthBuffer = Math.abs(sw.lng - ne.lng) * bufferRatio;\r\n\r\n\t\treturn new L.LatLngBounds(\r\n\t\t        new L.LatLng(sw.lat - heightBuffer, sw.lng - widthBuffer),\r\n\t\t        new L.LatLng(ne.lat + heightBuffer, ne.lng + widthBuffer));\r\n\t},\r\n\r\n\tgetCenter: function () { // -> LatLng\r\n\t\treturn new L.LatLng(\r\n\t\t        (this._southWest.lat + this._northEast.lat) / 2,\r\n\t\t        (this._southWest.lng + this._northEast.lng) / 2);\r\n\t},\r\n\r\n\tgetSouthWest: function () {\r\n\t\treturn this._southWest;\r\n\t},\r\n\r\n\tgetNorthEast: function () {\r\n\t\treturn this._northEast;\r\n\t},\r\n\r\n\tgetNorthWest: function () {\r\n\t\treturn new L.LatLng(this.getNorth(), this.getWest());\r\n\t},\r\n\r\n\tgetSouthEast: function () {\r\n\t\treturn new L.LatLng(this.getSouth(), this.getEast());\r\n\t},\r\n\r\n\tgetWest: function () {\r\n\t\treturn this._southWest.lng;\r\n\t},\r\n\r\n\tgetSouth: function () {\r\n\t\treturn this._southWest.lat;\r\n\t},\r\n\r\n\tgetEast: function () {\r\n\t\treturn this._northEast.lng;\r\n\t},\r\n\r\n\tgetNorth: function () {\r\n\t\treturn this._northEast.lat;\r\n\t},\r\n\r\n\tcontains: function (obj) { // (LatLngBounds) or (LatLng) -> Boolean\r\n\t\tif (typeof obj[0] === 'number' || obj instanceof L.LatLng) {\r\n\t\t\tobj = L.latLng(obj);\r\n\t\t} else {\r\n\t\t\tobj = L.latLngBounds(obj);\r\n\t\t}\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2, ne2;\r\n\r\n\t\tif (obj instanceof L.LatLngBounds) {\r\n\t\t\tsw2 = obj.getSouthWest();\r\n\t\t\tne2 = obj.getNorthEast();\r\n\t\t} else {\r\n\t\t\tsw2 = ne2 = obj;\r\n\t\t}\r\n\r\n\t\treturn (sw2.lat >= sw.lat) && (ne2.lat <= ne.lat) &&\r\n\t\t       (sw2.lng >= sw.lng) && (ne2.lng <= ne.lng);\r\n\t},\r\n\r\n\tintersects: function (bounds) { // (LatLngBounds)\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tvar sw = this._southWest,\r\n\t\t    ne = this._northEast,\r\n\t\t    sw2 = bounds.getSouthWest(),\r\n\t\t    ne2 = bounds.getNorthEast(),\r\n\r\n\t\t    latIntersects = (ne2.lat >= sw.lat) && (sw2.lat <= ne.lat),\r\n\t\t    lngIntersects = (ne2.lng >= sw.lng) && (sw2.lng <= ne.lng);\r\n\r\n\t\treturn latIntersects && lngIntersects;\r\n\t},\r\n\r\n\ttoBBoxString: function () {\r\n\t\treturn [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(',');\r\n\t},\r\n\r\n\tequals: function (bounds) { // (LatLngBounds)\r\n\t\tif (!bounds) { return false; }\r\n\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\treturn this._southWest.equals(bounds.getSouthWest()) &&\r\n\t\t       this._northEast.equals(bounds.getNorthEast());\r\n\t},\r\n\r\n\tisValid: function () {\r\n\t\treturn !!(this._southWest && this._northEast);\r\n\t}\r\n};\r\n\r\n//TODO International date line?\r\n\r\nL.latLngBounds = function (a, b) { // (LatLngBounds) or (LatLng, LatLng)\r\n\tif (!a || a instanceof L.LatLngBounds) {\r\n\t\treturn a;\r\n\t}\r\n\treturn new L.LatLngBounds(a, b);\r\n};\r\n\n\n/*\r\n * L.Projection contains various geographical projections used by CRS classes.\r\n */\r\n\r\nL.Projection = {};\r\n\n\n/*\r\n * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS used by default.\r\n */\r\n\r\nL.Projection.SphericalMercator = {\r\n\tMAX_LATITUDE: 85.0511287798,\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar d = L.LatLng.DEG_TO_RAD,\r\n\t\t    max = this.MAX_LATITUDE,\r\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n\t\t    x = latlng.lng * d,\r\n\t\t    y = lat * d;\r\n\r\n\t\ty = Math.log(Math.tan((Math.PI / 4) + (y / 2)));\r\n\r\n\t\treturn new L.Point(x, y);\r\n\t},\r\n\r\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\r\n\t\tvar d = L.LatLng.RAD_TO_DEG,\r\n\t\t    lng = point.x * d,\r\n\t\t    lat = (2 * Math.atan(Math.exp(point.y)) - (Math.PI / 2)) * d;\r\n\r\n\t\treturn new L.LatLng(lat, lng);\r\n\t}\r\n};\r\n\n\n/*\r\n * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326 and Simple.\r\n */\r\n\r\nL.Projection.LonLat = {\r\n\tproject: function (latlng) {\r\n\t\treturn new L.Point(latlng.lng, latlng.lat);\r\n\t},\r\n\r\n\tunproject: function (point) {\r\n\t\treturn new L.LatLng(point.y, point.x);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.CRS is a base object for all defined CRS (Coordinate Reference Systems) in Leaflet.\r\n */\r\n\r\nL.CRS = {\r\n\tlatLngToPoint: function (latlng, zoom) { // (LatLng, Number) -> Point\r\n\t\tvar projectedPoint = this.projection.project(latlng),\r\n\t\t    scale = this.scale(zoom);\r\n\r\n\t\treturn this.transformation._transform(projectedPoint, scale);\r\n\t},\r\n\r\n\tpointToLatLng: function (point, zoom) { // (Point, Number[, Boolean]) -> LatLng\r\n\t\tvar scale = this.scale(zoom),\r\n\t\t    untransformedPoint = this.transformation.untransform(point, scale);\r\n\r\n\t\treturn this.projection.unproject(untransformedPoint);\r\n\t},\r\n\r\n\tproject: function (latlng) {\r\n\t\treturn this.projection.project(latlng);\r\n\t},\r\n\r\n\tscale: function (zoom) {\r\n\t\treturn 256 * Math.pow(2, zoom);\r\n\t},\r\n\r\n\tgetSize: function (zoom) {\r\n\t\tvar s = this.scale(zoom);\r\n\t\treturn L.point(s, s);\r\n\t}\r\n};\r\n\n\n/*\n * A simple CRS that can be used for flat non-Earth maps like panoramas or game maps.\n */\n\nL.CRS.Simple = L.extend({}, L.CRS, {\n\tprojection: L.Projection.LonLat,\n\ttransformation: new L.Transformation(1, 0, -1, 0),\n\n\tscale: function (zoom) {\n\t\treturn Math.pow(2, zoom);\n\t}\n});\n\n\n/*\r\n * L.CRS.EPSG3857 (Spherical Mercator) is the most common CRS for web mapping\r\n * and is used by Leaflet by default.\r\n */\r\n\r\nL.CRS.EPSG3857 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:3857',\r\n\r\n\tprojection: L.Projection.SphericalMercator,\r\n\ttransformation: new L.Transformation(0.5 / Math.PI, 0.5, -0.5 / Math.PI, 0.5),\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar projectedPoint = this.projection.project(latlng),\r\n\t\t    earthRadius = 6378137;\r\n\t\treturn projectedPoint.multiplyBy(earthRadius);\r\n\t}\r\n});\r\n\r\nL.CRS.EPSG900913 = L.extend({}, L.CRS.EPSG3857, {\r\n\tcode: 'EPSG:900913'\r\n});\r\n\n\n/*\r\n * L.CRS.EPSG4326 is a CRS popular among advanced GIS specialists.\r\n */\r\n\r\nL.CRS.EPSG4326 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:4326',\r\n\r\n\tprojection: L.Projection.LonLat,\r\n\ttransformation: new L.Transformation(1 / 360, 0.5, -1 / 360, 0.5)\r\n});\r\n\n\n/*\r\n * L.Map is the central class of the API - it is used to create a map.\r\n */\r\n\r\nL.Map = L.Class.extend({\r\n\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tcrs: L.CRS.EPSG3857,\r\n\r\n\t\t/*\r\n\t\tcenter: LatLng,\r\n\t\tzoom: Number,\r\n\t\tlayers: Array,\r\n\t\t*/\r\n\r\n\t\tfadeAnimation: L.DomUtil.TRANSITION && !L.Browser.android23,\r\n\t\ttrackResize: true,\r\n\t\tmarkerZoomAnimation: L.DomUtil.TRANSITION && L.Browser.any3d\r\n\t},\r\n\r\n\tinitialize: function (id, options) { // (HTMLElement or String, Object)\r\n\t\toptions = L.setOptions(this, options);\r\n\r\n\r\n\t\tthis._initContainer(id);\r\n\t\tthis._initLayout();\r\n\r\n\t\t// hack for https://github.com/Leaflet/Leaflet/issues/1980\r\n\t\tthis._onResize = L.bind(this._onResize, this);\r\n\r\n\t\tthis._initEvents();\r\n\r\n\t\tif (options.maxBounds) {\r\n\t\t\tthis.setMaxBounds(options.maxBounds);\r\n\t\t}\r\n\r\n\t\tif (options.center && options.zoom !== undefined) {\r\n\t\t\tthis.setView(L.latLng(options.center), options.zoom, {reset: true});\r\n\t\t}\r\n\r\n\t\tthis._handlers = [];\r\n\r\n\t\tthis._layers = {};\r\n\t\tthis._zoomBoundLayers = {};\r\n\t\tthis._tileLayersNum = 0;\r\n\r\n\t\tthis.callInitHooks();\r\n\r\n\t\tthis._addLayers(options.layers);\r\n\t},\r\n\r\n\r\n\t// public methods that modify map state\r\n\r\n\t// replaced by animation-powered implementation in Map.PanAnimation.js\r\n\tsetView: function (center, zoom) {\r\n\t\tzoom = zoom === undefined ? this.getZoom() : zoom;\r\n\t\tthis._resetView(L.latLng(center), this._limitZoom(zoom));\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetZoom: function (zoom, options) {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthis._zoom = this._limitZoom(zoom);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\treturn this.setView(this.getCenter(), zoom, {zoom: options});\r\n\t},\r\n\r\n\tzoomIn: function (delta, options) {\r\n\t\treturn this.setZoom(this._zoom + (delta || 1), options);\r\n\t},\r\n\r\n\tzoomOut: function (delta, options) {\r\n\t\treturn this.setZoom(this._zoom - (delta || 1), options);\r\n\t},\r\n\r\n\tsetZoomAround: function (latlng, zoom, options) {\r\n\t\tvar scale = this.getZoomScale(zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    containerPoint = latlng instanceof L.Point ? latlng : this.latLngToContainerPoint(latlng),\r\n\r\n\t\t    centerOffset = containerPoint.subtract(viewHalf).multiplyBy(1 - 1 / scale),\r\n\t\t    newCenter = this.containerPointToLatLng(viewHalf.add(centerOffset));\r\n\r\n\t\treturn this.setView(newCenter, zoom, {zoom: options});\r\n\t},\r\n\r\n\tfitBounds: function (bounds, options) {\r\n\r\n\t\toptions = options || {};\r\n\t\tbounds = bounds.getBounds ? bounds.getBounds() : L.latLngBounds(bounds);\r\n\r\n\t\tvar paddingTL = L.point(options.paddingTopLeft || options.padding || [0, 0]),\r\n\t\t    paddingBR = L.point(options.paddingBottomRight || options.padding || [0, 0]),\r\n\r\n\t\t    zoom = this.getBoundsZoom(bounds, false, paddingTL.add(paddingBR)),\r\n\t\t    paddingOffset = paddingBR.subtract(paddingTL).divideBy(2),\r\n\r\n\t\t    swPoint = this.project(bounds.getSouthWest(), zoom),\r\n\t\t    nePoint = this.project(bounds.getNorthEast(), zoom),\r\n\t\t    center = this.unproject(swPoint.add(nePoint).divideBy(2).add(paddingOffset), zoom);\r\n\r\n\t\tzoom = options && options.maxZoom ? Math.min(options.maxZoom, zoom) : zoom;\r\n\r\n\t\treturn this.setView(center, zoom, options);\r\n\t},\r\n\r\n\tfitWorld: function (options) {\r\n\t\treturn this.fitBounds([[-90, -180], [90, 180]], options);\r\n\t},\r\n\r\n\tpanTo: function (center, options) { // (LatLng)\r\n\t\treturn this.setView(center, this._zoom, {pan: options});\r\n\t},\r\n\r\n\tpanBy: function (offset) { // (Point)\r\n\t\t// replaced with animated panBy in Map.PanAnimation.js\r\n\t\tthis.fire('movestart');\r\n\r\n\t\tthis._rawPanBy(L.point(offset));\r\n\r\n\t\tthis.fire('move');\r\n\t\treturn this.fire('moveend');\r\n\t},\r\n\r\n\tsetMaxBounds: function (bounds) {\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tthis.options.maxBounds = bounds;\r\n\r\n\t\tif (!bounds) {\r\n\t\t\treturn this.off('moveend', this._panInsideMaxBounds, this);\r\n\t\t}\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis._panInsideMaxBounds();\r\n\t\t}\r\n\r\n\t\treturn this.on('moveend', this._panInsideMaxBounds, this);\r\n\t},\r\n\r\n\tpanInsideBounds: function (bounds, options) {\r\n\t\tvar center = this.getCenter(),\r\n\t\t\tnewCenter = this._limitCenter(center, this._zoom, bounds);\r\n\r\n\t\tif (center.equals(newCenter)) { return this; }\r\n\r\n\t\treturn this.panTo(newCenter, options);\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\t// TODO method is too big, refactor\r\n\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tif (this._layers[id]) { return this; }\r\n\r\n\t\tthis._layers[id] = layer;\r\n\r\n\t\t// TODO getMaxZoom, getMinZoom in ILayer (instead of options)\r\n\t\tif (layer.options && (!isNaN(layer.options.maxZoom) || !isNaN(layer.options.minZoom))) {\r\n\t\t\tthis._zoomBoundLayers[id] = layer;\r\n\t\t\tthis._updateZoomLevels();\r\n\t\t}\r\n\r\n\t\t// TODO looks ugly, refactor!!!\r\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\r\n\t\t\tthis._tileLayersNum++;\r\n\t\t\tthis._tileLayersToLoad++;\r\n\t\t\tlayer.on('load', this._onTileLayerLoad, this);\r\n\t\t}\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis._layerAdd(layer);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tif (!this._layers[id]) { return this; }\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tlayer.onRemove(this);\r\n\t\t}\r\n\r\n\t\tdelete this._layers[id];\r\n\r\n\t\tif (this._loaded) {\r\n\t\t\tthis.fire('layerremove', {layer: layer});\r\n\t\t}\r\n\r\n\t\tif (this._zoomBoundLayers[id]) {\r\n\t\t\tdelete this._zoomBoundLayers[id];\r\n\t\t\tthis._updateZoomLevels();\r\n\t\t}\r\n\r\n\t\t// TODO looks ugly, refactor\r\n\t\tif (this.options.zoomAnimation && L.TileLayer && (layer instanceof L.TileLayer)) {\r\n\t\t\tthis._tileLayersNum--;\r\n\t\t\tthis._tileLayersToLoad--;\r\n\t\t\tlayer.off('load', this._onTileLayerLoad, this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasLayer: function (layer) {\r\n\t\tif (!layer) { return false; }\r\n\r\n\t\treturn (L.stamp(layer) in this._layers);\r\n\t},\r\n\r\n\teachLayer: function (method, context) {\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tmethod.call(context, this._layers[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tinvalidateSize: function (options) {\r\n\t\tif (!this._loaded) { return this; }\r\n\r\n\t\toptions = L.extend({\r\n\t\t\tanimate: false,\r\n\t\t\tpan: true\r\n\t\t}, options === true ? {animate: true} : options);\r\n\r\n\t\tvar oldSize = this.getSize();\r\n\t\tthis._sizeChanged = true;\r\n\t\tthis._initialCenter = null;\r\n\r\n\t\tvar newSize = this.getSize(),\r\n\t\t    oldCenter = oldSize.divideBy(2).round(),\r\n\t\t    newCenter = newSize.divideBy(2).round(),\r\n\t\t    offset = oldCenter.subtract(newCenter);\r\n\r\n\t\tif (!offset.x && !offset.y) { return this; }\r\n\r\n\t\tif (options.animate && options.pan) {\r\n\t\t\tthis.panBy(offset);\r\n\r\n\t\t} else {\r\n\t\t\tif (options.pan) {\r\n\t\t\t\tthis._rawPanBy(offset);\r\n\t\t\t}\r\n\r\n\t\t\tthis.fire('move');\r\n\r\n\t\t\tif (options.debounceMoveend) {\r\n\t\t\t\tclearTimeout(this._sizeTimer);\r\n\t\t\t\tthis._sizeTimer = setTimeout(L.bind(this.fire, this, 'moveend'), 200);\r\n\t\t\t} else {\r\n\t\t\t\tthis.fire('moveend');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.fire('resize', {\r\n\t\t\toldSize: oldSize,\r\n\t\t\tnewSize: newSize\r\n\t\t});\r\n\t},\r\n\r\n\t// TODO handler.addTo\r\n\taddHandler: function (name, HandlerClass) {\r\n\t\tif (!HandlerClass) { return this; }\r\n\r\n\t\tvar handler = this[name] = new HandlerClass(this);\r\n\r\n\t\tthis._handlers.push(handler);\r\n\r\n\t\tif (this.options[name]) {\r\n\t\t\thandler.enable();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tif (this._loaded) {\r\n\t\t\tthis.fire('unload');\r\n\t\t}\r\n\r\n\t\tthis._initEvents('off');\r\n\r\n\t\ttry {\r\n\t\t\t// throws error in IE6-8\r\n\t\t\tdelete this._container._leaflet;\r\n\t\t} catch (e) {\r\n\t\t\tthis._container._leaflet = undefined;\r\n\t\t}\r\n\r\n\t\tthis._clearPanes();\r\n\t\tif (this._clearControlPos) {\r\n\t\t\tthis._clearControlPos();\r\n\t\t}\r\n\r\n\t\tthis._clearHandlers();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\t// public methods for getting map state\r\n\r\n\tgetCenter: function () { // (Boolean) -> LatLng\r\n\t\tthis._checkIfLoaded();\r\n\r\n\t\tif (this._initialCenter && !this._moved()) {\r\n\t\t\treturn this._initialCenter;\r\n\t\t}\r\n\t\treturn this.layerPointToLatLng(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\tgetZoom: function () {\r\n\t\treturn this._zoom;\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar bounds = this.getPixelBounds(),\r\n\t\t    sw = this.unproject(bounds.getBottomLeft()),\r\n\t\t    ne = this.unproject(bounds.getTopRight());\r\n\r\n\t\treturn new L.LatLngBounds(sw, ne);\r\n\t},\r\n\r\n\tgetMinZoom: function () {\r\n\t\treturn this.options.minZoom === undefined ?\r\n\t\t\t(this._layersMinZoom === undefined ? 0 : this._layersMinZoom) :\r\n\t\t\tthis.options.minZoom;\r\n\t},\r\n\r\n\tgetMaxZoom: function () {\r\n\t\treturn this.options.maxZoom === undefined ?\r\n\t\t\t(this._layersMaxZoom === undefined ? Infinity : this._layersMaxZoom) :\r\n\t\t\tthis.options.maxZoom;\r\n\t},\r\n\r\n\tgetBoundsZoom: function (bounds, inside, padding) { // (LatLngBounds[, Boolean, Point]) -> Number\r\n\t\tbounds = L.latLngBounds(bounds);\r\n\r\n\t\tvar zoom = this.getMinZoom() - (inside ? 1 : 0),\r\n\t\t    maxZoom = this.getMaxZoom(),\r\n\t\t    size = this.getSize(),\r\n\r\n\t\t    nw = bounds.getNorthWest(),\r\n\t\t    se = bounds.getSouthEast(),\r\n\r\n\t\t    zoomNotFound = true,\r\n\t\t    boundsSize;\r\n\r\n\t\tpadding = L.point(padding || [0, 0]);\r\n\r\n\t\tdo {\r\n\t\t\tzoom++;\r\n\t\t\tboundsSize = this.project(se, zoom).subtract(this.project(nw, zoom)).add(padding);\r\n\t\t\tzoomNotFound = !inside ? size.contains(boundsSize) : boundsSize.x < size.x || boundsSize.y < size.y;\r\n\r\n\t\t} while (zoomNotFound && zoom <= maxZoom);\r\n\r\n\t\tif (zoomNotFound && inside) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn inside ? zoom : zoom - 1;\r\n\t},\r\n\r\n\tgetSize: function () {\r\n\t\tif (!this._size || this._sizeChanged) {\r\n\t\t\tthis._size = new L.Point(\r\n\t\t\t\tthis._container.clientWidth,\r\n\t\t\t\tthis._container.clientHeight);\r\n\r\n\t\t\tthis._sizeChanged = false;\r\n\t\t}\r\n\t\treturn this._size.clone();\r\n\t},\r\n\r\n\tgetPixelBounds: function () {\r\n\t\tvar topLeftPoint = this._getTopLeftPoint();\r\n\t\treturn new L.Bounds(topLeftPoint, topLeftPoint.add(this.getSize()));\r\n\t},\r\n\r\n\tgetPixelOrigin: function () {\r\n\t\tthis._checkIfLoaded();\r\n\t\treturn this._initialTopLeftPoint;\r\n\t},\r\n\r\n\tgetPanes: function () {\r\n\t\treturn this._panes;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\r\n\t// TODO replace with universal implementation after refactoring projections\r\n\r\n\tgetZoomScale: function (toZoom) {\r\n\t\tvar crs = this.options.crs;\r\n\t\treturn crs.scale(toZoom) / crs.scale(this._zoom);\r\n\t},\r\n\r\n\tgetScaleZoom: function (scale) {\r\n\t\treturn this._zoom + (Math.log(scale) / Math.LN2);\r\n\t},\r\n\r\n\r\n\t// conversion methods\r\n\r\n\tproject: function (latlng, zoom) { // (LatLng[, Number]) -> Point\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.latLngToPoint(L.latLng(latlng), zoom);\r\n\t},\r\n\r\n\tunproject: function (point, zoom) { // (Point[, Number]) -> LatLng\r\n\t\tzoom = zoom === undefined ? this._zoom : zoom;\r\n\t\treturn this.options.crs.pointToLatLng(L.point(point), zoom);\r\n\t},\r\n\r\n\tlayerPointToLatLng: function (point) { // (Point)\r\n\t\tvar projectedPoint = L.point(point).add(this.getPixelOrigin());\r\n\t\treturn this.unproject(projectedPoint);\r\n\t},\r\n\r\n\tlatLngToLayerPoint: function (latlng) { // (LatLng)\r\n\t\tvar projectedPoint = this.project(L.latLng(latlng))._round();\r\n\t\treturn projectedPoint._subtract(this.getPixelOrigin());\r\n\t},\r\n\r\n\tcontainerPointToLayerPoint: function (point) { // (Point)\r\n\t\treturn L.point(point).subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\tlayerPointToContainerPoint: function (point) { // (Point)\r\n\t\treturn L.point(point).add(this._getMapPanePos());\r\n\t},\r\n\r\n\tcontainerPointToLatLng: function (point) {\r\n\t\tvar layerPoint = this.containerPointToLayerPoint(L.point(point));\r\n\t\treturn this.layerPointToLatLng(layerPoint);\r\n\t},\r\n\r\n\tlatLngToContainerPoint: function (latlng) {\r\n\t\treturn this.layerPointToContainerPoint(this.latLngToLayerPoint(L.latLng(latlng)));\r\n\t},\r\n\r\n\tmouseEventToContainerPoint: function (e) { // (MouseEvent)\r\n\t\treturn L.DomEvent.getMousePosition(e, this._container);\r\n\t},\r\n\r\n\tmouseEventToLayerPoint: function (e) { // (MouseEvent)\r\n\t\treturn this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e));\r\n\t},\r\n\r\n\tmouseEventToLatLng: function (e) { // (MouseEvent)\r\n\t\treturn this.layerPointToLatLng(this.mouseEventToLayerPoint(e));\r\n\t},\r\n\r\n\r\n\t// map initialization methods\r\n\r\n\t_initContainer: function (id) {\r\n\t\tvar container = this._container = L.DomUtil.get(id);\r\n\r\n\t\tif (!container) {\r\n\t\t\tthrow new Error('Map container not found.');\r\n\t\t} else if (container._leaflet) {\r\n\t\t\tthrow new Error('Map container is already initialized.');\r\n\t\t}\r\n\r\n\t\tcontainer._leaflet = true;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar container = this._container;\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-container' +\r\n\t\t\t(L.Browser.touch ? ' leaflet-touch' : '') +\r\n\t\t\t(L.Browser.retina ? ' leaflet-retina' : '') +\r\n\t\t\t(L.Browser.ielt9 ? ' leaflet-oldie' : '') +\r\n\t\t\t(this.options.fadeAnimation ? ' leaflet-fade-anim' : ''));\r\n\r\n\t\tvar position = L.DomUtil.getStyle(container, 'position');\r\n\r\n\t\tif (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {\r\n\t\t\tcontainer.style.position = 'relative';\r\n\t\t}\r\n\r\n\t\tthis._initPanes();\r\n\r\n\t\tif (this._initControlPos) {\r\n\t\t\tthis._initControlPos();\r\n\t\t}\r\n\t},\r\n\r\n\t_initPanes: function () {\r\n\t\tvar panes = this._panes = {};\r\n\r\n\t\tthis._mapPane = panes.mapPane = this._createPane('leaflet-map-pane', this._container);\r\n\r\n\t\tthis._tilePane = panes.tilePane = this._createPane('leaflet-tile-pane', this._mapPane);\r\n\t\tpanes.objectsPane = this._createPane('leaflet-objects-pane', this._mapPane);\r\n\t\tpanes.shadowPane = this._createPane('leaflet-shadow-pane');\r\n\t\tpanes.overlayPane = this._createPane('leaflet-overlay-pane');\r\n\t\tpanes.markerPane = this._createPane('leaflet-marker-pane');\r\n\t\tpanes.popupPane = this._createPane('leaflet-popup-pane');\r\n\r\n\t\tvar zoomHide = ' leaflet-zoom-hide';\r\n\r\n\t\tif (!this.options.markerZoomAnimation) {\r\n\t\t\tL.DomUtil.addClass(panes.markerPane, zoomHide);\r\n\t\t\tL.DomUtil.addClass(panes.shadowPane, zoomHide);\r\n\t\t\tL.DomUtil.addClass(panes.popupPane, zoomHide);\r\n\t\t}\r\n\t},\r\n\r\n\t_createPane: function (className, container) {\r\n\t\treturn L.DomUtil.create('div', className, container || this._panes.objectsPane);\r\n\t},\r\n\r\n\t_clearPanes: function () {\r\n\t\tthis._container.removeChild(this._mapPane);\r\n\t},\r\n\r\n\t_addLayers: function (layers) {\r\n\t\tlayers = layers ? (L.Util.isArray(layers) ? layers : [layers]) : [];\r\n\r\n\t\tfor (var i = 0, len = layers.length; i < len; i++) {\r\n\t\t\tthis.addLayer(layers[i]);\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t// private methods that modify map state\r\n\r\n\t_resetView: function (center, zoom, preserveMapOffset, afterZoomAnim) {\r\n\r\n\t\tvar zoomChanged = (this._zoom !== zoom);\r\n\r\n\t\tif (!afterZoomAnim) {\r\n\t\t\tthis.fire('movestart');\r\n\r\n\t\t\tif (zoomChanged) {\r\n\t\t\t\tthis.fire('zoomstart');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._zoom = zoom;\r\n\t\tthis._initialCenter = center;\r\n\r\n\t\tthis._initialTopLeftPoint = this._getNewTopLeftPoint(center);\r\n\r\n\t\tif (!preserveMapOffset) {\r\n\t\t\tL.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));\r\n\t\t} else {\r\n\t\t\tthis._initialTopLeftPoint._add(this._getMapPanePos());\r\n\t\t}\r\n\r\n\t\tthis._tileLayersToLoad = this._tileLayersNum;\r\n\r\n\t\tvar loading = !this._loaded;\r\n\t\tthis._loaded = true;\r\n\r\n\t\tthis.fire('viewreset', {hard: !preserveMapOffset});\r\n\r\n\t\tif (loading) {\r\n\t\t\tthis.fire('load');\r\n\t\t\tthis.eachLayer(this._layerAdd, this);\r\n\t\t}\r\n\r\n\t\tthis.fire('move');\r\n\r\n\t\tif (zoomChanged || afterZoomAnim) {\r\n\t\t\tthis.fire('zoomend');\r\n\t\t}\r\n\r\n\t\tthis.fire('moveend', {hard: !preserveMapOffset});\r\n\t},\r\n\r\n\t_rawPanBy: function (offset) {\r\n\t\tL.DomUtil.setPosition(this._mapPane, this._getMapPanePos().subtract(offset));\r\n\t},\r\n\r\n\t_getZoomSpan: function () {\r\n\t\treturn this.getMaxZoom() - this.getMinZoom();\r\n\t},\r\n\r\n\t_updateZoomLevels: function () {\r\n\t\tvar i,\r\n\t\t\tminZoom = Infinity,\r\n\t\t\tmaxZoom = -Infinity,\r\n\t\t\toldZoomSpan = this._getZoomSpan();\r\n\r\n\t\tfor (i in this._zoomBoundLayers) {\r\n\t\t\tvar layer = this._zoomBoundLayers[i];\r\n\t\t\tif (!isNaN(layer.options.minZoom)) {\r\n\t\t\t\tminZoom = Math.min(minZoom, layer.options.minZoom);\r\n\t\t\t}\r\n\t\t\tif (!isNaN(layer.options.maxZoom)) {\r\n\t\t\t\tmaxZoom = Math.max(maxZoom, layer.options.maxZoom);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (i === undefined) { // we have no tilelayers\r\n\t\t\tthis._layersMaxZoom = this._layersMinZoom = undefined;\r\n\t\t} else {\r\n\t\t\tthis._layersMaxZoom = maxZoom;\r\n\t\t\tthis._layersMinZoom = minZoom;\r\n\t\t}\r\n\r\n\t\tif (oldZoomSpan !== this._getZoomSpan()) {\r\n\t\t\tthis.fire('zoomlevelschange');\r\n\t\t}\r\n\t},\r\n\r\n\t_panInsideMaxBounds: function () {\r\n\t\tthis.panInsideBounds(this.options.maxBounds);\r\n\t},\r\n\r\n\t_checkIfLoaded: function () {\r\n\t\tif (!this._loaded) {\r\n\t\t\tthrow new Error('Set map center and zoom first.');\r\n\t\t}\r\n\t},\r\n\r\n\t// map events\r\n\r\n\t_initEvents: function (onOff) {\r\n\t\tif (!L.DomEvent) { return; }\r\n\r\n\t\tonOff = onOff || 'on';\r\n\r\n\t\tL.DomEvent[onOff](this._container, 'click', this._onMouseClick, this);\r\n\r\n\t\tvar events = ['dblclick', 'mousedown', 'mouseup', 'mouseenter',\r\n\t\t              'mouseleave', 'mousemove', 'contextmenu'],\r\n\t\t    i, len;\r\n\r\n\t\tfor (i = 0, len = events.length; i < len; i++) {\r\n\t\t\tL.DomEvent[onOff](this._container, events[i], this._fireMouseEvent, this);\r\n\t\t}\r\n\r\n\t\tif (this.options.trackResize) {\r\n\t\t\tL.DomEvent[onOff](window, 'resize', this._onResize, this);\r\n\t\t}\r\n\t},\r\n\r\n\t_onResize: function () {\r\n\t\tL.Util.cancelAnimFrame(this._resizeRequest);\r\n\t\tthis._resizeRequest = L.Util.requestAnimFrame(\r\n\t\t        function () { this.invalidateSize({debounceMoveend: true}); }, this, false, this._container);\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tif (!this._loaded || (!e._simulated &&\r\n\t\t        ((this.dragging && this.dragging.moved()) ||\r\n\t\t         (this.boxZoom  && this.boxZoom.moved()))) ||\r\n\t\t            L.DomEvent._skipped(e)) { return; }\r\n\r\n\t\tthis.fire('preclick');\r\n\t\tthis._fireMouseEvent(e);\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\t\tif (!this._loaded || L.DomEvent._skipped(e)) { return; }\r\n\r\n\t\tvar type = e.type;\r\n\r\n\t\ttype = (type === 'mouseenter' ? 'mouseover' : (type === 'mouseleave' ? 'mouseout' : type));\r\n\r\n\t\tif (!this.hasEventListeners(type)) { return; }\r\n\r\n\t\tif (type === 'contextmenu') {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\r\n\t\tvar containerPoint = this.mouseEventToContainerPoint(e),\r\n\t\t    layerPoint = this.containerPointToLayerPoint(containerPoint),\r\n\t\t    latlng = this.layerPointToLatLng(layerPoint);\r\n\r\n\t\tthis.fire(type, {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tlayerPoint: layerPoint,\r\n\t\t\tcontainerPoint: containerPoint,\r\n\t\t\toriginalEvent: e\r\n\t\t});\r\n\t},\r\n\r\n\t_onTileLayerLoad: function () {\r\n\t\tthis._tileLayersToLoad--;\r\n\t\tif (this._tileLayersNum && !this._tileLayersToLoad) {\r\n\t\t\tthis.fire('tilelayersload');\r\n\t\t}\r\n\t},\r\n\r\n\t_clearHandlers: function () {\r\n\t\tfor (var i = 0, len = this._handlers.length; i < len; i++) {\r\n\t\t\tthis._handlers[i].disable();\r\n\t\t}\r\n\t},\r\n\r\n\twhenReady: function (callback, context) {\r\n\t\tif (this._loaded) {\r\n\t\t\tcallback.call(context || this, this);\r\n\t\t} else {\r\n\t\t\tthis.on('load', callback, context);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_layerAdd: function (layer) {\r\n\t\tlayer.onAdd(this);\r\n\t\tthis.fire('layeradd', {layer: layer});\r\n\t},\r\n\r\n\r\n\t// private methods for getting map state\r\n\r\n\t_getMapPanePos: function () {\r\n\t\treturn L.DomUtil.getPosition(this._mapPane);\r\n\t},\r\n\r\n\t_moved: function () {\r\n\t\tvar pos = this._getMapPanePos();\r\n\t\treturn pos && !pos.equals([0, 0]);\r\n\t},\r\n\r\n\t_getTopLeftPoint: function () {\r\n\t\treturn this.getPixelOrigin().subtract(this._getMapPanePos());\r\n\t},\r\n\r\n\t_getNewTopLeftPoint: function (center, zoom) {\r\n\t\tvar viewHalf = this.getSize()._divideBy(2);\r\n\t\t// TODO round on display, not calculation to increase precision?\r\n\t\treturn this.project(center, zoom)._subtract(viewHalf)._round();\r\n\t},\r\n\r\n\t_latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {\r\n\t\tvar topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());\r\n\t\treturn this.project(latlng, newZoom)._subtract(topLeft);\r\n\t},\r\n\r\n\t// layer point of the current center\r\n\t_getCenterLayerPoint: function () {\r\n\t\treturn this.containerPointToLayerPoint(this.getSize()._divideBy(2));\r\n\t},\r\n\r\n\t// offset of the specified place to the current center in pixels\r\n\t_getCenterOffset: function (latlng) {\r\n\t\treturn this.latLngToLayerPoint(latlng).subtract(this._getCenterLayerPoint());\r\n\t},\r\n\r\n\t// adjust center for view to get inside bounds\r\n\t_limitCenter: function (center, zoom, bounds) {\r\n\r\n\t\tif (!bounds) { return center; }\r\n\r\n\t\tvar centerPoint = this.project(center, zoom),\r\n\t\t    viewHalf = this.getSize().divideBy(2),\r\n\t\t    viewBounds = new L.Bounds(centerPoint.subtract(viewHalf), centerPoint.add(viewHalf)),\r\n\t\t    offset = this._getBoundsOffset(viewBounds, bounds, zoom);\r\n\r\n\t\treturn this.unproject(centerPoint.add(offset), zoom);\r\n\t},\r\n\r\n\t// adjust offset for view to get inside bounds\r\n\t_limitOffset: function (offset, bounds) {\r\n\t\tif (!bounds) { return offset; }\r\n\r\n\t\tvar viewBounds = this.getPixelBounds(),\r\n\t\t    newBounds = new L.Bounds(viewBounds.min.add(offset), viewBounds.max.add(offset));\r\n\r\n\t\treturn offset.add(this._getBoundsOffset(newBounds, bounds));\r\n\t},\r\n\r\n\t// returns offset needed for pxBounds to get inside maxBounds at a specified zoom\r\n\t_getBoundsOffset: function (pxBounds, maxBounds, zoom) {\r\n\t\tvar nwOffset = this.project(maxBounds.getNorthWest(), zoom).subtract(pxBounds.min),\r\n\t\t    seOffset = this.project(maxBounds.getSouthEast(), zoom).subtract(pxBounds.max),\r\n\r\n\t\t    dx = this._rebound(nwOffset.x, -seOffset.x),\r\n\t\t    dy = this._rebound(nwOffset.y, -seOffset.y);\r\n\r\n\t\treturn new L.Point(dx, dy);\r\n\t},\r\n\r\n\t_rebound: function (left, right) {\r\n\t\treturn left + right > 0 ?\r\n\t\t\tMath.round(left - right) / 2 :\r\n\t\t\tMath.max(0, Math.ceil(left)) - Math.max(0, Math.floor(right));\r\n\t},\r\n\r\n\t_limitZoom: function (zoom) {\r\n\t\tvar min = this.getMinZoom(),\r\n\t\t    max = this.getMaxZoom();\r\n\r\n\t\treturn Math.max(min, Math.min(max, zoom));\r\n\t}\r\n});\r\n\r\nL.map = function (id, options) {\r\n\treturn new L.Map(id, options);\r\n};\r\n\n\n/*\r\n * Mercator projection that takes into account that the Earth is not a perfect sphere.\r\n * Less popular than spherical mercator; used by projections like EPSG:3395.\r\n */\r\n\r\nL.Projection.Mercator = {\r\n\tMAX_LATITUDE: 85.0840591556,\r\n\r\n\tR_MINOR: 6356752.314245179,\r\n\tR_MAJOR: 6378137,\r\n\r\n\tproject: function (latlng) { // (LatLng) -> Point\r\n\t\tvar d = L.LatLng.DEG_TO_RAD,\r\n\t\t    max = this.MAX_LATITUDE,\r\n\t\t    lat = Math.max(Math.min(max, latlng.lat), -max),\r\n\t\t    r = this.R_MAJOR,\r\n\t\t    r2 = this.R_MINOR,\r\n\t\t    x = latlng.lng * d * r,\r\n\t\t    y = lat * d,\r\n\t\t    tmp = r2 / r,\r\n\t\t    eccent = Math.sqrt(1.0 - tmp * tmp),\r\n\t\t    con = eccent * Math.sin(y);\r\n\r\n\t\tcon = Math.pow((1 - con) / (1 + con), eccent * 0.5);\r\n\r\n\t\tvar ts = Math.tan(0.5 * ((Math.PI * 0.5) - y)) / con;\r\n\t\ty = -r * Math.log(ts);\r\n\r\n\t\treturn new L.Point(x, y);\r\n\t},\r\n\r\n\tunproject: function (point) { // (Point, Boolean) -> LatLng\r\n\t\tvar d = L.LatLng.RAD_TO_DEG,\r\n\t\t    r = this.R_MAJOR,\r\n\t\t    r2 = this.R_MINOR,\r\n\t\t    lng = point.x * d / r,\r\n\t\t    tmp = r2 / r,\r\n\t\t    eccent = Math.sqrt(1 - (tmp * tmp)),\r\n\t\t    ts = Math.exp(- point.y / r),\r\n\t\t    phi = (Math.PI / 2) - 2 * Math.atan(ts),\r\n\t\t    numIter = 15,\r\n\t\t    tol = 1e-7,\r\n\t\t    i = numIter,\r\n\t\t    dphi = 0.1,\r\n\t\t    con;\r\n\r\n\t\twhile ((Math.abs(dphi) > tol) && (--i > 0)) {\r\n\t\t\tcon = eccent * Math.sin(phi);\r\n\t\t\tdphi = (Math.PI / 2) - 2 * Math.atan(ts *\r\n\t\t\t            Math.pow((1.0 - con) / (1.0 + con), 0.5 * eccent)) - phi;\r\n\t\t\tphi += dphi;\r\n\t\t}\r\n\r\n\t\treturn new L.LatLng(phi * d, lng);\r\n\t}\r\n};\r\n\n\n\r\nL.CRS.EPSG3395 = L.extend({}, L.CRS, {\r\n\tcode: 'EPSG:3395',\r\n\r\n\tprojection: L.Projection.Mercator,\r\n\r\n\ttransformation: (function () {\r\n\t\tvar m = L.Projection.Mercator,\r\n\t\t    r = m.R_MAJOR,\r\n\t\t    scale = 0.5 / (Math.PI * r);\r\n\r\n\t\treturn new L.Transformation(scale, 0.5, -scale, 0.5);\r\n\t}())\r\n});\r\n\n\n/*\r\n * L.TileLayer is used for standard xyz-numbered tile layers.\r\n */\r\n\r\nL.TileLayer = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tminZoom: 0,\r\n\t\tmaxZoom: 18,\r\n\t\ttileSize: 256,\r\n\t\tsubdomains: 'abc',\r\n\t\terrorTileUrl: '',\r\n\t\tattribution: '',\r\n\t\tzoomOffset: 0,\r\n\t\topacity: 1,\r\n\t\t/*\r\n\t\tmaxNativeZoom: null,\r\n\t\tzIndex: null,\r\n\t\ttms: false,\r\n\t\tcontinuousWorld: false,\r\n\t\tnoWrap: false,\r\n\t\tzoomReverse: false,\r\n\t\tdetectRetina: false,\r\n\t\treuseTiles: false,\r\n\t\tbounds: false,\r\n\t\t*/\r\n\t\tunloadInvisibleTiles: L.Browser.mobile,\r\n\t\tupdateWhenIdle: L.Browser.mobile\r\n\t},\r\n\r\n\tinitialize: function (url, options) {\r\n\t\toptions = L.setOptions(this, options);\r\n\r\n\t\t// detecting retina displays, adjusting tileSize and zoom levels\r\n\t\tif (options.detectRetina && L.Browser.retina && options.maxZoom > 0) {\r\n\r\n\t\t\toptions.tileSize = Math.floor(options.tileSize / 2);\r\n\t\t\toptions.zoomOffset++;\r\n\r\n\t\t\tif (options.minZoom > 0) {\r\n\t\t\t\toptions.minZoom--;\r\n\t\t\t}\r\n\t\t\tthis.options.maxZoom--;\r\n\t\t}\r\n\r\n\t\tif (options.bounds) {\r\n\t\t\toptions.bounds = L.latLngBounds(options.bounds);\r\n\t\t}\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tvar subdomains = this.options.subdomains;\r\n\r\n\t\tif (typeof subdomains === 'string') {\r\n\t\t\tthis.options.subdomains = subdomains.split('');\r\n\t\t}\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\t\tthis._animated = map._zoomAnimated;\r\n\r\n\t\t// create a container div for tiles\r\n\t\tthis._initContainer();\r\n\r\n\t\t// set up events\r\n\t\tmap.on({\r\n\t\t\t'viewreset': this._reset,\r\n\t\t\t'moveend': this._update\r\n\t\t}, this);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tmap.on({\r\n\t\t\t\t'zoomanim': this._animateZoom,\r\n\t\t\t\t'zoomend': this._endZoomAnim\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tif (!this.options.updateWhenIdle) {\r\n\t\t\tthis._limitedUpdate = L.Util.limitExecByInterval(this._update, 150, this);\r\n\t\t\tmap.on('move', this._limitedUpdate, this);\r\n\t\t}\r\n\r\n\t\tthis._reset();\r\n\t\tthis._update();\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tthis._container.parentNode.removeChild(this._container);\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this._reset,\r\n\t\t\t'moveend': this._update\r\n\t\t}, this);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tmap.off({\r\n\t\t\t\t'zoomanim': this._animateZoom,\r\n\t\t\t\t'zoomend': this._endZoomAnim\r\n\t\t\t}, this);\r\n\t\t}\r\n\r\n\t\tif (!this.options.updateWhenIdle) {\r\n\t\t\tmap.off('move', this._limitedUpdate, this);\r\n\t\t}\r\n\r\n\t\tthis._container = null;\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\tvar pane = this._map._panes.tilePane;\r\n\r\n\t\tif (this._container) {\r\n\t\t\tpane.appendChild(this._container);\r\n\t\t\tthis._setAutoZIndex(pane, Math.max);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar pane = this._map._panes.tilePane;\r\n\r\n\t\tif (this._container) {\r\n\t\t\tpane.insertBefore(this._container, pane.firstChild);\r\n\t\t\tthis._setAutoZIndex(pane, Math.min);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetAttribution: function () {\r\n\t\treturn this.options.attribution;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetZIndex: function (zIndex) {\r\n\t\tthis.options.zIndex = zIndex;\r\n\t\tthis._updateZIndex();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetUrl: function (url, noRedraw) {\r\n\t\tthis._url = url;\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._reset({hard: true});\r\n\t\t\tthis._update();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_updateZIndex: function () {\r\n\t\tif (this._container && this.options.zIndex !== undefined) {\r\n\t\t\tthis._container.style.zIndex = this.options.zIndex;\r\n\t\t}\r\n\t},\r\n\r\n\t_setAutoZIndex: function (pane, compare) {\r\n\r\n\t\tvar layers = pane.children,\r\n\t\t    edgeZIndex = -compare(Infinity, -Infinity), // -Infinity for max, Infinity for min\r\n\t\t    zIndex, i, len;\r\n\r\n\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n\r\n\t\t\tif (layers[i] !== this._container) {\r\n\t\t\t\tzIndex = parseInt(layers[i].style.zIndex, 10);\r\n\r\n\t\t\t\tif (!isNaN(zIndex)) {\r\n\t\t\t\t\tedgeZIndex = compare(edgeZIndex, zIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.options.zIndex = this._container.style.zIndex =\r\n\t\t        (isFinite(edgeZIndex) ? edgeZIndex : 0) + compare(1, -1);\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tvar i,\r\n\t\t    tiles = this._tiles;\r\n\r\n\t\tif (L.Browser.ielt9) {\r\n\t\t\tfor (i in tiles) {\r\n\t\t\t\tL.DomUtil.setOpacity(tiles[i], this.options.opacity);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tL.DomUtil.setOpacity(this._container, this.options.opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t_initContainer: function () {\r\n\t\tvar tilePane = this._map._panes.tilePane;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._container = L.DomUtil.create('div', 'leaflet-layer');\r\n\r\n\t\t\tthis._updateZIndex();\r\n\r\n\t\t\tif (this._animated) {\r\n\t\t\t\tvar className = 'leaflet-tile-container';\r\n\r\n\t\t\t\tthis._bgBuffer = L.DomUtil.create('div', className, this._container);\r\n\t\t\t\tthis._tileContainer = L.DomUtil.create('div', className, this._container);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._tileContainer = this._container;\r\n\t\t\t}\r\n\r\n\t\t\ttilePane.appendChild(this._container);\r\n\r\n\t\t\tif (this.options.opacity < 1) {\r\n\t\t\t\tthis._updateOpacity();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_reset: function (e) {\r\n\t\tfor (var key in this._tiles) {\r\n\t\t\tthis.fire('tileunload', {tile: this._tiles[key]});\r\n\t\t}\r\n\r\n\t\tthis._tiles = {};\r\n\t\tthis._tilesToLoad = 0;\r\n\r\n\t\tif (this.options.reuseTiles) {\r\n\t\t\tthis._unusedTiles = [];\r\n\t\t}\r\n\r\n\t\tthis._tileContainer.innerHTML = '';\r\n\r\n\t\tif (this._animated && e && e.hard) {\r\n\t\t\tthis._clearBgBuffer();\r\n\t\t}\r\n\r\n\t\tthis._initContainer();\r\n\t},\r\n\r\n\t_getTileSize: function () {\r\n\t\tvar map = this._map,\r\n\t\t    zoom = map.getZoom() + this.options.zoomOffset,\r\n\t\t    zoomN = this.options.maxNativeZoom,\r\n\t\t    tileSize = this.options.tileSize;\r\n\r\n\t\tif (zoomN && zoom > zoomN) {\r\n\t\t\ttileSize = Math.round(map.getZoomScale(zoom) / map.getZoomScale(zoomN) * tileSize);\r\n\t\t}\r\n\r\n\t\treturn tileSize;\r\n\t},\r\n\r\n\t_update: function () {\r\n\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    bounds = map.getPixelBounds(),\r\n\t\t    zoom = map.getZoom(),\r\n\t\t    tileSize = this._getTileSize();\r\n\r\n\t\tif (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tileBounds = L.bounds(\r\n\t\t        bounds.min.divideBy(tileSize)._floor(),\r\n\t\t        bounds.max.divideBy(tileSize)._floor());\r\n\r\n\t\tthis._addTilesFromCenterOut(tileBounds);\r\n\r\n\t\tif (this.options.unloadInvisibleTiles || this.options.reuseTiles) {\r\n\t\t\tthis._removeOtherTiles(tileBounds);\r\n\t\t}\r\n\t},\r\n\r\n\t_addTilesFromCenterOut: function (bounds) {\r\n\t\tvar queue = [],\r\n\t\t    center = bounds.getCenter();\r\n\r\n\t\tvar j, i, point;\r\n\r\n\t\tfor (j = bounds.min.y; j <= bounds.max.y; j++) {\r\n\t\t\tfor (i = bounds.min.x; i <= bounds.max.x; i++) {\r\n\t\t\t\tpoint = new L.Point(i, j);\r\n\r\n\t\t\t\tif (this._tileShouldBeLoaded(point)) {\r\n\t\t\t\t\tqueue.push(point);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar tilesToLoad = queue.length;\r\n\r\n\t\tif (tilesToLoad === 0) { return; }\r\n\r\n\t\t// load tiles in order of their distance to center\r\n\t\tqueue.sort(function (a, b) {\r\n\t\t\treturn a.distanceTo(center) - b.distanceTo(center);\r\n\t\t});\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\t// if its the first batch of tiles to load\r\n\t\tif (!this._tilesToLoad) {\r\n\t\t\tthis.fire('loading');\r\n\t\t}\r\n\r\n\t\tthis._tilesToLoad += tilesToLoad;\r\n\r\n\t\tfor (i = 0; i < tilesToLoad; i++) {\r\n\t\t\tthis._addTile(queue[i], fragment);\r\n\t\t}\r\n\r\n\t\tthis._tileContainer.appendChild(fragment);\r\n\t},\r\n\r\n\t_tileShouldBeLoaded: function (tilePoint) {\r\n\t\tif ((tilePoint.x + ':' + tilePoint.y) in this._tiles) {\r\n\t\t\treturn false; // already loaded\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (!options.continuousWorld) {\r\n\t\t\tvar limit = this._getWrapTileNum();\r\n\r\n\t\t\t// don't load if exceeds world bounds\r\n\t\t\tif ((options.noWrap && (tilePoint.x < 0 || tilePoint.x >= limit.x)) ||\r\n\t\t\t\ttilePoint.y < 0 || tilePoint.y >= limit.y) { return false; }\r\n\t\t}\r\n\r\n\t\tif (options.bounds) {\r\n\t\t\tvar tileSize = options.tileSize,\r\n\t\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\r\n\t\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\r\n\t\t\t    nw = this._map.unproject(nwPoint),\r\n\t\t\t    se = this._map.unproject(sePoint);\r\n\r\n\t\t\t// TODO temporary hack, will be removed after refactoring projections\r\n\t\t\t// https://github.com/Leaflet/Leaflet/issues/1618\r\n\t\t\tif (!options.continuousWorld && !options.noWrap) {\r\n\t\t\t\tnw = nw.wrap();\r\n\t\t\t\tse = se.wrap();\r\n\t\t\t}\r\n\r\n\t\t\tif (!options.bounds.intersects([nw, se])) { return false; }\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_removeOtherTiles: function (bounds) {\r\n\t\tvar kArr, x, y, key;\r\n\r\n\t\tfor (key in this._tiles) {\r\n\t\t\tkArr = key.split(':');\r\n\t\t\tx = parseInt(kArr[0], 10);\r\n\t\t\ty = parseInt(kArr[1], 10);\r\n\r\n\t\t\t// remove tile if it's out of bounds\r\n\t\t\tif (x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {\r\n\t\t\t\tthis._removeTile(key);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_removeTile: function (key) {\r\n\t\tvar tile = this._tiles[key];\r\n\r\n\t\tthis.fire('tileunload', {tile: tile, url: tile.src});\r\n\r\n\t\tif (this.options.reuseTiles) {\r\n\t\t\tL.DomUtil.removeClass(tile, 'leaflet-tile-loaded');\r\n\t\t\tthis._unusedTiles.push(tile);\r\n\r\n\t\t} else if (tile.parentNode === this._tileContainer) {\r\n\t\t\tthis._tileContainer.removeChild(tile);\r\n\t\t}\r\n\r\n\t\t// for https://github.com/CloudMade/Leaflet/issues/137\r\n\t\tif (!L.Browser.android) {\r\n\t\t\ttile.onload = null;\r\n\t\t\ttile.src = L.Util.emptyImageUrl;\r\n\t\t}\r\n\r\n\t\tdelete this._tiles[key];\r\n\t},\r\n\r\n\t_addTile: function (tilePoint, container) {\r\n\t\tvar tilePos = this._getTilePos(tilePoint);\r\n\r\n\t\t// get unused tile - or create a new tile\r\n\t\tvar tile = this._getTile();\r\n\r\n\t\t/*\r\n\t\tChrome 20 layouts much faster with top/left (verify with timeline, frames)\r\n\t\tAndroid 4 browser has display issues with top/left and requires transform instead\r\n\t\t(other browsers don't currently care) - see debug/hacks/jitter.html for an example\r\n\t\t*/\r\n\t\tL.DomUtil.setPosition(tile, tilePos, L.Browser.chrome);\r\n\r\n\t\tthis._tiles[tilePoint.x + ':' + tilePoint.y] = tile;\r\n\r\n\t\tthis._loadTile(tile, tilePoint);\r\n\r\n\t\tif (tile.parentNode !== this._tileContainer) {\r\n\t\t\tcontainer.appendChild(tile);\r\n\t\t}\r\n\t},\r\n\r\n\t_getZoomForUrl: function () {\r\n\r\n\t\tvar options = this.options,\r\n\t\t    zoom = this._map.getZoom();\r\n\r\n\t\tif (options.zoomReverse) {\r\n\t\t\tzoom = options.maxZoom - zoom;\r\n\t\t}\r\n\r\n\t\tzoom += options.zoomOffset;\r\n\r\n\t\treturn options.maxNativeZoom ? Math.min(zoom, options.maxNativeZoom) : zoom;\r\n\t},\r\n\r\n\t_getTilePos: function (tilePoint) {\r\n\t\tvar origin = this._map.getPixelOrigin(),\r\n\t\t    tileSize = this._getTileSize();\r\n\r\n\t\treturn tilePoint.multiplyBy(tileSize).subtract(origin);\r\n\t},\r\n\r\n\t// image-specific code (override to implement e.g. Canvas or SVG tile layer)\r\n\r\n\tgetTileUrl: function (tilePoint) {\r\n\t\treturn L.Util.template(this._url, L.extend({\r\n\t\t\ts: this._getSubdomain(tilePoint),\r\n\t\t\tz: tilePoint.z,\r\n\t\t\tx: tilePoint.x,\r\n\t\t\ty: tilePoint.y\r\n\t\t}, this.options));\r\n\t},\r\n\r\n\t_getWrapTileNum: function () {\r\n\t\tvar crs = this._map.options.crs,\r\n\t\t    size = crs.getSize(this._map.getZoom());\r\n\t\treturn size.divideBy(this._getTileSize())._floor();\r\n\t},\r\n\r\n\t_adjustTilePoint: function (tilePoint) {\r\n\r\n\t\tvar limit = this._getWrapTileNum();\r\n\r\n\t\t// wrap tile coordinates\r\n\t\tif (!this.options.continuousWorld && !this.options.noWrap) {\r\n\t\t\ttilePoint.x = ((tilePoint.x % limit.x) + limit.x) % limit.x;\r\n\t\t}\r\n\r\n\t\tif (this.options.tms) {\r\n\t\t\ttilePoint.y = limit.y - tilePoint.y - 1;\r\n\t\t}\r\n\r\n\t\ttilePoint.z = this._getZoomForUrl();\r\n\t},\r\n\r\n\t_getSubdomain: function (tilePoint) {\r\n\t\tvar index = Math.abs(tilePoint.x + tilePoint.y) % this.options.subdomains.length;\r\n\t\treturn this.options.subdomains[index];\r\n\t},\r\n\r\n\t_getTile: function () {\r\n\t\tif (this.options.reuseTiles && this._unusedTiles.length > 0) {\r\n\t\t\tvar tile = this._unusedTiles.pop();\r\n\t\t\tthis._resetTile(tile);\r\n\t\t\treturn tile;\r\n\t\t}\r\n\t\treturn this._createTile();\r\n\t},\r\n\r\n\t// Override if data stored on a tile needs to be cleaned up before reuse\r\n\t_resetTile: function (/*tile*/) {},\r\n\r\n\t_createTile: function () {\r\n\t\tvar tile = L.DomUtil.create('img', 'leaflet-tile');\r\n\t\ttile.style.width = tile.style.height = this._getTileSize() + 'px';\r\n\t\ttile.galleryimg = 'no';\r\n\r\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\r\n\r\n\t\tif (L.Browser.ielt9 && this.options.opacity !== undefined) {\r\n\t\t\tL.DomUtil.setOpacity(tile, this.options.opacity);\r\n\t\t}\r\n\t\t// without this hack, tiles disappear after zoom on Chrome for Android\r\n\t\t// https://github.com/Leaflet/Leaflet/issues/2078\r\n\t\tif (L.Browser.mobileWebkit3d) {\r\n\t\t\ttile.style.WebkitBackfaceVisibility = 'hidden';\r\n\t\t}\r\n\t\treturn tile;\r\n\t},\r\n\r\n\t_loadTile: function (tile, tilePoint) {\r\n\t\ttile._layer  = this;\r\n\t\ttile.onload  = this._tileOnLoad;\r\n\t\ttile.onerror = this._tileOnError;\r\n\r\n\t\tthis._adjustTilePoint(tilePoint);\r\n\t\ttile.src     = this.getTileUrl(tilePoint);\r\n\r\n\t\tthis.fire('tileloadstart', {\r\n\t\t\ttile: tile,\r\n\t\t\turl: tile.src\r\n\t\t});\r\n\t},\r\n\r\n\t_tileLoaded: function () {\r\n\t\tthis._tilesToLoad--;\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tL.DomUtil.addClass(this._tileContainer, 'leaflet-zoom-animated');\r\n\t\t}\r\n\r\n\t\tif (!this._tilesToLoad) {\r\n\t\t\tthis.fire('load');\r\n\r\n\t\t\tif (this._animated) {\r\n\t\t\t\t// clear scaled tiles after all new tiles are loaded (for performance)\r\n\t\t\t\tclearTimeout(this._clearBgBufferTimer);\r\n\t\t\t\tthis._clearBgBufferTimer = setTimeout(L.bind(this._clearBgBuffer, this), 500);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_tileOnLoad: function () {\r\n\t\tvar layer = this._layer;\r\n\r\n\t\t//Only if we are loading an actual image\r\n\t\tif (this.src !== L.Util.emptyImageUrl) {\r\n\t\t\tL.DomUtil.addClass(this, 'leaflet-tile-loaded');\r\n\r\n\t\t\tlayer.fire('tileload', {\r\n\t\t\t\ttile: this,\r\n\t\t\t\turl: this.src\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlayer._tileLoaded();\r\n\t},\r\n\r\n\t_tileOnError: function () {\r\n\t\tvar layer = this._layer;\r\n\r\n\t\tlayer.fire('tileerror', {\r\n\t\t\ttile: this,\r\n\t\t\turl: this.src\r\n\t\t});\r\n\r\n\t\tvar newUrl = layer.options.errorTileUrl;\r\n\t\tif (newUrl) {\r\n\t\t\tthis.src = newUrl;\r\n\t\t}\r\n\r\n\t\tlayer._tileLoaded();\r\n\t}\r\n});\r\n\r\nL.tileLayer = function (url, options) {\r\n\treturn new L.TileLayer(url, options);\r\n};\r\n\n\n/*\r\n * L.TileLayer.WMS is used for putting WMS tile layers on the map.\r\n */\r\n\r\nL.TileLayer.WMS = L.TileLayer.extend({\r\n\r\n\tdefaultWmsParams: {\r\n\t\tservice: 'WMS',\r\n\t\trequest: 'GetMap',\r\n\t\tversion: '1.1.1',\r\n\t\tlayers: '',\r\n\t\tstyles: '',\r\n\t\tformat: 'image/jpeg',\r\n\t\ttransparent: false\r\n\t},\r\n\r\n\tinitialize: function (url, options) { // (String, Object)\r\n\r\n\t\tthis._url = url;\r\n\r\n\t\tvar wmsParams = L.extend({}, this.defaultWmsParams),\r\n\t\t    tileSize = options.tileSize || this.options.tileSize;\r\n\r\n\t\tif (options.detectRetina && L.Browser.retina) {\r\n\t\t\twmsParams.width = wmsParams.height = tileSize * 2;\r\n\t\t} else {\r\n\t\t\twmsParams.width = wmsParams.height = tileSize;\r\n\t\t}\r\n\r\n\t\tfor (var i in options) {\r\n\t\t\t// all keys that are not TileLayer options go to WMS params\r\n\t\t\tif (!this.options.hasOwnProperty(i) && i !== 'crs') {\r\n\t\t\t\twmsParams[i] = options[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.wmsParams = wmsParams;\r\n\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\r\n\t\tthis._crs = this.options.crs || map.options.crs;\r\n\r\n\t\tthis._wmsVersion = parseFloat(this.wmsParams.version);\r\n\r\n\t\tvar projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\r\n\t\tthis.wmsParams[projectionKey] = this._crs.code;\r\n\r\n\t\tL.TileLayer.prototype.onAdd.call(this, map);\r\n\t},\r\n\r\n\tgetTileUrl: function (tilePoint) { // (Point, Number) -> String\r\n\r\n\t\tvar map = this._map,\r\n\t\t    tileSize = this.options.tileSize,\r\n\r\n\t\t    nwPoint = tilePoint.multiplyBy(tileSize),\r\n\t\t    sePoint = nwPoint.add([tileSize, tileSize]),\r\n\r\n\t\t    nw = this._crs.project(map.unproject(nwPoint, tilePoint.z)),\r\n\t\t    se = this._crs.project(map.unproject(sePoint, tilePoint.z)),\r\n\t\t    bbox = this._wmsVersion >= 1.3 && this._crs === L.CRS.EPSG4326 ?\r\n\t\t        [se.y, nw.x, nw.y, se.x].join(',') :\r\n\t\t        [nw.x, se.y, se.x, nw.y].join(','),\r\n\r\n\t\t    url = L.Util.template(this._url, {s: this._getSubdomain(tilePoint)});\r\n\r\n\t\treturn url + L.Util.getParamString(this.wmsParams, url, true) + '&BBOX=' + bbox;\r\n\t},\r\n\r\n\tsetParams: function (params, noRedraw) {\r\n\r\n\t\tL.extend(this.wmsParams, params);\r\n\r\n\t\tif (!noRedraw) {\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nL.tileLayer.wms = function (url, options) {\r\n\treturn new L.TileLayer.WMS(url, options);\r\n};\r\n\n\n/*\r\n * L.TileLayer.Canvas is a class that you can use as a base for creating\r\n * dynamically drawn Canvas-based tile layers.\r\n */\r\n\r\nL.TileLayer.Canvas = L.TileLayer.extend({\r\n\toptions: {\r\n\t\tasync: false\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._reset({hard: true});\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\tfor (var i in this._tiles) {\r\n\t\t\tthis._redrawTile(this._tiles[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_redrawTile: function (tile) {\r\n\t\tthis.drawTile(tile, tile._tilePoint, this._map._zoom);\r\n\t},\r\n\r\n\t_createTile: function () {\r\n\t\tvar tile = L.DomUtil.create('canvas', 'leaflet-tile');\r\n\t\ttile.width = tile.height = this.options.tileSize;\r\n\t\ttile.onselectstart = tile.onmousemove = L.Util.falseFn;\r\n\t\treturn tile;\r\n\t},\r\n\r\n\t_loadTile: function (tile, tilePoint) {\r\n\t\ttile._layer = this;\r\n\t\ttile._tilePoint = tilePoint;\r\n\r\n\t\tthis._redrawTile(tile);\r\n\r\n\t\tif (!this.options.async) {\r\n\t\t\tthis.tileDrawn(tile);\r\n\t\t}\r\n\t},\r\n\r\n\tdrawTile: function (/*tile, tilePoint*/) {\r\n\t\t// override with rendering code\r\n\t},\r\n\r\n\ttileDrawn: function (tile) {\r\n\t\tthis._tileOnLoad.call(tile);\r\n\t}\r\n});\r\n\r\n\r\nL.tileLayer.canvas = function (options) {\r\n\treturn new L.TileLayer.Canvas(options);\r\n};\r\n\n\n/*\r\n * L.ImageOverlay is used to overlay images over the map (to specific geographical bounds).\r\n */\r\n\r\nL.ImageOverlay = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\topacity: 1\r\n\t},\r\n\r\n\tinitialize: function (url, bounds, options) { // (String, LatLngBounds, Object)\r\n\t\tthis._url = url;\r\n\t\tthis._bounds = L.latLngBounds(bounds);\r\n\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._image) {\r\n\t\t\tthis._initImage();\r\n\t\t}\r\n\r\n\t\tmap._panes.overlayPane.appendChild(this._image);\r\n\r\n\t\tmap.on('viewreset', this._reset, this);\r\n\r\n\t\tif (map.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\r\n\t\tthis._reset();\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.getPanes().overlayPane.removeChild(this._image);\r\n\r\n\t\tmap.off('viewreset', this._reset, this);\r\n\r\n\t\tif (map.options.zoomAnimation) {\r\n\t\t\tmap.off('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\t\tthis._updateOpacity();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// TODO remove bringToFront/bringToBack duplication from TileLayer/Path\r\n\tbringToFront: function () {\r\n\t\tif (this._image) {\r\n\t\t\tthis._map._panes.overlayPane.appendChild(this._image);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar pane = this._map._panes.overlayPane;\r\n\t\tif (this._image) {\r\n\t\t\tpane.insertBefore(this._image, pane.firstChild);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetUrl: function (url) {\r\n\t\tthis._url = url;\r\n\t\tthis._image.src = this._url;\r\n\t},\r\n\r\n\tgetAttribution: function () {\r\n\t\treturn this.options.attribution;\r\n\t},\r\n\r\n\t_initImage: function () {\r\n\t\tthis._image = L.DomUtil.create('img', 'leaflet-image-layer');\r\n\r\n\t\tif (this._map.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-animated');\r\n\t\t} else {\r\n\t\t\tL.DomUtil.addClass(this._image, 'leaflet-zoom-hide');\r\n\t\t}\r\n\r\n\t\tthis._updateOpacity();\r\n\r\n\t\t//TODO createImage util method to remove duplication\r\n\t\tL.extend(this._image, {\r\n\t\t\tgalleryimg: 'no',\r\n\t\t\tonselectstart: L.Util.falseFn,\r\n\t\t\tonmousemove: L.Util.falseFn,\r\n\t\t\tonload: L.bind(this._onImageLoad, this),\r\n\t\t\tsrc: this._url\r\n\t\t});\r\n\t},\r\n\r\n\t_animateZoom: function (e) {\r\n\t\tvar map = this._map,\r\n\t\t    image = this._image,\r\n\t\t    scale = map.getZoomScale(e.zoom),\r\n\t\t    nw = this._bounds.getNorthWest(),\r\n\t\t    se = this._bounds.getSouthEast(),\r\n\r\n\t\t    topLeft = map._latLngToNewLayerPoint(nw, e.zoom, e.center),\r\n\t\t    size = map._latLngToNewLayerPoint(se, e.zoom, e.center)._subtract(topLeft),\r\n\t\t    origin = topLeft._add(size._multiplyBy((1 / 2) * (1 - 1 / scale)));\r\n\r\n\t\timage.style[L.DomUtil.TRANSFORM] =\r\n\t\t        L.DomUtil.getTranslateString(origin) + ' scale(' + scale + ') ';\r\n\t},\r\n\r\n\t_reset: function () {\r\n\t\tvar image   = this._image,\r\n\t\t    topLeft = this._map.latLngToLayerPoint(this._bounds.getNorthWest()),\r\n\t\t    size = this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(topLeft);\r\n\r\n\t\tL.DomUtil.setPosition(image, topLeft);\r\n\r\n\t\timage.style.width  = size.x + 'px';\r\n\t\timage.style.height = size.y + 'px';\r\n\t},\r\n\r\n\t_onImageLoad: function () {\r\n\t\tthis.fire('load');\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tL.DomUtil.setOpacity(this._image, this.options.opacity);\r\n\t}\r\n});\r\n\r\nL.imageOverlay = function (url, bounds, options) {\r\n\treturn new L.ImageOverlay(url, bounds, options);\r\n};\r\n\n\n/*\r\n * L.Icon is an image-based icon class that you can use with L.Marker for custom markers.\r\n */\r\n\r\nL.Icon = L.Class.extend({\r\n\toptions: {\r\n\t\t/*\r\n\t\ticonUrl: (String) (required)\r\n\t\ticonRetinaUrl: (String) (optional, used for retina devices if detected)\r\n\t\ticonSize: (Point) (can be set through CSS)\r\n\t\ticonAnchor: (Point) (centered by default, can be set in CSS with negative margins)\r\n\t\tpopupAnchor: (Point) (if not specified, popup opens in the anchor point)\r\n\t\tshadowUrl: (String) (no shadow by default)\r\n\t\tshadowRetinaUrl: (String) (optional, used for retina devices if detected)\r\n\t\tshadowSize: (Point)\r\n\t\tshadowAnchor: (Point)\r\n\t\t*/\r\n\t\tclassName: ''\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tcreateIcon: function (oldIcon) {\r\n\t\treturn this._createIcon('icon', oldIcon);\r\n\t},\r\n\r\n\tcreateShadow: function (oldIcon) {\r\n\t\treturn this._createIcon('shadow', oldIcon);\r\n\t},\r\n\r\n\t_createIcon: function (name, oldIcon) {\r\n\t\tvar src = this._getIconUrl(name);\r\n\r\n\t\tif (!src) {\r\n\t\t\tif (name === 'icon') {\r\n\t\t\t\tthrow new Error('iconUrl not set in Icon options (see the docs).');\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar img;\r\n\t\tif (!oldIcon || oldIcon.tagName !== 'IMG') {\r\n\t\t\timg = this._createImg(src);\r\n\t\t} else {\r\n\t\t\timg = this._createImg(src, oldIcon);\r\n\t\t}\r\n\t\tthis._setIconStyles(img, name);\r\n\r\n\t\treturn img;\r\n\t},\r\n\r\n\t_setIconStyles: function (img, name) {\r\n\t\tvar options = this.options,\r\n\t\t    size = L.point(options[name + 'Size']),\r\n\t\t    anchor;\r\n\r\n\t\tif (name === 'shadow') {\r\n\t\t\tanchor = L.point(options.shadowAnchor || options.iconAnchor);\r\n\t\t} else {\r\n\t\t\tanchor = L.point(options.iconAnchor);\r\n\t\t}\r\n\r\n\t\tif (!anchor && size) {\r\n\t\t\tanchor = size.divideBy(2, true);\r\n\t\t}\r\n\r\n\t\timg.className = 'leaflet-marker-' + name + ' ' + options.className;\r\n\r\n\t\tif (anchor) {\r\n\t\t\timg.style.marginLeft = (-anchor.x) + 'px';\r\n\t\t\timg.style.marginTop  = (-anchor.y) + 'px';\r\n\t\t}\r\n\r\n\t\tif (size) {\r\n\t\t\timg.style.width  = size.x + 'px';\r\n\t\t\timg.style.height = size.y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\t_createImg: function (src, el) {\r\n\t\tel = el || document.createElement('img');\r\n\t\tel.src = src;\r\n\t\treturn el;\r\n\t},\r\n\r\n\t_getIconUrl: function (name) {\r\n\t\tif (L.Browser.retina && this.options[name + 'RetinaUrl']) {\r\n\t\t\treturn this.options[name + 'RetinaUrl'];\r\n\t\t}\r\n\t\treturn this.options[name + 'Url'];\r\n\t}\r\n});\r\n\r\nL.icon = function (options) {\r\n\treturn new L.Icon(options);\r\n};\r\n\n\n/*\n * L.Icon.Default is the blue marker icon used by default in Leaflet.\n */\n\nL.Icon.Default = L.Icon.extend({\n\n\toptions: {\n\t\ticonSize: [25, 41],\n\t\ticonAnchor: [12, 41],\n\t\tpopupAnchor: [1, -34],\n\n\t\tshadowSize: [41, 41]\n\t},\n\n\t_getIconUrl: function (name) {\n\t\tvar key = name + 'Url';\n\n\t\tif (this.options[key]) {\n\t\t\treturn this.options[key];\n\t\t}\n\n\t\tif (L.Browser.retina && name === 'icon') {\n\t\t\tname += '-2x';\n\t\t}\n\n\t\tvar path = L.Icon.Default.imagePath;\n\n\t\tif (!path) {\n\t\t\tthrow new Error('Couldn\\'t autodetect L.Icon.Default.imagePath, set it manually.');\n\t\t}\n\n\t\treturn path + '/marker-' + name + '.png';\n\t}\n});\n\nL.Icon.Default.imagePath = (function () {\n\tvar scripts = document.getElementsByTagName('script'),\n\t    leafletRe = /[\\/^]leaflet[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;\n\n\tvar i, len, src, matches, path;\n\n\tfor (i = 0, len = scripts.length; i < len; i++) {\n\t\tsrc = scripts[i].src;\n\t\tmatches = src.match(leafletRe);\n\n\t\tif (matches) {\n\t\t\tpath = src.split(leafletRe)[0];\n\t\t\treturn (path ? path + '/' : '') + 'images';\n\t\t}\n\t}\n}());\n\n\n/*\r\n * L.Marker is used to display clickable/draggable icons on the map.\r\n */\r\n\r\nL.Marker = L.Class.extend({\r\n\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\ticon: new L.Icon.Default(),\r\n\t\ttitle: '',\r\n\t\talt: '',\r\n\t\tclickable: true,\r\n\t\tdraggable: false,\r\n\t\tkeyboard: true,\r\n\t\tzIndexOffset: 0,\r\n\t\topacity: 1,\r\n\t\triseOnHover: false,\r\n\t\triseOffset: 250\r\n\t},\r\n\r\n\tinitialize: function (latlng, options) {\r\n\t\tL.setOptions(this, options);\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tmap.on('viewreset', this.update, this);\r\n\r\n\t\tthis._initIcon();\r\n\t\tthis.update();\r\n\t\tthis.fire('add');\r\n\r\n\t\tif (map.options.zoomAnimation && map.options.markerZoomAnimation) {\r\n\t\t\tmap.on('zoomanim', this._animateZoom, this);\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.dragging.disable();\r\n\t\t}\r\n\r\n\t\tthis._removeIcon();\r\n\t\tthis._removeShadow();\r\n\r\n\t\tthis.fire('remove');\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this.update,\r\n\t\t\t'zoomanim': this._animateZoom\r\n\t\t}, this);\r\n\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\r\n\t\tthis.update();\r\n\r\n\t\treturn this.fire('move', { latlng: this._latlng });\r\n\t},\r\n\r\n\tsetZIndexOffset: function (offset) {\r\n\t\tthis.options.zIndexOffset = offset;\r\n\t\tthis.update();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetIcon: function (icon) {\r\n\r\n\t\tthis.options.icon = icon;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._initIcon();\r\n\t\t\tthis.update();\r\n\t\t}\r\n\r\n\t\tif (this._popup) {\r\n\t\t\tthis.bindPopup(this._popup);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tupdate: function () {\r\n\t\tif (this._icon) {\r\n\t\t\tvar pos = this._map.latLngToLayerPoint(this._latlng).round();\r\n\t\t\tthis._setPos(pos);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initIcon: function () {\r\n\t\tvar options = this.options,\r\n\t\t    map = this._map,\r\n\t\t    animation = (map.options.zoomAnimation && map.options.markerZoomAnimation),\r\n\t\t    classToAdd = animation ? 'leaflet-zoom-animated' : 'leaflet-zoom-hide';\r\n\r\n\t\tvar icon = options.icon.createIcon(this._icon),\r\n\t\t\taddIcon = false;\r\n\r\n\t\t// if we're not reusing the icon, remove the old one and init new one\r\n\t\tif (icon !== this._icon) {\r\n\t\t\tif (this._icon) {\r\n\t\t\t\tthis._removeIcon();\r\n\t\t\t}\r\n\t\t\taddIcon = true;\r\n\r\n\t\t\tif (options.title) {\r\n\t\t\t\ticon.title = options.title;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (options.alt) {\r\n\t\t\t\ticon.alt = options.alt;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tL.DomUtil.addClass(icon, classToAdd);\r\n\r\n\t\tif (options.keyboard) {\r\n\t\t\ticon.tabIndex = '0';\r\n\t\t}\r\n\r\n\t\tthis._icon = icon;\r\n\r\n\t\tthis._initInteraction();\r\n\r\n\t\tif (options.riseOnHover) {\r\n\t\t\tL.DomEvent\r\n\t\t\t\t.on(icon, 'mouseover', this._bringToFront, this)\r\n\t\t\t\t.on(icon, 'mouseout', this._resetZIndex, this);\r\n\t\t}\r\n\r\n\t\tvar newShadow = options.icon.createShadow(this._shadow),\r\n\t\t\taddShadow = false;\r\n\r\n\t\tif (newShadow !== this._shadow) {\r\n\t\t\tthis._removeShadow();\r\n\t\t\taddShadow = true;\r\n\t\t}\r\n\r\n\t\tif (newShadow) {\r\n\t\t\tL.DomUtil.addClass(newShadow, classToAdd);\r\n\t\t}\r\n\t\tthis._shadow = newShadow;\r\n\r\n\r\n\t\tif (options.opacity < 1) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\r\n\t\tvar panes = this._map._panes;\r\n\r\n\t\tif (addIcon) {\r\n\t\t\tpanes.markerPane.appendChild(this._icon);\r\n\t\t}\r\n\r\n\t\tif (newShadow && addShadow) {\r\n\t\t\tpanes.shadowPane.appendChild(this._shadow);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeIcon: function () {\r\n\t\tif (this.options.riseOnHover) {\r\n\t\t\tL.DomEvent\r\n\t\t\t    .off(this._icon, 'mouseover', this._bringToFront)\r\n\t\t\t    .off(this._icon, 'mouseout', this._resetZIndex);\r\n\t\t}\r\n\r\n\t\tthis._map._panes.markerPane.removeChild(this._icon);\r\n\r\n\t\tthis._icon = null;\r\n\t},\r\n\r\n\t_removeShadow: function () {\r\n\t\tif (this._shadow) {\r\n\t\t\tthis._map._panes.shadowPane.removeChild(this._shadow);\r\n\t\t}\r\n\t\tthis._shadow = null;\r\n\t},\r\n\r\n\t_setPos: function (pos) {\r\n\t\tL.DomUtil.setPosition(this._icon, pos);\r\n\r\n\t\tif (this._shadow) {\r\n\t\t\tL.DomUtil.setPosition(this._shadow, pos);\r\n\t\t}\r\n\r\n\t\tthis._zIndex = pos.y + this.options.zIndexOffset;\r\n\r\n\t\tthis._resetZIndex();\r\n\t},\r\n\r\n\t_updateZIndex: function (offset) {\r\n\t\tthis._icon.style.zIndex = this._zIndex + offset;\r\n\t},\r\n\r\n\t_animateZoom: function (opt) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\r\n\r\n\t\tthis._setPos(pos);\r\n\t},\r\n\r\n\t_initInteraction: function () {\r\n\r\n\t\tif (!this.options.clickable) { return; }\r\n\r\n\t\t// TODO refactor into something shared with Map/Path/etc. to DRY it up\r\n\r\n\t\tvar icon = this._icon,\r\n\t\t    events = ['dblclick', 'mousedown', 'mouseover', 'mouseout', 'contextmenu'];\r\n\r\n\t\tL.DomUtil.addClass(icon, 'leaflet-clickable');\r\n\t\tL.DomEvent.on(icon, 'click', this._onMouseClick, this);\r\n\t\tL.DomEvent.on(icon, 'keypress', this._onKeyPress, this);\r\n\r\n\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\tL.DomEvent.on(icon, events[i], this._fireMouseEvent, this);\r\n\t\t}\r\n\r\n\t\tif (L.Handler.MarkerDrag) {\r\n\t\t\tthis.dragging = new L.Handler.MarkerDrag(this);\r\n\r\n\t\t\tif (this.options.draggable) {\r\n\t\t\t\tthis.dragging.enable();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tvar wasDragged = this.dragging && this.dragging.moved();\r\n\r\n\t\tif (this.hasEventListeners(e.type) || wasDragged) {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t}\r\n\r\n\t\tif (wasDragged) { return; }\r\n\r\n\t\tif ((!this.dragging || !this.dragging._enabled) && this._map.dragging && this._map.dragging.moved()) { return; }\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\toriginalEvent: e,\r\n\t\t\tlatlng: this._latlng\r\n\t\t});\r\n\t},\r\n\r\n\t_onKeyPress: function (e) {\r\n\t\tif (e.keyCode === 13) {\r\n\t\t\tthis.fire('click', {\r\n\t\t\t\toriginalEvent: e,\r\n\t\t\t\tlatlng: this._latlng\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\toriginalEvent: e,\r\n\t\t\tlatlng: this._latlng\r\n\t\t});\r\n\r\n\t\t// TODO proper custom event propagation\r\n\t\t// this line will always be called if marker is in a FeatureGroup\r\n\t\tif (e.type === 'contextmenu' && this.hasEventListeners(e.type)) {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t\tif (e.type !== 'mousedown') {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t} else {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t},\r\n\r\n\tsetOpacity: function (opacity) {\r\n\t\tthis.options.opacity = opacity;\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateOpacity();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_updateOpacity: function () {\r\n\t\tL.DomUtil.setOpacity(this._icon, this.options.opacity);\r\n\t\tif (this._shadow) {\r\n\t\t\tL.DomUtil.setOpacity(this._shadow, this.options.opacity);\r\n\t\t}\r\n\t},\r\n\r\n\t_bringToFront: function () {\r\n\t\tthis._updateZIndex(this.options.riseOffset);\r\n\t},\r\n\r\n\t_resetZIndex: function () {\r\n\t\tthis._updateZIndex(0);\r\n\t}\r\n});\r\n\r\nL.marker = function (latlng, options) {\r\n\treturn new L.Marker(latlng, options);\r\n};\r\n\n\n/*\n * L.DivIcon is a lightweight HTML-based icon class (as opposed to the image-based L.Icon)\n * to use with L.Marker.\n */\n\nL.DivIcon = L.Icon.extend({\n\toptions: {\n\t\ticonSize: [12, 12], // also can be set through CSS\n\t\t/*\n\t\ticonAnchor: (Point)\n\t\tpopupAnchor: (Point)\n\t\thtml: (String)\n\t\tbgPos: (Point)\n\t\t*/\n\t\tclassName: 'leaflet-div-icon',\n\t\thtml: false\n\t},\n\n\tcreateIcon: function (oldIcon) {\n\t\tvar div = (oldIcon && oldIcon.tagName === 'DIV') ? oldIcon : document.createElement('div'),\n\t\t    options = this.options;\n\n\t\tif (options.html !== false) {\n\t\t\tdiv.innerHTML = options.html;\n\t\t} else {\n\t\t\tdiv.innerHTML = '';\n\t\t}\n\n\t\tif (options.bgPos) {\n\t\t\tdiv.style.backgroundPosition =\n\t\t\t        (-options.bgPos.x) + 'px ' + (-options.bgPos.y) + 'px';\n\t\t}\n\n\t\tthis._setIconStyles(div, 'icon');\n\t\treturn div;\n\t},\n\n\tcreateShadow: function () {\n\t\treturn null;\n\t}\n});\n\nL.divIcon = function (options) {\n\treturn new L.DivIcon(options);\n};\n\n\n/*\r\n * L.Popup is used for displaying popups on the map.\r\n */\r\n\r\nL.Map.mergeOptions({\r\n\tclosePopupOnClick: true\r\n});\r\n\r\nL.Popup = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\toptions: {\r\n\t\tminWidth: 50,\r\n\t\tmaxWidth: 300,\r\n\t\t// maxHeight: null,\r\n\t\tautoPan: true,\r\n\t\tcloseButton: true,\r\n\t\toffset: [0, 7],\r\n\t\tautoPanPadding: [5, 5],\r\n\t\t// autoPanPaddingTopLeft: null,\r\n\t\t// autoPanPaddingBottomRight: null,\r\n\t\tkeepInView: false,\r\n\t\tclassName: '',\r\n\t\tzoomAnimation: true\r\n\t},\r\n\r\n\tinitialize: function (options, source) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._source = source;\r\n\t\tthis._animated = L.Browser.any3d && this.options.zoomAnimation;\r\n\t\tthis._isOpen = false;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._initLayout();\r\n\t\t}\r\n\r\n\t\tvar animFade = map.options.fadeAnimation;\r\n\r\n\t\tif (animFade) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\r\n\t\t}\r\n\t\tmap._panes.popupPane.appendChild(this._container);\r\n\r\n\t\tmap.on(this._getEvents(), this);\r\n\r\n\t\tthis.update();\r\n\r\n\t\tif (animFade) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 1);\r\n\t\t}\r\n\r\n\t\tthis.fire('open');\r\n\r\n\t\tmap.fire('popupopen', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\tthis._source.fire('popupopen', {popup: this});\r\n\t\t}\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\topenOn: function (map) {\r\n\t\tmap.openPopup(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap._panes.popupPane.removeChild(this._container);\r\n\r\n\t\tL.Util.falseFn(this._container.offsetWidth); // force reflow\r\n\r\n\t\tmap.off(this._getEvents(), this);\r\n\r\n\t\tif (map.options.fadeAnimation) {\r\n\t\t\tL.DomUtil.setOpacity(this._container, 0);\r\n\t\t}\r\n\r\n\t\tthis._map = null;\r\n\r\n\t\tthis.fire('close');\r\n\r\n\t\tmap.fire('popupclose', {popup: this});\r\n\r\n\t\tif (this._source) {\r\n\t\t\tthis._source.fire('popupclose', {popup: this});\r\n\t\t}\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\tif (this._map) {\r\n\t\t\tthis._updatePosition();\r\n\t\t\tthis._adjustPan();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetContent: function () {\r\n\t\treturn this._content;\r\n\t},\r\n\r\n\tsetContent: function (content) {\r\n\t\tthis._content = content;\r\n\t\tthis.update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\tupdate: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tthis._container.style.visibility = 'hidden';\r\n\r\n\t\tthis._updateContent();\r\n\t\tthis._updateLayout();\r\n\t\tthis._updatePosition();\r\n\r\n\t\tthis._container.style.visibility = '';\r\n\r\n\t\tthis._adjustPan();\r\n\t},\r\n\r\n\t_getEvents: function () {\r\n\t\tvar events = {\r\n\t\t\tviewreset: this._updatePosition\r\n\t\t};\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tevents.zoomanim = this._zoomAnimation;\r\n\t\t}\r\n\t\tif ('closeOnClick' in this.options ? this.options.closeOnClick : this._map.options.closePopupOnClick) {\r\n\t\t\tevents.preclick = this._close;\r\n\t\t}\r\n\t\tif (this.options.keepInView) {\r\n\t\t\tevents.moveend = this._adjustPan;\r\n\t\t}\r\n\r\n\t\treturn events;\r\n\t},\r\n\r\n\t_close: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.closePopup(this);\r\n\t\t}\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar prefix = 'leaflet-popup',\r\n\t\t\tcontainerClass = prefix + ' ' + this.options.className + ' leaflet-zoom-' +\r\n\t\t\t        (this._animated ? 'animated' : 'hide'),\r\n\t\t\tcontainer = this._container = L.DomUtil.create('div', containerClass),\r\n\t\t\tcloseButton;\r\n\r\n\t\tif (this.options.closeButton) {\r\n\t\t\tcloseButton = this._closeButton =\r\n\t\t\t        L.DomUtil.create('a', prefix + '-close-button', container);\r\n\t\t\tcloseButton.href = '#close';\r\n\t\t\tcloseButton.innerHTML = '&#215;';\r\n\t\t\tL.DomEvent.disableClickPropagation(closeButton);\r\n\r\n\t\t\tL.DomEvent.on(closeButton, 'click', this._onCloseButtonClick, this);\r\n\t\t}\r\n\r\n\t\tvar wrapper = this._wrapper =\r\n\t\t        L.DomUtil.create('div', prefix + '-content-wrapper', container);\r\n\t\tL.DomEvent.disableClickPropagation(wrapper);\r\n\r\n\t\tthis._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);\r\n\r\n\t\tL.DomEvent.disableScrollPropagation(this._contentNode);\r\n\t\tL.DomEvent.on(wrapper, 'contextmenu', L.DomEvent.stopPropagation);\r\n\r\n\t\tthis._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);\r\n\t\tthis._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);\r\n\t},\r\n\r\n\t_updateContent: function () {\r\n\t\tif (!this._content) { return; }\r\n\r\n\t\tif (typeof this._content === 'string') {\r\n\t\t\tthis._contentNode.innerHTML = this._content;\r\n\t\t} else {\r\n\t\t\twhile (this._contentNode.hasChildNodes()) {\r\n\t\t\t\tthis._contentNode.removeChild(this._contentNode.firstChild);\r\n\t\t\t}\r\n\t\t\tthis._contentNode.appendChild(this._content);\r\n\t\t}\r\n\t\tthis.fire('contentupdate');\r\n\t},\r\n\r\n\t_updateLayout: function () {\r\n\t\tvar container = this._contentNode,\r\n\t\t    style = container.style;\r\n\r\n\t\tstyle.width = '';\r\n\t\tstyle.whiteSpace = 'nowrap';\r\n\r\n\t\tvar width = container.offsetWidth;\r\n\t\twidth = Math.min(width, this.options.maxWidth);\r\n\t\twidth = Math.max(width, this.options.minWidth);\r\n\r\n\t\tstyle.width = (width + 1) + 'px';\r\n\t\tstyle.whiteSpace = '';\r\n\r\n\t\tstyle.height = '';\r\n\r\n\t\tvar height = container.offsetHeight,\r\n\t\t    maxHeight = this.options.maxHeight,\r\n\t\t    scrolledClass = 'leaflet-popup-scrolled';\r\n\r\n\t\tif (maxHeight && height > maxHeight) {\r\n\t\t\tstyle.height = maxHeight + 'px';\r\n\t\t\tL.DomUtil.addClass(container, scrolledClass);\r\n\t\t} else {\r\n\t\t\tL.DomUtil.removeClass(container, scrolledClass);\r\n\t\t}\r\n\r\n\t\tthis._containerWidth = this._container.offsetWidth;\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\r\n\t\t    animated = this._animated,\r\n\t\t    offset = L.point(this.options.offset);\r\n\r\n\t\tif (animated) {\r\n\t\t\tL.DomUtil.setPosition(this._container, pos);\r\n\t\t}\r\n\r\n\t\tthis._containerBottom = -offset.y - (animated ? 0 : pos.y);\r\n\t\tthis._containerLeft = -Math.round(this._containerWidth / 2) + offset.x + (animated ? 0 : pos.x);\r\n\r\n\t\t// bottom position the popup in case the height of the popup changes (images loading etc)\r\n\t\tthis._container.style.bottom = this._containerBottom + 'px';\r\n\t\tthis._container.style.left = this._containerLeft + 'px';\r\n\t},\r\n\r\n\t_zoomAnimation: function (opt) {\r\n\t\tvar pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center);\r\n\r\n\t\tL.DomUtil.setPosition(this._container, pos);\r\n\t},\r\n\r\n\t_adjustPan: function () {\r\n\t\tif (!this.options.autoPan) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    containerHeight = this._container.offsetHeight,\r\n\t\t    containerWidth = this._containerWidth,\r\n\r\n\t\t    layerPos = new L.Point(this._containerLeft, -containerHeight - this._containerBottom);\r\n\r\n\t\tif (this._animated) {\r\n\t\t\tlayerPos._add(L.DomUtil.getPosition(this._container));\r\n\t\t}\r\n\r\n\t\tvar containerPos = map.layerPointToContainerPoint(layerPos),\r\n\t\t    padding = L.point(this.options.autoPanPadding),\r\n\t\t    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),\r\n\t\t    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),\r\n\t\t    size = map.getSize(),\r\n\t\t    dx = 0,\r\n\t\t    dy = 0;\r\n\r\n\t\tif (containerPos.x + containerWidth + paddingBR.x > size.x) { // right\r\n\t\t\tdx = containerPos.x + containerWidth - size.x + paddingBR.x;\r\n\t\t}\r\n\t\tif (containerPos.x - dx - paddingTL.x < 0) { // left\r\n\t\t\tdx = containerPos.x - paddingTL.x;\r\n\t\t}\r\n\t\tif (containerPos.y + containerHeight + paddingBR.y > size.y) { // bottom\r\n\t\t\tdy = containerPos.y + containerHeight - size.y + paddingBR.y;\r\n\t\t}\r\n\t\tif (containerPos.y - dy - paddingTL.y < 0) { // top\r\n\t\t\tdy = containerPos.y - paddingTL.y;\r\n\t\t}\r\n\r\n\t\tif (dx || dy) {\r\n\t\t\tmap\r\n\t\t\t    .fire('autopanstart')\r\n\t\t\t    .panBy([dx, dy]);\r\n\t\t}\r\n\t},\r\n\r\n\t_onCloseButtonClick: function (e) {\r\n\t\tthis._close();\r\n\t\tL.DomEvent.stop(e);\r\n\t}\r\n});\r\n\r\nL.popup = function (options, source) {\r\n\treturn new L.Popup(options, source);\r\n};\r\n\r\n\r\nL.Map.include({\r\n\topenPopup: function (popup, latlng, options) { // (Popup) or (String || HTMLElement, LatLng[, Object])\r\n\t\tthis.closePopup();\r\n\r\n\t\tif (!(popup instanceof L.Popup)) {\r\n\t\t\tvar content = popup;\r\n\r\n\t\t\tpopup = new L.Popup(options)\r\n\t\t\t    .setLatLng(latlng)\r\n\t\t\t    .setContent(content);\r\n\t\t}\r\n\t\tpopup._isOpen = true;\r\n\r\n\t\tthis._popup = popup;\r\n\t\treturn this.addLayer(popup);\r\n\t},\r\n\r\n\tclosePopup: function (popup) {\r\n\t\tif (!popup || popup === this._popup) {\r\n\t\t\tpopup = this._popup;\r\n\t\t\tthis._popup = null;\r\n\t\t}\r\n\t\tif (popup) {\r\n\t\t\tthis.removeLayer(popup);\r\n\t\t\tpopup._isOpen = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\n\n/*\r\n * Popup extension to L.Marker, adding popup-related methods.\r\n */\r\n\r\nL.Marker.include({\r\n\topenPopup: function () {\r\n\t\tif (this._popup && this._map && !this._map.hasLayer(this._popup)) {\r\n\t\t\tthis._popup.setLatLng(this._latlng);\r\n\t\t\tthis._map.openPopup(this._popup);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclosePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup._close();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\ttogglePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tif (this._popup._isOpen) {\r\n\t\t\t\tthis.closePopup();\r\n\t\t\t} else {\r\n\t\t\t\tthis.openPopup();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbindPopup: function (content, options) {\r\n\t\tvar anchor = L.point(this.options.icon.options.popupAnchor || [0, 0]);\r\n\r\n\t\tanchor = anchor.add(L.Popup.prototype.options.offset);\r\n\r\n\t\tif (options && options.offset) {\r\n\t\t\tanchor = anchor.add(options.offset);\r\n\t\t}\r\n\r\n\t\toptions = L.extend({offset: anchor}, options);\r\n\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tthis\r\n\t\t\t    .on('click', this.togglePopup, this)\r\n\t\t\t    .on('remove', this.closePopup, this)\r\n\t\t\t    .on('move', this._movePopup, this);\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\r\n\t\tif (content instanceof L.Popup) {\r\n\t\t\tL.setOptions(content, options);\r\n\t\t\tthis._popup = content;\r\n\t\t} else {\r\n\t\t\tthis._popup = new L.Popup(options, this)\r\n\t\t\t\t.setContent(content);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetPopupContent: function (content) {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunbindPopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup = null;\r\n\t\t\tthis\r\n\t\t\t    .off('click', this.togglePopup, this)\r\n\t\t\t    .off('remove', this.closePopup, this)\r\n\t\t\t    .off('move', this._movePopup, this);\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetPopup: function () {\r\n\t\treturn this._popup;\r\n\t},\r\n\r\n\t_movePopup: function (e) {\r\n\t\tthis._popup.setLatLng(e.latlng);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.LayerGroup is a class to combine several layers into one so that\r\n * you can manipulate the group (e.g. add/remove it) as one layer.\r\n */\r\n\r\nL.LayerGroup = L.Class.extend({\r\n\tinitialize: function (layers) {\r\n\t\tthis._layers = {};\r\n\r\n\t\tvar i, len;\r\n\r\n\t\tif (layers) {\r\n\t\t\tfor (i = 0, len = layers.length; i < len; i++) {\r\n\t\t\t\tthis.addLayer(layers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\tvar id = this.getLayerId(layer);\r\n\r\n\t\tthis._layers[id] = layer;\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.addLayer(layer);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = layer in this._layers ? layer : this.getLayerId(layer);\r\n\r\n\t\tif (this._map && this._layers[id]) {\r\n\t\t\tthis._map.removeLayer(this._layers[id]);\r\n\t\t}\r\n\r\n\t\tdelete this._layers[id];\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\thasLayer: function (layer) {\r\n\t\tif (!layer) { return false; }\r\n\r\n\t\treturn (layer in this._layers || this.getLayerId(layer) in this._layers);\r\n\t},\r\n\r\n\tclearLayers: function () {\r\n\t\tthis.eachLayer(this.removeLayer, this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tinvoke: function (methodName) {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\r\n\t\t    i, layer;\r\n\r\n\t\tfor (i in this._layers) {\r\n\t\t\tlayer = this._layers[i];\r\n\r\n\t\t\tif (layer[methodName]) {\r\n\t\t\t\tlayer[methodName].apply(layer, args);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\t\tthis.eachLayer(map.addLayer, map);\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tthis.eachLayer(map.removeLayer, map);\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\teachLayer: function (method, context) {\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tmethod.call(context, this._layers[i]);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetLayer: function (id) {\r\n\t\treturn this._layers[id];\r\n\t},\r\n\r\n\tgetLayers: function () {\r\n\t\tvar layers = [];\r\n\r\n\t\tfor (var i in this._layers) {\r\n\t\t\tlayers.push(this._layers[i]);\r\n\t\t}\r\n\t\treturn layers;\r\n\t},\r\n\r\n\tsetZIndex: function (zIndex) {\r\n\t\treturn this.invoke('setZIndex', zIndex);\r\n\t},\r\n\r\n\tgetLayerId: function (layer) {\r\n\t\treturn L.stamp(layer);\r\n\t}\r\n});\r\n\r\nL.layerGroup = function (layers) {\r\n\treturn new L.LayerGroup(layers);\r\n};\r\n\n\n/*\r\n * L.FeatureGroup extends L.LayerGroup by introducing mouse events and additional methods\r\n * shared between a group of interactive layers (like vectors or markers).\r\n */\r\n\r\nL.FeatureGroup = L.LayerGroup.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\tstatics: {\r\n\t\tEVENTS: 'click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose'\r\n\t},\r\n\r\n\taddLayer: function (layer) {\r\n\t\tif (this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ('on' in layer) {\r\n\t\t\tlayer.on(L.FeatureGroup.EVENTS, this._propagateEvent, this);\r\n\t\t}\r\n\r\n\t\tL.LayerGroup.prototype.addLayer.call(this, layer);\r\n\r\n\t\tif (this._popupContent && layer.bindPopup) {\r\n\t\t\tlayer.bindPopup(this._popupContent, this._popupOptions);\r\n\t\t}\r\n\r\n\t\treturn this.fire('layeradd', {layer: layer});\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tif (!this.hasLayer(layer)) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif (layer in this._layers) {\r\n\t\t\tlayer = this._layers[layer];\r\n\t\t}\r\n\r\n\t\tlayer.off(L.FeatureGroup.EVENTS, this._propagateEvent, this);\r\n\r\n\t\tL.LayerGroup.prototype.removeLayer.call(this, layer);\r\n\r\n\t\tif (this._popupContent) {\r\n\t\t\tthis.invoke('unbindPopup');\r\n\t\t}\r\n\r\n\t\treturn this.fire('layerremove', {layer: layer});\r\n\t},\r\n\r\n\tbindPopup: function (content, options) {\r\n\t\tthis._popupContent = content;\r\n\t\tthis._popupOptions = options;\r\n\t\treturn this.invoke('bindPopup', content, options);\r\n\t},\r\n\r\n\topenPopup: function (latlng) {\r\n\t\t// open popup on the first layer\r\n\t\tfor (var id in this._layers) {\r\n\t\t\tthis._layers[id].openPopup(latlng);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\treturn this.invoke('setStyle', style);\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\treturn this.invoke('bringToFront');\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\treturn this.invoke('bringToBack');\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar bounds = new L.LatLngBounds();\r\n\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tbounds.extend(layer instanceof L.Marker ? layer.getLatLng() : layer.getBounds());\r\n\t\t});\r\n\r\n\t\treturn bounds;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\te = L.extend({\r\n\t\t\tlayer: e.target,\r\n\t\t\ttarget: this\r\n\t\t}, e);\r\n\t\tthis.fire(e.type, e);\r\n\t}\r\n});\r\n\r\nL.featureGroup = function (layers) {\r\n\treturn new L.FeatureGroup(layers);\r\n};\r\n\n\n/*\r\n * L.Path is a base class for rendering vector paths on a map. Inherited by Polyline, Circle, etc.\r\n */\r\n\r\nL.Path = L.Class.extend({\r\n\tincludes: [L.Mixin.Events],\r\n\r\n\tstatics: {\r\n\t\t// how much to extend the clip area around the map view\r\n\t\t// (relative to its size, e.g. 0.5 is half the screen in each direction)\r\n\t\t// set it so that SVG element doesn't exceed 1280px (vectors flicker on dragend if it is)\r\n\t\tCLIP_PADDING: (function () {\r\n\t\t\tvar max = L.Browser.mobile ? 1280 : 2000,\r\n\t\t\t    target = (max / Math.max(window.outerWidth, window.outerHeight) - 1) / 2;\r\n\t\t\treturn Math.max(0, Math.min(0.5, target));\r\n\t\t})()\r\n\t},\r\n\r\n\toptions: {\r\n\t\tstroke: true,\r\n\t\tcolor: '#0033ff',\r\n\t\tdashArray: null,\r\n\t\tlineCap: null,\r\n\t\tlineJoin: null,\r\n\t\tweight: 5,\r\n\t\topacity: 0.5,\r\n\r\n\t\tfill: false,\r\n\t\tfillColor: null, //same as color by default\r\n\t\tfillOpacity: 0.2,\r\n\r\n\t\tclickable: true\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tif (!this._container) {\r\n\t\t\tthis._initElements();\r\n\t\t\tthis._initEvents();\r\n\t\t}\r\n\r\n\t\tthis.projectLatlngs();\r\n\t\tthis._updatePath();\r\n\r\n\t\tif (this._container) {\r\n\t\t\tthis._map._pathRoot.appendChild(this._container);\r\n\t\t}\r\n\r\n\t\tthis.fire('add');\r\n\r\n\t\tmap.on({\r\n\t\t\t'viewreset': this.projectLatlngs,\r\n\t\t\t'moveend': this._updatePath\r\n\t\t}, this);\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tmap.addLayer(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap._pathRoot.removeChild(this._container);\r\n\r\n\t\t// Need to fire remove event before we set _map to null as the event hooks might need the object\r\n\t\tthis.fire('remove');\r\n\t\tthis._map = null;\r\n\r\n\t\tif (L.Browser.vml) {\r\n\t\t\tthis._container = null;\r\n\t\t\tthis._stroke = null;\r\n\t\t\tthis._fill = null;\r\n\t\t}\r\n\r\n\t\tmap.off({\r\n\t\t\t'viewreset': this.projectLatlngs,\r\n\t\t\t'moveend': this._updatePath\r\n\t\t}, this);\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\t// do all projection stuff here\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tL.setOptions(this, style);\r\n\r\n\t\tif (this._container) {\r\n\t\t\tthis._updateStyle();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis.projectLatlngs();\r\n\t\t\tthis._updatePath();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nL.Map.include({\r\n\t_updatePathViewport: function () {\r\n\t\tvar p = L.Path.CLIP_PADDING,\r\n\t\t    size = this.getSize(),\r\n\t\t    panePos = L.DomUtil.getPosition(this._mapPane),\r\n\t\t    min = panePos.multiplyBy(-1)._subtract(size.multiplyBy(p)._round()),\r\n\t\t    max = min.add(size.multiplyBy(1 + p * 2)._round());\r\n\r\n\t\tthis._pathViewport = new L.Bounds(min, max);\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Path with SVG-specific rendering code.\r\n */\r\n\r\nL.Path.SVG_NS = 'http://www.w3.org/2000/svg';\r\n\r\nL.Browser.svg = !!(document.createElementNS && document.createElementNS(L.Path.SVG_NS, 'svg').createSVGRect);\r\n\r\nL.Path = L.Path.extend({\r\n\tstatics: {\r\n\t\tSVG: L.Browser.svg\r\n\t},\r\n\r\n\tbringToFront: function () {\r\n\t\tvar root = this._map._pathRoot,\r\n\t\t    path = this._container;\r\n\r\n\t\tif (path && root.lastChild !== path) {\r\n\t\t\troot.appendChild(path);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tbringToBack: function () {\r\n\t\tvar root = this._map._pathRoot,\r\n\t\t    path = this._container,\r\n\t\t    first = root.firstChild;\r\n\r\n\t\tif (path && first !== path) {\r\n\t\t\troot.insertBefore(path, first);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\t// form path string here\r\n\t},\r\n\r\n\t_createElement: function (name) {\r\n\t\treturn document.createElementNS(L.Path.SVG_NS, name);\r\n\t},\r\n\r\n\t_initElements: function () {\r\n\t\tthis._map._initPathRoot();\r\n\t\tthis._initPath();\r\n\t\tthis._initStyle();\r\n\t},\r\n\r\n\t_initPath: function () {\r\n\t\tthis._container = this._createElement('g');\r\n\r\n\t\tthis._path = this._createElement('path');\r\n\r\n\t\tif (this.options.className) {\r\n\t\t\tL.DomUtil.addClass(this._path, this.options.className);\r\n\t\t}\r\n\r\n\t\tthis._container.appendChild(this._path);\r\n\t},\r\n\r\n\t_initStyle: function () {\r\n\t\tif (this.options.stroke) {\r\n\t\t\tthis._path.setAttribute('stroke-linejoin', 'round');\r\n\t\t\tthis._path.setAttribute('stroke-linecap', 'round');\r\n\t\t}\r\n\t\tif (this.options.fill) {\r\n\t\t\tthis._path.setAttribute('fill-rule', 'evenodd');\r\n\t\t}\r\n\t\tif (this.options.pointerEvents) {\r\n\t\t\tthis._path.setAttribute('pointer-events', this.options.pointerEvents);\r\n\t\t}\r\n\t\tif (!this.options.clickable && !this.options.pointerEvents) {\r\n\t\t\tthis._path.setAttribute('pointer-events', 'none');\r\n\t\t}\r\n\t\tthis._updateStyle();\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tif (this.options.stroke) {\r\n\t\t\tthis._path.setAttribute('stroke', this.options.color);\r\n\t\t\tthis._path.setAttribute('stroke-opacity', this.options.opacity);\r\n\t\t\tthis._path.setAttribute('stroke-width', this.options.weight);\r\n\t\t\tif (this.options.dashArray) {\r\n\t\t\t\tthis._path.setAttribute('stroke-dasharray', this.options.dashArray);\r\n\t\t\t} else {\r\n\t\t\t\tthis._path.removeAttribute('stroke-dasharray');\r\n\t\t\t}\r\n\t\t\tif (this.options.lineCap) {\r\n\t\t\t\tthis._path.setAttribute('stroke-linecap', this.options.lineCap);\r\n\t\t\t}\r\n\t\t\tif (this.options.lineJoin) {\r\n\t\t\t\tthis._path.setAttribute('stroke-linejoin', this.options.lineJoin);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._path.setAttribute('stroke', 'none');\r\n\t\t}\r\n\t\tif (this.options.fill) {\r\n\t\t\tthis._path.setAttribute('fill', this.options.fillColor || this.options.color);\r\n\t\t\tthis._path.setAttribute('fill-opacity', this.options.fillOpacity);\r\n\t\t} else {\r\n\t\t\tthis._path.setAttribute('fill', 'none');\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tvar str = this.getPathString();\r\n\t\tif (!str) {\r\n\t\t\t// fix webkit empty string parsing bug\r\n\t\t\tstr = 'M0 0';\r\n\t\t}\r\n\t\tthis._path.setAttribute('d', str);\r\n\t},\r\n\r\n\t// TODO remove duplication with L.Map\r\n\t_initEvents: function () {\r\n\t\tif (this.options.clickable) {\r\n\t\t\tif (L.Browser.svg || !L.Browser.vml) {\r\n\t\t\t\tL.DomUtil.addClass(this._path, 'leaflet-clickable');\r\n\t\t\t}\r\n\r\n\t\t\tL.DomEvent.on(this._container, 'click', this._onMouseClick, this);\r\n\r\n\t\t\tvar events = ['dblclick', 'mousedown', 'mouseover',\r\n\t\t\t              'mouseout', 'mousemove', 'contextmenu'];\r\n\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\tL.DomEvent.on(this._container, events[i], this._fireMouseEvent, this);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseClick: function (e) {\r\n\t\tif (this._map.dragging && this._map.dragging.moved()) { return; }\r\n\r\n\t\tthis._fireMouseEvent(e);\r\n\t},\r\n\r\n\t_fireMouseEvent: function (e) {\r\n\t\tif (!this.hasEventListeners(e.type)) { return; }\r\n\r\n\t\tvar map = this._map,\r\n\t\t    containerPoint = map.mouseEventToContainerPoint(e),\r\n\t\t    layerPoint = map.containerPointToLayerPoint(containerPoint),\r\n\t\t    latlng = map.layerPointToLatLng(layerPoint);\r\n\r\n\t\tthis.fire(e.type, {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tlayerPoint: layerPoint,\r\n\t\t\tcontainerPoint: containerPoint,\r\n\t\t\toriginalEvent: e\r\n\t\t});\r\n\r\n\t\tif (e.type === 'contextmenu') {\r\n\t\t\tL.DomEvent.preventDefault(e);\r\n\t\t}\r\n\t\tif (e.type !== 'mousemove') {\r\n\t\t\tL.DomEvent.stopPropagation(e);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.include({\r\n\t_initPathRoot: function () {\r\n\t\tif (!this._pathRoot) {\r\n\t\t\tthis._pathRoot = L.Path.prototype._createElement('svg');\r\n\t\t\tthis._panes.overlayPane.appendChild(this._pathRoot);\r\n\r\n\t\t\tif (this.options.zoomAnimation && L.Browser.any3d) {\r\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-animated');\r\n\r\n\t\t\t\tthis.on({\r\n\t\t\t\t\t'zoomanim': this._animatePathZoom,\r\n\t\t\t\t\t'zoomend': this._endPathZoom\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tL.DomUtil.addClass(this._pathRoot, 'leaflet-zoom-hide');\r\n\t\t\t}\r\n\r\n\t\t\tthis.on('moveend', this._updateSvgViewport);\r\n\t\t\tthis._updateSvgViewport();\r\n\t\t}\r\n\t},\r\n\r\n\t_animatePathZoom: function (e) {\r\n\t\tvar scale = this.getZoomScale(e.zoom),\r\n\t\t    offset = this._getCenterOffset(e.center)._multiplyBy(-scale)._add(this._pathViewport.min);\r\n\r\n\t\tthis._pathRoot.style[L.DomUtil.TRANSFORM] =\r\n\t\t        L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ') ';\r\n\r\n\t\tthis._pathZooming = true;\r\n\t},\r\n\r\n\t_endPathZoom: function () {\r\n\t\tthis._pathZooming = false;\r\n\t},\r\n\r\n\t_updateSvgViewport: function () {\r\n\r\n\t\tif (this._pathZooming) {\r\n\t\t\t// Do not update SVGs while a zoom animation is going on otherwise the animation will break.\r\n\t\t\t// When the zoom animation ends we will be updated again anyway\r\n\t\t\t// This fixes the case where you do a momentum move and zoom while the move is still ongoing.\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._updatePathViewport();\r\n\r\n\t\tvar vp = this._pathViewport,\r\n\t\t    min = vp.min,\r\n\t\t    max = vp.max,\r\n\t\t    width = max.x - min.x,\r\n\t\t    height = max.y - min.y,\r\n\t\t    root = this._pathRoot,\r\n\t\t    pane = this._panes.overlayPane;\r\n\r\n\t\t// Hack to make flicker on drag end on mobile webkit less irritating\r\n\t\tif (L.Browser.mobileWebkit) {\r\n\t\t\tpane.removeChild(root);\r\n\t\t}\r\n\r\n\t\tL.DomUtil.setPosition(root, min);\r\n\t\troot.setAttribute('width', width);\r\n\t\troot.setAttribute('height', height);\r\n\t\troot.setAttribute('viewBox', [min.x, min.y, width, height].join(' '));\r\n\r\n\t\tif (L.Browser.mobileWebkit) {\r\n\t\t\tpane.appendChild(root);\r\n\t\t}\r\n\t}\r\n});\r\n\n\n/*\r\n * Popup extension to L.Path (polylines, polygons, circles), adding popup-related methods.\r\n */\r\n\r\nL.Path.include({\r\n\r\n\tbindPopup: function (content, options) {\r\n\r\n\t\tif (content instanceof L.Popup) {\r\n\t\t\tthis._popup = content;\r\n\t\t} else {\r\n\t\t\tif (!this._popup || options) {\r\n\t\t\t\tthis._popup = new L.Popup(options, this);\r\n\t\t\t}\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tthis\r\n\t\t\t    .on('click', this._openPopup, this)\r\n\t\t\t    .on('remove', this.closePopup, this);\r\n\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunbindPopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup = null;\r\n\t\t\tthis\r\n\t\t\t    .off('click', this._openPopup)\r\n\t\t\t    .off('remove', this.closePopup);\r\n\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\topenPopup: function (latlng) {\r\n\r\n\t\tif (this._popup) {\r\n\t\t\t// open the popup from one of the path's points if not specified\r\n\t\t\tlatlng = latlng || this._latlng ||\r\n\t\t\t         this._latlngs[Math.floor(this._latlngs.length / 2)];\r\n\r\n\t\t\tthis._openPopup({latlng: latlng});\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tclosePopup: function () {\r\n\t\tif (this._popup) {\r\n\t\t\tthis._popup._close();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_openPopup: function (e) {\r\n\t\tthis._popup.setLatLng(e.latlng);\r\n\t\tthis._map.openPopup(this._popup);\r\n\t}\r\n});\r\n\n\n/*\r\n * Vector rendering for IE6-8 through VML.\r\n * Thanks to Dmitry Baranovsky and his Raphael library for inspiration!\r\n */\r\n\r\nL.Browser.vml = !L.Browser.svg && (function () {\r\n\ttry {\r\n\t\tvar div = document.createElement('div');\r\n\t\tdiv.innerHTML = '<v:shape adj=\"1\"/>';\r\n\r\n\t\tvar shape = div.firstChild;\r\n\t\tshape.style.behavior = 'url(#default#VML)';\r\n\r\n\t\treturn shape && (typeof shape.adj === 'object');\r\n\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t}\r\n}());\r\n\r\nL.Path = L.Browser.svg || !L.Browser.vml ? L.Path : L.Path.extend({\r\n\tstatics: {\r\n\t\tVML: true,\r\n\t\tCLIP_PADDING: 0.02\r\n\t},\r\n\r\n\t_createElement: (function () {\r\n\t\ttry {\r\n\t\t\tdocument.namespaces.add('lvml', 'urn:schemas-microsoft-com:vml');\r\n\t\t\treturn function (name) {\r\n\t\t\t\treturn document.createElement('<lvml:' + name + ' class=\"lvml\">');\r\n\t\t\t};\r\n\t\t} catch (e) {\r\n\t\t\treturn function (name) {\r\n\t\t\t\treturn document.createElement(\r\n\t\t\t\t        '<' + name + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"lvml\">');\r\n\t\t\t};\r\n\t\t}\r\n\t}()),\r\n\r\n\t_initPath: function () {\r\n\t\tvar container = this._container = this._createElement('shape');\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-vml-shape' +\r\n\t\t\t(this.options.className ? ' ' + this.options.className : ''));\r\n\r\n\t\tif (this.options.clickable) {\r\n\t\t\tL.DomUtil.addClass(container, 'leaflet-clickable');\r\n\t\t}\r\n\r\n\t\tcontainer.coordsize = '1 1';\r\n\r\n\t\tthis._path = this._createElement('path');\r\n\t\tcontainer.appendChild(this._path);\r\n\r\n\t\tthis._map._pathRoot.appendChild(container);\r\n\t},\r\n\r\n\t_initStyle: function () {\r\n\t\tthis._updateStyle();\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tvar stroke = this._stroke,\r\n\t\t    fill = this._fill,\r\n\t\t    options = this.options,\r\n\t\t    container = this._container;\r\n\r\n\t\tcontainer.stroked = options.stroke;\r\n\t\tcontainer.filled = options.fill;\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tif (!stroke) {\r\n\t\t\t\tstroke = this._stroke = this._createElement('stroke');\r\n\t\t\t\tstroke.endcap = 'round';\r\n\t\t\t\tcontainer.appendChild(stroke);\r\n\t\t\t}\r\n\t\t\tstroke.weight = options.weight + 'px';\r\n\t\t\tstroke.color = options.color;\r\n\t\t\tstroke.opacity = options.opacity;\r\n\r\n\t\t\tif (options.dashArray) {\r\n\t\t\t\tstroke.dashStyle = L.Util.isArray(options.dashArray) ?\r\n\t\t\t\t    options.dashArray.join(' ') :\r\n\t\t\t\t    options.dashArray.replace(/( *, *)/g, ' ');\r\n\t\t\t} else {\r\n\t\t\t\tstroke.dashStyle = '';\r\n\t\t\t}\r\n\t\t\tif (options.lineCap) {\r\n\t\t\t\tstroke.endcap = options.lineCap.replace('butt', 'flat');\r\n\t\t\t}\r\n\t\t\tif (options.lineJoin) {\r\n\t\t\t\tstroke.joinstyle = options.lineJoin;\r\n\t\t\t}\r\n\r\n\t\t} else if (stroke) {\r\n\t\t\tcontainer.removeChild(stroke);\r\n\t\t\tthis._stroke = null;\r\n\t\t}\r\n\r\n\t\tif (options.fill) {\r\n\t\t\tif (!fill) {\r\n\t\t\t\tfill = this._fill = this._createElement('fill');\r\n\t\t\t\tcontainer.appendChild(fill);\r\n\t\t\t}\r\n\t\t\tfill.color = options.fillColor || options.color;\r\n\t\t\tfill.opacity = options.fillOpacity;\r\n\r\n\t\t} else if (fill) {\r\n\t\t\tcontainer.removeChild(fill);\r\n\t\t\tthis._fill = null;\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tvar style = this._container.style;\r\n\r\n\t\tstyle.display = 'none';\r\n\t\tthis._path.v = this.getPathString() + ' '; // the space fixes IE empty path string bug\r\n\t\tstyle.display = '';\r\n\t}\r\n});\r\n\r\nL.Map.include(L.Browser.svg || !L.Browser.vml ? {} : {\r\n\t_initPathRoot: function () {\r\n\t\tif (this._pathRoot) { return; }\r\n\r\n\t\tvar root = this._pathRoot = document.createElement('div');\r\n\t\troot.className = 'leaflet-vml-container';\r\n\t\tthis._panes.overlayPane.appendChild(root);\r\n\r\n\t\tthis.on('moveend', this._updatePathViewport);\r\n\t\tthis._updatePathViewport();\r\n\t}\r\n});\r\n\n\n/*\r\n * Vector rendering for all browsers that support canvas.\r\n */\r\n\r\nL.Browser.canvas = (function () {\r\n\treturn !!document.createElement('canvas').getContext;\r\n}());\r\n\r\nL.Path = (L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? L.Path : L.Path.extend({\r\n\tstatics: {\r\n\t\t//CLIP_PADDING: 0.02, // not sure if there's a need to set it to a small value\r\n\t\tCANVAS: true,\r\n\t\tSVG: false\r\n\t},\r\n\r\n\tredraw: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis.projectLatlngs();\r\n\t\t\tthis._requestUpdate();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tL.setOptions(this, style);\r\n\r\n\t\tif (this._map) {\r\n\t\t\tthis._updateStyle();\r\n\t\t\tthis._requestUpdate();\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('viewreset', this.projectLatlngs, this)\r\n\t\t    .off('moveend', this._updatePath, this);\r\n\r\n\t\tif (this.options.clickable) {\r\n\t\t\tthis._map.off('click', this._onClick, this);\r\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\r\n\t\t}\r\n\r\n\t\tthis._requestUpdate();\r\n\t\t\r\n\t\tthis.fire('remove');\r\n\t\tthis._map = null;\r\n\t},\r\n\r\n\t_requestUpdate: function () {\r\n\t\tif (this._map && !L.Path._updateRequest) {\r\n\t\t\tL.Path._updateRequest = L.Util.requestAnimFrame(this._fireMapMoveEnd, this._map);\r\n\t\t}\r\n\t},\r\n\r\n\t_fireMapMoveEnd: function () {\r\n\t\tL.Path._updateRequest = null;\r\n\t\tthis.fire('moveend');\r\n\t},\r\n\r\n\t_initElements: function () {\r\n\t\tthis._map._initPathRoot();\r\n\t\tthis._ctx = this._map._canvasCtx;\r\n\t},\r\n\r\n\t_updateStyle: function () {\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tthis._ctx.lineWidth = options.weight;\r\n\t\t\tthis._ctx.strokeStyle = options.color;\r\n\t\t}\r\n\t\tif (options.fill) {\r\n\t\t\tthis._ctx.fillStyle = options.fillColor || options.color;\r\n\t\t}\r\n\t},\r\n\r\n\t_drawPath: function () {\r\n\t\tvar i, j, len, len2, point, drawMethod;\r\n\r\n\t\tthis._ctx.beginPath();\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tfor (j = 0, len2 = this._parts[i].length; j < len2; j++) {\r\n\t\t\t\tpoint = this._parts[i][j];\r\n\t\t\t\tdrawMethod = (j === 0 ? 'move' : 'line') + 'To';\r\n\r\n\t\t\t\tthis._ctx[drawMethod](point.x, point.y);\r\n\t\t\t}\r\n\t\t\t// TODO refactor ugly hack\r\n\t\t\tif (this instanceof L.Polygon) {\r\n\t\t\t\tthis._ctx.closePath();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_checkIfEmpty: function () {\r\n\t\treturn !this._parts.length;\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tif (this._checkIfEmpty()) { return; }\r\n\r\n\t\tvar ctx = this._ctx,\r\n\t\t    options = this.options;\r\n\r\n\t\tthis._drawPath();\r\n\t\tctx.save();\r\n\t\tthis._updateStyle();\r\n\r\n\t\tif (options.fill) {\r\n\t\t\tctx.globalAlpha = options.fillOpacity;\r\n\t\t\tctx.fill();\r\n\t\t}\r\n\r\n\t\tif (options.stroke) {\r\n\t\t\tctx.globalAlpha = options.opacity;\r\n\t\t\tctx.stroke();\r\n\t\t}\r\n\r\n\t\tctx.restore();\r\n\r\n\t\t// TODO optimization: 1 fill/stroke for all features with equal style instead of 1 for each feature\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tif (this.options.clickable) {\r\n\t\t\t// TODO dblclick\r\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\r\n\t\t\tthis._map.on('click', this._onClick, this);\r\n\t\t}\r\n\t},\r\n\r\n\t_onClick: function (e) {\r\n\t\tif (this._containsPoint(e.layerPoint)) {\r\n\t\t\tthis.fire('click', e);\r\n\t\t}\r\n\t},\r\n\r\n\t_onMouseMove: function (e) {\r\n\t\tif (!this._map || this._map._animatingZoom) { return; }\r\n\r\n\t\t// TODO don't do on each move\r\n\t\tif (this._containsPoint(e.layerPoint)) {\r\n\t\t\tthis._ctx.canvas.style.cursor = 'pointer';\r\n\t\t\tthis._mouseInside = true;\r\n\t\t\tthis.fire('mouseover', e);\r\n\r\n\t\t} else if (this._mouseInside) {\r\n\t\t\tthis._ctx.canvas.style.cursor = '';\r\n\t\t\tthis._mouseInside = false;\r\n\t\t\tthis.fire('mouseout', e);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.include((L.Path.SVG && !window.L_PREFER_CANVAS) || !L.Browser.canvas ? {} : {\r\n\t_initPathRoot: function () {\r\n\t\tvar root = this._pathRoot,\r\n\t\t    ctx;\r\n\r\n\t\tif (!root) {\r\n\t\t\troot = this._pathRoot = document.createElement('canvas');\r\n\t\t\troot.style.position = 'absolute';\r\n\t\t\tctx = this._canvasCtx = root.getContext('2d');\r\n\r\n\t\t\tctx.lineCap = 'round';\r\n\t\t\tctx.lineJoin = 'round';\r\n\r\n\t\t\tthis._panes.overlayPane.appendChild(root);\r\n\r\n\t\t\tif (this.options.zoomAnimation) {\r\n\t\t\t\tthis._pathRoot.className = 'leaflet-zoom-animated';\r\n\t\t\t\tthis.on('zoomanim', this._animatePathZoom);\r\n\t\t\t\tthis.on('zoomend', this._endPathZoom);\r\n\t\t\t}\r\n\t\t\tthis.on('moveend', this._updateCanvasViewport);\r\n\t\t\tthis._updateCanvasViewport();\r\n\t\t}\r\n\t},\r\n\r\n\t_updateCanvasViewport: function () {\r\n\t\t// don't redraw while zooming. See _updateSvgViewport for more details\r\n\t\tif (this._pathZooming) { return; }\r\n\t\tthis._updatePathViewport();\r\n\r\n\t\tvar vp = this._pathViewport,\r\n\t\t    min = vp.min,\r\n\t\t    size = vp.max.subtract(min),\r\n\t\t    root = this._pathRoot;\r\n\r\n\t\t//TODO check if this works properly on mobile webkit\r\n\t\tL.DomUtil.setPosition(root, min);\r\n\t\troot.width = size.x;\r\n\t\troot.height = size.y;\r\n\t\troot.getContext('2d').translate(-min.x, -min.y);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.LineUtil contains different utility functions for line segments\r\n * and polylines (clipping, simplification, distances, etc.)\r\n */\r\n\r\n/*jshint bitwise:false */ // allow bitwise operations for this file\r\n\r\nL.LineUtil = {\r\n\r\n\t// Simplify polyline with vertex reduction and Douglas-Peucker simplification.\r\n\t// Improves rendering performance dramatically by lessening the number of points to draw.\r\n\r\n\tsimplify: function (/*Point[]*/ points, /*Number*/ tolerance) {\r\n\t\tif (!tolerance || !points.length) {\r\n\t\t\treturn points.slice();\r\n\t\t}\r\n\r\n\t\tvar sqTolerance = tolerance * tolerance;\r\n\r\n\t\t// stage 1: vertex reduction\r\n\t\tpoints = this._reducePoints(points, sqTolerance);\r\n\r\n\t\t// stage 2: Douglas-Peucker simplification\r\n\t\tpoints = this._simplifyDP(points, sqTolerance);\r\n\r\n\t\treturn points;\r\n\t},\r\n\r\n\t// distance from a point to a segment between two points\r\n\tpointToSegmentDistance:  function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\r\n\t\treturn Math.sqrt(this._sqClosestPointOnSegment(p, p1, p2, true));\r\n\t},\r\n\r\n\tclosestPointOnSegment: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\r\n\t\treturn this._sqClosestPointOnSegment(p, p1, p2);\r\n\t},\r\n\r\n\t// Douglas-Peucker simplification, see http://en.wikipedia.org/wiki/Douglas-Peucker_algorithm\r\n\t_simplifyDP: function (points, sqTolerance) {\r\n\r\n\t\tvar len = points.length,\r\n\t\t    ArrayConstructor = typeof Uint8Array !== undefined + '' ? Uint8Array : Array,\r\n\t\t    markers = new ArrayConstructor(len);\r\n\r\n\t\tmarkers[0] = markers[len - 1] = 1;\r\n\r\n\t\tthis._simplifyDPStep(points, markers, sqTolerance, 0, len - 1);\r\n\r\n\t\tvar i,\r\n\t\t    newPoints = [];\r\n\r\n\t\tfor (i = 0; i < len; i++) {\r\n\t\t\tif (markers[i]) {\r\n\t\t\t\tnewPoints.push(points[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newPoints;\r\n\t},\r\n\r\n\t_simplifyDPStep: function (points, markers, sqTolerance, first, last) {\r\n\r\n\t\tvar maxSqDist = 0,\r\n\t\t    index, i, sqDist;\r\n\r\n\t\tfor (i = first + 1; i <= last - 1; i++) {\r\n\t\t\tsqDist = this._sqClosestPointOnSegment(points[i], points[first], points[last], true);\r\n\r\n\t\t\tif (sqDist > maxSqDist) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tmaxSqDist = sqDist;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (maxSqDist > sqTolerance) {\r\n\t\t\tmarkers[index] = 1;\r\n\r\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, first, index);\r\n\t\t\tthis._simplifyDPStep(points, markers, sqTolerance, index, last);\r\n\t\t}\r\n\t},\r\n\r\n\t// reduce points that are too close to each other to a single point\r\n\t_reducePoints: function (points, sqTolerance) {\r\n\t\tvar reducedPoints = [points[0]];\r\n\r\n\t\tfor (var i = 1, prev = 0, len = points.length; i < len; i++) {\r\n\t\t\tif (this._sqDist(points[i], points[prev]) > sqTolerance) {\r\n\t\t\t\treducedPoints.push(points[i]);\r\n\t\t\t\tprev = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (prev < len - 1) {\r\n\t\t\treducedPoints.push(points[len - 1]);\r\n\t\t}\r\n\t\treturn reducedPoints;\r\n\t},\r\n\r\n\t// Cohen-Sutherland line clipping algorithm.\r\n\t// Used to avoid rendering parts of a polyline that are not currently visible.\r\n\r\n\tclipSegment: function (a, b, bounds, useLastCode) {\r\n\t\tvar codeA = useLastCode ? this._lastCode : this._getBitCode(a, bounds),\r\n\t\t    codeB = this._getBitCode(b, bounds),\r\n\r\n\t\t    codeOut, p, newCode;\r\n\r\n\t\t// save 2nd code to avoid calculating it on the next segment\r\n\t\tthis._lastCode = codeB;\r\n\r\n\t\twhile (true) {\r\n\t\t\t// if a,b is inside the clip window (trivial accept)\r\n\t\t\tif (!(codeA | codeB)) {\r\n\t\t\t\treturn [a, b];\r\n\t\t\t// if a,b is outside the clip window (trivial reject)\r\n\t\t\t} else if (codeA & codeB) {\r\n\t\t\t\treturn false;\r\n\t\t\t// other cases\r\n\t\t\t} else {\r\n\t\t\t\tcodeOut = codeA || codeB;\r\n\t\t\t\tp = this._getEdgeIntersection(a, b, codeOut, bounds);\r\n\t\t\t\tnewCode = this._getBitCode(p, bounds);\r\n\r\n\t\t\t\tif (codeOut === codeA) {\r\n\t\t\t\t\ta = p;\r\n\t\t\t\t\tcodeA = newCode;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb = p;\r\n\t\t\t\t\tcodeB = newCode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_getEdgeIntersection: function (a, b, code, bounds) {\r\n\t\tvar dx = b.x - a.x,\r\n\t\t    dy = b.y - a.y,\r\n\t\t    min = bounds.min,\r\n\t\t    max = bounds.max;\r\n\r\n\t\tif (code & 8) { // top\r\n\t\t\treturn new L.Point(a.x + dx * (max.y - a.y) / dy, max.y);\r\n\t\t} else if (code & 4) { // bottom\r\n\t\t\treturn new L.Point(a.x + dx * (min.y - a.y) / dy, min.y);\r\n\t\t} else if (code & 2) { // right\r\n\t\t\treturn new L.Point(max.x, a.y + dy * (max.x - a.x) / dx);\r\n\t\t} else if (code & 1) { // left\r\n\t\t\treturn new L.Point(min.x, a.y + dy * (min.x - a.x) / dx);\r\n\t\t}\r\n\t},\r\n\r\n\t_getBitCode: function (/*Point*/ p, bounds) {\r\n\t\tvar code = 0;\r\n\r\n\t\tif (p.x < bounds.min.x) { // left\r\n\t\t\tcode |= 1;\r\n\t\t} else if (p.x > bounds.max.x) { // right\r\n\t\t\tcode |= 2;\r\n\t\t}\r\n\t\tif (p.y < bounds.min.y) { // bottom\r\n\t\t\tcode |= 4;\r\n\t\t} else if (p.y > bounds.max.y) { // top\r\n\t\t\tcode |= 8;\r\n\t\t}\r\n\r\n\t\treturn code;\r\n\t},\r\n\r\n\t// square distance (to avoid unnecessary Math.sqrt calls)\r\n\t_sqDist: function (p1, p2) {\r\n\t\tvar dx = p2.x - p1.x,\r\n\t\t    dy = p2.y - p1.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\t},\r\n\r\n\t// return closest point on segment or distance to that point\r\n\t_sqClosestPointOnSegment: function (p, p1, p2, sqDist) {\r\n\t\tvar x = p1.x,\r\n\t\t    y = p1.y,\r\n\t\t    dx = p2.x - x,\r\n\t\t    dy = p2.y - y,\r\n\t\t    dot = dx * dx + dy * dy,\r\n\t\t    t;\r\n\r\n\t\tif (dot > 0) {\r\n\t\t\tt = ((p.x - x) * dx + (p.y - y) * dy) / dot;\r\n\r\n\t\t\tif (t > 1) {\r\n\t\t\t\tx = p2.x;\r\n\t\t\t\ty = p2.y;\r\n\t\t\t} else if (t > 0) {\r\n\t\t\t\tx += dx * t;\r\n\t\t\t\ty += dy * t;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdx = p.x - x;\r\n\t\tdy = p.y - y;\r\n\r\n\t\treturn sqDist ? dx * dx + dy * dy : new L.Point(x, y);\r\n\t}\r\n};\r\n\n\n/*\r\n * L.Polyline is used to display polylines on a map.\r\n */\r\n\r\nL.Polyline = L.Path.extend({\r\n\tinitialize: function (latlngs, options) {\r\n\t\tL.Path.prototype.initialize.call(this, options);\r\n\r\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\r\n\t},\r\n\r\n\toptions: {\r\n\t\t// how much to simplify the polyline on each zoom level\r\n\t\t// more = better performance and smoother look, less = more accurate\r\n\t\tsmoothFactor: 1.0,\r\n\t\tnoClip: false\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tthis._originalPoints = [];\r\n\r\n\t\tfor (var i = 0, len = this._latlngs.length; i < len; i++) {\r\n\t\t\tthis._originalPoints[i] = this._map.latLngToLayerPoint(this._latlngs[i]);\r\n\t\t}\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\tfor (var i = 0, len = this._parts.length, str = ''; i < len; i++) {\r\n\t\t\tstr += this._getPathPartStr(this._parts[i]);\r\n\t\t}\r\n\t\treturn str;\r\n\t},\r\n\r\n\tgetLatLngs: function () {\r\n\t\treturn this._latlngs;\r\n\t},\r\n\r\n\tsetLatLngs: function (latlngs) {\r\n\t\tthis._latlngs = this._convertLatLngs(latlngs);\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\taddLatLng: function (latlng) {\r\n\t\tthis._latlngs.push(L.latLng(latlng));\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tspliceLatLngs: function () { // (Number index, Number howMany)\r\n\t\tvar removed = [].splice.apply(this._latlngs, arguments);\r\n\t\tthis._convertLatLngs(this._latlngs, true);\r\n\t\tthis.redraw();\r\n\t\treturn removed;\r\n\t},\r\n\r\n\tclosestLayerPoint: function (p) {\r\n\t\tvar minDistance = Infinity, parts = this._parts, p1, p2, minPoint = null;\r\n\r\n\t\tfor (var j = 0, jLen = parts.length; j < jLen; j++) {\r\n\t\t\tvar points = parts[j];\r\n\t\t\tfor (var i = 1, len = points.length; i < len; i++) {\r\n\t\t\t\tp1 = points[i - 1];\r\n\t\t\t\tp2 = points[i];\r\n\t\t\t\tvar sqDist = L.LineUtil._sqClosestPointOnSegment(p, p1, p2, true);\r\n\t\t\t\tif (sqDist < minDistance) {\r\n\t\t\t\t\tminDistance = sqDist;\r\n\t\t\t\t\tminPoint = L.LineUtil._sqClosestPointOnSegment(p, p1, p2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (minPoint) {\r\n\t\t\tminPoint.distance = Math.sqrt(minDistance);\r\n\t\t}\r\n\t\treturn minPoint;\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\treturn new L.LatLngBounds(this.getLatLngs());\r\n\t},\r\n\r\n\t_convertLatLngs: function (latlngs, overwrite) {\r\n\t\tvar i, len, target = overwrite ? latlngs : [];\r\n\r\n\t\tfor (i = 0, len = latlngs.length; i < len; i++) {\r\n\t\t\tif (L.Util.isArray(latlngs[i]) && typeof latlngs[i][0] !== 'number') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttarget[i] = L.latLng(latlngs[i]);\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\r\n\t_initEvents: function () {\r\n\t\tL.Path.prototype._initEvents.call(this);\r\n\t},\r\n\r\n\t_getPathPartStr: function (points) {\r\n\t\tvar round = L.Path.VML;\r\n\r\n\t\tfor (var j = 0, len2 = points.length, str = '', p; j < len2; j++) {\r\n\t\t\tp = points[j];\r\n\t\t\tif (round) {\r\n\t\t\t\tp._round();\r\n\t\t\t}\r\n\t\t\tstr += (j ? 'L' : 'M') + p.x + ' ' + p.y;\r\n\t\t}\r\n\t\treturn str;\r\n\t},\r\n\r\n\t_clipPoints: function () {\r\n\t\tvar points = this._originalPoints,\r\n\t\t    len = points.length,\r\n\t\t    i, k, segment;\r\n\r\n\t\tif (this.options.noClip) {\r\n\t\t\tthis._parts = [points];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._parts = [];\r\n\r\n\t\tvar parts = this._parts,\r\n\t\t    vp = this._map._pathViewport,\r\n\t\t    lu = L.LineUtil;\r\n\r\n\t\tfor (i = 0, k = 0; i < len - 1; i++) {\r\n\t\t\tsegment = lu.clipSegment(points[i], points[i + 1], vp, i);\r\n\t\t\tif (!segment) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tparts[k] = parts[k] || [];\r\n\t\t\tparts[k].push(segment[0]);\r\n\r\n\t\t\t// if segment goes out of screen, or it's the last one, it's the end of the line part\r\n\t\t\tif ((segment[1] !== points[i + 1]) || (i === len - 2)) {\r\n\t\t\t\tparts[k].push(segment[1]);\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// simplify each clipped part of the polyline\r\n\t_simplifyPoints: function () {\r\n\t\tvar parts = this._parts,\r\n\t\t    lu = L.LineUtil;\r\n\r\n\t\tfor (var i = 0, len = parts.length; i < len; i++) {\r\n\t\t\tparts[i] = lu.simplify(parts[i], this.options.smoothFactor);\r\n\t\t}\r\n\t},\r\n\r\n\t_updatePath: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tthis._clipPoints();\r\n\t\tthis._simplifyPoints();\r\n\r\n\t\tL.Path.prototype._updatePath.call(this);\r\n\t}\r\n});\r\n\r\nL.polyline = function (latlngs, options) {\r\n\treturn new L.Polyline(latlngs, options);\r\n};\r\n\n\n/*\r\n * L.PolyUtil contains utility functions for polygons (clipping, etc.).\r\n */\r\n\r\n/*jshint bitwise:false */ // allow bitwise operations here\r\n\r\nL.PolyUtil = {};\r\n\r\n/*\r\n * Sutherland-Hodgeman polygon clipping algorithm.\r\n * Used to avoid rendering parts of a polygon that are not currently visible.\r\n */\r\nL.PolyUtil.clipPolygon = function (points, bounds) {\r\n\tvar clippedPoints,\r\n\t    edges = [1, 4, 2, 8],\r\n\t    i, j, k,\r\n\t    a, b,\r\n\t    len, edge, p,\r\n\t    lu = L.LineUtil;\r\n\r\n\tfor (i = 0, len = points.length; i < len; i++) {\r\n\t\tpoints[i]._code = lu._getBitCode(points[i], bounds);\r\n\t}\r\n\r\n\t// for each edge (left, bottom, right, top)\r\n\tfor (k = 0; k < 4; k++) {\r\n\t\tedge = edges[k];\r\n\t\tclippedPoints = [];\r\n\r\n\t\tfor (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n\t\t\ta = points[i];\r\n\t\t\tb = points[j];\r\n\r\n\t\t\t// if a is inside the clip window\r\n\t\t\tif (!(a._code & edge)) {\r\n\t\t\t\t// if b is outside the clip window (a->b goes out of screen)\r\n\t\t\t\tif (b._code & edge) {\r\n\t\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\r\n\t\t\t\t\tp._code = lu._getBitCode(p, bounds);\r\n\t\t\t\t\tclippedPoints.push(p);\r\n\t\t\t\t}\r\n\t\t\t\tclippedPoints.push(a);\r\n\r\n\t\t\t// else if b is inside the clip window (a->b enters the screen)\r\n\t\t\t} else if (!(b._code & edge)) {\r\n\t\t\t\tp = lu._getEdgeIntersection(b, a, edge, bounds);\r\n\t\t\t\tp._code = lu._getBitCode(p, bounds);\r\n\t\t\t\tclippedPoints.push(p);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpoints = clippedPoints;\r\n\t}\r\n\r\n\treturn points;\r\n};\r\n\n\n/*\r\n * L.Polygon is used to display polygons on a map.\r\n */\r\n\r\nL.Polygon = L.Polyline.extend({\r\n\toptions: {\r\n\t\tfill: true\r\n\t},\r\n\r\n\tinitialize: function (latlngs, options) {\r\n\t\tL.Polyline.prototype.initialize.call(this, latlngs, options);\r\n\t\tthis._initWithHoles(latlngs);\r\n\t},\r\n\r\n\t_initWithHoles: function (latlngs) {\r\n\t\tvar i, len, hole;\r\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\r\n\t\t\tthis._latlngs = this._convertLatLngs(latlngs[0]);\r\n\t\t\tthis._holes = latlngs.slice(1);\r\n\r\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\t\thole = this._holes[i] = this._convertLatLngs(this._holes[i]);\r\n\t\t\t\tif (hole[0].equals(hole[hole.length - 1])) {\r\n\t\t\t\t\thole.pop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// filter out last point if its equal to the first one\r\n\t\tlatlngs = this._latlngs;\r\n\r\n\t\tif (latlngs.length >= 2 && latlngs[0].equals(latlngs[latlngs.length - 1])) {\r\n\t\t\tlatlngs.pop();\r\n\t\t}\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tL.Polyline.prototype.projectLatlngs.call(this);\r\n\r\n\t\t// project polygon holes points\r\n\t\t// TODO move this logic to Polyline to get rid of duplication\r\n\t\tthis._holePoints = [];\r\n\r\n\t\tif (!this._holes) { return; }\r\n\r\n\t\tvar i, j, len, len2;\r\n\r\n\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\tthis._holePoints[i] = [];\r\n\r\n\t\t\tfor (j = 0, len2 = this._holes[i].length; j < len2; j++) {\r\n\t\t\t\tthis._holePoints[i][j] = this._map.latLngToLayerPoint(this._holes[i][j]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetLatLngs: function (latlngs) {\r\n\t\tif (latlngs && L.Util.isArray(latlngs[0]) && (typeof latlngs[0][0] !== 'number')) {\r\n\t\t\tthis._initWithHoles(latlngs);\r\n\t\t\treturn this.redraw();\r\n\t\t} else {\r\n\t\t\treturn L.Polyline.prototype.setLatLngs.call(this, latlngs);\r\n\t\t}\r\n\t},\r\n\r\n\t_clipPoints: function () {\r\n\t\tvar points = this._originalPoints,\r\n\t\t    newParts = [];\r\n\r\n\t\tthis._parts = [points].concat(this._holePoints);\r\n\r\n\t\tif (this.options.noClip) { return; }\r\n\r\n\t\tfor (var i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tvar clipped = L.PolyUtil.clipPolygon(this._parts[i], this._map._pathViewport);\r\n\t\t\tif (clipped.length) {\r\n\t\t\t\tnewParts.push(clipped);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._parts = newParts;\r\n\t},\r\n\r\n\t_getPathPartStr: function (points) {\r\n\t\tvar str = L.Polyline.prototype._getPathPartStr.call(this, points);\r\n\t\treturn str + (L.Browser.svg ? 'z' : 'x');\r\n\t}\r\n});\r\n\r\nL.polygon = function (latlngs, options) {\r\n\treturn new L.Polygon(latlngs, options);\r\n};\r\n\n\n/*\r\n * Contains L.MultiPolyline and L.MultiPolygon layers.\r\n */\r\n\r\n(function () {\r\n\tfunction createMulti(Klass) {\r\n\r\n\t\treturn L.FeatureGroup.extend({\r\n\r\n\t\t\tinitialize: function (latlngs, options) {\r\n\t\t\t\tthis._layers = {};\r\n\t\t\t\tthis._options = options;\r\n\t\t\t\tthis.setLatLngs(latlngs);\r\n\t\t\t},\r\n\r\n\t\t\tsetLatLngs: function (latlngs) {\r\n\t\t\t\tvar i = 0,\r\n\t\t\t\t    len = latlngs.length;\r\n\r\n\t\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\t\tif (i < len) {\r\n\t\t\t\t\t\tlayer.setLatLngs(latlngs[i++]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.removeLayer(layer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\twhile (i < len) {\r\n\t\t\t\t\tthis.addLayer(new Klass(latlngs[i++], this._options));\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\r\n\t\t\tgetLatLngs: function () {\r\n\t\t\t\tvar latlngs = [];\r\n\r\n\t\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\t\tlatlngs.push(layer.getLatLngs());\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn latlngs;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tL.MultiPolyline = createMulti(L.Polyline);\r\n\tL.MultiPolygon = createMulti(L.Polygon);\r\n\r\n\tL.multiPolyline = function (latlngs, options) {\r\n\t\treturn new L.MultiPolyline(latlngs, options);\r\n\t};\r\n\r\n\tL.multiPolygon = function (latlngs, options) {\r\n\t\treturn new L.MultiPolygon(latlngs, options);\r\n\t};\r\n}());\r\n\n\n/*\r\n * L.Rectangle extends Polygon and creates a rectangle when passed a LatLngBounds object.\r\n */\r\n\r\nL.Rectangle = L.Polygon.extend({\r\n\tinitialize: function (latLngBounds, options) {\r\n\t\tL.Polygon.prototype.initialize.call(this, this._boundsToLatLngs(latLngBounds), options);\r\n\t},\r\n\r\n\tsetBounds: function (latLngBounds) {\r\n\t\tthis.setLatLngs(this._boundsToLatLngs(latLngBounds));\r\n\t},\r\n\r\n\t_boundsToLatLngs: function (latLngBounds) {\r\n\t\tlatLngBounds = L.latLngBounds(latLngBounds);\r\n\t\treturn [\r\n\t\t\tlatLngBounds.getSouthWest(),\r\n\t\t\tlatLngBounds.getNorthWest(),\r\n\t\t\tlatLngBounds.getNorthEast(),\r\n\t\t\tlatLngBounds.getSouthEast()\r\n\t\t];\r\n\t}\r\n});\r\n\r\nL.rectangle = function (latLngBounds, options) {\r\n\treturn new L.Rectangle(latLngBounds, options);\r\n};\r\n\n\n/*\r\n * L.Circle is a circle overlay (with a certain radius in meters).\r\n */\r\n\r\nL.Circle = L.Path.extend({\r\n\tinitialize: function (latlng, radius, options) {\r\n\t\tL.Path.prototype.initialize.call(this, options);\r\n\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\tthis._mRadius = radius;\r\n\t},\r\n\r\n\toptions: {\r\n\t\tfill: true\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tthis._latlng = L.latLng(latlng);\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tsetRadius: function (radius) {\r\n\t\tthis._mRadius = radius;\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tvar lngRadius = this._getLngRadius(),\r\n\t\t    latlng = this._latlng,\r\n\t\t    pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]);\r\n\r\n\t\tthis._point = this._map.latLngToLayerPoint(latlng);\r\n\t\tthis._radius = Math.max(this._point.x - pointLeft.x, 1);\r\n\t},\r\n\r\n\tgetBounds: function () {\r\n\t\tvar lngRadius = this._getLngRadius(),\r\n\t\t    latRadius = (this._mRadius / 40075017) * 360,\r\n\t\t    latlng = this._latlng;\r\n\r\n\t\treturn new L.LatLngBounds(\r\n\t\t        [latlng.lat - latRadius, latlng.lng - lngRadius],\r\n\t\t        [latlng.lat + latRadius, latlng.lng + lngRadius]);\r\n\t},\r\n\r\n\tgetLatLng: function () {\r\n\t\treturn this._latlng;\r\n\t},\r\n\r\n\tgetPathString: function () {\r\n\t\tvar p = this._point,\r\n\t\t    r = this._radius;\r\n\r\n\t\tif (this._checkIfEmpty()) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\tif (L.Browser.svg) {\r\n\t\t\treturn 'M' + p.x + ',' + (p.y - r) +\r\n\t\t\t       'A' + r + ',' + r + ',0,1,1,' +\r\n\t\t\t       (p.x - 0.1) + ',' + (p.y - r) + ' z';\r\n\t\t} else {\r\n\t\t\tp._round();\r\n\t\t\tr = Math.round(r);\r\n\t\t\treturn 'AL ' + p.x + ',' + p.y + ' ' + r + ',' + r + ' 0,' + (65535 * 360);\r\n\t\t}\r\n\t},\r\n\r\n\tgetRadius: function () {\r\n\t\treturn this._mRadius;\r\n\t},\r\n\r\n\t// TODO Earth hardcoded, move into projection code!\r\n\r\n\t_getLatRadius: function () {\r\n\t\treturn (this._mRadius / 40075017) * 360;\r\n\t},\r\n\r\n\t_getLngRadius: function () {\r\n\t\treturn this._getLatRadius() / Math.cos(L.LatLng.DEG_TO_RAD * this._latlng.lat);\r\n\t},\r\n\r\n\t_checkIfEmpty: function () {\r\n\t\tif (!this._map) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar vp = this._map._pathViewport,\r\n\t\t    r = this._radius,\r\n\t\t    p = this._point;\r\n\r\n\t\treturn p.x - r > vp.max.x || p.y - r > vp.max.y ||\r\n\t\t       p.x + r < vp.min.x || p.y + r < vp.min.y;\r\n\t}\r\n});\r\n\r\nL.circle = function (latlng, radius, options) {\r\n\treturn new L.Circle(latlng, radius, options);\r\n};\r\n\n\n/*\r\n * L.CircleMarker is a circle overlay with a permanent pixel radius.\r\n */\r\n\r\nL.CircleMarker = L.Circle.extend({\r\n\toptions: {\r\n\t\tradius: 10,\r\n\t\tweight: 2\r\n\t},\r\n\r\n\tinitialize: function (latlng, options) {\r\n\t\tL.Circle.prototype.initialize.call(this, latlng, null, options);\r\n\t\tthis._radius = this.options.radius;\r\n\t},\r\n\r\n\tprojectLatlngs: function () {\r\n\t\tthis._point = this._map.latLngToLayerPoint(this._latlng);\r\n\t},\r\n\r\n\t_updateStyle : function () {\r\n\t\tL.Circle.prototype._updateStyle.call(this);\r\n\t\tthis.setRadius(this.options.radius);\r\n\t},\r\n\r\n\tsetLatLng: function (latlng) {\r\n\t\tL.Circle.prototype.setLatLng.call(this, latlng);\r\n\t\tif (this._popup && this._popup._isOpen) {\r\n\t\t\tthis._popup.setLatLng(latlng);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetRadius: function (radius) {\r\n\t\tthis.options.radius = this._radius = radius;\r\n\t\treturn this.redraw();\r\n\t},\r\n\r\n\tgetRadius: function () {\r\n\t\treturn this._radius;\r\n\t}\r\n});\r\n\r\nL.circleMarker = function (latlng, options) {\r\n\treturn new L.CircleMarker(latlng, options);\r\n};\r\n\n\n/*\r\n * Extends L.Polyline to be able to manually detect clicks on Canvas-rendered polylines.\r\n */\r\n\r\nL.Polyline.include(!L.Path.CANVAS ? {} : {\r\n\t_containsPoint: function (p, closed) {\r\n\t\tvar i, j, k, len, len2, dist, part,\r\n\t\t    w = this.options.weight / 2;\r\n\r\n\t\tif (L.Browser.touch) {\r\n\t\t\tw += 10; // polyline click tolerance on touch devices\r\n\t\t}\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tpart = this._parts[i];\r\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\r\n\t\t\t\tif (!closed && (j === 0)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdist = L.LineUtil.pointToSegmentDistance(p, part[k], part[j]);\r\n\r\n\t\t\t\tif (dist <= w) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Polygon to be able to manually detect clicks on Canvas-rendered polygons.\r\n */\r\n\r\nL.Polygon.include(!L.Path.CANVAS ? {} : {\r\n\t_containsPoint: function (p) {\r\n\t\tvar inside = false,\r\n\t\t    part, p1, p2,\r\n\t\t    i, j, k,\r\n\t\t    len, len2;\r\n\r\n\t\t// TODO optimization: check if within bounds first\r\n\r\n\t\tif (L.Polyline.prototype._containsPoint.call(this, p, true)) {\r\n\t\t\t// click on polygon border\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// ray casting algorithm for detecting if point is in polygon\r\n\r\n\t\tfor (i = 0, len = this._parts.length; i < len; i++) {\r\n\t\t\tpart = this._parts[i];\r\n\r\n\t\t\tfor (j = 0, len2 = part.length, k = len2 - 1; j < len2; k = j++) {\r\n\t\t\t\tp1 = part[j];\r\n\t\t\t\tp2 = part[k];\r\n\r\n\t\t\t\tif (((p1.y > p.y) !== (p2.y > p.y)) &&\r\n\t\t\t\t\t\t(p.x < (p2.x - p1.x) * (p.y - p1.y) / (p2.y - p1.y) + p1.x)) {\r\n\t\t\t\t\tinside = !inside;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn inside;\r\n\t}\r\n});\r\n\n\n/*\r\n * Extends L.Circle with Canvas-specific code.\r\n */\r\n\r\nL.Circle.include(!L.Path.CANVAS ? {} : {\r\n\t_drawPath: function () {\r\n\t\tvar p = this._point;\r\n\t\tthis._ctx.beginPath();\r\n\t\tthis._ctx.arc(p.x, p.y, this._radius, 0, Math.PI * 2, false);\r\n\t},\r\n\r\n\t_containsPoint: function (p) {\r\n\t\tvar center = this._point,\r\n\t\t    w2 = this.options.stroke ? this.options.weight / 2 : 0;\r\n\r\n\t\treturn (p.distanceTo(center) <= this._radius + w2);\r\n\t}\r\n});\r\n\n\n/*\n * CircleMarker canvas specific drawing parts.\n */\n\nL.CircleMarker.include(!L.Path.CANVAS ? {} : {\n\t_updateStyle: function () {\n\t\tL.Path.prototype._updateStyle.call(this);\n\t}\n});\n\n\n/*\r\n * L.GeoJSON turns any GeoJSON data into a Leaflet layer.\r\n */\r\n\r\nL.GeoJSON = L.FeatureGroup.extend({\r\n\r\n\tinitialize: function (geojson, options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\r\n\t\tif (geojson) {\r\n\t\t\tthis.addData(geojson);\r\n\t\t}\r\n\t},\r\n\r\n\taddData: function (geojson) {\r\n\t\tvar features = L.Util.isArray(geojson) ? geojson : geojson.features,\r\n\t\t    i, len, feature;\r\n\r\n\t\tif (features) {\r\n\t\t\tfor (i = 0, len = features.length; i < len; i++) {\r\n\t\t\t\t// Only add this if geometry or geometries are set and not null\r\n\t\t\t\tfeature = features[i];\r\n\t\t\t\tif (feature.geometries || feature.geometry || feature.features || feature.coordinates) {\r\n\t\t\t\t\tthis.addData(features[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\tif (options.filter && !options.filter(geojson)) { return; }\r\n\r\n\t\tvar layer = L.GeoJSON.geometryToLayer(geojson, options.pointToLayer, options.coordsToLatLng, options);\r\n\t\tlayer.feature = L.GeoJSON.asFeature(geojson);\r\n\r\n\t\tlayer.defaultOptions = layer.options;\r\n\t\tthis.resetStyle(layer);\r\n\r\n\t\tif (options.onEachFeature) {\r\n\t\t\toptions.onEachFeature(geojson, layer);\r\n\t\t}\r\n\r\n\t\treturn this.addLayer(layer);\r\n\t},\r\n\r\n\tresetStyle: function (layer) {\r\n\t\tvar style = this.options.style;\r\n\t\tif (style) {\r\n\t\t\t// reset any custom styles\r\n\t\t\tL.Util.extend(layer.options, layer.defaultOptions);\r\n\r\n\t\t\tthis._setLayerStyle(layer, style);\r\n\t\t}\r\n\t},\r\n\r\n\tsetStyle: function (style) {\r\n\t\tthis.eachLayer(function (layer) {\r\n\t\t\tthis._setLayerStyle(layer, style);\r\n\t\t}, this);\r\n\t},\r\n\r\n\t_setLayerStyle: function (layer, style) {\r\n\t\tif (typeof style === 'function') {\r\n\t\t\tstyle = style(layer.feature);\r\n\t\t}\r\n\t\tif (layer.setStyle) {\r\n\t\t\tlayer.setStyle(style);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.extend(L.GeoJSON, {\r\n\tgeometryToLayer: function (geojson, pointToLayer, coordsToLatLng, vectorOptions) {\r\n\t\tvar geometry = geojson.type === 'Feature' ? geojson.geometry : geojson,\r\n\t\t    coords = geometry.coordinates,\r\n\t\t    layers = [],\r\n\t\t    latlng, latlngs, i, len;\r\n\r\n\t\tcoordsToLatLng = coordsToLatLng || this.coordsToLatLng;\r\n\r\n\t\tswitch (geometry.type) {\r\n\t\tcase 'Point':\r\n\t\t\tlatlng = coordsToLatLng(coords);\r\n\t\t\treturn pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng);\r\n\r\n\t\tcase 'MultiPoint':\r\n\t\t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n\t\t\t\tlatlng = coordsToLatLng(coords[i]);\r\n\t\t\t\tlayers.push(pointToLayer ? pointToLayer(geojson, latlng) : new L.Marker(latlng));\r\n\t\t\t}\r\n\t\t\treturn new L.FeatureGroup(layers);\r\n\r\n\t\tcase 'LineString':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 0, coordsToLatLng);\r\n\t\t\treturn new L.Polyline(latlngs, vectorOptions);\r\n\r\n\t\tcase 'Polygon':\r\n\t\t\tif (coords.length === 2 && !coords[1].length) {\r\n\t\t\t\tthrow new Error('Invalid GeoJSON object.');\r\n\t\t\t}\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\r\n\t\t\treturn new L.Polygon(latlngs, vectorOptions);\r\n\r\n\t\tcase 'MultiLineString':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 1, coordsToLatLng);\r\n\t\t\treturn new L.MultiPolyline(latlngs, vectorOptions);\r\n\r\n\t\tcase 'MultiPolygon':\r\n\t\t\tlatlngs = this.coordsToLatLngs(coords, 2, coordsToLatLng);\r\n\t\t\treturn new L.MultiPolygon(latlngs, vectorOptions);\r\n\r\n\t\tcase 'GeometryCollection':\r\n\t\t\tfor (i = 0, len = geometry.geometries.length; i < len; i++) {\r\n\r\n\t\t\t\tlayers.push(this.geometryToLayer({\r\n\t\t\t\t\tgeometry: geometry.geometries[i],\r\n\t\t\t\t\ttype: 'Feature',\r\n\t\t\t\t\tproperties: geojson.properties\r\n\t\t\t\t}, pointToLayer, coordsToLatLng, vectorOptions));\r\n\t\t\t}\r\n\t\t\treturn new L.FeatureGroup(layers);\r\n\r\n\t\tdefault:\r\n\t\t\tthrow new Error('Invalid GeoJSON object.');\r\n\t\t}\r\n\t},\r\n\r\n\tcoordsToLatLng: function (coords) { // (Array[, Boolean]) -> LatLng\r\n\t\treturn new L.LatLng(coords[1], coords[0], coords[2]);\r\n\t},\r\n\r\n\tcoordsToLatLngs: function (coords, levelsDeep, coordsToLatLng) { // (Array[, Number, Function]) -> Array\r\n\t\tvar latlng, i, len,\r\n\t\t    latlngs = [];\r\n\r\n\t\tfor (i = 0, len = coords.length; i < len; i++) {\r\n\t\t\tlatlng = levelsDeep ?\r\n\t\t\t        this.coordsToLatLngs(coords[i], levelsDeep - 1, coordsToLatLng) :\r\n\t\t\t        (coordsToLatLng || this.coordsToLatLng)(coords[i]);\r\n\r\n\t\t\tlatlngs.push(latlng);\r\n\t\t}\r\n\r\n\t\treturn latlngs;\r\n\t},\r\n\r\n\tlatLngToCoords: function (latlng) {\r\n\t\tvar coords = [latlng.lng, latlng.lat];\r\n\r\n\t\tif (latlng.alt !== undefined) {\r\n\t\t\tcoords.push(latlng.alt);\r\n\t\t}\r\n\t\treturn coords;\r\n\t},\r\n\r\n\tlatLngsToCoords: function (latLngs) {\r\n\t\tvar coords = [];\r\n\r\n\t\tfor (var i = 0, len = latLngs.length; i < len; i++) {\r\n\t\t\tcoords.push(L.GeoJSON.latLngToCoords(latLngs[i]));\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\t},\r\n\r\n\tgetFeature: function (layer, newGeometry) {\r\n\t\treturn layer.feature ? L.extend({}, layer.feature, {geometry: newGeometry}) : L.GeoJSON.asFeature(newGeometry);\r\n\t},\r\n\r\n\tasFeature: function (geoJSON) {\r\n\t\tif (geoJSON.type === 'Feature') {\r\n\t\t\treturn geoJSON;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttype: 'Feature',\r\n\t\t\tproperties: {},\r\n\t\t\tgeometry: geoJSON\r\n\t\t};\r\n\t}\r\n});\r\n\r\nvar PointToGeoJSON = {\r\n\ttoGeoJSON: function () {\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'Point',\r\n\t\t\tcoordinates: L.GeoJSON.latLngToCoords(this.getLatLng())\r\n\t\t});\r\n\t}\r\n};\r\n\r\nL.Marker.include(PointToGeoJSON);\r\nL.Circle.include(PointToGeoJSON);\r\nL.CircleMarker.include(PointToGeoJSON);\r\n\r\nL.Polyline.include({\r\n\ttoGeoJSON: function () {\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'LineString',\r\n\t\t\tcoordinates: L.GeoJSON.latLngsToCoords(this.getLatLngs())\r\n\t\t});\r\n\t}\r\n});\r\n\r\nL.Polygon.include({\r\n\ttoGeoJSON: function () {\r\n\t\tvar coords = [L.GeoJSON.latLngsToCoords(this.getLatLngs())],\r\n\t\t    i, len, hole;\r\n\r\n\t\tcoords[0].push(coords[0][0]);\r\n\r\n\t\tif (this._holes) {\r\n\t\t\tfor (i = 0, len = this._holes.length; i < len; i++) {\r\n\t\t\t\thole = L.GeoJSON.latLngsToCoords(this._holes[i]);\r\n\t\t\t\thole.push(hole[0]);\r\n\t\t\t\tcoords.push(hole);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\ttype: 'Polygon',\r\n\t\t\tcoordinates: coords\r\n\t\t});\r\n\t}\r\n});\r\n\r\n(function () {\r\n\tfunction multiToGeoJSON(type) {\r\n\t\treturn function () {\r\n\t\t\tvar coords = [];\r\n\r\n\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\tcoords.push(layer.toGeoJSON().geometry.coordinates);\r\n\t\t\t});\r\n\r\n\t\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\t\ttype: type,\r\n\t\t\t\tcoordinates: coords\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n\r\n\tL.MultiPolyline.include({toGeoJSON: multiToGeoJSON('MultiLineString')});\r\n\tL.MultiPolygon.include({toGeoJSON: multiToGeoJSON('MultiPolygon')});\r\n\r\n\tL.LayerGroup.include({\r\n\t\ttoGeoJSON: function () {\r\n\r\n\t\t\tvar geometry = this.feature && this.feature.geometry,\r\n\t\t\t\tjsons = [],\r\n\t\t\t\tjson;\r\n\r\n\t\t\tif (geometry && geometry.type === 'MultiPoint') {\r\n\t\t\t\treturn multiToGeoJSON('MultiPoint').call(this);\r\n\t\t\t}\r\n\r\n\t\t\tvar isGeometryCollection = geometry && geometry.type === 'GeometryCollection';\r\n\r\n\t\t\tthis.eachLayer(function (layer) {\r\n\t\t\t\tif (layer.toGeoJSON) {\r\n\t\t\t\t\tjson = layer.toGeoJSON();\r\n\t\t\t\t\tjsons.push(isGeometryCollection ? json.geometry : L.GeoJSON.asFeature(json));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (isGeometryCollection) {\r\n\t\t\t\treturn L.GeoJSON.getFeature(this, {\r\n\t\t\t\t\tgeometries: jsons,\r\n\t\t\t\t\ttype: 'GeometryCollection'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttype: 'FeatureCollection',\r\n\t\t\t\tfeatures: jsons\r\n\t\t\t};\r\n\t\t}\r\n\t});\r\n}());\r\n\r\nL.geoJson = function (geojson, options) {\r\n\treturn new L.GeoJSON(geojson, options);\r\n};\r\n\n\n/*\r\n * L.DomEvent contains functions for working with DOM events.\r\n */\r\n\r\nL.DomEvent = {\r\n\t/* inspired by John Resig, Dean Edwards and YUI addEvent implementations */\r\n\taddListener: function (obj, type, fn, context) { // (HTMLElement, String, Function[, Object])\r\n\r\n\t\tvar id = L.stamp(fn),\r\n\t\t    key = '_leaflet_' + type + id,\r\n\t\t    handler, originalHandler, newType;\r\n\r\n\t\tif (obj[key]) { return this; }\r\n\r\n\t\thandler = function (e) {\r\n\t\t\treturn fn.call(context || obj, e || L.DomEvent._getEvent());\r\n\t\t};\r\n\r\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t\treturn this.addPointerListener(obj, type, handler, id);\r\n\t\t}\r\n\t\tif (L.Browser.touch && (type === 'dblclick') && this.addDoubleTapListener) {\r\n\t\t\tthis.addDoubleTapListener(obj, handler, id);\r\n\t\t}\r\n\r\n\t\tif ('addEventListener' in obj) {\r\n\r\n\t\t\tif (type === 'mousewheel') {\r\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\r\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\r\n\t\t\t\toriginalHandler = handler;\r\n\t\t\t\tnewType = (type === 'mouseenter' ? 'mouseover' : 'mouseout');\r\n\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\tif (!L.DomEvent._checkMouse(obj, e)) { return; }\r\n\t\t\t\t\treturn originalHandler(e);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tobj.addEventListener(newType, handler, false);\r\n\r\n\t\t\t} else if (type === 'click' && L.Browser.android) {\r\n\t\t\t\toriginalHandler = handler;\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\treturn L.DomEvent._filterClick(e, originalHandler);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t\t} else {\r\n\t\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t\t}\r\n\r\n\t\t} else if ('attachEvent' in obj) {\r\n\t\t\tobj.attachEvent('on' + type, handler);\r\n\t\t}\r\n\r\n\t\tobj[key] = handler;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveListener: function (obj, type, fn) {  // (HTMLElement, String, Function)\r\n\r\n\t\tvar id = L.stamp(fn),\r\n\t\t    key = '_leaflet_' + type + id,\r\n\t\t    handler = obj[key];\r\n\r\n\t\tif (!handler) { return this; }\r\n\r\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t\tthis.removePointerListener(obj, type, id);\r\n\t\t} else if (L.Browser.touch && (type === 'dblclick') && this.removeDoubleTapListener) {\r\n\t\t\tthis.removeDoubleTapListener(obj, id);\r\n\r\n\t\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\t\tif (type === 'mousewheel') {\r\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);\r\n\t\t\t\tobj.removeEventListener(type, handler, false);\r\n\r\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\t\t\t\tobj.removeEventListener((type === 'mouseenter' ? 'mouseover' : 'mouseout'), handler, false);\r\n\t\t\t} else {\r\n\t\t\t\tobj.removeEventListener(type, handler, false);\r\n\t\t\t}\r\n\t\t} else if ('detachEvent' in obj) {\r\n\t\t\tobj.detachEvent('on' + type, handler);\r\n\t\t}\r\n\r\n\t\tobj[key] = null;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstopPropagation: function (e) {\r\n\r\n\t\tif (e.stopPropagation) {\r\n\t\t\te.stopPropagation();\r\n\t\t} else {\r\n\t\t\te.cancelBubble = true;\r\n\t\t}\r\n\t\tL.DomEvent._skipped(e);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tdisableScrollPropagation: function (el) {\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\treturn L.DomEvent\r\n\t\t\t.on(el, 'mousewheel', stop)\r\n\t\t\t.on(el, 'MozMousePixelScroll', stop);\r\n\t},\r\n\r\n\tdisableClickPropagation: function (el) {\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.on(el, L.Draggable.START[i], stop);\r\n\t\t}\r\n\r\n\t\treturn L.DomEvent\r\n\t\t\t.on(el, 'click', L.DomEvent._fakeStop)\r\n\t\t\t.on(el, 'dblclick', stop);\r\n\t},\r\n\r\n\tpreventDefault: function (e) {\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault();\r\n\t\t} else {\r\n\t\t\te.returnValue = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstop: function (e) {\r\n\t\treturn L.DomEvent\r\n\t\t\t.preventDefault(e)\r\n\t\t\t.stopPropagation(e);\r\n\t},\r\n\r\n\tgetMousePosition: function (e, container) {\r\n\t\tif (!container) {\r\n\t\t\treturn new L.Point(e.clientX, e.clientY);\r\n\t\t}\r\n\r\n\t\tvar rect = container.getBoundingClientRect();\r\n\r\n\t\treturn new L.Point(\r\n\t\t\te.clientX - rect.left - container.clientLeft,\r\n\t\t\te.clientY - rect.top - container.clientTop);\r\n\t},\r\n\r\n\tgetWheelDelta: function (e) {\r\n\r\n\t\tvar delta = 0;\r\n\r\n\t\tif (e.wheelDelta) {\r\n\t\t\tdelta = e.wheelDelta / 120;\r\n\t\t}\r\n\t\tif (e.detail) {\r\n\t\t\tdelta = -e.detail / 3;\r\n\t\t}\r\n\t\treturn delta;\r\n\t},\r\n\r\n\t_skipEvents: {},\r\n\r\n\t_fakeStop: function (e) {\r\n\t\t// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)\r\n\t\tL.DomEvent._skipEvents[e.type] = true;\r\n\t},\r\n\r\n\t_skipped: function (e) {\r\n\t\tvar skipped = this._skipEvents[e.type];\r\n\t\t// reset when checking, as it's only used in map container and propagates outside of the map\r\n\t\tthis._skipEvents[e.type] = false;\r\n\t\treturn skipped;\r\n\t},\r\n\r\n\t// check if element really left/entered the event target (for mouseenter/mouseleave)\r\n\t_checkMouse: function (el, e) {\r\n\r\n\t\tvar related = e.relatedTarget;\r\n\r\n\t\tif (!related) { return true; }\r\n\r\n\t\ttry {\r\n\t\t\twhile (related && (related !== el)) {\r\n\t\t\t\trelated = related.parentNode;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (related !== el);\r\n\t},\r\n\r\n\t_getEvent: function () { // evil magic for IE\r\n\t\t/*jshint noarg:false */\r\n\t\tvar e = window.event;\r\n\t\tif (!e) {\r\n\t\t\tvar caller = arguments.callee.caller;\r\n\t\t\twhile (caller) {\r\n\t\t\t\te = caller['arguments'][0];\r\n\t\t\t\tif (e && window.Event === e.constructor) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcaller = caller.caller;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\r\n\t// this is a horrible workaround for a bug in Android where a single touch triggers two click events\r\n\t_filterClick: function (e, handler) {\r\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),\r\n\t\t\telapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);\r\n\r\n\t\t// are they closer together than 500ms yet more than 100ms?\r\n\t\t// Android typically triggers them ~300ms apart while multiple listeners\r\n\t\t// on the same event should be triggered far faster;\r\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\r\n\r\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\r\n\t\t\tL.DomEvent.stop(e);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tL.DomEvent._lastClick = timeStamp;\r\n\r\n\t\treturn handler(e);\r\n\t}\r\n};\r\n\r\nL.DomEvent.on = L.DomEvent.addListener;\r\nL.DomEvent.off = L.DomEvent.removeListener;\r\n\n\n/*\r\n * L.Draggable allows you to add dragging capabilities to any element. Supports mobile devices too.\r\n */\r\n\r\nL.Draggable = L.Class.extend({\r\n\tincludes: L.Mixin.Events,\r\n\r\n\tstatics: {\r\n\t\tSTART: L.Browser.touch ? ['touchstart', 'mousedown'] : ['mousedown'],\r\n\t\tEND: {\r\n\t\t\tmousedown: 'mouseup',\r\n\t\t\ttouchstart: 'touchend',\r\n\t\t\tpointerdown: 'touchend',\r\n\t\t\tMSPointerDown: 'touchend'\r\n\t\t},\r\n\t\tMOVE: {\r\n\t\t\tmousedown: 'mousemove',\r\n\t\t\ttouchstart: 'touchmove',\r\n\t\t\tpointerdown: 'touchmove',\r\n\t\t\tMSPointerDown: 'touchmove'\r\n\t\t}\r\n\t},\r\n\r\n\tinitialize: function (element, dragStartTarget) {\r\n\t\tthis._element = element;\r\n\t\tthis._dragStartTarget = dragStartTarget || element;\r\n\t},\r\n\r\n\tenable: function () {\r\n\t\tif (this._enabled) { return; }\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.on(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\r\n\t\t}\r\n\r\n\t\tthis._enabled = true;\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tif (!this._enabled) { return; }\r\n\r\n\t\tfor (var i = L.Draggable.START.length - 1; i >= 0; i--) {\r\n\t\t\tL.DomEvent.off(this._dragStartTarget, L.Draggable.START[i], this._onDown, this);\r\n\t\t}\r\n\r\n\t\tthis._enabled = false;\r\n\t\tthis._moved = false;\r\n\t},\r\n\r\n\t_onDown: function (e) {\r\n\t\tthis._moved = false;\r\n\r\n\t\tif (e.shiftKey || ((e.which !== 1) && (e.button !== 1) && !e.touches)) { return; }\r\n\r\n\t\tL.DomEvent.stopPropagation(e);\r\n\r\n\t\tif (L.Draggable._disabled) { return; }\r\n\r\n\t\tL.DomUtil.disableImageDrag();\r\n\t\tL.DomUtil.disableTextSelection();\r\n\r\n\t\tif (this._moving) { return; }\r\n\r\n\t\tvar first = e.touches ? e.touches[0] : e;\r\n\r\n\t\tthis._startPoint = new L.Point(first.clientX, first.clientY);\r\n\t\tthis._startPos = this._newPos = L.DomUtil.getPosition(this._element);\r\n\r\n\t\tL.DomEvent\r\n\t\t    .on(document, L.Draggable.MOVE[e.type], this._onMove, this)\r\n\t\t    .on(document, L.Draggable.END[e.type], this._onUp, this);\r\n\t},\r\n\r\n\t_onMove: function (e) {\r\n\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\tthis._moved = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar first = (e.touches && e.touches.length === 1 ? e.touches[0] : e),\r\n\t\t    newPoint = new L.Point(first.clientX, first.clientY),\r\n\t\t    offset = newPoint.subtract(this._startPoint);\r\n\r\n\t\tif (!offset.x && !offset.y) { return; }\r\n\t\tif (L.Browser.touch && Math.abs(offset.x) + Math.abs(offset.y) < 3) { return; }\r\n\r\n\t\tL.DomEvent.preventDefault(e);\r\n\r\n\t\tif (!this._moved) {\r\n\t\t\tthis.fire('dragstart');\r\n\r\n\t\t\tthis._moved = true;\r\n\t\t\tthis._startPos = L.DomUtil.getPosition(this._element).subtract(offset);\r\n\r\n\t\t\tL.DomUtil.addClass(document.body, 'leaflet-dragging');\r\n\t\t\tthis._lastTarget = e.target || e.srcElement;\r\n\t\t\tL.DomUtil.addClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t}\r\n\r\n\t\tthis._newPos = this._startPos.add(offset);\r\n\t\tthis._moving = true;\r\n\r\n\t\tL.Util.cancelAnimFrame(this._animRequest);\r\n\t\tthis._animRequest = L.Util.requestAnimFrame(this._updatePosition, this, true, this._dragStartTarget);\r\n\t},\r\n\r\n\t_updatePosition: function () {\r\n\t\tthis.fire('predrag');\r\n\t\tL.DomUtil.setPosition(this._element, this._newPos);\r\n\t\tthis.fire('drag');\r\n\t},\r\n\r\n\t_onUp: function () {\r\n\t\tL.DomUtil.removeClass(document.body, 'leaflet-dragging');\r\n\r\n\t\tif (this._lastTarget) {\r\n\t\t\tL.DomUtil.removeClass(this._lastTarget, 'leaflet-drag-target');\r\n\t\t\tthis._lastTarget = null;\r\n\t\t}\r\n\r\n\t\tfor (var i in L.Draggable.MOVE) {\r\n\t\t\tL.DomEvent\r\n\t\t\t    .off(document, L.Draggable.MOVE[i], this._onMove)\r\n\t\t\t    .off(document, L.Draggable.END[i], this._onUp);\r\n\t\t}\r\n\r\n\t\tL.DomUtil.enableImageDrag();\r\n\t\tL.DomUtil.enableTextSelection();\r\n\r\n\t\tif (this._moved && this._moving) {\r\n\t\t\t// ensure drag is not fired after dragend\r\n\t\t\tL.Util.cancelAnimFrame(this._animRequest);\r\n\r\n\t\t\tthis.fire('dragend', {\r\n\t\t\t\tdistance: this._newPos.distanceTo(this._startPos)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._moving = false;\r\n\t}\r\n});\r\n\n\n/*\n\tL.Handler is a base class for handler classes that are used internally to inject\n\tinteraction features like dragging to classes like Map and Marker.\n*/\n\nL.Handler = L.Class.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t},\n\n\tenable: function () {\n\t\tif (this._enabled) { return; }\n\n\t\tthis._enabled = true;\n\t\tthis.addHooks();\n\t},\n\n\tdisable: function () {\n\t\tif (!this._enabled) { return; }\n\n\t\tthis._enabled = false;\n\t\tthis.removeHooks();\n\t},\n\n\tenabled: function () {\n\t\treturn !!this._enabled;\n\t}\n});\n\n\n/*\n * L.Handler.MapDrag is used to make the map draggable (with panning inertia), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdragging: true,\n\n\tinertia: !L.Browser.android23,\n\tinertiaDeceleration: 3400, // px/s^2\n\tinertiaMaxSpeed: Infinity, // px/s\n\tinertiaThreshold: L.Browser.touch ? 32 : 18, // ms\n\teaseLinearity: 0.25,\n\n\t// TODO refactor, move to CRS\n\tworldCopyJump: false\n});\n\nL.Map.Drag = L.Handler.extend({\n\taddHooks: function () {\n\t\tif (!this._draggable) {\n\t\t\tvar map = this._map;\n\n\t\t\tthis._draggable = new L.Draggable(map._mapPane, map._container);\n\n\t\t\tthis._draggable.on({\n\t\t\t\t'dragstart': this._onDragStart,\n\t\t\t\t'drag': this._onDrag,\n\t\t\t\t'dragend': this._onDragEnd\n\t\t\t}, this);\n\n\t\t\tif (map.options.worldCopyJump) {\n\t\t\t\tthis._draggable.on('predrag', this._onPreDrag, this);\n\t\t\t\tmap.on('viewreset', this._onViewReset, this);\n\n\t\t\t\tmap.whenReady(this._onViewReset, this);\n\t\t\t}\n\t\t}\n\t\tthis._draggable.enable();\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable.disable();\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tvar map = this._map;\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tmap\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\n\t\tif (map.options.inertia) {\n\t\t\tthis._positions = [];\n\t\t\tthis._times = [];\n\t\t}\n\t},\n\n\t_onDrag: function () {\n\t\tif (this._map.options.inertia) {\n\t\t\tvar time = this._lastTime = +new Date(),\n\t\t\t    pos = this._lastPos = this._draggable._newPos;\n\n\t\t\tthis._positions.push(pos);\n\t\t\tthis._times.push(time);\n\n\t\t\tif (time - this._times[0] > 200) {\n\t\t\t\tthis._positions.shift();\n\t\t\t\tthis._times.shift();\n\t\t\t}\n\t\t}\n\n\t\tthis._map\n\t\t    .fire('move')\n\t\t    .fire('drag');\n\t},\n\n\t_onViewReset: function () {\n\t\t// TODO fix hardcoded Earth values\n\t\tvar pxCenter = this._map.getSize()._divideBy(2),\n\t\t    pxWorldCenter = this._map.latLngToLayerPoint([0, 0]);\n\n\t\tthis._initialWorldOffset = pxWorldCenter.subtract(pxCenter).x;\n\t\tthis._worldWidth = this._map.project([0, 180]).x;\n\t},\n\n\t_onPreDrag: function () {\n\t\t// TODO refactor to be able to adjust map pane position after zoom\n\t\tvar worldWidth = this._worldWidth,\n\t\t    halfWidth = Math.round(worldWidth / 2),\n\t\t    dx = this._initialWorldOffset,\n\t\t    x = this._draggable._newPos.x,\n\t\t    newX1 = (x - halfWidth + dx) % worldWidth + halfWidth - dx,\n\t\t    newX2 = (x + halfWidth + dx) % worldWidth - halfWidth - dx,\n\t\t    newX = Math.abs(newX1 + dx) < Math.abs(newX2 + dx) ? newX1 : newX2;\n\n\t\tthis._draggable._newPos.x = newX;\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tvar map = this._map,\n\t\t    options = map.options,\n\t\t    delay = +new Date() - this._lastTime,\n\n\t\t    noInertia = !options.inertia || delay > options.inertiaThreshold || !this._positions[0];\n\n\t\tmap.fire('dragend', e);\n\n\t\tif (noInertia) {\n\t\t\tmap.fire('moveend');\n\n\t\t} else {\n\n\t\t\tvar direction = this._lastPos.subtract(this._positions[0]),\n\t\t\t    duration = (this._lastTime + delay - this._times[0]) / 1000,\n\t\t\t    ease = options.easeLinearity,\n\n\t\t\t    speedVector = direction.multiplyBy(ease / duration),\n\t\t\t    speed = speedVector.distanceTo([0, 0]),\n\n\t\t\t    limitedSpeed = Math.min(options.inertiaMaxSpeed, speed),\n\t\t\t    limitedSpeedVector = speedVector.multiplyBy(limitedSpeed / speed),\n\n\t\t\t    decelerationDuration = limitedSpeed / (options.inertiaDeceleration * ease),\n\t\t\t    offset = limitedSpeedVector.multiplyBy(-decelerationDuration / 2).round();\n\n\t\t\tif (!offset.x || !offset.y) {\n\t\t\t\tmap.fire('moveend');\n\n\t\t\t} else {\n\t\t\t\toffset = map._limitOffset(offset, map.options.maxBounds);\n\n\t\t\t\tL.Util.requestAnimFrame(function () {\n\t\t\t\t\tmap.panBy(offset, {\n\t\t\t\t\t\tduration: decelerationDuration,\n\t\t\t\t\t\teaseLinearity: ease,\n\t\t\t\t\t\tnoMoveStart: true\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'dragging', L.Map.Drag);\n\n\n/*\n * L.Handler.DoubleClickZoom is used to handle double-click zoom on the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tdoubleClickZoom: true\n});\n\nL.Map.DoubleClickZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tthis._map.on('dblclick', this._onDoubleClick, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._map.off('dblclick', this._onDoubleClick, this);\n\t},\n\n\t_onDoubleClick: function (e) {\n\t\tvar map = this._map,\n\t\t    zoom = map.getZoom() + (e.originalEvent.shiftKey ? -1 : 1);\n\n\t\tif (map.options.doubleClickZoom === 'center') {\n\t\t\tmap.setZoom(zoom);\n\t\t} else {\n\t\t\tmap.setZoomAround(e.containerPoint, zoom);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'doubleClickZoom', L.Map.DoubleClickZoom);\n\n\n/*\n * L.Handler.ScrollWheelZoom is used by L.Map to enable mouse scroll wheel zoom on the map.\n */\n\nL.Map.mergeOptions({\n\tscrollWheelZoom: true\n});\n\nL.Map.ScrollWheelZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'mousewheel', this._onWheelScroll, this);\n\t\tL.DomEvent.on(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t\tthis._delta = 0;\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'mousewheel', this._onWheelScroll);\n\t\tL.DomEvent.off(this._map._container, 'MozMousePixelScroll', L.DomEvent.preventDefault);\n\t},\n\n\t_onWheelScroll: function (e) {\n\t\tvar delta = L.DomEvent.getWheelDelta(e);\n\n\t\tthis._delta += delta;\n\t\tthis._lastMousePos = this._map.mouseEventToContainerPoint(e);\n\n\t\tif (!this._startTime) {\n\t\t\tthis._startTime = +new Date();\n\t\t}\n\n\t\tvar left = Math.max(40 - (+new Date() - this._startTime), 0);\n\n\t\tclearTimeout(this._timer);\n\t\tthis._timer = setTimeout(L.bind(this._performZoom, this), left);\n\n\t\tL.DomEvent.preventDefault(e);\n\t\tL.DomEvent.stopPropagation(e);\n\t},\n\n\t_performZoom: function () {\n\t\tvar map = this._map,\n\t\t    delta = this._delta,\n\t\t    zoom = map.getZoom();\n\n\t\tdelta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\t\tdelta = Math.max(Math.min(delta, 4), -4);\n\t\tdelta = map._limitZoom(zoom + delta) - zoom;\n\n\t\tthis._delta = 0;\n\t\tthis._startTime = null;\n\n\t\tif (!delta) { return; }\n\n\t\tif (map.options.scrollWheelZoom === 'center') {\n\t\t\tmap.setZoom(zoom + delta);\n\t\t} else {\n\t\t\tmap.setZoomAround(this._lastMousePos, zoom + delta);\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'scrollWheelZoom', L.Map.ScrollWheelZoom);\n\n\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n */\r\n\r\nL.extend(L.DomEvent, {\r\n\r\n\t_touchstart: L.Browser.msPointer ? 'MSPointerDown' : L.Browser.pointer ? 'pointerdown' : 'touchstart',\r\n\t_touchend: L.Browser.msPointer ? 'MSPointerUp' : L.Browser.pointer ? 'pointerup' : 'touchend',\r\n\r\n\t// inspired by Zepto touch code by Thomas Fuchs\r\n\taddDoubleTapListener: function (obj, handler, id) {\r\n\t\tvar last,\r\n\t\t    doubleTap = false,\r\n\t\t    delay = 250,\r\n\t\t    touch,\r\n\t\t    pre = '_leaflet_',\r\n\t\t    touchstart = this._touchstart,\r\n\t\t    touchend = this._touchend,\r\n\t\t    trackedTouches = [];\r\n\r\n\t\tfunction onTouchStart(e) {\r\n\t\t\tvar count;\r\n\r\n\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\ttrackedTouches.push(e.pointerId);\r\n\t\t\t\tcount = trackedTouches.length;\r\n\t\t\t} else {\r\n\t\t\t\tcount = e.touches.length;\r\n\t\t\t}\r\n\t\t\tif (count > 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar now = Date.now(),\r\n\t\t\t\tdelta = now - (last || now);\r\n\r\n\t\t\ttouch = e.touches ? e.touches[0] : e;\r\n\t\t\tdoubleTap = (delta > 0 && delta <= delay);\r\n\t\t\tlast = now;\r\n\t\t}\r\n\r\n\t\tfunction onTouchEnd(e) {\r\n\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\tvar idx = trackedTouches.indexOf(e.pointerId);\r\n\t\t\t\tif (idx === -1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ttrackedTouches.splice(idx, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif (doubleTap) {\r\n\t\t\t\tif (L.Browser.pointer) {\r\n\t\t\t\t\t// work around .type being readonly with MSPointer* events\r\n\t\t\t\t\tvar newTouch = { },\r\n\t\t\t\t\t\tprop;\r\n\r\n\t\t\t\t\t// jshint forin:false\r\n\t\t\t\t\tfor (var i in touch) {\r\n\t\t\t\t\t\tprop = touch[i];\r\n\t\t\t\t\t\tif (typeof prop === 'function') {\r\n\t\t\t\t\t\t\tnewTouch[i] = prop.bind(touch);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewTouch[i] = prop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttouch = newTouch;\r\n\t\t\t\t}\r\n\t\t\t\ttouch.type = 'dblclick';\r\n\t\t\t\thandler(touch);\r\n\t\t\t\tlast = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj[pre + touchstart + id] = onTouchStart;\r\n\t\tobj[pre + touchend + id] = onTouchEnd;\r\n\r\n\t\t// on pointer we need to listen on the document, otherwise a drag starting on the map and moving off screen\r\n\t\t// will not come through to us, so we will lose track of how many touches are ongoing\r\n\t\tvar endElement = L.Browser.pointer ? document.documentElement : obj;\r\n\r\n\t\tobj.addEventListener(touchstart, onTouchStart, false);\r\n\t\tendElement.addEventListener(touchend, onTouchEnd, false);\r\n\r\n\t\tif (L.Browser.pointer) {\r\n\t\t\tendElement.addEventListener(L.DomEvent.POINTER_CANCEL, onTouchEnd, false);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveDoubleTapListener: function (obj, id) {\r\n\t\tvar pre = '_leaflet_';\r\n\r\n\t\tobj.removeEventListener(this._touchstart, obj[pre + this._touchstart + id], false);\r\n\t\t(L.Browser.pointer ? document.documentElement : obj).removeEventListener(\r\n\t\t        this._touchend, obj[pre + this._touchend + id], false);\r\n\r\n\t\tif (L.Browser.pointer) {\r\n\t\t\tdocument.documentElement.removeEventListener(L.DomEvent.POINTER_CANCEL, obj[pre + this._touchend + id],\r\n\t\t\t\tfalse);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n});\r\n\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\nL.extend(L.DomEvent, {\n\n\t//static\n\tPOINTER_DOWN: L.Browser.msPointer ? 'MSPointerDown' : 'pointerdown',\n\tPOINTER_MOVE: L.Browser.msPointer ? 'MSPointerMove' : 'pointermove',\n\tPOINTER_UP: L.Browser.msPointer ? 'MSPointerUp' : 'pointerup',\n\tPOINTER_CANCEL: L.Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n\n\t_pointers: [],\n\t_pointerDocumentListener: false,\n\n\t// Provides a touch events wrapper for (ms)pointer events.\n\t// Based on changes by veproza https://github.com/CloudMade/Leaflet/pull/1019\n\t//ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\n\taddPointerListener: function (obj, type, handler, id) {\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\treturn this.addPointerListenerStart(obj, type, handler, id);\n\t\tcase 'touchend':\n\t\t\treturn this.addPointerListenerEnd(obj, type, handler, id);\n\t\tcase 'touchmove':\n\t\t\treturn this.addPointerListenerMove(obj, type, handler, id);\n\t\tdefault:\n\t\t\tthrow 'Unknown touch event type';\n\t\t}\n\t},\n\n\taddPointerListenerStart: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    pointers = this._pointers;\n\n\t\tvar cb = function (e) {\n\n\t\t\tL.DomEvent.preventDefault(e);\n\n\t\t\tvar alreadyInArray = false;\n\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\talreadyInArray = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!alreadyInArray) {\n\t\t\t\tpointers.push(e);\n\t\t\t}\n\n\t\t\te.touches = pointers.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchstart' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_DOWN, cb, false);\n\n\t\t// need to also listen for end events to keep the _pointers list accurate\n\t\t// this needs to be on the body and never go away\n\t\tif (!this._pointerDocumentListener) {\n\t\t\tvar internalCb = function (e) {\n\t\t\t\tfor (var i = 0; i < pointers.length; i++) {\n\t\t\t\t\tif (pointers[i].pointerId === e.pointerId) {\n\t\t\t\t\t\tpointers.splice(i, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t//We listen on the documentElement as any drags that end by moving the touch off the screen get fired there\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_UP, internalCb, false);\n\t\t\tdocument.documentElement.addEventListener(this.POINTER_CANCEL, internalCb, false);\n\n\t\t\tthis._pointerDocumentListener = true;\n\t\t}\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerMove: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tfunction cb(e) {\n\n\t\t\t// don't fire touch moves when mouse isn't down\n\t\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches[i] = e;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t}\n\n\t\tobj[pre + 'touchmove' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_MOVE, cb, false);\n\n\t\treturn this;\n\t},\n\n\taddPointerListenerEnd: function (obj, type, handler, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    touches = this._pointers;\n\n\t\tvar cb = function (e) {\n\t\t\tfor (var i = 0; i < touches.length; i++) {\n\t\t\t\tif (touches[i].pointerId === e.pointerId) {\n\t\t\t\t\ttouches.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\te.touches = touches.slice();\n\t\t\te.changedTouches = [e];\n\n\t\t\thandler(e);\n\t\t};\n\n\t\tobj[pre + 'touchend' + id] = cb;\n\t\tobj.addEventListener(this.POINTER_UP, cb, false);\n\t\tobj.addEventListener(this.POINTER_CANCEL, cb, false);\n\n\t\treturn this;\n\t},\n\n\tremovePointerListener: function (obj, type, id) {\n\t\tvar pre = '_leaflet_',\n\t\t    cb = obj[pre + type + id];\n\n\t\tswitch (type) {\n\t\tcase 'touchstart':\n\t\t\tobj.removeEventListener(this.POINTER_DOWN, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchmove':\n\t\t\tobj.removeEventListener(this.POINTER_MOVE, cb, false);\n\t\t\tbreak;\n\t\tcase 'touchend':\n\t\t\tobj.removeEventListener(this.POINTER_UP, cb, false);\n\t\t\tobj.removeEventListener(this.POINTER_CANCEL, cb, false);\n\t\t\tbreak;\n\t\t}\n\n\t\treturn this;\n\t}\n});\n\n\n/*\n * L.Handler.TouchZoom is used by L.Map to add pinch zoom on supported mobile browsers.\n */\n\nL.Map.mergeOptions({\n\ttouchZoom: L.Browser.touch && !L.Browser.android23,\n\tbounceAtZoomLimits: true\n});\n\nL.Map.TouchZoom = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onTouchStart, this);\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || map._animatingZoom || this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]),\n\t\t    viewCenter = map._getCenterLayerPoint();\n\n\t\tthis._startCenter = p1.add(p2)._divideBy(2);\n\t\tthis._startDist = p1.distanceTo(p2);\n\n\t\tthis._moved = false;\n\t\tthis._zooming = true;\n\n\t\tthis._centerOffset = viewCenter.subtract(this._startCenter);\n\n\t\tif (map._panAnim) {\n\t\t\tmap._panAnim.stop();\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(document, 'touchmove', this._onTouchMove, this)\n\t\t    .on(document, 'touchend', this._onTouchEnd, this);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tvar map = this._map;\n\n\t\tif (!e.touches || e.touches.length !== 2 || !this._zooming) { return; }\n\n\t\tvar p1 = map.mouseEventToLayerPoint(e.touches[0]),\n\t\t    p2 = map.mouseEventToLayerPoint(e.touches[1]);\n\n\t\tthis._scale = p1.distanceTo(p2) / this._startDist;\n\t\tthis._delta = p1._add(p2)._divideBy(2)._subtract(this._startCenter);\n\n\t\tif (this._scale === 1) { return; }\n\n\t\tif (!map.options.bounceAtZoomLimits) {\n\t\t\tif ((map.getZoom() === map.getMinZoom() && this._scale < 1) ||\n\t\t\t    (map.getZoom() === map.getMaxZoom() && this._scale > 1)) { return; }\n\t\t}\n\n\t\tif (!this._moved) {\n\t\t\tL.DomUtil.addClass(map._mapPane, 'leaflet-touching');\n\n\t\t\tmap\n\t\t\t    .fire('movestart')\n\t\t\t    .fire('zoomstart');\n\n\t\t\tthis._moved = true;\n\t\t}\n\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\t\tthis._animRequest = L.Util.requestAnimFrame(\n\t\t        this._updateOnMove, this, true, this._map._container);\n\n\t\tL.DomEvent.preventDefault(e);\n\t},\n\n\t_updateOnMove: function () {\n\t\tvar map = this._map,\n\t\t    origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\t\t    zoom = map.getScaleZoom(this._scale);\n\n\t\tmap._animateZoom(center, zoom, this._startCenter, this._scale, this._delta, false, true);\n\t},\n\n\t_onTouchEnd: function () {\n\t\tif (!this._moved || !this._zooming) {\n\t\t\tthis._zooming = false;\n\t\t\treturn;\n\t\t}\n\n\t\tvar map = this._map;\n\n\t\tthis._zooming = false;\n\t\tL.DomUtil.removeClass(map._mapPane, 'leaflet-touching');\n\t\tL.Util.cancelAnimFrame(this._animRequest);\n\n\t\tL.DomEvent\n\t\t    .off(document, 'touchmove', this._onTouchMove)\n\t\t    .off(document, 'touchend', this._onTouchEnd);\n\n\t\tvar origin = this._getScaleOrigin(),\n\t\t    center = map.layerPointToLatLng(origin),\n\n\t\t    oldZoom = map.getZoom(),\n\t\t    floatZoomDelta = map.getScaleZoom(this._scale) - oldZoom,\n\t\t    roundZoomDelta = (floatZoomDelta > 0 ?\n\t\t            Math.ceil(floatZoomDelta) : Math.floor(floatZoomDelta)),\n\n\t\t    zoom = map._limitZoom(oldZoom + roundZoomDelta),\n\t\t    scale = map.getZoomScale(zoom) / this._scale;\n\n\t\tmap._animateZoom(center, zoom, origin, scale);\n\t},\n\n\t_getScaleOrigin: function () {\n\t\tvar centerOffset = this._centerOffset.subtract(this._delta).divideBy(this._scale);\n\t\treturn this._startCenter.add(centerOffset);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'touchZoom', L.Map.TouchZoom);\n\n\n/*\n * L.Map.Tap is used to enable mobile hacks like quick taps and long hold.\n */\n\nL.Map.mergeOptions({\n\ttap: true,\n\ttapTolerance: 15\n});\n\nL.Map.Tap = L.Handler.extend({\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map._container, 'touchstart', this._onDown, this);\n\t},\n\n\t_onDown: function (e) {\n\t\tif (!e.touches) { return; }\n\n\t\tL.DomEvent.preventDefault(e);\n\n\t\tthis._fireClick = true;\n\n\t\t// don't simulate click or track longpress if more than 1 touch\n\t\tif (e.touches.length > 1) {\n\t\t\tthis._fireClick = false;\n\t\t\tclearTimeout(this._holdTimeout);\n\t\t\treturn;\n\t\t}\n\n\t\tvar first = e.touches[0],\n\t\t    el = first.target;\n\n\t\tthis._startPos = this._newPos = new L.Point(first.clientX, first.clientY);\n\n\t\t// if touching a link, highlight it\n\t\tif (el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\tL.DomUtil.addClass(el, 'leaflet-active');\n\t\t}\n\n\t\t// simulate long hold but setting a timeout\n\t\tthis._holdTimeout = setTimeout(L.bind(function () {\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._fireClick = false;\n\t\t\t\tthis._onUp();\n\t\t\t\tthis._simulateEvent('contextmenu', first);\n\t\t\t}\n\t\t}, this), 1000);\n\n\t\tL.DomEvent\n\t\t\t.on(document, 'touchmove', this._onMove, this)\n\t\t\t.on(document, 'touchend', this._onUp, this);\n\t},\n\n\t_onUp: function (e) {\n\t\tclearTimeout(this._holdTimeout);\n\n\t\tL.DomEvent\n\t\t\t.off(document, 'touchmove', this._onMove, this)\n\t\t\t.off(document, 'touchend', this._onUp, this);\n\n\t\tif (this._fireClick && e && e.changedTouches) {\n\n\t\t\tvar first = e.changedTouches[0],\n\t\t\t    el = first.target;\n\n\t\t\tif (el && el.tagName && el.tagName.toLowerCase() === 'a') {\n\t\t\t\tL.DomUtil.removeClass(el, 'leaflet-active');\n\t\t\t}\n\n\t\t\t// simulate click if the touch didn't move too much\n\t\t\tif (this._isTapValid()) {\n\t\t\t\tthis._simulateEvent('click', first);\n\t\t\t}\n\t\t}\n\t},\n\n\t_isTapValid: function () {\n\t\treturn this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance;\n\t},\n\n\t_onMove: function (e) {\n\t\tvar first = e.touches[0];\n\t\tthis._newPos = new L.Point(first.clientX, first.clientY);\n\t},\n\n\t_simulateEvent: function (type, e) {\n\t\tvar simulatedEvent = document.createEvent('MouseEvents');\n\n\t\tsimulatedEvent._simulated = true;\n\t\te.target._simulatedClick = true;\n\n\t\tsimulatedEvent.initMouseEvent(\n\t\t        type, true, true, window, 1,\n\t\t        e.screenX, e.screenY,\n\t\t        e.clientX, e.clientY,\n\t\t        false, false, false, false, 0, null);\n\n\t\te.target.dispatchEvent(simulatedEvent);\n\t}\n});\n\nif (L.Browser.touch && !L.Browser.pointer) {\n\tL.Map.addInitHook('addHandler', 'tap', L.Map.Tap);\n}\n\n\n/*\n * L.Handler.ShiftDragZoom is used to add shift-drag zoom interaction to the map\n  * (zoom to a selected bounding box), enabled by default.\n */\n\nL.Map.mergeOptions({\n\tboxZoom: true\n});\n\nL.Map.BoxZoom = L.Handler.extend({\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._pane = map._panes.overlayPane;\n\t\tthis._moved = false;\n\t},\n\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._container, 'mousedown', this._onMouseDown, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._container, 'mousedown', this._onMouseDown);\n\t\tthis._moved = false;\n\t},\n\n\tmoved: function () {\n\t\treturn this._moved;\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tthis._moved = false;\n\n\t\tif (!e.shiftKey || ((e.which !== 1) && (e.button !== 1))) { return false; }\n\n\t\tL.DomUtil.disableTextSelection();\n\t\tL.DomUtil.disableImageDrag();\n\n\t\tthis._startLayerPoint = this._map.mouseEventToLayerPoint(e);\n\n\t\tL.DomEvent\n\t\t    .on(document, 'mousemove', this._onMouseMove, this)\n\t\t    .on(document, 'mouseup', this._onMouseUp, this)\n\t\t    .on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tif (!this._moved) {\n\t\t\tthis._box = L.DomUtil.create('div', 'leaflet-zoom-box', this._pane);\n\t\t\tL.DomUtil.setPosition(this._box, this._startLayerPoint);\n\n\t\t\t//TODO refactor: move cursor to styles\n\t\t\tthis._container.style.cursor = 'crosshair';\n\t\t\tthis._map.fire('boxzoomstart');\n\t\t}\n\n\t\tvar startPoint = this._startLayerPoint,\n\t\t    box = this._box,\n\n\t\t    layerPoint = this._map.mouseEventToLayerPoint(e),\n\t\t    offset = layerPoint.subtract(startPoint),\n\n\t\t    newPos = new L.Point(\n\t\t        Math.min(layerPoint.x, startPoint.x),\n\t\t        Math.min(layerPoint.y, startPoint.y));\n\n\t\tL.DomUtil.setPosition(box, newPos);\n\n\t\tthis._moved = true;\n\n\t\t// TODO refactor: remove hardcoded 4 pixels\n\t\tbox.style.width  = (Math.max(0, Math.abs(offset.x) - 4)) + 'px';\n\t\tbox.style.height = (Math.max(0, Math.abs(offset.y) - 4)) + 'px';\n\t},\n\n\t_finish: function () {\n\t\tif (this._moved) {\n\t\t\tthis._pane.removeChild(this._box);\n\t\t\tthis._container.style.cursor = '';\n\t\t}\n\n\t\tL.DomUtil.enableTextSelection();\n\t\tL.DomUtil.enableImageDrag();\n\n\t\tL.DomEvent\n\t\t    .off(document, 'mousemove', this._onMouseMove)\n\t\t    .off(document, 'mouseup', this._onMouseUp)\n\t\t    .off(document, 'keydown', this._onKeyDown);\n\t},\n\n\t_onMouseUp: function (e) {\n\n\t\tthis._finish();\n\n\t\tvar map = this._map,\n\t\t    layerPoint = map.mouseEventToLayerPoint(e);\n\n\t\tif (this._startLayerPoint.equals(layerPoint)) { return; }\n\n\t\tvar bounds = new L.LatLngBounds(\n\t\t        map.layerPointToLatLng(this._startLayerPoint),\n\t\t        map.layerPointToLatLng(layerPoint));\n\n\t\tmap.fitBounds(bounds);\n\n\t\tmap.fire('boxzoomend', {\n\t\t\tboxZoomBounds: bounds\n\t\t});\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis._finish();\n\t\t}\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'boxZoom', L.Map.BoxZoom);\n\n\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n */\n\nL.Map.mergeOptions({\n\tkeyboard: true,\n\tkeyboardPanOffset: 80,\n\tkeyboardZoomOffset: 1\n});\n\nL.Map.Keyboard = L.Handler.extend({\n\n\tkeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 173]\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);\n\t},\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex === -1) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\tL.DomEvent\n\t\t    .on(container, 'focus', this._onFocus, this)\n\t\t    .on(container, 'blur', this._onBlur, this)\n\t\t    .on(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .on('focus', this._addHooks, this)\n\t\t    .on('blur', this._removeHooks, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._removeHooks();\n\n\t\tvar container = this._map._container;\n\n\t\tL.DomEvent\n\t\t    .off(container, 'focus', this._onFocus, this)\n\t\t    .off(container, 'blur', this._onBlur, this)\n\t\t    .off(container, 'mousedown', this._onMouseDown, this);\n\n\t\tthis._map\n\t\t    .off('focus', this._addHooks, this)\n\t\t    .off('blur', this._removeHooks, this);\n\t},\n\n\t_onMouseDown: function () {\n\t\tif (this._focused) { return; }\n\n\t\tvar body = document.body,\n\t\t    docEl = document.documentElement,\n\t\t    top = body.scrollTop || docEl.scrollTop,\n\t\t    left = body.scrollLeft || docEl.scrollLeft;\n\n\t\tthis._map._container.focus();\n\n\t\twindow.scrollTo(left, top);\n\t},\n\n\t_onFocus: function () {\n\t\tthis._focused = true;\n\t\tthis._map.fire('focus');\n\t},\n\n\t_onBlur: function () {\n\t\tthis._focused = false;\n\t\tthis._map.fire('blur');\n\t},\n\n\t_setPanOffset: function (pan) {\n\t\tvar keys = this._panKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, pan];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];\n\t\t}\n\t},\n\n\t_setZoomOffset: function (zoom) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.keyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoom;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;\n\t\t}\n\t},\n\n\t_addHooks: function () {\n\t\tL.DomEvent.on(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_removeHooks: function () {\n\t\tL.DomEvent.off(document, 'keydown', this._onKeyDown, this);\n\t},\n\n\t_onKeyDown: function (e) {\n\t\tvar key = e.keyCode,\n\t\t    map = this._map;\n\n\t\tif (key in this._panKeys) {\n\n\t\t\tif (map._panAnim && map._panAnim._inProgress) { return; }\n\n\t\t\tmap.panBy(this._panKeys[key]);\n\n\t\t\tif (map.options.maxBounds) {\n\t\t\t\tmap.panInsideBounds(map.options.maxBounds);\n\t\t\t}\n\n\t\t} else if (key in this._zoomKeys) {\n\t\t\tmap.setZoom(map.getZoom() + this._zoomKeys[key]);\n\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tL.DomEvent.stop(e);\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'keyboard', L.Map.Keyboard);\n\n\n/*\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n */\n\nL.Handler.MarkerDrag = L.Handler.extend({\n\tinitialize: function (marker) {\n\t\tthis._marker = marker;\n\t},\n\n\taddHooks: function () {\n\t\tvar icon = this._marker._icon;\n\t\tif (!this._draggable) {\n\t\t\tthis._draggable = new L.Draggable(icon, icon);\n\t\t}\n\n\t\tthis._draggable\n\t\t\t.on('dragstart', this._onDragStart, this)\n\t\t\t.on('drag', this._onDrag, this)\n\t\t\t.on('dragend', this._onDragEnd, this);\n\t\tthis._draggable.enable();\n\t\tL.DomUtil.addClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable\n\t\t\t.off('dragstart', this._onDragStart, this)\n\t\t\t.off('drag', this._onDrag, this)\n\t\t\t.off('dragend', this._onDragEnd, this);\n\n\t\tthis._draggable.disable();\n\t\tL.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\t_onDragStart: function () {\n\t\tthis._marker\n\t\t    .closePopup()\n\t\t    .fire('movestart')\n\t\t    .fire('dragstart');\n\t},\n\n\t_onDrag: function () {\n\t\tvar marker = this._marker,\n\t\t    shadow = marker._shadow,\n\t\t    iconPos = L.DomUtil.getPosition(marker._icon),\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n\t\t// update shadow position\n\t\tif (shadow) {\n\t\t\tL.DomUtil.setPosition(shadow, iconPos);\n\t\t}\n\n\t\tmarker._latlng = latlng;\n\n\t\tmarker\n\t\t    .fire('move', {latlng: latlng})\n\t\t    .fire('drag');\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tthis._marker\n\t\t    .fire('moveend')\n\t\t    .fire('dragend', e);\n\t}\n});\n\n\n/*\r\n * L.Control is a base class for implementing map controls. Handles positioning.\r\n * All other controls extend from this class.\r\n */\r\n\r\nL.Control = L.Class.extend({\r\n\toptions: {\r\n\t\tposition: 'topright'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\t\treturn this.options.position;\r\n\t},\r\n\r\n\tsetPosition: function (position) {\r\n\t\tvar map = this._map;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.removeControl(this);\r\n\t\t}\r\n\r\n\t\tthis.options.position = position;\r\n\r\n\t\tif (map) {\r\n\t\t\tmap.addControl(this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetContainer: function () {\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\taddTo: function (map) {\r\n\t\tthis._map = map;\r\n\r\n\t\tvar container = this._container = this.onAdd(map),\r\n\t\t    pos = this.getPosition(),\r\n\t\t    corner = map._controlCorners[pos];\r\n\r\n\t\tL.DomUtil.addClass(container, 'leaflet-control');\r\n\r\n\t\tif (pos.indexOf('bottom') !== -1) {\r\n\t\t\tcorner.insertBefore(container, corner.firstChild);\r\n\t\t} else {\r\n\t\t\tcorner.appendChild(container);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveFrom: function (map) {\r\n\t\tvar pos = this.getPosition(),\r\n\t\t    corner = map._controlCorners[pos];\r\n\r\n\t\tcorner.removeChild(this._container);\r\n\t\tthis._map = null;\r\n\r\n\t\tif (this.onRemove) {\r\n\t\t\tthis.onRemove(map);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_refocusOnMap: function () {\r\n\t\tif (this._map) {\r\n\t\t\tthis._map.getContainer().focus();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.control = function (options) {\r\n\treturn new L.Control(options);\r\n};\r\n\r\n\r\n// adds control-related methods to L.Map\r\n\r\nL.Map.include({\r\n\taddControl: function (control) {\r\n\t\tcontrol.addTo(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveControl: function (control) {\r\n\t\tcontrol.removeFrom(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initControlPos: function () {\r\n\t\tvar corners = this._controlCorners = {},\r\n\t\t    l = 'leaflet-',\r\n\t\t    container = this._controlContainer =\r\n\t\t            L.DomUtil.create('div', l + 'control-container', this._container);\r\n\r\n\t\tfunction createCorner(vSide, hSide) {\r\n\t\t\tvar className = l + vSide + ' ' + l + hSide;\r\n\r\n\t\t\tcorners[vSide + hSide] = L.DomUtil.create('div', className, container);\r\n\t\t}\r\n\r\n\t\tcreateCorner('top', 'left');\r\n\t\tcreateCorner('top', 'right');\r\n\t\tcreateCorner('bottom', 'left');\r\n\t\tcreateCorner('bottom', 'right');\r\n\t},\r\n\r\n\t_clearControlPos: function () {\r\n\t\tthis._container.removeChild(this._controlContainer);\r\n\t}\r\n});\r\n\n\n/*\r\n * L.Control.Zoom is used for the default zoom buttons on the map.\r\n */\r\n\r\nL.Control.Zoom = L.Control.extend({\r\n\toptions: {\r\n\t\tposition: 'topleft',\r\n\t\tzoomInText: '+',\r\n\t\tzoomInTitle: 'Zoom in',\r\n\t\tzoomOutText: '-',\r\n\t\tzoomOutTitle: 'Zoom out'\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tvar zoomName = 'leaflet-control-zoom',\r\n\t\t    container = L.DomUtil.create('div', zoomName + ' leaflet-bar');\r\n\r\n\t\tthis._map = map;\r\n\r\n\t\tthis._zoomInButton  = this._createButton(\r\n\t\t        this.options.zoomInText, this.options.zoomInTitle,\r\n\t\t        zoomName + '-in',  container, this._zoomIn,  this);\r\n\t\tthis._zoomOutButton = this._createButton(\r\n\t\t        this.options.zoomOutText, this.options.zoomOutTitle,\r\n\t\t        zoomName + '-out', container, this._zoomOut, this);\r\n\r\n\t\tthis._updateDisabled();\r\n\t\tmap.on('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\r\n\t\treturn container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap.off('zoomend zoomlevelschange', this._updateDisabled, this);\r\n\t},\r\n\r\n\t_zoomIn: function (e) {\r\n\t\tthis._map.zoomIn(e.shiftKey ? 3 : 1);\r\n\t},\r\n\r\n\t_zoomOut: function (e) {\r\n\t\tthis._map.zoomOut(e.shiftKey ? 3 : 1);\r\n\t},\r\n\r\n\t_createButton: function (html, title, className, container, fn, context) {\r\n\t\tvar link = L.DomUtil.create('a', className, container);\r\n\t\tlink.innerHTML = html;\r\n\t\tlink.href = '#';\r\n\t\tlink.title = title;\r\n\r\n\t\tvar stop = L.DomEvent.stopPropagation;\r\n\r\n\t\tL.DomEvent\r\n\t\t    .on(link, 'click', stop)\r\n\t\t    .on(link, 'mousedown', stop)\r\n\t\t    .on(link, 'dblclick', stop)\r\n\t\t    .on(link, 'click', L.DomEvent.preventDefault)\r\n\t\t    .on(link, 'click', fn, context)\r\n\t\t    .on(link, 'click', this._refocusOnMap, context);\r\n\r\n\t\treturn link;\r\n\t},\r\n\r\n\t_updateDisabled: function () {\r\n\t\tvar map = this._map,\r\n\t\t\tclassName = 'leaflet-disabled';\r\n\r\n\t\tL.DomUtil.removeClass(this._zoomInButton, className);\r\n\t\tL.DomUtil.removeClass(this._zoomOutButton, className);\r\n\r\n\t\tif (map._zoom === map.getMinZoom()) {\r\n\t\t\tL.DomUtil.addClass(this._zoomOutButton, className);\r\n\t\t}\r\n\t\tif (map._zoom === map.getMaxZoom()) {\r\n\t\t\tL.DomUtil.addClass(this._zoomInButton, className);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.mergeOptions({\r\n\tzoomControl: true\r\n});\r\n\r\nL.Map.addInitHook(function () {\r\n\tif (this.options.zoomControl) {\r\n\t\tthis.zoomControl = new L.Control.Zoom();\r\n\t\tthis.addControl(this.zoomControl);\r\n\t}\r\n});\r\n\r\nL.control.zoom = function (options) {\r\n\treturn new L.Control.Zoom(options);\r\n};\r\n\r\n\n\n/*\r\n * L.Control.Attribution is used for displaying attribution on the map (added by default).\r\n */\r\n\r\nL.Control.Attribution = L.Control.extend({\r\n\toptions: {\r\n\t\tposition: 'bottomright',\r\n\t\tprefix: '<a href=\"http://leafletjs.com\" title=\"A JS library for interactive maps\">Leaflet</a>'\r\n\t},\r\n\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._attributions = {};\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._container = L.DomUtil.create('div', 'leaflet-control-attribution');\r\n\t\tL.DomEvent.disableClickPropagation(this._container);\r\n\r\n\t\tfor (var i in map._layers) {\r\n\t\t\tif (map._layers[i].getAttribution) {\r\n\t\t\t\tthis.addAttribution(map._layers[i].getAttribution());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tmap\r\n\t\t    .on('layeradd', this._onLayerAdd, this)\r\n\t\t    .on('layerremove', this._onLayerRemove, this);\r\n\r\n\t\tthis._update();\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('layeradd', this._onLayerAdd)\r\n\t\t    .off('layerremove', this._onLayerRemove);\r\n\r\n\t},\r\n\r\n\tsetPrefix: function (prefix) {\r\n\t\tthis.options.prefix = prefix;\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddAttribution: function (text) {\r\n\t\tif (!text) { return; }\r\n\r\n\t\tif (!this._attributions[text]) {\r\n\t\t\tthis._attributions[text] = 0;\r\n\t\t}\r\n\t\tthis._attributions[text]++;\r\n\r\n\t\tthis._update();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveAttribution: function (text) {\r\n\t\tif (!text) { return; }\r\n\r\n\t\tif (this._attributions[text]) {\r\n\t\t\tthis._attributions[text]--;\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._map) { return; }\r\n\r\n\t\tvar attribs = [];\r\n\r\n\t\tfor (var i in this._attributions) {\r\n\t\t\tif (this._attributions[i]) {\r\n\t\t\t\tattribs.push(i);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar prefixAndAttribs = [];\r\n\r\n\t\tif (this.options.prefix) {\r\n\t\t\tprefixAndAttribs.push(this.options.prefix);\r\n\t\t}\r\n\t\tif (attribs.length) {\r\n\t\t\tprefixAndAttribs.push(attribs.join(', '));\r\n\t\t}\r\n\r\n\t\tthis._container.innerHTML = prefixAndAttribs.join(' | ');\r\n\t},\r\n\r\n\t_onLayerAdd: function (e) {\r\n\t\tif (e.layer.getAttribution) {\r\n\t\t\tthis.addAttribution(e.layer.getAttribution());\r\n\t\t}\r\n\t},\r\n\r\n\t_onLayerRemove: function (e) {\r\n\t\tif (e.layer.getAttribution) {\r\n\t\t\tthis.removeAttribution(e.layer.getAttribution());\r\n\t\t}\r\n\t}\r\n});\r\n\r\nL.Map.mergeOptions({\r\n\tattributionControl: true\r\n});\r\n\r\nL.Map.addInitHook(function () {\r\n\tif (this.options.attributionControl) {\r\n\t\tthis.attributionControl = (new L.Control.Attribution()).addTo(this);\r\n\t}\r\n});\r\n\r\nL.control.attribution = function (options) {\r\n\treturn new L.Control.Attribution(options);\r\n};\r\n\n\n/*\n * L.Control.Scale is used for displaying metric/imperial scale on the map.\n */\n\nL.Control.Scale = L.Control.extend({\n\toptions: {\n\t\tposition: 'bottomleft',\n\t\tmaxWidth: 100,\n\t\tmetric: true,\n\t\timperial: true,\n\t\tupdateWhenIdle: false\n\t},\n\n\tonAdd: function (map) {\n\t\tthis._map = map;\n\n\t\tvar className = 'leaflet-control-scale',\n\t\t    container = L.DomUtil.create('div', className),\n\t\t    options = this.options;\n\n\t\tthis._addScales(options, className, container);\n\n\t\tmap.on(options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t\tmap.whenReady(this._update, this);\n\n\t\treturn container;\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off(this.options.updateWhenIdle ? 'moveend' : 'move', this._update, this);\n\t},\n\n\t_addScales: function (options, className, container) {\n\t\tif (options.metric) {\n\t\t\tthis._mScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t\tif (options.imperial) {\n\t\t\tthis._iScale = L.DomUtil.create('div', className + '-line', container);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tvar bounds = this._map.getBounds(),\n\t\t    centerLat = bounds.getCenter().lat,\n\t\t    halfWorldMeters = 6378137 * Math.PI * Math.cos(centerLat * Math.PI / 180),\n\t\t    dist = halfWorldMeters * (bounds.getNorthEast().lng - bounds.getSouthWest().lng) / 180,\n\n\t\t    size = this._map.getSize(),\n\t\t    options = this.options,\n\t\t    maxMeters = 0;\n\n\t\tif (size.x > 0) {\n\t\t\tmaxMeters = dist * (options.maxWidth / size.x);\n\t\t}\n\n\t\tthis._updateScales(options, maxMeters);\n\t},\n\n\t_updateScales: function (options, maxMeters) {\n\t\tif (options.metric && maxMeters) {\n\t\t\tthis._updateMetric(maxMeters);\n\t\t}\n\n\t\tif (options.imperial && maxMeters) {\n\t\t\tthis._updateImperial(maxMeters);\n\t\t}\n\t},\n\n\t_updateMetric: function (maxMeters) {\n\t\tvar meters = this._getRoundNum(maxMeters);\n\n\t\tthis._mScale.style.width = this._getScaleWidth(meters / maxMeters) + 'px';\n\t\tthis._mScale.innerHTML = meters < 1000 ? meters + ' m' : (meters / 1000) + ' km';\n\t},\n\n\t_updateImperial: function (maxMeters) {\n\t\tvar maxFeet = maxMeters * 3.2808399,\n\t\t    scale = this._iScale,\n\t\t    maxMiles, miles, feet;\n\n\t\tif (maxFeet > 5280) {\n\t\t\tmaxMiles = maxFeet / 5280;\n\t\t\tmiles = this._getRoundNum(maxMiles);\n\n\t\t\tscale.style.width = this._getScaleWidth(miles / maxMiles) + 'px';\n\t\t\tscale.innerHTML = miles + ' mi';\n\n\t\t} else {\n\t\t\tfeet = this._getRoundNum(maxFeet);\n\n\t\t\tscale.style.width = this._getScaleWidth(feet / maxFeet) + 'px';\n\t\t\tscale.innerHTML = feet + ' ft';\n\t\t}\n\t},\n\n\t_getScaleWidth: function (ratio) {\n\t\treturn Math.round(this.options.maxWidth * ratio) - 10;\n\t},\n\n\t_getRoundNum: function (num) {\n\t\tvar pow10 = Math.pow(10, (Math.floor(num) + '').length - 1),\n\t\t    d = num / pow10;\n\n\t\td = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n\n\t\treturn pow10 * d;\n\t}\n});\n\nL.control.scale = function (options) {\n\treturn new L.Control.Scale(options);\n};\n\n\n/*\r\n * L.Control.Layers is a control to allow users to switch between different layers on the map.\r\n */\r\n\r\nL.Control.Layers = L.Control.extend({\r\n\toptions: {\r\n\t\tcollapsed: true,\r\n\t\tposition: 'topright',\r\n\t\tautoZIndex: true\r\n\t},\r\n\r\n\tinitialize: function (baseLayers, overlays, options) {\r\n\t\tL.setOptions(this, options);\r\n\r\n\t\tthis._layers = {};\r\n\t\tthis._lastZIndex = 0;\r\n\t\tthis._handlingClick = false;\r\n\r\n\t\tfor (var i in baseLayers) {\r\n\t\t\tthis._addLayer(baseLayers[i], i);\r\n\t\t}\r\n\r\n\t\tfor (i in overlays) {\r\n\t\t\tthis._addLayer(overlays[i], i, true);\r\n\t\t}\r\n\t},\r\n\r\n\tonAdd: function (map) {\r\n\t\tthis._initLayout();\r\n\t\tthis._update();\r\n\r\n\t\tmap\r\n\t\t    .on('layeradd', this._onLayerChange, this)\r\n\t\t    .on('layerremove', this._onLayerChange, this);\r\n\r\n\t\treturn this._container;\r\n\t},\r\n\r\n\tonRemove: function (map) {\r\n\t\tmap\r\n\t\t    .off('layeradd', this._onLayerChange, this)\r\n\t\t    .off('layerremove', this._onLayerChange, this);\r\n\t},\r\n\r\n\taddBaseLayer: function (layer, name) {\r\n\t\tthis._addLayer(layer, name);\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddOverlay: function (layer, name) {\r\n\t\tthis._addLayer(layer, name, true);\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveLayer: function (layer) {\r\n\t\tvar id = L.stamp(layer);\r\n\t\tdelete this._layers[id];\r\n\t\tthis._update();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_initLayout: function () {\r\n\t\tvar className = 'leaflet-control-layers',\r\n\t\t    container = this._container = L.DomUtil.create('div', className);\r\n\r\n\t\t//Makes this work on IE10 Touch devices by stopping it from firing a mouseout event when the touch is released\r\n\t\tcontainer.setAttribute('aria-haspopup', true);\r\n\r\n\t\tif (!L.Browser.touch) {\r\n\t\t\tL.DomEvent\r\n\t\t\t\t.disableClickPropagation(container)\r\n\t\t\t\t.disableScrollPropagation(container);\r\n\t\t} else {\r\n\t\t\tL.DomEvent.on(container, 'click', L.DomEvent.stopPropagation);\r\n\t\t}\r\n\r\n\t\tvar form = this._form = L.DomUtil.create('form', className + '-list');\r\n\r\n\t\tif (this.options.collapsed) {\r\n\t\t\tif (!L.Browser.android) {\r\n\t\t\t\tL.DomEvent\r\n\t\t\t\t    .on(container, 'mouseover', this._expand, this)\r\n\t\t\t\t    .on(container, 'mouseout', this._collapse, this);\r\n\t\t\t}\r\n\t\t\tvar link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);\r\n\t\t\tlink.href = '#';\r\n\t\t\tlink.title = 'Layers';\r\n\r\n\t\t\tif (L.Browser.touch) {\r\n\t\t\t\tL.DomEvent\r\n\t\t\t\t    .on(link, 'click', L.DomEvent.stop)\r\n\t\t\t\t    .on(link, 'click', this._expand, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tL.DomEvent.on(link, 'focus', this._expand, this);\r\n\t\t\t}\r\n\t\t\t//Work around for Firefox android issue https://github.com/Leaflet/Leaflet/issues/2033\r\n\t\t\tL.DomEvent.on(form, 'click', function () {\r\n\t\t\t\tsetTimeout(L.bind(this._onInputClick, this), 0);\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis._map.on('click', this._collapse, this);\r\n\t\t\t// TODO keyboard accessibility\r\n\t\t} else {\r\n\t\t\tthis._expand();\r\n\t\t}\r\n\r\n\t\tthis._baseLayersList = L.DomUtil.create('div', className + '-base', form);\r\n\t\tthis._separator = L.DomUtil.create('div', className + '-separator', form);\r\n\t\tthis._overlaysList = L.DomUtil.create('div', className + '-overlays', form);\r\n\r\n\t\tcontainer.appendChild(form);\r\n\t},\r\n\r\n\t_addLayer: function (layer, name, overlay) {\r\n\t\tvar id = L.stamp(layer);\r\n\r\n\t\tthis._layers[id] = {\r\n\t\t\tlayer: layer,\r\n\t\t\tname: name,\r\n\t\t\toverlay: overlay\r\n\t\t};\r\n\r\n\t\tif (this.options.autoZIndex && layer.setZIndex) {\r\n\t\t\tthis._lastZIndex++;\r\n\t\t\tlayer.setZIndex(this._lastZIndex);\r\n\t\t}\r\n\t},\r\n\r\n\t_update: function () {\r\n\t\tif (!this._container) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._baseLayersList.innerHTML = '';\r\n\t\tthis._overlaysList.innerHTML = '';\r\n\r\n\t\tvar baseLayersPresent = false,\r\n\t\t    overlaysPresent = false,\r\n\t\t    i, obj;\r\n\r\n\t\tfor (i in this._layers) {\r\n\t\t\tobj = this._layers[i];\r\n\t\t\tthis._addItem(obj);\r\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;\r\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\r\n\t\t}\r\n\r\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\r\n\t},\r\n\r\n\t_onLayerChange: function (e) {\r\n\t\tvar obj = this._layers[L.stamp(e.layer)];\r\n\r\n\t\tif (!obj) { return; }\r\n\r\n\t\tif (!this._handlingClick) {\r\n\t\t\tthis._update();\r\n\t\t}\r\n\r\n\t\tvar type = obj.overlay ?\r\n\t\t\t(e.type === 'layeradd' ? 'overlayadd' : 'overlayremove') :\r\n\t\t\t(e.type === 'layeradd' ? 'baselayerchange' : null);\r\n\r\n\t\tif (type) {\r\n\t\t\tthis._map.fire(type, obj);\r\n\t\t}\r\n\t},\r\n\r\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)\r\n\t_createRadioElement: function (name, checked) {\r\n\r\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' + name + '\"';\r\n\t\tif (checked) {\r\n\t\t\tradioHtml += ' checked=\"checked\"';\r\n\t\t}\r\n\t\tradioHtml += '/>';\r\n\r\n\t\tvar radioFragment = document.createElement('div');\r\n\t\tradioFragment.innerHTML = radioHtml;\r\n\r\n\t\treturn radioFragment.firstChild;\r\n\t},\r\n\r\n\t_addItem: function (obj) {\r\n\t\tvar label = document.createElement('label'),\r\n\t\t    input,\r\n\t\t    checked = this._map.hasLayer(obj.layer);\r\n\r\n\t\tif (obj.overlay) {\r\n\t\t\tinput = document.createElement('input');\r\n\t\t\tinput.type = 'checkbox';\r\n\t\t\tinput.className = 'leaflet-control-layers-selector';\r\n\t\t\tinput.defaultChecked = checked;\r\n\t\t} else {\r\n\t\t\tinput = this._createRadioElement('leaflet-base-layers', checked);\r\n\t\t}\r\n\r\n\t\tinput.layerId = L.stamp(obj.layer);\r\n\r\n\t\tL.DomEvent.on(input, 'click', this._onInputClick, this);\r\n\r\n\t\tvar name = document.createElement('span');\r\n\t\tname.innerHTML = ' ' + obj.name;\r\n\r\n\t\tlabel.appendChild(input);\r\n\t\tlabel.appendChild(name);\r\n\r\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\r\n\t\tcontainer.appendChild(label);\r\n\r\n\t\treturn label;\r\n\t},\r\n\r\n\t_onInputClick: function () {\r\n\t\tvar i, input, obj,\r\n\t\t    inputs = this._form.getElementsByTagName('input'),\r\n\t\t    inputsLen = inputs.length;\r\n\r\n\t\tthis._handlingClick = true;\r\n\r\n\t\tfor (i = 0; i < inputsLen; i++) {\r\n\t\t\tinput = inputs[i];\r\n\t\t\tobj = this._layers[input.layerId];\r\n\r\n\t\t\tif (input.checked && !this._map.hasLayer(obj.layer)) {\r\n\t\t\t\tthis._map.addLayer(obj.layer);\r\n\r\n\t\t\t} else if (!input.checked && this._map.hasLayer(obj.layer)) {\r\n\t\t\t\tthis._map.removeLayer(obj.layer);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._handlingClick = false;\r\n\r\n\t\tthis._refocusOnMap();\r\n\t},\r\n\r\n\t_expand: function () {\r\n\t\tL.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');\r\n\t},\r\n\r\n\t_collapse: function () {\r\n\t\tthis._container.className = this._container.className.replace(' leaflet-control-layers-expanded', '');\r\n\t}\r\n});\r\n\r\nL.control.layers = function (baseLayers, overlays, options) {\r\n\treturn new L.Control.Layers(baseLayers, overlays, options);\r\n};\r\n\n\n/*\n * L.PosAnimation is used by Leaflet internally for pan animations.\n */\n\nL.PosAnimation = L.Class.extend({\n\tincludes: L.Mixin.Events,\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._newPos = newPos;\n\n\t\tthis.fire('start');\n\n\t\tel.style[L.DomUtil.TRANSITION] = 'all ' + (duration || 0.25) +\n\t\t        's cubic-bezier(0,0,' + (easeLinearity || 0.5) + ',1)';\n\n\t\tL.DomEvent.on(el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\t\tL.DomUtil.setPosition(el, newPos);\n\n\t\t// toggle reflow, Chrome flickers for some reason if you don't do this\n\t\tL.Util.falseFn(el.offsetWidth);\n\n\t\t// there's no native way to track value updates of transitioned properties, so we imitate this\n\t\tthis._stepTimer = setInterval(L.bind(this._onStep, this), 50);\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\t// if we just removed the transition property, the element would jump to its final position,\n\t\t// so we need to make it stay at the current position\n\n\t\tL.DomUtil.setPosition(this._el, this._getPos());\n\t\tthis._onTransitionEnd();\n\t\tL.Util.falseFn(this._el.offsetWidth); // force reflow in case we are about to start a new animation\n\t},\n\n\t_onStep: function () {\n\t\tvar stepPos = this._getPos();\n\t\tif (!stepPos) {\n\t\t\tthis._onTransitionEnd();\n\t\t\treturn;\n\t\t}\n\t\t// jshint camelcase: false\n\t\t// make L.DomUtil.getPosition return intermediate position value during animation\n\t\tthis._el._leaflet_pos = stepPos;\n\n\t\tthis.fire('step');\n\t},\n\n\t// you can't easily get intermediate values of properties animated with CSS3 Transitions,\n\t// we need to parse computed style (in case of transform it returns matrix string)\n\n\t_transformRe: /([-+]?(?:\\d*\\.)?\\d+)\\D*, ([-+]?(?:\\d*\\.)?\\d+)\\D*\\)/,\n\n\t_getPos: function () {\n\t\tvar left, top, matches,\n\t\t    el = this._el,\n\t\t    style = window.getComputedStyle(el);\n\n\t\tif (L.Browser.any3d) {\n\t\t\tmatches = style[L.DomUtil.TRANSFORM].match(this._transformRe);\n\t\t\tif (!matches) { return; }\n\t\t\tleft = parseFloat(matches[1]);\n\t\t\ttop  = parseFloat(matches[2]);\n\t\t} else {\n\t\t\tleft = parseFloat(style.left);\n\t\t\ttop  = parseFloat(style.top);\n\t\t}\n\n\t\treturn new L.Point(left, top, true);\n\t},\n\n\t_onTransitionEnd: function () {\n\t\tL.DomEvent.off(this._el, L.DomUtil.TRANSITION_END, this._onTransitionEnd, this);\n\n\t\tif (!this._inProgress) { return; }\n\t\tthis._inProgress = false;\n\n\t\tthis._el.style[L.DomUtil.TRANSITION] = '';\n\n\t\t// jshint camelcase: false\n\t\t// make sure L.DomUtil.getPosition returns the final position value after animation\n\t\tthis._el._leaflet_pos = this._newPos;\n\n\t\tclearInterval(this._stepTimer);\n\n\t\tthis.fire('step').fire('end');\n\t}\n\n});\n\n\n/*\n * Extends L.Map to handle panning animations.\n */\n\nL.Map.include({\n\n\tsetView: function (center, zoom, options) {\n\n\t\tzoom = zoom === undefined ? this._zoom : this._limitZoom(zoom);\n\t\tcenter = this._limitCenter(L.latLng(center), zoom, this.options.maxBounds);\n\t\toptions = options || {};\n\n\t\tif (this._panAnim) {\n\t\t\tthis._panAnim.stop();\n\t\t}\n\n\t\tif (this._loaded && !options.reset && options !== true) {\n\n\t\t\tif (options.animate !== undefined) {\n\t\t\t\toptions.zoom = L.extend({animate: options.animate}, options.zoom);\n\t\t\t\toptions.pan = L.extend({animate: options.animate}, options.pan);\n\t\t\t}\n\n\t\t\t// try animating pan or zoom\n\t\t\tvar animated = (this._zoom !== zoom) ?\n\t\t\t\tthis._tryAnimatedZoom && this._tryAnimatedZoom(center, zoom, options.zoom) :\n\t\t\t\tthis._tryAnimatedPan(center, options.pan);\n\n\t\t\tif (animated) {\n\t\t\t\t// prevent resize handler call, the view will refresh after animation anyway\n\t\t\t\tclearTimeout(this._sizeTimer);\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\n\t\t// animation didn't start, just reset the map view\n\t\tthis._resetView(center, zoom);\n\n\t\treturn this;\n\t},\n\n\tpanBy: function (offset, options) {\n\t\toffset = L.point(offset).round();\n\t\toptions = options || {};\n\n\t\tif (!offset.x && !offset.y) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (!this._panAnim) {\n\t\t\tthis._panAnim = new L.PosAnimation();\n\n\t\t\tthis._panAnim.on({\n\t\t\t\t'step': this._onPanTransitionStep,\n\t\t\t\t'end': this._onPanTransitionEnd\n\t\t\t}, this);\n\t\t}\n\n\t\t// don't fire movestart if animating inertia\n\t\tif (!options.noMoveStart) {\n\t\t\tthis.fire('movestart');\n\t\t}\n\n\t\t// animate pan unless animate: false specified\n\t\tif (options.animate !== false) {\n\t\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-pan-anim');\n\n\t\t\tvar newPos = this._getMapPanePos().subtract(offset);\n\t\t\tthis._panAnim.run(this._mapPane, newPos, options.duration || 0.25, options.easeLinearity);\n\t\t} else {\n\t\t\tthis._rawPanBy(offset);\n\t\t\tthis.fire('move').fire('moveend');\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_onPanTransitionStep: function () {\n\t\tthis.fire('move');\n\t},\n\n\t_onPanTransitionEnd: function () {\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-pan-anim');\n\t\tthis.fire('moveend');\n\t},\n\n\t_tryAnimatedPan: function (center, options) {\n\t\t// difference between the new and current centers in pixels\n\t\tvar offset = this._getCenterOffset(center)._floor();\n\n\t\t// don't animate too far unless animate: true specified in options\n\t\tif ((options && options.animate) !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis.panBy(offset, options);\n\n\t\treturn true;\n\t}\n});\n\n\n/*\n * L.PosAnimation fallback implementation that powers Leaflet pan animations\n * in browsers that don't support CSS3 Transitions.\n */\n\nL.PosAnimation = L.DomUtil.TRANSITION ? L.PosAnimation : L.PosAnimation.extend({\n\n\trun: function (el, newPos, duration, easeLinearity) { // (HTMLElement, Point[, Number, Number])\n\t\tthis.stop();\n\n\t\tthis._el = el;\n\t\tthis._inProgress = true;\n\t\tthis._duration = duration || 0.25;\n\t\tthis._easeOutPower = 1 / Math.max(easeLinearity || 0.5, 0.2);\n\n\t\tthis._startPos = L.DomUtil.getPosition(el);\n\t\tthis._offset = newPos.subtract(this._startPos);\n\t\tthis._startTime = +new Date();\n\n\t\tthis.fire('start');\n\n\t\tthis._animate();\n\t},\n\n\tstop: function () {\n\t\tif (!this._inProgress) { return; }\n\n\t\tthis._step();\n\t\tthis._complete();\n\t},\n\n\t_animate: function () {\n\t\t// animation loop\n\t\tthis._animId = L.Util.requestAnimFrame(this._animate, this);\n\t\tthis._step();\n\t},\n\n\t_step: function () {\n\t\tvar elapsed = (+new Date()) - this._startTime,\n\t\t    duration = this._duration * 1000;\n\n\t\tif (elapsed < duration) {\n\t\t\tthis._runFrame(this._easeOut(elapsed / duration));\n\t\t} else {\n\t\t\tthis._runFrame(1);\n\t\t\tthis._complete();\n\t\t}\n\t},\n\n\t_runFrame: function (progress) {\n\t\tvar pos = this._startPos.add(this._offset.multiplyBy(progress));\n\t\tL.DomUtil.setPosition(this._el, pos);\n\n\t\tthis.fire('step');\n\t},\n\n\t_complete: function () {\n\t\tL.Util.cancelAnimFrame(this._animId);\n\n\t\tthis._inProgress = false;\n\t\tthis.fire('end');\n\t},\n\n\t_easeOut: function (t) {\n\t\treturn 1 - Math.pow(1 - t, this._easeOutPower);\n\t}\n});\n\n\n/*\n * Extends L.Map to handle zoom animations.\n */\n\nL.Map.mergeOptions({\n\tzoomAnimation: true,\n\tzoomAnimationThreshold: 4\n});\n\nif (L.DomUtil.TRANSITION) {\n\n\tL.Map.addInitHook(function () {\n\t\t// don't animate on browsers without hardware-accelerated transitions or old Android/Opera\n\t\tthis._zoomAnimated = this.options.zoomAnimation && L.DomUtil.TRANSITION &&\n\t\t\t\tL.Browser.any3d && !L.Browser.android23 && !L.Browser.mobileOpera;\n\n\t\t// zoom transitions run with the same duration for all layers, so if one of transitionend events\n\t\t// happens after starting zoom animation (propagating to the map pane), we know that it ended globally\n\t\tif (this._zoomAnimated) {\n\t\t\tL.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, this._catchTransitionEnd, this);\n\t\t}\n\t});\n}\n\nL.Map.include(!L.DomUtil.TRANSITION ? {} : {\n\n\t_catchTransitionEnd: function (e) {\n\t\tif (this._animatingZoom && e.propertyName.indexOf('transform') >= 0) {\n\t\t\tthis._onZoomTransitionEnd();\n\t\t}\n\t},\n\n\t_nothingToAnimate: function () {\n\t\treturn !this._container.getElementsByClassName('leaflet-zoom-animated').length;\n\t},\n\n\t_tryAnimatedZoom: function (center, zoom, options) {\n\n\t\tif (this._animatingZoom) { return true; }\n\n\t\toptions = options || {};\n\n\t\t// don't animate if disabled, not supported or zoom difference is too large\n\t\tif (!this._zoomAnimated || options.animate === false || this._nothingToAnimate() ||\n\t\t        Math.abs(zoom - this._zoom) > this.options.zoomAnimationThreshold) { return false; }\n\n\t\t// offset is the pixel coords of the zoom origin relative to the current center\n\t\tvar scale = this.getZoomScale(zoom),\n\t\t    offset = this._getCenterOffset(center)._divideBy(1 - 1 / scale),\n\t\t\torigin = this._getCenterLayerPoint()._add(offset);\n\n\t\t// don't animate if the zoom origin isn't within one screen from the current center, unless forced\n\t\tif (options.animate !== true && !this.getSize().contains(offset)) { return false; }\n\n\t\tthis\n\t\t    .fire('movestart')\n\t\t    .fire('zoomstart');\n\n\t\tthis._animateZoom(center, zoom, origin, scale, null, true);\n\n\t\treturn true;\n\t},\n\n\t_animateZoom: function (center, zoom, origin, scale, delta, backwards, forTouchZoom) {\n\n\t\tif (!forTouchZoom) {\n\t\t\tthis._animatingZoom = true;\n\t\t}\n\n\t\t// put transform transition on all layers with leaflet-zoom-animated class\n\t\tL.DomUtil.addClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\t// remember what center/zoom to set after animation\n\t\tthis._animateToCenter = center;\n\t\tthis._animateToZoom = zoom;\n\n\t\t// disable any dragging during animation\n\t\tif (L.Draggable) {\n\t\t\tL.Draggable._disabled = true;\n\t\t}\n\n\t\tL.Util.requestAnimFrame(function () {\n\t\t\tthis.fire('zoomanim', {\n\t\t\t\tcenter: center,\n\t\t\t\tzoom: zoom,\n\t\t\t\torigin: origin,\n\t\t\t\tscale: scale,\n\t\t\t\tdelta: delta,\n\t\t\t\tbackwards: backwards\n\t\t\t});\n\t\t}, this);\n\t},\n\n\t_onZoomTransitionEnd: function () {\n\n\t\tthis._animatingZoom = false;\n\n\t\tL.DomUtil.removeClass(this._mapPane, 'leaflet-zoom-anim');\n\n\t\tthis._resetView(this._animateToCenter, this._animateToZoom, true, true);\n\n\t\tif (L.Draggable) {\n\t\t\tL.Draggable._disabled = false;\n\t\t}\n\t}\n});\n\n\n/*\n\tZoom animation logic for L.TileLayer.\n*/\n\nL.TileLayer.include({\n\t_animateZoom: function (e) {\n\t\tif (!this._animating) {\n\t\t\tthis._animating = true;\n\t\t\tthis._prepareBgBuffer();\n\t\t}\n\n\t\tvar bg = this._bgBuffer,\n\t\t    transform = L.DomUtil.TRANSFORM,\n\t\t    initialTransform = e.delta ? L.DomUtil.getTranslateString(e.delta) : bg.style[transform],\n\t\t    scaleStr = L.DomUtil.getScaleString(e.scale, e.origin);\n\n\t\tbg.style[transform] = e.backwards ?\n\t\t\t\tscaleStr + ' ' + initialTransform :\n\t\t\t\tinitialTransform + ' ' + scaleStr;\n\t},\n\n\t_endZoomAnim: function () {\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\tfront.style.visibility = '';\n\t\tfront.parentNode.appendChild(front); // Bring to fore\n\n\t\t// force reflow\n\t\tL.Util.falseFn(bg.offsetWidth);\n\n\t\tthis._animating = false;\n\t},\n\n\t_clearBgBuffer: function () {\n\t\tvar map = this._map;\n\n\t\tif (map && !map._animatingZoom && !map.touchZoom._zooming) {\n\t\t\tthis._bgBuffer.innerHTML = '';\n\t\t\tthis._bgBuffer.style[L.DomUtil.TRANSFORM] = '';\n\t\t}\n\t},\n\n\t_prepareBgBuffer: function () {\n\n\t\tvar front = this._tileContainer,\n\t\t    bg = this._bgBuffer;\n\n\t\t// if foreground layer doesn't have many tiles but bg layer does,\n\t\t// keep the existing bg layer and just zoom it some more\n\n\t\tvar bgLoaded = this._getLoadedTilesPercentage(bg),\n\t\t    frontLoaded = this._getLoadedTilesPercentage(front);\n\n\t\tif (bg && bgLoaded > 0.5 && frontLoaded < 0.5) {\n\n\t\t\tfront.style.visibility = 'hidden';\n\t\t\tthis._stopLoadingImages(front);\n\t\t\treturn;\n\t\t}\n\n\t\t// prepare the buffer to become the front tile pane\n\t\tbg.style.visibility = 'hidden';\n\t\tbg.style[L.DomUtil.TRANSFORM] = '';\n\n\t\t// switch out the current layer to be the new bg layer (and vice-versa)\n\t\tthis._tileContainer = bg;\n\t\tbg = this._bgBuffer = front;\n\n\t\tthis._stopLoadingImages(bg);\n\n\t\t//prevent bg buffer from clearing right after zoom\n\t\tclearTimeout(this._clearBgBufferTimer);\n\t},\n\n\t_getLoadedTilesPercentage: function (container) {\n\t\tvar tiles = container.getElementsByTagName('img'),\n\t\t    i, len, count = 0;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\tif (tiles[i].complete) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count / len;\n\t},\n\n\t// stops loading all tiles in the background layer\n\t_stopLoadingImages: function (container) {\n\t\tvar tiles = Array.prototype.slice.call(container.getElementsByTagName('img')),\n\t\t    i, len, tile;\n\n\t\tfor (i = 0, len = tiles.length; i < len; i++) {\n\t\t\ttile = tiles[i];\n\n\t\t\tif (!tile.complete) {\n\t\t\t\ttile.onload = L.Util.falseFn;\n\t\t\t\ttile.onerror = L.Util.falseFn;\n\t\t\t\ttile.src = L.Util.emptyImageUrl;\n\n\t\t\t\ttile.parentNode.removeChild(tile);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n/*\r\n * Provides L.Map with convenient shortcuts for using browser geolocation features.\r\n */\r\n\r\nL.Map.include({\r\n\t_defaultLocateOptions: {\r\n\t\twatch: false,\r\n\t\tsetView: false,\r\n\t\tmaxZoom: Infinity,\r\n\t\ttimeout: 10000,\r\n\t\tmaximumAge: 0,\r\n\t\tenableHighAccuracy: false\r\n\t},\r\n\r\n\tlocate: function (/*Object*/ options) {\r\n\r\n\t\toptions = this._locateOptions = L.extend(this._defaultLocateOptions, options);\r\n\r\n\t\tif (!navigator.geolocation) {\r\n\t\t\tthis._handleGeolocationError({\r\n\t\t\t\tcode: 0,\r\n\t\t\t\tmessage: 'Geolocation not supported.'\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar onResponse = L.bind(this._handleGeolocationResponse, this),\r\n\t\t\tonError = L.bind(this._handleGeolocationError, this);\r\n\r\n\t\tif (options.watch) {\r\n\t\t\tthis._locationWatchId =\r\n\t\t\t        navigator.geolocation.watchPosition(onResponse, onError, options);\r\n\t\t} else {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(onResponse, onError, options);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tstopLocate: function () {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.clearWatch(this._locationWatchId);\r\n\t\t}\r\n\t\tif (this._locateOptions) {\r\n\t\t\tthis._locateOptions.setView = false;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_handleGeolocationError: function (error) {\r\n\t\tvar c = error.code,\r\n\t\t    message = error.message ||\r\n\t\t            (c === 1 ? 'permission denied' :\r\n\t\t            (c === 2 ? 'position unavailable' : 'timeout'));\r\n\r\n\t\tif (this._locateOptions.setView && !this._loaded) {\r\n\t\t\tthis.fitWorld();\r\n\t\t}\r\n\r\n\t\tthis.fire('locationerror', {\r\n\t\t\tcode: c,\r\n\t\t\tmessage: 'Geolocation error: ' + message + '.'\r\n\t\t});\r\n\t},\r\n\r\n\t_handleGeolocationResponse: function (pos) {\r\n\t\tvar lat = pos.coords.latitude,\r\n\t\t    lng = pos.coords.longitude,\r\n\t\t    latlng = new L.LatLng(lat, lng),\r\n\r\n\t\t    latAccuracy = 180 * pos.coords.accuracy / 40075017,\r\n\t\t    lngAccuracy = latAccuracy / Math.cos(L.LatLng.DEG_TO_RAD * lat),\r\n\r\n\t\t    bounds = L.latLngBounds(\r\n\t\t            [lat - latAccuracy, lng - lngAccuracy],\r\n\t\t            [lat + latAccuracy, lng + lngAccuracy]),\r\n\r\n\t\t    options = this._locateOptions;\r\n\r\n\t\tif (options.setView) {\r\n\t\t\tvar zoom = Math.min(this.getBoundsZoom(bounds), options.maxZoom);\r\n\t\t\tthis.setView(latlng, zoom);\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tlatlng: latlng,\r\n\t\t\tbounds: bounds,\r\n\t\t\ttimestamp: pos.timestamp\r\n\t\t};\r\n\r\n\t\tfor (var i in pos.coords) {\r\n\t\t\tif (typeof pos.coords[i] === 'number') {\r\n\t\t\t\tdata[i] = pos.coords[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.fire('locationfound', data);\r\n\t}\r\n});\r\n\n\n}(window, document));",
    "/*!\n * mustache.js - Logic-less {{mustache}} templates with JavaScript\n * http://github.com/janl/mustache.js\n */\n\n/*global define: false*/\n\n(function (global, factory) {\n  if (typeof exports === \"object\" && exports) {\n    factory(exports); // CommonJS\n  } else if (typeof define === \"function\" && define.amd) {\n    define(['exports'], factory); // AMD\n  } else {\n    factory(global.Mustache = {}); // <script>\n  }\n}(this, function (mustache) {\n\n  var Object_toString = Object.prototype.toString;\n  var isArray = Array.isArray || function (object) {\n    return Object_toString.call(object) === '[object Array]';\n  };\n\n  function isFunction(object) {\n    return typeof object === 'function';\n  }\n\n  function escapeRegExp(string) {\n    return string.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\n  }\n\n  // Workaround for https://issues.apache.org/jira/browse/COUCHDB-577\n  // See https://github.com/janl/mustache.js/issues/189\n  var RegExp_test = RegExp.prototype.test;\n  function testRegExp(re, string) {\n    return RegExp_test.call(re, string);\n  }\n\n  var nonSpaceRe = /\\S/;\n  function isWhitespace(string) {\n    return !testRegExp(nonSpaceRe, string);\n  }\n\n  var entityMap = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    \"/\": '&#x2F;'\n  };\n\n  function escapeHtml(string) {\n    return String(string).replace(/[&<>\"'\\/]/g, function (s) {\n      return entityMap[s];\n    });\n  }\n\n  var whiteRe = /\\s*/;\n  var spaceRe = /\\s+/;\n  var equalsRe = /\\s*=/;\n  var curlyRe = /\\s*\\}/;\n  var tagRe = /#|\\^|\\/|>|\\{|&|=|!/;\n\n  /**\n   * Breaks up the given `template` string into a tree of tokens. If the `tags`\n   * argument is given here it must be an array with two string values: the\n   * opening and closing tags used in the template (e.g. [ \"<%\", \"%>\" ]). Of\n   * course, the default is to use mustaches (i.e. mustache.tags).\n   *\n   * A token is an array with at least 4 elements. The first element is the\n   * mustache symbol that was used inside the tag, e.g. \"#\" or \"&\". If the tag\n   * did not contain a symbol (i.e. {{myValue}}) this element is \"name\". For\n   * all text that appears outside a symbol this element is \"text\".\n   *\n   * The second element of a token is its \"value\". For mustache tags this is\n   * whatever else was inside the tag besides the opening symbol. For text tokens\n   * this is the text itself.\n   *\n   * The third and fourth elements of the token are the start and end indices,\n   * respectively, of the token in the original template.\n   *\n   * Tokens that are the root node of a subtree contain two more elements: 1) an\n   * array of tokens in the subtree and 2) the index in the original template at\n   * which the closing tag for that section begins.\n   */\n  function parseTemplate(template, tags) {\n    if (!template)\n      return [];\n\n    var sections = [];     // Stack to hold section tokens\n    var tokens = [];       // Buffer to hold the tokens\n    var spaces = [];       // Indices of whitespace tokens on the current line\n    var hasTag = false;    // Is there a {{tag}} on the current line?\n    var nonSpace = false;  // Is there a non-space char on the current line?\n\n    // Strips all whitespace tokens array for the current line\n    // if there was a {{#tag}} on it and otherwise only space.\n    function stripSpace() {\n      if (hasTag && !nonSpace) {\n        while (spaces.length)\n          delete tokens[spaces.pop()];\n      } else {\n        spaces = [];\n      }\n\n      hasTag = false;\n      nonSpace = false;\n    }\n\n    var openingTagRe, closingTagRe, closingCurlyRe;\n    function compileTags(tags) {\n      if (typeof tags === 'string')\n        tags = tags.split(spaceRe, 2);\n\n      if (!isArray(tags) || tags.length !== 2)\n        throw new Error('Invalid tags: ' + tags);\n\n      openingTagRe = new RegExp(escapeRegExp(tags[0]) + '\\\\s*');\n      closingTagRe = new RegExp('\\\\s*' + escapeRegExp(tags[1]));\n      closingCurlyRe = new RegExp('\\\\s*' + escapeRegExp('}' + tags[1]));\n    }\n\n    compileTags(tags || mustache.tags);\n\n    var scanner = new Scanner(template);\n\n    var start, type, value, chr, token, openSection;\n    while (!scanner.eos()) {\n      start = scanner.pos;\n\n      // Match any text between tags.\n      value = scanner.scanUntil(openingTagRe);\n\n      if (value) {\n        for (var i = 0, valueLength = value.length; i < valueLength; ++i) {\n          chr = value.charAt(i);\n\n          if (isWhitespace(chr)) {\n            spaces.push(tokens.length);\n          } else {\n            nonSpace = true;\n          }\n\n          tokens.push([ 'text', chr, start, start + 1 ]);\n          start += 1;\n\n          // Check for whitespace on the current line.\n          if (chr === '\\n')\n            stripSpace();\n        }\n      }\n\n      // Match the opening tag.\n      if (!scanner.scan(openingTagRe))\n        break;\n\n      hasTag = true;\n\n      // Get the tag type.\n      type = scanner.scan(tagRe) || 'name';\n      scanner.scan(whiteRe);\n\n      // Get the tag value.\n      if (type === '=') {\n        value = scanner.scanUntil(equalsRe);\n        scanner.scan(equalsRe);\n        scanner.scanUntil(closingTagRe);\n      } else if (type === '{') {\n        value = scanner.scanUntil(closingCurlyRe);\n        scanner.scan(curlyRe);\n        scanner.scanUntil(closingTagRe);\n        type = '&';\n      } else {\n        value = scanner.scanUntil(closingTagRe);\n      }\n\n      // Match the closing tag.\n      if (!scanner.scan(closingTagRe))\n        throw new Error('Unclosed tag at ' + scanner.pos);\n\n      token = [ type, value, start, scanner.pos ];\n      tokens.push(token);\n\n      if (type === '#' || type === '^') {\n        sections.push(token);\n      } else if (type === '/') {\n        // Check section nesting.\n        openSection = sections.pop();\n\n        if (!openSection)\n          throw new Error('Unopened section \"' + value + '\" at ' + start);\n\n        if (openSection[1] !== value)\n          throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + start);\n      } else if (type === 'name' || type === '{' || type === '&') {\n        nonSpace = true;\n      } else if (type === '=') {\n        // Set the tags for the next time around.\n        compileTags(value);\n      }\n    }\n\n    // Make sure there are no open sections when we're done.\n    openSection = sections.pop();\n\n    if (openSection)\n      throw new Error('Unclosed section \"' + openSection[1] + '\" at ' + scanner.pos);\n\n    return nestTokens(squashTokens(tokens));\n  }\n\n  /**\n   * Combines the values of consecutive text tokens in the given `tokens` array\n   * to a single token.\n   */\n  function squashTokens(tokens) {\n    var squashedTokens = [];\n\n    var token, lastToken;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      if (token) {\n        if (token[0] === 'text' && lastToken && lastToken[0] === 'text') {\n          lastToken[1] += token[1];\n          lastToken[3] = token[3];\n        } else {\n          squashedTokens.push(token);\n          lastToken = token;\n        }\n      }\n    }\n\n    return squashedTokens;\n  }\n\n  /**\n   * Forms the given array of `tokens` into a nested tree structure where\n   * tokens that represent a section have two additional items: 1) an array of\n   * all tokens that appear in that section and 2) the index in the original\n   * template that represents the end of that section.\n   */\n  function nestTokens(tokens) {\n    var nestedTokens = [];\n    var collector = nestedTokens;\n    var sections = [];\n\n    var token, section;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      token = tokens[i];\n\n      switch (token[0]) {\n      case '#':\n      case '^':\n        collector.push(token);\n        sections.push(token);\n        collector = token[4] = [];\n        break;\n      case '/':\n        section = sections.pop();\n        section[5] = token[2];\n        collector = sections.length > 0 ? sections[sections.length - 1][4] : nestedTokens;\n        break;\n      default:\n        collector.push(token);\n      }\n    }\n\n    return nestedTokens;\n  }\n\n  /**\n   * A simple string scanner that is used by the template parser to find\n   * tokens in template strings.\n   */\n  function Scanner(string) {\n    this.string = string;\n    this.tail = string;\n    this.pos = 0;\n  }\n\n  /**\n   * Returns `true` if the tail is empty (end of string).\n   */\n  Scanner.prototype.eos = function () {\n    return this.tail === \"\";\n  };\n\n  /**\n   * Tries to match the given regular expression at the current position.\n   * Returns the matched text if it can match, the empty string otherwise.\n   */\n  Scanner.prototype.scan = function (re) {\n    var match = this.tail.match(re);\n\n    if (!match || match.index !== 0)\n      return '';\n\n    var string = match[0];\n\n    this.tail = this.tail.substring(string.length);\n    this.pos += string.length;\n\n    return string;\n  };\n\n  /**\n   * Skips all text until the given regular expression can be matched. Returns\n   * the skipped string, which is the entire tail if no match can be made.\n   */\n  Scanner.prototype.scanUntil = function (re) {\n    var index = this.tail.search(re), match;\n\n    switch (index) {\n    case -1:\n      match = this.tail;\n      this.tail = \"\";\n      break;\n    case 0:\n      match = \"\";\n      break;\n    default:\n      match = this.tail.substring(0, index);\n      this.tail = this.tail.substring(index);\n    }\n\n    this.pos += match.length;\n\n    return match;\n  };\n\n  /**\n   * Represents a rendering context by wrapping a view object and\n   * maintaining a reference to the parent context.\n   */\n  function Context(view, parentContext) {\n    this.view = view == null ? {} : view;\n    this.cache = { '.': this.view };\n    this.parent = parentContext;\n  }\n\n  /**\n   * Creates a new context using the given view with this context\n   * as the parent.\n   */\n  Context.prototype.push = function (view) {\n    return new Context(view, this);\n  };\n\n  /**\n   * Returns the value of the given name in this context, traversing\n   * up the context hierarchy if the value is absent in this context's view.\n   */\n  Context.prototype.lookup = function (name) {\n    var cache = this.cache;\n\n    var value;\n    if (name in cache) {\n      value = cache[name];\n    } else {\n      var context = this, names, index;\n\n      while (context) {\n        if (name.indexOf('.') > 0) {\n          value = context.view;\n          names = name.split('.');\n          index = 0;\n\n          while (value != null && index < names.length)\n            value = value[names[index++]];\n        } else if (typeof context.view == 'object') {\n          value = context.view[name];\n        }\n\n        if (value != null)\n          break;\n\n        context = context.parent;\n      }\n\n      cache[name] = value;\n    }\n\n    if (isFunction(value))\n      value = value.call(this.view);\n\n    return value;\n  };\n\n  /**\n   * A Writer knows how to take a stream of tokens and render them to a\n   * string, given a context. It also maintains a cache of templates to\n   * avoid the need to parse the same template twice.\n   */\n  function Writer() {\n    this.cache = {};\n  }\n\n  /**\n   * Clears all cached templates in this writer.\n   */\n  Writer.prototype.clearCache = function () {\n    this.cache = {};\n  };\n\n  /**\n   * Parses and caches the given `template` and returns the array of tokens\n   * that is generated from the parse.\n   */\n  Writer.prototype.parse = function (template, tags) {\n    var cache = this.cache;\n    var tokens = cache[template];\n\n    if (tokens == null)\n      tokens = cache[template] = parseTemplate(template, tags);\n\n    return tokens;\n  };\n\n  /**\n   * High-level method that is used to render the given `template` with\n   * the given `view`.\n   *\n   * The optional `partials` argument may be an object that contains the\n   * names and templates of partials that are used in the template. It may\n   * also be a function that is used to load partial templates on the fly\n   * that takes a single argument: the name of the partial.\n   */\n  Writer.prototype.render = function (template, view, partials) {\n    var tokens = this.parse(template);\n    var context = (view instanceof Context) ? view : new Context(view);\n    return this.renderTokens(tokens, context, partials, template);\n  };\n\n  /**\n   * Low-level method that renders the given array of `tokens` using\n   * the given `context` and `partials`.\n   *\n   * Note: The `originalTemplate` is only ever used to extract the portion\n   * of the original template that was contained in a higher-order section.\n   * If the template doesn't use higher-order sections, this argument may\n   * be omitted.\n   */\n  Writer.prototype.renderTokens = function (tokens, context, partials, originalTemplate) {\n    var buffer = '';\n\n    var token, symbol, value;\n    for (var i = 0, numTokens = tokens.length; i < numTokens; ++i) {\n      value = undefined;\n      token = tokens[i];\n      symbol = token[0];\n\n      if (symbol === '#') value = this._renderSection(token, context, partials, originalTemplate);\n      else if (symbol === '^') value = this._renderInverted(token, context, partials, originalTemplate);\n      else if (symbol === '>') value = this._renderPartial(token, context, partials, originalTemplate);\n      else if (symbol === '&') value = this._unescapedValue(token, context);\n      else if (symbol === 'name') value = this._escapedValue(token, context);\n      else if (symbol === 'text') value = this._rawValue(token);\n\n      if (value !== undefined)\n        buffer += value;\n    }\n\n    return buffer;\n  };\n\n  Writer.prototype._renderSection = function (token, context, partials, originalTemplate) {\n    var self = this;\n    var buffer = '';\n    var value = context.lookup(token[1]);\n\n    // This function is used to render an arbitrary template\n    // in the current context by higher-order sections.\n    function subRender(template) {\n      return self.render(template, context, partials);\n    }\n\n    if (!value) return;\n\n    if (isArray(value)) {\n      for (var j = 0, valueLength = value.length; j < valueLength; ++j) {\n        buffer += this.renderTokens(token[4], context.push(value[j]), partials, originalTemplate);\n      }\n    } else if (typeof value === 'object' || typeof value === 'string') {\n      buffer += this.renderTokens(token[4], context.push(value), partials, originalTemplate);\n    } else if (isFunction(value)) {\n      if (typeof originalTemplate !== 'string')\n        throw new Error('Cannot use higher-order sections without the original template');\n\n      // Extract the portion of the original template that the section contains.\n      value = value.call(context.view, originalTemplate.slice(token[3], token[5]), subRender);\n\n      if (value != null)\n        buffer += value;\n    } else {\n      buffer += this.renderTokens(token[4], context, partials, originalTemplate);\n    }\n    return buffer;\n  };\n\n  Writer.prototype._renderInverted = function(token, context, partials, originalTemplate) {\n    var value = context.lookup(token[1]);\n\n    // Use JavaScript's definition of falsy. Include empty arrays.\n    // See https://github.com/janl/mustache.js/issues/186\n    if (!value || (isArray(value) && value.length === 0))\n      return this.renderTokens(token[4], context, partials, originalTemplate);\n  };\n\n  Writer.prototype._renderPartial = function(token, context, partials) {\n    if (!partials) return;\n\n    var value = isFunction(partials) ? partials(token[1]) : partials[token[1]];\n    if (value != null)\n      return this.renderTokens(this.parse(value), context, partials, value);\n  };\n\n  Writer.prototype._unescapedValue = function(token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return value;\n  };\n\n  Writer.prototype._escapedValue = function(token, context) {\n    var value = context.lookup(token[1]);\n    if (value != null)\n      return mustache.escape(value);\n  };\n\n  Writer.prototype._rawValue = function(token) {\n    return token[1];\n  };\n\n  mustache.name = \"mustache.js\";\n  mustache.version = \"1.1.0\";\n  mustache.tags = [ \"{{\", \"}}\" ];\n\n  // All high-level mustache.* functions use this writer.\n  var defaultWriter = new Writer();\n\n  /**\n   * Clears all cached templates in the default writer.\n   */\n  mustache.clearCache = function () {\n    return defaultWriter.clearCache();\n  };\n\n  /**\n   * Parses and caches the given template in the default writer and returns the\n   * array of tokens it contains. Doing this ahead of time avoids the need to\n   * parse templates on the fly as they are rendered.\n   */\n  mustache.parse = function (template, tags) {\n    return defaultWriter.parse(template, tags);\n  };\n\n  /**\n   * Renders the `template` with the given `view` and `partials` using the\n   * default writer.\n   */\n  mustache.render = function (template, view, partials) {\n    return defaultWriter.render(template, view, partials);\n  };\n\n  // This is here for backwards compatibility with 0.4.x.\n  mustache.to_html = function (template, view, partials, send) {\n    var result = mustache.render(template, view, partials);\n\n    if (isFunction(send)) {\n      send(result);\n    } else {\n      return result;\n    }\n  };\n\n  // Export the escaping function so that the user may override it.\n  // See https://github.com/janl/mustache.js/issues/244\n  mustache.escape = escapeHtml;\n\n  // Export these mainly for testing, but also for advanced usage.\n  mustache.Scanner = Scanner;\n  mustache.Context = Context;\n  mustache.Writer = Writer;\n\n}));\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = require('./src/js/main');\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nfunction oldAdd(element, className) {\n  var classes = element.className.split(' ');\n  if (classes.indexOf(className) < 0) {\n    classes.push(className);\n  }\n  element.className = classes.join(' ');\n}\n\nfunction oldRemove(element, className) {\n  var classes = element.className.split(' ');\n  var idx = classes.indexOf(className);\n  if (idx >= 0) {\n    classes.splice(idx, 1);\n  }\n  element.className = classes.join(' ');\n}\n\nexports.add = function (element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    oldAdd(element, className);\n  }\n};\n\nexports.remove = function (element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    oldRemove(element, className);\n  }\n};\n\nexports.list = function (element) {\n  if (element.classList) {\n    return Array.prototype.slice.apply(element.classList);\n  } else {\n    return element.className.split(' ');\n  }\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar DOM = {};\n\nDOM.e = function (tagName, className) {\n  var element = document.createElement(tagName);\n  element.className = className;\n  return element;\n};\n\nDOM.appendTo = function (child, parent) {\n  parent.appendChild(child);\n  return child;\n};\n\nfunction cssGet(element, styleName) {\n  return window.getComputedStyle(element)[styleName];\n}\n\nfunction cssSet(element, styleName, styleValue) {\n  if (typeof styleValue === 'number') {\n    styleValue = styleValue.toString() + 'px';\n  }\n  element.style[styleName] = styleValue;\n  return element;\n}\n\nfunction cssMultiSet(element, obj) {\n  for (var key in obj) {\n    var val = obj[key];\n    if (typeof val === 'number') {\n      val = val.toString() + 'px';\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n\nDOM.css = function (element, styleNameOrObject, styleValue) {\n  if (typeof styleNameOrObject === 'object') {\n    // multiple set with object\n    return cssMultiSet(element, styleNameOrObject);\n  } else {\n    if (typeof styleValue === 'undefined') {\n      return cssGet(element, styleNameOrObject);\n    } else {\n      return cssSet(element, styleNameOrObject, styleValue);\n    }\n  }\n};\n\nDOM.matches = function (element, query) {\n  if (typeof element.matches !== 'undefined') {\n    return element.matches(query);\n  } else {\n    if (typeof element.matchesSelector !== 'undefined') {\n      return element.matchesSelector(query);\n    } else if (typeof element.webkitMatchesSelector !== 'undefined') {\n      return element.webkitMatchesSelector(query);\n    } else if (typeof element.mozMatchesSelector !== 'undefined') {\n      return element.mozMatchesSelector(query);\n    } else if (typeof element.msMatchesSelector !== 'undefined') {\n      return element.msMatchesSelector(query);\n    }\n  }\n};\n\nDOM.remove = function (element) {\n  if (typeof element.remove !== 'undefined') {\n    element.remove();\n  } else {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n};\n\nDOM.queryChildren = function (element, selector) {\n  return Array.prototype.filter.call(element.childNodes, function (child) {\n    return DOM.matches(child, selector);\n  });\n};\n\nmodule.exports = DOM;\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar EventElement = function (element) {\n  this.element = element;\n  this.events = {};\n};\n\nEventElement.prototype.bind = function (eventName, handler) {\n  if (typeof this.events[eventName] === 'undefined') {\n    this.events[eventName] = [];\n  }\n  this.events[eventName].push(handler);\n  this.element.addEventListener(eventName, handler, false);\n};\n\nEventElement.prototype.unbind = function (eventName, handler) {\n  var isHandlerProvided = (typeof handler !== 'undefined');\n  this.events[eventName] = this.events[eventName].filter(function (hdlr) {\n    if (isHandlerProvided && hdlr !== handler) {\n      return true;\n    }\n    this.element.removeEventListener(eventName, hdlr, false);\n    return false;\n  }, this);\n};\n\nEventElement.prototype.unbindAll = function () {\n  for (var name in this.events) {\n    this.unbind(name);\n  }\n};\n\nvar EventManager = function () {\n  this.eventElements = [];\n};\n\nEventManager.prototype.eventElement = function (element) {\n  var ee = this.eventElements.filter(function (eventElement) {\n    return eventElement.element === element;\n  })[0];\n  if (typeof ee === 'undefined') {\n    ee = new EventElement(element);\n    this.eventElements.push(ee);\n  }\n  return ee;\n};\n\nEventManager.prototype.bind = function (element, eventName, handler) {\n  this.eventElement(element).bind(eventName, handler);\n};\n\nEventManager.prototype.unbind = function (element, eventName, handler) {\n  this.eventElement(element).unbind(eventName, handler);\n};\n\nEventManager.prototype.unbindAll = function () {\n  for (var i = 0; i < this.eventElements.length; i++) {\n    this.eventElements[i].unbindAll();\n  }\n};\n\nEventManager.prototype.once = function (element, eventName, handler) {\n  var ee = this.eventElement(element);\n  var onceHandler = function (e) {\n    ee.unbind(eventName, onceHandler);\n    handler(e);\n  };\n  ee.bind(eventName, onceHandler);\n};\n\nmodule.exports = EventManager;\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = (function () {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n               .toString(16)\n               .substring(1);\n  }\n  return function () {\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n           s4() + '-' + s4() + s4() + s4();\n  };\n})();\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('./class')\n  , d = require('./dom');\n\nexports.toInt = function (x) {\n  return parseInt(x, 10) || 0;\n};\n\nexports.clone = function (obj) {\n  if (obj === null) {\n    return null;\n  } else if (typeof obj === 'object') {\n    var result = {};\n    for (var key in obj) {\n      result[key] = this.clone(obj[key]);\n    }\n    return result;\n  } else {\n    return obj;\n  }\n};\n\nexports.extend = function (original, source) {\n  var result = this.clone(original);\n  for (var key in source) {\n    result[key] = this.clone(source[key]);\n  }\n  return result;\n};\n\nexports.isEditable = function (el) {\n  return d.matches(el, \"input,[contenteditable]\") ||\n         d.matches(el, \"select,[contenteditable]\") ||\n         d.matches(el, \"textarea,[contenteditable]\") ||\n         d.matches(el, \"button,[contenteditable]\");\n};\n\nexports.removePsClasses = function (element) {\n  var clsList = cls.list(element);\n  for (var i = 0; i < clsList.length; i++) {\n    var className = clsList[i];\n    if (className.indexOf('ps-') === 0) {\n      cls.remove(element, className);\n    }\n  }\n};\n\nexports.outerWidth = function (element) {\n  return this.toInt(d.css(element, 'width')) +\n         this.toInt(d.css(element, 'paddingLeft')) +\n         this.toInt(d.css(element, 'paddingRight')) +\n         this.toInt(d.css(element, 'borderLeftWidth')) +\n         this.toInt(d.css(element, 'borderRightWidth'));\n};\n\nexports.startScrolling = function (element, axis) {\n  cls.add(element, 'ps-in-scrolling');\n  if (typeof axis !== 'undefined') {\n    cls.add(element, 'ps-' + axis);\n  } else {\n    cls.add(element, 'ps-x');\n    cls.add(element, 'ps-y');\n  }\n};\n\nexports.stopScrolling = function (element, axis) {\n  cls.remove(element, 'ps-in-scrolling');\n  if (typeof axis !== 'undefined') {\n    cls.remove(element, 'ps-' + axis);\n  } else {\n    cls.remove(element, 'ps-x');\n    cls.remove(element, 'ps-y');\n  }\n};\n\nexports.env = {\n  isWebKit: 'WebkitAppearance' in document.documentElement.style,\n  supportsTouch: (('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch),\n  supportsIePointer: window.navigator.msMaxTouchPoints !== null\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar destroy = require('./plugin/destroy')\n  , initialize = require('./plugin/initialize')\n  , update = require('./plugin/update');\n\nmodule.exports = {\n  initialize: initialize,\n  update: update,\n  destroy: destroy\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nmodule.exports = {\n  maxScrollbarLength: null,\n  minScrollbarLength: null,\n  scrollXMarginOffset: 0,\n  scrollYMarginOffset: 0,\n  stopPropagationOnClick: true,\n  suppressScrollX: false,\n  suppressScrollY: false,\n  swipePropagation: true,\n  useBothWheelAxes: false,\n  useKeyboard: true,\n  useSelectionScroll: false,\n  wheelPropagation: false,\n  wheelSpeed: 1\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances');\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  if (!i) {\n    return;\n  }\n\n  i.event.unbindAll();\n  d.remove(i.scrollbarX);\n  d.remove(i.scrollbarY);\n  d.remove(i.scrollbarXRail);\n  d.remove(i.scrollbarYRail);\n  h.removePsClasses(element);\n\n  instances.remove(element);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindClickRailHandler(element, i) {\n  function pageOffset(el) {\n    return el.getBoundingClientRect();\n  }\n  var stopPropagation = window.Event.prototype.stopPropagation.bind;\n\n  if (i.settings.stopPropagationOnClick) {\n    i.event.bind(i.scrollbarY, 'click', stopPropagation);\n  }\n  i.event.bind(i.scrollbarYRail, 'click', function (e) {\n    var halfOfScrollbarLength = h.toInt(i.scrollbarYHeight / 2);\n    var positionTop = i.railYRatio * (e.pageY - window.scrollY - pageOffset(i.scrollbarYRail).top - halfOfScrollbarLength);\n    var maxPositionTop = i.railYRatio * (i.railYHeight - i.scrollbarYHeight);\n    var positionRatio = positionTop / maxPositionTop;\n\n    if (positionRatio < 0) {\n      positionRatio = 0;\n    } else if (positionRatio > 1) {\n      positionRatio = 1;\n    }\n\n    updateScroll(element, 'top', (i.contentHeight - i.containerHeight) * positionRatio);\n    updateGeometry(element);\n\n    e.stopPropagation();\n  });\n\n  if (i.settings.stopPropagationOnClick) {\n    i.event.bind(i.scrollbarX, 'click', stopPropagation);\n  }\n  i.event.bind(i.scrollbarXRail, 'click', function (e) {\n    var halfOfScrollbarLength = h.toInt(i.scrollbarXWidth / 2);\n    var positionLeft = i.railXRatio * (e.pageX - window.scrollX - pageOffset(i.scrollbarXRail).left - halfOfScrollbarLength);\n    var maxPositionLeft = i.railXRatio * (i.railXWidth - i.scrollbarXWidth);\n    var positionRatio = positionLeft / maxPositionLeft;\n\n    if (positionRatio < 0) {\n      positionRatio = 0;\n    } else if (positionRatio > 1) {\n      positionRatio = 1;\n    }\n\n    updateScroll(element, 'left', ((i.contentWidth - i.containerWidth) * positionRatio) - i.negativeScrollAdjustment);\n    updateGeometry(element);\n\n    e.stopPropagation();\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindClickRailHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../../lib/dom')\n  , h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindMouseScrollXHandler(element, i) {\n  var currentLeft = null;\n  var currentPageX = null;\n\n  function updateScrollLeft(deltaX) {\n    var newLeft = currentLeft + (deltaX * i.railXRatio);\n    var maxLeft = i.scrollbarXRail.getBoundingClientRect().left + (i.railXRatio * (i.railXWidth - i.scrollbarXWidth));\n\n    if (newLeft < 0) {\n      i.scrollbarXLeft = 0;\n    } else if (newLeft > maxLeft) {\n      i.scrollbarXLeft = maxLeft;\n    } else {\n      i.scrollbarXLeft = newLeft;\n    }\n\n    var scrollLeft = h.toInt(i.scrollbarXLeft * (i.contentWidth - i.containerWidth) / (i.containerWidth - (i.railXRatio * i.scrollbarXWidth))) - i.negativeScrollAdjustment;\n    updateScroll(element, 'left', scrollLeft);\n  }\n\n  var mouseMoveHandler = function (e) {\n    updateScrollLeft(e.pageX - currentPageX);\n    updateGeometry(element);\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  var mouseUpHandler = function () {\n    h.stopScrolling(element, 'x');\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  };\n\n  i.event.bind(i.scrollbarX, 'mousedown', function (e) {\n    currentPageX = e.pageX;\n    currentLeft = h.toInt(d.css(i.scrollbarX, 'left')) * i.railXRatio;\n    h.startScrolling(element, 'x');\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nfunction bindMouseScrollYHandler(element, i) {\n  var currentTop = null;\n  var currentPageY = null;\n\n  function updateScrollTop(deltaY) {\n    var newTop = currentTop + (deltaY * i.railYRatio);\n    var maxTop = i.scrollbarYRail.getBoundingClientRect().top + (i.railYRatio * (i.railYHeight - i.scrollbarYHeight));\n\n    if (newTop < 0) {\n      i.scrollbarYTop = 0;\n    } else if (newTop > maxTop) {\n      i.scrollbarYTop = maxTop;\n    } else {\n      i.scrollbarYTop = newTop;\n    }\n\n    var scrollTop = h.toInt(i.scrollbarYTop * (i.contentHeight - i.containerHeight) / (i.containerHeight - (i.railYRatio * i.scrollbarYHeight)));\n    updateScroll(element, 'top', scrollTop);\n  }\n\n  var mouseMoveHandler = function (e) {\n    updateScrollTop(e.pageY - currentPageY);\n    updateGeometry(element);\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  var mouseUpHandler = function () {\n    h.stopScrolling(element, 'y');\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  };\n\n  i.event.bind(i.scrollbarY, 'mousedown', function (e) {\n    currentPageY = e.pageY;\n    currentTop = h.toInt(d.css(i.scrollbarY, 'top')) * i.railYRatio;\n    h.startScrolling(element, 'y');\n\n    i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n    i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindMouseScrollXHandler(element, i);\n  bindMouseScrollYHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindKeyboardHandler(element, i) {\n  var hovered = false;\n  i.event.bind(element, 'mouseenter', function () {\n    hovered = true;\n  });\n  i.event.bind(element, 'mouseleave', function () {\n    hovered = false;\n  });\n\n  var shouldPrevent = false;\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  i.event.bind(i.ownerDocument, 'keydown', function (e) {\n    if (e.isDefaultPrevented && e.isDefaultPrevented()) {\n      return;\n    }\n\n    if (!hovered) {\n      return;\n    }\n\n    var activeElement = document.activeElement ? document.activeElement : i.ownerDocument.activeElement;\n    if (activeElement) {\n      // go deeper if element is a webcomponent\n      while (activeElement.shadowRoot) {\n        activeElement = activeElement.shadowRoot.activeElement;\n      }\n      if (h.isEditable(activeElement)) {\n        return;\n      }\n    }\n\n    var deltaX = 0;\n    var deltaY = 0;\n\n    switch (e.which) {\n    case 37: // left\n      deltaX = -30;\n      break;\n    case 38: // up\n      deltaY = 30;\n      break;\n    case 39: // right\n      deltaX = 30;\n      break;\n    case 40: // down\n      deltaY = -30;\n      break;\n    case 33: // page up\n      deltaY = 90;\n      break;\n    case 32: // space bar\n      if (e.shiftKey) {\n        deltaY = 90;\n      } else {\n        deltaY = -90;\n      }\n      break;\n    case 34: // page down\n      deltaY = -90;\n      break;\n    case 35: // end\n      if (e.ctrlKey) {\n        deltaY = -i.contentHeight;\n      } else {\n        deltaY = -i.containerHeight;\n      }\n      break;\n    case 36: // home\n      if (e.ctrlKey) {\n        deltaY = element.scrollTop;\n      } else {\n        deltaY = i.containerHeight;\n      }\n      break;\n    default:\n      return;\n    }\n\n    updateScroll(element, 'top', element.scrollTop - deltaY);\n    updateScroll(element, 'left', element.scrollLeft + deltaX);\n    updateGeometry(element);\n\n    shouldPrevent = shouldPreventDefault(deltaX, deltaY);\n    if (shouldPrevent) {\n      e.preventDefault();\n    }\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindKeyboardHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindMouseWheelHandler(element, i) {\n  var shouldPrevent = false;\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if ((scrollTop === 0 && deltaY > 0) || (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    var scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if ((scrollLeft === 0 && deltaX < 0) || (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  function getDeltaFromEvent(e) {\n    var deltaX = e.deltaX;\n    var deltaY = -1 * e.deltaY;\n\n    if (typeof deltaX === \"undefined\" || typeof deltaY === \"undefined\") {\n      // OS X Safari\n      deltaX = -1 * e.wheelDeltaX / 6;\n      deltaY = e.wheelDeltaY / 6;\n    }\n\n    if (e.deltaMode && e.deltaMode === 1) {\n      // Firefox in deltaMode 1: Line scrolling\n      deltaX *= 10;\n      deltaY *= 10;\n    }\n\n    if (deltaX !== deltaX && deltaY !== deltaY/* NaN checks */) {\n      // IE in some mouse drivers\n      deltaX = 0;\n      deltaY = e.wheelDelta;\n    }\n\n    return [deltaX, deltaY];\n  }\n\n  function shouldBeConsumedByTextarea(deltaX, deltaY) {\n    var hoveredTextarea = element.querySelector('textarea:hover');\n    if (hoveredTextarea) {\n      var maxScrollTop = hoveredTextarea.scrollHeight - hoveredTextarea.clientHeight;\n      if (maxScrollTop > 0) {\n        if (!(hoveredTextarea.scrollTop === 0 && deltaY > 0) &&\n            !(hoveredTextarea.scrollTop === maxScrollTop && deltaY < 0)) {\n          return true;\n        }\n      }\n      var maxScrollLeft = hoveredTextarea.scrollLeft - hoveredTextarea.clientWidth;\n      if (maxScrollLeft > 0) {\n        if (!(hoveredTextarea.scrollLeft === 0 && deltaX < 0) &&\n            !(hoveredTextarea.scrollLeft === maxScrollLeft && deltaX > 0)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function mousewheelHandler(e) {\n    // FIXME: this is a quick fix for the select problem in FF and IE.\n    // If there comes an effective way to deal with the problem,\n    // this lines should be removed.\n    if (!h.env.isWebKit && element.querySelector('select:focus')) {\n      return;\n    }\n\n    var delta = getDeltaFromEvent(e);\n\n    var deltaX = delta[0];\n    var deltaY = delta[1];\n\n    if (shouldBeConsumedByTextarea(deltaX, deltaY)) {\n      return;\n    }\n\n    shouldPrevent = false;\n    if (!i.settings.useBothWheelAxes) {\n      // deltaX will only be used for horizontal scrolling and deltaY will\n      // only be used for vertical scrolling - this is the default\n      updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));\n      updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n      // only vertical scrollbar is active and useBothWheelAxes option is\n      // active, so let's scroll vertical bar using both mouse wheel axes\n      if (deltaY) {\n        updateScroll(element, 'top', element.scrollTop - (deltaY * i.settings.wheelSpeed));\n      } else {\n        updateScroll(element, 'top', element.scrollTop + (deltaX * i.settings.wheelSpeed));\n      }\n      shouldPrevent = true;\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n      // useBothWheelAxes and only horizontal bar is active, so use both\n      // wheel axes for horizontal bar\n      if (deltaX) {\n        updateScroll(element, 'left', element.scrollLeft + (deltaX * i.settings.wheelSpeed));\n      } else {\n        updateScroll(element, 'left', element.scrollLeft - (deltaY * i.settings.wheelSpeed));\n      }\n      shouldPrevent = true;\n    }\n\n    updateGeometry(element);\n\n    shouldPrevent = (shouldPrevent || shouldPreventDefault(deltaX, deltaY));\n    if (shouldPrevent) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  if (typeof window.onwheel !== \"undefined\") {\n    i.event.bind(element, 'wheel', mousewheelHandler);\n  } else if (typeof window.onmousewheel !== \"undefined\") {\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\n  }\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindMouseWheelHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('../instances')\n  , updateGeometry = require('../update-geometry');\n\nfunction bindNativeScrollHandler(element, i) {\n  i.event.bind(element, 'scroll', function () {\n    updateGeometry(element);\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindNativeScrollHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar h = require('../../lib/helper')\n  , instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindSelectionHandler(element, i) {\n  function getRangeNode() {\n    var selection = window.getSelection ? window.getSelection() :\n                    document.getSelection ? document.getSelection() : '';\n    if (selection.toString().length === 0) {\n      return null;\n    } else {\n      return selection.getRangeAt(0).commonAncestorContainer;\n    }\n  }\n\n  var scrollingLoop = null;\n  var scrollDiff = {top: 0, left: 0};\n  function startScrolling() {\n    if (!scrollingLoop) {\n      scrollingLoop = setInterval(function () {\n        if (!instances.get(element)) {\n          clearInterval(scrollingLoop);\n          return;\n        }\n\n        updateScroll(element, 'top', element.scrollTop + scrollDiff.top);\n        updateScroll(element, 'left', element.scrollLeft + scrollDiff.left);\n        updateGeometry(element);\n      }, 50); // every .1 sec\n    }\n  }\n  function stopScrolling() {\n    if (scrollingLoop) {\n      clearInterval(scrollingLoop);\n      scrollingLoop = null;\n    }\n    h.stopScrolling(element);\n  }\n\n  var isSelected = false;\n  i.event.bind(i.ownerDocument, 'selectionchange', function () {\n    if (element.contains(getRangeNode())) {\n      isSelected = true;\n    } else {\n      isSelected = false;\n      stopScrolling();\n    }\n  });\n  i.event.bind(window, 'mouseup', function () {\n    if (isSelected) {\n      isSelected = false;\n      stopScrolling();\n    }\n  });\n\n  i.event.bind(window, 'mousemove', function (e) {\n    if (isSelected) {\n      var mousePosition = {x: e.pageX, y: e.pageY};\n      var containerGeometry = {\n        left: element.offsetLeft,\n        right: element.offsetLeft + element.offsetWidth,\n        top: element.offsetTop,\n        bottom: element.offsetTop + element.offsetHeight\n      };\n\n      if (mousePosition.x < containerGeometry.left + 3) {\n        scrollDiff.left = -5;\n        h.startScrolling(element, 'x');\n      } else if (mousePosition.x > containerGeometry.right - 3) {\n        scrollDiff.left = 5;\n        h.startScrolling(element, 'x');\n      } else {\n        scrollDiff.left = 0;\n      }\n\n      if (mousePosition.y < containerGeometry.top + 3) {\n        if (containerGeometry.top + 3 - mousePosition.y < 5) {\n          scrollDiff.top = -5;\n        } else {\n          scrollDiff.top = -20;\n        }\n        h.startScrolling(element, 'y');\n      } else if (mousePosition.y > containerGeometry.bottom - 3) {\n        if (mousePosition.y - containerGeometry.bottom + 3 < 5) {\n          scrollDiff.top = 5;\n        } else {\n          scrollDiff.top = 20;\n        }\n        h.startScrolling(element, 'y');\n      } else {\n        scrollDiff.top = 0;\n      }\n\n      if (scrollDiff.top === 0 && scrollDiff.left === 0) {\n        stopScrolling();\n      } else {\n        startScrolling();\n      }\n    }\n  });\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n  bindSelectionHandler(element, i);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('../instances')\n  , updateGeometry = require('../update-geometry')\n  , updateScroll = require('../update-scroll');\n\nfunction bindTouchHandler(element, i, supportsTouch, supportsIePointer) {\n  function shouldPreventDefault(deltaX, deltaY) {\n    var scrollTop = element.scrollTop;\n    var scrollLeft = element.scrollLeft;\n    var magnitudeX = Math.abs(deltaX);\n    var magnitudeY = Math.abs(deltaY);\n\n    if (magnitudeY > magnitudeX) {\n      // user is perhaps trying to swipe up/down the page\n\n      if (((deltaY < 0) && (scrollTop === i.contentHeight - i.containerHeight)) ||\n          ((deltaY > 0) && (scrollTop === 0))) {\n        return !i.settings.swipePropagation;\n      }\n    } else if (magnitudeX > magnitudeY) {\n      // user is perhaps trying to swipe left/right across the page\n\n      if (((deltaX < 0) && (scrollLeft === i.contentWidth - i.containerWidth)) ||\n          ((deltaX > 0) && (scrollLeft === 0))) {\n        return !i.settings.swipePropagation;\n      }\n    }\n\n    return true;\n  }\n\n  function applyTouchMove(differenceX, differenceY) {\n    updateScroll(element, 'top', element.scrollTop - differenceY);\n    updateScroll(element, 'left', element.scrollLeft - differenceX);\n\n    updateGeometry(element);\n  }\n\n  var startOffset = {};\n  var startTime = 0;\n  var speed = {};\n  var easingLoop = null;\n  var inGlobalTouch = false;\n  var inLocalTouch = false;\n\n  function globalTouchStart() {\n    inGlobalTouch = true;\n  }\n  function globalTouchEnd() {\n    inGlobalTouch = false;\n  }\n\n  function getTouch(e) {\n    if (e.targetTouches) {\n      return e.targetTouches[0];\n    } else {\n      // Maybe IE pointer\n      return e;\n    }\n  }\n  function shouldHandle(e) {\n    if (e.targetTouches && e.targetTouches.length === 1) {\n      return true;\n    }\n    if (e.pointerType && e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n      return true;\n    }\n    return false;\n  }\n  function touchStart(e) {\n    if (shouldHandle(e)) {\n      inLocalTouch = true;\n\n      var touch = getTouch(e);\n\n      startOffset.pageX = touch.pageX;\n      startOffset.pageY = touch.pageY;\n\n      startTime = (new Date()).getTime();\n\n      if (easingLoop !== null) {\n        clearInterval(easingLoop);\n      }\n\n      e.stopPropagation();\n    }\n  }\n  function touchMove(e) {\n    if (!inGlobalTouch && inLocalTouch && shouldHandle(e)) {\n      var touch = getTouch(e);\n\n      var currentOffset = {pageX: touch.pageX, pageY: touch.pageY};\n\n      var differenceX = currentOffset.pageX - startOffset.pageX;\n      var differenceY = currentOffset.pageY - startOffset.pageY;\n\n      applyTouchMove(differenceX, differenceY);\n      startOffset = currentOffset;\n\n      var currentTime = (new Date()).getTime();\n\n      var timeGap = currentTime - startTime;\n      if (timeGap > 0) {\n        speed.x = differenceX / timeGap;\n        speed.y = differenceY / timeGap;\n        startTime = currentTime;\n      }\n\n      if (shouldPreventDefault(differenceX, differenceY)) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  }\n  function touchEnd() {\n    if (!inGlobalTouch && inLocalTouch) {\n      inLocalTouch = false;\n\n      clearInterval(easingLoop);\n      easingLoop = setInterval(function () {\n        if (!instances.get(element)) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        applyTouchMove(speed.x * 30, speed.y * 30);\n\n        speed.x *= 0.8;\n        speed.y *= 0.8;\n      }, 10);\n    }\n  }\n\n  if (supportsTouch) {\n    i.event.bind(window, 'touchstart', globalTouchStart);\n    i.event.bind(window, 'touchend', globalTouchEnd);\n    i.event.bind(element, 'touchstart', touchStart);\n    i.event.bind(element, 'touchmove', touchMove);\n    i.event.bind(element, 'touchend', touchEnd);\n  }\n\n  if (supportsIePointer) {\n    if (window.PointerEvent) {\n      i.event.bind(window, 'pointerdown', globalTouchStart);\n      i.event.bind(window, 'pointerup', globalTouchEnd);\n      i.event.bind(element, 'pointerdown', touchStart);\n      i.event.bind(element, 'pointermove', touchMove);\n      i.event.bind(element, 'pointerup', touchEnd);\n    } else if (window.MSPointerEvent) {\n      i.event.bind(window, 'MSPointerDown', globalTouchStart);\n      i.event.bind(window, 'MSPointerUp', globalTouchEnd);\n      i.event.bind(element, 'MSPointerDown', touchStart);\n      i.event.bind(element, 'MSPointerMove', touchMove);\n      i.event.bind(element, 'MSPointerUp', touchEnd);\n    }\n  }\n}\n\nmodule.exports = function (element, supportsTouch, supportsIePointer) {\n  var i = instances.get(element);\n  bindTouchHandler(element, i, supportsTouch, supportsIePointer);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('../lib/class')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateGeometry = require('./update-geometry');\n\n// Handlers\nvar clickRailHandler = require('./handler/click-rail')\n  , dragScrollbarHandler = require('./handler/drag-scrollbar')\n  , keyboardHandler = require('./handler/keyboard')\n  , mouseWheelHandler = require('./handler/mouse-wheel')\n  , nativeScrollHandler = require('./handler/native-scroll')\n  , selectionHandler = require('./handler/selection')\n  , touchHandler = require('./handler/touch');\n\nmodule.exports = function (element, userSettings) {\n  userSettings = typeof userSettings === 'object' ? userSettings : {};\n\n  cls.add(element, 'ps-container');\n\n  // Create a plugin instance.\n  var i = instances.add(element);\n\n  i.settings = h.extend(i.settings, userSettings);\n\n  clickRailHandler(element);\n  dragScrollbarHandler(element);\n  mouseWheelHandler(element);\n  nativeScrollHandler(element);\n\n  if (i.settings.useSelectionScroll) {\n    selectionHandler(element);\n  }\n\n  if (h.env.supportsTouch || h.env.supportsIePointer) {\n    touchHandler(element, h.env.supportsTouch, h.env.supportsIePointer);\n  }\n  if (i.settings.useKeyboard) {\n    keyboardHandler(element);\n  }\n\n  updateGeometry(element);\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , defaultSettings = require('./default-setting')\n  , EventManager = require('../lib/event-manager')\n  , guid = require('../lib/guid')\n  , h = require('../lib/helper');\n\nvar instances = {};\n\nfunction Instance(element) {\n  var i = this;\n\n  i.settings = h.clone(defaultSettings);\n  i.containerWidth = null;\n  i.containerHeight = null;\n  i.contentWidth = null;\n  i.contentHeight = null;\n\n  i.isRtl = d.css(element, 'direction') === \"rtl\";\n  i.isNegativeScroll = (function () {\n    var originalScrollLeft = element.scrollLeft;\n    var result = null;\n    element.scrollLeft = -1;\n    result = element.scrollLeft < 0;\n    element.scrollLeft = originalScrollLeft;\n    return result;\n  })();\n  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;\n  i.event = new EventManager();\n  i.ownerDocument = element.ownerDocument || document;\n\n  i.scrollbarXRail = d.appendTo(d.e('div', 'ps-scrollbar-x-rail'), element);\n  i.scrollbarX = d.appendTo(d.e('div', 'ps-scrollbar-x'), i.scrollbarXRail);\n  i.scrollbarXActive = null;\n  i.scrollbarXWidth = null;\n  i.scrollbarXLeft = null;\n  i.scrollbarXBottom = h.toInt(d.css(i.scrollbarXRail, 'bottom'));\n  i.isScrollbarXUsingBottom = i.scrollbarXBottom === i.scrollbarXBottom; // !isNaN\n  i.scrollbarXTop = i.isScrollbarXUsingBottom ? null : h.toInt(d.css(i.scrollbarXRail, 'top'));\n  i.railBorderXWidth = h.toInt(d.css(i.scrollbarXRail, 'borderLeftWidth')) + h.toInt(d.css(i.scrollbarXRail, 'borderRightWidth'));\n  // Set rail to display:block to calculate margins\n  d.css(i.scrollbarXRail, 'display', 'block');\n  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));\n  d.css(i.scrollbarXRail, 'display', '');\n  i.railXWidth = null;\n  i.railXRatio = null;\n\n  i.scrollbarYRail = d.appendTo(d.e('div', 'ps-scrollbar-y-rail'), element);\n  i.scrollbarY = d.appendTo(d.e('div', 'ps-scrollbar-y'), i.scrollbarYRail);\n  i.scrollbarYActive = null;\n  i.scrollbarYHeight = null;\n  i.scrollbarYTop = null;\n  i.scrollbarYRight = h.toInt(d.css(i.scrollbarYRail, 'right'));\n  i.isScrollbarYUsingRight = i.scrollbarYRight === i.scrollbarYRight; // !isNaN\n  i.scrollbarYLeft = i.isScrollbarYUsingRight ? null : h.toInt(d.css(i.scrollbarYRail, 'left'));\n  i.scrollbarYOuterWidth = i.isRtl ? h.outerWidth(i.scrollbarY) : null;\n  i.railBorderYWidth = h.toInt(d.css(i.scrollbarYRail, 'borderTopWidth')) + h.toInt(d.css(i.scrollbarYRail, 'borderBottomWidth'));\n  d.css(i.scrollbarYRail, 'display', 'block');\n  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));\n  d.css(i.scrollbarYRail, 'display', '');\n  i.railYHeight = null;\n  i.railYRatio = null;\n}\n\nfunction getId(element) {\n  if (typeof element.dataset === 'undefined') {\n    return element.getAttribute('data-ps-id');\n  } else {\n    return element.dataset.psId;\n  }\n}\n\nfunction setId(element, id) {\n  if (typeof element.dataset === 'undefined') {\n    element.setAttribute('data-ps-id', id);\n  } else {\n    element.dataset.psId = id;\n  }\n}\n\nfunction removeId(element) {\n  if (typeof element.dataset === 'undefined') {\n    element.removeAttribute('data-ps-id');\n  } else {\n    delete element.dataset.psId;\n  }\n}\n\nexports.add = function (element) {\n  var newId = guid();\n  setId(element, newId);\n  instances[newId] = new Instance(element);\n  return instances[newId];\n};\n\nexports.remove = function (element) {\n  delete instances[getId(element)];\n  removeId(element);\n};\n\nexports.get = function (element) {\n  return instances[getId(element)];\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar cls = require('../lib/class')\n  , d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateScroll = require('./update-scroll');\n\nfunction getThumbSize(i, thumbSize) {\n  if (i.settings.minScrollbarLength) {\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n  }\n  if (i.settings.maxScrollbarLength) {\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n  }\n  return thumbSize;\n}\n\nfunction updateCss(element, i) {\n  var xRailOffset = {width: i.railXWidth};\n  if (i.isRtl) {\n    xRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth - i.contentWidth;\n  } else {\n    xRailOffset.left = element.scrollLeft;\n  }\n  if (i.isScrollbarXUsingBottom) {\n    xRailOffset.bottom = i.scrollbarXBottom - element.scrollTop;\n  } else {\n    xRailOffset.top = i.scrollbarXTop + element.scrollTop;\n  }\n  d.css(i.scrollbarXRail, xRailOffset);\n\n  var yRailOffset = {top: element.scrollTop, height: i.railYHeight};\n  if (i.isScrollbarYUsingRight) {\n    if (i.isRtl) {\n      yRailOffset.right = i.contentWidth - (i.negativeScrollAdjustment + element.scrollLeft) - i.scrollbarYRight - i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n    }\n  } else {\n    if (i.isRtl) {\n      yRailOffset.left = i.negativeScrollAdjustment + element.scrollLeft + i.containerWidth * 2 - i.contentWidth - i.scrollbarYLeft - i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n    }\n  }\n  d.css(i.scrollbarYRail, yRailOffset);\n\n  d.css(i.scrollbarX, {left: i.scrollbarXLeft, width: i.scrollbarXWidth - i.railBorderXWidth});\n  d.css(i.scrollbarY, {top: i.scrollbarYTop, height: i.scrollbarYHeight - i.railBorderYWidth});\n}\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  i.containerWidth = element.clientWidth;\n  i.containerHeight = element.clientHeight;\n  i.contentWidth = element.scrollWidth;\n  i.contentHeight = element.scrollHeight;\n\n  var existingRails;\n  if (!element.contains(i.scrollbarXRail)) {\n    existingRails = d.queryChildren(element, '.ps-scrollbar-x-rail');\n    if (existingRails.length > 0) {\n      existingRails.forEach(function (rail) {\n        d.remove(rail);\n      });\n    }\n    d.appendTo(i.scrollbarXRail, element);\n  }\n  if (!element.contains(i.scrollbarYRail)) {\n    existingRails = d.queryChildren(element, '.ps-scrollbar-y-rail');\n    if (existingRails.length > 0) {\n      existingRails.forEach(function (rail) {\n        d.remove(rail);\n      });\n    }\n    d.appendTo(i.scrollbarYRail, element);\n  }\n\n  if (!i.settings.suppressScrollX && i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth) {\n    i.scrollbarXActive = true;\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\n    i.railXRatio = i.containerWidth / i.railXWidth;\n    i.scrollbarXWidth = getThumbSize(i, h.toInt(i.railXWidth * i.containerWidth / i.contentWidth));\n    i.scrollbarXLeft = h.toInt((i.negativeScrollAdjustment + element.scrollLeft) * (i.railXWidth - i.scrollbarXWidth) / (i.contentWidth - i.containerWidth));\n  } else {\n    i.scrollbarXActive = false;\n    i.scrollbarXWidth = 0;\n    i.scrollbarXLeft = 0;\n    element.scrollLeft = 0;\n  }\n\n  if (!i.settings.suppressScrollY && i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight) {\n    i.scrollbarYActive = true;\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\n    i.railYRatio = i.containerHeight / i.railYHeight;\n    i.scrollbarYHeight = getThumbSize(i, h.toInt(i.railYHeight * i.containerHeight / i.contentHeight));\n    i.scrollbarYTop = h.toInt(element.scrollTop * (i.railYHeight - i.scrollbarYHeight) / (i.contentHeight - i.containerHeight));\n  } else {\n    i.scrollbarYActive = false;\n    i.scrollbarYHeight = 0;\n    i.scrollbarYTop = 0;\n    updateScroll(element, 'top', 0);\n  }\n\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n  }\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n  }\n\n  updateCss(element, i);\n\n  cls[i.scrollbarXActive ? 'add' : 'remove'](element, 'ps-active-x');\n  cls[i.scrollbarYActive ? 'add' : 'remove'](element, 'ps-active-y');\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar instances = require('./instances');\n\nvar upEvent = document.createEvent('Event')\n  , downEvent = document.createEvent('Event')\n  , leftEvent = document.createEvent('Event')\n  , rightEvent = document.createEvent('Event')\n  , yEvent = document.createEvent('Event')\n  , xEvent = document.createEvent('Event')\n  , xStartEvent = document.createEvent('Event')\n  , xEndEvent = document.createEvent('Event')\n  , yStartEvent = document.createEvent('Event')\n  , yEndEvent = document.createEvent('Event')\n  , lastTop\n  , lastLeft;\n\nupEvent.initEvent('ps-scroll-up', true, true);\ndownEvent.initEvent('ps-scroll-down', true, true);\nleftEvent.initEvent('ps-scroll-left', true, true);\nrightEvent.initEvent('ps-scroll-right', true, true);\nyEvent.initEvent('ps-scroll-y', true, true);\nxEvent.initEvent('ps-scroll-x', true, true);\nxStartEvent.initEvent('ps-x-reach-start', true, true);\nxEndEvent.initEvent('ps-x-reach-end', true, true);\nyStartEvent.initEvent('ps-y-reach-start', true, true);\nyEndEvent.initEvent('ps-y-reach-end', true, true);\n\nmodule.exports = function (element, axis, value) {\n  if (typeof element === 'undefined') {\n    throw 'You must provide an element to the update-scroll function';\n  }\n\n  if (typeof axis === 'undefined') {\n    throw 'You must provide an axis to the update-scroll function';\n  }\n\n  if (typeof value === 'undefined') {\n    throw 'You must provide a value to the update-scroll function';\n  }\n\n  if (axis === 'top' && value <= 0) {\n    element.scrollTop = 0;\n    element.dispatchEvent(yStartEvent);\n    return; // don't allow negative scroll\n  }\n\n  if (axis === 'left' && value <= 0) {\n    element.scrollLeft = 0;\n    element.dispatchEvent(xStartEvent);\n    return; // don't allow negative scroll\n  }\n\n  var i = instances.get(element);\n\n  if (axis === 'top' && value > i.contentHeight - i.containerHeight) {\n    element.scrollTop = i.contentHeight - i.containerHeight;\n    element.dispatchEvent(yEndEvent);\n    return; // don't allow scroll past container\n  }\n\n  if (axis === 'left' && value > i.contentWidth - i.containerWidth) {\n    element.scrollLeft = i.contentWidth - i.containerWidth;\n    element.dispatchEvent(xEndEvent);\n    return; // don't allow scroll past container\n  }\n\n  if (!lastTop) {\n    lastTop = element.scrollTop;\n  }\n\n  if (!lastLeft) {\n    lastLeft = element.scrollLeft;\n  }\n\n  if (axis === 'top' && value < lastTop) {\n    element.dispatchEvent(upEvent);\n  }\n\n  if (axis === 'top' && value > lastTop) {\n    element.dispatchEvent(downEvent);\n  }\n\n  if (axis === 'left' && value < lastLeft) {\n    element.dispatchEvent(leftEvent);\n  }\n\n  if (axis === 'left' && value > lastLeft) {\n    element.dispatchEvent(rightEvent);\n  }\n\n  if (axis === 'top') {\n    element.scrollTop = lastTop = value;\n    element.dispatchEvent(yEvent);\n  }\n\n  if (axis === 'left') {\n    element.scrollLeft = lastLeft = value;\n    element.dispatchEvent(xEvent);\n  }\n\n};\n",
    "/* Copyright (c) 2015 Hyunje Alex Jun and other contributors\n * Licensed under the MIT License\n */\n'use strict';\n\nvar d = require('../lib/dom')\n  , h = require('../lib/helper')\n  , instances = require('./instances')\n  , updateGeometry = require('./update-geometry');\n\nmodule.exports = function (element) {\n  var i = instances.get(element);\n\n  if (!i) {\n    return;\n  }\n\n  // Recalcuate negative scrollLeft adjustment\n  i.negativeScrollAdjustment = i.isNegativeScroll ? element.scrollWidth - element.clientWidth : 0;\n\n  // Recalculate rail margins\n  d.css(i.scrollbarXRail, 'display', 'block');\n  d.css(i.scrollbarYRail, 'display', 'block');\n  i.railXMarginWidth = h.toInt(d.css(i.scrollbarXRail, 'marginLeft')) + h.toInt(d.css(i.scrollbarXRail, 'marginRight'));\n  i.railYMarginHeight = h.toInt(d.css(i.scrollbarYRail, 'marginTop')) + h.toInt(d.css(i.scrollbarYRail, 'marginBottom'));\n\n  // Hide scrollbars not to affect scrollWidth and scrollHeight\n  d.css(i.scrollbarXRail, 'display', 'none');\n  d.css(i.scrollbarYRail, 'display', 'none');\n\n  updateGeometry(element);\n\n  d.css(i.scrollbarXRail, 'display', '');\n  d.css(i.scrollbarYRail, 'display', '');\n};\n",
    "/**\n * Abstract handler for animator steps\n */\nvar AnimatorStepsRange = function(start, end) {\n  if (start < 0) throw new Error('start must be a positive number');\n  if (start >= end) throw new Error('start must be smaller than end');\n\n  this.start = start;\n  this.end = end;\n};\n\nAnimatorStepsRange.prototype = {\n\n  diff: function() {\n    return this.end - this.start;\n  },\n\n  isLast: function(step) {\n    // round step into an integer, to be able to compare number as expected (also converts bad input to 0)\n    return (step | 0) === this.end;\n  }\n};\n\nmodule.exports = AnimatorStepsRange;\n",
    "var torque = require('./');\nvar AnimatorStepsRange = require('./animator-steps-range');\n\nvar requestAnimationFrame = global.requestAnimationFrame\n    || global.mozRequestAnimationFrame\n    || global.webkitRequestAnimationFrame\n    || global.msRequestAnimationFrame\n    || function(callback) { return global.setTimeout(callback, 1000 / 60); };\n\nvar cancelAnimationFrame = global.cancelAnimationFrame\n    || global.mozCancelAnimationFrame\n    || global.webkitCancelAnimationFrame\n    || global.msCancelAnimationFrame\n    || function(id) { clearTimeout(id); };\n\n  /**\n   * options:\n   *    animationDuration in seconds\n   *    animationDelay in seconds\n   */\n  function Animator(callback, options) {\n    if(!options.steps) {\n      throw new Error(\"steps option missing\")\n    }\n    this.options = options;\n    this.running = false;\n    this._tick = this._tick.bind(this);\n    this._t0 = +new Date();\n    this.callback = callback;\n    this._time = 0.0;\n    this.itemsReady = false;\n\n    this.options = torque.extend({\n        animationDelay: 0,\n        maxDelta: 0.2,\n        loop: options.loop === undefined ? true : options.loop\n    }, this.options);\n\n    this.steps(options.steps);\n  }\n\n  Animator.prototype = {\n\n    start: function() {\n        this.running = true;\n        requestAnimationFrame(this._tick);\n        this.options.onStart && this.options.onStart();\n        if (this.stepsRange().diff() === 1) {\n          this.running = false;\n        }\n    },\n\n    isRunning: function() {\n      return this.running;\n    },\n\n    stop: function() {\n      this.pause();\n      this.time(this.stepsRange().start);\n      this.options.onStop && this.options.onStop();\n    },\n\n    // real animation time\n    time: function(_) {\n      if (!arguments.length) return this._time;\n      this._time = _;\n      var t = this.range(this.domain(this._time));\n      this.callback(t);\n    },\n\n    toggle: function() {\n      if (this.running) {\n        this.pause()\n      } else {\n        this.start()\n      }\n    },\n\n    rescale: function() {\n      this.domainInv = torque.math.linear(this.options.animationDelay, this.options.animationDelay + this.options.animationDuration);\n      this.domain = this.domainInv.invert();\n      this.range = torque.math.linear(0, this._defaultStepsRange.end);\n      this.rangeInv = this.range.invert();\n      this.time(this._time);\n      this.running? this.start(): this.pause();\n      return this;\n    },\n\n    duration: function(_) {\n      if (!arguments.length)  return this.options.animationDuration;\n      this.options.animationDuration = _;\n      if (this.time() > _) {\n        this.time(0);\n      }\n      this.rescale();\n      return this;\n    },\n\n    steps: function(_) {\n      this.options.steps = _;\n      this._defaultStepsRange = new AnimatorStepsRange(0, _);\n      return this.rescale();\n    },\n\n    // Returns or sets a (custom) steps range\n    // Setting a steps range must be within the full range\n    stepsRange: function(start, end) {\n      if (arguments.length === 2) {\n        if (start < this._defaultStepsRange.start) throw new Error('start must be within default steps range');\n        if (end > this._defaultStepsRange.end) throw new Error('end must be within default steps range');\n\n        this._customStepsRange = new AnimatorStepsRange(start, end);\n        this.options.onStepsRange && this.options.onStepsRange();\n\n        // Change current step if it's outside the new custom range\n        var step = this.step() | 0; // round to an integer\n        if (step < start || step > end) {\n          this.step(start);\n        }\n      }\n      return this._customStepsRange || this._defaultStepsRange;\n    },\n\n    removeCustomStepsRange: function() {\n      this._customStepsRange = undefined;\n      this.options.onStepsRange && this.options.onStepsRange();\n    },\n\n    step: function(s) {\n      if(arguments.length === 0) return this.range(this.domain(this._time));\n      this._time = this.domainInv(this.rangeInv(s));\n    },\n\n    pause: function() {\n      this.running = false;\n      cancelAnimationFrame(this._tick);\n      this.options.onPause && this.options.onPause();\n    },\n\n    _tick: function() {\n      var t1 = +new Date();\n      var delta = (t1 - this._t0)*0.001;\n      // if delta is really big means the tab lost the focus\n      // at some point, so limit delta change\n      delta = Math.min(this.options.maxDelta, delta);\n      this._t0 = t1;\n      this._time += delta;\n\n      var stepsRange = this.stepsRange();\n      if (stepsRange.isLast(this.step())) {\n        if(!this.options.loop){\n          // set time to max time\n          this.time(this.options.animationDuration);\n          this.pause();\n        } else {\n          this.step(stepsRange.start);\n        }\n      }\n      if(this.running) {\n        this.time(this._time);\n        requestAnimationFrame(this._tick);\n      }\n    }\n\n  };\n\nmodule.exports = Animator;\n",
    "var _torque_reference_latest = {\n    \"version\": \"1.0.0\",\n    \"style\": {\n        \"comp-op\": {\n            \"css\": \"comp-op\",\n            \"default-value\": \"src-over\",\n            \"default-meaning\": \"add the current layer on top of other layers\",\n            \"doc\": \"Composite operation. This defines how this layer should behave relative to layers atop or below it.\",\n            \"type\": [\n                \"src\", //\n                \"src-over\", //\n                \"dst-over\", //\n                \"src-in\", //\n                \"dst-in\", //\n                \"src-out\", //\n                \"dst-out\", //\n                \"src-atop\", //\n                \"dst-atop\", //\n                \"xor\", //\n                \"darken\", //\n                \"lighten\" //\n            ]\n        }\n    },\n    \"layer\" : {\n        \"buffer-size\": {\n            \"default-value\": \"0\",\n            \"type\":\"float\",\n            \"default-meaning\": \"No buffer will be used\",\n            \"doc\": \"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering\"\n        },\n        \"-torque-clear-color\": {\n            \"css\": \"-torque-clear-color\",\n            \"type\": \"color\",\n            \"default-value\": \"rgba(255, 255, 255, 0)\",\n            \"default-meaning\": \"full clear\",\n            \"doc\": \"color used to clear canvas on each frame\"\n        },\n        \"-torque-frame-count\": {\n            \"css\": \"-torque-frame-count\",\n            \"default-value\": \"128\",\n            \"type\":\"number\",\n            \"default-meaning\": \"the data is broken into 128 time frames\",\n            \"doc\": \"Number of animation steps/frames used in the animation. If the data contains a fewere number of total frames, the lesser value will be used.\"\n        },\n        \"-torque-resolution\": {\n            \"css\": \"-torque-resolution\",\n            \"default-value\": \"2\",\n            \"type\":\"number\",\n            \"default-meaning\": \"\",\n            \"doc\": \"Spatial resolution in pixels. A resolution of 1 means no spatial aggregation of the data. Any other resolution of N results in spatial aggregation into cells of NxN pixels. The value N must be power of 2\"\n        },\n        \"-torque-animation-duration\": {\n            \"css\": \"-torque-animation-duration\",\n            \"default-value\": \"30\",\n            \"type\":\"number\",\n            \"default-meaning\": \"the animation lasts 30 seconds\",\n            \"doc\": \"Animation duration in seconds\"\n        },\n        \"-torque-aggregation-function\": {\n            \"css\": \"-torque-aggregation-function\",\n            \"default-value\": \"count(cartodb_id)\",\n            \"type\": \"string\",\n            \"default-meaning\": \"the value for each cell is the count of points in that cell\",\n            \"doc\": \"A function used to calculate a value from the aggregate data for each cell. See -torque-resolution\"\n        },\n        \"-torque-time-attribute\": {\n            \"css\": \"-torque-time-attribute\",\n            \"default-value\": \"time\",\n            \"type\": \"string\",\n            \"default-meaning\": \"the data column in your table that is of a time based type\",\n            \"doc\": \"The table column that contains the time information used create the animation\"\n        },\n        \"-torque-data-aggregation\": {\n            \"css\": \"-torque-data-aggregation\",\n            \"default-value\": \"linear\",\n            \"type\": [\n              \"cumulative\"\n            ],\n            \"default-meaning\": \"previous values are discarded\",\n            \"doc\": \"A linear animation will discard previous values while a cumulative animation will accumulate them until it restarts\"\n        }\n    },\n    \"symbolizers\" : {\n        \"*\": {\n            \"comp-op\": {\n                \"css\": \"comp-op\",\n                \"default-value\": \"src-over\",\n                \"default-meaning\": \"add the current layer on top of other layers\",\n                \"doc\": \"Composite operation. This defines how this layer should behave relative to layers atop or below it.\",\n                \"type\": [\n                  \"src\", //\n                  \"src-over\", //\n                  \"dst-over\", //\n                  \"src-in\", //\n                  \"dst-in\", //\n                  \"src-out\", //\n                  \"dst-out\", //\n                  \"src-atop\", //\n                  \"dst-atop\", //\n                  \"xor\", //\n                  \"darken\", //\n                  \"lighten\" //\n                ]\n            },\n            \"opacity\": {\n                \"css\": \"opacity\",\n                \"type\": \"float\",\n                \"doc\": \"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)\",\n                \"default-value\": 1,\n                \"default-meaning\": \"no separate buffer will be used and no alpha will be applied to the style after rendering\"\n            }\n        },\n        \"trail\": {\n          \"steps\": {\n            \"css\": \"trail-steps\",\n            \"type\": \"float\",\n            \"default-value\": 1,\n            \"default-meaning\": \"no trail steps\",\n            \"doc\": \"How many steps of trails are going to be rendered\"\n          }\n        },\n        \"polygon\": {\n            \"fill\": {\n                \"css\": \"polygon-fill\",\n                \"type\": \"color\",\n                \"default-value\": \"rgba(128,128,128,1)\",\n                \"default-meaning\": \"gray and fully opaque (alpha = 1), same as rgb(128,128,128)\",\n                \"doc\": \"Fill color to assign to a polygon\"\n            },\n            \"fill-opacity\": {\n                \"css\": \"polygon-opacity\",\n                \"type\": \"float\",\n                \"doc\": \"The opacity of the polygon\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\"\n            }\n        },\n        \"line\": {\n            \"stroke\": {\n                \"css\": \"line-color\",\n                \"default-value\": \"rgba(0,0,0,1)\",\n                \"type\": \"color\",\n                \"default-meaning\": \"black and fully opaque (alpha = 1), same as rgb(0,0,0)\",\n                \"doc\": \"The color of a drawn line\"\n            },\n            \"stroke-width\": {\n                \"css\": \"line-width\",\n                \"default-value\": 1,\n                \"type\": \"float\",\n                \"doc\": \"The width of a line in pixels\"\n            },\n            \"stroke-opacity\": {\n                \"css\": \"line-opacity\",\n                \"default-value\": 1,\n                \"type\": \"float\",\n                \"default-meaning\": \"opaque\",\n                \"doc\": \"The opacity of a line\"\n            },\n            \"stroke-linejoin\": {\n                \"css\": \"line-join\",\n                \"default-value\": \"miter\",\n                \"type\": [\n                    \"miter\",\n                    \"round\",\n                    \"bevel\"\n                ],\n                \"doc\": \"The behavior of lines when joining\"\n            },\n            \"stroke-linecap\": {\n                \"css\": \"line-cap\",\n                \"default-value\": \"butt\",\n                \"type\": [\n                    \"butt\",\n                    \"round\",\n                    \"square\"\n                ],\n                \"doc\": \"The display of line endings\"\n            }\n        },\n        \"markers\": {\n            \"file\": {\n                \"css\": \"marker-file\",\n                \"doc\": \"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.\",\n                \"default-value\": \"\",\n                \"default-meaning\": \"An ellipse or circle, if width equals height\",\n                \"type\": \"uri\"\n            },\n            \"opacity\": {\n                \"css\": \"marker-opacity\",\n                \"doc\": \"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke\",\n                \"default-value\": 1,\n                \"default-meaning\": \"The stroke-opacity and fill-opacity will be used\",\n                \"type\": \"float\"\n            },\n            \"fill-opacity\": {\n                \"css\": \"marker-fill-opacity\",\n                \"doc\": \"The fill opacity of the marker\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\",\n                \"type\": \"float\"\n            },\n            \"stroke\": {\n                \"css\": \"marker-line-color\",\n                \"doc\": \"The color of the stroke around a marker shape.\",\n                \"default-value\": \"black\",\n                \"type\": \"color\"\n            },\n            \"stroke-width\": {\n                \"css\": \"marker-line-width\",\n                \"doc\": \"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.\",\n                \"type\": \"float\"\n            },\n            \"stroke-opacity\": {\n                \"css\": \"marker-line-opacity\",\n                \"default-value\": 1,\n                \"default-meaning\": \"opaque\",\n                \"doc\": \"The opacity of a line\",\n                \"type\": \"float\"\n            },\n            \"fill\": {\n                \"css\": \"marker-fill\",\n                \"default-value\": \"blue\",\n                \"doc\": \"The color of the area of the marker.\",\n                \"type\": \"color\"\n            },\n            \"marker-type\": {\n                \"css\": \"marker-type\",\n                \"type\": [\n                    \"rectangle\",\n                    \"ellipse\"\n                ],\n                \"default-value\": \"ellipse\",\n                \"doc\": \"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an rectangle or an ellipse (a circle if height is equal to width)\"\n            },\n             \"width\": {\n                \"css\": \"marker-width\",\n                \"default-value\": 10,\n                \"doc\": \"The width of the marker, if using one of the default types.\",\n                \"type\": \"float\"\n            }\n        },\n        \"point\": {\n            \"file\": {\n                \"css\": \"point-file\",\n                \"type\": \"uri\",\n                \"required\": false,\n                \"default-value\": \"none\",\n                \"doc\": \"Image file to represent a point\"\n            },\n            \"opacity\": {\n                \"css\": \"point-opacity\",\n                \"type\": \"float\",\n                \"default-value\": 1.0,\n                \"default-meaning\": \"Fully opaque\",\n                \"doc\": \"A value from 0 to 1 to control the opacity of the point\"\n            }\n        }\n    },\n    \"colors\": {\n        \"aliceblue\":  [240, 248, 255],\n        \"antiquewhite\":  [250, 235, 215],\n        \"aqua\":  [0, 255, 255],\n        \"aquamarine\":  [127, 255, 212],\n        \"azure\":  [240, 255, 255],\n        \"beige\":  [245, 245, 220],\n        \"bisque\":  [255, 228, 196],\n        \"black\":  [0, 0, 0],\n        \"blanchedalmond\":  [255,235,205],\n        \"blue\":  [0, 0, 255],\n        \"blueviolet\":  [138, 43, 226],\n        \"brown\":  [165, 42, 42],\n        \"burlywood\":  [222, 184, 135],\n        \"cadetblue\":  [95, 158, 160],\n        \"chartreuse\":  [127, 255, 0],\n        \"chocolate\":  [210, 105, 30],\n        \"coral\":  [255, 127, 80],\n        \"cornflowerblue\":  [100, 149, 237],\n        \"cornsilk\":  [255, 248, 220],\n        \"crimson\":  [220, 20, 60],\n        \"cyan\":  [0, 255, 255],\n        \"darkblue\":  [0, 0, 139],\n        \"darkcyan\":  [0, 139, 139],\n        \"darkgoldenrod\":  [184, 134, 11],\n        \"darkgray\":  [169, 169, 169],\n        \"darkgreen\":  [0, 100, 0],\n        \"darkgrey\":  [169, 169, 169],\n        \"darkkhaki\":  [189, 183, 107],\n        \"darkmagenta\":  [139, 0, 139],\n        \"darkolivegreen\":  [85, 107, 47],\n        \"darkorange\":  [255, 140, 0],\n        \"darkorchid\":  [153, 50, 204],\n        \"darkred\":  [139, 0, 0],\n        \"darksalmon\":  [233, 150, 122],\n        \"darkseagreen\":  [143, 188, 143],\n        \"darkslateblue\":  [72, 61, 139],\n        \"darkslategrey\":  [47, 79, 79],\n        \"darkturquoise\":  [0, 206, 209],\n        \"darkviolet\":  [148, 0, 211],\n        \"deeppink\":  [255, 20, 147],\n        \"deepskyblue\":  [0, 191, 255],\n        \"dimgray\":  [105, 105, 105],\n        \"dimgrey\":  [105, 105, 105],\n        \"dodgerblue\":  [30, 144, 255],\n        \"firebrick\":  [178, 34, 34],\n        \"floralwhite\":  [255, 250, 240],\n        \"forestgreen\":  [34, 139, 34],\n        \"fuchsia\":  [255, 0, 255],\n        \"gainsboro\":  [220, 220, 220],\n        \"ghostwhite\":  [248, 248, 255],\n        \"gold\":  [255, 215, 0],\n        \"goldenrod\":  [218, 165, 32],\n        \"gray\":  [128, 128, 128],\n        \"grey\":  [128, 128, 128],\n        \"green\":  [0, 128, 0],\n        \"greenyellow\":  [173, 255, 47],\n        \"honeydew\":  [240, 255, 240],\n        \"hotpink\":  [255, 105, 180],\n        \"indianred\":  [205, 92, 92],\n        \"indigo\":  [75, 0, 130],\n        \"ivory\":  [255, 255, 240],\n        \"khaki\":  [240, 230, 140],\n        \"lavender\":  [230, 230, 250],\n        \"lavenderblush\":  [255, 240, 245],\n        \"lawngreen\":  [124, 252, 0],\n        \"lemonchiffon\":  [255, 250, 205],\n        \"lightblue\":  [173, 216, 230],\n        \"lightcoral\":  [240, 128, 128],\n        \"lightcyan\":  [224, 255, 255],\n        \"lightgoldenrodyellow\":  [250, 250, 210],\n        \"lightgray\":  [211, 211, 211],\n        \"lightgreen\":  [144, 238, 144],\n        \"lightgrey\":  [211, 211, 211],\n        \"lightpink\":  [255, 182, 193],\n        \"lightsalmon\":  [255, 160, 122],\n        \"lightseagreen\":  [32, 178, 170],\n        \"lightskyblue\":  [135, 206, 250],\n        \"lightslategray\":  [119, 136, 153],\n        \"lightslategrey\":  [119, 136, 153],\n        \"lightsteelblue\":  [176, 196, 222],\n        \"lightyellow\":  [255, 255, 224],\n        \"lime\":  [0, 255, 0],\n        \"limegreen\":  [50, 205, 50],\n        \"linen\":  [250, 240, 230],\n        \"magenta\":  [255, 0, 255],\n        \"maroon\":  [128, 0, 0],\n        \"mediumaquamarine\":  [102, 205, 170],\n        \"mediumblue\":  [0, 0, 205],\n        \"mediumorchid\":  [186, 85, 211],\n        \"mediumpurple\":  [147, 112, 219],\n        \"mediumseagreen\":  [60, 179, 113],\n        \"mediumslateblue\":  [123, 104, 238],\n        \"mediumspringgreen\":  [0, 250, 154],\n        \"mediumturquoise\":  [72, 209, 204],\n        \"mediumvioletred\":  [199, 21, 133],\n        \"midnightblue\":  [25, 25, 112],\n        \"mintcream\":  [245, 255, 250],\n        \"mistyrose\":  [255, 228, 225],\n        \"moccasin\":  [255, 228, 181],\n        \"navajowhite\":  [255, 222, 173],\n        \"navy\":  [0, 0, 128],\n        \"oldlace\":  [253, 245, 230],\n        \"olive\":  [128, 128, 0],\n        \"olivedrab\":  [107, 142, 35],\n        \"orange\":  [255, 165, 0],\n        \"orangered\":  [255, 69, 0],\n        \"orchid\":  [218, 112, 214],\n        \"palegoldenrod\":  [238, 232, 170],\n        \"palegreen\":  [152, 251, 152],\n        \"paleturquoise\":  [175, 238, 238],\n        \"palevioletred\":  [219, 112, 147],\n        \"papayawhip\":  [255, 239, 213],\n        \"peachpuff\":  [255, 218, 185],\n        \"peru\":  [205, 133, 63],\n        \"pink\":  [255, 192, 203],\n        \"plum\":  [221, 160, 221],\n        \"powderblue\":  [176, 224, 230],\n        \"purple\":  [128, 0, 128],\n        \"red\":  [255, 0, 0],\n        \"rosybrown\":  [188, 143, 143],\n        \"royalblue\":  [65, 105, 225],\n        \"saddlebrown\":  [139, 69, 19],\n        \"salmon\":  [250, 128, 114],\n        \"sandybrown\":  [244, 164, 96],\n        \"seagreen\":  [46, 139, 87],\n        \"seashell\":  [255, 245, 238],\n        \"sienna\":  [160, 82, 45],\n        \"silver\":  [192, 192, 192],\n        \"skyblue\":  [135, 206, 235],\n        \"slateblue\":  [106, 90, 205],\n        \"slategray\":  [112, 128, 144],\n        \"slategrey\":  [112, 128, 144],\n        \"snow\":  [255, 250, 250],\n        \"springgreen\":  [0, 255, 127],\n        \"steelblue\":  [70, 130, 180],\n        \"tan\":  [210, 180, 140],\n        \"teal\":  [0, 128, 128],\n        \"thistle\":  [216, 191, 216],\n        \"tomato\":  [255, 99, 71],\n        \"turquoise\":  [64, 224, 208],\n        \"violet\":  [238, 130, 238],\n        \"wheat\":  [245, 222, 179],\n        \"white\":  [255, 255, 255],\n        \"whitesmoke\":  [245, 245, 245],\n        \"yellow\":  [255, 255, 0],\n        \"yellowgreen\":  [154, 205, 50],\n        \"transparent\":  [0, 0, 0, 0]\n    }\n};\n\nmodule.exports = {\n  version: {\n    latest: _torque_reference_latest,\n    '1.0.0': _torque_reference_latest\n  }\n};\n",
    "//\n// common functionallity for torque layers\n//\nvar carto = global.carto || require('carto');\n\nfunction TorqueLayer() {}\n\nTorqueLayer.prototype = {\n};\n\nTorqueLayer.optionsFromLayer = function(mapConfig) {\n  var opts = {};\n  if (!mapConfig) return opts;\n  var attrs = {\n    'buffer-size': 'buffer-size',\n    '-torque-frame-count': 'steps',\n    '-torque-resolution': 'resolution',\n    '-torque-animation-duration': 'animationDuration',\n    '-torque-aggregation-function': 'countby',\n    '-torque-time-attribute': 'column',\n    '-torque-data-aggregation': 'data_aggregation'\n  };\n  for (var i in attrs) {\n    var v = mapConfig.eval(i);\n    if (v !== undefined) {\n      var a = attrs[i];\n      opts[a] = v;\n    }\n  }\n  return opts;\n};\n\nTorqueLayer.optionsFromCartoCSS = function(cartocss) {\n  var shader = new carto.RendererJS().render(cartocss);\n  var mapConfig = shader.findLayer({ name: 'Map' });\n  return TorqueLayer.optionsFromLayer(mapConfig);\n};\n\nmodule.exports.TorqueLayer = TorqueLayer;\n",
    "  var Event = {};\n  Event.on = function(evt, callback) {\n      var cb = this._evt_callbacks = this._evt_callbacks || {};\n      var l = cb[evt] || (cb[evt] = []);\n      l.push(callback);\n      return this;\n  };\n\n  Event.trigger = function(evt) {\n      var c = this._evt_callbacks && this._evt_callbacks[evt];\n      for(var i = 0; c && i < c.length; ++i) {\n          c[i].apply(this, Array.prototype.slice.call(arguments, 1));\n      }\n      return this;\n  };\n\n  Event.fire = Event.trigger;\n\n  Event.off = function (evt, callback) {\n      var c = this._evt_callbacks && this._evt_callbacks[evt];\n      if (c && !callback) {\n        delete this._evt_callbacks[evt];\n        return this;\n     }\n     var remove = [];\n     for(var i = 0; c && i < c.length; ++i) {\n       if(c[i] === callback) remove.push(i);\n     }\n     while((i = remove.pop()) !== undefined) c.splice(i, 1);\n    return this;\n  };\n\n  Event.callbacks = function(evt) {\n    return (this._evt_callbacks && this._evt_callbacks[evt]) || [];\n  };\n\n  function extend() {\n      var objs = arguments;\n      var a = objs[0];\n      for (var i = 1; i < objs.length; ++i) {\n          var b = objs[i];\n          for (var k in b) {\n              a[k] = b[k];\n          }\n      }\n      return a;\n  }\n\n  function clone(a) {\n    return extend({}, a);\n  }\n\n  function isFunction(f) {\n    return typeof f == 'function' || false;\n  }\n\n  function isArray(value) {\n      return value && typeof value == 'object' && Object.prototype.toString.call(value) == '[object Array]';\n  }\n\n  // types\n  var types = {\n    Uint8Array: typeof(global['Uint8Array']) !== 'undefined' ? global.Uint8Array : Array,\n    Uint8ClampedArray: typeof(global['Uint8ClampedArray']) !== 'undefined' ? global.Uint8ClampedArray: Array,\n    Uint32Array: typeof(global['Uint32Array']) !== 'undefined' ? global.Uint32Array : Array,\n    Int16Array: typeof(global['Int16Array']) !== 'undefined' ? global.Int16Array : Array,\n    Int32Array: typeof(global['Int32Array']) !== 'undefined' ? global.Int32Array: Array\n  };\n\n  function isBrowserSupported() {\n    return !!document.createElement('canvas');\n  }\n\n  function userAgent() {\n      return typeof navigator !== 'undefined' ? navigator.userAgent : '';\n  }\n\n  var flags = {\n    sprites_to_images: userAgent().indexOf('Safari') === -1 && userAgent().indexOf('Firefox') === -1\n  };\n\nmodule.exports = {\n    Event: Event,\n    extend: extend,\n    clone: clone,\n    isFunction: isFunction,\n    isArray: isArray,\n    types: types,\n    isBrowserSupported: isBrowserSupported,\n    flags: flags\n};\n",
    "/**\n * @license\n * Copyright 2013 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Extends OverlayView to provide a canvas \"Layer\".\n * @author Brendan Kenny\n */\n\n/**\n * A map layer that provides a canvas over the slippy map and a callback\n * system for efficient animation. Requires canvas and CSS 2D transform\n * support.\n * @constructor\n * @extends google.maps.OverlayView\n * @param {CanvasLayerOptions=} opt_options Options to set in this CanvasLayer.\n */\n\nfunction CanvasLayer(opt_options) {\n  /**\n   * If true, canvas is in a map pane and the OverlayView is fully functional.\n   * See google.maps.OverlayView.onAdd for more information.\n   * @type {boolean}\n   * @private\n   */\n  this.isAdded_ = false;\n\n  /**\n   * If true, each update will immediately schedule the next.\n   * @type {boolean}\n   * @private\n   */\n  this.isAnimated_ = false;\n\n  /**\n   * The name of the MapPane in which this layer will be displayed.\n   * @type {string}\n   * @private\n   */\n  this.paneName_ = CanvasLayer.DEFAULT_PANE_NAME_;\n\n  /**\n   * A user-supplied function called whenever an update is required. Null or\n   * undefined if a callback is not provided.\n   * @type {?function=}\n   * @private\n   */\n  this.updateHandler_ = null;\n\n  /**\n   * A user-supplied function called whenever an update is required and the\n   * map has been resized since the last update. Null or undefined if a\n   * callback is not provided.\n   * @type {?function}\n   * @private\n   */\n  this.resizeHandler_ = null;\n\n  /**\n   * The LatLng coordinate of the top left of the current view of the map. Will\n   * be null when this.isAdded_ is false.\n   * @type {google.maps.LatLng}\n   * @private\n   */\n  this.topLeft_ = null;\n\n  /**\n   * The map-pan event listener. Will be null when this.isAdded_ is false. Will\n   * be null when this.isAdded_ is false.\n   * @type {?function}\n   * @private\n   */\n  this.centerListener_ = null;\n\n  /**\n   * The map-resize event listener. Will be null when this.isAdded_ is false.\n   * @type {?function}\n   * @private\n   */\n  this.resizeListener_ = null;\n\n  /**\n   * If true, the map size has changed and this.resizeHandler_ must be called\n   * on the next update.\n   * @type {boolean}\n   * @private\n   */\n  this.needsResize_ = true;\n\n  /**\n   * A browser-defined id for the currently requested callback. Null when no\n   * callback is queued.\n   * @type {?number}\n   * @private\n   */\n  this.requestAnimationFrameId_ = null;\n\n  var canvas = document.createElement('canvas');\n  canvas.style.position = 'absolute';\n  canvas.style.top = 0;\n  canvas.style.left = 0;\n  canvas.style.pointerEvents = 'none';\n\n  /**\n   * The canvas element.\n   * @type {!HTMLCanvasElement}\n   */\n  this.canvas = canvas;\n\n  /**\n   * Simple bind for functions with no args for bind-less browsers (Safari).\n   * @param {Object} thisArg The this value used for the target function.\n   * @param {function} func The function to be bound.\n   */\n  function simpleBindShim(thisArg, func) {\n    return function() { func.apply(thisArg); };\n  }\n\n  /**\n   * A reference to this.repositionCanvas_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.repositionFunction_ = simpleBindShim(this, this.repositionCanvas_);\n\n  /**\n   * A reference to this.resize_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.resizeFunction_ = simpleBindShim(this, this.resize_);\n\n  /**\n   * A reference to this.update_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.requestUpdateFunction_ = simpleBindShim(this, this.update_);\n\n  // set provided options, if any\n  if (opt_options) {\n    this.setOptions(opt_options);\n  }\n}\n\nCanvasLayer.prototype = new google.maps.OverlayView();\n\n/**\n * The default MapPane to contain the canvas.\n * @type {string}\n * @const\n * @private\n */\nCanvasLayer.DEFAULT_PANE_NAME_ = 'overlayLayer';\n\n/**\n * Transform CSS property name, with vendor prefix if required. If browser\n * does not support transforms, property will be ignored.\n * @type {string}\n * @const\n * @private\n */\nCanvasLayer.CSS_TRANSFORM_ = (function() {\n  var div = document.createElement('div');\n  var transformProps = [\n    'transform',\n    'WebkitTransform',\n    'MozTransform',\n    'OTransform',\n    'msTransform'\n  ];\n  for (var i = 0; i < transformProps.length; i++) {\n    var prop = transformProps[i];\n    if (div.style[prop] !== undefined) {\n      return prop;\n    }\n  }\n\n  // return unprefixed version by default\n  return transformProps[0];\n})();\n\n/**\n * The requestAnimationFrame function, with vendor-prefixed or setTimeout-based\n * fallbacks. MUST be called with window as thisArg.\n * @type {function}\n * @param {function} callback The function to add to the frame request queue.\n * @return {number} The browser-defined id for the requested callback.\n * @private\n */\nCanvasLayer.prototype.requestAnimFrame_ =\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) {\n      return window.setTimeout(callback, 1000 / 60);\n    };\n\n/**\n * The cancelAnimationFrame function, with vendor-prefixed fallback. Does not\n * fall back to clearTimeout as some platforms implement requestAnimationFrame\n * but not cancelAnimationFrame, and the cost is an extra frame on onRemove.\n * MUST be called with window as thisArg.\n * @type {function}\n * @param {number=} requestId The id of the frame request to cancel.\n * @private\n */\nCanvasLayer.prototype.cancelAnimFrame_ =\n    window.cancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.oCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    function(requestId) {};\n\n/**\n * Sets any options provided. See CanvasLayerOptions for more information.\n * @param {CanvasLayerOptions} options The options to set.\n */\nCanvasLayer.prototype.setOptions = function(options) {\n  if (options.animate !== undefined) {\n    this.setAnimate(options.animate);\n  }\n\n  if (options.paneName !== undefined) {\n    this.setPane(options.paneName);\n  }\n\n  if (options.updateHandler !== undefined) {\n    this.setUpdateHandler(options.updateHandler);\n  }\n\n  if (options.resizeHandler !== undefined) {\n    this.setResizeHandler(options.resizeHandler);\n  }\n\n  if(options.readyHandler) {\n    this.readyHandler = options.readyHandler;\n  }\n\n};\n\n/**\n * Set the animated state of the layer. If true, updateHandler will be called\n * repeatedly, once per frame. If false, updateHandler will only be called when\n * a map property changes that could require the canvas content to be redrawn.\n * @param {boolean} animate Whether the canvas is animated.\n */\nCanvasLayer.prototype.setAnimate = function(animate) {\n  this.isAnimated_ = !!animate;\n\n  if (this.isAnimated_) {\n    this.scheduleUpdate();\n  }\n};\n\n/**\n * @return {boolean} Whether the canvas is animated.\n */\nCanvasLayer.prototype.isAnimated = function() {\n  return this.isAnimated_;\n};\n\n/**\n * Set the MapPane in which this layer will be displayed, by name. See\n * {@code google.maps.MapPanes} for the panes available.\n * @param {string} paneName The name of the desired MapPane.\n */\nCanvasLayer.prototype.setPaneName = function(paneName) {\n  this.paneName_ = paneName;\n\n  this.setPane_();\n};\n\n/**\n * Set the opacity for the canvas.\n * \n * @param {number} opacity The opacity of the canvas\n */\nCanvasLayer.prototype.setOpacity = function (opacity) {\n  this.canvas.style.opacity = opacity;\n};\n\n/**\n * Get the canvases opacity.\n * \n * @return {number} The opacity of the canvas\n */\nCanvasLayer.prototype.getOpacity = function () {\n  return this.canvas.style.opacity;\n};\n\n/**\n * @return {string} The name of the current container pane.\n */\nCanvasLayer.prototype.getPaneName = function() {\n  return this.paneName_;\n};\n\n/**\n * Adds the canvas to the specified container pane. Since this is guaranteed to\n * execute only after onAdd is called, this is when paneName's existence is\n * checked (and an error is thrown if it doesn't exist).\n * @private\n */\nCanvasLayer.prototype.setPane_ = function() {\n  if (!this.isAdded_) {\n    return;\n  }\n\n  // onAdd has been called, so panes can be used\n  var panes = this.getPanes();\n  if (!panes[this.paneName_]) {\n    throw new Error('\"' + this.paneName_ + '\" is not a valid MapPane name.');\n  }\n\n  panes[this.paneName_].appendChild(this.canvas);\n};\n\n/**\n * Set a function that will be called whenever the parent map and the overlay's\n * canvas have been resized. If opt_resizeHandler is null or unspecified, any\n * existing callback is removed.\n * @param {?function=} opt_resizeHandler The resize callback function.\n */\nCanvasLayer.prototype.setResizeHandler = function(opt_resizeHandler) {\n  this.resizeHandler_ = opt_resizeHandler;\n};\n\n/**\n * Set a function that will be called when a repaint of the canvas is required.\n * If opt_updateHandler is null or unspecified, any existing callback is\n * removed.\n * @param {?function=} opt_updateHandler The update callback function.\n */\nCanvasLayer.prototype.setUpdateHandler = function(opt_updateHandler) {\n  this.updateHandler_ = opt_updateHandler;\n};\n\n/**\n * @inheritDoc\n */\nCanvasLayer.prototype.onAdd = function() {\n  if (this.isAdded_) {\n    return;\n  }\n\n  this.isAdded_ = true;\n  this.setPane_();\n\n  this.resizeListener_ = google.maps.event.addListener(this.getMap(),\n      'resize', this.resizeFunction_);\n  this.centerListener_ = google.maps.event.addListener(this.getMap(),\n      'center_changed', this.repositionFunction_);\n\n  this.resize_();\n  this.repositionCanvas_();\n  this.readyHandler && this.readyHandler();\n};\n\n/**\n * @inheritDoc\n */\nCanvasLayer.prototype.onRemove = function() {\n  if (!this.isAdded_) {\n    return;\n  }\n\n  this.isAdded_ = false;\n  this.topLeft_ = null;\n\n  // remove canvas and listeners for pan and resize from map\n  this.canvas.parentElement.removeChild(this.canvas);\n  if (this.centerListener_) {\n    google.maps.event.removeListener(this.centerListener_);\n    this.centerListener_ = null;\n  }\n  if (this.resizeListener_) {\n    google.maps.event.removeListener(this.resizeListener_);\n    this.resizeListener_ = null;\n  }\n\n  // cease canvas update callbacks\n  if (this.requestAnimationFrameId_) {\n    this.cancelAnimFrame_.call(window, this.requestAnimationFrameId_);\n    this.requestAnimationFrameId_ = null;\n  }\n};\n\n/**\n * The internal callback for resize events that resizes the canvas to keep the\n * map properly covered.\n * @private\n */\nCanvasLayer.prototype.resize_ = function() {\n  // TODO(bckenny): it's common to use a smaller canvas but use CSS to scale\n  // what is drawn by the browser to save on fill rate. Add an option to do\n  // this.\n\n  if (!this.isAdded_) {\n    return;\n  }\n\n  var map = this.getMap();\n  var width = map.getDiv().offsetWidth;\n  var height = map.getDiv().offsetHeight;\n  var oldWidth = this.canvas.width;\n  var oldHeight = this.canvas.height;\n\n  // resizing may allocate a new back buffer, so do so conservatively\n  if (oldWidth !== width || oldHeight !== height) {\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.canvas.style.width = width + 'px';\n    this.canvas.style.height = height + 'px';\n\n    this.needsResize_ = true;\n    this.scheduleUpdate();\n  }\n};\n\n/**\n * @inheritDoc\n */\nCanvasLayer.prototype.draw = function() {\n  this.repositionCanvas_();\n};\n\n/**\n * Internal callback for map view changes. Since the Maps API moves the overlay\n * along with the map, this function calculates the opposite translation to\n * keep the canvas in place.\n * @private\n */\nCanvasLayer.prototype.repositionCanvas_ = function() {\n  // TODO(bckenny): *should* only be executed on RAF, but in current browsers\n  //     this causes noticeable hitches in map and overlay relative\n  //     positioning.\n\n  var bounds = this.getMap().getBounds();\n  this.topLeft_ = new google.maps.LatLng(bounds.getNorthEast().lat(),\n      bounds.getSouthWest().lng());\n\n  // canvas position relative to draggable map's conatainer depends on\n  // overlayView's projection, not the map's\n  var projection = this.getProjection();\n  var divTopLeft = projection.fromLatLngToDivPixel(this.topLeft_);\n\n  // when the zoom level is low, more than one map can be shown in the screen\n  // so the canvas should be attach to the map with more are in the screen\n  var mapSize = (1 << this.getMap().getZoom())*256;\n  if (Math.abs(divTopLeft.x) > mapSize) {\n    divTopLeft.x -= mapSize;\n  }\n  this.canvas.style[CanvasLayer.CSS_TRANSFORM_] = 'translate(' +\n      Math.round(divTopLeft.x) + 'px,' + Math.round(divTopLeft.y) + 'px)';\n\n  this.scheduleUpdate();\n};\n\n/**\n * Internal callback that serves as main animation scheduler via\n * requestAnimationFrame. Calls resize and update callbacks if set, and\n * schedules the next frame if overlay is animated.\n * @private\n */\nCanvasLayer.prototype.update_ = function() {\n  this.requestAnimationFrameId_ = null;\n\n  if (!this.isAdded_) {\n    return;\n  }\n\n  if (this.isAnimated_) {\n    this.scheduleUpdate();\n  }\n\n  if (this.needsResize_ && this.resizeHandler_) {\n    this.needsResize_ = false;\n    this.resizeHandler_();\n  }\n\n  if (this.updateHandler_) {\n    this.updateHandler_();\n  }\n};\n\n/**\n * A convenience method to get the current LatLng coordinate of the top left of\n * the current view of the map.\n * @return {google.maps.LatLng} The top left coordinate.\n */\nCanvasLayer.prototype.getTopLeft = function() {\n  return this.topLeft_;\n};\n\n/**\n * Schedule a requestAnimationFrame callback to updateHandler. If one is\n * already scheduled, there is no effect.\n */\nCanvasLayer.prototype.scheduleUpdate = function() {\n  if (this.isAdded_ && !this.requestAnimationFrameId_) {\n    this.requestAnimationFrameId_ =\n        this.requestAnimFrame_.call(window, this.requestUpdateFunction_);\n  }\n};\n\nmodule.exports = CanvasLayer;\n",
    "/*\n ====================\n canvas setup for drawing tiles\n ====================\n */\n\nfunction CanvasTileLayer(canvas_setup, render) {\n  this.tileSize = new google.maps.Size(256, 256);\n  this.maxZoom = 19;\n  this.name = \"Tile #s\";\n  this.alt = \"Canvas tile layer\";\n  this.tiles = {};\n  this.canvas_setup = canvas_setup;\n  this.render = render;\n  if (!render) {\n      this.render = canvas_setup;\n  }\n}\n\n\n// create a tile with a canvas element\nCanvasTileLayer.prototype.create_tile_canvas = function (coord, zoom, ownerDocument) {\n\n  // create canvas and reset style\n  var canvas = ownerDocument.createElement('canvas');\n  var hit_canvas = ownerDocument.createElement('canvas');\n  canvas.style.border = hit_canvas.style.border = \"none\";\n  canvas.style.margin = hit_canvas.style.margin = \"0\";\n  canvas.style.padding = hit_canvas.style.padding = \"0\";\n\n  // prepare canvas and context sizes\n  var ctx = canvas.getContext('2d');\n  ctx.width = canvas.width = this.tileSize.width;\n  ctx.height = canvas.height = this.tileSize.height;\n\n  var hit_ctx = hit_canvas.getContext('2d');\n  hit_canvas.width = hit_ctx.width = this.tileSize.width;\n  hit_canvas.height = hit_ctx.height = this.tileSize.height;\n\n  //set unique id\n  var tile_id = coord.x + '_' + coord.y + '_' + zoom;\n\n  canvas.setAttribute('id', tile_id);\n  hit_canvas.setAttribute('id', tile_id);\n\n  if (tile_id in this.tiles)\n      delete this.tiles[tile_id];\n\n  this.tiles[tile_id] = {canvas:canvas, ctx:ctx, hit_canvas:hit_canvas, hit_ctx:hit_ctx, coord:coord, zoom:zoom, primitives:null};\n\n  // custom setup\n  //if (tile_id == '19295_24654_16'){\n  if (this.canvas_setup)\n      this.canvas_setup(this.tiles[tile_id], coord, zoom);\n  //}\n  return canvas;\n\n}\n\n\nCanvasTileLayer.prototype.each = function (callback) {\n  for (var t in this.tiles) {\n      var tile = this.tiles[t];\n      callback(tile);\n  }\n}\n\nCanvasTileLayer.prototype.recreate = function () {\n  for (var t in this.tiles) {\n      var tile = this.tiles[t];\n      this.canvas_setup(tile, tile.coord, tile.zoom);\n  }\n};\n\nCanvasTileLayer.prototype.redraw_tile = function (tile) {\n  this.render(tile, tile.coord, tile.zoom);\n};\n\nCanvasTileLayer.prototype.redraw = function () {\n  for (var t in this.tiles) {\n      var tile = this.tiles[t];\n      this.render(tile, tile.coord, tile.zoom);\n  }\n};\n\n// could be called directly...\nCanvasTileLayer.prototype.getTile = function (coord, zoom, ownerDocument) {\n  return this.create_tile_canvas(coord, zoom, ownerDocument);\n};\n\nCanvasTileLayer.prototype.releaseTile = function (tile) {\n  var id = tile.getAttribute('id');\n  delete this.tiles[id];\n};\n\nmodule.exports = CanvasTileLayer;\n",
    "function GMapsTileLoader() {\n}\n\n\nGMapsTileLoader.prototype = {\n\n  _initTileLoader: function(map, projection) {\n    this._map = map;\n    this._projection = projection;\n    this._tiles = {};\n    this._tilesLoading = {};\n    this._tilesToLoad = 0;\n    this._updateTiles = this._updateTiles.bind(this);\n    this._listeners = [];\n    this._listeners.push(\n      google.maps.event.addListener(this._map, 'dragend', this._updateTiles),\n      google.maps.event.addListener(this._map, 'zoom_changed', this._updateTiles)\n    );\n    this.tileSize = 256;\n    this._updateTiles();\n  },\n\n  _removeTileLoader: function() {\n    this._listeners.forEach(function (listener) {\n      google.maps.event.removeListener(listener);\n    });\n    \n    this._removeTiles();\n  },\n\n  _removeTiles: function () {\n    for (var key in this._tiles) {\n      this._removeTile(key);\n    }\n  },\n\n  _reloadTiles: function() {\n    this._removeTiles();\n    this._updateTiles();\n  },\n\n  _updateTiles: function () {\n\n      if (!this._map) { return; }\n\n      var bounds = this._map.getBounds();\n      var zoom = this._map.getZoom();\n      var tileSize = this.tileSize;\n      var mzoom = (1 << zoom);\n\n      var topLeft = new google.maps.LatLng(\n        bounds.getNorthEast().lat(),\n        bounds.getSouthWest().lng()\n      );\n\n      var bottomRigth = new google.maps.LatLng(\n        bounds.getSouthWest().lat(),\n        bounds.getNorthEast().lng()\n      );\n\n\n      this._projection = this._map.getProjection();\n      var divTopLeft = this._projection.fromLatLngToPoint(topLeft);\n      var divBottomRight = this._projection.fromLatLngToPoint(bottomRigth);\n\n\n      var nwTilePoint = new google.maps.Point(\n              Math.floor(divTopLeft.x*mzoom / tileSize),\n              Math.floor(divTopLeft.y*mzoom / tileSize)),\n          seTilePoint = new google.maps.Point(\n              Math.floor(divBottomRight.x*mzoom / tileSize),\n              Math.floor(divBottomRight.y*mzoom / tileSize));\n\n\n      this._addTilesFromCenterOut(nwTilePoint, seTilePoint);\n      this._removeOtherTiles(nwTilePoint, seTilePoint);\n  },\n\n  _removeOtherTiles: function (nwTilePoint, seTilePoint) {\n      var kArr, x, y, key;\n\n      var zoom = this._map.getZoom();\n      for (key in this._tiles) {\n          if (this._tiles.hasOwnProperty(key)) {\n              kArr = key.split(':');\n              x = parseInt(kArr[0], 10);\n              y = parseInt(kArr[1], 10);\n              z = parseInt(kArr[2], 10);\n\n              // remove tile if it's out of bounds\n              if (z !== zoom || x < nwTilePoint.x || x > seTilePoint.x || y < nwTilePoint.y || y > seTilePoint.y) {\n                  this._removeTile(key);\n              }\n          }\n      }\n  },\n\n  _removeTile: function (key) {\n      this.onTileRemoved && this.onTileRemoved(this._tiles[key]); \n      delete this._tiles[key];\n      delete this._tilesLoading[key];\n  },\n\n  _tileKey: function(tilePoint) {\n    return tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom;\n  },\n\n  _tileShouldBeLoaded: function (tilePoint) {\n      var k = this._tileKey(tilePoint);\n      return !(k in this._tiles) && !(k in this._tilesLoading);\n  },\n\n  _tileLoaded: function(tilePoint, tileData) {\n    this._tilesToLoad--;\n    var k = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    this._tiles[k] = tileData;\n    delete this._tilesLoading[k];\n    if(this._tilesToLoad === 0) {\n      this.onTilesLoaded && this.onTilesLoaded();\n    }\n  },\n\n  getTilePos: function (tilePoint) {\n    var limit = (1 << this._map.getZoom());\n    // wrap tile\n    tilePoint = {\n      x: ((tilePoint.x % limit) + limit) % limit,\n      y: tilePoint.y\n    };\n\n    tilePoint = new google.maps.Point(\n      tilePoint.x * this.tileSize, \n      tilePoint.y * this.tileSize\n    );\n\n    var bounds = this._map.getBounds();\n    var topLeft = new google.maps.LatLng(\n      bounds.getNorthEast().lat(),\n      bounds.getSouthWest().lng()\n    );\n\n    var divTopLeft = this._map.getProjection().fromLatLngToPoint(topLeft);\n    zoom = (1 << this._map.getZoom());\n    divTopLeft.x = divTopLeft.x * zoom;\n    divTopLeft.y = divTopLeft.y * zoom;\n\n    return new google.maps.Point(\n      tilePoint.x - divTopLeft.x,\n      tilePoint.y - divTopLeft.y\n    );\n  },\n\n  _addTilesFromCenterOut: function (nwTilePoint, seTilePoint) {\n      var queue = [],\n          center = new google.maps.Point(\n            (nwTilePoint.x + seTilePoint.x) * 0.5,\n            (nwTilePoint.y + seTilePoint.y) * 0.5\n          ),\n          zoom = this._map.getZoom();\n\n      var j, i, point;\n\n      for (j = nwTilePoint.y; j <= seTilePoint.y; j++) {\n          for (i = nwTilePoint.x; i <= seTilePoint.x; i++) {\n              point = new google.maps.Point (i, j);\n              point.zoom = zoom;\n\n              if (this._tileShouldBeLoaded(point)) {\n                  queue.push(point);\n              }\n          }\n      }\n\n      var tilesToLoad = queue.length;\n\n      if (tilesToLoad === 0) { return; }\n\n      function distanceToCenterSq(point) {\n        var dx = point.x - center.x;\n        var dy = point.y - center.y;\n        return dx * dx + dy * dy;\n      }\n\n      // load tiles in order of their distance to center\n      queue.sort(function (a, b) {\n          return distanceToCenterSq(a) - distanceToCenterSq(b);\n      });\n\n      this._tilesToLoad += tilesToLoad;\n\n        for (i = 0; i < tilesToLoad; i++) {\n          var t = queue[i];\n          var k = this._tileKey(t);\n          this._tilesLoading[k] = t;\n          // events\n          if (this.onTileAdded) {\n            this.onTileAdded(t);\n          }\n        }\n\n      this.onTilesLoading && this.onTilesLoading();\n  }\n\n}\n\nmodule.exports = GMapsTileLoader;\n",
    "var gmaps = {};\nif (typeof google !== 'undefined' && typeof google.maps !== 'undefined') {\n    gmaps = require('./torque');\n    gmaps.GMapsTileLoader = require('./gmaps_tileloader_mixin');\n}\nmodule.exports = gmaps;\n",
    "var carto = global.carto || require('carto');\nvar torque = require('../');\nvar CanvasLayer = require('./CanvasLayer');\nvar CanvasTileLayer = require('./canvas_tile_layer');\nvar GMapsTileLoader = require('./gmaps_tileloader_mixin');\n\nfunction GMapsTorqueLayer(options) {\n  var self = this;\n  if (!torque.isBrowserSupported()) {\n    throw new Error(\"browser is not supported by torque\");\n  }\n  this.keys = [0];\n  Object.defineProperty(this, 'key', {\n    get: function() {\n      return this.getKey();\n    }\n  });\n  this.shader = null;\n  this.ready = false;\n  this.options = torque.extend({}, options);\n  this.options = torque.extend({\n    provider: 'windshaft',\n    renderer: 'point',\n    resolution: 2,\n    steps: 100,\n    visible: true\n  }, this.options);\n  if (options.cartocss) {\n    torque.extend(this.options,\n        torque.common.TorqueLayer.optionsFromCartoCSS(options.cartocss));\n  }\n\n  if(options.tileJSON) this.options.provider = \"tileJSON\";\n\n  this.hidden = !this.options.visible;\n\n  this.animator = new torque.Animator(function(time) {\n    var k = time | 0;\n    if(self.getKey() !== k) {\n      self.setKey(k);\n    }\n  }, torque.extend(torque.clone(this.options), {\n    onPause: function() {\n      self.fire('pause');\n    },\n    onStop: function() {\n      self.fire('stop');\n    },\n    onStart: function() {\n      self.fire('play');\n    },\n    onStepsRange: function() {\n      self.fire('change:stepsRange', self.animator.stepsRange());\n    }\n  }));\n\n  this.play = this.animator.start.bind(this.animator);\n  this.stop = this.animator.stop.bind(this.animator);\n  this.pause = this.animator.pause.bind(this.animator);\n  this.toggle = this.animator.toggle.bind(this.animator);\n  this.setDuration = this.animator.duration.bind(this.animator);\n  this.isRunning = this.animator.isRunning.bind(this.animator);\n\n\n  CanvasLayer.call(this, {\n    map: this.options.map,\n    //resizeHandler: this.redraw,\n    animate: false,\n    updateHandler: this.render,\n    readyHandler: this.initialize\n  });\n\n}\n\n/**\n * torque layer\n */\nGMapsTorqueLayer.prototype = torque.extend({},\n  CanvasLayer.prototype,\n  GMapsTileLoader.prototype,\n  torque.Event,\n  {\n\n  providers: {\n    'sql_api': torque.providers.json,\n    'url_template': torque.providers.JsonArray,\n    'windshaft': torque.providers.windshaft,\n    'tileJSON': torque.providers.tileJSON\n  },\n\n  renderers: {\n    'point': torque.renderer.Point,\n    'pixel': torque.renderer.Rectangle\n  },\n\n  initialize: function() {\n    var self = this;\n\n    this.onTileAdded = this.onTileAdded.bind(this);\n\n    this.options.ready = function() {\n      self.fire(\"change:bounds\", {\n        bounds: self.provider.getBounds()\n      });\n      self.animator.steps(self.provider.getSteps());\n      self.animator.rescale();\n      self.fire('change:steps', {\n        steps: self.provider.getSteps()\n      });\n      self.setKeys(self.getKeys());\n    };\n\n    this.provider = new this.providers[this.options.provider](this.options);\n    this.renderer = new this.renderers[this.options.renderer](this.getCanvas(), this.options);\n    this.renderer.options.errorCallback = this.options.errorCallback;\n\n    // this listener should be before tile loader\n    this._cacheListener = google.maps.event.addListener(this.options.map, 'zoom_changed', function() {\n      self.renderer && self.renderer.clearSpriteCache();\n    });\n\n    this._initTileLoader(this.options.map, this.getProjection());\n\n    if (this.shader) {\n      this.renderer.setShader(this.shader);\n    }\n\n  },\n\n  hide: function() {\n    if(this.hidden) return this;\n    this.pause();\n    this.clear();\n    this.hidden = true;\n    return this;\n  },\n\n  show: function() {\n    if(!this.hidden) return this;\n    this.hidden = false;\n    this.play();\n    if (this.options.steps === 1){\n      this.redraw();\n    }\n    return this;\n  },\n\n  setSQL: function(sql) {\n    if (this.provider.options.named_map) throw new Error(\"SQL queries on named maps are read-only\");\n    if (!this.provider || !this.provider.setSQL) {\n      throw new Error(\"this provider does not support SQL\");\n    }\n    this.provider.setSQL(sql);\n    this._reloadTiles();\n    return this;\n  },\n\n  setBlendMode: function(_) {\n    this.renderer && this.renderer.setBlendMode(_);\n    this.redraw();\n  },\n\n  setSteps: function(steps) {\n    this.provider && this.provider.setSteps(steps);\n    this.animator && this.animator.steps(steps);\n    this._reloadTiles();\n  },\n\n  setColumn: function(column, isTime) {\n    this.provider && this.provider.setColumn(column, isTime);\n    this._reloadTiles();\n  },\n\n  getTimeBounds: function() {\n    return this.provider && this.provider.getKeySpan();\n  },\n\n  getCanvas: function() {\n    return this.canvas;\n  },\n\n    // for each tile shown on the map request the data\n  onTileAdded: function(t) {\n    var self = this;\n    this.provider.getTileData(t, t.zoom, function(tileData) {\n      // don't load tiles that are not being shown\n      if (t.zoom !== self.options.map.getZoom()) return;\n      self._tileLoaded(t, tileData);\n      self.fire('tileLoaded');\n      if (tileData) {\n        self.redraw();\n      }\n    });\n  },\n\n  clear: function() {\n    var canvas = this.canvas;\n    canvas.width = canvas.width;\n  },\n\n  /**\n   * render the selectef key\n   * don't call this function directly, it's called by\n   * requestAnimationFrame. Use redraw to refresh it\n   */\n  render: function() {\n    if(this.hidden) return;\n    var t, tile, pos;\n    var canvas = this.canvas;\n    this.renderer.clearCanvas();\n    var ctx = canvas.getContext('2d');\n\n    // renders only a \"frame\"\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      if (tile) {\n        pos = this.getTilePos(tile.coord);\n        ctx.setTransform(1, 0, 0, 1, pos.x, pos.y);\n        this.renderer.renderTile(tile, this.keys);\n      }\n    }\n    this.renderer.applyFilters();\n  },\n\n  getActivePointsBBox: function(step) {\n    var positions = [];\n    var tileMax = this.options.resolution * (256/this.options.resolution - 1);\n    for(var t in this._tiles) {\n      var tile = this._tiles[t];\n      positions = positions.concat(this.renderer.getActivePointsBBox(tile, step));\n    }\n    return positions;\n  },\n\n  /**\n   * set key to be shown. If it's a single value\n   * it renders directly, if it's an array it renders\n   * accumulated\n   */\n  setKey: function(key) {\n    this.setKeys([key]);\n  },\n\n  /** \n   * returns the array of keys being rendered\n   */\n  getKeys: function() {\n    return this.keys;\n  },\n\n  setKeys: function(keys) {\n    this.keys = keys;\n    this.animator.step(this.getKey());\n    this.redraw();\n    this.fire('change:time', { time: this.getTime(), step: this.getKey() });\n  },\n\n  getKey: function() {\n    return this.keys[0];\n  },\n\n  /**\n   * helper function, does the same than ``setKey`` but only\n   * accepts scalars.\n   */\n  setStep: function(time) {\n    if(time === undefined || time.length !== undefined) {\n      throw new Error(\"setTime only accept scalars\");\n    }\n    this.setKey(time);\n  },\n\n  renderRange: function(start, end) {\n    this.pause();\n    var keys = [];\n    for (var i = start; i <= end; i++) {\n      keys.push(i);\n    }\n    this.setKeys(keys);\n  },\n\n  resetRenderRange: function() {\n    this.stop();\n    this.play();\n  },\n\n  /**\n   * transform from animation step to Date object\n   * that contains the animation time\n   *\n   * ``step`` should be between 0 and ``steps - 1``\n   */\n  stepToTime: function(step) {\n    if (!this.provider) return 0;\n    var times = this.provider.getKeySpan();\n    var time = times.start + (times.end - times.start)*(step/this.provider.getSteps());\n    return new Date(time);\n  },\n\n  timeToStep: function(timestamp) {\n    if (typeof timestamp === \"Date\") timestamp = timestamp.getTime();\n    if (!this.provider) return 0;\n    var times = this.provider.getKeySpan();\n    var step = (this.provider.getSteps() * (timestamp - times.start)) / (times.end - times.start);\n    return step;\n  },\n\n  getStep: function() {\n    return this.getKey();\n  },\n\n  /**\n   * returns the animation time defined by the data\n   * in the defined column. Date object\n   */\n  getTime: function() {\n    return this.stepToTime(this.getKey());\n  },\n\n  /**\n   * set the cartocss for the current renderer\n   */\n  setCartoCSS: function(cartocss) {\n    if (this.provider && this.provider.options.named_map) throw new Error(\"CartoCSS style on named maps is read-only\");\n    var shader = new carto.RendererJS().render(cartocss);\n    this.shader = shader;\n    if (this.renderer) {\n      this.renderer.setShader(shader);\n    }\n\n    // provider options\n    var options = torque.common.TorqueLayer.optionsFromLayer(shader.findLayer({ name: 'Map' }));\n    this.provider && this.provider.setCartoCSS && this.provider.setCartoCSS(cartocss);\n    if(this.provider && this.provider.setOptions(options)) {\n      this._reloadTiles();\n    }\n    torque.extend(this.options, options);\n\n    // animator options\n    if (options.animationDuration) {\n      this.animator.duration(options.animationDuration);\n    }\n\n    this.redraw();\n    return this;\n  },\n\n  redraw: function() {\n    this.scheduleUpdate();\n  },\n\n  onRemove: function() {\n    this.fire('remove');\n    CanvasLayer.prototype.onRemove.call(this);\n    this.animator.stop();\n    this._removeTileLoader();\n    google.maps.event.removeListener(this._cacheListener);\n  },\n\n  /**\n   * return an array with the values for all the pixels active for the step\n   */\n  getValues: function(step) {\n    var values = [];\n    step = step === undefined ? this.getKey(): step;\n    var t, tile;\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      this.renderer.getValues(tile, step, values);\n    }\n    return values;\n  },\n\n  getValueForPos: function(x, y, step) {\n    step = step === undefined ? this.getKey(): step;\n    var t, tile, pos, value = null, xx, yy;\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      pos = this.getTilePos(tile.coord);\n      xx = x - pos.x;\n      yy = y - pos.y;\n      if (xx >= 0 && yy >= 0 && xx < this.renderer.TILE_SIZE && yy <= this.renderer.TILE_SIZE) {\n        value = this.renderer.getValueFor(tile, step, xx, yy);\n      }\n      if (value !== null) {\n        return value;\n      }\n    }\n    return null;\n  },\n  getValueForBBox: function(x, y, w, h) {\n    var xf = x + w, yf = y + h;\n    var sum = 0;\n    for(_y = y; y<yf; y+=this.options.resolution){\n      for(_x = x; x<xf; x+=this.options.resolution){\n        var thisValue = this.getValueForPos(_x,_y);\n        if (thisValue){\n          var bb = thisValue.bbox;\n          var proj = this.getProjection()\n          var xy = proj.fromLatLngToContainerPixel(new google.maps.LatLng(bb[1].lat, bb[1].lon));\n          if(xy.x < xf && xy.y < yf){\n            sum += thisValue.value;\n          }\n        }\n      }\n    }\n    return sum;\n  },\n\n  error: function (callback) {\n    this.options.errorCallback = callback;\n    return this;\n  }\n\n});\n\n\n\nfunction GMapsTiledTorqueLayer(options) {\n  this.options = torque.extend({}, options);\n  CanvasTileLayer.call(this, this._loadTile.bind(this), this.drawTile.bind(this));\n  this.initialize(options);\n}\n\nGMapsTiledTorqueLayer.prototype = torque.extend({}, CanvasTileLayer.prototype, {\n\n  providers: {\n    'sql_api': torque.providers.json,\n    'url_template': torque.providers.JsonArray\n  },\n\n  renderers: {\n    'point': torque.renderer.Point,\n    'pixel': torque.renderer.Rectangle\n  },\n\n  initialize: function(options) {\n    var self = this;\n    this.keys = [0];\n\n    this.options.renderer = this.options.renderer || 'pixel';\n    this.options.provider = this.options.provider || 'sql_api';\n\n    this.provider = new this.providers[this.options.provider](options);\n    this.renderer = new this.renderers[this.options.renderer](null, options);\n\n  },\n\n  _tileLoaded: function(tile, tileData) {\n    tile.data = tileData;\n    this.drawTile(tile);\n  },\n\n  _loadTile: function(tile, coord, zoom) {\n    var self = this;\n    var limit = 1 << zoom;\n    // wrap tile\n    var wrappedCoord = {\n      x: ((coord.x % limit) + limit) % limit,\n      y: coord.y\n    };\n\n    this.provider.getTileData(wrappedCoord, zoom, function(tileData) {\n      self._tileLoaded(tile, tileData);\n    });\n  },\n\n  drawTile: function (tile) {\n    var canvas = tile.canvas;\n    if(!tile.data) return;\n    canvas.width = canvas.width;\n\n    this.renderer.setCanvas(canvas);\n\n    var accum = this.renderer.accumulate(tile.data, this.getKey());\n    this.renderer.renderTileAccum(accum, 0, 0);\n  },\n\n  setKey: function(key) {\n    this.keys = [key];\n    this.redraw();\n  },\n\n  /**\n   * set the cartocss for the current renderer\n   */\n  setCartoCSS: function(cartocss) {\n    if (!this.renderer) throw new Error('renderer is not valid');\n    return this.renderer.setCartoCSS(cartocss);\n  },\n\n  setStepsRange: function(start, end) {\n    this.animator.stepsRange(start, end);\n  },\n\n  removeStepsRange: function() {\n    this.animator.removeCustomStepsRange();\n  },\n\n  getStepsRange: function() {\n    return this.animator.stepsRange();\n  }\n\n});\n\nmodule.exports = {\n    GMapsTiledTorqueLayer: GMapsTiledTorqueLayer,\n    GMapsTorqueLayer: GMapsTorqueLayer\n};\n",
    "module.exports = require('./core');\n\nmodule.exports.Animator = require('./animator');\nmodule.exports.cartocss_reference = require('./cartocss_reference');\nmodule.exports.common = require('./common');\nmodule.exports.math = require('./math');\nmodule.exports.Mercator = require('./mercator');\nmodule.exports.net = require('./request');\nmodule.exports.renderer = require('./renderer');\nmodule.exports.providers = require('./provider');\n\nrequire('./leaflet');\n\nvar gmaps = require('./gmaps');\nmodule.exports.GMapsTileLoader = gmaps.GMapsTileLoader;\nmodule.exports.GMapsTorqueLayer = gmaps.GMapsTorqueLayer;\nmodule.exports.GMapsTiledTorqueLayer = gmaps.GMapsTiledTorqueLayer;\n",
    "require('./leaflet_tileloader_mixin');\n\n/**\n * full canvas layer implementation for Leaflet\n */\n\nL.CanvasLayer = L.Class.extend({\n\n  includes: [L.Mixin.Events, L.Mixin.TileLoader],\n\n  options: {\n      minZoom: 0,\n      maxZoom: 28,\n      tileSize: 256,\n      subdomains: 'abc',\n      errorTileUrl: '',\n      attribution: '',\n      zoomOffset: 0,\n      opacity: 1,\n      unloadInvisibleTiles: L.Browser.mobile,\n      updateWhenIdle: L.Browser.mobile,\n      tileLoader: false, // installs tile loading events\n      zoomAnimation: true\n  },\n\n  initialize: function (options) {\n    var self = this;\n    options = options || {};\n    //this.project = this._project.bind(this);\n    this.render = this.render.bind(this);\n    L.Util.setOptions(this, options);\n    this._canvas = this._createCanvas();\n    // backCanvas for zoom animation\n    if (this.options.zoomAnimation) {\n      this._backCanvas = this._createCanvas();\n    }\n    this._ctx = this._canvas.getContext('2d');\n    this.currentAnimationFrame = -1;\n    this.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                                window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {\n                                    return window.setTimeout(callback, 1000 / 60);\n                                };\n    this.cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame ||\n                                window.webkitCancelAnimationFrame || window.msCancelAnimationFrame || function(id) { clearTimeout(id); };\n  },\n\n  _createCanvas: function() {\n    var canvas;\n    canvas = document.createElement('canvas');\n    canvas.style.position = 'absolute';\n    canvas.style.top = 0;\n    canvas.style.left = 0;\n    canvas.style.pointerEvents = \"none\";\n    canvas.style.zIndex = this.options.zIndex || 0;\n    var className = 'leaflet-tile-container';\n    if (this.options.zoomAnimation) {\n      className += ' leaflet-zoom-animated';\n    }\n    canvas.setAttribute('class', className);\n    return canvas;\n  },\n\n  onAdd: function (map) {\n    this._map = map;\n\n    // add container with the canvas to the tile pane\n    // the container is moved in the oposite direction of the \n    // map pane to keep the canvas always in (0, 0)\n    var tilePane = this._map._panes.tilePane;\n    var _container = L.DomUtil.create('div', 'leaflet-layer');\n    _container.appendChild(this._canvas);\n    if (this.options.zoomAnimation) {\n      _container.appendChild(this._backCanvas);\n      this._backCanvas.style.display = 'none';\n    }\n    tilePane.appendChild(_container);\n\n    this._container = _container;\n\n    // hack: listen to predrag event launched by dragging to\n    // set container in position (0, 0) in screen coordinates\n    map.dragging._draggable.on('predrag', function() {\n      var d = map.dragging._draggable;\n      L.DomUtil.setPosition(this._canvas, { x: -d._newPos.x, y: -d._newPos.y });\n    }, this);\n\n    map.on({ 'viewreset': this._reset }, this);\n    map.on('move', this.redraw, this);\n    map.on('resize', this._reset, this);\n\n    if (this.options.zoomAnimation) {\n      map.on({\n        'zoomanim': this._animateZoom,\n        'zoomend': this._endZoomAnim,\n        'moveend': this._reset\n      }, this);\n    }\n\n    if(this.options.tileLoader) {\n      this._initTileLoader();\n    }\n\n    this._reset();\n  },\n\n  _animateZoom: function (e) {\n    if (!this._animating) {\n        this._animating = true;\n    }\n    var back = this._backCanvas;\n\n    back.width = this._canvas.width;\n    back.height = this._canvas.height;\n\n    // paint current canvas in back canvas with trasnformation\n    var pos = this._canvas._leaflet_pos || { x: 0, y: 0 };\n    back.getContext('2d').drawImage(this._canvas, 0, 0);\n\n    L.DomUtil.setPosition(back, L.DomUtil.getPosition(this._canvas));\n\n    // hide original\n    this._canvas.style.display = 'none';\n    back.style.display = 'block';\n    var map = this._map;\n    var scale = map.getZoomScale(e.zoom);\n    var newCenter = map._latLngToNewLayerPoint(map.getCenter(), e.zoom, e.center);\n    var oldCenter = map._latLngToNewLayerPoint(e.center, e.zoom, e.center);\n\n    var origin = {\n      x:  newCenter.x - oldCenter.x + pos.x,\n      y:  newCenter.y - oldCenter.y + pos.y,\n    };\n\n    var bg = back;\n    var transform = L.DomUtil.TRANSFORM;\n    setTimeout(function() {\n      bg.style[transform] = L.DomUtil.getTranslateString(origin) + ' scale(' + e.scale + ') ';\n    }, 0)\n  },\n\n  _endZoomAnim: function () {\n    this._animating = false;\n    this._canvas.style.display = 'block';\n    this._backCanvas.style.display = 'none';\n    this._backCanvas.style[L.DomUtil.TRANSFORM] = '';\n  },\n\n  getCanvas: function() {\n    return this._canvas;\n  },\n\n  getAttribution: function() {\n    return this.options.attribution;\n  },\n\n  draw: function() {\n    return this._reset();\n  },\n\n  onRemove: function (map) {\n    this._container.parentNode.removeChild(this._container);\n    map.off({\n      'viewreset': this._reset,\n      'move': this._render,\n      'moveend': this._reset,\n      'resize': this._reset,\n      'zoomanim': this._animateZoom,\n      'zoomend': this._endZoomAnim\n    }, this);\n  },\n\n  addTo: function (map) {\n    map.addLayer(this);\n    return this;\n  },\n\n  error: function (callback) {\n    this.provider.options.errorCallback = callback;\n    return this;\n  },\n\n  setOpacity: function (opacity) {\n    this.options.opacity = opacity;\n    this._updateOpacity();\n    return this;\n  },\n\n  setZIndex: function(zIndex) {\n    this._canvas.style.zIndex = zIndex;\n    if (this.options.zoomAnimation) {\n      this._backCanvas.style.zIndex = zIndex;\n    }\n  },\n\n  bringToFront: function () {\n    return this;\n  },\n\n  bringToBack: function () {\n    return this;\n  },\n\n  _reset: function () {\n    var size = this._map.getSize();\n    this._canvas.width = size.x;\n    this._canvas.height = size.y;\n\n    // fix position\n    var pos = L.DomUtil.getPosition(this._map.getPanes().mapPane);\n    if (pos) {\n      L.DomUtil.setPosition(this._canvas, { x: -pos.x, y: -pos.y });\n    }\n    this.onResize();\n    this._render();\n  },\n\n  /*\n  _project: function(x) {\n    var point = this._map.latLngToLayerPoint(new L.LatLng(x[1], x[0]));\n    return [point.x, point.y];\n  },\n  */\n\n  _updateOpacity: function () { },\n\n  _render: function() {\n    if (this.currentAnimationFrame >= 0) {\n      this.cancelAnimationFrame.call(window, this.currentAnimationFrame);\n    }\n    this.currentAnimationFrame = this.requestAnimationFrame.call(window, this.render);\n  },\n\n  // use direct: true if you are inside an animation frame call\n  redraw: function(direct) {\n    var domPosition = L.DomUtil.getPosition(this._map.getPanes().mapPane);\n    if (domPosition) {\n      L.DomUtil.setPosition(this._canvas, { x: -domPosition.x, y: -domPosition.y });\n    }\n    if (direct) {\n      this.render();\n    } else {\n      this._render();\n    }\n  },\n\n  onResize: function() {\n  },\n\n  render: function() {\n    throw new Error('render function should be implemented');\n  }\n\n});\n",
    "if (typeof L !== 'undefined') {\n    require('./torque');\n}\n",
    "L.Mixin.TileLoader = {\n\n  _initTileLoader: function() {\n    this._tiles = {}\n    this._tilesLoading = {};\n    this._tilesToLoad = 0;\n    this._map.on({\n        'moveend': this._updateTiles\n    }, this);\n    this._updateTiles();\n  },\n\n  _removeTileLoader: function() {\n    this._map.off({\n        'moveend': this._updateTiles\n    }, this);\n    this._removeTiles();\n  },\n\n  _updateTiles: function () {\n\n      if (!this._map) { return; }\n\n      var bounds = this._map.getPixelBounds(),\n          zoom = this._map.getZoom(),\n          tileSize = this.options.tileSize;\n\n      if (zoom > this.options.maxZoom || zoom < this.options.minZoom) {\n          return;\n      }\n\n      var nwTilePoint = new L.Point(\n              Math.floor(bounds.min.x / tileSize),\n              Math.floor(bounds.min.y / tileSize)),\n\n          seTilePoint = new L.Point(\n              Math.floor(bounds.max.x / tileSize),\n              Math.floor(bounds.max.y / tileSize)),\n\n          tileBounds = new L.Bounds(nwTilePoint, seTilePoint);\n\n      this._addTilesFromCenterOut(tileBounds);\n      this._removeOtherTiles(tileBounds);\n  },\n\n  _removeTiles: function (bounds) {\n      for (var key in this._tiles) {\n        this._removeTile(key);\n      }\n  },\n\n  _reloadTiles: function() {\n    this._removeTiles();\n    this._updateTiles();\n  },\n\n  _removeOtherTiles: function (bounds) {\n      var kArr, x, y, z, key;\n      var zoom = this._map.getZoom();\n\n      for (key in this._tiles) {\n          if (this._tiles.hasOwnProperty(key)) {\n              kArr = key.split(':');\n              x = parseInt(kArr[0], 10);\n              y = parseInt(kArr[1], 10);\n              z = parseInt(kArr[2], 10);\n\n              // remove tile if it's out of bounds\n              if (zoom !== z || x < bounds.min.x || x > bounds.max.x || y < bounds.min.y || y > bounds.max.y) {\n                  this._removeTile(key);\n              }\n          }\n      }\n  },\n\n  _removeTile: function (key) {\n      this.fire('tileRemoved', this._tiles[key]);\n      delete this._tiles[key];\n      delete this._tilesLoading[key];\n  },\n\n  _tileKey: function(tilePoint) {\n    return tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom;\n  },\n\n  _tileShouldBeLoaded: function (tilePoint) {\n      var k = this._tileKey(tilePoint);\n      return !(k in this._tiles) && !(k in this._tilesLoading);\n  },\n\n  _tileLoaded: function(tilePoint, tileData) {\n    this._tilesToLoad--;\n    var k = tilePoint.x + ':' + tilePoint.y + ':' + tilePoint.zoom\n    this._tiles[k] = tileData;\n    delete this._tilesLoading[k];\n    if(this._tilesToLoad === 0) {\n      this.fire(\"tilesLoaded\");\n    }\n  },\n\n  getTilePos: function (tilePoint) {\n    tilePoint = new L.Point(tilePoint.x, tilePoint.y);\n    var origin = this._map._getNewTopLeftPoint(this._map.getCenter()),\n        tileSize = this.options.tileSize;\n\n    return tilePoint.multiplyBy(tileSize).subtract(origin);\n  },\n\n  _addTilesFromCenterOut: function (bounds) {\n      var queue = [],\n          center = bounds.getCenter(),\n          zoom = this._map.getZoom();\n\n      var j, i, point;\n\n      for (j = bounds.min.y; j <= bounds.max.y; j++) {\n          for (i = bounds.min.x; i <= bounds.max.x; i++) {\n              point = new L.Point(i, j);\n              point.zoom =  zoom;\n\n              if (this._tileShouldBeLoaded(point)) {\n                  queue.push(point);\n              }\n          }\n      }\n\n      var tilesToLoad = queue.length;\n\n      if (tilesToLoad === 0) { return; }\n\n      // load tiles in order of their distance to center\n      queue.sort(function (a, b) {\n          return a.distanceTo(center) - b.distanceTo(center);\n      });\n\n      this._tilesToLoad += tilesToLoad;\n\n      for (i = 0; i < tilesToLoad; i++) {\n        var t = queue[i];\n        var k = this._tileKey(t);\n        this._tilesLoading[k] = t;\n        this.fire('tileAdded', t);\n      }\n      this.fire(\"tilesLoading\");\n\n  }\n\n}\n",
    "var carto = global.carto || require('carto');\nvar torque = require('../');\n\nrequire('./canvas_layer');\n\n/**\n * torque layer\n */\nL.TorqueLayer = L.CanvasLayer.extend({\n\n  providers: {\n    'sql_api': torque.providers.json,\n    'url_template': torque.providers.JsonArray,\n    'windshaft': torque.providers.windshaft,\n    'tileJSON': torque.providers.tileJSON\n  },\n\n  renderers: {\n    'point': torque.renderer.Point,\n    'pixel': torque.renderer.Rectangle\n  },\n\n  initialize: function(options) {\n    var self = this;\n    if (!torque.isBrowserSupported()) {\n      throw new Error(\"browser is not supported by torque\");\n    }\n    options.tileLoader = true;\n    this.keys = [0];\n    Object.defineProperty(this, 'key', {\n      get: function() {\n        return this.getKey();\n      }\n    });\n    this.prevRenderedKey = 0;\n    if (options.cartocss) {\n      torque.extend(options, torque.common.TorqueLayer.optionsFromCartoCSS(options.cartocss));\n    }\n\n    options.resolution = options.resolution || 2;\n    options.steps = options.steps || 100;\n    options.visible = options.visible === undefined ? true: options.visible;\n    this.hidden = !options.visible;\n\n    this.animator = new torque.Animator(function(time) {\n      var k = time | 0;\n      if(self.getKey() !== k) {\n        self.setKey(k, { direct: true });\n      }\n    }, torque.extend(torque.clone(options), {\n      onPause: function() {\n        self.fire('pause');\n      },\n      onStop: function() {\n        self.fire('stop');\n      },\n      onStart: function() {\n        self.fire('play');\n      },\n      onStepsRange: function() {\n        self.fire('change:stepsRange', self.animator.stepsRange());\n      }\n    }));\n\n    this.play = this.animator.start.bind(this.animator);\n    this.stop = this.animator.stop.bind(this.animator);\n    this.pause = this.animator.pause.bind(this.animator);\n    this.toggle = this.animator.toggle.bind(this.animator);\n    this.setDuration = this.animator.duration.bind(this.animator);\n    this.isRunning = this.animator.isRunning.bind(this.animator);\n\n\n    L.CanvasLayer.prototype.initialize.call(this, options);\n\n    this.options.renderer = this.options.renderer || 'point';\n    this.options.provider = this.options.provider || 'windshaft';\n\n    if (this.options.tileJSON) this.options.provider = 'tileJSON';\n\n    this.provider = new this.providers[this.options.provider](options);\n    this.renderer = new this.renderers[this.options.renderer](this.getCanvas(), options);\n\n    options.ready = function() {\n      self.fire(\"change:bounds\", {\n        bounds: self.provider.getBounds()\n      });\n      self.animator.steps(self.provider.getSteps());\n      self.animator.rescale();\n      self.fire('change:steps', {\n        steps: self.provider.getSteps()\n      });\n      self.setKeys(self.getKeys());\n    };\n\n    this.renderer.on(\"allIconsLoaded\", this.render.bind(this));\n\n\n    // for each tile shown on the map request the data\n    this.on('tileAdded', function(t) {\n      var tileData = this.provider.getTileData(t, t.zoom, function(tileData) {\n        // don't load tiles that are not being shown\n        if (t.zoom !== self._map.getZoom()) return;\n        self._tileLoaded(t, tileData);\n        self._clearTileCaches();\n        if (tileData) {\n          self.redraw();\n        }\n        self.fire('tileLoaded');\n      });\n    }, this);\n\n  },\n\n  _clearTileCaches: function() {\n    var t, tile;\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      if (tile && tile._tileCache) {\n        tile._tileCache = null;\n      }\n    }\n  },\n\n  _clearCaches: function() {\n    this.renderer && this.renderer.clearSpriteCache();\n    this._clearTileCaches();\n  },\n\n  onAdd: function (map) {\n    map.on({\n      'zoomend': this._clearCaches,\n      'zoomstart': this._pauseOnZoom,\n    }, this);\n\n    map.on({\n      'zoomend': this._resumeOnZoom\n    }, this);\n    L.CanvasLayer.prototype.onAdd.call(this, map);\n  },\n\n  onRemove: function(map) {\n    this.fire('remove');\n    this._removeTileLoader();\n    map.off({\n      'zoomend': this._clearCaches,\n      'zoomstart': this._pauseOnZoom,\n    }, this);\n    map.off({\n      'zoomend': this._resumeOnZoom\n    }, this);\n    L.CanvasLayer.prototype.onRemove.call(this, map);\n  },\n\n  _pauseOnZoom: function() {\n    this.wasRunning = this.isRunning();\n    if (this.wasRunning) {\n      this.pause();\n    }\n  },\n\n  _resumeOnZoom: function() {\n    if (this.wasRunning) {\n      this.play();\n    }\n  },\n\n  hide: function() {\n    if(this.hidden) return this;\n    this.pause();\n    this.clear();\n    this.hidden = true;\n    return this;\n  },\n\n  show: function() {\n    if(!this.hidden) return this;\n    this.hidden = false;\n    this.play();\n    if (this.options.steps === 1){\n      this.redraw();\n    }\n    return this;\n  },\n\n  setSQL: function(sql) {\n    if (this.provider.options.named_map) throw new Error(\"SQL queries on named maps are read-only\");\n    if (!this.provider || !this.provider.setSQL) {\n      throw new Error(\"this provider does not support SQL\");\n    }\n    this.provider.setSQL(sql);\n    this._reloadTiles();\n    return this;\n  },\n\n  setBlendMode: function(_) {\n    this.renderer.setBlendMode(_);\n    this.redraw();\n  },\n\n  setSteps: function(steps) {\n    this.provider.setSteps(steps);\n    this._reloadTiles();\n  },\n\n  setColumn: function(column, isTime) {\n    this.provider.setColumn(column, isTime);\n    this._reloadTiles();\n  },\n\n  getTimeBounds: function() {\n    return this.provider && this.provider.getKeySpan();\n  },\n\n  clear: function() {\n    var canvas = this.getCanvas();\n    canvas.width = canvas.width;\n  },\n\n  /**\n   * render the selectef key\n   * don't call this function directly, it's called by\n   * requestAnimationFrame. Use redraw to refresh it\n   */\n  render: function() {\n    if(this.hidden) return;\n    var t, tile, pos;\n    var canvas = this.getCanvas();\n    this.renderer.clearCanvas();\n    var ctx = canvas.getContext('2d');\n\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      if (tile) {\n        // clear cache\n        if (this.animator.isRunning()) {\n          tile._tileCache = null;\n        }\n\n        pos = this.getTilePos(tile.coord);\n        ctx.setTransform(1, 0, 0, 1, pos.x, pos.y);\n\n        if (tile._tileCache) {\n          // when the tile has a cached image just render it and avoid to render\n          // all the points\n          this.renderer._ctx.drawImage(tile._tileCache, 0, 0);\n        } else {\n          this.renderer.renderTile(tile, this.keys);\n        }\n      }\n    }\n    this.renderer.applyFilters();\n\n    // prepare caches if the animation is not running\n    // don't cache if the key has just changed, this avoids to cache\n    // when the user is dragging, it only cache when the map is still\n    if (!this.animator.isRunning() && this.getKey() === this.prevRenderedKey) {\n      var tile_size = this.renderer.TILE_SIZE;\n      for(t in this._tiles) {\n        tile = this._tiles[t];\n        if (tile && !tile._tileCache) {\n          var c = tile._tileCache = document.createElement('canvas');\n          c.width = c.height = tile_size;\n          pos = this.getTilePos(tile.coord);\n          // clip bounds, firefox raise an exception when try to get data from outside canvas\n          var x = Math.max(0, pos.x)\n          var y = Math.max(0, pos.y)\n          var w = Math.min(tile_size, this.getCanvas().width - x);\n          var h = Math.min(tile_size, this.getCanvas().height - y);\n          if (w > 0 && h > 0) {\n            c.getContext('2d').drawImage(this.getCanvas(), x, y, w, h, x - pos.x, y - pos.y, w, h);\n          }\n        }\n      }\n    }\n\n    this.prevRenderedKey = this.getKey();\n\n  },\n\n  /**\n   * set key to be shown. If it's a single value\n   * it renders directly, if it's an array it renders\n   * accumulated\n   */\n  setKey: function(key, options) {\n    this.setKeys([key], options);\n  },\n\n  /** \n   * returns the array of keys being rendered\n   */\n  getKeys: function() {\n    return this.keys;\n  },\n\n  setKeys: function(keys, options) {\n    this.keys = keys;\n    this.animator.step(this.getKey());\n    this._clearTileCaches();\n    this.redraw(options && options.direct);\n    this.fire('change:time', {\n        time: this.getTime(),\n        step: this.getKey(),\n        start: this.getKey(),\n        end: this.getLastKey()\n    });\n  },\n\n  getKey: function() {\n    return this.keys[0];\n  },\n\n  getLastKey: function() {\n    return this.keys[this.keys.length - 1];\n  },\n\n  /**\n   * helper function, does the same than ``setKey`` but only\n   * accepts scalars.\n   */\n  setStep: function(time) {\n    if(time === undefined || time.length !== undefined) {\n      throw new Error(\"setTime only accept scalars\");\n    }\n    this.setKey(time);\n  },\n\n  renderRange: function(start, end) {\n    this.pause();\n    var keys = [];\n    for (var i = start; i <= end; i++) {\n      keys.push(i);\n    }\n    this.setKeys(keys);\n  },\n\n  resetRenderRange: function() {\n    this.stop();\n    this.play();\n  },\n\n  /**\n   * transform from animation step to Date object\n   * that contains the animation time\n   *\n   * ``step`` should be between 0 and ``steps - 1``\n   */\n  stepToTime: function(step) {\n    var times = this.provider.getKeySpan();\n    var time = times.start + (times.end - times.start)*(step/this.provider.getSteps());\n    return new Date(time);\n  },\n\n  timeToStep: function(timestamp) {\n    if (typeof timestamp === \"Date\") timestamp = timestamp.getTime();\n    if (!this.provider) return 0;\n    var times = this.provider.getKeySpan();\n    var step = (this.provider.getSteps() * (timestamp - times.start)) / (times.end - times.start);\n    return step;\n  },\n\n  getStep: function() {\n    return this.getKey();\n  },\n\n  /**\n   * returns the animation time defined by the data\n   * in the defined column. Date object\n   */\n  getTime: function() {\n    return this.stepToTime(this.getKey());\n  },\n\n  /**\n   * returns an object with the start and end times\n   */\n  getTimeSpan: function() {\n    return this.provider.getKeySpan();\n  },\n\n  /**\n   * set the cartocss for the current renderer\n   */\n  setCartoCSS: function(cartocss) {\n    if (this.provider.options.named_map) throw new Error(\"CartoCSS style on named maps is read-only\");\n    if (!this.renderer) throw new Error('renderer is not valid');\n    var shader = new carto.RendererJS().render(cartocss);\n    this.renderer.setShader(shader);\n\n    // provider options\n    var options = torque.common.TorqueLayer.optionsFromLayer(shader.findLayer({ name: 'Map' }));\n    this.provider.setCartoCSS && this.provider.setCartoCSS(cartocss);\n    if(this.provider.setOptions(options)) {\n      this._reloadTiles();\n    }\n\n    torque.extend(this.options, options);\n\n    // animator options\n    if (options.animationDuration) {\n      this.animator.duration(options.animationDuration);\n    }\n    this._clearCaches();\n    this.redraw();\n    return this;\n  },\n\n  /**\n   * get active points for a step in active zoom\n   * returns a list of bounding boxes [[] , [], []]\n   * empty list if there is no active pixels\n   */\n  getActivePointsBBox: function(step) {\n    var positions = [];\n    for(var t in this._tiles) {\n      var tile = this._tiles[t];\n      positions = positions.concat(this.renderer.getActivePointsBBox(tile, step));\n    }\n    return positions;\n  },\n\n  /**\n   * return an array with the values for all the pixels active for the step\n   */\n  getValues: function(step) {\n    var values = [];\n    step = step === undefined ? this.getKey(): step;\n    var t, tile;\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      this.renderer.getValues(tile, step, values);\n    }\n    return values;\n  },\n\n  /**\n   * return the value for position relative to map coordinates. null for no value\n   */\n  getValueForPos: function(x, y, step) {\n    step = step === undefined ? this.getKey(): step;\n    var t, tile, pos, value = null, xx, yy;\n    for(t in this._tiles) {\n      tile = this._tiles[t];\n      pos = this.getTilePos(tile.coord);\n      xx = x - pos.x;\n      yy = y - pos.y;\n      if (xx >= 0 && yy >= 0 && xx < this.renderer.TILE_SIZE && yy <= this.renderer.TILE_SIZE) {\n        value = this.renderer.getValueFor(tile, step, xx, yy);\n      }\n      if (value !== null) {\n        return value;\n      }\n    }\n    return null;\n  },\n\n  getValueForBBox: function(x, y, w, h) {\n    var xf = x + w, yf = y + h, _x=x;\n    var sum = 0;\n    for(_y = y; _y<yf; _y+=this.options.resolution){\n      for(_x = x; _x<xf; _x+=this.options.resolution){\n        var thisValue = this.getValueForPos(_x,_y);\n        if (thisValue){\n          var bb = thisValue.bbox;\n          var xy = this._map.latLngToContainerPoint([bb[1].lat, bb[1].lon]);\n          if(xy.x < xf && xy.y < yf){\n            sum += thisValue.value;\n          }\n        }\n      }\n    }\n    return sum;\n  },\n\n  invalidate: function() {\n    this.provider.reload();\n  },\n\n  setStepsRange: function(start, end) {\n    this.animator.stepsRange(start, end);\n  },\n\n  removeStepsRange: function() {\n    this.animator.removeCustomStepsRange();\n  },\n\n  getStepsRange: function() {\n    return this.animator.stepsRange();\n  }\n});\n",
    "  function clamp(a, b) {\n    return function(t) {\n      return Math.max(Math.min(t, b), a);\n    };\n  }\n\n  function invLinear(a, b) {\n    var c = clamp(0, 1.0);\n    return function(t) {\n      return c((t - a)/(b - a));\n    };\n  }\n\n  function linear(a, b) {\n    var c = clamp(a, b);\n    function _linear(t) {\n      return c(a*(1.0 - t) + t*b);\n    }\n\n    _linear.invert = function() {\n      return invLinear(a, b);\n    };\n\n    return _linear;\n  }\n\nmodule.exports = {\n    clamp: clamp,\n    linear: linear,\n    invLinear: invLinear\n};\n",
    "var Point = function(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n};\n\nfunction clamp(value, optMin, optMax) {\n  if (optMin !== null) value = Math.max(value, optMin);\n  if (optMax !== null) value = Math.min(value, optMax);\n  return value;\n}\n\nfunction degreesToRadians(deg) {\n  return deg * (Math.PI / 180);\n}\n\nfunction radiansToDegrees(rad) {\n  return rad / (Math.PI / 180);\n}\n\n\nvar MercatorProjection = function() {\n//  this._tileSize = L.Browser.retina ? 512 : 256;\n  this._tileSize = 256;\n  this._pixelOrigin = new Point(this._tileSize / 2, this._tileSize / 2);\n  this._pixelsPerLonDegree = this._tileSize / 360;\n  this._pixelsPerLonRadian = this._tileSize / (2 * Math.PI);\n};\n\nMercatorProjection.prototype._fromLatLonToPoint = function(lat, lon) {\n  var point = new Point(0, 0);\n  var origin = this._pixelOrigin;\n\n  point.x = origin.x + lon * this._pixelsPerLonDegree;\n\n  // NOTE(appleton): Truncating to 0.9999 effectively limits latitude to\n  // 89.189.  This is about a third of a tile past the edge of the world\n  // tile.\n  var siny = clamp(Math.sin(degreesToRadians(lat)), -0.9999, 0.9999);\n  point.y = origin.y + 0.5 * Math.log((1 + siny) / (1 - siny)) * -this._pixelsPerLonRadian;\n  return point;\n};\n\nMercatorProjection.prototype._fromPointToLatLon = function(point) {\n  var me = this;\n  var origin = me._pixelOrigin;\n  var lon = (point.x - origin.x) / me._pixelsPerLonDegree;\n  var latRadians = (point.y - origin.y) / -me._pixelsPerLonRadian;\n  var lat = radiansToDegrees(2 * Math.atan(Math.exp(latRadians)) - Math.PI / 2);\n  return { lat:lat, lon:lon };\n};\n\nMercatorProjection.prototype._tilePixelPos = function(tileX, tileY) {\n  return {\n    x: tileX*this._tileSize,\n    y: tileY*this._tileSize\n  };\n};\n\nMercatorProjection.prototype.tilePixelBBox = function(x, y, zoom, px, py, res) {\n  res = res || 1.0;\n  var numTiles = 1 <<zoom;\n  var inc = res/numTiles;\n  px = (x*this._tileSize + px)/numTiles;\n  py = (y*this._tileSize + py)/numTiles;\n  return [\n    this._fromPointToLatLon(new Point(px, py + inc)),\n    this._fromPointToLatLon(new Point(px + inc, py))\n  ];\n};\n\nMercatorProjection.prototype.tileBBox = function(x, y, zoom, bufferSize) {\n  var numTiles = 1 <<zoom;\n  bufferSize = bufferSize || 0;\n  var inc =  (this._tileSize + bufferSize*2)/numTiles;\n  var px = (x*this._tileSize - bufferSize  )/numTiles;\n  var py = (y*this._tileSize - bufferSize  )/numTiles;\n  return [\n    this._fromPointToLatLon(new Point(px, py + inc)),\n    this._fromPointToLatLon(new Point(px + inc, py))\n  ];\n};\n\nMercatorProjection.prototype.latLonToTilePoint = function(lat, lon, tileX, tileY, zoom) {\n  var numTiles = 1 <<zoom;\n  var worldCoordinate = this._fromLatLonToPoint(lat, lon);\n  var pixelCoordinate = new Point(worldCoordinate.x*numTiles, worldCoordinate.y*numTiles);\n  var tilePixelPos    = this._tilePixelPos(tileX, tileY);\n  return new Point(Math.round(pixelCoordinate.x-tilePixelPos.x), Math.round(pixelCoordinate.y-tilePixelPos.y));\n};\n\nmodule.exports = MercatorProjection;\n",
    "/*\n# metrics profiler\n\n## timing\n\n```\n var timer = Profiler.metric('resource:load')\n time.start();\n ...\n time.end();\n```\n\n## counters\n\n```\n var counter = Profiler.metric('requests')\n counter.inc();   // 1\n counter.inc(10); // 11\n counter.dec()    // 10\n counter.dec(10)  // 0\n```\n\n## Calls per second\n```\n  var fps = Profiler.metric('fps')\n  function render() {\n    fps.mark();\n  }\n```\n*/\nvar MAX_HISTORY = 1024;\nfunction Profiler() {}\nProfiler.metrics = {};\n\nProfiler.get = function(name) {\n  return Profiler.metrics[name] || {\n    max: 0,\n    min: Number.MAX_VALUE,\n    avg: 0,\n    total: 0,\n    count: 0,\n    history: typeof(Float32Array) !== 'undefined' ? new Float32Array(MAX_HISTORY) : []\n  };\n};\n\nProfiler.new_value = function (name, value) {\n  var t = Profiler.metrics[name] = Profiler.get(name);\n\n  t.max = Math.max(t.max, value);\n  t.min = Math.min(t.min, value);\n  t.total += value;\n  ++t.count;\n  t.avg = t.total / t.count;\n  t.history[t.count%MAX_HISTORY] = value;\n};\n\nProfiler.print_stats = function () {\n  for (k in Profiler.metrics) {\n    var t = Profiler.metrics[k];\n    console.log(\" === \" + k + \" === \");\n    console.log(\" max: \" + t.max);\n    console.log(\" min: \" + t.min);\n    console.log(\" avg: \" + t.avg);\n    console.log(\" count: \" + t.count);\n    console.log(\" total: \" + t.total);\n  }\n};\n\nfunction Metric(name) {\n  this.t0 = null;\n  this.name = name;\n  this.count = 0;\n}\n\nMetric.prototype = {\n\n  //\n  // start a time measurement\n  //\n  start: function() {\n    this.t0 = +new Date();\n    return this;\n  },\n\n  // elapsed time since start was called\n  _elapsed: function() {\n    return +new Date() - this.t0;\n  },\n\n  //\n  // finish a time measurement and register it\n  // ``start`` should be called first, if not this \n  // function does not take effect\n  //\n  end: function() {\n    if (this.t0 !== null) {\n      Profiler.new_value(this.name, this._elapsed());\n      this.t0 = null;\n    }\n  },\n\n  //\n  // increments the value \n  // qty: how many, default = 1\n  //\n  inc: function(qty) {\n    qty = qty === undefined ? 1: qty;\n    Profiler.new_value(this.name, Profiler.get(this.name).count + (qty ? qty: 0));\n  },\n\n  //\n  // decrements the value \n  // qty: how many, default = 1\n  //\n  dec: function(qty) {\n    qty = qty === undefined ? 1: qty;\n    this.inc(-qty);\n  },\n\n  //\n  // measures how many times per second this function is called\n  //\n  mark: function() {\n    ++this.count;\n    if(this.t0 === null) {\n      this.start();\n      return;\n    }\n    var elapsed = this._elapsed();\n    if(elapsed > 1) {\n      Profiler.new_value(this.name, this.count);\n      this.count = 0;\n      this.start();\n    }\n  }\n};\n\nProfiler.metric = function(name) {\n  return new Metric(name);\n};\n\nmodule.exports = Profiler;\n",
    "module.exports = {\n    json: require('./json'),\n    JsonArray: require('./jsonarray'),\n    windshaft: require('./windshaft'),\n    tileJSON: require('./tilejson')\n};\n",
    "var torque = require('../');\nvar Profiler = require('../profiler');\n\n  var Uint8Array = torque.types.Uint8Array;\n  var Int32Array = torque.types.Int32Array;\n  var Uint32Array = torque.types.Uint32Array;\n\n  // format('hello, {0}', 'rambo') -> \"hello, rambo\"\n  function format(str) {\n    for(var i = 1; i < arguments.length; ++i) {\n      var attrs = arguments[i];\n      for(var attr in attrs) {\n        str = str.replace(RegExp('\\\\{' + attr + '\\\\}', 'g'), attrs[attr]);\n      }\n    }\n    return str;\n  }\n\n  var json = function (options) {\n    this._ready = false;\n    this._tileQueue = [];\n    this.options = options;\n\n    this.options.is_time = this.options.is_time === undefined ? true: this.options.is_time;\n    this.options.tiler_protocol = options.tiler_protocol || 'http';\n    this.options.tiler_domain = options.tiler_domain || 'cartodb.com';\n    this.options.tiler_port = options.tiler_port || 80;\n\n    if (this.options.data_aggregation) {\n      this.options.cumulative = this.options.data_aggregation === 'cumulative';\n    }\n\n    // check options\n    if (options.resolution === undefined ) throw new Error(\"resolution should be provided\");\n    if (options.steps === undefined ) throw new Error(\"steps should be provided\");\n    if(options.start === undefined) {\n      this._fetchKeySpan();\n    } else {\n      this._setReady(true);\n    }\n  };\n\n  json.prototype = {\n\n    /**\n     * return the torque tile encoded in an efficient javascript\n     * structure:\n     * {\n     *   x:Uint8Array x coordinates in tile reference system, normally from 0-255\n     *   y:Uint8Array y coordinates in tile reference system\n     *   Index: Array index to the properties\n     * }\n     */\n    proccessTile: function(rows, coord, zoom) {\n      var r;\n      var x = new Uint8Array(rows.length);\n      var y = new Uint8Array(rows.length);\n\n      var prof_mem = Profiler.metric('ProviderJSON:mem');\n      var prof_point_count = Profiler.metric('ProviderJSON:point_count');\n      var prof_process_time = Profiler.metric('ProviderJSON:process_time').start()\n\n      // count number of dates\n      var dates = 0;\n      var maxDateSlots = -1;\n      for (r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        dates += row.dates__uint16.length;\n        for(var d = 0; d < row.dates__uint16.length; ++d) {\n          maxDateSlots = Math.max(maxDateSlots, row.dates__uint16[d]);\n        }\n      }\n\n      if(this.options.cumulative) {\n        dates = (1 + maxDateSlots) * rows.length;\n      }\n\n      var type = this.options.cumulative ? Uint32Array: Uint8Array;\n\n      // reserve memory for all the dates\n      var timeIndex = new Int32Array(maxDateSlots + 1); //index-size\n      var timeCount = new Int32Array(maxDateSlots + 1);\n      var renderData = new (this.options.valueDataType || type)(dates);\n      var renderDataPos = new Uint32Array(dates);\n\n      prof_mem.inc(\n        4 * maxDateSlots + // timeIndex\n        4 * maxDateSlots + // timeCount\n        dates + //renderData\n        dates * 4\n      ); //renderDataPos\n\n      prof_point_count.inc(rows.length);\n\n      var rowsPerSlot = {};\n\n      // precache pixel positions\n      for (var r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        x[r] = row.x__uint8 * this.options.resolution;\n        // fix value when it's in the tile EDGE\n        // TODO: this should be fixed in SQL query\n        if (row.y__uint8 === -1) {\n          y[r] = 0;\n        } else {\n          y[r] = row.y__uint8 * this.options.resolution;\n        }\n\n        var dates = row.dates__uint16;\n        var vals = row.vals__uint8;\n        if (!this.options.cumulative) {\n          for (var j = 0, len = dates.length; j < len; ++j) {\n              var rr = rowsPerSlot[dates[j]] || (rowsPerSlot[dates[j]] = []);\n              if(this.options.cumulative) {\n                  vals[j] += prev_val;\n              }\n              prev_val = vals[j];\n              rr.push([r, vals[j]]);\n          }\n        } else {\n          var valByDate = {}\n          for (var j = 0, len = dates.length; j < len; ++j) {\n            valByDate[dates[j]] = vals[j];\n          }\n          var accum = 0;\n\n          // extend the latest to the end\n          for (var j = dates[0]; j <= maxDateSlots; ++j) {\n              var rr = rowsPerSlot[j] || (rowsPerSlot[j] = []);\n              var v = valByDate[j];\n              if (v) {\n                accum += v;\n              }\n              rr.push([r, accum]);\n          }\n\n          /*var lastDateSlot = dates[dates.length - 1];\n          for (var j = lastDateSlot + 1; j <= maxDateSlots; ++j) {\n            var rr = rowsPerSlot[j] || (rowsPerSlot[j] = []);\n            rr.push([r, prev_val]);\n          }\n          */\n        }\n\n      }\n\n      // for each timeslot search active buckets\n      var renderDataIndex = 0;\n      var timeSlotIndex = 0;\n      var i = 0;\n      for(var i = 0; i <= maxDateSlots; ++i) {\n        var c = 0;\n        var slotRows = rowsPerSlot[i]\n        if(slotRows) {\n          for (var r = 0; r < slotRows.length; ++r) {\n            var rr = slotRows[r];\n            ++c;\n            renderDataPos[renderDataIndex] = rr[0]\n            renderData[renderDataIndex] = rr[1];\n            ++renderDataIndex;\n          }\n        }\n        timeIndex[i] = timeSlotIndex;\n        timeCount[i] = c;\n        timeSlotIndex += c;\n      }\n\n      prof_process_time.end();\n\n      return {\n        x: x,\n        y: y,\n        z: zoom,\n        coord: {\n          x: coord.x,\n          y: coord.y,\n          z: zoom\n        },\n        timeCount: timeCount,\n        timeIndex: timeIndex,\n        renderDataPos: renderDataPos,\n        renderData: renderData,\n        maxDate: maxDateSlots\n      };\n    },\n\n    _host: function() {\n      var opts = this.options;\n      var port = opts.sql_api_port;\n      var domain = ((opts.user_name || opts.user) + '.' + (opts.sql_api_domain || 'cartodb.com')) + (port ? ':' + port: '');\n      var protocol = opts.sql_api_protocol || 'http';\n      return this.options.url || protocol + '://' + domain + '/api/v2/sql';\n    },\n\n    url: function(subhost) {\n      var opts = this.options;\n      var protocol = opts.sql_api_protocol || 'http';\n      if (!this.options.cdn_url) {\n        return this._host();\n      }\n      var h = protocol+ \"://\";\n      if (subhost) {\n        h += subhost + \".\";\n      }\n      var cdn_host = opts.cdn_url;\n      if(!cdn_host.http && !cdn_host.https) {\n        throw new Error(\"cdn_host should contain http and/or https entries\");\n      }\n      h += cdn_host[protocol] + \"/\" + (opts.user_name || opts.user) + '/api/v2/sql';\n      return h;\n    },\n\n    _hash: function(str) {\n      var hash = 0;\n      if (!str || str.length == 0) return hash;\n      for (var i = 0, l = str.length; i < l; ++i) {\n          hash = (( (hash << 5 ) - hash ) + str.charCodeAt(i)) | 0;\n      }\n      return hash;\n    },\n\n    _extraParams: function() {\n      if (this.options.extra_params) {\n        var p = [];\n        for(var k in this.options.extra_params) {\n          var v = this.options.extra_params[k];\n          if (v) {\n            p.push(k + \"=\" + encodeURIComponent(v));\n          }\n        }\n        return p.join('&');\n      }\n      return null;\n    },\n\n    isHttps: function() {\n      return this.options.sql_api_protocol && this.options.sql_api_protocol === 'https';\n    },\n\n    // execute actual query\n    sql: function(sql, callback, options) {\n      options = options || {};\n      var subdomains = this.options.subdomains || '0123';\n      if(this.isHttps()) {\n        subdomains = [null]; // no subdomain\n      }\n\n\n      var url;\n      if (options.no_cdn) {\n        url = this._host();\n      } else {\n        url = this.url(subdomains[Math.abs(this._hash(sql))%subdomains.length]);\n      }\n      var extra = this._extraParams();\n      torque.net.get( url + \"?q=\" + encodeURIComponent(sql) + (extra ? \"&\" + extra: ''), function (data) {\n          if(options.parseJSON) {\n            data = JSON.parse(data && data.responseText);\n          }\n          callback && callback(data);\n      });\n    },\n\n    getTileData: function(coord, zoom, callback) {\n      if(!this._ready) {\n        this._tileQueue.push([coord, zoom, callback]);\n      } else {\n        this._getTileData(coord, zoom, callback);\n      }\n    },\n\n    _setReady: function(ready) {\n      this._ready = true;\n      this._processQueue();\n      this.options.ready && this.options.ready();\n    },\n\n    _processQueue: function() {\n      var item;\n      while (item = this._tileQueue.pop()) {\n        this._getTileData.apply(this, item);\n      }\n    },\n\n    /**\n     * `coord` object like {x : tilex, y: tiley }\n     * `zoom` quadtree zoom level\n     */\n    _getTileData: function(coord, zoom, callback) {\n      var prof_fetch_time = Profiler.metric('ProviderJSON:tile_fetch_time').start()\n      this.table = this.options.table;\n      var numTiles = 1 << zoom;\n\n      var column_conv = this.options.column;\n\n      if(this.options.is_time) {\n        column_conv = format(\"date_part('epoch', {column})\", this.options);\n      }\n\n      var sql = \"\" +\n        \"WITH \" +\n        \"par AS (\" +\n        \"  SELECT CDB_XYZ_Resolution({zoom})*{resolution} as res\" +\n        \",  256/{resolution} as tile_size\" +\n        \", CDB_XYZ_Extent({x}, {y}, {zoom}) as ext \"  +\n        \"),\" +\n        \"cte AS ( \"+\n        \"  SELECT ST_SnapToGrid(i.the_geom_webmercator, p.res) g\" +\n        \", {countby} c\" +\n        \", floor(({column_conv} - {start})/{step}) d\" +\n        \"  FROM ({_sql}) i, par p \" +\n        \"  WHERE i.the_geom_webmercator && p.ext \" +\n        \"  GROUP BY g, d\" +\n        \") \" +\n        \"\" +\n        \"SELECT (st_x(g)-st_xmin(p.ext))/p.res x__uint8, \" +\n        \"       (st_y(g)-st_ymin(p.ext))/p.res y__uint8,\" +\n        \" array_agg(c) vals__uint8,\" +\n        \" array_agg(d) dates__uint16\" +\n        // the tile_size where are needed because the overlaps query in cte subquery includes the points\n        // in the left and bottom borders of the tile\n        \" FROM cte, par p where (st_y(g)-st_ymin(p.ext))/p.res < tile_size and (st_x(g)-st_xmin(p.ext))/p.res < tile_size GROUP BY x__uint8, y__uint8\";\n\n\n      var query = format(sql, this.options, {\n        zoom: zoom,\n        x: coord.x,\n        y: coord.y,\n        column_conv: column_conv,\n        _sql: this.getSQL()\n      });\n\n      var self = this;\n      this.sql(query, function (data) {\n        if (data) {\n          var rows = JSON.parse(data.responseText).rows;\n          callback(self.proccessTile(rows, coord, zoom));\n        } else {\n          callback(null);\n        }\n        prof_fetch_time.end();\n      });\n    },\n\n    getKeySpan: function() {\n      return {\n        start: this.options.start * 1000,\n        end: this.options.end * 1000,\n        step: this.options.step,\n        steps: this.options.steps,\n        columnType: this.options.is_time ? 'date': 'number'\n      };\n    },\n\n    setColumn: function(column, isTime) {\n      this.options.column = column;\n      this.options.is_time = isTime === undefined ? true: false;\n      this.reload();\n    },\n\n    setResolution: function(res) {\n      this.options.resolution = res;\n    },\n\n    // return true if tiles has been changed\n    setOptions: function(opt) {\n      var refresh = false;\n\n      if(opt.resolution !== undefined && opt.resolution !== this.options.resolution) {\n        this.options.resolution = opt.resolution;\n        refresh = true;\n      }\n\n      if(opt.steps !== undefined && opt.steps !== this.options.steps) {\n        this.setSteps(opt.steps, { silent: true });\n        refresh = true;\n      }\n\n      if(opt.column !== undefined && opt.column !== this.options.column) {\n        this.options.column = opt.column;\n        refresh = true;\n      }\n\n      if(opt.countby !== undefined && opt.countby !== this.options.countby) {\n        this.options.countby = opt.countby;\n        refresh = true;\n      }\n\n      if(opt.data_aggregation !== undefined) {\n        var c = opt.data_aggregation === 'cumulative';\n        if (this.options.cumulative !== c) {\n          this.options.cumulative = c;\n          refresh = true;\n        }\n      }\n\n      if (refresh) this.reload();\n      return refresh;\n\n    },\n\n    reload: function() {\n      this._ready = false;\n      this._fetchKeySpan();\n    },\n\n    setSQL: function(sql) {\n      if (this.options.sql != sql) {\n        this.options.sql = sql;\n        this.reload();\n      }\n    },\n\n    getSteps: function() {\n      return Math.min(this.options.steps, this.options.data_steps);\n    },\n\n    setSteps: function(steps, opt) {\n      opt = opt || {};\n      if (this.options.steps !== steps) {\n        this.options.steps = steps;\n        this.options.step = (this.options.end - this.options.start)/this.getSteps();\n        this.options.step = this.options.step || 1;\n        if (!opt.silent) this.reload();\n      }\n    },\n\n    getBounds: function() {\n      return this.options.bounds;\n    },\n\n    getSQL: function() {\n      return this.options.sql || \"select * from \" + this.options.table;\n    },\n\n    _tilerHost: function() {\n      var opts = this.options;\n      var user = (opts.user_name || opts.user);\n      return opts.tiler_protocol +\n           \"://\" + (user ? user + \".\" : \"\")  +\n           opts.tiler_domain +\n           ((opts.tiler_port != \"\") ? (\":\" + opts.tiler_port) : \"\");\n    },\n\n    _fetchUpdateAt: function(callback) {\n      var self = this;\n      var layergroup = {\n        \"version\": \"1.0.1\",\n        \"stat_tag\": this.options.stat_tag || 'torque',\n        \"layers\": [{\n          \"type\": \"cartodb\",\n          \"options\": {\n            \"cartocss_version\": \"2.1.1\", \n            \"cartocss\": \"#layer {}\",\n            \"sql\": this.getSQL()\n          }\n        }]\n      };\n      var url = this._tilerHost() + \"/tiles/layergroup\";\n      var extra = this._extraParams();\n\n      // tiler needs map_key instead of api_key\n      // so replace it\n      if (extra) {\n        extra = extra.replace('api_key=', 'map_key=');\n      }\n\n      url = url +\n        \"?config=\" + encodeURIComponent(JSON.stringify(layergroup)) +\n        \"&callback=?\" + (extra ? \"&\" + extra: '');\n\n      torque.net.jsonp(url, function (data) {\n        var query = format(\"select * from ({sql}) __torque_wrap_sql limit 0\", { sql: self.getSQL() });\n        self.sql(query, function (queryData) {\n          if (data && queryData) {\n            callback({\n              updated_at: data.last_updated,\n              fields: queryData.fields\n            });\n          }\n        }, { parseJSON: true });\n      });\n    },\n\n    //\n    // the data range could be set by the user though ``start``\n    // option. It can be fecthed from the table when the start\n    // is not specified.\n    //\n    _fetchKeySpan: function() {\n      var self = this;\n      var max_col, min_col, max_tmpl, min_tmpl;\n\n      this._fetchUpdateAt(function(data) {\n        if (!data) return;\n        self.options.extra_params = self.options.extra_params || {};\n        self.options.extra_params.last_updated = data.updated_at || 0;\n        self.options.extra_params.cache_policy = 'persist';\n        self.options.is_time = data.fields[self.options.column].type === 'date';\n\n        var column_conv = self.options.column;\n        if (self.options.is_time){\n          max_tmpl = \"date_part('epoch', max({column}))\";\n          min_tmpl = \"date_part('epoch', min({column}))\";\n          column_conv = format(\"date_part('epoch', {column})\", self.options);\n        } else {\n          max_tmpl = \"max({column})\";\n          min_tmpl = \"min({column})\";\n        }\n\n        max_col = format(max_tmpl, { column: self.options.column });\n        min_col = format(min_tmpl, { column: self.options.column });\n\n        /*var sql_stats = \"\" +\n        \"WITH summary_groups as ( \" +\n          \"WITH summary as ( \" +\n           \"select   (row_number() over (order by __time_col asc nulls last)+1)/2 as rownum, __time_col \" +\n            \"from (select *, {column} as __time_col from ({sql}) __s) __torque_wrap_sql \" +\n            \"order by __time_col asc \" +\n          \") \" +\n          \"SELECT \" +\n          \"max(__time_col) OVER(PARTITION BY rownum) -  \" +\n          \"min(__time_col) OVER(PARTITION BY rownum) diff \" +\n          \"FROM summary \" +\n        \"), subq as ( \" +\n        \" SELECT \" +\n            \"st_xmax(st_envelope(st_collect(the_geom))) xmax, \" +\n            \"st_ymax(st_envelope(st_collect(the_geom))) ymax, \" +\n            \"st_xmin(st_envelope(st_collect(the_geom))) xmin, \" +\n            \"st_ymin(st_envelope(st_collect(the_geom))) ymin, \" +\n            \"{max_col} max, \" +\n            \"{min_col} min FROM  ({sql}) __torque_wrap_sql \" +\n        \")\" +\n        \"SELECT \" +\n        \"xmax, xmin, ymax, ymin, a.max as max_date, a.min as min_date, \" +\n        \"avg(diff) as diffavg,\" +\n        \"(a.max - a.min)/avg(diff) as num_steps \" +\n        \"FROM summary_groups, subq a  \" +\n        \"WHERE diff > 0 group by xmax, xmin, ymax, ymin, max_date, min_date\";\n        */\n        var sql_stats = \" SELECT \" +\n            \"st_xmax(st_envelope(st_collect(the_geom))) xmax, \" +\n            \"st_ymax(st_envelope(st_collect(the_geom))) ymax, \" +\n            \"st_xmin(st_envelope(st_collect(the_geom))) xmin, \" +\n            \"st_ymin(st_envelope(st_collect(the_geom))) ymin, \" +\n            \"count(*) as num_steps, \" +\n            \"{max_col} max_date, \" +\n            \"{min_col} min_date FROM  ({sql}) __torque_wrap_sql \";\n\n        var sql = format(sql_stats, {\n          max_col: max_col,\n          min_col: min_col,\n          column: column_conv,\n          sql: self.getSQL()\n        });\n\n        self.sql(sql, function(data) {\n          //TODO: manage bounds\n          data = data.rows[0];\n          self.options.start = data.min_date;\n          self.options.end = data.max_date;\n          self.options.step = (data.max_date - data.min_date)/Math.min(self.options.steps, data.num_steps>>0);\n          self.options.data_steps = data.num_steps >> 0;\n          // step can't be 0\n          self.options.step = self.options.step || 1;\n          self.options.bounds = [\n            [data.ymin, data.xmin],\n            [data.ymax, data.xmax]\n          ];\n          self._setReady(true);\n        }, { parseJSON: true, no_cdn: true });\n      }, { parseJSON: true, no_cdn: true})\n    }\n\n  };\n\nmodule.exports = json;\n",
    "var torque = require('../');\nvar Profiler = require('../profiler');\n\n  var Uint8Array = torque.types.Uint8Array;\n  var Int32Array = torque.types.Int32Array;\n  var Uint32Array = torque.types.Uint32Array;\n\n  // format('hello, {0}', 'rambo') -> \"hello, rambo\"\n  function format(str, attrs) {\n    for(var i = 1; i < arguments.length; ++i) {\n      var attrs = arguments[i];\n      for(var attr in attrs) {\n        str = str.replace(RegExp('\\\\{' + attr + '\\\\}', 'g'), attrs[attr]);\n      }\n    }\n    return str;\n  }\n\n  var json = function (options) {\n    // check options\n    this.options = options;\n  };\n\n\n  json.prototype = {\n\n    //\n    // return the data aggregated by key:\n    // {\n    //  key0: 12,\n    //  key1: 32\n    //  key2: 25\n    // }\n    //\n    aggregateByKey: function(rows) {\n      function getKeys(row) {\n        var HEADER_SIZE = 3;\n        var valuesCount = row.data[2];\n        var keys = {};\n        for (var s = 0; s < valuesCount; ++s) {\n          keys[row.data[HEADER_SIZE + s]] = row.data[HEADER_SIZE + valuesCount + s];\n        }\n        return keys;\n      }\n      var keys = {};\n      for (r = 0; r < rows.length; ++r) {\n        var rowKeys = getKeys(rows[r]);\n        for(var k in rowKeys) {\n          keys[k] = keys[k] || 0;\n          keys[k] += rowKeys[k];\n        }\n      }\n      return keys;\n    },\n    \n\n\n\n    /**\n     *\n     */\n    proccessTile: function(rows, coord, zoom) {\n      var r;\n      var x = new Uint8Array(rows.length);\n      var y = new Uint8Array(rows.length);\n      var self = this;\n\n      // decode into a javascript strcuture the array\n      function decode_row(row) {\n        var HEADER_SIZE = 3;\n        var o = {\n          x: row.data[0] * self.options.resolution,\n          y: row.data[1] * self.options.resolution,\n          valuesCount: row.data[2],\n          times: [],\n          values: []\n        };\n        for (var s = 0; s < o.valuesCount; ++s) {\n           o.times.push(row.data[HEADER_SIZE + s]);\n           o.values.push(row.data[HEADER_SIZE + o.valuesCount + s]);\n        }\n        if(self.options.cumulative) {\n          for (var s = 1; s < o.valuesCount; ++s) {\n           o.values[s] += o.values[s - 1];\n          }\n        }\n        return o\n      }\n\n      // decode all the rows\n      for (r = 0; r < rows.length; ++r) {\n        rows[r] = decode_row(rows[r]);\n      }\n\n      // count number of dates\n      var dates = 0;\n      var maxDateSlots = 0;\n      for (r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        dates += row.times.length;\n        for(var d = 0; d < row.times.length; ++d) {\n          maxDateSlots = Math.max(maxDateSlots, row.times[d]);\n        }\n      }\n\n      // reserve memory for all the dates\n      var timeIndex = new Int32Array(maxDateSlots + 1); //index-size\n      var timeCount = new Int32Array(maxDateSlots + 1);\n      var renderData = new (this.options.valueDataType || Uint8Array)(dates);\n      var renderDataPos = new Uint32Array(dates);\n\n      var rowsPerSlot = {};\n\n      // precache pixel positions\n      for (var r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        x[r] = row.x;\n        y[r] = row.y;\n\n        var dates = row.times;\n        var vals = row.values;\n        for (var j = 0, len = dates.length; j < len; ++j) {\n            var rr = rowsPerSlot[dates[j]] || (rowsPerSlot[dates[j]] = []);\n            rr.push([r, vals[j]]);\n        }\n      }\n\n      // for each timeslot search active buckets\n      var renderDataIndex = 0;\n      var timeSlotIndex = 0;\n      var i = 0;\n      for(var i = 0; i <= maxDateSlots; ++i) {\n        var c = 0;\n        var slotRows = rowsPerSlot[i]\n        if(slotRows) {\n          for (var r = 0; r < slotRows.length; ++r) {\n            var rr = slotRows[r];\n            ++c;\n            renderDataPos[renderDataIndex] = rr[0]\n            renderData[renderDataIndex] = rr[1];\n            ++renderDataIndex;\n          }\n        }\n        timeIndex[i] = timeSlotIndex;\n        timeCount[i] = c;\n        timeSlotIndex += c;\n      }\n\n      return {\n        x: x,\n        y: y,\n        coord: {\n          x: coord.x,\n          y: coord.y,\n          z: zoom\n        },\n        timeCount: timeCount,\n        timeIndex: timeIndex,\n        renderDataPos: renderDataPos,\n        renderData: renderData\n      };\n    },\n\n    url: function() {\n      return this.options.url;\n    },\n\n\n    tileUrl: function(coord, zoom) {\n      var template = this.url();\n      var s = (this.options.subdomains || 'abcd')[(coord.x + coord.y + zoom) % 4];\n      return template\n        .replace('{x}', coord.x)\n        .replace('{y}', coord.y)\n        .replace('{z}', zoom)\n        .replace('{s}', s);\n    },\n\n    getTile: function(coord, zoom, callback) {\n      var template = this.tileUrl(coord, zoom);\n\n      var self = this;\n      var fetchTime = Profiler.metric('jsonarray:fetch time');\n      fetchTime.start();\n      torque.net.get(template, function (data) {\n        fetchTime.end();\n        if(data) {\n          data = JSON.parse(data.responseText);\n        }\n        callback(data);\n      });\n    },\n\n    /**\n     * `coord` object like {x : tilex, y: tiley } \n     * `zoom` quadtree zoom level\n     */\n    getTileData: function(coord, zoom, callback) {\n      var template = this.tileUrl(coord, zoom);\n\n      var self = this;\n      var fetchTime = Profiler.metric('jsonarray:fetch time');\n      fetchTime.start();\n      torque.net.get(template, function (data) {\n        fetchTime.end();\n        var processed = null;\n        \n        var processingTime = Profiler.metric('jsonarray:processing time');\n        var parsingTime = Profiler.metric('jsonarray:parsing time');\n        try {\n          processingTime.start();\n          parsingTime.start();\n          var rows = JSON.parse(data.responseText || data.response).rows;\n          parsingTime.end();\n          processed = self.proccessTile(rows, coord, zoom);\n          processingTime.end();\n        } catch(e) {\n          console.error(\"problem parsing JSON on \", coord, zoom);\n        }\n\n        callback(processed);\n\n      });\n    }\n\n  };\n\n  module.exports = json;\n",
    "  var torque = require('../');\n\n  var Uint8Array = torque.types.Uint8Array;\n  var Int32Array = torque.types.Int32Array;\n  var Uint32Array = torque.types.Uint32Array;\n  var Uint8ClampedArray = torque.types.Uint8ClampedArray;\n\n  // format('hello, {0}', 'rambo') -> \"hello, rambo\"\n  function format(str) {\n    for(var i = 1; i < arguments.length; ++i) {\n      var attrs = arguments[i];\n      for(var attr in attrs) {\n        str = str.replace(RegExp('\\\\{' + attr + '\\\\}', 'g'), attrs[attr]);\n      }\n    }\n    return str;\n  }\n\n  var tileJSON = function (options) {\n    this._ready = false;\n    this._tileQueue = [];\n    this.options = options;\n\n    this.options.coordinates_data_type = this.options.coordinates_data_type || Uint8Array;\n\n    if (this.options.data_aggregation) {\n      this.options.cumulative = this.options.data_aggregation === 'cumulative';\n    }\n    if (this.options.auth_token) {\n      var e = this.options.extra_params || (this.options.extra_params = {});\n      e.auth_token = this.options.auth_token;\n    }\n    if (!this.options.no_fetch_map) {\n      this._fetchMap();\n    }\n  };\n\n  tileJSON.prototype = {\n\n    NAME: \"tileJSON\",\n\n    /**\n     * return the torque tile encoded in an efficient javascript\n     * structure:\n     * {\n     *   x:Uint8Array x coordinates in tile reference system, normally from 0-255\n     *   y:Uint8Array y coordinates in tile reference system\n     *   Index: Array index to the properties\n     * }\n     */\n    proccessTile: function(rows, coord, zoom) {\n      var r;\n      var x = new this.options.coordinates_data_type(rows.length);\n      var y = new this.options.coordinates_data_type(rows.length);\n\n      // count number of dates\n      var dates = 0;\n      var maxDateSlots = -1;\n      for (r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        dates += row.dates__uint16.length;\n        for(var d = 0; d < row.dates__uint16.length; ++d) {\n          maxDateSlots = Math.max(maxDateSlots, row.dates__uint16[d]);\n        }\n      }\n\n      if(this.options.cumulative) {\n        dates = (1 + maxDateSlots) * rows.length;\n      }\n\n      var type = this.options.cumulative ? Uint32Array: Uint8ClampedArray;\n\n      // reserve memory for all the dates\n      var timeIndex = new Int32Array(maxDateSlots + 1); //index-size\n      var timeCount = new Int32Array(maxDateSlots + 1);\n      var renderData = new (this.options.valueDataType || type)(dates);\n      var renderDataPos = new Uint32Array(dates);\n\n      var rowsPerSlot = {};\n\n      // precache pixel positions\n      for (var r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        x[r] = row.x__uint8 * this.options.resolution;\n        y[r] = row.y__uint8 * this.options.resolution;\n\n        var dates = row.dates__uint16;\n        var vals = row.vals__uint8;\n        if (!this.options.cumulative) {\n          for (var j = 0, len = dates.length; j < len; ++j) {\n              var rr = rowsPerSlot[dates[j]] || (rowsPerSlot[dates[j]] = []);\n              if(this.options.cumulative) {\n                  vals[j] += prev_val;\n              }\n              prev_val = vals[j];\n              rr.push([r, vals[j]]);\n          }\n        } else {\n          var valByDate = {}\n          for (var j = 0, len = dates.length; j < len; ++j) {\n            valByDate[dates[j]] = vals[j];\n          }\n          var accum = 0;\n\n          // extend the latest to the end\n          for (var j = dates[0]; j <= maxDateSlots; ++j) {\n              var rr = rowsPerSlot[j] || (rowsPerSlot[j] = []);\n              var v = valByDate[j];\n              if (v) {\n                accum += v;\n              }\n              rr.push([r, accum]);\n          }\n        }\n      }\n\n      // for each timeslot search active buckets\n      var renderDataIndex = 0;\n      var timeSlotIndex = 0;\n      var i = 0;\n      for(var i = 0; i <= maxDateSlots; ++i) {\n        var c = 0;\n        var slotRows = rowsPerSlot[i]\n        if(slotRows) {\n          for (var r = 0; r < slotRows.length; ++r) {\n            var rr = slotRows[r];\n            ++c;\n            renderDataPos[renderDataIndex] = rr[0]\n            renderData[renderDataIndex] = rr[1];\n            ++renderDataIndex;\n          }\n        }\n        timeIndex[i] = timeSlotIndex;\n        timeCount[i] = c;\n        timeSlotIndex += c;\n      }\n\n      return {\n        x: x,\n        y: y,\n        z: zoom,\n        coord: {\n          x: coord.x,\n          y: coord.y,\n          z: zoom\n        },\n        timeCount: timeCount,\n        timeIndex: timeIndex,\n        renderDataPos: renderDataPos,\n        renderData: renderData,\n        maxDate: maxDateSlots\n      };\n    },\n\n    setSteps: function(steps, opt) { \n      opt = opt || {};\n      if (this.options.steps !== steps) {\n        this.options.steps = steps;\n        this.options.step = (this.options.end - this.options.start)/this.getSteps();\n        this.options.step = this.options.step || 1;\n        if (!opt.silent) this.reload();\n      }\n    },\n\n    setOptions: function(opt) {\n      var refresh = false;\n\n      if(opt.resolution !== undefined && opt.resolution !== this.options.resolution) {\n        this.options.resolution = opt.resolution;\n        refresh = true;\n      }\n\n      if(opt.steps !== undefined && opt.steps !== this.options.steps) {\n        this.setSteps(opt.steps, { silent: true });\n        refresh = true;\n      }\n\n      if(opt.column !== undefined && opt.column !== this.options.column) {\n        this.options.column = opt.column;\n        refresh = true;\n      }\n\n      if(opt.countby !== undefined && opt.countby !== this.options.countby) {\n        this.options.countby = opt.countby;\n        refresh = true;\n      }\n\n      if(opt.data_aggregation !== undefined) {\n        var c = opt.data_aggregation === 'cumulative';\n        if (this.options.cumulative !== c) {\n          this.options.cumulative = c;\n          refresh = true;\n        }\n      }\n\n      if (refresh) this.reload();\n      return refresh;\n    },\n\n    _extraParams: function(e) {\n      e = torque.extend(torque.extend({}, e), this.options.extra_params);\n      if (e) {\n        var p = [];\n        for(var k in e) {\n          var v = e[k];\n          if (v) {\n            if (torque.isArray(v)) {\n              for (var i = 0, len = v.length; i < len; i++) {\n                p.push(k + \"[]=\" + encodeURIComponent(v[i]));\n              }\n            } else {\n              p.push(k + \"=\" + encodeURIComponent(v));\n            }\n          }\n        }\n        return p.join('&');\n      }\n      return null;\n    },\n\n    getTileData: function(coord, zoom, callback) {\n      if(!this._ready) {\n        this._tileQueue.push([coord, zoom, callback]);\n      } else {\n        this._getTileData(coord, zoom, callback);\n      }\n    },\n\n    _setReady: function(ready) {\n      this._ready = true;\n      this._processQueue();\n      this.options.ready && this.options.ready();\n    },\n\n    _processQueue: function() {\n      var item;\n      while (item = this._tileQueue.pop()) {\n        this._getTileData.apply(this, item);\n      }\n    },\n\n    /**\n     * `coord` object like {x : tilex, y: tiley }\n     * `zoom` quadtree zoom level\n     */\n    _getTileData: function(coord, zoom, callback) {\n      var self = this;\n      var subdomains = this.options.subdomains || '0123';\n      var limit_x = Math.pow(2, zoom);\n      var corrected_x = ((coord.x % limit_x) + limit_x) % limit_x;\n      var index = Math.abs(corrected_x + coord.y) % subdomains.length;\n      var extra = this._extraParams();\n      var url = this.templateUrl\n                .replace('{x}', corrected_x)\n                .replace('{y}', coord.y)\n                .replace('{z}', zoom)\n                .replace('{s}', subdomains[index])\n      url += extra;\n      torque.net.get( url , function (data) {\n        if (data && data.responseText) {\n          var rows = JSON.parse(data.responseText);\n          callback(self.proccessTile(rows, coord, zoom));\n        } else {\n          callback(null);\n        }\n      });\n    },\n\n    getKeySpan: function() {\n      return {\n        start: this.options.start,\n        end: this.options.end,\n        step: this.options.step,\n        steps: this.options.steps,\n        columnType: this.options.column_type\n      };\n    },\n\n    setColumn: function(column, isTime) {\n      this.options.column = column;\n      this.options.is_time = isTime === undefined ? true: false;\n      this.reload();\n    },\n\n    reload: function() {\n      this._ready = false;\n      this._fetchMap();\n    },\n\n    getSteps: function() {\n      return Math.min(this.options.steps, this.options.data_steps);\n    },\n\n    getBounds: function() {\n      return this.options.bounds;\n    },\n\n    getSQL: function() {\n      return this.options.sql || \"select * from \" + this.options.table;\n    },\n\n    setSQL: function(sql) {\n      if (this.options.sql != sql) {\n        this.options.sql = sql;\n        this.reload();\n      }\n    },\n\n    _isUserTemplateUrl: function(t) {\n      return t && t.indexOf('{user}') !== -1;\n    },\n\n    isHttps: function() {\n      return this.options.maps_api_template.indexOf('https') === 0;\n    },\n\n    _fetchMap: function(callback) {\n      var self = this;\n      torque.net.get(this.options.tileJSON, function (data) {\n        data = JSON.parse(data.response);\n        if (data) {\n          if (data.errors){\n            self.options.errorCallback && self.options.errorCallback(data.errors);\n            return;\n          }\n          for(var k in data) {\n            self.options[k] = data[k];\n          }\n          self.templateUrl = data.tiles[0];\n          if (self.templateUrl.indexOf(\"http\") !== 0){\n            self.templateUrl = self.options.tileJSON.substring(0, self.options.tileJSON.lastIndexOf(\"/\") + 1) + self.templateUrl;\n          }\n          self._setReady(true);\n        }\n      });\n    }\n  };\n\n  module.exports = tileJSON;",
    "  var torque = require('../');\n  var Profiler = require('../profiler');\n\n  var Uint8Array = torque.types.Uint8Array;\n  var Int32Array = torque.types.Int32Array;\n  var Uint32Array = torque.types.Uint32Array;\n  var Uint8ClampedArray = torque.types.Uint8ClampedArray;\n\n  // format('hello, {0}', 'rambo') -> \"hello, rambo\"\n  function format(str) {\n    for(var i = 1; i < arguments.length; ++i) {\n      var attrs = arguments[i];\n      for(var attr in attrs) {\n        str = str.replace(RegExp('\\\\{' + attr + '\\\\}', 'g'), attrs[attr]);\n      }\n    }\n    return str;\n  }\n\n  var windshaft = function (options) {\n    this._ready = false;\n    this._tileQueue = [];\n    this.options = options;\n\n    this.options.is_time = this.options.is_time === undefined ? true: this.options.is_time;\n    this.options.tiler_protocol = options.tiler_protocol || 'http';\n    this.options.tiler_domain = options.tiler_domain || 'cartodb.com';\n    this.options.tiler_port = options.tiler_port || 80;\n\n    // backwards compatible\n    if (!options.maps_api_template) {\n      this._buildMapsApiTemplate(this.options);\n    } else {\n      this.options.maps_api_template =  options.maps_api_template;\n    }\n\n    this.options.coordinates_data_type = this.options.coordinates_data_type || Uint8Array;\n\n    if (this.options.data_aggregation) {\n      this.options.cumulative = this.options.data_aggregation === 'cumulative';\n    }\n    if (this.options.auth_token) {\n      var e = this.options.extra_params || (this.options.extra_params = {});\n      e.auth_token = this.options.auth_token;\n    }\n    if (!this.options.no_fetch_map) {\n      this._fetchMap();\n    }\n  };\n\n  windshaft.prototype = {\n\n    /**\n     * return the torque tile encoded in an efficient javascript\n     * structure:\n     * {\n     *   x:Uint8Array x coordinates in tile reference system, normally from 0-255\n     *   y:Uint8Array y coordinates in tile reference system\n     *   Index: Array index to the properties\n     * }\n     */\n    proccessTile: function(rows, coord, zoom) {\n      var r;\n      var x = new this.options.coordinates_data_type(rows.length);\n      var y = new this.options.coordinates_data_type(rows.length);\n\n      var prof_mem = Profiler.metric('torque.provider.windshaft.mem');\n      var prof_point_count = Profiler.metric('torque.provider.windshaft.points');\n      var prof_process_time = Profiler.metric('torque.provider.windshaft.process_time').start();\n\n      // count number of dates\n      var dates = 0;\n      var maxDateSlots = -1;\n      for (r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        dates += row.dates__uint16.length;\n        for(var d = 0; d < row.dates__uint16.length; ++d) {\n          maxDateSlots = Math.max(maxDateSlots, row.dates__uint16[d]);\n        }\n      }\n\n      if(this.options.cumulative) {\n        dates = (1 + maxDateSlots) * rows.length;\n      }\n\n      var type = this.options.cumulative ? Uint32Array: Uint8ClampedArray;\n\n      // reserve memory for all the dates\n      var timeIndex = new Int32Array(maxDateSlots + 1); //index-size\n      var timeCount = new Int32Array(maxDateSlots + 1);\n      var renderData = new (this.options.valueDataType || type)(dates);\n      var renderDataPos = new Uint32Array(dates);\n\n      prof_mem.inc(\n        4 * maxDateSlots + // timeIndex\n        4 * maxDateSlots + // timeCount\n        dates + //renderData\n        dates * 4\n      ); //renderDataPos\n\n      prof_point_count.inc(rows.length);\n\n      var rowsPerSlot = {};\n\n      // precache pixel positions\n      for (var r = 0; r < rows.length; ++r) {\n        var row = rows[r];\n        x[r] = row.x__uint8 * this.options.resolution;\n        y[r] = row.y__uint8 * this.options.resolution;\n\n        var dates = row.dates__uint16;\n        var vals = row.vals__uint8;\n        if (!this.options.cumulative) {\n          for (var j = 0, len = dates.length; j < len; ++j) {\n              var rr = rowsPerSlot[dates[j]] || (rowsPerSlot[dates[j]] = []);\n              if(this.options.cumulative) {\n                  vals[j] += prev_val;\n              }\n              prev_val = vals[j];\n              rr.push([r, vals[j]]);\n          }\n        } else {\n          var valByDate = {}\n          for (var j = 0, len = dates.length; j < len; ++j) {\n            valByDate[dates[j]] = vals[j];\n          }\n          var accum = 0;\n\n          // extend the latest to the end\n          for (var j = dates[0]; j <= maxDateSlots; ++j) {\n              var rr = rowsPerSlot[j] || (rowsPerSlot[j] = []);\n              var v = valByDate[j];\n              if (v) {\n                accum += v;\n              }\n              rr.push([r, accum]);\n          }\n\n          /*var lastDateSlot = dates[dates.length - 1];\n          for (var j = lastDateSlot + 1; j <= maxDateSlots; ++j) {\n            var rr = rowsPerSlot[j] || (rowsPerSlot[j] = []);\n            rr.push([r, prev_val]);\n          }\n          */\n        }\n\n      }\n\n      // for each timeslot search active buckets\n      var renderDataIndex = 0;\n      var timeSlotIndex = 0;\n      var i = 0;\n      for(var i = 0; i <= maxDateSlots; ++i) {\n        var c = 0;\n        var slotRows = rowsPerSlot[i]\n        if(slotRows) {\n          for (var r = 0; r < slotRows.length; ++r) {\n            var rr = slotRows[r];\n            ++c;\n            renderDataPos[renderDataIndex] = rr[0]\n            renderData[renderDataIndex] = rr[1];\n            ++renderDataIndex;\n          }\n        }\n        timeIndex[i] = timeSlotIndex;\n        timeCount[i] = c;\n        timeSlotIndex += c;\n      }\n\n      prof_process_time.end();\n\n      return {\n        x: x,\n        y: y,\n        z: zoom,\n        coord: {\n          x: coord.x,\n          y: coord.y,\n          z: zoom\n        },\n        timeCount: timeCount,\n        timeIndex: timeIndex,\n        renderDataPos: renderDataPos,\n        renderData: renderData,\n        maxDate: maxDateSlots\n      };\n    },\n\n    /*setCartoCSS: function(c) {\n      this.options.cartocss = c;\n    },*/\n\n    setSteps: function(steps, opt) { \n      opt = opt || {};\n      if (this.options.steps !== steps) {\n        this.options.steps = steps;\n        this.options.step = (this.options.end - this.options.start)/this.getSteps();\n        this.options.step = this.options.step || 1;\n        if (!opt.silent) this.reload();\n      }\n    },\n\n    setOptions: function(opt) {\n      var refresh = false;\n\n      if(opt.resolution !== undefined && opt.resolution !== this.options.resolution) {\n        this.options.resolution = opt.resolution;\n        refresh = true;\n      }\n\n      if(opt.steps !== undefined && opt.steps !== this.options.steps) {\n        this.setSteps(opt.steps, { silent: true });\n        refresh = true;\n      }\n\n      if(opt.column !== undefined && opt.column !== this.options.column) {\n        this.options.column = opt.column;\n        refresh = true;\n      }\n\n      if(opt.countby !== undefined && opt.countby !== this.options.countby) {\n        this.options.countby = opt.countby;\n        refresh = true;\n      }\n\n      if(opt.data_aggregation !== undefined) {\n        var c = opt.data_aggregation === 'cumulative';\n        if (this.options.cumulative !== c) {\n          this.options.cumulative = c;\n          refresh = true;\n        }\n      }\n\n      if (refresh) this.reload();\n      return refresh;\n    },\n\n    _extraParams: function(e) {\n      e = torque.extend(torque.extend({}, e), this.options.extra_params);\n      if (e) {\n        var p = [];\n        for(var k in e) {\n          var v = e[k];\n          if (v) {\n            if (torque.isArray(v)) {\n              for (var i = 0, len = v.length; i < len; i++) {\n                p.push(k + \"[]=\" + encodeURIComponent(v[i]));\n              }\n            } else {\n              p.push(k + \"=\" + encodeURIComponent(v));\n            }\n          }\n        }\n        return p.join('&');\n      }\n      return null;\n    },\n\n    getTileData: function(coord, zoom, callback) {\n      if(!this._ready) {\n        this._tileQueue.push([coord, zoom, callback]);\n      } else {\n        this._getTileData(coord, zoom, callback);\n      }\n    },\n\n    _setReady: function(ready) {\n      this._ready = true;\n      this._processQueue();\n      this.options.ready && this.options.ready();\n    },\n\n    _processQueue: function() {\n      var item;\n      while (item = this._tileQueue.pop()) {\n        this._getTileData.apply(this, item);\n      }\n    },\n\n    /**\n     * `coord` object like {x : tilex, y: tiley }\n     * `zoom` quadtree zoom level\n     */\n    _getTileData: function(coord, zoom, callback) {\n      var self = this;\n      var prof_fetch_time = Profiler.metric('torque.provider.windshaft.tile.fetch').start();\n      var subdomains = this.options.subdomains || '0123';\n      var limit_x = Math.pow(2, zoom);\n      var corrected_x = ((coord.x % limit_x) + limit_x) % limit_x;\n      var index = Math.abs(corrected_x + coord.y) % subdomains.length;\n      var url = this.templateUrl\n                .replace('{x}', corrected_x)\n                .replace('{y}', coord.y)\n                .replace('{z}', zoom)\n                .replace('{s}', subdomains[index])\n\n      var extra = this._extraParams();\n      torque.net.get( url + (extra ? \"?\" + extra: ''), function (data) {\n        prof_fetch_time.end();\n        if (data && data.responseText) {\n          var rows = JSON.parse(data.responseText);\n          callback(self.proccessTile(rows, coord, zoom));\n        } else {\n          Profiler.metric('torque.provider.windshaft.tile.error').inc();\n          callback(null);\n        }\n      });\n    },\n\n    getKeySpan: function() {\n      return {\n        start: this.options.start,\n        end: this.options.end,\n        step: this.options.step,\n        steps: this.options.steps,\n        columnType: this.options.column_type\n      };\n    },\n\n    setColumn: function(column, isTime) {\n      this.options.column = column;\n      this.options.is_time = isTime === undefined ? true: false;\n      this.reload();\n    },\n\n    reload: function() {\n      this._ready = false;\n      this._fetchMap();\n    },\n\n    getSteps: function() {\n      return Math.min(this.options.steps, this.options.data_steps);\n    },\n\n    getBounds: function() {\n      return this.options.bounds;\n    },\n\n    getSQL: function() {\n      return this.options.sql || \"select * from \" + this.options.table;\n    },\n\n    setSQL: function(sql) {\n      if (this.options.sql != sql) {\n        this.options.sql = sql;\n        this.reload();\n      }\n    },\n\n    _buildMapsApiTemplate: function(opts) {\n       var user = opts.user_name || opts.user;\n       opts.maps_api_template = opts.tiler_protocol +\n           \"://\" + ((user) ? \"{user}.\":\"\")  +\n           opts.tiler_domain +\n           ((opts.tiler_port != \"\") ? (\":\" + opts.tiler_port) : \"\");\n    },\n\n    _tilerHost: function() {\n      var opts = this.options;\n      var user = opts.user_name || opts.user;\n      return opts.maps_api_template.replace('{user}', user);\n    },\n\n    url: function () {\n      var opts = this.options;\n      var cdn_host = opts.cdn_url;\n      var has_empty_cdn = !cdn_host || (cdn_host && (!cdn_host.http && !cdn_host.https));\n\n      if (opts.no_cdn || has_empty_cdn) {\n        return this._tilerHost();\n      } else {\n        var protocol = this.isHttps() ? 'https': 'http';\n        var h = protocol + \"://\";\n        if (!this.isHttps()) {\n          h += \"{s}.\";\n        }\n        var cdn_url = cdn_host[protocol];\n        // build default template url if the cdn url is not templatized\n        // this is for backwards compatiblity, ideally we should use the url\n        // that tiler sends to us right away\n        if (!this._isUserTemplateUrl(cdn_url)) {\n          cdn_url = cdn_url  + \"/{user}\";\n        }\n        var user = opts.user_name || opts.user;\n        h += cdn_url.replace('{user}', user)\n        return h;\n      }\n\n    },\n\n    _isUserTemplateUrl: function(t) {\n      return t && t.indexOf('{user}') !== -1;\n    },\n\n    isHttps: function() {\n      return this.options.maps_api_template.indexOf('https') === 0;\n    },\n\n    _generateCartoCSS: function() {\n      var attr = {\n        '-torque-frame-count': this.options.steps,\n        '-torque-resolution': this.options.resolution,\n        '-torque-aggregation-function': \"'\" + this.options.countby + \"'\",\n        '-torque-time-attribute': \"'\" + this.options.column + \"'\",\n        '-torque-data-aggregation': this.options.cumulative ? 'cumulative': 'linear',\n      };\n      var st = 'Map{';\n      for (var k in attr) {\n        st += k + \":\" + attr[k] + \";\";\n      }\n      return st + \"}\";\n    },\n\n    _fetchMap: function(callback) {\n      var self = this;\n      var layergroup = {};\n      var host = this.options.dynamic_cdn ? this.url().replace('{s}', '0'): this._tilerHost();\n      var url = host + \"/api/v1/map\";\n      var named = this.options.named_map;\n      var allParams = {};\n\n      if(named) {\n        //tiles/template\n        url = host + \"/api/v1/map/named/\" + named.name + \"/jsonp\";\n        if(typeof named.params !== \"undefined\"){\n          layergroup = named.params;\n        }\n      } else {\n        layergroup = {\n          \"version\": \"1.0.1\",\n          \"stat_tag\": this.options.stat_tag || 'torque',\n          \"layers\": [{\n            \"type\": \"torque\",\n            \"options\": {\n              \"cartocss_version\": \"1.0.0\",\n              \"cartocss\": this._generateCartoCSS(),\n              \"sql\": this.getSQL()\n            }\n          }]\n        };\n      }\n      \n      if(this.options.stat_tag){\n        allParams[\"stat_tag\"] = this.options.stat_tag;\n      }\n\n      extra = this._extraParams(allParams);\n\n      // tiler needs map_key instead of api_key\n      // so replace it\n      if (extra) {\n        extra = extra.replace('api_key=', 'map_key=');\n      }\n\n      url = url +\n        \"?config=\" + encodeURIComponent(JSON.stringify(layergroup)) +\n        \"&callback=?\" + (extra ? \"&\" + extra: '');\n\n      var map_instance_time = Profiler.metric('torque.provider.windshaft.layergroup.time').start();\n      torque.net.jsonp(url, function (data) {\n        map_instance_time.end();\n        if (data) {\n          if (data.errors){\n            self.options.errorCallback && self.options.errorCallback(data.errors);\n            return;\n          }\n          var torque_key = Object.keys(data.metadata.torque)[0]\n          var opt = data.metadata.torque[torque_key];\n          for(var k in opt) {\n            self.options[k] = opt[k];\n          }\n          // use cdn_url if present\n          if (data.cdn_url) {\n            var c = self.options.cdn_url = self.options.cdn_url || {};\n            c.http = data.cdn_url.http || c.http;\n            c.https = data.cdn_url.https || c.https;\n          }\n          self.templateUrl = self.url() + \"/api/v1/map/\" + data.layergroupid + \"/\" + torque_key + \"/{z}/{x}/{y}.json.torque\";\n          self._setReady(true);\n        } else {\n          Profiler.metric('torque.provider.windshaft.layergroup.error').inc();\n        }\n      }, { callbackName: self.options.instanciateCallback });\n    }\n\n  };\n\n  module.exports = windshaft;\n",
    "  var TAU = Math.PI*2;\n  // min value to render a line. \n  // it does not make sense to render a line of a width is not even visible\n  var LINEWIDTH_MIN_VALUE = 0.05; \n  var MAX_SPRITE_RADIUS = 255;\n\n  function renderPoint(ctx, st) {\n    ctx.fillStyle = st['marker-fill'];\n    var pixel_size = st['marker-width'];\n\n    // render a circle\n    // TODO: fill and stroke order should depend on the order of the properties\n    // in the cartocss.\n\n    // fill\n    ctx.beginPath();\n    ctx.arc(0, 0, pixel_size, 0, TAU, true, true);\n    ctx.closePath();\n\n    if (st['marker-opacity'] !== undefined )  st['marker-fill-opacity'] = st['marker-line-opacity'] = st['marker-opacity'];\n\n    if (st['marker-fill']) {\n        ctx.globalAlpha = st['marker-fill-opacity'] >= 0? st['marker-fill-opacity']: 1;\n\n      if (ctx.globalAlpha > 0) {\n        ctx.fill();\n      }\n    }\n\n    // stroke\n    if (st['marker-line-color'] && st['marker-line-width'] && st['marker-line-width'] > LINEWIDTH_MIN_VALUE) {\n      ctx.globalAlpha = st['marker-line-opacity'] >= 0? st['marker-line-opacity']: 1;\n      if (st['marker-line-width'] !== undefined) {\n        ctx.lineWidth = st['marker-line-width'];\n      }\n      ctx.strokeStyle = st['marker-line-color'];\n\n      // do not render for alpha = 0\n      if (ctx.globalAlpha > 0) {\n        ctx.stroke();\n      }\n    }\n  }\n\n  function renderRectangle(ctx, st) {\n    ctx.fillStyle = st['marker-fill'];\n    var pixel_size = st['marker-width'];\n    var w = pixel_size * 2;\n\n    // fill\n    if (st['marker-fill']) {\n      if (st['marker-fill-opacity'] !== undefined || st['marker-opacity'] !== undefined) {\n        ctx.globalAlpha = st['marker-fill-opacity'] || st['marker-opacity'];\n      }\n      ctx.fillRect(-pixel_size, -pixel_size, w, w)\n    }\n\n    // stroke\n    ctx.globalAlpha = 1.0;\n    if (st['marker-line-color'] && st['marker-line-width']) {\n      if (st['marker-line-opacity']) {\n        ctx.globalAlpha = st['marker-line-opacity'];\n      }\n      if (st['marker-line-width']) {\n        ctx.lineWidth = st['marker-line-width'];\n      }\n      ctx.strokeStyle = st['marker-line-color'];\n\n      // do not render for alpha = 0\n      if (ctx.globalAlpha > 0) {\n        ctx.strokeRect(-pixel_size, -pixel_size, w, w)\n      }\n    }\n  }\n\n  function renderSprite(ctx, img, st) {\n\n    if(img.complete){\n      if (st['marker-fill-opacity'] !== undefined || st['marker-opacity'] !== undefined) {\n        ctx.globalAlpha = st['marker-fill-opacity'] || st['marker-opacity'];\n      }\n      ctx.drawImage(img, 0, 0, Math.min(img.width, MAX_SPRITE_RADIUS), Math.min(img.height, MAX_SPRITE_RADIUS));\n    }\n  }\n\nmodule.exports = {\n    renderPoint: renderPoint,\n    renderSprite: renderSprite,\n    renderRectangle: renderRectangle,\n    MAX_SPRITE_RADIUS: MAX_SPRITE_RADIUS\n};\n",
    "module.exports = {\n    cartocss: require('./cartocss_render'),\n    Point: require('./point'),\n    Rectangle: require('./rectangle')\n};",
    "var torque = require('../');\nvar cartocss = require('./cartocss_render');\nvar Profiler = require('../profiler');\nvar carto = global.carto || require('carto');\nvar Filters = require('./torque_filters');\n\n  var TAU = Math.PI * 2;\n  var DEFAULT_CARTOCSS = [\n    '#layer {',\n    '  marker-fill: #662506;',\n    '  marker-width: 4;',\n    '  [value > 1] { marker-fill: #FEE391; }',\n    '  [value > 2] { marker-fill: #FEC44F; }',\n    '  [value > 3] { marker-fill: #FE9929; }',\n    '  [value > 4] { marker-fill: #EC7014; }',\n    '  [value > 5] { marker-fill: #CC4C02; }',\n    '  [value > 6] { marker-fill: #993404; }',\n    '  [value > 7] { marker-fill: #662506; }',\n    '}'\n  ].join('\\n');\n\n  var COMP_OP_TO_CANVAS = {\n    \"src\": 'source-over',\n    \"src-over\": 'source-over',\n    \"dst-over\": 'destination-over',\n    \"src-in\": 'source-in',\n    \"dst-in\": 'destination-in',\n    \"src-out\": 'source-out',\n    \"dst-out\": 'destination-out',\n    \"src-atop\": 'source-atop',\n    \"dst-atop\": 'destination-atop',\n    \"xor\": 'xor',\n    \"darken\": 'darken',\n    \"lighten\": 'lighten'\n  }\n\n  function compop2canvas(compop) {\n    return COMP_OP_TO_CANVAS[compop] || compop;\n  }\n\n  //\n  // this renderer just render points depending of the value\n  //\n  function PointRenderer(canvas, options) {\n    if (!canvas) {\n      throw new Error(\"canvas can't be undefined\");\n    }\n    this.options = options;\n    this._canvas = canvas;\n    this._ctx = canvas.getContext('2d');\n    this._sprites = []; // sprites per layer\n    this._shader = null;\n    this._icons = {};\n    this._iconsToLoad = 0;\n    this._filters = new Filters(this._canvas, {canvasClass: options.canvasClass});\n    this.setCartoCSS(this.options.cartocss || DEFAULT_CARTOCSS);\n    this.TILE_SIZE = 256;\n    this._style = null;\n    this._gradients = {};\n    \n    this._forcePoints = false;\n  }\n\n  torque.extend(PointRenderer.prototype, torque.Event, {\n\n    clearCanvas: function() {\n      var canvas = this._canvas;\n      var color = this._Map['-torque-clear-color']\n      // shortcut for the default value\n      if (color  === \"rgba(255, 255, 255, 0)\" || !color) {\n        this._canvas.width = this._canvas.width;\n      } else {\n        var ctx = this._ctx;\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        var compop = this._Map['comp-op']\n        ctx.globalCompositeOperation = compop2canvas(compop);\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n      }\n    },\n\n    setCanvas: function(canvas) {\n      this._canvas = canvas;\n      this._ctx = canvas.getContext('2d');\n    },\n\n    //\n    // sets the cartocss style to render stuff\n    //\n    setCartoCSS: function(cartocss) {\n      // clean sprites\n      this.setShader(new carto.RendererJS().render(cartocss));\n    },\n\n    setShader: function(shader) {\n      // clean sprites\n      this._sprites = [];\n      this._shader = shader;\n      this._Map = this._shader.getDefault().getStyle({}, { zoom: 0 });\n      var img_names = this._shader.getImageURLs();\n      this._preloadIcons(img_names);\n    },\n\n    clearSpriteCache: function() {\n      this._sprites = [];\n    },\n\n\n    //\n    // generate sprite based on cartocss style\n    //\n    generateSprite: function(shader, value, shaderVars) {\n      var self = this;\n      var prof = Profiler.metric('torque.renderer.point.generateSprite').start();\n      var st = shader.getStyle({\n        value: value\n      }, shaderVars);\n      if(this._style === null || this._style !== st){\n        this._style = st;\n      }\n\n      var pointSize = st['marker-width'];\n      if (!pointSize) {\n        return null;\n      }\n\n      if (st['marker-opacity'] === 0 && !st['marker-line-opacity']) {\n        return null;\n      }\n\n      var canvas = this._createCanvas();\n      var ctx = canvas.getContext('2d');\n\n      var markerFile = st[\"marker-file\"] || st[\"point-file\"];\n      var qualifiedUrl = markerFile && this._qualifyURL(markerFile);\n\n      if (qualifiedUrl && this._iconsToLoad <= 0 && this._icons[qualifiedUrl]) {\n        var img = this._icons[qualifiedUrl];\n\n        var dWidth =  Math.min(st['marker-width'] * 2 || img.width, cartocss.MAX_SPRITE_RADIUS * 2);\n        var dHeight = Math.min((st['marker-height'] || dWidth) * (img.width / img.height), cartocss.MAX_SPRITE_RADIUS * 2);\n\n        canvas.width = ctx.width = dWidth;\n        canvas.height = ctx.height = dHeight;\n\n        ctx.scale(dWidth/img.width, dHeight/img.height);\n\n        cartocss.renderSprite(ctx, img, st);\n      } else {\n        // take into account the exterior ring to calculate the size\n        var canvasSize = (st['marker-line-width'] || 0) + pointSize*2;\n        var w = ctx.width = canvas.width = ctx.height = canvas.height = Math.ceil(canvasSize);\n        ctx.translate(w/2, w/2);\n\n        var mt = st['marker-type'];\n        if (mt && mt === 'rectangle') {\n          cartocss.renderRectangle(ctx, st);\n        } else {\n          cartocss.renderPoint(ctx, st);\n        }\n      }\n      prof.end(true);\n      if (torque.flags.sprites_to_images) {\n        var i = this._createImage();\n        i.src = canvas.toDataURL();\n        return i;\n      }\n      \n      return canvas;\n    },\n\n    //\n    // renders all the layers (and frames for each layer) from cartocss\n    //\n    renderTile: function(tile, keys, callback) {\n      if (this._iconsToLoad > 0) {\n          this.on('allIconsLoaded', function() {\n              this.renderTile.apply(this, [tile, keys, callback]);\n          });\n          return false;\n      }\n\n      // convert scalar key to keys array\n      if (typeof keys.length === 'undefined') {\n        keys = [keys];\n      }\n\n      var prof = Profiler.metric('torque.renderer.point.renderLayers').start();\n      var layers = this._shader.getLayers();\n      for(var i = 0, n = layers.length; i < n; ++i ) {\n        var layer = layers[i];\n        if (layer.name() !== \"Map\") {\n          var sprites = this._sprites[i] || (this._sprites[i] = {});\n          // frames for each layer\n          for(var fr = 0; fr < layer.frames().length; ++fr) {\n            var frame = layer.frames()[fr];\n            var fr_sprites = sprites[frame] || (sprites[frame] = []);\n            for (var k = 0, len = keys.length; k < len; k++) {\n              this._renderTile(tile, keys[k] - frame, frame, fr_sprites, layer);\n            }\n          }\n        }\n      }\n      \n      prof.end(true);\n\n      return callback && callback(null);\n    },\n\n    _createCanvas: function() {\n      return this.options.canvasClass\n        ? new this.options.canvasClass()\n        : document.createElement('canvas');\n    },\n\n    _createImage: function() {\n      return this.options.imageClass\n        ? new this.options.imageClass()\n        : new Image();\n    },\n\n    _setImageSrc: function(img, url, callback) {\n      if (this.options.setImageSrc) {\n        this.options.setImageSrc(img, url, callback);\n      } else {\n        img.onload = function(){\n            callback(null);\n        };\n        img.onerror = function(){\n            callback(new Error('Could not load image'));\n        };\n        img.src = url;\n      }\n    },\n\n    _qualifyURL: function(url) {\n      if (typeof this.options.qualifyURL !== \"undefined\"){\n        return this.options.qualifyURL(url);\n      }\n      else{\n        var a = document.createElement('a');\n        a.href = url;\n        return a.href;\n      }\n    },\n\n    //\n    // renders a tile in the canvas for key defined in \n    // the torque tile\n    //\n    _renderTile: function(tile, key, frame_offset, sprites, shader, shaderVars) {\n      if (!this._canvas) return;\n\n      var prof = Profiler.metric('torque.renderer.point.renderTile').start();\n      var ctx = this._ctx;\n      var blendMode = compop2canvas(shader.eval('comp-op')) || this.options.blendmode;\n      if (blendMode) {\n        ctx.globalCompositeOperation = blendMode;\n      }\n      if (this.options.cumulative && key > tile.maxDate) {\n        //TODO: precache because this tile is not going to change\n        key = tile.maxDate;\n      }\n      var tileMax = this.options.resolution * (this.TILE_SIZE/this.options.resolution - 1)\n      var activePixels = tile.timeCount[key];\n      var anchor = this.options.resolution/2;\n      if (activePixels) {\n        var pixelIndex = tile.timeIndex[key];\n        for(var p = 0; p < activePixels; ++p) {\n          var posIdx = tile.renderDataPos[pixelIndex + p];\n          var c = tile.renderData[pixelIndex + p];\n          if (c) {\n           var sp = sprites[c];\n           if (sp === undefined) {\n             sp = sprites[c] = this.generateSprite(shader, c, torque.extend({ zoom: tile.z, 'frame-offset': frame_offset }, shaderVars));\n           }\n           if (sp) {\n             var x = tile.x[posIdx]- (sp.width >> 1) + anchor;\n             var y = tileMax - tile.y[posIdx] + anchor; // flip mercator\n             ctx.drawImage(sp, x, y - (sp.height >> 1));\n           }\n          }\n        }\n      }\n      \n\n      prof.end(true);\n    },\n\n    setBlendMode: function(b) {\n      this.options.blendmode = b;\n    },\n\n    /**\n     * get active points for a step in active zoom\n     * returns a list of bounding boxes [[sw, ne] , [], []] where ne is a {lat: .., lon: ...} obj\n     * empty list if there is no active pixels\n     */\n    getActivePointsBBox: function(tile, step) {\n      var positions = [];\n      var mercator = new torque.Mercator();\n\n      var tileMax = this.options.resolution * (this.TILE_SIZE/this.options.resolution - 1);\n      //this.renderer.renderTile(tile, this.key, pos.x, pos.y);\n      var activePixels = tile.timeCount[step];\n      var pixelIndex = tile.timeIndex[step];\n      for(var p = 0; p < activePixels; ++p) {\n        var posIdx = tile.renderDataPos[pixelIndex + p];\n        var c = tile.renderData[pixelIndex + p];\n        if (c) {\n         var x = tile.x[posIdx];\n         var y = tileMax - tile.y[posIdx]; // flip mercator\n         positions.push(mercator.tilePixelBBox(\n           tile.coord.x,\n           tile.coord.y,\n           tile.coord.z,\n           x, y\n         ));\n        }\n      }\n      return positions;\n    },\n\n    /**\n     * returns an array with all the values for the active pixels\n     * @tile tile object\n     * @step integer with the step\n     * @values (optional) an array where the values will be placed\n     */\n    getValues: function(tile, step, values) {\n      values = values || [];\n      var activePixels = tile.timeCount[step];\n      var pixelIndex = tile.timeIndex[step];\n      for(var p = 0; p < activePixels; ++p) {\n        var posIdx = tile.renderDataPos[pixelIndex + p];\n        values.push(tile.renderData[pixelIndex + p]);\n      }\n      return values;\n    },\n\n    // return the value for x, y (tile coordinates)\n    // null for no value\n    getValueFor: function(tile, step, px, py) {\n      var mercator = new torque.Mercator();\n      var res = this.options.resolution;\n      var res2 = res >> 1;\n\n      var tileMax = this.options.resolution * (this.TILE_SIZE/this.options.resolution - 1);\n      //this.renderer.renderTile(tile, this.key, pos.x, pos.y);\n      var activePixels = tile.timeCount[step];\n      var pixelIndex = tile.timeIndex[step];\n      for(var p = 0; p < activePixels; ++p) {\n        var posIdx = tile.renderDataPos[pixelIndex + p];\n        var c = tile.renderData[pixelIndex + p];\n        if (c) {\n         var x = tile.x[posIdx];\n         var y = tileMax - tile.y[posIdx];\n         var dx = px + res2 - x;\n         var dy = py + res2 - y;\n         if (dx >= 0 && dx < res && dy >= 0 && dy < res) {\n           return {\n             value: c,\n             bbox: mercator.tilePixelBBox(\n               tile.coord.x,\n               tile.coord.y,\n               tile.coord.z,\n               x - res2, y - res2, res\n             )\n           }\n         }\n        }\n      }\n      return null;\n    },\n\n    _preloadIcons: function(img_names) {\n      var self = this;\n\n      if (img_names.length > 0 && !this._forcePoints) {\n\n        var qualifiedImageUrlSet = Object.keys(img_names.reduce(function(imgNamesMap, imgName) {\n            var qualifiedUrl = self._qualifyURL(imgName);\n            if (!self._icons[qualifiedUrl]) {\n                imgNamesMap[qualifiedUrl] = true;\n            }\n            return imgNamesMap;\n        }, {}));\n\n        var filtered = self._shader.getLayers().some(function(layer) {\n          return typeof layer.shader[\"image-filters\"] !== \"undefined\";\n        });\n\n        this._iconsToLoad += qualifiedImageUrlSet.length;\n\n        qualifiedImageUrlSet.forEach(function(qualifiedImageUrl) {\n          self._icons[qualifiedImageUrl] = null;\n\n          var img = self._createImage();\n\n          if (filtered) {\n            img.crossOrigin = 'Anonymous';\n          }\n\n          self._setImageSrc(img, qualifiedImageUrl, function(err) {\n            if (err) {\n              self._forcePoints = true;\n              self.clearSpriteCache();\n              self._iconsToLoad = 0;\n              self.fire(\"allIconsLoaded\");\n              if(filtered) {\n                console.info(\"Only CORS-enabled, or same domain image-files can be used in combination with image-filters\");\n              }\n              console.error(\"Couldn't get marker-file \" + qualifiedImageUrl);\n            } else {\n              self._icons[qualifiedImageUrl] = img;\n              self._iconsToLoad--;\n\n              if (self._iconsToLoad <= 0){\n                self.clearSpriteCache();\n                self.fire(\"allIconsLoaded\");\n              }\n            }\n          });\n        });\n      } else {\n          this.fire(\"allIconsLoaded\");\n      }\n  },\n\n  applyFilters: function(){\n    if(this._style){\n      if(this._style['image-filters']){\n        function gradientKey(imf){\n          var hash = \"\"\n          for(var i = 0; i < imf.args.length; i++){\n            var rgb = imf.args[i].rgb;\n            hash += rgb[0] + \":\" + rgb[1] + \":\" + rgb[2];\n          }\n          return hash;\n        }\n        var gradient = this._gradients[gradientKey(this._style['image-filters'])];\n        if(!gradient){\n          function componentToHex(c) {\n            var hex = c.toString(16);\n            return hex.length == 1 ? \"0\" + hex : hex;\n          }\n\n          function rgbToHex(r, g, b) {\n            return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n          }\n          gradient = {};\n          var colorize = this._style['image-filters'].args;\n          \n          var increment = 1/colorize.length;\n          for (var i = 0; i < colorize.length; i++){\n            var key = increment * i + increment;\n            var rgb = colorize[i].rgb;\n            var formattedColor = rgbToHex(rgb[0], rgb[1], rgb[2]);\n            gradient[key] = formattedColor;\n          }\n          this._gradients[gradientKey(this._style['image-filters'])] = gradient;\n        }\n        this._filters.gradient(gradient);\n        this._filters.draw();\n      }\n    }\n  }\n});\n\n\n  // exports public api\nmodule.exports = PointRenderer;\n",
    "var carto = global.carto || require('carto');\n\n  var DEFAULT_CARTOCSS = [\n    '#layer {',\n    '  polygon-fill: #FFFF00;',\n    '  [value > 10] { polygon-fill: #FFFF00; }',\n    '  [value > 100] { polygon-fill: #FFCC00; }',\n    '  [value > 1000] { polygon-fill: #FE9929; }',\n    '  [value > 10000] { polygon-fill: #FF6600; }',\n    '  [value > 100000] { polygon-fill: #FF3300; }',\n    '}'\n  ].join('\\n');\n\n  var TAU = Math.PI * 2;\n\n  //\n  // this renderer just render points depending of the value\n  // \n  function RectanbleRenderer(canvas, options) {\n    this.options = options;\n    carto.tree.Reference.set(torque['torque-reference']);\n    this.setCanvas(canvas);\n    this.setCartoCSS(this.options.cartocss || DEFAULT_CARTOCSS);\n  }\n\n  RectanbleRenderer.prototype = {\n\n    //\n    // sets the cartocss style to render stuff\n    //\n    setCartoCSS: function(cartocss) {\n      this._cartoCssStyle = new carto.RendererJS().render(cartocss);\n      if(this._cartoCssStyle.getLayers().length > 1) {\n        throw new Error(\"only one CartoCSS layer is supported\");\n      }\n      this._shader = this._cartoCssStyle.getLayers()[0].shader;\n    },\n\n    setCanvas: function(canvas) {\n      if(!canvas) return;\n      this._canvas = canvas;\n      this._ctx = canvas.getContext('2d');\n    },\n\n    accumulate: function(tile, keys) {\n      var prof = Profiler.metric('RectangleRender:accumulate').start();\n      var x, y, posIdx, p, k, key, activePixels, pixelIndex;\n      var res = this.options.resolution;\n      var s = 256/res;\n      var accum = new Float32Array(s*s);\n\n      if(typeof(keys) !== 'object') {\n        keys = [keys];\n      }\n\n      for(k = 0; k < keys.length; ++k) {\n        key = keys[k];\n        activePixels = tile.timeCount[key];\n        if(activePixels) {\n          pixelIndex = tile.timeIndex[key];\n          for(p = 0; p < activePixels; ++p) {\n            posIdx = tile.renderDataPos[pixelIndex + p];\n            x = tile.x[posIdx]/res;\n            y = tile.y[posIdx]/res;\n            accum[x*s + y] += tile.renderData[pixelIndex + p];\n          }\n        }\n      }\n\n      prof.end();\n      return accum;\n    },\n\n    renderTileAccum: function(accum, px, py) {\n      var prof = Profiler.metric('RectangleRender:renderTileAccum').start();\n      var color, x, y, alpha;\n      var res = this.options.resolution;\n      var ctx = this._ctx;\n      var s = (256/res) | 0;\n      var s2 = s*s;\n      var colors = this._colors;\n      if(this.options.blendmode) {\n        ctx.globalCompositeOperation = this.options.blendmode;\n      }\n      var polygon_alpha = this._shader['polygon-opacity'] || function() { return 1.0; };\n      for(var i = 0; i < s2; ++i) {\n        var xy = i;\n        var value = accum[i];\n        if(value) {\n          x = (xy/s) | 0;\n          y = xy % s;\n          // by-pass the style generation for improving performance\n          color = this._shader['polygon-fill']({ value: value }, { zoom: 0 });\n          ctx.fillStyle = color;\n          //TODO: each function should have a default value for each \n          //property defined in the cartocss\n          alpha = polygon_alpha({ value: value }, { zoom: 0 });\n          if(alpha === null) {\n            alpha = 1.0;\n          }\n          ctx.globalAlpha = alpha;\n          ctx.fillRect(x * res, 256 - res - y * res, res, res);\n        }\n      }\n      prof.end();\n    },\n\n    //\n    // renders a tile in the canvas for key defined in \n    // the torque tile\n    //\n    renderTile: function(tile, key, callback) {\n      if(!this._canvas) return;\n\n      var res = this.options.resolution;\n\n      //var prof = Profiler.get('render').start();\n      var ctx = this._ctx;\n      var colors = this._colors;\n      var activepixels = tile.timeCount[key];\n      if(activepixels) {\n        var w = this._canvas.width;\n        var h = this._canvas.height;\n        //var imageData = ctx.getImageData(0, 0, w, h);\n        //var pixels = imageData.data;\n        var pixelIndex = tile.timeIndex[key];\n        for(var p = 0; p < activePixels; ++p) {\n          var posIdx = tile.renderDataPos[pixelIndex + p];\n          var c = tile.renderData[pixelIndex + p];\n          if(c) {\n           var color = colors[Math.min(c, colors.length - 1)];\n           var x = tile.x[posIdx];// + px;\n           var y = tile.y[posIdx]; //+ py;\n\n           ctx.fillStyle = color;\n           ctx.fillRect(x, y, res, res);\n           /*\n\n           for(var xx = 0; xx < res; ++xx) {\n            for(var yy = 0; yy < res; ++yy) {\n              var idx = 4*((x+xx) + w*(y + yy));\n              pixels[idx + 0] = color[0];\n              pixels[idx + 1] = color[1];\n              pixels[idx + 2] = color[2];\n              pixels[idx + 3] = color[3];\n            }\n           }\n           */\n          }\n        }\n        //ctx.putImageData(imageData, 0, 0);\n      }\n      //prof.end();\n      return callback && callback(null);\n    }\n  };\n\n\n  // exports public api\nmodule.exports = RectanbleRenderer;\n",
    "/*\n Based on simpleheat, a tiny JavaScript library for drawing heatmaps with Canvas, \n by Vladimir Agafonkin\n https://github.com/mourner/simpleheat\n*/\n\n'use strict';\n\nfunction torque_filters(canvas, options) {\n    // jshint newcap: false, validthis: true\n    if (!(this instanceof torque_filters)) { return new torque_filters(canvas, options); }\n\n    options = options || {};\n\n    this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\n\n    this._ctx = canvas.getContext('2d');\n    this._width = canvas.width;\n    this._height = canvas.height;\n\n    this._max = 1;\n    this._data = [];\n\n    this.canvasClass = options.canvasClass;\n}\n\ntorque_filters.prototype = {\n\n    defaultGradient: {\n        0.4: 'blue',\n        0.6: 'cyan',\n        0.7: 'lime',\n        0.8: 'yellow',\n        1.0: 'red'\n    },\n\n    gradient: function (grad) {\n        // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\n        var canvas = this._createCanvas(),\n            ctx = canvas.getContext('2d'),\n            gradient = ctx.createLinearGradient(0, 0, 0, 256);\n\n        canvas.width = 1;\n        canvas.height = 256;\n\n        for (var i in grad) {\n            gradient.addColorStop(+i, grad[i]);\n        }\n\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 1, 256);\n\n        this._grad = ctx.getImageData(0, 0, 1, 256).data;\n\n        return this;\n    },\n\n    draw: function () {\n        if (!this._grad) {\n            this.gradient(this.defaultGradient);\n        }\n\n        var ctx = this._ctx;\n        var colored = ctx.getImageData(0, 0, this._canvas.width, this._canvas.height);\n        this._colorize(colored.data, this._grad);\n        ctx.putImageData(colored, 0, 0);\n\n        return this;\n    },\n\n    _colorize: function (pixels, gradient) {\n        for (var i = 3, len = pixels.length, j; i < len; i += 4) {\n            j = pixels[i] * 4; // get gradient color from opacity value\n\n            if (j) {\n                pixels[i - 3] = gradient[j];\n                pixels[i - 2] = gradient[j + 1];\n                pixels[i - 1] = gradient[j + 2];\n            }\n        }\n    },\n\n    _createCanvas: function() {\n        return this.canvasClass\n            ? new this.canvasClass()\n            : document.createElement('canvas');\n    }\n};\n\nmodule.exports = torque_filters;\n",
    "var torque = require('./core');\n\n  var lastCall = null;\n\n  function jsonp(url, callback, options) {\n     options = options || {};\n     options.timeout = options.timeout === undefined ? 10000: options.timeout;\n     var head = document.getElementsByTagName('head')[0];\n     var script = document.createElement('script');\n\n     // function name\n     var fnName = options.callbackName || 'torque_' + Date.now();\n\n     if (torque.isFunction(fnName)) {\n       fnName = fnName();\n     }\n\n     function clean() {\n       head.removeChild(script);\n       clearTimeout(timeoutTimer);\n       delete window[fnName];\n     }\n\n     window[fnName] = function() {\n       clean();\n       callback.apply(window, arguments);\n     };\n\n     // timeout for errors\n     var timeoutTimer = setTimeout(function() { \n       clean();\n       callback.call(window, null); \n     }, options.timeout);\n\n     // setup url\n     url = url.replace('callback=\\?', 'callback=' + fnName);\n     script.type = 'text/javascript';\n     script.src = url;\n     script.async = true;\n     // defer the loading because IE9 loads in the same frame the script\n     // so Loader._script is null\n     setTimeout(function() { head.appendChild(script); }, 0);\n  }\n\n  function get(url, callback, options) {\n    options = options || {\n      method: 'GET',\n      data: null,\n      responseType: 'text'\n    };\n    lastCall = { url: url, callback: callback };\n    var request = XMLHttpRequest;\n    // from d3.js\n    if (global.XDomainRequest\n        && !(\"withCredentials\" in request)\n        && /^(http(s)?:)?\\/\\//.test(url)) request = XDomainRequest;\n\n    var req = new request();\n    req.open(options.method, url, true);\n\n\n    function respond() {\n      var status = req.status, result;\n      var r = options.responseType === 'arraybuffer' ? req.response: req.responseText;\n      if (!status && r || status >= 200 && status < 300 || status === 304) {\n        callback(req);\n      } else {\n        callback(null);\n      }\n    }\n\n    \"onload\" in req\n      ? req.onload = req.onerror = respond\n      : req.onreadystatechange = function() { req.readyState > 3 && respond(); };\n\n    req.onprogress = function() {};\n\n    req.responseType = options.responseType; //'arraybuffer';\n    if (options.data) {\n      req.setRequestHeader(\"Content-type\", \"application/json\");\n      //req.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\")\n      req.setRequestHeader(\"Accept\", \"*\");\n    }\n    req.send(options.data);\n    return req;\n  }\n\n  function post(url, data, callback) {\n    return get(url, callback, {\n      data: data,\n      method: \"POST\"\n    });\n  }\n\nmodule.exports = {\n    get: get,\n    post: post,\n    jsonp: jsonp,\n    lastCall: function() { return lastCall; }\n};\n",
    "var util = require('util'),\n    fs = require('fs'),\n    path = require('path');\n\n\nfunction getVersion() {\n    if (process.browser) {\n        return require('../../package.json').version.split('.');\n    } else if (parseInt(process.version.split('.')[1], 10) > 4) {\n        return require('../../package.json').version.split('.');\n    } else {\n        // older node\n        var package_json = JSON.parse(fs.readFileSync(path.join(__dirname,'../../package.json')));\n        return package_json.version.split('.');\n    }\n}\n\nvar carto = {\n    version: getVersion(),\n    Parser: require('./parser').Parser,\n    Renderer: require('./renderer').Renderer,\n    tree: require('./tree'),\n    RendererJS: require('./renderer_js'),\n    default_reference: require('./torque-reference'),\n\n    // @TODO\n    writeError: function(ctx, options) {\n        var message = '';\n        var extract = ctx.extract;\n        var error = [];\n\n        options = options || {};\n\n        if (options.silent) { return; }\n\n        options.indent = options.indent || '';\n\n        if (!('index' in ctx) || !extract) {\n            return util.error(options.indent + (ctx.stack || ctx.message));\n        }\n\n        if (typeof(extract[0]) === 'string') {\n            error.push(stylize((ctx.line - 1) + ' ' + extract[0], 'grey'));\n        }\n\n        if (extract[1] === '' && typeof extract[2] === 'undefined') {\n            extract[1] = '¶';\n        }\n        error.push(ctx.line + ' ' + extract[1].slice(0, ctx.column) +\n            stylize(stylize(extract[1][ctx.column], 'bold') +\n            extract[1].slice(ctx.column + 1), 'yellow'));\n\n        if (typeof(extract[2]) === 'string') {\n            error.push(stylize((ctx.line + 1) + ' ' + extract[2], 'grey'));\n        }\n        error = options.indent + error.join('\\n' + options.indent) + '\\033[0m\\n';\n\n        message = options.indent + message + stylize(ctx.message, 'red');\n        if (ctx.filename) (message += stylize(' in ', 'red') + ctx.filename);\n\n        util.error(message, error);\n\n        if (ctx.callLine) {\n            util.error(stylize('from ', 'red') + (ctx.filename || ''));\n            util.error(stylize(ctx.callLine, 'grey') + ' ' + ctx.callExtract);\n        }\n        if (ctx.stack) { util.error(stylize(ctx.stack, 'red')); }\n    }\n};\n\nrequire('./tree/call');\nrequire('./tree/color');\nrequire('./tree/comment');\nrequire('./tree/definition');\nrequire('./tree/dimension');\nrequire('./tree/element');\nrequire('./tree/expression');\nrequire('./tree/filterset');\nrequire('./tree/filter');\nrequire('./tree/field');\nrequire('./tree/keyword');\nrequire('./tree/layer');\nrequire('./tree/literal');\nrequire('./tree/operation');\nrequire('./tree/quoted');\nrequire('./tree/imagefilter');\nrequire('./tree/reference');\nrequire('./tree/rule');\nrequire('./tree/ruleset');\nrequire('./tree/selector');\nrequire('./tree/style');\nrequire('./tree/url');\nrequire('./tree/value');\nrequire('./tree/variable');\nrequire('./tree/zoom');\nrequire('./tree/invalid');\nrequire('./tree/fontset');\nrequire('./tree/frame_offset');\nrequire('./functions');\n\nfor (var k in carto) { exports[k] = carto[k]; }\n\n// Stylize a string\nfunction stylize(str, style) {\n    var styles = {\n        'bold' : [1, 22],\n        'inverse' : [7, 27],\n        'underline' : [4, 24],\n        'yellow' : [33, 39],\n        'green' : [32, 39],\n        'red' : [31, 39],\n        'grey' : [90, 39]\n    };\n    return '\\033[' + styles[style][0] + 'm' + str +\n           '\\033[' + styles[style][1] + 'm';\n}\n",
    "var carto = exports,\n    tree = require('./tree'),\n    _ = global._ || require('underscore');\n\n//    Token matching is done with the `$` function, which either takes\n//    a terminal string or regexp, or a non-terminal function to call.\n//    It also takes care of moving all the indices forwards.\ncarto.Parser = function Parser(env) {\n    var input,       // LeSS input string\n        i,           // current index in `input`\n        j,           // current chunk\n        temp,        // temporarily holds a chunk's state, for backtracking\n        memo,        // temporarily holds `i`, when backtracking\n        furthest,    // furthest index the parser has gone to\n        chunks,      // chunkified input\n        current,     // index of current chunk, in `input`\n        parser;\n\n    var that = this;\n\n    // This function is called after all files\n    // have been imported through `@import`.\n    var finish = function() {};\n\n    function save()    {\n        temp = chunks[j];\n        memo = i;\n        current = i;\n    }\n    function restore() {\n        chunks[j] = temp;\n        i = memo;\n        current = i;\n    }\n\n    function sync() {\n        if (i > current) {\n            chunks[j] = chunks[j].slice(i - current);\n            current = i;\n        }\n    }\n    //\n    // Parse from a token, regexp or string, and move forward if match\n    //\n    function $(tok) {\n        var match, args, length, c, index, endIndex, k;\n\n        // Non-terminal\n        if (tok instanceof Function) {\n            return tok.call(parser.parsers);\n        // Terminal\n        // Either match a single character in the input,\n        // or match a regexp in the current chunk (chunk[j]).\n        } else if (typeof(tok) === 'string') {\n            match = input.charAt(i) === tok ? tok : null;\n            length = 1;\n            sync();\n        } else {\n            sync();\n\n            match = tok.exec(chunks[j]);\n            if (match) {\n                length = match[0].length;\n            } else {\n                return null;\n            }\n        }\n\n        // The match is confirmed, add the match length to `i`,\n        // and consume any extra white-space characters (' ' || '\\n')\n        // which come after that. The reason for this is that LeSS's\n        // grammar is mostly white-space insensitive.\n        if (match) {\n            var mem = i += length;\n            endIndex = i + chunks[j].length - length;\n\n            while (i < endIndex) {\n                c = input.charCodeAt(i);\n                if (! (c === 32 || c === 10 || c === 9)) { break; }\n                i++;\n            }\n            chunks[j] = chunks[j].slice(length + (i - mem));\n            current = i;\n\n            if (chunks[j].length === 0 && j < chunks.length - 1) { j++; }\n\n            if (typeof(match) === 'string') {\n                return match;\n            } else {\n                return match.length === 1 ? match[0] : match;\n            }\n        }\n    }\n\n    // Same as $(), but don't change the state of the parser,\n    // just return the match.\n    function peek(tok) {\n        if (typeof(tok) === 'string') {\n            return input.charAt(i) === tok;\n        } else {\n            return !!tok.test(chunks[j]);\n        }\n    }\n\n    function extractErrorLine(style, errorIndex) {\n        return (style.slice(0, errorIndex).match(/\\n/g) || '').length + 1;\n    }\n\n\n    // Make an error object from a passed set of properties.\n    // Accepted properties:\n    // - `message`: Text of the error message.\n    // - `filename`: Filename where the error occurred.\n    // - `index`: Char. index where the error occurred.\n    function makeError(err) {\n        var einput;\n\n        _(err).defaults({\n            index: furthest,\n            filename: env.filename,\n            message: 'Parse error.',\n            line: 0,\n            column: -1\n        });\n\n        if (err.filename && that.env.inputs && that.env.inputs[err.filename]) {\n            einput = that.env.inputs[err.filename];\n        } else {\n            einput = input;\n        }\n\n        err.line = extractErrorLine(einput, err.index);\n        for (var n = err.index; n >= 0 && einput.charAt(n) !== '\\n'; n--) {\n            err.column++;\n        }\n\n        return new Error(_('<%=filename%>:<%=line%>:<%=column%> <%=message%>').template(err));\n    }\n\n    this.env = env = env || {};\n    this.env.filename = this.env.filename || null;\n    this.env.inputs = this.env.inputs || {};\n\n    // The Parser\n    parser = {\n\n        extractErrorLine: extractErrorLine,\n        //\n        // Parse an input string into an abstract syntax tree.\n        // Throws an error on parse errors.\n        parse: function(str) {\n            var root, start, end, zone, line, lines, buff = [], c, error = null;\n\n            i = j = current = furthest = 0;\n            chunks = [];\n            input = str.replace(/\\r\\n/g, '\\n');\n            if (env.filename) {\n                that.env.inputs[env.filename] = input;\n            }\n\n            var early_exit = false;\n\n            // Split the input into chunks.\n            chunks = (function (chunks) {\n                var j = 0,\n                    skip = /(?:@\\{[\\w-]+\\}|[^\"'`\\{\\}\\/\\(\\)\\\\])+/g,\n                    comment = /\\/\\*(?:[^*]|\\*+[^\\/*])*\\*+\\/|\\/\\/.*/g,\n                    string = /\"((?:[^\"\\\\\\r\\n]|\\\\.)*)\"|'((?:[^'\\\\\\r\\n]|\\\\.)*)'|`((?:[^`]|\\\\.)*)`/g,\n                    level = 0,\n                    match,\n                    chunk = chunks[0],\n                    inParam;\n\n                for (var i = 0, c, cc; i < input.length;) {\n                    skip.lastIndex = i;\n                    if (match = skip.exec(input)) {\n                        if (match.index === i) {\n                            i += match[0].length;\n                            chunk.push(match[0]);\n                        }\n                    }\n                    c = input.charAt(i);\n                    comment.lastIndex = string.lastIndex = i;\n\n                    if (match = string.exec(input)) {\n                        if (match.index === i) {\n                            i += match[0].length;\n                            chunk.push(match[0]);\n                            continue;\n                        }\n                    }\n\n                    if (!inParam && c === '/') {\n                        cc = input.charAt(i + 1);\n                        if (cc === '/' || cc === '*') {\n                            if (match = comment.exec(input)) {\n                                if (match.index === i) {\n                                    i += match[0].length;\n                                    chunk.push(match[0]);\n                                    continue;\n                                }\n                            }\n                        }\n                    }\n\n                    switch (c) {\n                        case '{': if (! inParam) { level ++;        chunk.push(c);                           break; }\n                        case '}': if (! inParam) { level --;        chunk.push(c); chunks[++j] = chunk = []; break; }\n                        case '(': if (! inParam) { inParam = true;  chunk.push(c);                           break; }\n                        case ')': if (  inParam) { inParam = false; chunk.push(c);                           break; }\n                        default:                                    chunk.push(c);\n                    }\n\n                    i++;\n                }\n                if (level !== 0) {\n                    error = {\n                        index: i - 1,\n                        type: 'Parse',\n                        message: (level > 0) ? \"missing closing `}`\" : \"missing opening `{`\"\n                    };\n                }\n\n                return chunks.map(function (c) { return c.join(''); });\n            })([[]]);\n\n            if (error) {\n                throw makeError(error);\n            }\n\n            // Start with the primary rule.\n            // The whole syntax tree is held under a Ruleset node,\n            // with the `root` property set to true, so no `{}` are\n            // output.\n            root = new tree.Ruleset([], $(this.parsers.primary));\n            root.root = true;\n\n            // Get an array of Ruleset objects, flattened\n            // and sorted according to specificitySort\n            root.toList = (function() {\n                var line, lines, column;\n                return function(env) {\n                    env.error = function(e) {\n                        if (!env.errors) env.errors = new Error('');\n                        if (env.errors.message) {\n                            env.errors.message += '\\n' + makeError(e).message;\n                        } else {\n                            env.errors.message = makeError(e).message;\n                        }\n                    };\n                    env.frames = env.frames || [];\n\n\n                    // call populates Invalid-caused errors\n                    var definitions = this.flatten([], [], env);\n                    definitions.sort(specificitySort);\n                    return definitions;\n                };\n            })();\n\n            // Sort rules by specificity: this function expects selectors to be\n            // split already.\n            //\n            // Written to be used as a .sort(Function);\n            // argument.\n            //\n            // [1, 0, 0, 467] > [0, 0, 1, 520]\n            var specificitySort = function(a, b) {\n                var as = a.specificity;\n                var bs = b.specificity;\n\n                if (as[0] != bs[0]) return bs[0] - as[0];\n                if (as[1] != bs[1]) return bs[1] - as[1];\n                if (as[2] != bs[2]) return bs[2] - as[2];\n                return bs[3] - as[3];\n            };\n\n            return root;\n        },\n\n        // Here in, the parsing rules/functions\n        //\n        // The basic structure of the syntax tree generated is as follows:\n        //\n        //   Ruleset ->  Rule -> Value -> Expression -> Entity\n        //\n        //  In general, most rules will try to parse a token with the `$()` function, and if the return\n        //  value is truly, will return a new node, of the relevant type. Sometimes, we need to check\n        //  first, before parsing, that's when we use `peek()`.\n        parsers: {\n            // The `primary` rule is the *entry* and *exit* point of the parser.\n            // The rules here can appear at any level of the parse tree.\n            //\n            // The recursive nature of the grammar is an interplay between the `block`\n            // rule, which represents `{ ... }`, the `ruleset` rule, and this `primary` rule,\n            // as represented by this simplified grammar:\n            //\n            //     primary  →  (ruleset | rule)+\n            //     ruleset  →  selector+ block\n            //     block    →  '{' primary '}'\n            //\n            // Only at one point is the primary rule not called from the\n            // block rule: at the root level.\n            primary: function() {\n                var node, root = [];\n\n                while ((node = $(this.rule) || $(this.ruleset) ||\n                               $(this.comment)) ||\n                               $(/^[\\s\\n]+/) || (node = $(this.invalid))) {\n                    if (node) root.push(node);\n                }\n                return root;\n            },\n\n            invalid: function () {\n                var chunk = $(/^[^;\\n]*[;\\n]/);\n\n                // To fail gracefully, match everything until a semicolon or linebreak.\n                if (chunk) {\n                    return new tree.Invalid(chunk, memo);\n                }\n            },\n\n            // We create a Comment node for CSS comments `/* */`,\n            // but keep the LeSS comments `//` silent, by just skipping\n            // over them.\n            comment: function() {\n                var comment;\n\n                if (input.charAt(i) !== '/') return;\n\n                if (input.charAt(i + 1) === '/') {\n                    return new tree.Comment($(/^\\/\\/.*/), true);\n                } else if (comment = $(/^\\/\\*(?:[^*]|\\*+[^\\/*])*\\*+\\/\\n?/)) {\n                    return new tree.Comment(comment);\n                }\n            },\n\n            // Entities are tokens which can be found inside an Expression\n            entities: {\n\n                // A string, which supports escaping \" and ' \"milky way\" 'he\\'s the one!'\n                quoted: function() {\n                    if (input.charAt(i) !== '\"' && input.charAt(i) !== \"'\") return;\n                    var str = $(/^\"((?:[^\"\\\\\\r\\n]|\\\\.)*)\"|'((?:[^'\\\\\\r\\n]|\\\\.)*)'/);\n                    if (str) {\n                        return new tree.Quoted(str[1] || str[2]);\n                    }\n                },\n\n                // A reference to a Mapnik field, like [NAME]\n                // Behind the scenes, this has the same representation, but Carto\n                // needs to be careful to warn when unsupported operations are used.\n                field: function() {\n                    if (! $('[')) return;\n                    var field_name = $(/(^[^\\]]+)/);\n                    if (! $(']')) return;\n                    if (field_name) return new tree.Field(field_name[1]);\n                },\n\n                // This is a comparison operator\n                comparison: function() {\n                    var str = $(/^=~|=|!=|<=|>=|<|>/);\n                    if (str) {\n                        return str;\n                    }\n                },\n\n                // A catch-all word, such as: hard-light\n                // These can start with either a letter or a dash (-),\n                // and then contain numbers, underscores, and letters.\n                keyword: function() {\n                    var k = $(/^[A-Za-z-]+[A-Za-z-0-9_]*/);\n                    if (k) { return new tree.Keyword(k); }\n                },\n\n                // A function call like rgb(255, 0, 255)\n                // The arguments are parsed with the `entities.arguments` parser.\n                call: function() {\n                    var name, args;\n\n                    if (!(name = /^([\\w\\-]+|%)\\(/.exec(chunks[j]))) return;\n\n                    name = name[1];\n\n                    if (name === 'url') {\n                        // url() is handled by the url parser instead\n                        return null;\n                    } else {\n                        i += name.length;\n                    }\n\n                    $('('); // Parse the '(' and consume whitespace.\n\n                    args = $(this.entities['arguments']);\n\n                    if (!$(')')) return;\n\n                    if (name) {\n                        return new tree.Call(name, args, i);\n                    }\n                },\n                // Arguments are comma-separated expressions\n                'arguments': function() {\n                    var args = [], arg;\n\n                    while (arg = $(this.expression)) {\n                        args.push(arg);\n                        if (! $(',')) { break; }\n                    }\n\n                    return args;\n                },\n                literal: function() {\n                    return $(this.entities.dimension) ||\n                        $(this.entities.keywordcolor) ||\n                        $(this.entities.hexcolor) ||\n                        $(this.entities.quoted);\n                },\n\n                // Parse url() tokens\n                //\n                // We use a specific rule for urls, because they don't really behave like\n                // standard function calls. The difference is that the argument doesn't have\n                // to be enclosed within a string, so it can't be parsed as an Expression.\n                url: function() {\n                    var value;\n\n                    if (input.charAt(i) !== 'u' || !$(/^url\\(/)) return;\n                    value = $(this.entities.quoted) || $(this.entities.variable) ||\n                            $(/^[\\-\\w%@$\\/.&=:;#+?~]+/) || '';\n                    if (! $(')')) {\n                        return new tree.Invalid(value, memo, 'Missing closing ) in URL.');\n                    } else {\n                        return new tree.URL((typeof value.value !== 'undefined' ||\n                            value instanceof tree.Variable) ?\n                            value : new tree.Quoted(value));\n                    }\n                },\n\n                // A Variable entity, such as `@fink`, in\n                //\n                //     width: @fink + 2px\n                //\n                // We use a different parser for variable definitions,\n                // see `parsers.variable`.\n                variable: function() {\n                    var name, index = i;\n\n                    if (input.charAt(i) === '@' && (name = $(/^@[\\w-]+/))) {\n                        return new tree.Variable(name, index, env.filename);\n                    }\n                },\n\n                hexcolor: function() {\n                    var rgb;\n                    if (input.charAt(i) === '#' && (rgb = $(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/))) {\n                        return new tree.Color(rgb[1]);\n                    }\n                },\n\n                keywordcolor: function() {\n                    var rgb = chunks[j].match(/^[a-z]+/);\n                    if (rgb && rgb[0] in tree.Reference.data.colors) {\n                        return new tree.Color(tree.Reference.data.colors[$(/^[a-z]+/)]);\n                    }\n                },\n\n                // A Dimension, that is, a number and a unit. The only\n                // unit that has an effect is %\n                dimension: function() {\n                    var c = input.charCodeAt(i);\n                    if ((c > 57 || c < 45) || c === 47) return;\n                    var value = $(/^(-?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?)(\\%|\\w+)?/);\n                    if (value) {\n                        return new tree.Dimension(value[1], value[2], memo);\n                    }\n                }\n            },\n\n            // The variable part of a variable definition.\n            // Used in the `rule` parser. Like @fink:\n            variable: function() {\n                var name;\n\n                if (input.charAt(i) === '@' && (name = $(/^(@[\\w-]+)\\s*:/))) {\n                    return name[1];\n                }\n            },\n\n            // Entities are the smallest recognized token,\n            // and can be found inside a rule's value.\n            entity: function() {\n                return $(this.entities.call) ||\n                    $(this.entities.literal) ||\n                    $(this.entities.field) ||\n                    $(this.entities.variable) ||\n                    $(this.entities.url) ||\n                    $(this.entities.keyword);\n            },\n\n            // A Rule terminator. Note that we use `peek()` to check for '}',\n            // because the `block` rule will be expecting it, but we still need to make sure\n            // it's there, if ';' was ommitted.\n            end: function() {\n                return $(';') || peek('}');\n            },\n\n            // Elements are the building blocks for Selectors. They consist of\n            // an element name, such as a tag a class, or `*`.\n            element: function() {\n                var e = $(/^(?:[.#][\\w\\-]+|\\*|Map)/);\n                if (e) return new tree.Element(e);\n            },\n\n            // Attachments allow adding multiple lines, polygons etc. to an\n            // object. There can only be one attachment per selector.\n            attachment: function() {\n                var s = $(/^::([\\w\\-]+(?:\\/[\\w\\-]+)*)/);\n                if (s) return s[1];\n            },\n\n            // Selectors are made out of one or more Elements, see above.\n            selector: function() {\n                var a, attachment,\n                    e, elements = [],\n                    f, filters = new tree.Filterset(),\n                    z, zooms = [],\n                    frame_offset = tree.FrameOffset.none;\n                    segments = 0, conditions = 0;\n\n                while (\n                        (e = $(this.element)) ||\n                        (z = $(this.zoom)) ||\n                        (fo = $(this.frame_offset)) ||\n                        (f = $(this.filter)) ||\n                        (a = $(this.attachment))\n                    ) {\n                    segments++;\n                    if (e) {\n                        elements.push(e);\n                    } else if (z) {\n                        zooms.push(z);\n                        conditions++;\n                    } else if (fo) {\n                        frame_offset = fo;\n                        conditions++;\n                    } else if (f) {\n                        var err = filters.add(f);\n                        if (err) {\n                            throw makeError({\n                                message: err,\n                                index: i - 1\n                            });\n                        }\n                        conditions++;\n                    } else if (attachment) {\n                        throw makeError({\n                            message: 'Encountered second attachment name.',\n                            index: i - 1\n                        });\n                    } else {\n                        attachment = a;\n                    }\n\n                    var c = input.charAt(i);\n                    if (c === '{' || c === '}' || c === ';' || c === ',') { break; }\n                }\n\n                if (segments) {\n                    return new tree.Selector(filters, zooms, frame_offset, elements, attachment, conditions, memo);\n                }\n            },\n\n            filter: function() {\n                save();\n                var key, op, val;\n                if (! $('[')) return;\n                if (key = $(/^[a-zA-Z0-9\\-_]+/) ||\n                    $(this.entities.quoted) ||\n                    $(this.entities.variable) ||\n                    $(this.entities.keyword) ||\n                    $(this.entities.field)) {\n                    // TODO: remove at 1.0.0\n                    if (key instanceof tree.Quoted) {\n                        key = new tree.Field(key.toString());\n                    }\n                    if ((op = $(this.entities.comparison)) &&\n                        (val = $(this.entities.quoted) ||\n                             $(this.entities.variable) ||\n                             $(this.entities.dimension) ||\n                             $(this.entities.keyword) ||\n                             $(this.entities.field))) {\n                        if (! $(']')) {\n                            throw makeError({\n                                message: 'Missing closing ] of filter.',\n                                index: memo - 1\n                            });\n                        }\n                        if (!key.is) key = new tree.Field(key);\n                        return new tree.Filter(key, op, val, memo, env.filename);\n                    }\n                }\n            },\n\n            frame_offset: function() {\n                save();\n                var op, val;\n                if ($(/^\\[\\s*frame-offset/g) &&\n                    (op = $(this.entities.comparison)) &&\n                    (val = $(/^\\d+/)) &&\n                    $(']'))  {\n                        return tree.FrameOffset(op, val, memo);\n                }\n            },\n\n            zoom: function() {\n                save();\n                var op, val;\n                if ($(/^\\[\\s*zoom/g) &&\n                    (op = $(this.entities.comparison)) &&\n                    (val = $(this.entities.variable) || $(this.entities.dimension)) && $(']')) {\n                        return new tree.Zoom(op, val, memo);\n                } else {\n                    // backtrack\n                    restore();\n                }\n            },\n\n            // The `block` rule is used by `ruleset`\n            // It's a wrapper around the `primary` rule, with added `{}`.\n            block: function() {\n                var content;\n\n                if ($('{') && (content = $(this.primary)) && $('}')) {\n                    return content;\n                }\n            },\n\n            // div, .class, body > p {...}\n            ruleset: function() {\n                var selectors = [], s, f, l, rules, filters = [];\n                save();\n\n                while (s = $(this.selector)) {\n                    selectors.push(s);\n                    while ($(this.comment)) {}\n                    if (! $(',')) { break; }\n                    while ($(this.comment)) {}\n                }\n                if (s) {\n                    while ($(this.comment)) {}\n                }\n\n                if (selectors.length > 0 && (rules = $(this.block))) {\n                    if (selectors.length === 1 &&\n                        selectors[0].elements.length &&\n                        selectors[0].elements[0].value === 'Map') {\n                        var rs = new tree.Ruleset(selectors, rules);\n                        rs.isMap = true;\n                        return rs;\n                    }\n                    return new tree.Ruleset(selectors, rules);\n                } else {\n                    // Backtrack\n                    restore();\n                }\n            },\n\n            rule: function() {\n                var name, value, c = input.charAt(i);\n                save();\n\n                if (c === '.' || c === '#') { return; }\n\n                if (name = $(this.variable) || $(this.property)) {\n                    value = $(this.value);\n\n                    if (value && $(this.end)) {\n                        return new tree.Rule(name, value, memo, env.filename);\n                    } else {\n                        furthest = i;\n                        restore();\n                    }\n                }\n            },\n\n            font: function() {\n                var value = [], expression = [], weight, font, e;\n\n                while (e = $(this.entity)) {\n                    expression.push(e);\n                }\n\n                value.push(new tree.Expression(expression));\n\n                if ($(',')) {\n                    while (e = $(this.expression)) {\n                        value.push(e);\n                        if (! $(',')) { break; }\n                    }\n                }\n                return new tree.Value(value);\n            },\n\n            // A Value is a comma-delimited list of Expressions\n            // In a Rule, a Value represents everything after the `:`,\n            // and before the `;`.\n            value: function() {\n                var e, expressions = [];\n\n                while (e = $(this.expression)) {\n                    expressions.push(e);\n                    if (! $(',')) { break; }\n                }\n\n                if (expressions.length > 1) {\n                    return new tree.Value(expressions.map(function(e) {\n                        return e.value[0];\n                    }));\n                } else if (expressions.length === 1) {\n                    return new tree.Value(expressions);\n                }\n            },\n            // A sub-expression, contained by parenthensis\n            sub: function() {\n                var e;\n\n                if ($('(') && (e = $(this.expression)) && $(')')) {\n                    return e;\n                }\n            },\n            // This is a misnomer because it actually handles multiplication\n            // and division.\n            multiplication: function() {\n                var m, a, op, operation;\n                if (m = $(this.operand)) {\n                    while ((op = ($('/') || $('*') || $('%'))) && (a = $(this.operand))) {\n                        operation = new tree.Operation(op, [operation || m, a], memo);\n                    }\n                    return operation || m;\n                }\n            },\n            addition: function() {\n                var m, a, op, operation;\n                if (m = $(this.multiplication)) {\n                    while ((op = $(/^[-+]\\s+/) || (input.charAt(i - 1) != ' ' && ($('+') || $('-')))) &&\n                           (a = $(this.multiplication))) {\n                        operation = new tree.Operation(op, [operation || m, a], memo);\n                    }\n                    return operation || m;\n                }\n            },\n\n            // An operand is anything that can be part of an operation,\n            // such as a Color, or a Variable\n            operand: function() {\n                return $(this.sub) || $(this.entity);\n            },\n\n            // Expressions either represent mathematical operations,\n            // or white-space delimited Entities.  @var * 2\n            expression: function() {\n                var e, delim, entities = [], d;\n\n                while (e = $(this.addition) || $(this.entity)) {\n                    entities.push(e);\n                }\n\n                if (entities.length > 0) {\n                    return new tree.Expression(entities);\n                }\n            },\n            property: function() {\n                var name = $(/^(([a-z][-a-z_0-9]*\\/)?\\*?-?[-a-z_0-9]+)\\s*:/);\n                if (name) return name[1];\n            }\n        }\n    };\n    return parser;\n};\n",
    "var _ = global._ || require('underscore');\nvar carto = require('./index');\n\ncarto.Renderer = function Renderer(env, options) {\n    this.env = env || {};\n    this.options = options || {};\n    this.options.mapnik_version = this.options.mapnik_version || '3.0.0';\n};\n\n/**\n * Prepare a MSS document (given as an string) into a\n * XML Style fragment (mostly useful for debugging)\n *\n * @param {String} data the mss contents as a string.\n */\ncarto.Renderer.prototype.renderMSS = function render(data) {\n    // effects is a container for side-effects, which currently\n    // are limited to FontSets.\n    var env = _(this.env).defaults({\n        benchmark: false,\n        validation_data: false,\n        effects: []\n    });\n\n    if (!carto.tree.Reference.setVersion(this.options.mapnik_version)) {\n        throw new Error(\"Could not set mapnik version to \" + this.options.mapnik_version);\n    }\n\n    var output = [];\n    var styles = [];\n\n    if (env.benchmark) console.time('Parsing MSS');\n    var parser = (carto.Parser(env)).parse(data);\n    if (env.benchmark) console.timeEnd('Parsing MSS');\n\n    if (env.benchmark) console.time('Rule generation');\n    var rule_list = parser.toList(env);\n    if (env.benchmark) console.timeEnd('Rule generation');\n\n    if (env.benchmark) console.time('Rule inheritance');\n    var rules = inheritDefinitions(rule_list, env);\n    if (env.benchmark) console.timeEnd('Rule inheritance');\n\n    if (env.benchmark) console.time('Style sort');\n    var sorted = sortStyles(rules,env);\n    if (env.benchmark) console.timeEnd('Style sort');\n\n    if (env.benchmark) console.time('Total Style generation');\n    for (var k = 0, rule, style_name; k < sorted.length; k++) {\n        rule = sorted[k];\n        style_name = 'style' + (rule.attachment !== '__default__' ? '-' + rule.attachment : '');\n        styles.push(style_name);\n        var bench_name = '\\tStyle \"'+style_name+'\" (#'+k+') toXML';\n        if (env.benchmark) console.time(bench_name);\n        // env.effects can be modified by this call\n        output.push(carto.tree.StyleXML(style_name, rule.attachment, rule, env));\n        if (env.benchmark) console.timeEnd(bench_name);\n    }\n    if (env.benchmark) console.timeEnd('Total Style generation');\n    if (env.errors) throw env.errors;\n    return output.join('\\n');\n};\n\n/**\n * Prepare a MML document (given as an object) into a\n * fully-localized XML file ready for Mapnik2 consumption\n *\n * @param {String} m - the JSON file as a string.\n */\ncarto.Renderer.prototype.render = function render(m) {\n    // effects is a container for side-effects, which currently\n    // are limited to FontSets.\n    var env = _(this.env).defaults({\n        benchmark: false,\n        validation_data: false,\n        effects: [],\n        ppi: 90.714\n    });\n\n    if (!carto.tree.Reference.setVersion(this.options.mapnik_version)) {\n        throw new Error(\"Could not set mapnik version to \" + this.options.mapnik_version);\n    }\n\n    var output = [];\n\n    // Transform stylesheets into definitions.\n    var definitions = _(m.Stylesheet).chain()\n        .map(function(s) {\n            if (typeof s == 'string') {\n                throw new Error(\"Stylesheet object is expected not a string: '\" + s + \"'\");\n            }\n            // Passing the environment from stylesheet to stylesheet,\n            // allows frames and effects to be maintained.\n            env = _(env).extend({filename:s.id});\n\n            var time = +new Date(),\n                root = (carto.Parser(env)).parse(s.data);\n            if (env.benchmark)\n                console.warn('Parsing time: ' + (new Date() - time) + 'ms');\n            return root.toList(env);\n        })\n        .flatten()\n        .value();\n\n    function appliesTo(name, classIndex) {\n        return function(definition) {\n            return definition.appliesTo(l.name, classIndex);\n        };\n    }\n\n    // Iterate through layers and create styles custom-built\n    // for each of them, and apply those styles to the layers.\n    var styles, l, classIndex, rules, sorted, matching;\n    for (var i = 0; i < m.Layer.length; i++) {\n        l = m.Layer[i];\n        styles = [];\n        classIndex = {};\n\n        if (env.benchmark) console.warn('processing layer: ' + l.id);\n        // Classes are given as space-separated alphanumeric strings.\n        var classes = (l['class'] || '').split(/\\s+/g);\n        for (var j = 0; j < classes.length; j++) {\n            classIndex[classes[j]] = true;\n        }\n        matching = definitions.filter(appliesTo(l.name, classIndex));\n        rules = inheritDefinitions(matching, env);\n        sorted = sortStyles(rules, env);\n\n        for (var k = 0, rule, style_name; k < sorted.length; k++) {\n            rule = sorted[k];\n            style_name = l.name + (rule.attachment !== '__default__' ? '-' + rule.attachment : '');\n\n            // env.effects can be modified by this call\n            var styleXML = carto.tree.StyleXML(style_name, rule.attachment, rule, env);\n\n            if (styleXML) {\n                output.push(styleXML);\n                styles.push(style_name);\n            }\n        }\n\n        output.push(carto.tree.LayerXML(l, styles));\n    }\n\n    output.unshift(env.effects.map(function(e) {\n        return e.toXML(env);\n    }).join('\\n'));\n\n    var map_properties = getMapProperties(m, definitions, env);\n\n    // Exit on errors.\n    if (env.errors) throw env.errors;\n\n    // Pass TileJSON and other custom parameters through to Mapnik XML.\n    var parameters = _(m).reduce(function(memo, v, k) {\n        if (!v && v !== 0) return memo;\n\n        switch (k) {\n        // Known skippable properties.\n        case 'srs':\n        case 'Layer':\n        case 'Stylesheet':\n            break;\n        // Non URL-bound TileJSON properties.\n        case 'bounds':\n        case 'center':\n        case 'minzoom':\n        case 'maxzoom':\n        case 'version':\n            memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            break;\n        // Properties that require CDATA.\n        case 'name':\n        case 'description':\n        case 'legend':\n        case 'attribution':\n        case 'template':\n            memo.push('  <Parameter name=\"' + k + '\"><![CDATA[' + v + ']]></Parameter>');\n            break;\n        // Mapnik image format.\n        case 'format':\n            memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            break;\n        // Mapnik interactivity settings.\n        case 'interactivity':\n            memo.push('  <Parameter name=\"interactivity_layer\">' + v.layer + '</Parameter>');\n            memo.push('  <Parameter name=\"interactivity_fields\">' + v.fields + '</Parameter>');\n            break;\n        // Support any additional scalar properties.\n        default:\n            if ('string' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\"><![CDATA[' + v + ']]></Parameter>');\n            } else if ('number' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            } else if ('boolean' === typeof v) {\n                memo.push('  <Parameter name=\"' + k + '\">' + v + '</Parameter>');\n            }\n            break;\n        }\n        return memo;\n    }, []);\n    if (parameters.length) output.unshift(\n        '<Parameters>\\n' +\n        parameters.join('\\n') +\n        '\\n</Parameters>\\n'\n    );\n\n    var properties = _(map_properties).map(function(v) { return ' ' + v; }).join('');\n\n    output.unshift(\n        '<?xml version=\"1.0\" ' +\n        'encoding=\"utf-8\"?>\\n' +\n        '<!DOCTYPE Map[]>\\n' +\n        '<Map' + properties +'>\\n');\n    output.push('</Map>');\n    return output.join('\\n');\n};\n\n/**\n * This function currently modifies 'current'\n * @param {Array}  current  current list of rules\n * @param {Object} definition a Definition object to add to the rules\n * @param {Object} byFilter an object/dictionary of existing filters. This is\n * actually keyed `attachment->filter`\n * @param {Object} env the current environment\n*/\nfunction addRules(current, definition, byFilter, env) {\n    var newFilters = definition.filters,\n        newRules = definition.rules,\n        updatedFilters, clone, previous;\n\n    // The current definition might have been split up into\n    // multiple definitions already.\n    for (var k = 0; k < current.length; k++) {\n        updatedFilters = current[k].filters.cloneWith(newFilters);\n        if (updatedFilters) {\n            previous = byFilter[updatedFilters];\n            if (previous) {\n                // There's already a definition with those exact\n                // filters. Add the current definitions' rules\n                // and stop processing it as the existing rule\n                // has already gone down the inheritance chain.\n                previous.addRules(newRules);\n            } else {\n                clone = current[k].clone(updatedFilters);\n                // Make sure that we're only maintaining the clone\n                // when we did actually add rules. If not, there's\n                // no need to keep the clone around.\n                if (clone.addRules(newRules)) {\n                    // We inserted an element before this one, so we need\n                    // to make sure that in the next loop iteration, we're\n                    // not performing the same task for this element again,\n                    // hence the k++.\n                    byFilter[updatedFilters] = clone;\n                    current.splice(k, 0, clone);\n                    k++;\n                }\n            }\n        } else if (updatedFilters === null) {\n            // if updatedFilters is null, then adding the filters doesn't\n            // invalidate or split the selector, so we addRules to the\n            // combined selector\n\n            // Filters can be added, but they don't change the\n            // filters. This means we don't have to split the\n            // definition.\n            //\n            // this is cloned here because of shared classes, see\n            // sharedclass.mss\n            current[k] = current[k].clone();\n            current[k].addRules(newRules);\n        }\n        // if updatedFeatures is false, then the filters split the rule,\n        // so they aren't the same inheritance chain\n    }\n    return current;\n}\n\n/**\n * Apply inherited styles from their ancestors to them.\n *\n * called either once per render (in the case of mss) or per layer\n * (for mml)\n *\n * @param {Object} definitions - a list of definitions objects\n *   that contain .rules\n * @param {Object} env - the environment\n * @return {Array<Array>} an array of arrays is returned,\n *   in which each array refers to a specific attachment\n */\nfunction inheritDefinitions(definitions, env) {\n    var inheritTime = +new Date();\n    // definitions are ordered by specificity,\n    // high (index 0) to low\n    var byAttachment = {},\n        byFilter = {};\n    var result = [];\n    var current, previous, attachment;\n\n    // Evaluate the filters specified by each definition with the given\n    // environment to correctly resolve variable references\n    definitions.forEach(function(d) {\n        d.filters.ev(env);\n    });\n\n    for (var i = 0; i < definitions.length; i++) {\n\n        attachment = definitions[i].attachment;\n        current = [definitions[i]];\n\n        if (!byAttachment[attachment]) {\n            byAttachment[attachment] = [];\n            byAttachment[attachment].attachment = attachment;\n            byFilter[attachment] = {};\n            result.push(byAttachment[attachment]);\n        }\n\n        // Iterate over all subsequent rules.\n        for (var j = i + 1; j < definitions.length; j++) {\n            if (definitions[j].attachment === attachment) {\n                // Only inherit rules from the same attachment.\n                current = addRules(current, definitions[j], byFilter[attachment], env);\n            }\n        }\n\n        for (var k = 0; k < current.length; k++) {\n            byFilter[attachment][current[k].filters] = current[k];\n            byAttachment[attachment].push(current[k]);\n        }\n    }\n\n    if (env.benchmark) console.warn('Inheritance time: ' + ((new Date() - inheritTime)) + 'ms');\n\n    return result;\n\n}\n\n// Sort styles by the minimum index of their rules.\n// This sorts a slice of the styles, so it returns a sorted\n// array but does not change the input.\nfunction sortStylesIndex(a, b) { return b.index - a.index; }\nfunction sortStyles(styles, env) {\n    for (var i = 0; i < styles.length; i++) {\n        var style = styles[i];\n        style.index = Infinity;\n        for (var b = 0; b < style.length; b++) {\n            var rules = style[b].rules;\n            for (var r = 0; r < rules.length; r++) {\n                var rule = rules[r];\n                if (rule.index < style.index) {\n                    style.index = rule.index;\n                }\n            }\n        }\n    }\n\n    var result = styles.slice();\n    result.sort(sortStylesIndex);\n    return result;\n}\n\n/**\n * Find a rule like Map { background-color: #fff; },\n * if any, and return a list of properties to be inserted\n * into the <Map element of the resulting XML. Translates\n * properties of the mml object at `m` directly into XML\n * properties.\n *\n * @param {Object} m the mml object.\n * @param {Array} definitions the output of toList.\n * @param {Object} env\n * @return {String} rendered properties.\n */\nfunction getMapProperties(m, definitions, env) {\n    var rules = {};\n    var symbolizers = carto.tree.Reference.data.symbolizers.map;\n\n    _(m).each(function(value, key) {\n        if (key in symbolizers) rules[key] = key + '=\"' + value + '\"';\n    });\n\n    definitions.filter(function(r) {\n        return r.elements.join('') === 'Map';\n    }).forEach(function(r) {\n        for (var i = 0; i < r.rules.length; i++) {\n            var key = r.rules[i].name;\n            if (!(key in symbolizers)) {\n                env.error({\n                    message: 'Rule ' + key + ' not allowed for Map.',\n                    index: r.rules[i].index\n                });\n            }\n            rules[key] = r.rules[i].ev(env).toXML(env);\n        }\n    });\n    return rules;\n}\n\nmodule.exports = carto;\nmodule.exports.addRules = addRules;\nmodule.exports.inheritDefinitions = inheritDefinitions;\nmodule.exports.sortStyles = sortStyles;\n",
    "(function(carto) {\nvar tree = require('./tree');\nvar _ = global._ || require('underscore');\n\n\nfunction CartoCSS(style, options) {\n  this.options = options || {};\n  this.imageURLs = [];\n  if(style) {\n    this.setStyle(style);\n  }\n}\n\nCartoCSS.Layer = function(shader, options) {\n  this.options = options;\n  this.shader = shader;\n};\n\n\nCartoCSS.Layer.prototype = {\n\n  fullName: function() {\n    return this.shader.attachment;\n  },\n\n  name: function() {\n    return this.fullName().split('::')[0];\n  },\n\n  // frames this layer need to be rendered\n  frames: function() {\n    return this.shader.frames;\n  },\n\n  attachment: function() {\n    return this.fullName().split('::')[1];\n  },\n\n  eval: function(prop) {\n    var p = this.shader[prop];\n    if (!p || !p.style) return;\n    return p.style({}, { zoom: 0, 'frame-offset': 0 });\n  },\n\n  /*\n   * `props`: feature properties\n   * `context`: rendering properties, i.e zoom\n   */\n  getStyle: function(props, context) {\n    var style = {};\n    for(var i in this.shader) {\n      if(i !== 'attachment' && i !== 'zoom' && i !== 'frames' && i !== 'symbolizers') {\n        style[i] = this.shader[i].style(props, context);\n      }\n    }\n    return style;\n  },\n\n  /**\n   * return the symbolizers that need to be rendered with \n   * this style. The order is the rendering order.\n   * @returns a list with 3 possible values 'line', 'marker', 'polygon'\n   */\n  getSymbolizers: function() {\n    return this.shader.symbolizers;\n  },\n\n  /**\n   * returns if the style varies with some feature property.\n   * Useful to optimize rendering\n   */\n  isVariable: function() {\n    for(var i in this.shader) {\n      if(i !== 'attachment' && i !== 'zoom' && i !== 'frames' && i !== 'symbolizers') {\n        if (!this.shader[i].constant) {\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n\n  getShader: function() {\n    return this.shader;\n  },\n\n  /**\n   * returns true if a feature needs to be rendered\n   */\n  filter: function(featureType, props, context) {\n    for(var i in this.shader) {\n     var s = this.shader[i](props, context);\n     if(s) {\n       return true;\n     }\n    }\n    return false;\n  },\n\n  //\n  // given a geoemtry type returns the transformed one acording the CartoCSS\n  // For points there are two kind of types: point and sprite, the first one \n  // is a circle, second one is an image sprite\n  //\n  // the other geometry types are the same than geojson (polygon, linestring...)\n  //\n  transformGeometry: function(type) {\n    return type;\n  },\n\n  transformGeometries: function(geojson) {\n    return geojson;\n  }\n\n};\n\nCartoCSS.prototype = {\n\n  setStyle: function(style) {\n    var layers = this.parse(style);\n    if(!layers) {\n      throw new Error(this.parse_env.errors);\n    }\n    this.layers = layers.map(function(shader) {\n        return new CartoCSS.Layer(shader);\n    });\n  },\n\n  getLayers: function() {\n    return this.layers;\n  },\n\n  getDefault: function() {\n    return this.findLayer({ attachment: '__default__' });\n  },\n\n  findLayer: function(where) {\n    return _.find(this.layers, function(value) {\n      for (var key in where) {\n        var v = value[key];\n        if (typeof(v) === 'function') {\n          v = v.call(value);\n        }\n        if (where[key] !== v) return false;\n      }\n      return true;\n    });\n  },\n\n  _createFn: function(ops) {\n    var body = ops.join('\\n');\n    if(this.options.debug) console.log(body);\n    return Function(\"data\",\"ctx\", \"var _value = null; \" +  body + \"; return _value; \");\n  },\n\n  _compile: function(shader) {\n    if(typeof shader === 'string') {\n        shader = eval(\"(function() { return \" + shader +\"; })()\");\n    }\n    this.shader_src = shader;\n    for(var attr in shader) {\n        var c = mapper[attr];\n        if(c) {\n            this.compiled[c] = eval(\"(function() { return shader[attr]; })();\");\n        }\n    }\n  },\n  getImageURLs: function(){\n    return this.imageURLs;\n  },\n\n  parse: function(cartocss) {\n    var parse_env = {\n      frames: [],\n      errors: [],\n      error: function(obj) {\n        this.errors.push(obj);\n      }\n    };\n    this.parse_env = parse_env;\n\n    var ruleset = null;\n    try {\n      ruleset = (new carto.Parser(parse_env)).parse(cartocss);\n    } catch(e) {\n      // add the style.mss string to match the response from the server\n      parse_env.errors.push(e.message);\n      return;\n    }\n    if(ruleset) {\n\n      function defKey(def) {\n        return def.elements[0] + \"::\" + def.attachment;\n      }\n      var defs = ruleset.toList(parse_env);\n      defs.reverse();\n      // group by elements[0].value::attachment\n      var layers = {};\n      for(var i = 0; i < defs.length; ++i) {\n        var def = defs[i];\n        var key = defKey(def);\n        var layer = layers[key] = (layers[key] || {\n          symbolizers: []\n        });\n        for(var u = 0; u<def.rules.length; u++){\n            if(def.rules[u].name === \"marker-file\" || def.rules[u].name === \"point-file\"){\n                var value = def.rules[u].value.value[0].value[0].value.value;\n                this.imageURLs.push(value);\n            }\n        } \n        layer.frames = [];\n        layer.zoom = tree.Zoom.all;\n        var props = def.toJS(parse_env);\n        if (this.options.debug) console.log(\"props\", props);\n        for(var v in props) {\n          var lyr = layer[v] = layer[v] || {\n            constant: false,\n            symbolizer: null,\n            js: [],\n            index: 0\n          };\n          // build javascript statements\n          lyr.js.push(props[v].map(function(a) { return a.js; }).join('\\n'));\n          // get symbolizer for prop\n          lyr.symbolizer = _.first(props[v].map(function(a) { return a.symbolizer; }));\n          // serach the max index to know rendering order\n          lyr.index = _.max(props[v].map(function(a) { return a.index; }).concat(lyr.index));\n          lyr.constant = !_.any(props[v].map(function(a) { return !a.constant; }));\n        }\n      }\n\n      var ordered_layers = [];\n      if (this.options.debug) console.log(layers);\n\n      var done = {};\n      for(var i = 0; i < defs.length; ++i) {\n        var def = defs[i];\n        var k = defKey(def);\n        var layer = layers[k];\n        if(!done[k]) {\n          if(this.options.debug) console.log(\"**\", k);\n          for(var prop in layer) {\n            if (prop !== 'zoom' && prop !== 'frames' && prop !== 'symbolizers') {\n              if(this.options.debug) console.log(\"*\", prop);\n              layer[prop].style = this._createFn(layer[prop].js);\n              layer.symbolizers.push(layer[prop].symbolizer);\n              layer.symbolizers = _.uniq(layer.symbolizers);\n            }\n          }\n          layer.attachment = k;\n          ordered_layers.push(layer);\n          done[k] = true;\n        }\n        layer.zoom |= def.zoom;\n        layer.frames.push(def.frame_offset);\n      }\n\n      // uniq the frames\n      for(i = 0; i < ordered_layers.length; ++i) {\n        ordered_layers[i].frames = _.uniq(ordered_layers[i].frames);\n      }\n\n      return ordered_layers;\n\n    }\n    return null;\n  }\n};\n\n\ncarto.RendererJS = function (options) {\n    this.options = options || {};\n    this.options.mapnik_version = this.options.mapnik_version || 'latest';\n};\n\n// Prepare a javascript object which contains the layers\ncarto.RendererJS.prototype.render = function render(cartocss, callback) {\n    var reference = require('./torque-reference');\n    tree.Reference.setData(reference.version.latest);\n    return new CartoCSS(cartocss, this.options);\n}\n\nif(typeof(module) !== 'undefined') {\n  module.exports = carto.RendererJS;\n}\n\n\n})(require('../carto'));\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\ntree.Call = function Call(name, args, index) {\n    this.name = name;\n    this.args = args;\n    this.index = index;\n};\n\ntree.Call.prototype = {\n    is: 'call',\n    // When evuating a function call,\n    // we either find the function in `tree.functions` [1],\n    // in which case we call it, passing the  evaluated arguments,\n    // or we simply print it out as it appeared originally [2].\n    // The *functions.js* file contains the built-in functions.\n    // The reason why we evaluate the arguments, is in the case where\n    // we try to pass a variable to a function, like: `saturate(@color)`.\n    // The function should receive the value, not the variable.\n    'ev': function(env) {\n        var args = this.args.map(function(a) { return a.ev(env); });\n\n        for (var i = 0; i < args.length; i++) {\n            if (args[i].is === 'undefined') {\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n        }\n\n        if (this.name in tree.functions) {\n            if (tree.functions[this.name].length <= args.length) {\n                var val = tree.functions[this.name].apply(tree.functions, args);\n                if (val === null) {\n                    env.error({\n                        message: 'incorrect arguments given to ' + this.name + '()',\n                        index: this.index,\n                        type: 'runtime',\n                        filename: this.filename\n                    });\n                    return { is: 'undefined', value: 'undefined' };\n                }\n                return val;\n            } else {\n                env.error({\n                    message: 'incorrect number of arguments for ' + this.name +\n                        '(). ' + tree.functions[this.name].length + ' expected.',\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n        } else {\n            var fn = tree.Reference.mapnikFunctions[this.name];\n            if (fn === undefined) {\n                var functions = _.pairs(tree.Reference.mapnikFunctions);\n                // cheap closest, needs improvement.\n                var name = this.name;\n                var mean = functions.map(function(f) {\n                    return [f[0], tree.Reference.editDistance(name, f[0]), f[1]];\n                }).sort(function(a, b) {\n                    return a[1] - b[1];\n                });\n                env.error({\n                    message: 'unknown function ' + this.name + '(), did you mean ' +\n                        mean[0][0] + '(' + mean[0][2] + ')',\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n            if (fn !== args.length &&\n                !(Array.isArray(fn) && _.include(fn, args.length)) &&\n                // support variable-arg functions like `colorize-alpha`\n                fn !== -1) {\n                env.error({\n                    message: 'function ' + this.name + '() takes ' +\n                        fn + ' arguments and was given ' + args.length,\n                    index: this.index,\n                    type: 'runtime',\n                    filename: this.filename\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            } else {\n                // Save the evaluated versions of arguments\n                this.args = args;\n                return this;\n            }\n        }\n    },\n\n    toString: function(env, format) {\n        if (this.args.length) {\n            return this.name + '(' + this.args.join(',') + ')';\n        } else {\n            return this.name;\n        }\n    }\n};\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar assert = require('assert'),\n    _ = global._ || require('underscore');\n\n// A definition is the combination of a selector and rules, like\n// #foo {\n//     polygon-opacity:1.0;\n// }\n//\n// The selector can have filters\ntree.Definition = function Definition(selector, rules) {\n    this.elements = selector.elements;\n    assert.ok(selector.filters instanceof tree.Filterset);\n    this.rules = rules;\n    this.ruleIndex = {};\n    for (var i = 0; i < this.rules.length; i++) {\n        if ('zoom' in this.rules[i]) this.rules[i] = this.rules[i].clone();\n        this.rules[i].zoom = selector.zoom;\n        this.ruleIndex[this.rules[i].updateID()] = true;\n    }\n    this.filters = selector.filters;\n    this.zoom = selector.zoom;\n    this.frame_offset = selector.frame_offset;\n    this.attachment = selector.attachment || '__default__';\n    this.specificity = selector.specificity();\n};\n\ntree.Definition.prototype.toString = function() {\n    var str = this.filters.toString();\n    for (var i = 0; i < this.rules.length; i++) {\n        str += '\\n    ' + this.rules[i];\n    }\n    return str;\n};\n\ntree.Definition.prototype.clone = function(filters) {\n    if (filters) assert.ok(filters instanceof tree.Filterset);\n    var clone = Object.create(tree.Definition.prototype);\n    clone.rules = this.rules.slice();\n    clone.ruleIndex = _.clone(this.ruleIndex);\n    clone.filters = filters ? filters : this.filters.clone();\n    clone.attachment = this.attachment;\n    return clone;\n};\n\ntree.Definition.prototype.addRules = function(rules) {\n    var added = 0;\n\n    // Add only unique rules.\n    for (var i = 0; i < rules.length; i++) {\n        if (!this.ruleIndex[rules[i].id]) {\n            this.rules.push(rules[i]);\n            this.ruleIndex[rules[i].id] = true;\n            added++;\n        }\n    }\n\n    return added;\n};\n\n// Determine whether this selector matches a given id\n// and array of classes, by determining whether\n// all elements it contains match.\ntree.Definition.prototype.appliesTo = function(id, classes) {\n    for (var i = 0, l = this.elements.length; i < l; i++) {\n        var elem = this.elements[i];\n        if (!(elem.wildcard ||\n            (elem.type === 'class' && classes[elem.clean]) ||\n            (elem.type === 'id' && id === elem.clean))) return false;\n    }\n    return true;\n};\n\nfunction symbolizerName(symbolizer) {\n    function capitalize(str) { return str[1].toUpperCase(); }\n    return symbolizer.charAt(0).toUpperCase() +\n           symbolizer.slice(1).replace(/\\-./, capitalize) + 'Symbolizer';\n}\n\n// Get a simple list of the symbolizers, in order\nfunction symbolizerList(sym_order) {\n    return sym_order.sort(function(a, b) { return a[1] - b[1]; })\n        .map(function(v) { return v[0]; });\n}\n\ntree.Definition.prototype.symbolizersToXML = function(env, symbolizers, zoom) {\n    var xml = zoom.toXML(env).join('') + this.filters.toXML(env);\n\n    // Sort symbolizers by the index of their first property definition\n    var sym_order = [], indexes = [];\n    for (var key in symbolizers) {\n        indexes = [];\n        for (var prop in symbolizers[key]) {\n            indexes.push(symbolizers[key][prop].index);\n        }\n        var min_idx = Math.min.apply(Math, indexes);\n        sym_order.push([key, min_idx]);\n    }\n\n    sym_order = symbolizerList(sym_order);\n    var sym_count = 0;\n\n    for (var i = 0; i < sym_order.length; i++) {\n        var attributes = symbolizers[sym_order[i]];\n        var symbolizer = sym_order[i].split('/').pop();\n\n        // Skip the magical * symbolizer which is used for universal properties\n        // which are bubbled up to Style elements intead of Symbolizer elements.\n        if (symbolizer === '*') continue;\n        sym_count++;\n\n        var fail = tree.Reference.requiredProperties(symbolizer, attributes);\n        if (fail) {\n            var rule = attributes[Object.keys(attributes).shift()];\n            env.error({\n                message: fail,\n                index: rule.index,\n                filename: rule.filename\n            });\n        }\n\n        var name = symbolizerName(symbolizer);\n\n        var selfclosing = true, tagcontent;\n        xml += '    <' + name + ' ';\n        for (var j in attributes) {\n            if (symbolizer === 'map') env.error({\n                message: 'Map properties are not permitted in other rules',\n                index: attributes[j].index,\n                filename: attributes[j].filename\n            });\n            var x = tree.Reference.selector(attributes[j].name);\n            if (x && x.serialization && x.serialization === 'content') {\n                selfclosing = false;\n                tagcontent = attributes[j].ev(env).toXML(env, true);\n            } else if (x && x.serialization && x.serialization === 'tag') {\n                selfclosing = false;\n                tagcontent = attributes[j].ev(env).toXML(env, true);\n            } else {\n                xml += attributes[j].ev(env).toXML(env) + ' ';\n            }\n        }\n        if (selfclosing) {\n            xml += '/>\\n';\n        } else if (typeof tagcontent !== \"undefined\") {\n            if (tagcontent.indexOf('<') != -1) {\n                xml += '>' + tagcontent + '</' + name + '>\\n';\n            } else {\n                xml += '><![CDATA[' + tagcontent + ']]></' + name + '>\\n';\n            }\n        }\n    }\n    if (!sym_count || !xml) return '';\n    return '  <Rule>\\n' + xml + '  </Rule>\\n';\n};\n\n// Take a zoom range of zooms and 'i', the index of a rule in this.rules,\n// and finds all applicable symbolizers\ntree.Definition.prototype.collectSymbolizers = function(zooms, i) {\n    var symbolizers = {}, child;\n\n    for (var j = i; j < this.rules.length; j++) {\n        child = this.rules[j];\n        var key = child.instance + '/' + child.symbolizer;\n        if (zooms.current & child.zoom &&\n           (!(key in symbolizers) ||\n           (!(child.name in symbolizers[key])))) {\n            zooms.current &= child.zoom;\n            if (!(key in symbolizers)) {\n                symbolizers[key] = {};\n            }\n            symbolizers[key][child.name] = child;\n        }\n    }\n\n    if (Object.keys(symbolizers).length) {\n        zooms.rule &= (zooms.available &= ~zooms.current);\n        return symbolizers;\n    }\n};\n\n// The tree.Zoom.toString function ignores the holes in zoom ranges and outputs\n// scaledenominators that cover the whole range from the first to last bit set.\n// This algorithm can produces zoom ranges that may have holes. However,\n// when using the filter-mode=\"first\", more specific zoom filters will always\n// end up before broader ranges. The filter-mode will pick those first before\n// resorting to the zoom range with the hole and stop processing further rules.\ntree.Definition.prototype.toXML = function(env, existing) {\n    var filter = this.filters.toString();\n    if (!(filter in existing)) existing[filter] = tree.Zoom.all;\n\n    var available = tree.Zoom.all, xml = '', zoom, symbolizers,\n        zooms = { available: tree.Zoom.all };\n    for (var i = 0; i < this.rules.length && available; i++) {\n        zooms.rule = this.rules[i].zoom;\n        if (!(existing[filter] & zooms.rule)) continue;\n\n        while (zooms.current = zooms.rule & available) {\n            if (symbolizers = this.collectSymbolizers(zooms, i)) {\n                if (!(existing[filter] & zooms.current)) continue;\n                xml += this.symbolizersToXML(env, symbolizers,\n                    (new tree.Zoom()).setZoom(existing[filter] & zooms.current));\n                existing[filter] &= ~zooms.current;\n            }\n        }\n    }\n\n    return xml;\n};\n\ntree.Definition.prototype.toJS = function(env) {\n  var shaderAttrs = {};\n\n  // merge conditions from filters with zoom condition of the\n  // definition\n  var zoom = \"(\" + this.zoom + \" & (1 << ctx.zoom))\";\n  var frame_offset = this.frame_offset;\n  var _if = this.filters.toJS(env);\n  var filters = [zoom];\n  if(_if) filters.push(_if);\n  if(frame_offset) filters.push('ctx[\"frame-offset\"] === ' + frame_offset);\n  _if = filters.join(\" && \");\n  _.each(this.rules, function(rule) {\n      if(rule instanceof tree.Rule) {\n        shaderAttrs[rule.name] = shaderAttrs[rule.name] || [];\n\n        var r = {\n          index: rule.index,\n          symbolizer: rule.symbolizer\n        };\n\n        if (_if) {\n          r.js = \"if(\" + _if + \"){\" + rule.value.toJS(env) + \"}\"\n        } else {\n          r.js = rule.value.toJS(env);\n        }\n\n        r.constant = rule.value.ev(env).is !== 'field';\n        r.filtered = !!_if;\n\n        shaderAttrs[rule.name].push(r);\n      } else {\n        throw new Error(\"Ruleset not supported\");\n        //if (rule instanceof tree.Ruleset) {\n          //var sh = rule.toJS(env);\n          //for(var v in sh) {\n            //shaderAttrs[v] = shaderAttrs[v] || [];\n            //for(var attr in sh[v]) {\n              //shaderAttrs[v].push(sh[v][attr]);\n            //}\n          //}\n        //}\n      }\n  });\n  return shaderAttrs;\n};\n\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\n//\n// A number with a unit\n//\ntree.Dimension = function Dimension(value, unit, index) {\n    this.value = parseFloat(value);\n    this.unit = unit || null;\n    this.index = index;\n};\n\ntree.Dimension.prototype = {\n    is: 'float',\n    physical_units: ['m', 'cm', 'in', 'mm', 'pt', 'pc'],\n    screen_units: ['px', '%'],\n    all_units: ['m', 'cm', 'in', 'mm', 'pt', 'pc', 'px', '%'],\n    densities: {\n        m: 0.0254,\n        mm: 25.4,\n        cm: 2.54,\n        pt: 72,\n        pc: 6\n    },\n    ev: function (env) {\n        if (this.unit && !_.contains(this.all_units, this.unit)) {\n            env.error({\n                message: \"Invalid unit: '\" + this.unit + \"'\",\n                index: this.index\n            });\n            return { is: 'undefined', value: 'undefined' };\n        }\n\n        // normalize units which are not px or %\n        if (this.unit && _.contains(this.physical_units, this.unit)) {\n            if (!env.ppi) {\n                env.error({\n                    message: \"ppi is not set, so metric units can't be used\",\n                    index: this.index\n                });\n                return { is: 'undefined', value: 'undefined' };\n            }\n            // convert all units to inch\n            // convert inch to px using ppi\n            this.value = (this.value / this.densities[this.unit]) * env.ppi;\n            this.unit = 'px';\n        }\n\n        return this;\n    },\n    round: function() {\n        this.value = Math.round(this.value);\n        return this;\n    },\n    toColor: function() {\n        return new tree.Color([this.value, this.value, this.value]);\n    },\n    round: function() {\n        this.value = Math.round(this.value);\n        return this;\n    },\n    toString: function() {\n        return this.value.toString();\n    },\n    operate: function(env, op, other) {\n        if (this.unit === '%' && other.unit !== '%') {\n            env.error({\n                message: 'If two operands differ, the first must not be %',\n                index: this.index\n            });\n            return {\n                is: 'undefined',\n                value: 'undefined'\n            };\n        }\n\n        if (this.unit !== '%' && other.unit === '%') {\n            if (op === '*' || op === '/' || op === '%') {\n                env.error({\n                    message: 'Percent values can only be added or subtracted from other values',\n                    index: this.index\n                });\n                return {\n                    is: 'undefined',\n                    value: 'undefined'\n                };\n            }\n\n            return new tree.Dimension(tree.operate(op,\n                    this.value, this.value * other.value * 0.01),\n                this.unit);\n        }\n\n        //here the operands are either the same (% or undefined or px), or one is undefined and the other is px\n        return new tree.Dimension(tree.operate(op, this.value, other.value),\n            this.unit || other.unit);\n    }\n};\n\n})(require('../tree'));\n",
    "var tree = require('../tree');\nvar _ = global._ || require('underscore');\n\ntree.Filterset = function Filterset() {\n    this.filters = {};\n};\n\ntree.Filterset.prototype.toXML = function(env) {\n    var filters = [];\n    for (var id in this.filters) {\n        filters.push('(' + this.filters[id].toXML(env).trim() + ')');\n    }\n    if (filters.length) {\n        return '    <Filter>' + filters.join(' and ') + '</Filter>\\n';\n    } else {\n        return '';\n    }\n};\n\ntree.Filterset.prototype.toString = function() {\n    var arr = [];\n    for (var id in this.filters) arr.push(this.filters[id].id);\n    return arr.sort().join('\\t');\n};\n\ntree.Filterset.prototype.ev = function(env) {\n    for (var i in this.filters) {\n        this.filters[i].ev(env);\n    }\n    return this;\n};\n\ntree.Filterset.prototype.clone = function() {\n    var clone = new tree.Filterset();\n    for (var id in this.filters) {\n        clone.filters[id] = this.filters[id];\n    }\n    return clone;\n};\n\n// Note: other has to be a tree.Filterset.\ntree.Filterset.prototype.cloneWith = function(other) {\n    var additions = [];\n    for (var id in other.filters) {\n        var status = this.addable(other.filters[id]);\n        // status is true, false or null. if it's null we don't fail this\n        // clone nor do we add the filter.\n        if (status === false) {\n            return false;\n        }\n        if (status === true) {\n            // Adding the filter will override another value.\n            additions.push(other.filters[id]);\n        }\n    }\n\n    // Adding the other filters doesn't make this filterset invalid, but it\n    // doesn't add anything to it either.\n    if (!additions.length) {\n        return null;\n    }\n\n    // We can successfully add all filters. Now clone the filterset and add the\n    // new rules.\n    var clone = new tree.Filterset();\n\n    // We can add the rules that are already present without going through the\n    // add function as a Filterset is always in it's simplest canonical form.\n    for (id in this.filters) {\n        clone.filters[id] = this.filters[id];\n    }\n\n    // Only add new filters that actually change the filter.\n    while (id = additions.shift()) {\n        clone.add(id);\n    }\n\n    return clone;\n};\n\ntree.Filterset.prototype.toJS = function(env) {\n  var opMap = {\n    '=': '==='\n  };\n  return _.map(this.filters, function(filter) {\n    var op = filter.op;\n    if(op in opMap) {\n      op = opMap[op];\n    }\n    var val = filter.val;\n    if(filter._val !== undefined) {\n      val = filter._val.toString(true);\n    }\n    var attrs = \"data\";\n    return attrs + \".\" + filter.key.value  + \" \" + op + \" \" + (val.is === 'string' ? \"'\" + val.toString().replace(/'/g, \"\\\\'\") + \"'\" : val);\n  }).join(' && ');\n};\n\n// Returns true when the new filter can be added, false otherwise.\n// It can also return null, and on the other side we test for === true or\n// false\ntree.Filterset.prototype.addable = function(filter) {\n    var key = filter.key.toString(),\n        value = filter.val.toString();\n\n    if (value.match(/^[0-9]+(\\.[0-9]*)?$/)) value = parseFloat(value);\n\n    switch (filter.op) {\n        case '=':\n            // if there is already foo= and we're adding foo=\n            if (this.filters[key + '='] !== undefined) {\n                if (this.filters[key + '='].val.toString() != value) {\n                    return false;\n                } else {\n                    return null;\n                }\n            }\n            if (this.filters[key + '!=' + value] !== undefined) return false;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '>='] !== undefined  && this.filters[key + '>='].val > value) return false;\n            if (this.filters[key + '<='] !== undefined  && this.filters[key + '<='].val < value) return false;\n            return true;\n\n        case '=~':\n            return true;\n\n        case '!=':\n            if (this.filters[key + '='] !== undefined) return (this.filters[key + '='].val == value) ? false : null;\n            if (this.filters[key + '!=' + value] !== undefined) return null;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return null;\n            return true;\n\n        case '>':\n            if (key + '=' in this.filters) {\n                if (this.filters[key + '='].val <= value) {\n                    return false;\n                } else {\n                    return null;\n                }\n            }\n            if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '<='] !== undefined  && this.filters[key + '<='].val <= value) return false;\n            if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '>='] !== undefined  && this.filters[key + '>='].val > value) return null;\n            return true;\n\n        case '>=':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val < value) ? false : null;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return false;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return false;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return null;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) return null;\n            return true;\n\n        case '<':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val >= value) ? false : null;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) return false;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) return null;\n            return true;\n\n        case '<=':\n            if (this.filters[key + '=' ] !== undefined) return (this.filters[key + '='].val > value) ? false : null;\n            if (this.filters[key + '>' ] !== undefined && this.filters[key + '>'].val >= value) return false;\n            if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) return false;\n            if (this.filters[key + '<' ] !== undefined && this.filters[key + '<'].val <= value) return null;\n            if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val <= value) return null;\n            return true;\n    }\n};\n\n// Does the new filter constitute a conflict?\ntree.Filterset.prototype.conflict = function(filter) {\n    var key = filter.key.toString(),\n        value = filter.val.toString();\n\n    if (!isNaN(parseFloat(value))) value = parseFloat(value);\n\n    // if (a=b) && (a=c)\n    // if (a=b) && (a!=b)\n    // or (a!=b) && (a=b)\n    if ((filter.op === '=' && this.filters[key + '='] !== undefined &&\n        value != this.filters[key + '='].val.toString()) ||\n        (filter.op === '!=' && this.filters[key + '='] !== undefined &&\n        value == this.filters[key + '='].val.toString()) ||\n        (filter.op === '=' && this.filters[key + '!='] !== undefined &&\n        value == this.filters[key + '!='].val.toString())) {\n        return filter.toString() + ' added to ' + this.toString() + ' produces an invalid filter';\n    }\n\n    return false;\n};\n\n// Only call this function for filters that have been cleared by .addable().\ntree.Filterset.prototype.add = function(filter, env) {\n    var key = filter.key.toString(),\n        id,\n        op = filter.op,\n        conflict = this.conflict(filter),\n        numval;\n\n    if (conflict) return conflict;\n\n    if (op === '=') {\n        for (var i in this.filters) {\n            if (this.filters[i].key == key) delete this.filters[i];\n        }\n        this.filters[key + '='] = filter;\n    } else if (op === '!=') {\n        this.filters[key + '!=' + filter.val] = filter;\n    } else if (op === '=~') {\n        this.filters[key + '=~' + filter.val] = filter;\n    } else if (op === '>') {\n        // If there are other filters that are also >\n        // but are less than this one, they don't matter, so\n        // remove them.\n        for (var j in this.filters) {\n            if (this.filters[j].key == key && this.filters[j].val <= filter.val) {\n                delete this.filters[j];\n            }\n        }\n        this.filters[key + '>'] = filter;\n    } else if (op === '>=') {\n        for (var k in this.filters) {\n            numval = (+this.filters[k].val.toString());\n            if (this.filters[k].key == key && numval < filter.val) {\n                delete this.filters[k];\n            }\n        }\n        if (this.filters[key + '!=' + filter.val] !== undefined) {\n            delete this.filters[key + '!=' + filter.val];\n            filter.op = '>';\n            this.filters[key + '>'] = filter;\n        }\n        else {\n            this.filters[key + '>='] = filter;\n        }\n    } else if (op === '<') {\n        for (var l in this.filters) {\n            numval = (+this.filters[l].val.toString());\n            if (this.filters[l].key == key && numval >= filter.val) {\n                delete this.filters[l];\n            }\n        }\n        this.filters[key + '<'] = filter;\n    } else if (op === '<=') {\n        for (var m in this.filters) {\n            numval = (+this.filters[m].val.toString());\n            if (this.filters[m].key == key && numval > filter.val) {\n                delete this.filters[m];\n            }\n        }\n        if (this.filters[key + '!=' + filter.val] !== undefined) {\n            delete this.filters[key + '!=' + filter.val];\n            filter.op = '<';\n            this.filters[key + '<'] = filter;\n        }\n        else {\n            this.filters[key + '<='] = filter;\n        }\n    }\n};\n",
    "// Carto pulls in a reference from the `mapnik-reference`\n// module. This file builds indexes from that file for its various\n// options, and provides validation methods for property: value\n// combinations.\n(function(tree) {\n\nvar _ = global._ || require('underscore'),\n    ref = {};\n\nref.setData = function(data) {\n    ref.data = data;\n    ref.selector_cache = generateSelectorCache(data);\n    ref.mapnikFunctions = generateMapnikFunctions(data);\n\n    ref.mapnikFunctions.matrix = [6];\n    ref.mapnikFunctions.translate = [1, 2];\n    ref.mapnikFunctions.scale = [1, 2];\n    ref.mapnikFunctions.rotate = [1, 3];\n    ref.mapnikFunctions.skewX = [1];\n    ref.mapnikFunctions.skewY = [1];\n\n    ref.required_cache = generateRequiredProperties(data);\n};\n\nref.setVersion = function(version) {\n    var mapnik_reference = require('mapnik-reference');\n    if (mapnik_reference.version.hasOwnProperty(version)) {\n        ref.setData(mapnik_reference.version[version]);\n        return true;\n    } else {\n        return false;\n    }\n};\n\nref.selectorData = function(selector, i) {\n    if (ref.selector_cache[selector]) return ref.selector_cache[selector][i];\n};\n\nref.validSelector = function(selector) { return !!ref.selector_cache[selector]; };\nref.selectorName = function(selector) { return ref.selectorData(selector, 2); };\nref.selector = function(selector) { return ref.selectorData(selector, 0); };\nref.symbolizer = function(selector) { return ref.selectorData(selector, 1); };\n\nfunction generateSelectorCache(data) {\n    var index = {};\n    for (var i in data.symbolizers) {\n        for (var j in data.symbolizers[i]) {\n            if (data.symbolizers[i][j].hasOwnProperty('css')) {\n                index[data.symbolizers[i][j].css] = [data.symbolizers[i][j], i, j];\n            }\n        }\n    }\n    return index;\n}\n\nfunction generateMapnikFunctions(data) {\n    var functions = {};\n    for (var i in data.symbolizers) {\n        for (var j in data.symbolizers[i]) {\n            if (data.symbolizers[i][j].type === 'functions') {\n                for (var k = 0; k < data.symbolizers[i][j].functions.length; k++) {\n                    var fn = data.symbolizers[i][j].functions[k];\n                    functions[fn[0]] = fn[1];\n                }\n            }\n        }\n    }\n    return functions;\n}\n\nfunction generateRequiredProperties(data) {\n    var cache = {};\n    for (var symbolizer_name in data.symbolizers) {\n        cache[symbolizer_name] = [];\n        for (var j in data.symbolizers[symbolizer_name]) {\n            if (data.symbolizers[symbolizer_name][j].required) {\n                cache[symbolizer_name].push(data.symbolizers[symbolizer_name][j].css);\n            }\n        }\n    }\n    return cache;\n}\n\nref.requiredProperties = function(symbolizer_name, rules) {\n    var req = ref.required_cache[symbolizer_name];\n    for (var i in req) {\n        if (!(req[i] in rules)) {\n            return 'Property ' + req[i] + ' required for defining ' +\n                symbolizer_name + ' styles.';\n        }\n    }\n};\n\n// TODO: finish implementation - this is dead code\nref._validateValue = {\n    'font': function(env, value) {\n        if (env.validation_data && env.validation_data.fonts) {\n            return env.validation_data.fonts.indexOf(value) != -1;\n        } else {\n            return true;\n        }\n    }\n};\n\nref.isFont = function(selector) {\n    return ref.selector(selector).validate == 'font';\n};\n\n// https://gist.github.com/982927\nref.editDistance = function(a, b){\n    if (a.length === 0) return b.length;\n    if (b.length === 0) return a.length;\n    var matrix = [];\n    for (var i = 0; i <= b.length; i++) { matrix[i] = [i]; }\n    for (var j = 0; j <= a.length; j++) { matrix[0][j] = j; }\n    for (i = 1; i <= b.length; i++) {\n        for (j = 1; j <= a.length; j++) {\n            if (b.charAt(i-1) == a.charAt(j-1)) {\n                matrix[i][j] = matrix[i-1][j-1];\n            } else {\n                matrix[i][j] = Math.min(matrix[i-1][j-1] + 1, // substitution\n                    Math.min(matrix[i][j-1] + 1, // insertion\n                    matrix[i-1][j] + 1)); // deletion\n            }\n        }\n    }\n    return matrix[b.length][a.length];\n};\n\nfunction validateFunctions(value, selector) {\n    if (value.value[0].is === 'string') return true;\n    for (var i in value.value) {\n        for (var j in value.value[i].value) {\n            if (value.value[i].value[j].is !== 'call') return false;\n            var f = _.find(ref\n                .selector(selector).functions, function(x) {\n                    return x[0] == value.value[i].value[j].name;\n                });\n            if (!(f && f[1] == -1)) {\n                // This filter is unknown or given an incorrect number of arguments\n                if (!f || f[1] !== value.value[i].value[j].args.length) return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction validateKeyword(value, selector) {\n    if (typeof ref.selector(selector).type === 'object') {\n        return ref.selector(selector).type\n            .indexOf(value.value[0].value) !== -1;\n    } else {\n        // allow unquoted keywords as strings\n        return ref.selector(selector).type === 'string';\n    }\n}\n\nref.validValue = function(env, selector, value) {\n    var i, j;\n    // TODO: handle in reusable way\n    if (!ref.selector(selector)) {\n        return false;\n    } else if (value.value[0].is == 'keyword') {\n        return validateKeyword(value, selector);\n    } else if (value.value[0].is == 'undefined') {\n        // caught earlier in the chain - ignore here so that\n        // error is not overridden\n        return true;\n    } else if (ref.selector(selector).type == 'numbers') {\n        for (i in value.value) {\n            if (value.value[i].is !== 'float') {\n                return false;\n            }\n        }\n        return true;\n    } else if (ref.selector(selector).type == 'tags') {\n        if (!value.value) return false;\n        if (!value.value[0].value) {\n            return value.value[0].is === 'tag';\n        }\n        for (i = 0; i < value.value[0].value.length; i++) {\n            if (value.value[0].value[i].is !== 'tag') return false;\n        }\n        return true;\n    } else if (ref.selector(selector).type == 'functions') {\n        // For backwards compatibility, you can specify a string for `functions`-compatible\n        // values, though they will not be validated.\n        return validateFunctions(value, selector);\n    } else if (ref.selector(selector).type === 'unsigned') {\n        if (value.value[0].is === 'float') {\n            value.value[0].round();\n            return true;\n        } else {\n            return false;\n        }\n    } else if ((ref.selector(selector).expression)) {\n        return true;\n    } else {\n        if (ref.selector(selector).validate) {\n            var valid = false;\n            for (i = 0; i < value.value.length; i++) {\n                if (ref.selector(selector).type == value.value[i].is &&\n                    ref\n                        ._validateValue\n                            [ref.selector(selector).validate]\n                            (env, value.value[i].value)) {\n                    return true;\n                }\n            }\n            return valid;\n        } else {\n            return ref.selector(selector).type == value.value[0].is;\n        }\n    }\n};\n\ntree.Reference = ref;\n\n})(require('../tree'));\n",
    "(function(tree) {\nvar _ = global._ || require('underscore');\n\n// Given a style's name, attachment, definitions, and an environment object,\n// return a stringified style for Mapnik\ntree.StyleXML = function(name, attachment, definitions, env) {\n    var existing = {};\n    var image_filters = [], image_filters_inflate = [], direct_image_filters = [], comp_op = [], opacity = [];\n\n    for (var i = 0; i < definitions.length; i++) {\n        for (var j = 0; j < definitions[i].rules.length; j++) {\n            if (definitions[i].rules[j].name === 'image-filters') {\n                image_filters.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'image-filters-inflate') {\n                image_filters_inflate.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'direct-image-filters') {\n                direct_image_filters.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'comp-op') {\n                comp_op.push(definitions[i].rules[j]);\n            }\n            if (definitions[i].rules[j].name === 'opacity') {\n                opacity.push(definitions[i].rules[j]);\n            }\n        }\n    }\n\n    var rules = definitions.map(function(definition) {\n        return definition.toXML(env, existing);\n    });\n\n    var attrs_xml = '';\n\n    if (image_filters.length) {\n        attrs_xml += ' image-filters=\"' + _.chain(image_filters)\n            // prevent identical filters from being duplicated in the style\n            .uniq(function(i) { return i.id; }).map(function(f) {\n            return f.ev(env).toXML(env, true, ',', 'image-filter');\n        }).value().join(',') + '\"';\n    }\n\n    if (image_filters_inflate.length) {\n        attrs_xml += ' image-filters-inflate=\"' + image_filters_inflate[0].value.ev(env).toString() + '\"';\n    }\n\n    if (direct_image_filters.length) {\n        attrs_xml += ' direct-image-filters=\"' + _.chain(direct_image_filters)\n            // prevent identical filters from being duplicated in the style\n            .uniq(function(i) { return i.id; }).map(function(f) {\n            return f.ev(env).toXML(env, true, ',', 'direct-image-filter');\n        }).value().join(',') + '\"';\n    }\n\n    if (comp_op.length && comp_op[0].value.ev(env).value != 'src-over') {\n        attrs_xml += ' comp-op=\"' + comp_op[0].value.ev(env).toString() + '\"';\n    }\n\n    if (opacity.length && opacity[0].value.ev(env).value != 1) {\n        attrs_xml += ' opacity=\"' + opacity[0].value.ev(env).toString() + '\"';\n    }\n    var rule_string = rules.join('');\n    if (!attrs_xml && !rule_string) return '';\n    return '<Style name=\"' + name + '\" filter-mode=\"first\"' + attrs_xml + '>\\n' + rule_string + '</Style>';\n};\n\n})(require('../tree'));\n",
    "var fs = require('fs'),\n    path = require('path'),\n    existsSync = require('fs').existsSync || require('path').existsSync;\n\n// Load all stated versions into the module exports\nmodule.exports.version = {};\n\nvar refs = [\n '2.0.0',\n '2.0.1',\n '2.0.2',\n '2.1.0',\n '2.1.1',\n '2.2.0',\n '2.3.0',\n '3.0.0'\n];\n\nrefs.map(function(version) {\n    module.exports.version[version] = require(path.join(__dirname, version, 'reference.json'));\n    var ds_path = path.join(__dirname, version, 'datasources.json');\n    if (existsSync(ds_path)) {\n        module.exports.version[version].datasources = require(ds_path).datasources;\n    }\n});\n",
    "module.exports={\n  \"name\": \"carto\",\n  \"version\": \"0.15.1-cdb1\",\n  \"description\": \"CartoCSS Stylesheet Compiler\",\n  \"url\": \"https://github.com/cartodb/carto\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+ssh://git@github.com/cartodb/carto.git\"\n  },\n  \"author\": {\n    \"name\": \"CartoDB\",\n    \"url\": \"http://cartodb.com/\"\n  },\n  \"keywords\": [\n    \"maps\",\n    \"css\",\n    \"stylesheets\"\n  ],\n  \"contributors\": [\n    {\n      \"name\": \"Tom MacWright\",\n      \"email\": \"macwright@gmail.com\"\n    },\n    {\n      \"name\": \"Konstantin Käfer\"\n    },\n    {\n      \"name\": \"Alexis Sellier\",\n      \"email\": \"self@cloudhead.net\"\n    },\n    {\n      \"name\": \"Raul Ochoa\",\n      \"email\": \"rochoa@cartodb.com\"\n    },\n    {\n      \"name\": \"Javi Santana\",\n      \"email\": \"jsantana@cartodb.com\"\n    }\n  ],\n  \"licenses\": [\n    {\n      \"type\": \"Apache\"\n    }\n  ],\n  \"bin\": {\n    \"carto\": \"./bin/carto\"\n  },\n  \"man\": [\n    \"./man/carto.1\"\n  ],\n  \"main\": \"./lib/carto/index\",\n  \"engines\": {\n    \"node\": \">=0.4.x\"\n  },\n  \"dependencies\": {\n    \"underscore\": \"~1.6.0\",\n    \"mapnik-reference\": \"~6.0.2\",\n    \"optimist\": \"~0.6.0\"\n  },\n  \"devDependencies\": {\n    \"mocha\": \"1.12.x\",\n    \"jshint\": \"0.2.x\",\n    \"sax\": \"0.1.x\",\n    \"istanbul\": \"~0.2.14\",\n    \"coveralls\": \"~2.10.1\",\n    \"browserify\": \"~7.0.0\",\n    \"uglify-js\": \"1.3.3\"\n  },\n  \"scripts\": {\n    \"pretest\": \"npm install\",\n    \"test\": \"mocha -R spec\",\n    \"coverage\": \"istanbul cover ./node_modules/.bin/_mocha && coveralls < ./coverage/lcov.info\"\n  },\n  \"readme\": \"# CartoCSS\\n\\n[![Build Status](https://secure.travis-ci.org/mapbox/carto.png)](http://travis-ci.org/mapbox/carto)\\n\\nIs as stylesheet renderer for javascript, It's an evolution of the Mapnik renderer from Mapbox.\\nPlease, see original [Mapbox repo](http://github.com/mapbox/carto) for more information and credits\\n\\n## Quick Start\\n\\n```javascript\\n// shader is a CartoCSS object\\n\\nvar cartocss = [\\n    '#layer {',\\n    ' marker-width: [property]',\\n    ' marker-fill: red',\\n    '}'\\n].join('')\\nvar shader = new carto.RendererJS().render(cartocss);\\nvar layers = shader.getLayers()\\nfor (var i = 0; i < layers.length; ++i) {\\n    var layer = layers[i];\\n    console.log(\\\"layer name: \\\", layer.fullName())\\n    console.log(\\\"- frames: \\\", layer.frames())\\n    console.log(\\\"- attachment: \\\", layer.attachment())\\n\\n    var layerShader = layer.getStyle({ property: 1 }, { zoom: 10 })\\n    console.log(layerShader['marker-width']) // 1\\n    console.log(layerShader['marker-fill']) // #FF0000\\n}\\n\\n```\\n\\n# API\\n\\n## RendererJS\\n\\n### render(cartocss)\\n\\n## CartoCSS\\n\\ncompiled cartocss object\\n\\n### getLayers\\n\\nreturn the layers, an array of ``CartoCSS.Layer`` object\\n\\n### getDefault\\n\\nreturn the default layer (``CartoCSS.Layer``), usually the Map layer\\n\\n\\n### findLayer(where)\\n\\nfind a layer using where object.\\n\\n```\\nshader.findLayer({ name: 'test' })\\n```\\n\\n## CartoCSS.Layer\\n\\n### getStyle(props, context)\\n\\nreturn the evaluated style:\\n    - props: object containing properties needed to render the style. If the cartocss style uses\\n      some variables they should be passed in this object\\n    - context: rendering context variables like ``zoom`` or animation ``frame``\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n## Reference Documentation\\n\\n* [mapbox.com/carto](http://mapbox.com/carto/)\\n\\n\\n\",\n  \"readmeFilename\": \"README.md\",\n  \"bugs\": {\n    \"url\": \"https://github.com/cartodb/carto/issues\"\n  },\n  \"homepage\": \"https://github.com/cartodb/carto#readme\",\n  \"_id\": \"carto@0.15.1-cdb1\",\n  \"_shasum\": \"b84c5270f0de5c2a296ca6fd0695353d51fb9ec9\",\n  \"_resolved\": \"https://github.com/CartoDB/carto/archive/master.tar.gz\",\n  \"_from\": \"https://github.com/CartoDB/carto/archive/master.tar.gz\"\n}\n",
    "//     Underscore.js 1.8.3\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.3';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result — either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  var property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = property('length');\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given item (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n    return _.indexOf(obj, item, fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = getLength(array); i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, getLength).length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = getLength(list); i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createPredicateIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = getLength(array);\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createPredicateIndexFinder(1);\n  _.findLastIndex = createPredicateIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = getLength(array);\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generator function to create the indexOf and lastIndexOf functions\n  function createIndexFinder(dir, predicateFind, sortedIndex) {\n    return function(array, item, idx) {\n      var i = 0, length = getLength(array);\n      if (typeof idx == 'number') {\n        if (dir > 0) {\n            i = idx >= 0 ? idx : Math.max(idx + length, i);\n        } else {\n            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n        }\n      } else if (sortedIndex && idx && length) {\n        idx = sortedIndex(array, item);\n        return array[idx] === item ? idx : -1;\n      }\n      if (item !== item) {\n        idx = predicateFind(slice.call(array, i, length), _.isNaN);\n        return idx >= 0 ? idx + i : -1;\n      }\n      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n        if (array[idx] === item) return idx;\n      }\n      return -1;\n    };\n  }\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);\n  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (stop == null) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Creates an object that inherits from the given prototype object.\n  // If additional properties are provided then they will be added to the\n  // created object.\n  _.create = function(prototype, props) {\n    var result = baseCreate(prototype);\n    if (props) _.extendOwn(result, props);\n    return result;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = property;\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of\n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));\n",
    "module.exports={\n  \"name\": \"cartodb.js\",\n  \"version\": \"4.0.0-alpha.1\",\n  \"description\": \"CartoDB javascript library\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git://github.com/CartoDB/cartodb.js.git\"\n  },\n  \"author\": {\n    \"name\": \"CartoDB\",\n    \"url\": \"http://cartodb.com/\",\n    \"email\": \"wadus@cartodb.com\"\n  },\n  \"contributors\": [\n    \"Javier Álvarez <jmedina@cartodb.com>\",\n    \"Javier Álvarez <xabel@vizzuality.com>\",\n    \"Javier Arce <javierarce@cartodb.com>\",\n    \"Javier Santana <jsantana@cartodb.com>\",\n    \"Raul Ochoa <rochoa@cartodb.com>\",\n    \"Carlos Matallín <matallo@cartodb.com>\",\n    \"Jaime Chapinal <jaime.chapinal@cartodb.com>\",\n    \"Nicklas Gummesson <nicklas@cartodb.com>\",\n    \"Francisco Dans <francisco@cartodb.com>\",\n    \"Emilio García <emilio@cartodb.com>\"\n  ],\n  \"licenses\": [\n    {\n      \"type\": \"BSD\"\n    }\n  ],\n  \"dependencies\": {\n    \"backbone\": \"1.2.3\",\n    \"browserify-shim\": \"3.8.10\",\n    \"jquery\": \"2.1.4\",\n    \"jstify\": \"0.12.0\",\n    \"leaflet\": \"0.7.3\",\n    \"mustache\": \"1.1.0\",\n    \"perfect-scrollbar\": \"0.6.7\",\n    \"torque.js\": \"2.15.1\",\n    \"underscore\": \"1.8.3\",\n    \"cartoassets\": \"CartoDB/CartoAssets#master\",\n    \"d3\": \"3.5.8\",\n    \"d3.cartodb\": \"CartoDB/d3.cartodb#gh-pages\"\n  },\n  \"devDependencies\": {\n    \"browserify\": \"11.2.0\",\n    \"findup-sync\": \"0.1.3\",\n    \"grunt\": \"0.4.5\",\n    \"grunt-aws\": \"^0.4.0\",\n    \"grunt-browserify\": \"4.0.1\",\n    \"grunt-contrib-clean\": \"~0.5.0\",\n    \"grunt-contrib-concat\": \"~0.3.0\",\n    \"grunt-contrib-connect\": \"~0.11.2\",\n    \"grunt-contrib-copy\": \"~0.7.0\",\n    \"grunt-contrib-cssmin\": \"~0.7.0\",\n    \"grunt-contrib-imagemin\": \"~1.0.0\",\n    \"grunt-contrib-jasmine\": \"0.9.2\",\n    \"grunt-contrib-jshint\": \"~0.8.0\",\n    \"grunt-contrib-uglify\": \"0.10.0\",\n    \"grunt-contrib-watch\": \"git://github.com/gruntjs/grunt-contrib-watch.git#b884948805940c663b1cbb91a3c28ba8afdebf78\",\n    \"grunt-exorcise\": \"2.1.0\",\n    \"grunt-fastly\": \"~0.1.3\",\n    \"grunt-gitinfo\": \"~0.1.7\",\n    \"grunt-prompt\": \"~1.3.0\",\n    \"grunt-replace\": \"0.6.2\",\n    \"grunt-sass\": \"~1.1.0-beta\",\n    \"gulp\": \"3.8.10\",\n    \"gulp-iconfont\": \"1.0.0\",\n    \"gulp-iconfont-css\": \"0.0.9\",\n    \"gulp-install\": \"0.2.0\",\n    \"gulp-sketch\": \"0.0.7\",\n    \"jshint-stylish\": \"~0.1.3\",\n    \"load-grunt-tasks\": \"~0.6.0\",\n    \"semistandard\": \"7.0.4\",\n    \"semver\": \"~4.1.0\",\n    \"source-map-support\": \"0.3.2\",\n    \"time-grunt\": \"~0.3.1\",\n    \"watchify\": \"3.4.0\"\n  },\n  \"browserify\": {\n    \"transform\": [\n      \"browserify-shim\",\n      \"jstify\"\n    ]\n  },\n  \"browser\": {\n    \"cdb\": \"./src/cdb.js\",\n    \"cdb.config\": \"./src/cdb.config.js\",\n    \"cdb.core.util\": \"./src/core/util.js\",\n    \"cdb.core.Profiler\": \"./src/core/profiler.js\",\n    \"cdb.log\": \"./src/cdb.log.js\",\n    \"cdb.errors\": \"./src/cdb.errors.js\",\n    \"cdb.templates\": \"./src/cdb.templates.js\",\n    \"geojson\": \"./vendor/GeoJSON.js\",\n    \"html-css-sanitizer\": \"./vendor/html-css-sanitizer-bundle.js\",\n    \"clip-path\": \"./vendor/clip-path.js\",\n    \"lzma\": \"./vendor/lzma.js\",\n    \"mousewheel\": \"./vendor/mousewheel.js\",\n    \"mwheelIntent\": \"./vendor/mwheelIntent.js\",\n    \"spin.js\": \"./vendor/spin.js\",\n    \"wax.cartodb.js\": \"./vendor/wax.cartodb.js\"\n  },\n  \"browserify-shim\": {\n    \"geojson\": \"GeoJSON\",\n    \"html-css-sanitizer\": \"html\",\n    \"lzma\": \"LZMA\",\n    \"clip-path\": {\n      \"depends\": [\n        \"underscore:_\",\n        \"jquery:jQuery\"\n      ]\n    },\n    \"mousewheel\": {\n      \"depends\": [\n        \"jquery:jQuery\"\n      ]\n    },\n    \"mwheelIntent\": {\n      \"depends\": [\n        \"jquery:jQuery\"\n      ]\n    },\n    \"spin.js\": \"Spinner\",\n    \"wax.cartodb.js\": \"wax\"\n  },\n  \"files\": [\n    \"dist\",\n    \"node_modules/cdb\",\n    \"src\",\n    \"themes\",\n    \"vendor\"\n  ],\n  \"main\": \"src/index.js\",\n  \"semistandard\": {\n    \"globals\": [\n      \"cartodb\",\n      \"cdb\",\n      \"jasmine\",\n      \"describe\",\n      \"xdescribe\",\n      \"beforeEach\",\n      \"afterEach\",\n      \"spyOn\",\n      \"it\",\n      \"xit\",\n      \"expect\"\n    ],\n    \"ignore\": [\n      \"/*.js\",\n      \"/dist\",\n      \"/doc\",\n      \"/examples\",\n      \"/grunt\",\n      \"/styleguide\",\n      \"/themes\",\n      \"/vendor\"\n    ]\n  }\n}\n",
    "var _ = require('underscore');\nvar L = require('leaflet');\nvar cdb = require('cdb'); // cdb.geo.GoogleMapsMapView, cdb.geo.LeafletMapView\nvar Loader = require('../core/loader');\nvar Map = require('../geo/map');\nvar Vis = require('../vis/vis');\nvar Layers = require('../vis/vis/layers');\nvar Promise = require('./promise');\n\n/**\n * compose cartodb url\n */\nfunction cartodbUrl(opts) {\n  var host = opts.host || 'cartodb.com';\n  var protocol = opts.protocol || 'https';\n  return protocol + '://' + opts.user + '.' + host + '/api/v1/viz/' + opts.table + '/viz.json';\n}\n\n/**\n * given layer params fetchs the layer json\n */\nfunction _getLayerJson(layer, callback) {\n  var url = null;\n  if(layer.layers !== undefined || ((layer.kind || layer.type) !== undefined)) {\n    // layer object contains the layer data\n    _.defer(function() { callback(layer); });\n    return;\n  } else if(layer.table !== undefined && layer.user !== undefined) {\n    // layer object points to cartodbjson\n    url = cartodbUrl(layer);\n  } else if(layer.indexOf) {\n    // fetch from url\n    url = layer;\n  }\n  if(url) {\n    Loader.get(url, callback);\n  } else {\n    _.defer(function() { callback(null); });\n  }\n}\n\n/**\n * create a layer for the specified map\n *\n * @param map should be a L.Map object, or equivalent depending on what provider you have.\n * @param layer should be an url or a javascript object with the data to create the layer\n * @param options layer options\n *\n */\nmodule.exports = function(map, layer, options, callback) {\n  if(map === undefined) {\n    throw new TypeError(\"map should be provided\");\n  }\n  if(layer === undefined) {\n    throw new TypeError(\"layer should be provided\");\n  }\n\n  var layerView, MapType;\n  options = options || {};\n  var args = arguments;\n  var fn = args[args.length -1];\n  if(_.isFunction(fn)) {\n    callback = fn;\n  }\n  var promise = new Promise();\n\n  promise.addTo = function(map, position) {\n    promise.on('done', function() {\n      MapType.addLayerToMap(layerView, map, position);\n    });\n    return promise;\n  };\n\n  _getLayerJson(layer, function(visData) {\n\n    var layerData;\n\n    if(!visData) {\n      promise.trigger('error');\n      return;\n    }\n\n    // extract layer data from visualization data\n    if(visData.layers) {\n      if(visData.layers.length < 2) {\n        promise.trigger('error', \"visualization file does not contain layer info\");\n      }\n      var index = options.layerIndex;\n      if (index !== undefined) {\n        if(visData.layers.length <= index) {\n          promise.trigger('error', 'layerIndex out of bounds');\n          return;\n        }\n        layerData = visData.layers[index];\n      } else {\n        var DATA_LAYER_TYPES = ['namedmap', 'layergroup', 'torque'];\n\n        // Select the first data layer (namedmap or layergroup)\n        layerData = _.find(visData.layers, function(layer){\n          return DATA_LAYER_TYPES.indexOf(layer.type) !== -1;\n        });\n      }\n    } else {\n      layerData = visData;\n    }\n\n    if(!layerData) {\n      promise.trigger('error');\n      return;\n    }\n\n    // update options\n    if(options && !_.isFunction(options)) {\n      layerData.options = layerData.options || {};\n      _.extend(layerData.options, options);\n    }\n\n    options = _.defaults(options, {\n      infowindow: true,\n      https: false,\n      legends: true,\n      time_slider: true,\n      tooltip: true\n    });\n\n    // check map type\n    // TODO: improve checking\n    if(typeof(map.overlayMapTypes) !== \"undefined\") {\n      MapType = cdb.geo.GoogleMapsMapView;\n      // check if leaflet is loaded globally\n    } else if (map instanceof L.Map) {\n      MapType = cdb.geo.LeafletMapView;\n    } else {\n      promise.trigger('error', \"cartodb.js can't guess the map type\");\n      return promise;\n    }\n\n    // create a dummy viz\n    var viz = map.viz;\n    if(!viz) {\n      var mapView = new MapType({\n        map_object: map,\n        map: new Map()\n      });\n\n      map.viz = viz = new Vis({\n        mapView: mapView\n      });\n\n      viz.https = options.https;\n    }\n\n    function createLayer() {\n      layerView = viz.createLayer(layerData);\n\n      var mobileEnabled = /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n      var addMobileLayout = (options.mobile_layout && mobileEnabled) || options.force_mobile;\n\n      if(!layerView) {\n        promise.trigger('error', \"layer not supported\");\n        return promise;\n      }\n\n      if(options.infowindow) {\n        viz.addInfowindow(layerView);\n      }\n\n      if(options.tooltip) {\n        viz.addTooltip(layerView);\n      }\n\n      if(options.legends) {\n        var layerModel = Layers.create(layerData.type || layerData.kind, viz, layerData);\n\n        viz._addLegends(viz._createLayerLegendView(layerModel.attributes,  layerView))\n      }\n\n      callback && callback(layerView);\n      promise.trigger('done', layerView);\n    }\n\n    // load needed modules\n    if(!viz.checkModules([layerData])) {\n      viz.loadModules([layerData], function() {\n        createLayer();\n      });\n    } else {\n      createLayer();\n    }\n  });\n\n  return promise;\n};\n",
    "var _ = require('underscore');\nvar Vis = require('../vis/vis');\n\nvar createVis = function(el, vizjson, options, callback) {\n  if (!el) {\n    throw new TypeError(\"a DOM element should be provided\");\n  }\n\n  var\n  args = arguments,\n  fn   = args[args.length -1];\n\n  if (_.isFunction(fn)) {\n    callback = fn;\n  }\n\n  el = (typeof el === 'string' ? document.getElementById(el) : el);\n\n  var vis = new Vis({\n    el: el\n  });\n\n  if (vizjson) {\n    vis.load(vizjson, options);\n\n    if (callback) {\n      vis.done(callback);\n    }\n  }\n\n  return vis;\n};\n\nmodule.exports = createVis;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n// NOTE only for usage in non-core bundles (where Backbone is available)\nfunction Promise() {\n}\n\n_.extend(Promise.prototype, Backbone.Events, {\n  done: function(fn) {\n    return this.bind('done', fn);\n  },\n  error: function(fn) {\n    return this.bind('error', fn);\n  }\n});\n\nmodule.exports = Promise;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Mustache = require('mustache');\nvar Promise = require('./promise');\n\nfunction SQL(options) {\n  if(window.cdb === this || window === this) {\n    return new SQL(options);\n  }\n  if(!options.user) {\n    throw new Error(\"user should be provided\");\n  }\n  var loc = new String(window.location.protocol);\n  loc = loc.slice(0, loc.length - 1);\n  if(loc == 'file') {\n    loc = 'https';\n  }\n\n  this.options = _.defaults(options, {\n    version: 'v2',\n    protocol: loc,\n    jsonp: !$.support.cors\n  })\n\n  if (!this.options.sql_api_template) {\n    var opts = this.options;\n    var template = null;\n    if(opts && opts.completeDomain) {\n      template = opts.completeDomain;\n    } else {\n      var host = opts.host || 'cartodb.com';\n      var protocol = opts.protocol || 'https';\n      template = protocol + '://{user}.' + host;\n    }\n    this.options.sql_api_template = template;\n  }\n}\n\nSQL.prototype._host = function() {\n  var opts = this.options;\n  return opts.sql_api_template.replace('{user}', opts.user) + '/api/' +  opts.version + '/sql';\n},\n\n/**\n * var sql = new SQL('cartodb_username');\n * sql.execute(\"select * from {{ table }} where id = {{ id }}\", {\n *    table: 'test',\n *    id: '1'\n * })\n */\nSQL.prototype.execute = function(sql, vars, options, callback) {\n\n  //Variable that defines if a query should be using get method or post method\n  var MAX_LENGTH_GET_QUERY = 1024;\n\n  var promise = new Promise();\n  if(!sql) {\n    throw new TypeError(\"sql should not be null\");\n  }\n  // setup arguments\n  var args = arguments,\n  fn = args[args.length -1];\n  if(_.isFunction(fn)) {\n    callback = fn;\n  }\n  options = _.defaults(options || {}, this.options);\n  var params = {\n    type: 'get',\n    dataType: 'json',\n    crossDomain: true\n  };\n\n  if(options.cache !== undefined) {\n    params.cache = options.cache;\n  }\n\n  if(options.jsonp) {\n    delete params.crossDomain;\n    if (options.jsonpCallback) {\n      params.jsonpCallback = options.jsonpCallback;\n    }\n    params.dataType = 'jsonp';\n  }\n\n  // Substitute mapnik tokens\n  // resolution at zoom level 0\n  var res = '156543.03515625';\n  // full webmercator extent\n  var ext = 'ST_MakeEnvelope(-20037508.5,-20037508.5,20037508.5,20037508.5,3857)';\n  sql = sql.replace('!bbox!', ext)\n           .replace('!pixel_width!', res)\n           .replace('!pixel_height!', res);\n\n  // create query\n  var query = Mustache.render(sql, vars);\n\n  // check method: if we are going to send by get or by post\n  var isGetRequest = query.length < MAX_LENGTH_GET_QUERY;\n\n  // generate url depending on the http method\n  var reqParams = ['format', 'dp', 'api_key'];\n  // request params\n  if (options.extra_params) {\n    reqParams = reqParams.concat(options.extra_params);\n  }\n\n  params.url = this._host() ;\n  if (isGetRequest) {\n    var q = 'q=' + encodeURIComponent(query);\n    for(var i in reqParams) {\n      var r = reqParams[i];\n      var v = options[r];\n      if(v) {\n        q += '&' + r + \"=\" + v;\n      }\n    }\n\n    params.url += '?' + q;\n  } else {\n    var objPost = {'q': query};\n    for(var i in reqParams) {\n      var r = reqParams[i];\n      var v = options[r];\n      if (v) {\n        objPost[r] = v;\n      }\n    }\n\n    params.data = objPost;\n    params.type = 'post';\n  }\n\n  // wrap success and error functions\n  var success = options.success;\n  var error = options.error;\n  if(success) delete options.success;\n  if(error) delete error.success;\n\n  params.error = function(resp) {\n    var res = resp.responseText || resp.response;\n    var errors = res && JSON.parse(res);\n    promise.trigger('error', errors && errors.error, resp)\n    if(error) error(resp);\n  }\n  params.success = function(resp, status, xhr) {\n    // manage rewest\n    if(status == undefined) {\n      status = resp.status;\n      xhr = resp;\n      resp = JSON.parse(resp.response);\n    }\n    //Timeout explanation. CartoDB.js ticket #336\n    //From St.Ov.: \"what setTimeout does is add a new event to the browser event queue\n    //and the rendering engine is already in that queue (not entirely true, but close enough)\n    //so it gets executed before the setTimeout event.\"\n    setTimeout(function() {\n      promise.trigger('done', resp, status, xhr);\n      if(success) success(resp, status, xhr);\n      if(callback) callback(resp);\n    }, 0);\n  }\n\n  // call ajax\n  delete options.jsonp;\n  $.ajax(_.extend(params, options));\n  return promise;\n}\n\nSQL.prototype.getBounds = function(sql, vars, options, callback) {\n  var promise = new Promise();\n  var args = arguments,\n  fn = args[args.length -1];\n  if(_.isFunction(fn)) {\n    callback = fn;\n  }\n  var s = 'SELECT ST_XMin(ST_Extent(the_geom)) as minx,' +\n          '       ST_YMin(ST_Extent(the_geom)) as miny,'+\n          '       ST_XMax(ST_Extent(the_geom)) as maxx,' +\n          '       ST_YMax(ST_Extent(the_geom)) as maxy' +\n          ' from ({{{ sql }}}) as subq';\n  sql = Mustache.render(sql, vars);\n  this.execute(s, { sql: sql }, options)\n    .done(function(result) {\n      if (result.rows && result.rows.length > 0 && result.rows[0].maxx != null) {\n        var c = result.rows[0];\n        var minlat = -85.0511;\n        var maxlat =  85.0511;\n        var minlon = -179;\n        var maxlon =  179;\n\n        var clamp = function(x, min, max) {\n          return x < min ? min : x > max ? max : x;\n        }\n\n        var lon0 = clamp(c.maxx, minlon, maxlon);\n        var lon1 = clamp(c.minx, minlon, maxlon);\n        var lat0 = clamp(c.maxy, minlat, maxlat);\n        var lat1 = clamp(c.miny, minlat, maxlat);\n\n        var bounds = [[lat0, lon0], [lat1, lon1]];\n        promise.trigger('done', bounds);\n        callback && callback(bounds);\n      }\n    })\n    .error(function(err) {\n      promise.trigger('error', err);\n    })\n\n  return promise;\n}\n\n/**\n * var people_under_10 = sql\n *    .table('test')\n *    .columns(['age', 'column2'])\n *    .filter('age < 10')\n *    .limit(15)\n *    .order_by('age')\n *\n *  people_under_10(function(results) {\n *  })\n */\n\nSQL.prototype.table = function(name) {\n\n  var _name = name;\n  var _filters;\n  var _columns = [];\n  var _limit;\n  var _order;\n  var _orderDir;\n  var _sql = this;\n\n  function _table() {\n    _table.fetch.apply(_table, arguments);\n  }\n\n  _table.fetch = function(vars) {\n    vars = vars || {}\n    var args = arguments,\n    fn = args[args.length -1];\n    if(_.isFunction(fn)) {\n      callback = fn;\n      if(args.length === 1) vars = {};\n    }\n    _sql.execute(_table.sql(), vars, callback);\n  }\n\n  _table.sql = function() {\n    var s = \"select\"\n    if(_columns.length) {\n      s += ' ' + _columns.join(',') + ' '\n    } else {\n      s += ' * '\n    }\n\n    s += \"from \" + _name;\n\n    if(_filters) {\n      s += \" where \" + _filters;\n    }\n    if(_limit) {\n      s += \" limit \" + _limit;\n    }\n    if(_order) {\n      s += \" order by \" + _order;\n    }\n    if(_orderDir) {\n      s += ' ' + _orderDir;\n    }\n\n    return s;\n  }\n\n  _table.filter = function(f) {\n    _filters = f;\n    return _table;\n  }\n\n  _table.order_by= function(o) {\n    _order = o;\n    return _table;\n  }\n  _table.asc = function() {\n    _orderDir = 'asc'\n    return _table;\n  }\n\n  _table.desc = function() {\n    _orderDir = 'desc'\n    return _table;\n  }\n\n  _table.columns = function(c) {\n    _columns = c;\n    return _table;\n  }\n\n  _table.limit = function(l) {\n    _limit = l;\n    return _table;\n  }\n\n  return _table;\n\n}\n\n\n/*\n * sql.filter(sql.f().distance('< 10km')\n */\n/*SQL.geoFilter = function() {\n  var _sql;\n  function f() {}\n\n  f.distance = function(qty) {\n    qty.replace('km', '*1000')\n    _sql += 'st_distance(the_geom) ' + qty\n  }\n  f.or = function() {\n  }\n\n  f.and = function() {\n  }\n  return f;\n}\n*/\nfunction array_agg(s) {\n  return JSON.parse(s.replace(/^{/, '[').replace(/}$/,']'));\n}\n\n\nSQL.prototype.describeString = function(sql, column, callback) {\n\n  var s = [\n    'WITH t as (',\n    '        SELECT count(*) as total,',\n    '               count(DISTINCT {{column}}) as ndist',\n    '        FROM ({{sql}}) _wrap',\n    '      ), a as (',\n    '        SELECT ',\n    '          count(*) cnt, ',\n    '          {{column}}',\n    '        FROM ',\n    '          ({{sql}}) _wrap ',\n    '        GROUP BY ',\n    '          {{column}} ',\n    '        ORDER BY ',\n    '          cnt DESC',\n    '        ), b As (',\n    '         SELECT',\n    '          row_number() OVER (ORDER BY cnt DESC) rn,',\n    '          cnt',\n    '         FROM a',\n    '        ), c As (',\n    '        SELECT ',\n    '          sum(cnt) OVER (ORDER BY rn ASC) / t.total cumperc,',\n    '          rn,',\n    '          cnt ',\n    '         FROM b, t',\n    '         LIMIT 10',\n    '         ),',\n    'stats as (',\n        'select count(distinct({{column}})) as uniq, ',\n        '       count(*) as cnt, ',\n        '       sum(case when COALESCE(NULLIF({{column}},\\'\\')) is null then 1 else 0 end)::numeric as null_count, ',\n        '       sum(case when COALESCE(NULLIF({{column}},\\'\\')) is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio, ',\n        // '       CDB_DistinctMeasure(array_agg({{column}}::text)) as cat_weight ',\n        '       (SELECT max(cumperc) weight FROM c) As skew ',\n        'from ({{sql}}) __wrap',\n    '),',\n    'hist as (',\n        'select array_agg(row(d, c)) array_agg from (select distinct({{column}}) d, count(*) as c from ({{sql}}) __wrap, stats group by 1 limit 100) _a',\n    ')',\n    'select * from stats, hist'\n  ];\n\n  var query = Mustache.render(s.join('\\n'), {\n    column: column,\n    sql: sql\n  });\n\n  var normalizeName = function(str) {\n    var normalizedStr = str.replace(/^\"(.+(?=\"$))?\"$/, '$1'); // removes surrounding quotes\n    return normalizedStr.replace(/\"\"/g, '\"'); // removes duplicated quotes\n  }\n\n  this.execute(query, function(data) {\n    var row = data.rows[0];\n    var weight = 0;\n    var histogram = [];\n\n    try {\n      var s = array_agg(row.array_agg);\n\n      var histogram = _(s).map(function(row) {\n          var r = row.match(/\\((.*),(\\d+)/);\n          var name = normalizeName(r[1]);\n          return [name, +r[2]];\n      });\n\n      weight = row.skew * (1 - row.null_ratio) * (1 - row.uniq / row.cnt) * ( row.uniq > 1 ? 1 : 0);\n    } catch(e) {\n\n    }\n\n    callback({\n      type: 'string',\n      hist: histogram,\n      distinct: row.uniq,\n      count: row.cnt,\n      null_count: row.null_count,\n      null_ratio: row.null_ratio,\n      skew: row.skew,\n      weight: weight\n    });\n  });\n}\n\nSQL.prototype.describeDate = function(sql, column, callback) {\n  var s = [\n    'with minimum as (',\n      'SELECT min({{column}}) as start_time FROM ({{sql}}) _wrap), ',\n    'maximum as (SELECT max({{column}}) as end_time FROM ({{sql}}) _wrap), ',\n    'null_ratio as (SELECT sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio FROM ({{sql}}) _wrap), ',\n    'moments as (SELECT count(DISTINCT {{column}}) as moments FROM ({{sql}}) _wrap)',\n    'SELECT * FROM minimum, maximum, moments, null_ratio'\n  ];\n  var query = Mustache.render(s.join('\\n'), {\n    column: column,\n    sql: sql\n  });\n\n  this.execute(query, function(data) {\n    var row = data.rows[0];\n    var e = new Date(row.end_time);\n    var s = new Date(row.start_time);\n\n    var moments = row.moments;\n\n    var steps = Math.min(row.moments, 1024);\n\n    callback({\n      type: 'date',\n      start_time: s,\n      end_time: e,\n      range: e - s,\n      steps: steps,\n      null_ratio: row.null_ratio\n    });\n  });\n}\n\nSQL.prototype.describeBoolean = function(sql, column, callback){\n  var s = [\n    'with stats as (',\n          'select count(distinct({{column}})) as uniq,',\n                 'count(*) as cnt',\n            'from ({{sql}}) _wrap ',\n      '),',\n    'null_ratio as (',\n      'SELECT sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio FROM ({{sql}}) _wrap), ',\n    'true_ratio as (',\n      'SELECT sum(case when {{column}} is true then 1 else 0 end)::numeric / count(*)::numeric as true_ratio FROM ({{sql}}) _wrap) ',\n    'SELECT * FROM true_ratio, null_ratio, stats'\n  ];\n  var query = Mustache.render(s.join('\\n'), {\n    column: column,\n    sql: sql\n  });\n\n  this.execute(query, function(data) {\n    var row = data.rows[0];\n\n    callback({\n      type: 'boolean',\n      null_ratio: row.null_ratio,\n      true_ratio: row.true_ratio,\n      distinct: row.uniq,\n      count: row.cnt\n    });\n  });\n}\n\nSQL.prototype.describeGeom = function(sql, column, callback) {\n  var s = [\n    'with stats as (',\n        'select st_asgeojson(st_extent({{column}})) as bbox',\n        'from ({{sql}}) _wrap',\n    '),',\n    'geotype as (',\n      'select st_geometrytype({{column}}) as geometry_type from ({{sql}}) _w where {{column}} is not null limit 1',\n    '),',\n    'clusters as (',\n      'with clus as (',\n        'SELECT distinct(ST_snaptogrid(the_geom, 10)) as cluster, count(*) as clustercount FROM ({{sql}}) _wrap group by 1 order by 2 desc limit 3),',\n      'total as (',\n        'SELECT count(*) FROM ({{sql}}) _wrap)',\n      'SELECT sum(clus.clustercount)/sum(total.count) AS clusterrate FROM clus, total',\n    '),',\n    'density as (',\n      'SELECT count(*) / st_area(st_extent(the_geom)) as density FROM ({{sql}}) _wrap',\n    ')',\n    'select * from stats, geotype, clusters, density'\n  ];\n\n  var query = Mustache.render(s.join('\\n'), {\n    column: column,\n    sql: sql\n  });\n  function simplifyType(g) {\n    return {\n    'st_multipolygon': 'polygon',\n    'st_polygon': 'polygon',\n    'st_multilinestring': 'line',\n    'st_linestring': 'line',\n    'st_multipoint': 'point',\n    'st_point': 'point'\n    }[g.toLowerCase()]\n  };\n\n  this.execute(query, function(data) {\n    var row = data.rows[0];\n    var bbox = JSON.parse(row.bbox).coordinates[0]\n    callback({\n      type: 'geom',\n      //lon,lat -> lat, lon\n      bbox: [[bbox[0][0],bbox[0][1]], [bbox[2][0], bbox[2][1]]],\n      geometry_type: row.geometry_type,\n      simplified_geometry_type: simplifyType(row.geometry_type),\n      cluster_rate: row.clusterrate,\n      density: row.density\n    });\n  });\n}\n\nSQL.prototype.columns = function(sql, options, callback) {\n  var args = arguments,\n      fn = args[args.length -1];\n  if(_.isFunction(fn)) {\n    callback = fn;\n  }\n  var s = \"select * from (\" + sql + \") __wrap limit 0\";\n  var exclude = ['cartodb_id','latitude','longitude','created_at','updated_at','lat','lon','the_geom_webmercator'];\n  this.execute(s, function(data) {\n    var t = {}\n    for (var i in data.fields) {\n      if (exclude.indexOf(i) === -1) {\n        t[i] = data.fields[i].type;\n      }\n    }\n    callback(t);\n  });\n};\n\nSQL.prototype.describeFloat = function(sql, column, callback) {\n  var s = [\n    'with stats as (',\n        'select min({{column}}) as min,',\n                'max({{column}}) as max,',\n                'avg({{column}}) as avg,',\n                'count(DISTINCT {{column}}) as cnt,',\n                'count(distinct({{column}})) as uniq,',\n                'count(*) as cnt,',\n                'sum(case when {{column}} is null then 1 else 0 end)::numeric / count(*)::numeric as null_ratio,',\n                'stddev_pop({{column}}) / count({{column}}) as stddev,',\n                'CASE WHEN abs(avg({{column}})) > 1e-7 THEN stddev({{column}}) / abs(avg({{column}})) ELSE 1e12 END as stddevmean,',\n                'CDB_DistType(array_agg(\"{{column}}\"::numeric)) as dist_type ',\n          'from ({{sql}}) _wrap ',\n    '),',\n    'params as (select min(a) as min, (max(a) - min(a)) / 7 as diff from ( select {{column}} as a from ({{sql}}) _table_sql where {{column}} is not null ) as foo ),',\n    'histogram as (',\n        'select array_agg(row(bucket, range, freq)) as hist from (',\n        'select CASE WHEN uniq > 1 then width_bucket({{column}}, min-0.01*abs(min), max+0.01*abs(max), 100) ELSE 1 END as bucket,',\n              'numrange(min({{column}})::numeric, max({{column}})::numeric) as range,',\n              'count(*) as freq',\n          'from ({{sql}}) _w, stats',\n          'group by 1',\n          'order by 1',\n      ') __wrap',\n      '),',\n    'hist as (',\n        'select array_agg(row(d, c)) cat_hist from (select distinct({{column}}) d, count(*) as c from ({{sql}}) __wrap, stats group by 1 limit 100) _a',\n    '),',\n      'buckets as (',\n        'select CDB_QuantileBins(array_agg(distinct({{column}}::numeric)), 7) as quantiles, ',\n        '       (select array_agg(x::numeric) FROM (SELECT (min + n * diff)::numeric as x FROM generate_series(1,7) n, params) p) as equalint,',\n        // '       CDB_EqualIntervalBins(array_agg({{column}}::numeric), 7) as equalint, ',\n        '       CDB_JenksBins(array_agg(distinct({{column}}::numeric)), 7) as jenks, ',\n        '       CDB_HeadsTailsBins(array_agg(distinct({{column}}::numeric)), 7) as headtails ',\n        'from ({{sql}}) _table_sql where {{column}} is not null',\n      ')',\n      'select * from histogram, stats, buckets, hist'\n  ];\n\n  var query = Mustache.render(s.join('\\n'), {\n    column: column,\n    sql: sql\n  });\n\n  this.execute(query, function(data) {\n    var row = data.rows[0];\n    var s = array_agg(row.hist);\n    var h = array_agg(row.cat_hist);\n    callback({\n      type: 'number',\n      cat_hist:\n        _(h).map(function(row) {\n        var r = row.match(/\\((.*),(\\d+)/);\n        return [+r[1], +r[2]];\n      }),\n      hist: _(s).map(function(row) {\n        if(row.indexOf(\"empty\") > -1) return;\n        var els = row.split('\"');\n        return { index: els[0].replace(/\\D/g,''),\n                  range: els[1].split(\",\").map(function(d){return d.replace(/\\D/g,'')}),\n                  freq: els[2].replace(/\\D/g,'') };\n      }),\n      stddev: row.stddev,\n      null_ratio: row.null_ratio,\n      count: row.cnt,\n      distinct: row.uniq,\n      //lstddev: row.lstddev,\n      avg: row.avg,\n      max: row.max,\n      min: row.min,\n      stddevmean: row.stddevmean,\n      weight: (row.uniq > 1 ? 1 : 0) * (1 - row.null_ratio) * (row.stddev < -1 ? 1 : (row.stddev < 1 ? 0.5 : (row.stddev < 3 ? 0.25 : 0.1))),\n      quantiles: row.quantiles,\n      equalint: row.equalint,\n      jenks: row.jenks,\n      headtails: row.headtails,\n      dist_type: row.dist_type\n    });\n  });\n}\n\n// describe a column\nSQL.prototype.describe = function(sql, column, options) {\n  var self = this;\n  var args = arguments,\n      fn = args[args.length -1];\n  if(_.isFunction(fn)) {\n    var _callback = fn;\n  }\n  var callback = function(data) {\n    data.column = column;\n    _callback(data);\n  }\n  var s = \"select * from (\" + sql + \") __wrap limit 0\";\n  this.execute(s, function(data) {\n\n    var type = (options && options.type) ? options.type : data.fields[column].type;\n\n    if (!type) {\n      callback(new Error(\"column does not exist\"));\n      return;\n    }\n\n    else if (type === 'string') {\n      self.describeString(sql, column, callback);\n    } else if (type === 'number') {\n      self.describeFloat(sql, column, callback);\n    } else if (type === 'geometry') {\n      self.describeGeom(sql, column, callback);\n    } else if (type === 'date') {\n      self.describeDate(sql, column, callback);\n    } else if (type === 'boolean') {\n      self.describeBoolean(sql, column, callback);\n    } else {\n      callback(new Error(\"column type is not supported\"));\n    }\n  });\n}\n\nmodule.exports = SQL;\n",
    "var isLeafletAlreadyLoaded = !!window.L;\n\nvar _ = require('underscore');\nvar L = require('leaflet');\nrequire('mousewheel'); // registers itself to $.event; TODO what's this required for? still relevant for supported browsers?\nrequire('mwheelIntent'); // registers itself to $.event; TODO what's this required for? still relevant for supported browsers?\n\nvar cdb = require('cdb');\n\nif (window) {\n  window.cartodb = window.cdb = cdb;\n}\n\ncdb.Backbone = require('backbone');\ncdb.Mustache = require('mustache');\ncdb.$ = require('jquery');\ncdb._ = _;\ncdb.L = L;\n\nif (isLeafletAlreadyLoaded) L.noConflict();\n_.extend(cdb.geo, require('./geo/leaflet'));\n\ncdb.SQL = require('./api/sql');\n\ncdb.config = require('cdb.config');\ncdb.log = require('cdb.log');\ncdb.errors = require('cdb.errors');\ncdb.templates = require('cdb.templates');\ncdb.createVis = require('./api/create-vis');\ncdb.createLayer = require('./api/create-layer');\ncdb.LZMA = require('lzma');\n\ncdb.core.Profiler = require('cdb.core.Profiler');\ncdb.core.util = require('cdb.core.util');\ncdb.core.Loader = cdb.vis.Loader = require('./core/loader');\ncdb.core.sanitize = require('./core/sanitize');\ncdb.core.Template = require('./core/template');\ncdb.core.TemplateList = require('./core/template-list');\ncdb.core.Model = require('./core/model');\ncdb.core.View = require('./core/view');\n\ncdb.ui.common.Dialog = require('./ui/common/dialog');\ncdb.ui.common.Dropdown = require('./ui/common/dropdown');\ncdb.ui.common.FullScreen = require('./ui/common/fullscreen/fullscreen-view');\ncdb.ui.common.Notification = require('./ui/common/notification');\ncdb.ui.common.Row = require('./ui/common/table/row');\ncdb.ui.common.TableData = require('./ui/common/table/table-data');\ncdb.ui.common.TableProperties = require('./ui/common/table/table-properties');\ncdb.ui.common.RowView = require('./ui/common/table/row-view');\ncdb.ui.common.Table = require('./ui/common/table');\n\ncdb.geo.geocoder.NOKIA = require('./geo/geocoder/nokia-geocoder');\ncdb.geo.geocoder.YAHOO = require('./geo/geocoder/yahoo-geocoder');\ncdb.geo.Geometry = require('./geo/geometry');\n\ncdb.geo.TileLayer = require('./geo/map/tile-layer');\ncdb.geo.GMapsBaseLayer = require('./geo/map/gmaps-base-layer');\ncdb.geo.WMSLayer = require('./geo/map/wms-layer');\ncdb.geo.PlainLayer = require('./geo/map/plain-layer');\ncdb.geo.TorqueLayer = require('./geo/map/torque-layer');\ncdb.geo.CartoDBLayer = require('./geo/map/cartodb-layer');\ncdb.geo.Layers = require('./geo/map/layers');\ncdb.geo.Map = require('./geo/map');\ncdb.geo.MapView = require('./geo/map-view');\n\n_.extend(cdb.geo, require('./geo/gmaps'));\n\n// overwrites the Promise defined from the core bundle\ncdb.Promise = require('./api/promise');\n\ncdb.geo.ui.Text = require('./geo/ui/text');\ncdb.geo.ui.Annotation = require('./geo/ui/annotation');\ncdb.geo.ui.Image = require('./geo/ui/image');\ncdb.geo.ui.Zoom = require('./geo/ui/zoom/zoom-view');\n\n// setup expected object structure here, to avoid circular references\n_.extend(cdb.geo.ui, require('./geo/ui/legend-exports'));\ncdb.geo.ui.Legend = require('./geo/ui/legend');\n_.extend(cdb.geo.ui.Legend, require('./geo/ui/legend/legend-view-exports'));\n\ncdb.geo.ui.InfowindowModel = require('./geo/ui/infowindow-model');\ncdb.geo.ui.Infowindow = require('./geo/ui/infowindow');\n\ncdb.geo.ui.Header = require('./geo/ui/header');\n\ncdb.geo.ui.Search = require('./geo/ui/search/search');\n\ncdb.geo.ui.LayerSelector = require('./geo/ui/layer-selector');\ncdb.geo.ui.LayerView = require('./geo/ui/layer-view');\n\ncdb.geo.ui.TilesLoader = require('./geo/ui/tiles-loader');\ncdb.geo.ui.InfoBox = require('./geo/ui/infobox');\ncdb.geo.ui.Tooltip = require('./geo/ui/tooltip');\n\ncdb.vis.INFOWINDOW_TEMPLATE = require('./vis/vis/infowindow-template');\ncdb.vis.Overlay = require('./vis/vis/overlay');\ncdb.vis.Overlays = require('./vis/vis/overlays');\ncdb.vis.Layers = require('./vis/vis/layers');\ncdb.vis.Vis = require('./vis/vis');\nrequire('./vis/overlays'); // Overlay.register calls\nrequire('./vis/layers'); // Layers.register calls\n\nmodule.exports = cdb;\n",
    "var Config = require('./core/config');\n\nvar config = new Config();\nconfig.set({\n  cartodb_attributions: 'CartoDB <a href=\"http://cartodb.com/attributions\" target=\"_blank\">attribution</a>',\n  cartodb_logo_link: 'http://www.cartodb.com'\n});\n\nmodule.exports = config;\n",
    "var ErrorList = require('./core/log/error-list');\nmodule.exports = new ErrorList();\n",
    "// Creates cdb object, mutated in the entry file cartodb.js\n// Used to avoid circular dependencies\nvar cdb = {};\n\n// Might be set in different bundles (e.g. cartodb.js vs. torque), avoid overriding it once set\ncdb.VERSION = require('../package.json').version;\ncdb.DEBUG = false;\ncdb.CARTOCSS_DEFAULT_VERSION = '2.1.1';\ncdb.CARTOCSS_VERSIONS = {\n  '2.0.0': '',\n  '2.1.0': ''\n};\n\ncdb.config = {};\ncdb.core = {};\ncdb.decorators = {};\ncdb.image = {};\n\ncdb.geo = {};\ncdb.geo.common = {};\ncdb.geo.geocoder = {};\ncdb.geo.ui = {};\n\ncdb.ui = {};\ncdb.ui.common = {};\n\ncdb.vis = {};\n\nmodule.exports = cdb;\n",
    "var Log = require('./core/log');\n\nmodule.exports = new Log({tag: 'cdb'});\n",
    "var TemplateList = require('./core/template-list');\n\nmodule.exports = new TemplateList();\n",
    "var Backbone = require('backbone');\n\n/**\n * global configuration\n */\nvar Config = Backbone.Model.extend({\n  VERSION: 4,\n\n  initialize: function() {},\n\n  //error track\n  REPORT_ERROR_URL: '/api/v0/error',\n  ERROR_TRACK_ENABLED: false\n});\n\nmodule.exports = Config;\n",
    "var cdb = require('cdb'); // cdb.DEBUG\n\nvar Loader = {\n\n  queue: [],\n  current: undefined,\n  _script: null,\n  head: null,\n\n  loadScript: function(src) {\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = src;\n      script.async = true;\n      if (!Loader.head) {\n        Loader.head = document.getElementsByTagName('head')[0];\n      }\n      // defer the loading because IE9 loads in the same frame the script\n      // so Loader._script is null\n      setTimeout(function() {\n        Loader.head.appendChild(script);\n      }, 0);\n      return script;\n  },\n\n  get: function(url, callback) {\n    if (!Loader._script) {\n      Loader.current = callback;\n      Loader._script = Loader.loadScript(url + (~url.indexOf('?') ? '&' : '?') + 'callback=vizjson');\n    } else {\n      Loader.queue.push([url, callback]);\n    }\n  },\n\n  getPath: function(file) {\n    var scripts = document.getElementsByTagName('script'),\n        cartodbJsRe = /\\/?cartodb[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;\n    for (i = 0, len = scripts.length; i < len; i++) {\n      var src = scripts[i].src;\n      var matches = src.match(cartodbJsRe);\n\n      if (matches) {\n        var bits = src.split('/');\n        delete bits[bits.length - 1];\n        return bits.join('/') + file;\n      }\n    }\n    return null;\n  },\n\n  loadModule: function(modName) {\n    var file = \"cartodb.mod.\" + modName + (cdb.DEBUG ? \".uncompressed.js\" : \".js\");\n    var src = this.getPath(file);\n    if (!src) {\n      throw new Error(\"can't find cartodb.js file (no src path found for '\" + file + \"')\");\n    }\n    Loader.loadScript(src);\n  }\n};\n\n// Required for jsonp callback, see Loader.get()\nwindow.vizjson = function(data) {\n  Loader.current && Loader.current(data);\n  // remove script\n  Loader.head.removeChild(Loader._script);\n  Loader._script = null;\n  // next element\n  var a = Loader.queue.shift();\n  if (a) {\n    Loader.get(a[0], a[1]);\n  }\n};\n\nmodule.exports = Loader;\n",
    "var Backbone = require('backbone');\nvar cdb = require('cdb'); // cdb.DEBUG\nvar errors = require('cdb.errors');\nvar config = require('cdb.config');\n\n// TODO: Is this fake console/IE7 still necessary?\nvar _console;\nvar FakeConsole = function() {};\nFakeConsole.prototype.error = function(){};\nFakeConsole.prototype.log = function(){};\n\n//IE7 love\nif (typeof console !== \"undefined\") {\n  _console = console;\n  try {\n    _console.log.apply(_console, ['cartodb.js ' + cdb.VERSION])\n  } catch(e) {\n    _console = new FakeConsole();\n  }\n} else {\n  _console = new FakeConsole();\n}\n\nvar Log = Backbone.Model.extend({\n\n  error: function() {\n    _console.error.apply(_console, arguments);\n    if(config.ERROR_TRACK_ENABLED) {\n      errors.create({\n        msg: Array.prototype.slice.call(arguments).join('')\n      });\n    }\n  },\n\n  log: function() {\n    _console.log.apply(_console, arguments);\n  },\n\n  info: function() {\n    _console.log.apply(_console, arguments);\n  },\n\n  debug: function() {\n    if (cdb.DEBUG) _console.log.apply(_console, arguments);\n  }\n});\n\nmodule.exports = Log;\n",
    "var Backbone = require('backbone');\nvar ErrorModel = require('./error');\n\nvar ErrorList = Backbone.Collection.extend({\n  model: ErrorModel,\n\n  enableTrack: function() {\n    var self = this;\n    var old_onerror = window.onerror;\n    window.onerror = function(msg, url, line) {\n      self.create({\n        msg: msg,\n        url: url,\n        line: line\n      });\n      if (old_onerror)\n        old_onerror.apply(window, arguments);\n    };\n  }\n});\n\nmodule.exports = ErrorList;\n",
    "var Backbone = require('backbone');\nvar $ = require('jquery');\nvar config = require('cdb.config');\n\nvar ErrorModel = Backbone.Model.extend({\n  url: function() {\n    return config.REPORT_ERROR_URL;\n  },\n\n  initialize: function() {\n    this.set({ browser: JSON.stringify($.browser) });\n  }\n});\n\nmodule.exports = ErrorModel;\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * Base Model for all CartoDB model.\n * DO NOT USE Backbone.Model directly\n */\nvar Model = Backbone.Model.extend({\n\n  initialize: function(options) {\n    _.bindAll(this, 'fetch',  'save', 'retrigger');\n    return Backbone.Model.prototype.initialize.call(this, options);\n  },\n  /**\n  * We are redefining fetch to be able to trigger an event when the ajax call ends, no matter if there's\n  * a change in the data or not. Why don't backbone does this by default? ahh, my friend, who knows.\n  * @method fetch\n  * @param args {Object}\n  */\n  fetch: function(args) {\n    var self = this;\n    // var date = new Date();\n    this.trigger('loadModelStarted');\n    $.when(Backbone.Model.prototype.fetch.call(this, args)).done(function(ev){\n      self.trigger('loadModelCompleted', ev);\n      // var dateComplete = new Date()\n      // console.log('completed in '+(dateComplete - date));\n    }).fail(function(ev) {\n      self.trigger('loadModelFailed', ev);\n    })\n  },\n  /**\n  * Changes the attribute used as Id\n  * @method setIdAttribute\n  * @param attr {String}\n  */\n  setIdAttribute: function(attr) {\n    this.idAttribute = attr;\n  },\n  /**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event;\n  * @todo [xabel]: This method is repeated here and in the base view definition. There's should be a way to make it unique\n  */\n  retrigger: function(ev, obj, retrigEvent) {\n    if(!retrigEvent) {\n      retrigEvent = ev;\n    }\n    var self = this;\n    obj.bind && obj.bind(ev, function() {\n      self.trigger(retrigEvent);\n    }, self)\n  },\n\n  /**\n   * We need to override backbone save method to be able to introduce new kind of triggers that\n   * for some reason are not present in the original library. Because you know, it would be nice\n   * to be able to differenciate \"a model has been updated\" of \"a model is being saved\".\n   * TODO: remove jquery from here\n   * @param  {object} opt1\n   * @param  {object} opt2\n   * @return {$.Deferred}\n   */\n  save: function(opt1, opt2) {\n    var self = this;\n    if(!opt2 || !opt2.silent) this.trigger('saving');\n    var promise = Backbone.Model.prototype.save.apply(this, arguments);\n    $.when(promise).done(function() {\n      if(!opt2 || !opt2.silent) self.trigger('saved');\n    }).fail(function() {\n      if(!opt2 || !opt2.silent) self.trigger('errorSaving')\n    })\n    return promise;\n  }\n});\n\nmodule.exports = Model;\n",
    "/*\n# metrics profiler\n\n## timing\n\n```\n var timer = Profiler.metric('resource:load')\n time.start();\n ...\n time.end();\n```\n\n## counters\n\n```\n var counter = Profiler.metric('requests')\n counter.inc();   // 1\n counter.inc(10); // 11\n counter.dec()    // 10\n counter.dec(10)  // 0\n```\n\n## Calls per second\n```\n  var fps = Profiler.metric('fps')\n  function render() {\n    fps.mark();\n  }\n```\n*/\nvar MAX_HISTORY = 1024;\nfunction Profiler() {}\nProfiler.metrics = {};\nProfiler._backend = null;\n\nProfiler.get = function(name) {\n  return Profiler.metrics[name] || {\n    max: 0,\n    min: Number.MAX_VALUE,\n    avg: 0,\n    total: 0,\n    count: 0,\n    last: 0,\n    history: typeof(Float32Array) !== 'undefined' ? new Float32Array(MAX_HISTORY) : []\n  };\n};\n\nProfiler.backend = function (_) {\n  Profiler._backend = _;\n}\n\nProfiler.new_value = function (name, value, type, defer) {\n  type =  type || 'i';\n  var t = Profiler.metrics[name] = Profiler.get(name);\n\n\n  t.max = Math.max(t.max, value);\n  t.min = Math.min(t.min, value);\n  t.total += value;\n  ++t.count;\n  t.avg = t.total / t.count;\n  t.history[t.count%MAX_HISTORY] = value;\n\n  if (!defer) {\n    Profiler._backend && Profiler._backend([type, name, value]);\n  } else {\n    var n = new Date().getTime()\n    // don't allow to send stats quick\n    if (n - t.last > 1000) {\n      Profiler._backend && Profiler._backend([type, name, t.avg]);\n      t.last = n;\n    }\n  }\n};\n\nProfiler.print_stats = function () {\n  for (k in Profiler.metrics) {\n    var t = Profiler.metrics[k];\n    console.log(\" === \" + k + \" === \");\n    console.log(\" max: \" + t.max);\n    console.log(\" min: \" + t.min);\n    console.log(\" avg: \" + t.avg);\n    console.log(\" count: \" + t.count);\n    console.log(\" total: \" + t.total);\n  }\n};\n\nfunction Metric(name) {\n  this.t0 = null;\n  this.name = name;\n  this.count = 0;\n}\n\nMetric.prototype = {\n\n  //\n  // start a time measurement\n  //\n  start: function() {\n    this.t0 = +new Date();\n    return this;\n  },\n\n  // elapsed time since start was called\n  _elapsed: function() {\n    return +new Date() - this.t0;\n  },\n\n  //\n  // finish a time measurement and register it\n  // ``start`` should be called first, if not this\n  // function does not take effect\n  //\n  end: function(defer) {\n    if (this.t0 !== null) {\n      Profiler.new_value(this.name, this._elapsed(), 't', defer);\n      this.t0 = null;\n    }\n  },\n\n  //\n  // increments the value\n  // qty: how many, default = 1\n  //\n  inc: function(qty) {\n    qty = qty === undefined ? 1: qty;\n    Profiler.new_value(this.name, qty, 'i');\n  },\n\n  //\n  // decrements the value\n  // qty: how many, default = 1\n  //\n  dec: function(qty) {\n    qty = qty === undefined ? 1: qty;\n    Profiler.new_value(this.name, qty, 'd');\n  },\n\n  //\n  // measures how many times per second this function is called\n  //\n  mark: function() {\n    ++this.count;\n    if(this.t0 === null) {\n      this.start();\n      return;\n    }\n    var elapsed = this._elapsed();\n    if(elapsed > 1) {\n      Profiler.new_value(this.name, this.count);\n      this.count = 0;\n      this.start();\n    }\n  }\n};\n\nProfiler.metric = function(name) {\n  return new Metric(name);\n};\n\nmodule.exports = Profiler;\n",
    "var htmlCssSanitizer = require('html-css-sanitizer');\n\n/**\n * Sanitize inputHtml of unsafe HTML tags & attributes\n * @param {String} inputHtml\n * @param {Function,false,null,undefined} optionalSanitizer By default undefined, for which the default sanitizer will be used.\n *   Pass a function (that takes inputHtml) to sanitize yourself, or false/null to skip sanitize call.\n */\nhtmlCssSanitizer.html = function(inputHtml, optionalSanitizer) {\n  if (!inputHtml) return;\n\n  if (optionalSanitizer === undefined) {\n    return htmlCssSanitizer.sanitize(inputHtml, function(url) {\n      // Return all URLs for <a href=\"\"> (javascript: and data: URLs are removed prior to this fn is called)\n      return url;\n    });\n  } else if (typeof optionalSanitizer === 'function') {\n    return optionalSanitizer(inputHtml);\n  } else { // alt sanitization set to false/null/other, treat as if caller takes responsibility to sanitize output\n    return inputHtml;\n  }\n}\n\nmodule.exports = htmlCssSanitizer;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar log = require('cdb.log');\nvar Template = require('./template');\n\nvar TemplateList = Backbone.Collection.extend({\n  model: Template,\n\n  getTemplate: function(template_name) {\n    if (this.namespace) {\n      template_name = this.namespace + template_name;\n    }\n\n    var t = this.find(function(t) {\n        return t.get('name') === template_name;\n    });\n\n    if(t) {\n      return _.bind(t.render, t);\n    }\n\n    log.error(template_name + \" not found\");\n\n    return null;\n  }\n});\n\nmodule.exports = TemplateList;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar Mustache = require('mustache');\nvar log = require('cdb.log');\n\n/**\n * template system\n * usage:\n   var tmpl = new Template({\n     template: \"hi, my name is {{ name }}\",\n     type: 'mustache' // undescore by default\n   });\n   console.log(tmpl.render({name: 'rambo'})));\n   // prints \"hi, my name is rambo\"\n\n\n   you could pass the compiled tempalte directly:\n\n   var tmpl = new Template({\n     compiled: function() { return 'my compiled template'; }\n   });\n */\nvar Template = Backbone.Model.extend({\n\n  initialize: function() {\n    this.bind('change', this._invalidate);\n    this._invalidate();\n  },\n\n  url: function() {\n    return this.get('template_url');\n  },\n\n  parse: function(data) {\n    return {\n      'template': data\n    };\n  },\n\n  _invalidate: function() {\n    this.compiled = null;\n    if(this.get('template_url')) {\n      this.fetch();\n    }\n  },\n\n  compile: function() {\n    var tmpl_type = this.get('type') || 'underscore';\n    var fn = Template.compilers[tmpl_type];\n    if(fn) {\n      return fn(this.get('template'));\n    } else {\n      log.error(\"can't get rendered for \" + tmpl_type);\n    }\n    return null;\n  },\n\n  /**\n   * renders the template with specified vars\n   */\n  render: function(vars) {\n    var c = this.compiled = this.compiled || this.get('compiled') || this.compile();\n    var rendered = c(vars);\n    return rendered;\n  },\n\n  asFunction: function() {\n    return _.bind(this.render, this);\n  }\n\n}, {\n  compilers: {\n    'underscore': _.template,\n    'mustache': typeof(Mustache) === 'undefined' ?\n      null :\n      // Replacement for Mustache.compile, which was removed in version 0.8.0\n      function compile(template) {\n        Mustache.parse(template);\n        return function (view, partials) {\n          return Mustache.render(template, view, partials);\n        };\n      }\n  },\n  compile: function(tmpl, type) {\n    var t = new Template({\n      template: tmpl,\n      type: type || 'underscore'\n    });\n    return _.bind(t.render, t);\n  }\n});\n\nmodule.exports = Template;\n",
    "var util = {};\n\nutil.isCORSSupported = function() {\n  return 'withCredentials' in new XMLHttpRequest();\n};\n\nutil.array2hex = function(byteArr) {\n  var encoded = []\n  for(var i = 0; i < byteArr.length; ++i) {\n    encoded.push(String.fromCharCode(byteArr[i] + 128));\n  }\n  return util.btoa(encoded.join(''));\n};\n\nutil.btoa = function(data) {\n  if (typeof window['btoa'] == 'function') {\n    return util.encodeBase64Native(data);\n  };\n\n  return util.encodeBase64(data);\n};\n\nutil.encodeBase64Native = function (input) {\n  return btoa(input);\n};\n\n// ie7 btoa,\n// from http://phpjs.org/functions/base64_encode/\nutil.encodeBase64 = function (data) {\n  var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n  var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n    ac = 0,\n    enc = \"\",\n    tmp_arr = [];\n\n  if (!data) {\n    return data;\n  }\n\n  do { // pack three octets into four hexets\n    o1 = data.charCodeAt(i++);\n    o2 = data.charCodeAt(i++);\n    o3 = data.charCodeAt(i++);\n\n    bits = o1 << 16 | o2 << 8 | o3;\n\n    h1 = bits >> 18 & 0x3f;\n    h2 = bits >> 12 & 0x3f;\n    h3 = bits >> 6 & 0x3f;\n    h4 = bits & 0x3f;\n\n    // use hexets to index into b64, and append result to encoded string\n    tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n  } while (i < data.length);\n\n  enc = tmp_arr.join('');\n\n  var r = data.length % 3;\n  return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n};\n\nutil.uniqueCallbackName = function(str) {\n  util._callback_c = util._callback_c || 0;\n  ++util._callback_c;\n  return util.crc32(str) + \"_\" + util._callback_c;\n};\n\nutil.crc32 = function(str) {\n  var crcTable = util._crcTable || (util._crcTable = util._makeCRCTable());\n  var crc = 0 ^ (-1);\n\n  for (var i = 0, l = str.length; i < l; ++i ) {\n    crc = (crc >>> 8) ^ crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n  }\n\n  return (crc ^ (-1)) >>> 0;\n};\n\nutil._makeCRCTable = function() {\n  var c;\n  var crcTable = [];\n  for(var n = 0; n < 256; ++n){\n    c = n;\n    for(var k = 0; k < 8; ++k){\n        c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    crcTable[n] = c;\n  }\n  return crcTable;\n};\n\nutil._inferBrowser = function(ua){\n  var browser = {};\n  ua = ua || typeof window !== 'undefined' && window.navigator.userAgent || '';\n  function detectIE() {\n    var msie = ua.indexOf('MSIE ');\n    var trident = ua.indexOf('Trident/');\n    if (msie > -1 || trident > -1) return true;\n    return false;\n  };\n\n  function getIEVersion(){\n    if (!document.compatMode) return 5\n    if (!window.XMLHttpRequest) return 6\n    if (!document.querySelector) return 7;\n    if (!document.addEventListener) return 8;\n    if (!window.atob) return 9;\n    if (document.all) return 10;\n    else return 11;\n  };\n\n  if(detectIE()){\n    browser.ie = {version: getIEVersion()}\n  }\n\n  else if(ua.indexOf('Edge/') > -1) browser.edge = ua;\n  else if(ua.indexOf('Chrome') > -1) browser.chrome = ua;\n  else if(ua.indexOf('Firefox') > -1) browser.firefox = ua;\n  else if(ua.indexOf(\"Opera\") > -1) browser.opera = ua;\n  else if(ua.indexOf(\"Safari\") > -1) browser.safari = ua;\n  return browser;\n};\n\nutil.browser = util._inferBrowser();\n\nutil.isMobileDevice = function () {\n  return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n};\n\nmodule.exports = util;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar Profiler = require('cdb.core.Profiler');\nvar templates = require('cdb.templates');\n\n/**\n * Base View for all CartoDB views.\n * DO NOT USE Backbone.View directly\n */\nvar View = Backbone.View.extend({\n  classLabel: 'cdb.core.View',\n  constructor: function(options) {\n    this.options = _.defaults(options, this.options);\n    this._models = [];\n    this._subviews = {};\n    Backbone.View.call(this, options);\n    View.viewCount++;\n    View.views[this.cid] = this;\n    this._created_at = new Date();\n    Profiler.new_value('total_views', View.viewCount);\n  },\n\n  add_related_model: function(m) {\n    if(!m) throw \"added non valid model\"\n    this._models.push(m);\n  },\n\n  addView: function(v) {\n    this._subviews[v.cid] = v;\n    v._parent = this;\n  },\n\n  removeView: function(v) {\n    delete this._subviews[v.cid];\n  },\n\n  clearSubViews: function() {\n    _(this._subviews).each(function(v) {\n      v.clean();\n    });\n    this._subviews = {};\n  },\n\n  /**\n   * this methid clean removes the view\n   * and clean and events associated. call it when\n   * the view is not going to be used anymore\n   */\n  clean: function() {\n    var self = this;\n    this.trigger('clean');\n    this.clearSubViews();\n    // remove from parent\n    if(this._parent) {\n      this._parent.removeView(this);\n      this._parent = null;\n    }\n    this.remove();\n    this.unbind();\n    // remove this model binding\n    if (this.model && this.model.unbind) this.model.unbind(null, null, this);\n    // remove model binding\n    _(this._models).each(function(m) {\n      m.unbind(null, null, self);\n    });\n    this._models = [];\n    View.viewCount--;\n    delete View.views[this.cid];\n    return this;\n  },\n\n  /**\n   * utility methods\n   */\n\n  getTemplate: function(tmpl) {\n    if(this.options.template) {\n      return  _.template(this.options.template);\n    }\n    return templates.getTemplate(tmpl);\n  },\n\n  show: function() {\n      this.$el.show();\n  },\n\n  hide: function() {\n      this.$el.hide();\n  },\n\n  /**\n  * Listen for an event on another object and triggers on itself, with the same name or a new one\n  * @method retrigger\n  * @param ev {String} event who triggers the action\n  * @param obj {Object} object where the event happens\n  * @param obj {Object} [optional] name of the retriggered event;\n  */\n  retrigger: function(ev, obj, retrigEvent) {\n    if(!retrigEvent) {\n      retrigEvent = ev;\n    }\n    var self = this;\n    obj.bind && obj.bind(ev, function() {\n      self.trigger(retrigEvent);\n    }, self)\n    // add it as related model//object\n    this.add_related_model(obj);\n  },\n  /**\n  * Captures an event and prevents the default behaviour and stops it from bubbling\n  * @method killEvent\n  * @param event {Event}\n  */\n  killEvent: function(ev) {\n    if(ev && ev.preventDefault) {\n      ev.preventDefault();\n    };\n    if(ev && ev.stopPropagation) {\n      ev.stopPropagation();\n    };\n  },\n\n  /**\n  * Remove all the tipsy tooltips from the document\n  * @method cleanTooltips\n  */\n  cleanTooltips: function() {\n    this.$('.tipsy').remove();\n  }\n\n}, {\n  viewCount: 0,\n  views: {},\n\n  /**\n   * when a view with events is inherit and you want to add more events\n   * this helper can be used:\n   * var MyView = new core.View({\n   *  events: View.extendEvents({\n   *      'click': 'fn'\n   *  })\n   * });\n   */\n  extendEvents: function(newEvents) {\n    return function() {\n      return _.extend(newEvents, this.constructor.__super__.events);\n    };\n  },\n\n  /**\n   * search for views in a view and check if they are added as subviews\n   */\n  runChecker: function() {\n    _.each(View.views, function(view) {\n      _.each(view, function(prop, k) {\n        if( k !== '_parent' &&\n            view.hasOwnProperty(k) &&\n            prop instanceof View &&\n            view._subviews[prop.cid] === undefined) {\n          console.log(\"=========\");\n          console.log(\"untracked view: \");\n          console.log(prop.el);\n          console.log('parent');\n          console.log(view.el);\n          console.log(\" \");\n        }\n      });\n    });\n  }\n});\n\nmodule.exports = View;\n",
    "var _ = require('underscore');\nvar DataviewModelBase = require('./dataview-model-base');\nvar SearchModel = require('./category-dataview/search-model');\nvar CategoryModelRange = require('./category-dataview/category-model-range');\nvar CategoriesCollection = require('./category-dataview/categories-collection');\n\n/**\n * Category dataview model\n *\n * - It has several internal models/collections\n *   - search model: it manages category search results.\n *   - filter model: it knows which items are accepted or rejected.\n */\nmodule.exports = DataviewModelBase.extend({\n\n  defaults: _.extend(\n    {\n      type: 'category',\n      filterEnabled: false,\n      allCategoryNames: [] // all (new + previously accepted), updated on data fetch (see parse)\n    },\n    DataviewModelBase.prototype.defaults\n  ),\n\n  url: function () {\n    var params = [\n      'bbox=' + this._getBoundingBoxFilterParam(),\n      'own_filter=' + (this.get('filterEnabled') ? 1 : 0)\n    ];\n    return this.get('url') + '?' + params.join('&');\n  },\n\n  initialize: function (attrs, opts) {\n    DataviewModelBase.prototype.initialize.call(this, attrs, opts);\n\n    // Internal model for calculating total amount of values in the category\n    this._rangeModel = new CategoryModelRange();\n\n    this._data = new CategoriesCollection();\n    this._searchModel = new SearchModel();\n\n    this.on('change:column change:aggregation change:aggregation_column', this._reloadMapAndForceFetch, this);\n\n    this.bind('change:url', function () {\n      this._searchModel.set({\n        url: this.get('url')\n      });\n    }, this);\n\n    this.once('change:url', function () {\n      this._rangeModel.setUrl(this.get('url'));\n    }, this);\n\n    this._rangeModel.bind('change:totalCount change:categoriesCount', function () {\n      this.set({\n        totalCount: this._rangeModel.get('totalCount'),\n        categoriesCount: this._rangeModel.get('categoriesCount')\n      });\n    }, this);\n\n    this._bindSearchModelEvents();\n  },\n\n  _onMapBoundsChanged: function () {\n    DataviewModelBase.prototype._onMapBoundsChanged.apply(this, arguments);\n    this._searchModel.fetchIfSearchIsApplied();\n  },\n\n  _bindSearchModelEvents: function () {\n    this._searchModel.bind('loading', function () {\n      this.trigger('loading', this);\n    }, this);\n    this._searchModel.bind('loaded', function () {\n      this.trigger('loaded', this);\n    }, this);\n    this._searchModel.bind('error', function (e) {\n      if (!e || (e && e.statusText !== 'abort')) {\n        this.trigger('error', this);\n      }\n    }, this);\n    this._searchModel.bind('change:data', this._onSearchDataChange, this);\n  },\n\n  _onSearchDataChange: function () {\n    this.getSearchResult().each(function (m) {\n      var selected = this.filter.isAccepted(m.get('name'));\n      m.set('selected', selected);\n    }, this);\n    this.trigger('change:searchData', this);\n  },\n\n  _shouldFetchOnBoundingBoxChange: function () {\n    return DataviewModelBase.prototype._shouldFetchOnBoundingBoxChange.call(this) && !this.isSearchApplied();\n  },\n\n  enableFilter: function () {\n    this.set('filterEnabled', true);\n  },\n\n  disableFilter: function () {\n    this.set('filterEnabled', false);\n  },\n\n  // Search model helper methods //\n\n  getSearchQuery: function () {\n    return this._searchModel.getSearchQuery();\n  },\n\n  setSearchQuery: function (q) {\n    this._searchModel.set('q', q);\n  },\n\n  isSearchValid: function () {\n    return this._searchModel.isValid();\n  },\n\n  getSearchResult: function () {\n    return this._searchModel.getData();\n  },\n\n  getSearchCount: function () {\n    return this._searchModel.getCount();\n  },\n\n  applySearch: function () {\n    this._searchModel.fetch();\n  },\n\n  isSearchApplied: function () {\n    return this._searchModel.isSearchApplied();\n  },\n\n  cleanSearch: function () {\n    this._searchModel.resetData();\n  },\n\n  setupSearch: function () {\n    if (!this.isSearchApplied()) {\n      this._searchModel.setData(\n        this._data.toJSON()\n      );\n    }\n  },\n\n  getData: function () {\n    return this._data;\n  },\n\n  getSize: function () {\n    return this._data.size();\n  },\n\n  getCount: function () {\n    return this.get('categoriesCount');\n  },\n\n  isOtherAvailable: function () {\n    return this._data.isOtherAvailable();\n  },\n\n  numberOfAcceptedCategories: function () {\n    var acceptedCategories = this.filter.acceptedCategories;\n    var numberOfRejectedCategories = this.numberOfRejectedCategories();\n    var data = this.getData();\n    var totalCategories = data.size();\n    var numberOfAcceptedCategories = data.reduce(\n      function (memo, cat) {\n        var isCategoryInData = acceptedCategories.where({ name: cat.get('name') }).length > 0;\n        return memo + (isCategoryInData ? 1 : 0);\n      },\n      0\n    );\n    if (!numberOfRejectedCategories) {\n      return numberOfAcceptedCategories;\n    } else {\n      return totalCategories - numberOfRejectedCategories;\n    }\n  },\n\n  numberOfRejectedCategories: function () {\n    var rejectedCategories = this.filter.rejectedCategories;\n    var data = this.getData();\n    return data.reduce(\n      function (memo, cat) {\n        var isCategoryInData = rejectedCategories.where({ name: cat.get('name') }).length > 0;\n        return memo + (isCategoryInData ? 1 : 0);\n      },\n      0\n    );\n  },\n\n  refresh: function () {\n    if (this.isSearchApplied()) {\n      this._searchModel.fetch();\n    } else {\n      this.fetch();\n    }\n  },\n\n  parse: function (d) {\n    var newData = [];\n    var _tmpArray = {};\n    var allNewCategories = d.categories;\n    var allNewCategoryNames = [];\n    var acceptedCategoryNames = [];\n\n    _.each(allNewCategories, function (datum) {\n      // Category might be a non-string type (e.g. number), make sure it's always a string for concistency\n      var category = String(datum.category);\n\n      allNewCategoryNames.push(category);\n      var isRejected = this.filter.isRejected(category);\n      _tmpArray[category] = true;\n\n      newData.push({\n        selected: !isRejected,\n        name: category,\n        agg: datum.agg,\n        value: datum.value\n      });\n    }, this);\n\n    // Only accepted categories should appear when filterEnabled is true\n    if (this.get('filterEnabled')) {\n      // Add accepted items that are not present in the categories data\n      this.filter.acceptedCategories.each(function (mdl) {\n        var category = mdl.get('name');\n        acceptedCategoryNames.push(category);\n        if (!_tmpArray[category]) {\n          newData.push({\n            selected: true,\n            name: category,\n            agg: false,\n            value: 0\n          });\n        }\n      }, this);\n    }\n\n    this._data.reset(newData);\n\n    return {\n      allCategoryNames: _\n        .chain(allNewCategoryNames)\n        .union(acceptedCategoryNames)\n        .unique()\n        .value(),\n      data: newData,\n      nulls: d.nulls,\n      min: d.min,\n      max: d.max,\n      count: d.count\n    };\n  },\n\n  // Backbone toJson function override\n  toJSON: function () {\n    return {\n      type: 'aggregation',\n      options: {\n        column: this.get('column'),\n        aggregation: this.get('aggregation'),\n\n        // TODO server-side is using camelCased attr name, update once fixed\n        aggregationColumn: this.get('aggregation_column')\n      }\n    };\n  }\n},\n\n  // Class props\n  {\n    ATTRS_NAMES: DataviewModelBase.ATTRS_NAMES.concat([\n      'column',\n      'aggregation',\n      'aggregation_column'\n    ])\n  }\n);\n",
    "var Backbone = require('backbone');\nvar CategoryItemModel = require('./category-item-model');\n\n/**\n *  Data categories collection\n *\n *  - It basically sorts by (value, selected and \"Other\").\n */\n\nmodule.exports = Backbone.Collection.extend({\n  model: CategoryItemModel,\n\n  comparator: function (a, b) {\n    if (a.get('name') === 'Other') {\n      return 1;\n    } else if (b.get('name') === 'Other') {\n      return -1;\n    } else if (a.get('value') === b.get('value')) {\n      return (a.get('selected') < b.get('selected')) ? 1 : -1;\n    } else {\n      return (a.get('value') < b.get('value')) ? 1 : -1;\n    }\n  },\n\n  isOtherAvailable: function () {\n    return this.where({\n      agg: true,\n      name: 'Other'\n    }).length > 0;\n  }\n\n});\n",
    "var Model = require('../../core/model');\n\n/**\n * Model for a category\n */\nmodule.exports = Model.extend({\n\n  defaults: {\n    name: '',\n    agg: false,\n    value: 0\n  }\n\n});\n",
    "var _ = require('underscore');\nvar Model = require('../../core/model');\n\n/**\n *  This model is used for getting the total amount of values\n *  from the category.\n *\n */\n\nmodule.exports = Model.extend({\n  defaults: {\n    url: '',\n    totalCount: 0,\n    categoriesCount: 0\n  },\n\n  url: function () {\n    return this.get('url');\n  },\n\n  initialize: function () {\n    this.bind('change:url', function () {\n      this.fetch();\n    }, this);\n  },\n\n  setUrl: function (url) {\n    this.set('url', url);\n  },\n\n  parse: function (d) {\n    // Calculating the total amount of all categories with the sum of all\n    // values from this model included the aggregated (Other)\n    return {\n      categoriesCount: d.categoriesCount,\n      totalCount: _.reduce(\n        _.pluck(d.categories, 'value'),\n        function (memo, value) {\n          return memo + value;\n        },\n        0\n      )\n    };\n  }\n});\n",
    "var _ = require('underscore');\nvar Model = require('../../core/model');\nvar BackboneAbortSync = require('../../util/backbone-abort-sync');\nvar CategoriesCollection = require('./categories-collection');\n\n/**\n * Category search model\n */\nmodule.exports = Model.extend({\n  defaults: {\n    q: '',\n    data: [],\n    url: ''\n  },\n\n  url: function () {\n    return this.get('url') + '/search?q=' + encodeURIComponent(this.get('q'));\n  },\n\n  initialize: function (attrs, opts) {\n    this._data = new CategoriesCollection();\n    this.sync = BackboneAbortSync.bind(this);\n  },\n\n  fetchIfSearchIsApplied: function () {\n    if (this.isSearchApplied()) {\n      this.fetch();\n    }\n  },\n\n  setData: function (data) {\n    var categories = this._parseData(data);\n    this._data.reset(categories);\n    this.set('data', categories);\n  },\n\n  getData: function () {\n    return this._data;\n  },\n\n  getSize: function () {\n    return this._data.size();\n  },\n\n  getCount: function () {\n    return this.getSize();\n  },\n\n  isValid: function () {\n    var str = this.get('q');\n    return !!(str || '');\n  },\n\n  resetData: function () {\n    this.setData([]);\n    this.set('q', '');\n  },\n\n  getSearchQuery: function () {\n    return this.get('q');\n  },\n\n  isSearchApplied: function () {\n    return this.isValid() && this.getSize() > 0;\n  },\n\n  _parseData: function (categories) {\n    var newData = [];\n    _.each(categories, function (d) {\n      if (!d.agg) {\n        newData.push({\n          selected: false,\n          name: (d.category || d.name).toString(),\n          agg: d.agg,\n          value: d.value\n        });\n      }\n    }, this);\n\n    return newData;\n  },\n\n  parse: function (r) {\n    var categories = this._parseData(r.categories);\n    this._data.reset(categories);\n    return {\n      data: categories\n    };\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n\n    this.trigger('loading', this);\n\n    if (opts.success) {\n      var successCallback = opts && opts.success;\n    }\n\n    return Model.prototype.fetch.call(this, _.extend(opts, {\n      success: function () {\n        successCallback && successCallback(arguments);\n        this.trigger('loaded', this);\n      }.bind(this),\n      error: function (mdl, err) {\n        if (!err || (err && err.statusText !== 'abort')) {\n          this.trigger('error', mdl, err);\n        }\n      }.bind(this)\n    }));\n  }\n});\n",
    "var _ = require('underscore');\nvar Model = require('../core/model');\nvar BackboneCancelSync = require('../util/backbone-abort-sync');\nvar WindshaftFiltersBoundingBoxFilter = require('../windshaft/filters/bounding-box');\nvar BOUNDING_BOX_FILTER_WAIT = 500;\n\n/**\n * Default dataview model\n */\nmodule.exports = Model.extend({\n  defaults: {\n    url: '',\n    data: [],\n    sync_on_data_change: true,\n    sync_on_bbox_change: true,\n    enabled: true\n  },\n\n  url: function () {\n    var params = [\n      'bbox=' + this._getBoundingBoxFilterParam()\n    ];\n    return this.get('url') + '?' + params.join('&');\n  },\n\n  _getBoundingBoxFilterParam: function () {\n    var boundingBoxFilter = new WindshaftFiltersBoundingBoxFilter(this._map.getViewBounds());\n    return boundingBoxFilter.toString();\n  },\n\n  initialize: function (attrs, opts) {\n    attrs = attrs || {};\n    opts = opts || {};\n\n    if (!opts.map) {\n      throw new Error('map is required');\n    }\n    if (!opts.windshaftMap) {\n      throw new Error('windshaftMap is required');\n    }\n\n    if (!attrs.id) {\n      this.set('id', this.defaults.type + '-' + this.cid);\n    }\n\n    this.layer = opts.layer;\n    this._map = opts.map;\n    this._windshaftMap = opts.windshaftMap;\n\n    this.sync = BackboneCancelSync.bind(this);\n\n    // filter is optional, so have to guard before using it\n    this.filter = opts.filter;\n    if (this.filter) {\n      this.filter.set('dataviewId', this.id);\n    }\n\n    var dataProvider = this.layer.getDataProvider();\n    if (dataProvider) {\n      this._dataProvider = dataProvider.createDataProviderForDataview(this);\n    }\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this._windshaftMap, 'instanceCreated', this._onNewWindshaftMapInstance);\n    this.listenTo(this.layer, 'change:visible', this._onLayerVisibilityChanged);\n\n    if (this._dataProvider) {\n      this.listenToOnce(this._dataProvider, 'dataChanged', this._onChangeBinds, this);\n      this.listenTo(this._dataProvider, 'dataChanged', this._onDataProviderChanged);\n    } else {\n      this.listenToOnce(this, 'change:url', function () {\n        this.fetch({\n          success: this._onChangeBinds.bind(this)\n        });\n      });\n    }\n    if (this.filter) {\n      this.listenTo(this.filter, 'change', this._onFilterChanged);\n    }\n  },\n\n  _onDataProviderChanged: function () {\n    this.set(this.parse(this._dataProvider.getData()));\n  },\n\n  /**\n   * @private\n   */\n  _onFilterChanged: function (filter) {\n    if (this._dataProvider) {\n      this._dataProvider.applyFilter(filter);\n    } else {\n      this._reloadMap();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  _reloadMap: function (opts) {\n    opts = opts || {};\n    this._map.reload(\n      _.extend(\n        opts, {\n          sourceLayerId: this.layer.get('id')\n        }\n      )\n    );\n  },\n\n  _reloadMapAndForceFetch: function () {\n    this._reloadMap({\n      forceFetch: true\n    });\n  },\n\n  _onNewWindshaftMapInstance: function (windshaftMapInstance, sourceLayerId, forceFetch) {\n    var url = windshaftMapInstance.getDataviewURL({\n      dataviewId: this.get('id'),\n      protocol: window.location.protocol === 'https:' ? 'https' : 'http'\n    });\n\n    if (url) {\n      var silent = (sourceLayerId && sourceLayerId !== this.layer.get('id'));\n\n      // TODO: Instead of setting the url here, we could invoke fetch directly\n      this.set('url', url, {\n        silent: silent,\n        forceFetch: forceFetch\n      });\n\n      if (this.get('sync_on_data_change')) {\n        this._newDataAvailable = true;\n      }\n    }\n  },\n\n  /**\n   * Enable/disable the dataview depending on the layer visibility.\n   * @private\n   * @param  {LayerModel} model the layer model which visible property has changed.\n   * @param  {Boolean} value New value for visible.\n   * @returns {void}\n   */\n  _onLayerVisibilityChanged: function (model, value) {\n    this.set({enabled: value});\n  },\n\n  _onChangeBinds: function () {\n    this.listenTo(this._map, 'change:center change:zoom', _.debounce(this._onMapBoundsChanged.bind(this), BOUNDING_BOX_FILTER_WAIT));\n\n    this.on('change:url', function (mdl, attrs, opts) {\n      if ((opts && opts.forceFetch) || this._shouldFetchOnURLChange()) {\n        this.fetch();\n      }\n    }, this);\n\n    this.on('change:enabled', function (mdl, isEnabled) {\n      if (isEnabled && this._newDataAvailable) {\n        this.fetch();\n        this._newDataAvailable = false;\n      }\n    }, this);\n  },\n\n  _onMapBoundsChanged: function () {\n    if (this._shouldFetchOnBoundingBoxChange()) {\n      this.fetch();\n    }\n\n    if (this.get('sync_on_bbox_change')) {\n      this._newDataAvailable = true;\n    }\n  },\n\n  _shouldFetchOnURLChange: function () {\n    return this.get('sync_on_data_change') && this.get('enabled');\n  },\n\n  _shouldFetchOnBoundingBoxChange: function () {\n    return this.get('enabled') && this.get('sync_on_bbox_change');\n  },\n\n  refresh: function () {\n    this.fetch();\n  },\n\n  update: function (attrs) {\n    attrs = _.pick(attrs, this.constructor.ATTRS_NAMES);\n    this.set(attrs);\n  },\n\n  getData: function () {\n    return this.get('data');\n  },\n\n  getPreviousData: function () {\n    return this.previous('data');\n  },\n\n  fetch: function (opts) {\n    opts = opts || {};\n    if (this._dataProvider) {\n      this.set(this.parse(this._dataProvider.getData()));\n    } else {\n      this.trigger('loading', this);\n\n      if (opts.success) {\n        var successCallback = opts && opts.success;\n      }\n\n      return Model.prototype.fetch.call(this, _.extend(opts, {\n        success: function () {\n          successCallback && successCallback(arguments);\n          this.trigger('loaded', this);\n        }.bind(this),\n        error: function (mdl, err) {\n          if (!err || (err && err.statusText !== 'abort')) {\n            this.trigger('error', mdl, err);\n          }\n        }.bind(this)\n      }));\n    }\n  },\n\n  toJSON: function () {\n    throw new Error('toJSON should be defined for each dataview');\n  },\n\n  remove: function () {\n    if (this.filter) {\n      this.filter.remove();\n    }\n    this.trigger('destroy', this);\n    this.stopListening();\n  }\n},\n\n  // Class props\n  {\n    ATTRS_NAMES: [\n      'id',\n      'sync_on_data_change',\n      'sync_on_bbox_change',\n      'enabled'\n    ]\n  }\n);\n",
    "var Backbone = require('backbone');\n\n/**\n * Collection of Dataviews\n */\nmodule.exports = Backbone.Collection.extend({\n  initialize: function () {\n    // If a histogram model applies the histogram sizes, rest should remove/disable\n    // the sizes applied before.\n    this.bind('change:histogram_sizes', function (m, isSizesApplied) {\n      if (isSizesApplied) {\n        this.each(function (mdl) {\n          if (mdl !== m && mdl.get('histogram_sizes')) {\n            mdl.set('histogram_sizes', false);\n          }\n        });\n      }\n    }, this);\n  }\n});\n",
    "var _ = require('underscore');\nvar Model = require('../core/model');\nvar CategoryFilter = require('../windshaft/filters/category');\nvar RangeFilter = require('../windshaft/filters/range');\nvar CategorDataviewModel = require('./category-dataview-model');\nvar FormulaDataviewModel = require('./formula-dataview-model');\nvar HistogramDataviewModel = require('./histogram-dataview-model');\nvar ListDataviewModel = require('./list-dataview-model');\n\n/**\n * Factory to create dataviews.\n * Takes care of adding and wiring up lifeceycle to other related objects (e.g. dataviews collection, layers etc.)\n */\nmodule.exports = Model.extend({\n\n  initialize: function (attrs, opts) {\n    if (!opts.map) throw new Error('map is required');\n    if (!opts.windshaftMap) throw new Error('windshaftMap is required');\n    if (!opts.dataviewsCollection) throw new Error('dataviewsCollection is required');\n    if (!opts.layersCollection) throw new Error('layersCollection is required');\n\n    this._map = opts.map;\n    this._windshaftMap = opts.windshaftMap;\n    this._dataviewsCollection = opts.dataviewsCollection;\n    this._layersCollection = opts.layersCollection;\n  },\n\n  createCategoryModel: function (layerModel, attrs) {\n    _checkProperties(attrs, ['column']);\n    var categoryFilter = new CategoryFilter({\n      layer: layerModel\n    });\n\n    attrs = _.pick(attrs, CategorDataviewModel.ATTRS_NAMES);\n    attrs.aggregation = attrs.aggregation || 'count';\n    attrs.aggregation_column = attrs.aggregation_column || attrs.column;\n\n    return this._newModel(\n      new CategorDataviewModel(attrs, {\n        map: this._map,\n        windshaftMap: this._windshaftMap,\n        filter: categoryFilter,\n        layer: layerModel\n      })\n    );\n  },\n\n  createFormulaModel: function (layerModel, attrs) {\n    _checkProperties(attrs, ['column', 'operation']);\n    attrs = _.pick(attrs, FormulaDataviewModel.ATTRS_NAMES);\n\n    return this._newModel(\n      new FormulaDataviewModel(attrs, {\n        map: this._map,\n        windshaftMap: this._windshaftMap,\n        layer: layerModel\n      })\n    );\n  },\n\n  createHistogramModel: function (layerModel, attrs) {\n    _checkProperties(attrs, ['column']);\n\n    var rangeFilter = new RangeFilter({\n      layer: layerModel\n    });\n\n    attrs = _.pick(attrs, HistogramDataviewModel.ATTRS_NAMES);\n\n    return this._newModel(\n      new HistogramDataviewModel(attrs, {\n        map: this._map,\n        windshaftMap: this._windshaftMap,\n        filter: rangeFilter,\n        layer: layerModel\n      })\n    );\n  },\n\n  createListModel: function (layerModel, attrs) {\n    _checkProperties(attrs, ['columns']);\n    attrs = _.pick(attrs, ListDataviewModel.ATTRS_NAMES);\n\n    return this._newModel(\n      new ListDataviewModel(attrs, {\n        map: this._map,\n        windshaftMap: this._windshaftMap,\n        layer: layerModel\n      })\n    );\n  },\n\n  _newModel: function (m) {\n    this._dataviewsCollection.add(m);\n    return m;\n  }\n});\n\nfunction _checkProperties (obj, propertiesArray) {\n  _.each(propertiesArray, function (prop) {\n    if (obj[prop] === undefined) {\n      throw new Error(prop + ' is required');\n    }\n  });\n}\n",
    "var _ = require('underscore');\nvar DataviewModelBase = require('./dataview-model-base');\n\nmodule.exports = DataviewModelBase.extend({\n  defaults: _.extend(\n    {\n      type: 'formula',\n      data: ''\n    },\n    DataviewModelBase.prototype.defaults\n  ),\n\n  initialize: function () {\n    DataviewModelBase.prototype.initialize.apply(this, arguments);\n    this.on('change:column change:operation', this._reloadMapAndForceFetch, this);\n  },\n\n  parse: function (r) {\n    return {\n      data: r.result,\n      nulls: r.nulls\n    };\n  },\n\n  toJSON: function () {\n    return {\n      type: 'formula',\n      options: {\n        column: this.get('column'),\n        operation: this.get('operation')\n      }\n    };\n  }\n},\n\n  // Class props\n  {\n    ATTRS_NAMES: DataviewModelBase.ATTRS_NAMES.concat([\n      'column',\n      'operation'\n    ])\n  }\n);\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DataviewModelBase = require('./dataview-model-base');\nvar HistogramDataModel = require('./histogram-dataview/histogram-data-model');\n\nmodule.exports = DataviewModelBase.extend({\n\n  defaults: _.extend(\n    {\n      type: 'histogram',\n      bins: 10\n    },\n    DataviewModelBase.prototype.defaults\n  ),\n\n  url: function () {\n    var params = ['bbox=' + this._getBoundingBoxFilterParam()];\n\n    if (this.get('column_type')) {\n      params.push('column_type=' + this.get('column_type'));\n    }\n    if (_.isNumber(this.get('own_filter'))) {\n      params.push('own_filter=' + this.get('own_filter'));\n    } else {\n      if (_.isNumber(this.get('start'))) {\n        params.push('start=' + this.get('start'));\n      }\n      if (_.isNumber(this.get('end'))) {\n        params.push('end=' + this.get('end'));\n      }\n      if (_.isNumber(this.get('bins'))) {\n        params.push('bins=' + this.get('bins'));\n      }\n    }\n    var url = this.get('url');\n    if (params.length > 0) {\n      url += '?' + params.join('&');\n    }\n    return url;\n  },\n\n  initialize: function (attrs, opts) {\n    DataviewModelBase.prototype.initialize.apply(this, arguments);\n    this._data = new Backbone.Collection(this.get('data'));\n\n    // Internal model for calculating all the data in the histogram (without filters)\n    this._unfilteredData = new HistogramDataModel({\n      bins: this.get('bins')\n    });\n\n    this._unfilteredData.bind('change:data', function (mdl, data) {\n      this.set({\n        start: mdl.get('start'),\n        end: mdl.get('end'),\n        bins: mdl.get('bins')\n      }, { silent: true });\n      this._onChangeBinds();\n    }, this);\n\n    this.once('change:url', function () {\n      this._unfilteredData.setUrl(this.get('url'));\n    }, this);\n\n    this.listenTo(this.layer, 'change:meta', this._onChangeLayerMeta);\n    this.on('change:column', this._reloadMapAndForceFetch, this);\n    this.on('change:bins change:start change:end', this._fetchAndResetFilter, this);\n  },\n\n  _initBinds: function () {\n    DataviewModelBase.prototype._initBinds.apply(this);\n    // We shouldn't listen url change for fetching the data (with filter) because\n    // we have to wait until we know all the data available (without any filter).\n    this.stopListening(this, 'change:url', null);\n  },\n\n  enableFilter: function () {\n    this.set('own_filter', 1);\n  },\n\n  disableFilter: function () {\n    this.unset('own_filter');\n  },\n\n  getData: function () {\n    return this._data.toJSON();\n  },\n\n  getUnfilteredDataModel: function () {\n    return this._unfilteredData;\n  },\n\n  getSize: function () {\n    return this._data.size();\n  },\n\n  parse: function (data) {\n    var numberOfBins = data.bins_count;\n    var width = data.bin_width;\n    var start = data.bins_start;\n\n    var buckets = new Array(numberOfBins);\n\n    _.each(data.bins, function (b) {\n      buckets[b.bin] = b;\n    });\n\n    for (var i = 0; i < numberOfBins; i++) {\n      buckets[i] = _.extend({\n        bin: i,\n        start: start + (i * width),\n        end: start + ((i + 1) * width),\n        freq: 0\n      }, buckets[i]);\n    }\n\n    // FIXME - Update the end of last bin due https://github.com/CartoDB/cartodb.js/issues/926\n    var lastBucket = buckets[numberOfBins - 1];\n    if (lastBucket && lastBucket.end < lastBucket.max) {\n      lastBucket.end = lastBucket.max;\n    }\n\n    this._data.reset(buckets);\n\n    return {\n      data: buckets,\n      nulls: data.nulls\n    };\n  },\n\n  toJSON: function (d) {\n    return {\n      type: 'histogram',\n      options: {\n        column: this.get('column'),\n        bins: this.get('bins')\n      }\n    };\n  },\n\n  _onChangeLayerMeta: function () {\n    this.filter.set('column_type', this.layer.get('meta').column_type);\n  },\n\n  _onChangeBinds: function () {\n    DataviewModelBase.prototype._onChangeBinds.call(this);\n    this.bind('change:histogram_sizes', function (mdl, isSizesApplied, d) {\n      if (isSizesApplied) {\n        this.trigger('histogram_sizes', this);\n      }\n    }, this);\n  },\n\n  _fetchAndResetFilter: function () {\n    this.fetch();\n    this.disableFilter();\n    this.filter.unsetRange();\n  }\n},\n\n  // Class props\n  {\n    ATTRS_NAMES: DataviewModelBase.ATTRS_NAMES.concat([\n      'column',\n      'column_type',\n      'bins'\n    ])\n  }\n);\n",
    "var _ = require('underscore');\nvar Model = require('../../core/model');\n\n/**\n *  This model is used for getting the total amount of data\n *  from the histogram widget (without any filter).\n */\n\nmodule.exports = Model.extend({\n  defaults: {\n    url: '',\n    data: []\n  },\n\n  url: function () {\n    return this.get('url') + '?' + 'bins=' + this.get('bins');\n  },\n\n  initialize: function () {\n    this.bind('change:url change:bins', function () {\n      this.fetch();\n    }, this);\n  },\n\n  setUrl: function (url) {\n    if (!url) {\n      throw new Error('url not specified');\n    }\n    this.set('url', url);\n  },\n\n  setBins: function (num) {\n    if (!num) {\n      throw new Error('bins not specified');\n    }\n    this.set('bins', num);\n  },\n\n  getData: function () {\n    return this.get('data');\n  },\n\n  parse: function (d) {\n    var numberOfBins = d.bins_count;\n    var width = d.bin_width;\n    var start = d.bins_start;\n\n    var buckets = new Array(numberOfBins);\n\n    _.each(d.bins, function (b) {\n      buckets[b.bin] = b;\n    });\n\n    for (var i = 0; i < numberOfBins; i++) {\n      buckets[i] = _.extend({\n        bin: i,\n        start: start + (i * width),\n        end: start + ((i + 1) * width),\n        freq: 0\n      }, buckets[i]);\n    }\n\n    return {\n      data: buckets,\n      start: buckets[0].start,\n      end: buckets[buckets.length - 1].end,\n      bins: numberOfBins\n    };\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar DataviewModelBase = require('./dataview-model-base');\n\nmodule.exports = DataviewModelBase.extend({\n\n  defaults: _.extend(\n    {\n      type: 'list',\n      columns: []\n    },\n    DataviewModelBase.prototype.defaults\n  ),\n\n  initialize: function (attrs, opts) {\n    DataviewModelBase.prototype.initialize.call(this, attrs, opts);\n    this._data = new Backbone.Collection(this.get('data'));\n    this.on('change:columns', this._reloadMapAndForceFetch, this);\n  },\n\n  getData: function () {\n    return this._data;\n  },\n\n  getSize: function () {\n    return this._data.size();\n  },\n\n  parse: function (data) {\n    var rows = data.rows;\n    this._data.reset(rows);\n    return {\n      data: rows\n    };\n  },\n\n  toJSON: function () {\n    return {\n      type: 'list',\n      options: {\n        columns: this.get('columns')\n      }\n    };\n  }\n},\n\n  // Class props\n  {\n    ATTRS_NAMES: DataviewModelBase.ATTRS_NAMES.concat([\n      'columns'\n    ])\n  }\n);\n",
    "var _ = require('underscore');\n\n/**\n *  common functions for cartodb connector\n */\nfunction CartoDBLayerCommon() {\n  this.visible = true;\n  this.interactionEnabled = [];\n}\n\nCartoDBLayerCommon.prototype = {\n\n  // the way to show/hidelayer is to set opacity\n  // removing the interactivty at the same time\n  show: function() {\n    this.setOpacity(this.options.previous_opacity === undefined ? 0.99: this.options.previous_opacity);\n    delete this.options.previous_opacity;\n    this._interactionDisabled = false;\n    this.visible = true;\n  },\n\n  hide: function() {\n    if(this.options.previous_opacity == undefined) {\n      this.options.previous_opacity = this.options.opacity;\n    }\n    this.setOpacity(0);\n    // disable here interaction for all the layers\n    this._interactionDisabled = true;\n    this.visible = false;\n  },\n\n  toggle: function() {\n    this.isVisible() ? this.hide() : this.show();\n    return this.isVisible();\n  },\n\n  /**\n   * Returns if the layer is visible or not\n   */\n  isVisible: function() {\n    return this.visible;\n  },\n\n  /**\n   * Active or desactive interaction\n   * @params enable {Number} layer number\n   * @params layer {Boolean} Choose if wants interaction or not\n   */\n  setInteraction: function(layer, b) {\n    // shift arguments to maintain compatibility\n    if (b == undefined) {\n      b = layer;\n      layer = 0;\n    }\n    var layerInteraction;\n    this.interactionEnabled[layer] = b;\n    if (!b) {\n      layerInteraction = this.interaction[layer];\n      if(layerInteraction) {\n        layerInteraction.remove();\n        this.interaction[layer] = null;\n      }\n    } else {\n      // if urls is null it means that setInteraction will be called\n      // when the layergroup token was recieved, then the real interaction\n      // layer will be created\n      if (this.model.get('urls')) {\n        // generate the tilejson from the urls. wax needs it\n        // var layer_index = this.getLayerIndexByNumber(+layer);\n        var layer_index = +layer;\n        var tilejson = this.model.getTileJSONFromTiles(layer_index);\n\n        // remove previous\n        layerInteraction = this.interaction[layer];\n        if(layerInteraction) {\n          layerInteraction.remove();\n        }\n        var self = this;\n\n        // add the new one\n        this.interaction[layer] = this.interactionClass()\n          .map(this.options.map)\n          .tilejson(tilejson)\n          .on('on', function(o) {\n            if (self._interactionDisabled) return;\n            o.layer = +layer;\n            self._manageOnEvents(self.options.map, o);\n          })\n          .on('off', function(o) {\n            if (self._interactionDisabled) return;\n            o = o || {}\n            o.layer = +layer;\n            self._manageOffEvents(self.options.map, o);\n          });\n      }\n    }\n    return this;\n  },\n\n  error: function(e) {\n    //console.log(e.error);\n  },\n\n  tilesOk: function() {\n  },\n\n  _reloadInteraction: function() {\n\n    // Clear existing interaction\n    this._clearInteraction();\n\n    // Enable interaction for the layers that have interaction\n    // (are visible AND have tooltips OR infowindows)\n    this.model.layers.each(function(layer, index) {\n      if (layer.hasInteraction()) {\n        this.setInteraction(index, true);\n      }\n    }.bind(this))\n  },\n\n  _clearInteraction: function() {\n    for(var i in this.interactionEnabled) {\n      if (this.interactionEnabled.hasOwnProperty(i) &&\n        this.interactionEnabled[i]) {\n        this.setInteraction(i, false);\n      }\n    }\n  }\n};\n\nmodule.exports = CartoDBLayerCommon;\n",
    "var CartoDBLayerGroupBase = require('./cartodb-layer-group-base');\n\nvar CartoDBLayerGroupAnonymousMap = CartoDBLayerGroupBase.extend({\n  defaults: {\n    type: 'layergroup'\n  },\n\n  // Returns the index of the CartoDB layer in relation to all layers when the map is\n  // an \"Anonymous Map\". For example, if there are two CartoDB layers and layer #0 is\n  // hidden, this method would return -1 for #0 and 0 for layer #1.\n  _getIndexOfVisibleLayer: function (layerIndex) {\n    var layers = {};\n    var i = 0;\n    this.layers.each(function (layer, index) {\n      if (layer.isVisible()) {\n        layers[index] = i;\n        i++;\n      }\n    });\n    var index = layers[layerIndex];\n    if (index === undefined) {\n      index = -1;\n    }\n\n    return index;\n  }\n});\n\nmodule.exports = CartoDBLayerGroupAnonymousMap;\n",
    "var $ = require('jquery');\nvar Backbone = require('backbone');\nvar util = require('cdb.core.util');\n\nvar CartoDBLayerGroupBase = Backbone.Model.extend({\n  defaults: {\n    visible: true\n  },\n\n  initialize: function (attributes, options) {\n    options = options || {};\n\n    if (!options.windshaftMap) {\n      throw new Error('windshaftMap option is required');\n    }\n\n    this.layers = new Backbone.Collection(options.layers || []);\n    this._windshaftMap = options.windshaftMap;\n\n    // When a new instance of the map is created in Windshaft, we will need to use\n    // new URLs for the tiles (`urls` attribute) and also for the attributes (`baseURL`)\n    this._windshaftMap.bind('instanceCreated', function (mapInstance) {\n      this.set({\n        baseURL: mapInstance.getBaseURL(),\n        urls: mapInstance.getTiles('mapnik')\n      });\n    }, this);\n  },\n\n  isEqual: function () {\n    return false;\n  },\n\n  getTileJSONFromTiles: function (layerIndex) {\n    var urls = this.get('urls');\n    if (!urls) {\n      throw new Error('tileJSON for the layer cannot be calculated until urls are set');\n    }\n\n    return {\n      tilejson: '2.0.0',\n      scheme: 'xyz',\n      grids: urls.grids[this._getIndexOfVisibleLayer(layerIndex)],\n      tiles: urls.tiles,\n      formatter: function (options, data) { return data; }\n    };\n  },\n\n  _getIndexOfVisibleLayer: function (layerIndex) {\n    throw new Error('_getIndexOfVisibleLayer must be implemented');\n  },\n\n  fetchAttributes: function (layer, featureID, callback) {\n    if (!this.get('baseURL')) {\n      throw new Error('Attributes cannot be fetched until baseURL is set');\n    }\n\n    // TODO: We need to improve this\n    var index = this._getIndexOfVisibleLayer(layer);\n    if (index >= 0) {\n      var url = [\n        this.get('baseURL'),\n        index,\n        'attributes',\n        featureID\n      ].join('/');\n\n      $.ajax({\n        dataType: 'jsonp',\n        url: url,\n        jsonpCallback: '_cdbi_layer_attributes_' + util.uniqueCallbackName(this.toJSON()),\n        cache: true,\n        success: function (data) {\n          // loadingTime.end();\n          callback(data);\n        },\n        error: function (data) {\n          // loadingTime.end();\n          // cartodb.core.Profiler.metric('cartodb-js.named_map.attributes.error').inc();\n          callback(null);\n        }\n      });\n    } else {\n      callback(null);\n    }\n  }\n});\n\nmodule.exports = CartoDBLayerGroupBase;\n",
    "var CartoDBLayerGroupBase = require('./cartodb-layer-group-base');\n\nvar CartoDBLayerGroupNamedMap = CartoDBLayerGroupBase.extend({\n  defaults: {\n    type: 'namedmap'\n  },\n\n  // Returns the index of the CartoDB layer in relation to all layers when the map is\n  // an \"Named Map\". In this case Windshaft knows about all layers (even the not visible ones)\n  // and the windshaft map template includes the basemap so we just need to return the given\n  // index increased by one.\n  _getIndexOfVisibleLayer: function (layerIndex) {\n    return ++layerIndex;\n  }\n});\n\nmodule.exports = CartoDBLayerGroupNamedMap;\n",
    "var _ = require('underscore');\nvar GeoJSONDataProviderBase = require('./geojson-data-provider-base');\n\nvar CategoryGeoJSONDataProvider = function (vectorLayerView, layerIndex) {\n  GeoJSONDataProviderBase.apply(this, arguments);\n};\n\n_.extend(CategoryGeoJSONDataProvider.prototype, GeoJSONDataProviderBase.prototype);\n\nCategoryGeoJSONDataProvider.prototype.getData = function () {\n  var options = this._dataview.attributes;\n  var columnName = options.column;\n  var filterEnabled = options.filterEnabled;\n  var numberOfCategories = 5;\n  var filter = this._vectorLayerView.getFilter(this._layerIndex);\n  var features;\n  if (!filterEnabled) {\n    features = filter.getValues(false, columnName);\n  } else {\n    features = filter.getValues();\n  }\n\n  var data = {\n    categories: [],\n    categoriesCount: 0,\n    count: 0,\n    max: 0,\n    min: 0,\n    nulls: 0,\n    type: 'aggregation'\n  };\n\n  if (!features.length) return data;\n\n  // TODO: There's probably a more efficient way of doing this\n  var groups = _.groupBy(features, function (feature) { return feature.properties[columnName]; });\n  var groupCounts = _.map(Object.keys(groups), function (key) {\n    return {\n      key: key,\n      value: groups[key].length\n    };\n  });\n  var sortedGroups = _.sortBy(groupCounts, function (group) {\n    return group.value;\n  }).reverse();\n\n  data.count = features.length;\n  data.categoriesCount = sortedGroups.length;\n  data.max = sortedGroups[0].value;\n  data.min = sortedGroups[sortedGroups.length - 1].value;\n  data.nulls = filter.getValues(false, columnName).reduce(function (p, c) { return p + (c.properties[columnName] === null ? 1 : 0); }, 0);\n\n  _.each(sortedGroups.slice(0, numberOfCategories), function (category) {\n    data.categories.push({\n      category: category.key,\n      value: category.value,\n      agg: false\n    });\n  });\n  var remainingCategories = sortedGroups.slice(numberOfCategories);\n  if (!filterEnabled && remainingCategories.length > 0) {\n    var lastCat = {\n      category: 'Other',\n      value: remainingCategories.reduce(function (p, c) {\n        return p + c.value;\n      }, 0),\n      agg: true\n    };\n    data.categories.push(lastCat);\n  }\n  return data;\n};\n\nCategoryGeoJSONDataProvider.prototype.applyFilter = function (filter) {\n  var columnName = this._dataview.get('column');\n  var filterType;\n  var filterOptions;\n  if (filter.isEmpty()) {\n    filterType = 'accept';\n    filterOptions = { column: columnName, values: 'all' };\n  } else if (filter.get('rejectAll')) {\n    filterType = 'reject';\n    filterOptions = { column: columnName, values: 'all' };\n  } else if (filter.acceptedCategories.size()) {\n    filterType = 'accept';\n    filterOptions = { column: columnName, values: filter.getAcceptedCategoryNames() };\n  } else if (filter.rejectedCategories.size()) {\n    filterType = 'reject';\n    filterOptions = { column: columnName, values: filter.getRejectedCategoryNames() };\n  }\n  this._vectorLayerView.applyFilter(this._layerIndex, filterType, filterOptions);\n};\n\nmodule.exports = CategoryGeoJSONDataProvider;\n",
    "var _ = require('underscore');\nvar GeoJSONDataProviderBase = require('./geojson-data-provider-base');\n\nvar FormulaGeoJSONDataProvider = function (vectorLayerView, layerIndex) {\n  GeoJSONDataProviderBase.apply(this, arguments);\n};\n\n_.extend(FormulaGeoJSONDataProvider.prototype, GeoJSONDataProviderBase.prototype);\n\nFormulaGeoJSONDataProvider.prototype.getData = function () {\n  var filter = this._vectorLayerView.getFilter(this._layerIndex);\n  var options = this._dataview.attributes;\n  var features = filter.getValues();\n  var operation = options.operation;\n  var columnName = options.column;\n  var nulls = features.reduce(function (p, c) { return p + (c.properties[columnName] === null ? 1 : 0); }, 0);\n  var result;\n  if (operation === 'count') {\n    result = features.length;\n  } else if (operation === 'avg') {\n    result = features.reduce(function (p, c) { return p + c.properties[columnName]; }, 0) / features.length;\n  } else if (operation === 'sum') {\n    result = features.reduce(function (p, c) { return p + c.properties[columnName]; }, 0);\n  } else if (operation === 'min') {\n    result = features.reduce(function (p, c) { return Math.min(p, c.properties[columnName]); }, Infinity);\n  } else if (operation === 'max') {\n    result = features.reduce(function (p, c) { return Math.max(p, c.properties[columnName]); }, 0);\n  } else {\n    throw new Error(\"Coudn't generate data for formula dataview and '\" + operation + \"' operation.\");\n  }\n  var data = {\n    'operation': operation,\n    'result': result,\n    'nulls': nulls,\n    'type': 'formula'\n  };\n  return data;\n};\n\nmodule.exports = FormulaGeoJSONDataProvider;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\nvar GeoJSONDataProviderBase = function (options) {\n  this._dataview = options.dataview;\n  this._vectorLayerView = options.vectorLayerView;\n  this._layerIndex = options.layerIndex;\n\n  this._vectorLayerView._on('featuresChanged', function () {\n    this.trigger('dataChanged', this.getData());\n  }.bind(this));\n};\n\nGeoJSONDataProviderBase.prototype.getData = function () {\n  throw new Error('Subclasses of GeoJSONDataProviderBase must implement .getData');\n};\n\nGeoJSONDataProviderBase.prototype.applyFilter = function () {};\n\n_.extend(GeoJSONDataProviderBase.prototype, Backbone.Events);\n\nmodule.exports = GeoJSONDataProviderBase;\n",
    "var HistogramGeoJSONDataProvider = require('./histogram-geojson-data-provider');\nvar CategoryGeoJSONDataProvider = require('./category-geojson-data-provider');\nvar FormulaGeoJSONDataProvider = require('./formula-geojson-data-provider');\nvar ListGeoJSONDataProvider = require('./list-geojson-data-provider');\n\nvar GeoJSONDataProvider = function (vectorLayerView, layerIndex) {\n  this._vectorLayerView = vectorLayerView;\n  this._layerIndex = layerIndex;\n};\n\nGeoJSONDataProvider.prototype._dataProviderMap = {\n  'histogram': HistogramGeoJSONDataProvider,\n  'category': CategoryGeoJSONDataProvider,\n  'formula': FormulaGeoJSONDataProvider,\n  'list': ListGeoJSONDataProvider\n};\n\nGeoJSONDataProvider.prototype.createDataProviderForDataview = function (dataview) {\n  var options = {\n    dataview: dataview,\n    vectorLayerView: this._vectorLayerView,\n    layerIndex: this._layerIndex\n  };\n  var DataProviderClass = this._dataProviderMap[dataview.get('type')];\n  if (DataProviderClass) {\n    return new DataProviderClass(options);\n  }\n\n  throw new Error(\"Couldn't create data provider for dataview of type \" + dataview.get('type'));\n};\n\nmodule.exports = GeoJSONDataProvider;\n",
    "var d3 = require('d3');\nvar _ = require('underscore');\nvar GeoJSONDataProviderBase = require('./geojson-data-provider-base');\n\nvar HistogramGeoJSONDataProvider = function (vectorLayerView, layerIndex) {\n  GeoJSONDataProviderBase.apply(this, arguments);\n};\n\n_.extend(HistogramGeoJSONDataProvider.prototype, GeoJSONDataProviderBase.prototype);\n\nHistogramGeoJSONDataProvider.prototype.getData = function () {\n  var options = this._dataview.attributes;\n  var filter = this._vectorLayerView.getFilter(this._layerIndex);\n  var columnName = options.column;\n  var end, start, bins, width, values;\n  var numberOfBins = options.bins || options.data.length;\n  if (options.own_filter === 1) {\n    end = filter.getMax(columnName);\n    start = filter.getMin(columnName);\n    values = filter.getValues();\n    bins = d3.layout.histogram().range([start, end])(values.map(function (f) {\n      return f.properties[options.column];\n    }));\n    width = (end - start) / bins.length;\n  } else {\n    end = options.end || filter.getMax(columnName);\n    start = typeof options.start === 'number' ? options.start : filter.getMin(columnName);\n    width = (end - start) / options.bins;\n    values = filter.getValues(false, columnName);\n    bins = d3.layout.histogram().range([start, end]).bins(numberOfBins)(values.map(function (f) {\n      return f.properties[options.column];\n    }));\n  }\n  bins = bins.map(function (bin, index) {\n    return {\n      bin: index,\n      max: d3.max(bin),\n      min: d3.min(bin),\n      avg: d3.mean(bin),\n      freq: bin.length\n    };\n  });\n  var nulls = values.reduce(function (p, c) { return p + (c.properties[columnName] === null ? 1 : 0); }, 0);\n  var average = bins.reduce(function (p, c) {\n    return p + c.avg;\n  }, 0) / bins.reduce(function (p, c) {\n    return p + c.freq;\n  }, 0);\n  var histogram = {\n    'bin_width': width,\n    'bins_count': bins.length,\n    'bins_start': start,\n    'nulls': nulls,\n    'avg': average,\n    'bins': bins,\n    'type': 'histogram'\n  };\n  return histogram;\n};\n\nHistogramGeoJSONDataProvider.prototype.applyFilter = function (filter) {\n  var columnName = this._dataview.get('column');\n  var filterOptions;\n  if (filter.isEmpty()) {\n    filterOptions = { column: columnName, min: 0, max: Infinity };\n  } else {\n    filterOptions = { column: columnName, min: filter.get('min'), max: filter.get('max') };\n  }\n\n  this._vectorLayerView.applyFilter(this._layerIndex, 'range', filterOptions);\n};\n\nmodule.exports = HistogramGeoJSONDataProvider;\n",
    "var _ = require('underscore');\nvar GeoJSONDataProviderBase = require('./geojson-data-provider-base');\n\nvar ListGeoJSONDataProvider = function (vectorLayerView, layerIndex) {\n  GeoJSONDataProviderBase.apply(this, arguments);\n};\n\n_.extend(ListGeoJSONDataProvider.prototype, GeoJSONDataProviderBase.prototype);\n\nListGeoJSONDataProvider.prototype.getData = function (features) {\n};\n\nListGeoJSONDataProvider.prototype.applyFilter = function (filter) {\n};\n\nmodule.exports = ListGeoJSONDataProvider;\n",
    "var $ = require('jquery');\n\n/**\n * geocoders for different services\n *\n * should implement a function called geocode the gets\n * the address and call callback with a list of placemarks with lat, lon\n * (at least)\n */\nvar NOKIA = {\n  keys: {\n    app_id:   \"KuYppsdXZznpffJsKT24\",\n    app_code: \"A7tBPacePg9Mj_zghvKt9Q\"\n  },\n\n  geocode: function(address, callback) {\n    address = address.toLowerCase()\n      .replace(/é/g,'e')\n      .replace(/á/g,'a')\n      .replace(/í/g,'i')\n      .replace(/ó/g,'o')\n      .replace(/ú/g,'u');\n\n    var protocol = '';\n    if(location.protocol.indexOf('http') === -1) {\n      protocol = 'http:';\n    }\n\n    $.getJSON(protocol + '//places.nlp.nokia.com/places/v1/discover/search/?q=' + encodeURIComponent(address) + '&app_id=' + this.keys.app_id + '&app_code=' + this.keys.app_code + '&Accept-Language=en-US&at=0,0&callback=?', function(data) {\n\n       var coordinates = [];\n       if (data && data.results && data.results.items && data.results.items.length > 0) {\n\n        var res = data.results.items;\n\n        for(var i in res) {\n          var r = res[i]\n            , position;\n\n          position = {\n            lat: r.position[0],\n            lon: r.position[1]\n          };\n\n          if (r.bbox) {\n            position.boundingbox = {\n              north: r.bbox[3],\n              south: r.bbox[1],\n              east: r.bbox[2],\n              west: r.bbox[0]\n            }\n          }\n          if (r.category) {\n            position.type = r.category.id;\n          }\n          if (r.title) {\n            position.title = r.title;\n          }\n          coordinates.push(position);\n        }\n      }\n\n      if (callback) {\n        callback.call(this, coordinates);\n      }\n    });\n  }\n};\n\nmodule.exports = NOKIA;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\n\n/**\n* geocoders for different services\n*\n* should implement a function called geocode the gets\n* the address and call callback with a list of placemarks with lat, lon\n* (at least)\n*/\nvar YAHOO = {\n\n  keys: {\n    app_id: \"nLQPTdTV34FB9L3yK2dCXydWXRv3ZKzyu_BdCSrmCBAM1HgGErsCyCbBbVP2Yg--\"\n  },\n\n  geocode: function(address, callback) {\n    address = address.toLowerCase()\n      .replace(/é/g,'e')\n      .replace(/á/g,'a')\n      .replace(/í/g,'i')\n      .replace(/ó/g,'o')\n      .replace(/ú/g,'u')\n      .replace(/ /g,'+');\n\n      var protocol = '';\n      if(location.protocol.indexOf('http') === -1) {\n        protocol = 'http:';\n      }\n\n      $.getJSON(protocol + '//query.yahooapis.com/v1/public/yql?q='+encodeURIComponent('SELECT * FROM json WHERE url=\"http://where.yahooapis.com/geocode?q=' + address + '&appid=' + this.keys.app_id + '&flags=JX\"') + '&format=json&callback=?', function(data) {\n\n         var coordinates = [];\n         if (data && data.query && data.query.results && data.query.results.json && data.query.results.json.ResultSet && data.query.results.json.ResultSet.Found != \"0\") {\n\n          // Could be an array or an object |arg!\n          var res;\n\n          if (_.isArray(data.query.results.json.ResultSet.Results)) {\n            res = data.query.results.json.ResultSet.Results;\n          } else {\n            res = [data.query.results.json.ResultSet.Results];\n          }\n\n          for(var i in res) {\n            var r = res[i]\n              , position;\n\n            position = {\n              lat: r.latitude,\n              lon: r.longitude\n            };\n\n            if (r.boundingbox) {\n              position.boundingbox = r.boundingbox;\n            }\n\n            coordinates.push(position);\n          }\n        }\n\n        callback(coordinates);\n      });\n  }\n};\n\nmodule.exports = YAHOO;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * create a geometry\n * @param geometryModel geojson based geometry model, see cdb.geo.Geometry\n */\nfunction GeometryView() { }\n\n_.extend(GeometryView.prototype, Backbone.Events,{\n\n  edit: function() {\n    throw new Error(\"to be implemented\");\n  }\n\n});\n\nmodule.exports = GeometryView;\n",
    "var Model = require('../core/model');\n\n/**\n * basic geometries, all of them based on geojson\n */\nvar Geometry = Model.extend({\n  isPoint: function() {\n    var type = this.get('geojson').type;\n    if(type && type.toLowerCase() === 'point')\n      return true;\n    return false;\n  }\n});\n\nmodule.exports = Geometry;\n",
    "var gmapsModels = {};\n\n// only add models if google.maps lib is loaded\nif (typeof (window.google) !== 'undefined' && typeof (window.google.maps) !== 'undefined') {\n  gmapsModels = {\n    gmaps: {\n      PointView: require('./gmaps/gmaps-point-view'),\n      PathView: require('./gmaps/gmaps-path-view')\n    },\n    GoogleMapsMapView: require('./gmaps/gmaps-map-view'),\n    GMapsTiledLayerView: require('./gmaps/gmaps-tiled-layer-view'),\n    GMapsLayerView: require('./gmaps/gmaps-layer-view'),\n    GMapsPlainLayerView: require('./gmaps/gmaps-plain-layer-view'),\n    GMapsBaseLayerView: require('./gmaps/gmaps-base-layer-view'),\n    GMapsCartoDBLayerGroupView: require('./gmaps/gmaps-cartodb-layer-group-view')\n  };\n}\n\nmodule.exports = gmapsModels;\n",
    "var config = require('cdb.config');\n\nvar CartoDBDefaultOptions = {\n  opacity:        0.99,\n  attribution:    config.get('cartodb_attributions'),\n  debug:          false,\n  visible:        true,\n  added:          false,\n  tiler_domain:   \"cartodb.com\",\n  tiler_port:     \"80\",\n  tiler_protocol: \"http\",\n  sql_api_domain:     \"cartodb.com\",\n  sql_api_port:       \"80\",\n  sql_api_protocol:   \"http\",\n  extra_params:   {\n  },\n  cdn_url:        null,\n  subdomains:     null\n};\n\nmodule.exports = CartoDBDefaultOptions;\n",
    "/* global google */\nvar _ = require('underscore');\nvar DEFAULT_MAP_STYLE = require('./gmaps-default-map-style');\nvar GMapsLayerView = require('./gmaps-layer-view');\n\nvar GMapsBaseLayerView = function(layerModel, gmapsMap) {\n  GMapsLayerView.call(this, layerModel, null, gmapsMap);\n};\n\n_.extend(\n  GMapsBaseLayerView.prototype,\n  GMapsLayerView.prototype,\n  {\n  _update: function() {\n    var m = this.model;\n    var types = {\n      \"roadmap\":      google.maps.MapTypeId.ROADMAP,\n      \"gray_roadmap\": google.maps.MapTypeId.ROADMAP,\n      \"dark_roadmap\": google.maps.MapTypeId.ROADMAP,\n      \"hybrid\":       google.maps.MapTypeId.HYBRID,\n      \"satellite\":    google.maps.MapTypeId.SATELLITE,\n      \"terrain\":      google.maps.MapTypeId.TERRAIN\n    };\n\n    this.gmapsMap.setOptions({\n      mapTypeId: types[m.get('base_type')]\n    });\n\n    this.gmapsMap.setOptions({\n      styles: m.get('style') || DEFAULT_MAP_STYLE\n    });\n  },\n  remove: function() { }\n});\n\nmodule.exports = GMapsBaseLayerView;\n",
    "var _ = require('underscore');\nvar GMapsLayerView = require('./gmaps-layer-view');\nvar wax = require('wax.cartodb.js');\nvar CartoDBDefaultOptions = require('./cartodb-default-options');\nvar Projector = require('./projector');\nvar CartoDBLayerCommon = require('../cartodb-layer-common');\nvar Profiler = require('cdb.core.Profiler');\n\nvar OPACITY_FILTER = 'progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)';\n\nfunction setImageOpacityIE8 (img, opacity) {\n  var v = Math.round(opacity * 100);\n  if (v >= 99) {\n    img.style.filter = OPACITY_FILTER;\n  } else {\n    img.style.filter = 'alpha(opacity=' + (opacity) + ');';\n  }\n}\n\nvar GMapsCartoDBLayerGroupView = function (layerModel, gmapsMap) {\n  var self = this;\n  var hovers = [];\n\n  _.bindAll(this, 'featureOut', 'featureOver', 'featureClick');\n\n  var opts = _.clone(layerModel.attributes);\n\n  opts.map = gmapsMap;\n\n  var _featureOver = opts.featureOver;\n  var _featureOut = opts.featureOut;\n  var _featureClick = opts.featureClick;\n\n  var previousEvent;\n  var eventTimeout = -1;\n\n  opts.featureOver = function (e, latlon, pxPos, data, layer) {\n    if (!hovers[layer]) {\n      self.trigger('layerenter', e, latlon, pxPos, data, layer);\n    }\n    hovers[layer] = 1;\n    _featureOver && _featureOver.apply(this, arguments);\n    self.featureOver && self.featureOver.apply(this, arguments);\n\n    // if the event is the same than before just cancel the event\n    // firing because there is a layer on top of it\n    if (e.timeStamp === previousEvent) {\n      clearTimeout(eventTimeout);\n    }\n    eventTimeout = setTimeout(function () {\n      self.trigger('mouseover', e, latlon, pxPos, data, layer);\n      self.trigger('layermouseover', e, latlon, pxPos, data, layer);\n    }, 0);\n    previousEvent = e.timeStamp;\n  };\n\n  opts.featureOut = function (m, layer) {\n    if (hovers[layer]) {\n      self.trigger('layermouseout', layer);\n    }\n    hovers[layer] = 0;\n    if (!_.any(hovers)) {\n      self.trigger('mouseout');\n    }\n    _featureOut && _featureOut.apply(this, arguments);\n    self.featureOut && self.featureOut.apply(this, arguments);\n  };\n\n  opts.featureClick = _.debounce(function () {\n    _featureClick && _featureClick.apply(this, arguments);\n    self.featureClick && self.featureClick.apply(opts, arguments);\n  }, 10);\n\n  this.options = _.defaults(opts, CartoDBDefaultOptions);\n  this.tiles = 0;\n  this.tilejson = null;\n  this.interaction = [];\n\n  // Bind changes to the urls of the layer model\n  layerModel.bind('change:urls', function () {\n    this.update();\n  }, this);\n\n  wax.g.connector.call(this, opts);\n\n  // lovely wax connector overwrites options so set them again\n  // TODO: remove wax.connector here\n  _.extend(this.options, opts);\n  GMapsLayerView.call(this, layerModel, this, gmapsMap);\n  this.projector = new Projector(opts.map);\n  CartoDBLayerCommon.call(this);\n};\n\n// TODO: Do we need this?\nGMapsCartoDBLayerGroupView.prototype = new wax.g.connector();\nGMapsCartoDBLayerGroupView.prototype.interactionClass = wax.g.interaction;\n_.extend(\n  GMapsCartoDBLayerGroupView.prototype,\n  GMapsCartoDBLayerGroupView.prototype,\n  CartoDBLayerCommon.prototype,\n  GMapsCartoDBLayerGroupView.prototype,\n  GMapsLayerView.prototype,\n  {\n    reload: function () {\n      this.model.invalidate();\n    },\n\n    remove: function () {\n      GMapsLayerView.prototype.remove.call(this);\n      this.clear();\n    },\n\n    featureOver: function (e, latlon, pixelPos, data, layer) {\n      // dont pass gmaps LatLng\n      this.trigger('featureOver', e, [latlon.lat(), latlon.lng()], pixelPos, data, layer);\n    },\n\n    featureOut: function (e, layer) {\n      this.trigger('featureOut', e, layer);\n    },\n\n    featureClick: function (e, latlon, pixelPos, data, layer) {\n      // dont pass leaflet lat/lon\n      this.trigger('featureClick', e, [latlon.lat(), latlon.lng()], pixelPos, data, layer);\n    },\n\n    error: function (e) {\n      if (this.model) {\n        this.model.trigger('error', e ? e.errors : 'unknown error');\n        this.model.trigger('tileError', e ? e.errors : 'unknown error');\n      }\n    },\n\n    ok: function (e) {\n      this.model.trigger('tileOk');\n    },\n\n    tilesOk: function (e) {\n      this.model.trigger('tileOk');\n    },\n\n    loading: function () {\n      this.trigger('loading');\n    },\n\n    finishLoading: function () {\n      this.trigger('load');\n    },\n\n    setOpacity: function (opacity) {\n      if (isNaN(opacity) || opacity > 1 || opacity < 0) {\n        throw new Error(opacity + ' is not a valid value, should be in [0, 1] range');\n      }\n      this.opacity = this.options.opacity = opacity;\n      for (var key in this.cache) {\n        var img = this.cache[key];\n        img.style.opacity = opacity;\n        setImageOpacityIE8(img, opacity);\n      }\n    },\n\n    getTile: function (coord, zoom, ownerDocument) {\n      var EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\n      var self = this;\n      var ie = 'ActiveXObject' in window,\n        ielt9 = ie && !document.addEventListener;\n\n      this.options.added = true;\n\n      if (this.tilejson === null) {\n        var key = zoom + '/' + coord.x + '/' + coord.y;\n        var i = this.cache[key] = new Image(256, 256);\n        i.src = EMPTY_GIF;\n        i.setAttribute('gTileKey', key);\n        i.style.opacity = this.options.opacity;\n        return i;\n      }\n\n      var im = wax.g.connector.prototype.getTile.call(this, coord, zoom, ownerDocument);\n\n      // in IE8 semi transparency does not work and needs filter\n      if ( ielt9 ) {\n        setImageOpacityIE8(im, this.options.opacity);\n      }\n      im.style.opacity = this.options.opacity;\n      if (this.tiles === 0) {\n        this.loading && this.loading();\n      }\n\n      this.tiles++;\n\n      var loadTime = Profiler.metric('cartodb-js.tile.png.load.time').start();\n\n      var finished = function () {\n        loadTime.end();\n        self.tiles--;\n        if (self.tiles === 0) {\n          self.finishLoading && self.finishLoading();\n        }\n      };\n      im.onload = finished;\n      im.onerror = function () {\n        Profiler.metric('cartodb-js.tile.png.error').inc();\n        finished();\n      };\n\n      return im;\n    },\n\n    onAdd: function () {},\n\n    clear: function () {\n      this._clearInteraction();\n      self.finishLoading && self.finishLoading();\n    },\n\n    update: function (done) {\n      this.loading && this.loading();\n\n      var tilejson = this.model.get('urls');\n      if (tilejson) {\n        this.tilejson = tilejson;\n        this.options.tiles = tilejson.tiles;\n        this.tiles = 0;\n        this.cache = {};\n        this._reloadInteraction();\n        this.refreshView();\n        this.ok && this.ok();\n        done && done();\n      } else {\n        this.error && this.error('URLs have not been fetched yet');\n        done && done();\n      }\n    },\n\n    refreshView: function () {\n      var self = this;\n      var map = this.options.map;\n      map.overlayMapTypes.forEach(\n        function (layer, i) {\n          if (layer == self) {\n            map.overlayMapTypes.setAt(i, self);\n            return;\n          }\n        }\n      );\n    },\n\n    _checkLayer: function () {\n      if (!this.options.added) {\n        throw new Error('the layer is not still added to the map');\n      }\n    },\n\n    _findPos: function (map, o) {\n      var curleft = 0;\n      var curtop = 0;\n      var obj = map.getDiv();\n\n      var x, y;\n      if (o.e.changedTouches && o.e.changedTouches.length > 0) {\n        x = o.e.changedTouches[0].clientX + window.scrollX;\n        y = o.e.changedTouches[0].clientY + window.scrollY;\n      } else {\n        x = o.e.clientX;\n        y = o.e.clientY;\n      }\n\n      // If the map is fixed at the top of the window, we can't use offsetParent\n      // cause there might be some scrolling that we need to take into account.\n      if (obj.offsetParent && obj.offsetTop > 0) {\n        do {\n          curleft += obj.offsetLeft;\n          curtop += obj.offsetTop;\n        } while (obj = obj.offsetParent);\n        var point = this._newPoint(\n          x - curleft, y - curtop);\n      } else {\n        var rect = obj.getBoundingClientRect();\n        var scrollX = (window.scrollX || window.pageXOffset);\n        var scrollY = (window.scrollY || window.pageYOffset);\n        var point = this._newPoint(\n          (o.e.clientX ? o.e.clientX : x) - rect.left - obj.clientLeft - scrollX,\n          (o.e.clientY ? o.e.clientY : y) - rect.top - obj.clientTop - scrollY);\n      }\n      return point;\n    },\n\n    /**\n     * Creates an instance of a googleMaps Point\n     */\n    _newPoint: function (x, y) {\n      return new google.maps.Point(x, y);\n    },\n\n    _manageOffEvents: function (map, o) {\n      if (this.options.featureOut) {\n        return this.options.featureOut && this.options.featureOut(o.e, o.layer);\n      }\n    },\n\n    _manageOnEvents: function (map, o) {\n      var point = this._findPos(map, o);\n      var latlng = this.projector.pixelToLatLng(point);\n      var event_type = o.e.type.toLowerCase();\n\n      switch (event_type) {\n        case 'mousemove':\n          if (this.options.featureOver) {\n            return this.options.featureOver(o.e, latlng, point, o.data, o.layer);\n          }\n          break;\n\n        case 'click':\n        case 'touchend':\n        case 'touchmove': // for some reason android browser does not send touchend\n        case 'mspointerup':\n        case 'pointerup':\n        case 'pointermove':\n          if (this.options.featureClick) {\n            this.options.featureClick(o.e, latlng, point, o.data, o.layer);\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n);\n\nmodule.exports = GMapsCartoDBLayerGroupView;\n",
    "var DEFAULT_MAP_STYLE = [{\n    stylers: [{\n        saturation: -65\n    }, {\n        gamma: 1.52\n    }]\n}, {\n    featureType: \"administrative\",\n    stylers: [{\n        saturation: -95\n    }, {\n        gamma: 2.26\n    }]\n}, {\n    featureType: \"water\",\n    elementType: \"labels\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"administrative.locality\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"road\",\n    stylers: [{\n        visibility: \"simplified\"\n    }, {\n        saturation: -99\n    }, {\n        gamma: 2.22\n    }]\n}, {\n    featureType: \"poi\",\n    elementType: \"labels\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"road.arterial\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"road.local\",\n    elementType: \"labels\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"transit\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"road\",\n    elementType: \"labels\",\n    stylers: [{\n        visibility: \"off\"\n    }]\n}, {\n    featureType: \"poi\",\n    stylers: [{\n        saturation: -55\n    }]\n}];\n\nmodule.exports = DEFAULT_MAP_STYLE;\n",
    "/* global google */\nvar log = require('cdb.log');\n\nvar GMapsLayerViewFactory = function () {};\n\nvar constructors = {};\n\n// Only \"register\" the layer view mappings if Google Maps library is present\nif (typeof (google) !== 'undefined' && typeof (google.maps) !== 'undefined') {\n  var GMapsBaseLayerView = require('./gmaps-base-layer-view');\n  var GMapsTiledLayerView = require('./gmaps-tiled-layer-view');\n  var LeafletWMSLayerView = require('../leaflet/leaflet-wms-layer-view');\n  var GMapsPlainLayerView = require('./gmaps-plain-layer-view');\n  var GMapsCartoDBLayerGroupView = require('./gmaps-cartodb-layer-group-view');\n  var GMapsTorqueLayerView = require('./gmaps-torque-layer-view');\n\n  constructors = {\n    'tiled': GMapsTiledLayerView,\n    'wms': LeafletWMSLayerView,\n    'plain': GMapsPlainLayerView,\n    'gmapsbase': GMapsBaseLayerView,\n    'layergroup': GMapsCartoDBLayerGroupView,\n    'namedmap': GMapsCartoDBLayerGroupView,\n    'torque': GMapsTorqueLayerView\n  };\n}\n\nGMapsLayerViewFactory.prototype._constructors = constructors;\n\nGMapsLayerViewFactory.prototype.createLayerView = function (layerModel, mapModel) {\n  var layerType = layerModel.get('type').toLowerCase();\n  var LayerViewClass = this._constructors[layerType];\n\n  if (LayerViewClass) {\n    try {\n      return new LayerViewClass(layerModel, mapModel);\n    } catch (e) {\n      log.error(\"Error creating an instance of layer view for '\" + layerType + \"' layer -> \" + e.message);\n      throw e;\n    }\n  } else {\n    log.error(\"Error creating an instance of layer view for '\" + layerType + \"' layer. Type is not supported\");\n  }\n};\n\nmodule.exports = GMapsLayerViewFactory;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * base layer for all google maps\n */\nvar GMapsLayerView = function(layerModel, gmapsLayer, gmapsMap) {\n  this.gmapsLayer = gmapsLayer;\n  this.map = this.gmapsMap = gmapsMap;\n  this.model = layerModel;\n  this.model.bind('change', this._update, this);\n\n  this.type = layerModel.get('type') || layerModel.get('kind');\n  this.type = this.type.toLowerCase();\n};\n\n_.extend(GMapsLayerView.prototype, Backbone.Events);\n_.extend(GMapsLayerView.prototype, {\n\n  // hack function to search layer inside google maps layers\n  _searchLayerIndex: function() {\n    var self = this;\n    var index = -1;\n    this.gmapsMap.overlayMapTypes.forEach(\n      function(layer, i) {\n        if (layer == self) {\n          index = i;\n        }\n      }\n    );\n    return index;\n  },\n\n  /**\n   * remove layer from the map and unbind events\n   */\n  remove: function() {\n    if(!this.isBase) {\n      var self = this;\n      var idx = this._searchLayerIndex();\n      if(idx >= 0) {\n        this.gmapsMap.overlayMapTypes.removeAt(idx);\n      } else if (this.gmapsLayer.setMap){\n        this.gmapsLayer.setMap(null);\n      }\n      this.model.unbind(null, null, this);\n      this.unbind();\n    }\n  },\n\n  refreshView: function() {\n    var self = this;\n    //reset to update\n    if(this.isBase) {\n      var a = '_baseLayer';\n      this.gmapsMap.setMapTypeId(null);\n      this.gmapsMap.mapTypes.set(a, this.gmapsLayer);\n      this.gmapsMap.setMapTypeId(a);\n    } else {\n      var idx = this._searchLayerIndex();\n      if(idx >= 0) {\n        this.gmapsMap.overlayMapTypes.setAt(idx, this);\n      }\n    }\n  },\n\n  reload: function() { this.refreshView() ; },\n  _update: function() { this.refreshView(); }\n\n});\n\nmodule.exports = GMapsLayerView;\n",
    "var _ = require('underscore');\nvar log = require('cdb.log');\nvar MapView = require('../map-view');\nvar Projector = require('./projector');\nvar PointView = require('./gmaps-point-view');\nvar PathView = require('./gmaps-path-view');\n\nvar GoogleMapsMapView = MapView.extend({\n\n  initialize: function() {\n    _.bindAll(this, '_ready');\n    this._isReady = false;\n    var self = this;\n\n    MapView.prototype.initialize.call(this);\n\n    var bounds = this.map.getViewBounds();\n\n    if (bounds) {\n      this.showBounds(bounds);\n    }\n\n    var center = this.map.get('center');\n\n    if (!this.isMapAlreadyCreated()) {\n\n      this._gmapsMap = new google.maps.Map(this.el, {\n        center: new google.maps.LatLng(center[0], center[1]),\n        zoom: this.map.get('zoom'),\n        minZoom: this.map.get('minZoom'),\n        maxZoom: this.map.get('maxZoom'),\n        disableDefaultUI: true,\n        scrollwheel: this.map.get(\"scrollwheel\"),\n        draggable: this.map.get(\"drag\"),\n        disableDoubleClickZoom: !this.map.get(\"drag\"),\n        mapTypeControl:false,\n        mapTypeId: google.maps.MapTypeId.ROADMAP,\n        backgroundColor: 'white',\n        tilt: 0\n      });\n\n      this.map.bind('change:maxZoom', function() {\n        self._gmapsMap.setOptions({ maxZoom: self.map.get('maxZoom') });\n      }, this);\n\n      this.map.bind('change:minZoom', function() {\n        self._gmapsMap.setOptions({ minZoom: self.map.get('minZoom') });\n      }, this);\n\n    } else {\n\n      this._gmapsMap = this.options.map_object;\n      this.setElement(this._gmapsMap.getDiv());\n\n      // fill variables\n      var c = self._gmapsMap.getCenter();\n\n      self._setModelProperty({ center: [c.lat(), c.lng()] });\n      self._setModelProperty({ zoom: self._gmapsMap.getZoom() });\n\n      // unset bounds to not change mapbounds\n      self.map.unset('view_bounds_sw', { silent: true });\n      self.map.unset('view_bounds_ne', { silent: true });\n\n    }\n\n    google.maps.event.addListener(this._gmapsMap, 'center_changed', function() {\n      var c = self._gmapsMap.getCenter();\n      self._setModelProperty({ center: [c.lat(), c.lng()] });\n    });\n\n    google.maps.event.addListener(this._gmapsMap, 'zoom_changed', function() {\n      self._setModelProperty({\n        zoom: self._gmapsMap.getZoom()\n      });\n    });\n\n    google.maps.event.addListener(this._gmapsMap, 'click', function(e) {\n      self.trigger('click', e, [e.latLng.lat(), e.latLng.lng()]);\n    });\n\n    google.maps.event.addListener(this._gmapsMap, 'dragend', function(e) {\n      var c = self._gmapsMap.getCenter();\n      self.trigger('dragend', e, [c.lat(), c.lng()]);\n    });\n\n    google.maps.event.addListener(this._gmapsMap, 'dblclick', function(e) {\n      self.trigger('dblclick', e);\n    });\n\n    this.map.geometries.bind('add', this._addGeometry, this);\n    this.map.geometries.bind('remove', this._removeGeometry, this);\n\n    this._bindModel();\n    this._addLayers();\n    this.setAttribution();\n\n    this.projector = new Projector(this._gmapsMap);\n\n    this.projector.draw = this._ready;\n  },\n\n  _ready: function() {\n    this.projector.draw = function() {};\n    this.trigger('ready');\n    this._isReady = true;\n  },\n\n  _setKeyboard: function(model, z) {\n    this._gmapsMap.setOptions({ keyboardShortcuts: z });\n  },\n\n  _setScrollWheel: function(model, z) {\n    this._gmapsMap.setOptions({ scrollwheel: z });\n  },\n\n  _setZoom: function(model, z) {\n    z = z || 0;\n    this._gmapsMap.setZoom(z);\n  },\n\n  _setCenter: function(model, center) {\n    var c = new google.maps.LatLng(center[0], center[1]);\n    this._gmapsMap.setCenter(c);\n  },\n\n  _getNativeMap: function () {\n    return this._gmapsMap;\n  },\n\n  _addLayerToMap: function(layerView, layerModel, opts) {\n    if (layerView) {\n      var isBaseLayer = _.keys(this._layerViews).length === 1 || (opts && opts.index === 0) || layerModel.get('order') === 0;\n      // set base layer\n      if(isBaseLayer) {\n        var m = layerView.model;\n        if(m.get('type') !== 'GMapsBase') {\n          layerView.isBase = true;\n        }\n      } else {\n        // TODO: Make sure this order will be right\n        var idx = layerModel.get('order');\n        if (layerView.getTile) {\n          if (!layerView.gmapsLayer) {\n            log.error(\"gmaps layer can't be null\");\n          }\n          this._gmapsMap.overlayMapTypes.setAt(idx, layerView.gmapsLayer);\n        } else {\n          layerView.gmapsLayer.setMap(this._gmapsMap);\n        }\n      }\n      if (opts === undefined || !opts.silent) {\n        this.trigger('newLayerView', layerView, layerModel, this);\n      }\n    } else {\n      log.error(\"layer type not supported\");\n    }\n\n    return layerView;\n  },\n\n  pixelToLatLon: function(pos) {\n    var latLng = this.projector.pixelToLatLng(new google.maps.Point(pos[0], pos[1]));\n    return {\n      lat: latLng.lat(),\n      lng: latLng.lng()\n    }\n  },\n\n  latLonToPixel: function(latlon) {\n    return this.projector.latLngToPixel(new google.maps.LatLng(latlon[0], latlon[1]));\n  },\n\n  getSize: function() {\n    return {\n      x: this.$el.width(),\n      y: this.$el.height()\n    };\n  },\n\n  panBy: function(p) {\n    var c = this.map.get('center');\n    var pc = this.latLonToPixel(c);\n    p.x += pc.x;\n    p.y += pc.y;\n    var ll = this.projector.pixelToLatLng(p);\n    this.map.setCenter([ll.lat(), ll.lng()]);\n  },\n\n  getBounds: function() {\n    if(this._isReady) {\n      var b = this._gmapsMap.getBounds();\n      var sw = b.getSouthWest();\n      var ne = b.getNorthEast();\n      return [\n        [sw.lat(), sw.lng()],\n        [ne.lat(), ne.lng()]\n      ];\n    }\n    return [ [0,0], [0,0] ];\n  },\n\n  setAttribution: function() {\n    // There is no control over Google Maps attribution component, so we can't add\n    // any attribution text there (if Map is already created using createLayer for example)\n    // and there is no CartoDB attribution component.\n  },\n\n  setCursor: function(cursor) {\n    this._gmapsMap.setOptions({ draggableCursor: cursor });\n  },\n\n  _addGeomToMap: function(geom) {\n    var geo = GoogleMapsMapView.createGeometry(geom);\n    if(geo.geom.length) {\n      for(var i = 0 ; i < geo.geom.length; ++i) {\n        geo.geom[i].setMap(this._gmapsMap);\n      }\n    } else {\n        geo.geom.setMap(this._gmapsMap);\n    }\n    return geo;\n  },\n\n  _removeGeomFromMap: function(geo) {\n    if(geo.geom.length) {\n      for(var i = 0 ; i < geo.geom.length; ++i) {\n        geo.geom[i].setMap(null);\n      }\n    } else {\n      geo.geom.setMap(null);\n    }\n  },\n\n  getNativeMap: function() {\n    return this._gmapsMap;\n  },\n\n  invalidateSize: function() {\n    google.maps.event.trigger(this._gmapsMap, 'resize');\n  }\n\n}, {\n\n  addLayerToMap: function(layer, map, pos) {\n    pos = pos || 0;\n    if (!layer) {\n      log.error(\"gmaps layer can't be null\");\n    }\n    if (layer.getTile) {\n      map.overlayMapTypes.setAt(pos, layer);\n    } else {\n      layer.setMap(map);\n    }\n  },\n\n  /**\n   * create the view for the geometry model\n   */\n  createGeometry: function(geometryModel) {\n    if(geometryModel.isPoint()) {\n      return new PointView(geometryModel);\n    }\n    return new PathView(geometryModel);\n  }\n});\n\nmodule.exports = GoogleMapsMapView;\n",
    "var _ = require('underscore');\nvar GeoJSON = require('geojson');\nvar GeometryView = require('../geometry-view');\n\n/**\n * view for other geometries (polygons/lines)\n */\nfunction PathView(geometryModel) {\n  var self = this;\n  // events to link\n  var events = [\n    'click',\n    'dblclick',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n  ];\n\n  this._eventHandlers = {};\n  this.model = geometryModel;\n  this.points = [];\n\n  var style = _.clone(geometryModel.get('style')) || {};\n\n  this.geom = new GeoJSON(\n    geometryModel.get('geojson'),\n    style\n  );\n\n  _.bindAll(this, '_updateModel');\n  var self = this;\n\n  function bindPath(p) {\n    google.maps.event.addListener(p, 'insert_at', self._updateModel);\n  }\n\n  // TODO: check this conditions\n\n  if(this.geom.getPaths) {\n    var paths = this.geom.getPaths();\n\n    if (paths && paths[0]) {\n      // More than one path\n      for(var i = 0; i < paths.length; ++i) {\n        bindPath(paths[i]);\n      }\n    } else {\n      // One path\n      bindPath(paths);\n      google.maps.event.addListener(this.geom, 'mouseup', this._updateModel);\n    }\n  } else {\n    // More than one path\n    if (this.geom.length) {\n      for(var i = 0; i < this.geom.length; ++i) {\n        bindPath(this.geom[i].getPath());\n        google.maps.event.addListener(this.geom[i], 'mouseup', this._updateModel);\n      }\n    } else {\n      // One path\n      bindPath(this.geom.getPath());\n      google.maps.event.addListener(this.geom, 'mouseup', this._updateModel);\n    }\n  }\n\n}\n\nPathView.prototype = new GeometryView();\n\nPathView.getGeoJSON = function(geom, gType) {\n\n  var coordFn = {\n    'Polygon': 'getPath',\n    'MultiPolygon': 'getPath',\n    'LineString': 'getPath',\n    'MultiLineString': 'getPath',\n    'Point': 'getPosition',\n    'MultiPoint': 'getPosition'\n  };\n\n  function _coord(latlng) {\n    return [latlng.lng(), latlng.lat()];\n  }\n\n  function _coords(latlngs) {\n    var c = [];\n    for(var i = 0; i < latlngs.length; ++i) {\n      c.push(_coord(latlngs.getAt(i)));\n    }\n    return c;\n  }\n\n  // single\n  if(!geom.length || geom.length == 1) {\n    var g = geom.length ? geom[0]: geom;\n    var coords;\n    if(gType == 'Point') {\n      coords = _coord(g.getPosition());\n    } else if(gType == 'MultiPoint') {\n      coords = [_coord(g.getPosition())]\n    } else if(gType == 'Polygon') {\n      coords = [_coords(g.getPath())];\n      coords[0].push(_coord(g.getPath().getAt(0)));\n    } else if(gType == 'MultiPolygon') {\n      coords = [];\n      for(var p = 0; p < g.getPaths().length; ++p) {\n        var c = _coords(g.getPaths().getAt(p));\n        c.push(_coord(g.getPaths().getAt(p).getAt(0)));\n        coords.push(c);\n      }\n      coords = [coords]\n    } else if(gType == 'LineString') {\n      coords = _coords(g.getPath());\n    } else if(gType == 'MultiLineString') {\n      //TODO: redo\n      coords = [_coords(g.getPath())];\n    }\n    return {\n      type: gType,\n      coordinates: coords\n    }\n  } else {\n    // poly\n    var c = [];\n    for(var i = 0; i < geom.length; ++i) {\n      c.push(PathView.getGeoJSON(geom[i], gType).coordinates[0]);\n    }\n    return  {\n      type: gType,\n      coordinates: c\n    }\n  }\n}\n\nPathView.prototype._updateModel = function(e) {\n  var self = this;\n  setTimeout(function() {\n    self.model.set('geojson', PathView.getGeoJSON(self.geom, self.model.get('geojson').type ));\n  }, 100)\n}\n\nPathView.prototype.edit = function(enable) {\n\n  var fn = enable ? 'enable': 'disable';\n  var g = this.geom.length ? this.geom: [this.geom];\n  for(var i = 0; i < g.length; ++i) {\n    g[i].setEditable(enable);\n  }\n  if(!enable) {\n    this.model.set('geojson', PathView.getGeoJSON(this.geom, this.model.get('geojson').type));\n  }\n};\n\nmodule.exports = PathView;\n",
    "var _ = require('underscore');\nvar GMapsLayerView = require('./gmaps-layer-view');\n\nvar GMapsPlainLayerView = function(layerModel, gmapsMap) {\n  this.color = layerModel.get('color')\n  GMapsLayerView.call(this, layerModel, this, gmapsMap);\n};\n\n_.extend(\n  GMapsPlainLayerView.prototype,\n  GMapsLayerView.prototype, {\n\n  _update: function() {\n    this.color = this.model.get('color')\n    this.refreshView();\n  },\n\n  getTile: function(coord, zoom, ownerDocument) {\n      var div = document.createElement('div');\n      div.style.width = this.tileSize.x;\n      div.style.height = this.tileSize.y;\n      div['background-color'] = this.color;\n      return div;\n  },\n\n  tileSize: new google.maps.Size(256,256),\n  maxZoom: 100,\n  minZoom: 0,\n  name:\"plain layer\",\n  alt: \"plain layer\"\n});\n\nmodule.exports = GMapsPlainLayerView;\n",
    "var _ = require('underscore');\nvar GeoJSON = require('geojson');\nvar config = require('cdb.config');\nvar GeometryView = require('../geometry-view');\n\n/**\n * view for markers\n */\nfunction PointView(geometryModel) {\n  var self = this;\n  // events to link\n  var events = [\n    'click',\n    'dblclick',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'dragstart',\n    'drag',\n    'dragend'\n  ];\n\n  this._eventHandlers = {};\n  this.model = geometryModel;\n  this.points = [];\n\n  var style = _.clone(geometryModel.get('style')) || {};\n  var iconAnchor = this.model.get('iconAnchor');\n\n  var icon = {\n    url: this.model.get('iconUrl') || config.get('assets_url') + '/images/layout/default_marker.png',\n    anchor: {\n      x: iconAnchor && iconAnchor[0] || 10,\n      y: iconAnchor && iconAnchor[1] || 10,\n    }\n  };\n\n  this.geom = new GeoJSON(\n    geometryModel.get('geojson'),\n    {\n      icon: icon,\n      raiseOnDrag: false,\n      crossOnDrag: false\n    }\n  );\n\n  // bind events\n  var i;\n  for(i = 0; i < events.length; ++i) {\n    var e = events[i];\n    google.maps.event.addListener(this.geom, e, self._eventHandler(e));\n  }\n\n  // link dragging\n  this.bind('dragend', function(e, pos) {\n    geometryModel.set({\n      geojson: {\n        type: 'Point',\n        // geojson is lng,lat\n        coordinates: [pos[1], pos[0]]\n      }\n    });\n  });\n}\n\nPointView.prototype = new GeometryView();\n\nPointView.prototype._eventHandler = function(evtType) {\n  var self = this;\n  var h = this._eventHandlers[evtType];\n  if(!h) {\n    h = function(e) {\n      var latlng = e.latLng;\n      var s = [latlng.lat(), latlng.lng()];\n      self.trigger(evtType, e, s);\n    };\n    this._eventHandlers[evtType] = h;\n  }\n  return h;\n};\n\nPointView.prototype.edit = function(enable) {\n  this.geom.setDraggable(enable);\n};\n\nmodule.exports = PointView;\n",
    "var _ = require('underscore');\nvar GMapsLayerView = require('./gmaps-layer-view');\n\nvar GMapsTiledLayerView = function(layerModel, gmapsMap) {\n  GMapsLayerView.call(this, layerModel, this, gmapsMap);\n  this.tileSize = new google.maps.Size(256, 256);\n  this.opacity = 1.0;\n  this.isPng = true;\n  this.maxZoom = 22;\n  this.minZoom = 0;\n  this.name = 'cartodb tiled layer';\n  google.maps.ImageMapType.call(this, this);\n};\n\n_.extend(\n  GMapsTiledLayerView.prototype,\n  GMapsLayerView.prototype,\n  google.maps.ImageMapType.prototype, {\n\n    getTileUrl: function(tile, zoom) {\n      var y = tile.y;\n      var tileRange = 1 << zoom;\n      if (y < 0 || y  >= tileRange) {\n        return null;\n      }\n      var x = tile.x;\n      if (x < 0 || x >= tileRange) {\n        x = (x % tileRange + tileRange) % tileRange;\n      }\n      if(this.model.get('tms')) {\n        y = tileRange - y - 1;\n      }\n      var urlPattern = this.model.get('urlTemplate');\n      return urlPattern\n                  .replace(\"{x}\",x)\n                  .replace(\"{y}\",y)\n                  .replace(\"{z}\",zoom);\n    }\n});\n\nmodule.exports = GMapsTiledLayerView;\n",
    "require('torque.js');\nvar _ = require('underscore');\nvar torque = require('torque.js');\nvar Backbone = require('backbone');\nvar GMapsLayerView = require('./gmaps-layer-view');\nvar TorqueLayerViewBase = require('../torque-layer-view-base');\n\nvar GMapsTorqueLayerView = function (layerModel, gmapsMap) {\n  GMapsLayerView.call(this, layerModel, this, gmapsMap);\n\n  torque.GMapsTorqueLayer.call(this, this._initialAttrs(layerModel));\n\n  this._init(layerModel); // available due to this model being extended with torque-layer-base\n};\n\n_.extend(\n  GMapsTorqueLayerView.prototype,\n  GMapsLayerView.prototype,\n  torque.GMapsTorqueLayer.prototype,\n  TorqueLayerViewBase,\n  {\n    _update: function () {\n      var changed = this.model.changedAttributes();\n      if (changed === false) return;\n\n      if ('visible' in changed) {\n        this.model.get('visible') ? this.show() : this.hide();\n      }\n\n      if ('urls' in changed) {\n        // REAL HACK\n        this.provider.templateUrl = this.model.get('urls').tiles[0];\n        // set meta\n        _.extend(this.provider.options, this.model.get('meta'));\n        this.model.set(this.model.get('meta'));\n        // this needs to be deferred in order to break the infinite loop\n        // of setReady changing keys and keys updating the model\n        // If we do this in the next iteration 'urls' will not be in changedAttributes\n        // so this will not pass through this code\n        setTimeout(function () {\n          this.provider._setReady(true);\n          this._reloadTiles();\n        }.bind(this), 0);\n      }\n    },\n\n    refreshView: function () {\n      // TODO: update screen\n    },\n\n    onAdd: function () {\n      torque.GMapsTorqueLayer.prototype.onAdd.apply(this);\n    },\n\n    onTilesLoaded: function () {\n      // this.trigger('load');\n      Backbone.Events.trigger.call(this, 'load');\n    },\n\n    onTilesLoading: function () {\n      Backbone.Events.trigger.call(this, 'loading');\n    }\n\n  });\n\nmodule.exports = GMapsTorqueLayerView;\n",
    "// helper to get pixel position from latlon\nvar Projector = function(map) { this.setMap(map); };\nProjector.prototype = new google.maps.OverlayView();\nProjector.prototype.draw = function() {};\nProjector.prototype.latLngToPixel = function(point) {\n  var p = this.getProjection();\n  if(p) {\n    return p.fromLatLngToContainerPixel(point);\n  }\n  return [0, 0];\n};\nProjector.prototype.pixelToLatLng = function(point) {\n  var p = this.getProjection();\n  if(p) {\n    return p.fromContainerPixelToLatLng(point);\n  }\n  return [0, 0];\n};\n\nmodule.exports = Projector;\n",
    "module.exports = {\n  LeafletLayerView: require('./leaflet/leaflet-layer-view'),\n\n  LeafletPlainLayerView: require('./leaflet/leaflet-plain-layer-view'),\n  LeafletTiledLayerView: require('./leaflet/leaflet-tiled-layer-view'),\n  LeafletGmapsTiledLayerView: require('./leaflet/leaflet-gmaps-tiled-layer-view'),\n  LeafletWMSLayerView: require('./leaflet/leaflet-wms-layer-view'),\n  LeafletCartoDBLayerGroupView: require('./leaflet/leaflet-cartodb-layer-group-view'),\n\n  leaflet: {\n    PointView: require('./leaflet/leaflet-point-view'),\n    PathView: require('./leaflet/leaflet-path-view')\n  },\n\n  LeafletMapView: require('./leaflet/leaflet-map-view')\n};\n",
    "var wax = require('wax.cartodb.js');\nvar L = require('leaflet');\nvar config = require('cdb.config');\nvar Profiler = require('cdb.core.Profiler');\nvar LeafletLayerView = require('./leaflet-layer-view');\nvar CartoDBLayerCommon = require('../cartodb-layer-common');\nvar _ = require('underscore');\nvar Backbone = require('backbone');\n\nvar LeafletCartoDBLayerGroupView = L.TileLayer.extend({\n  includes: [\n    Backbone.Events,\n    LeafletLayerView.prototype,\n    CartoDBLayerCommon.prototype\n  ],\n\n  interactionClass: wax.leaf.interaction,\n\n  options: {\n    opacity: 0.99,\n    attribution: config.get('cartodb_attributions'),\n    debug: false,\n    visible: true,\n    added: false,\n    tiler_domain: 'cartodb.com',\n    tiler_port: '80',\n    tiler_protocol: 'http',\n    sql_api_domain: 'cartodb.com',\n    sql_api_port: '80',\n    sql_api_protocol: 'http',\n    maxZoom: 30, // default leaflet zoom level for a layers is 18, raise it\n    extra_params: {\n    },\n    cdn_url: null,\n    subdomains: null\n  },\n\n  initialize: function (layerModel, leafletMap) {\n    var self = this;\n    var hovers = [];\n    this.interaction = [];\n\n    // TODO: Be more explicit about the options that are really used by the L.TileLayer\n    var opts = _.clone(layerModel.attributes);\n\n    opts.map = leafletMap;\n\n    // preserve the user's callbacks\n    var _featureOver = opts.featureOver;\n    var _featureOut = opts.featureOut;\n    var _featureClick = opts.featureClick;\n\n    var previousEvent;\n    var eventTimeout = -1;\n\n    opts.featureOver = function (e, latlon, pxPos, data, layer) {\n      if (!hovers[layer]) {\n        self.trigger('layerenter', e, latlon, pxPos, data, layer);\n      }\n      hovers[layer] = 1;\n      _featureOver && _featureOver.apply(this, arguments);\n      self.featureOver && self.featureOver.apply(self, arguments);\n      // if the event is the same than before just cancel the event\n      // firing because there is a layer on top of it\n      if (e.timeStamp === previousEvent) {\n        clearTimeout(eventTimeout);\n      }\n      eventTimeout = setTimeout(function () {\n        self.trigger('mouseover', e, latlon, pxPos, data, layer);\n        self.trigger('layermouseover', e, latlon, pxPos, data, layer);\n      }, 0);\n      previousEvent = e.timeStamp;\n    };\n\n    opts.featureOut = function (m, layer) {\n      if (hovers[layer]) {\n        self.trigger('layermouseout', layer);\n      }\n      hovers[layer] = 0;\n      if (!_.any(hovers)) {\n        self.trigger('mouseout');\n      }\n      _featureOut && _featureOut.apply(this, arguments);\n      self.featureOut && self.featureOut.apply(self, arguments);\n    };\n\n    opts.featureClick = _.debounce(function () {\n      _featureClick && _featureClick.apply(self, arguments);\n      self.featureClick && self.featureClick.apply(self, arguments);\n    }, 10);\n\n    // Set options\n    L.Util.setOptions(this, opts);\n\n    this.fire = this.trigger;\n\n    // Bind changes to the urls of the model\n    layerModel.bind('change:urls', this._onTileJSONChange, this);\n\n    this.addProfiling();\n\n    CartoDBLayerCommon.call(this);\n    L.TileLayer.prototype.initialize.call(this);\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n  },\n\n  featureOver: function (e, latlon, pixelPos, data, layer) {\n    // dont pass leaflet lat/lon\n    this.trigger('featureOver', e, [latlon.lat, latlon.lng], pixelPos, data, layer);\n  },\n\n  featureOut: function (e, layer) {\n    this.trigger('featureOut', e, layer);\n  },\n\n  featureClick: function (e, latlon, pixelPos, data, layer) {\n    // dont pass leaflet lat/lon\n    this.trigger('featureClick', e, [latlon.lat, latlon.lng], pixelPos, data, layer);\n  },\n\n  error: function (e) {\n    this.trigger('error', e ? (e.errors || e) : 'unknown error');\n    this.model.trigger('error', e ? e.errors : 'unknown error');\n  },\n\n  ok: function (e) {\n    this.model.trigger('tileOk');\n  },\n\n  addProfiling: function () {\n    this.bind('tileloadstart', function (e) {\n      var s = this.tileStats || (this.tileStats = {});\n      s[e.tile.src] = Profiler.metric('cartodb-js.tile.png.load.time').start();\n    });\n    var finish = function (e) {\n      var s = this.tileStats && this.tileStats[e.tile.src];\n      s && s.end();\n    };\n    this.bind('tileload', finish);\n    this.bind('tileerror', function (e) {\n      Profiler.metric('cartodb-js.tile.png.error').inc();\n      finish(e);\n    });\n  },\n\n  // overwrite getTileUrl in order to\n  // support different tiles subdomains in tilejson way\n  getTileUrl: function (tilePoint) {\n    var EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    this._adjustTilePoint(tilePoint);\n\n    var tiles = [EMPTY_GIF];\n    if (this.tilejson) {\n      tiles = this.tilejson.tiles;\n    }\n\n    var index = (tilePoint.x + tilePoint.y) % tiles.length;\n\n    return L.Util.template(tiles[index], L.Util.extend({\n      z: this._getZoomForUrl(),\n      x: tilePoint.x,\n      y: tilePoint.y\n    }, this.options));\n  },\n\n  /**\n   * Change opacity of the layer\n   * @params {Integer} New opacity\n   */\n  setOpacity: function (opacity) {\n    if (isNaN(opacity) || opacity > 1 || opacity < 0) {\n      throw new Error(opacity + ' is not a valid value');\n    }\n\n    // Leaflet only accepts 0-0.99... Weird!\n    this.options.opacity = Math.min(opacity, 0.99);\n\n    if (this.options.visible) {\n      L.TileLayer.prototype.setOpacity.call(this, this.options.opacity);\n      this.fire('updated');\n    }\n  },\n\n  /**\n   * When Leaflet adds the layer... go!\n   * @params {map}\n   */\n  onAdd: function (map) {\n    this.options.map = map;\n    this.options.added = true;\n    return L.TileLayer.prototype.onAdd.call(this, map);\n  },\n\n  /**\n   * When removes the layer, destroy interactivity if exist\n   */\n  onRemove: function (map) {\n    if (this.options.added) {\n      this.options.added = false;\n      L.TileLayer.prototype.onRemove.call(this, map);\n    }\n  },\n\n  /**\n   * On tileJSON change,\n   * it generates a new url for tiles and refresh leaflet layer\n   * do not collide with leaflet _update\n   */\n  _onTileJSONChange: function () {\n    var tilejson = this.model.get('urls');\n    if (tilejson) {\n      this.tilejson = tilejson;\n      this.setUrl(this.tilejson.tiles[0]);\n      // manage interaction\n      this._reloadInteraction();\n      // TODO: Is this necessary?\n      this.ok && this.ok();\n    } else {\n      this.error && this.error('URLs have not been fetched yet');\n    }\n  },\n\n  /**\n   * Bind events for wax interaction\n   * @param {Object} Layer map object\n   * @param {Event} Wax event\n   */\n  _manageOnEvents: function (map, o) {\n    var layer_point = this._findPos(map, o);\n\n    if (!layer_point || isNaN(layer_point.x) || isNaN(layer_point.y)) {\n      // If layer_point doesn't contain x and y,\n      // we can't calculate event map position\n      return false;\n    }\n\n    var latlng = map.layerPointToLatLng(layer_point);\n    var event_type = o.e.type.toLowerCase();\n    var screenPos = map.layerPointToContainerPoint(layer_point);\n\n    switch (event_type) {\n      case 'mousemove':\n        if (this.options.featureOver) {\n          return this.options.featureOver(o.e, latlng, screenPos, o.data, o.layer);\n        }\n        break;\n\n      case 'click':\n      case 'touchend':\n      case 'touchmove': // for some reason android browser does not send touchend\n      case 'mspointerup':\n      case 'pointerup':\n      case 'pointermove':\n        if (this.options.featureClick) {\n          this.options.featureClick(o.e, latlng, screenPos, o.data, o.layer);\n        }\n        break;\n      default:\n        break;\n    }\n  },\n\n  /**\n   * Bind off event for wax interaction\n   */\n  _manageOffEvents: function (map, o) {\n    if (this.options.featureOut) {\n      return this.options.featureOut && this.options.featureOut(o.e, o.layer);\n    }\n  },\n\n  /**\n   * Get the Leaflet Point of the event\n   * @params {Object} Map object\n   * @params {Object} Wax event object\n   */\n  _findPos: function (map, o) {\n    var curleft = 0;\n    var curtop = 0;\n    var obj = map.getContainer();\n\n    var x, y;\n    if (o.e.changedTouches && o.e.changedTouches.length > 0) {\n      x = o.e.changedTouches[0].clientX + window.scrollX;\n      y = o.e.changedTouches[0].clientY + window.scrollY;\n    } else {\n      x = o.e.clientX;\n      y = o.e.clientY;\n    }\n\n    // If the map is fixed at the top of the window, we can't use offsetParent\n    // cause there might be some scrolling that we need to take into account.\n    if (obj.offsetParent && obj.offsetTop > 0) {\n      do {\n        curleft += obj.offsetLeft;\n        curtop += obj.offsetTop;\n      } while (obj = obj.offsetParent);\n      var point = this._newPoint(\n        x - curleft, y - curtop);\n    } else {\n      var rect = obj.getBoundingClientRect();\n      var scrollX = (window.scrollX || window.pageXOffset);\n      var scrollY = (window.scrollY || window.pageYOffset);\n      var point = this._newPoint(\n        (o.e.clientX ? o.e.clientX : x) - rect.left - obj.clientLeft - scrollX,\n        (o.e.clientY ? o.e.clientY : y) - rect.top - obj.clientTop - scrollY);\n    }\n    return map.containerPointToLayerPoint(point);\n  },\n\n  /**\n   * Creates an instance of a Leaflet Point\n   */\n  _newPoint: function (x, y) {\n    return new L.Point(x, y);\n  },\n\n  _modelUpdated: function () {}\n});\n\nmodule.exports = LeafletCartoDBLayerGroupView;\n",
    "require('d3.cartodb');// TODO: The 'd3.cartodb' module doens't currently export L.CartoDBd3Layer\n// and it's currently relying on window.L so weed to do the following trick.\n// Check out: https://github.com/CartoDB/d3.cartodb/issues/93 for more info\nvar CartoDBd3Layer = window.L.CartoDBd3Layer;\nvar LeafletLayerView = require('./leaflet-layer-view');\nvar GeoJSONDataProviderFactory = require('../data-providers/geojson/geojson-data-provider-factory');\n\nvar LeafletCartoDBVectorLayerGroupView = CartoDBd3Layer.extend({\n  includes: [\n    LeafletLayerView.prototype\n  ],\n\n  // TODO: There's a conflict between LeafletLayerView.protoype.on\n  // and L.CartoDBd3Layer.prototype.on. The GeoJSONDataProvider needs\n  // to use the former one, so we have to add an alias.\n  _on: CartoDBd3Layer.prototype.on,\n\n  initialize: function (layerModel, leafletMap) {\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n    CartoDBd3Layer.prototype.initialize.call(this);\n\n    // Bind changes to the urls of the model\n    layerModel.bind('change:urls', this._onTileJSONChanged, this);\n\n    layerModel.layers.bind('change:cartocss', function (child, style) {\n      var index = child.get('order') - 1;\n      this.setCartoCSS(index, style);\n    }, this);\n\n    layerModel.layers.bind('change:meta', function (child, meta) {\n      var index = layerModel.layers.indexOf(child);\n      this.options.styles[index] = meta.cartocss;\n    }, this);\n\n    layerModel.layers.each(function (layer) {\n      this._onLayerAdded(layer, layerModel.layers);\n    }, this);\n\n    layerModel.layers.bind('add', this._onLayerAdded, this);\n\n    this._on('featureClick', function (event, latlng, pos, data, layerIndex) {\n      this.trigger('featureClick', event, latlng, pos, data, layerIndex);\n    }.bind(this));\n\n    this._on('featureOver', function (event, latlng, pos, data, layerIndex) {\n      this.trigger('featureOver', event, latlng, pos, data, layerIndex);\n\n      // CartoDB.js tooltips depend on the mouseover event so we trigger it here\n      this.trigger('mouseover', event, latlng, pos, data);\n    }.bind(this));\n\n    this._on('featureOut', function (event, latlng, pos, data, layerIndex) {\n      // CartoDB.js tooltips depend on the mouseout event so we trigger it here\n      this.trigger('mouseout');\n    }.bind(this));\n  },\n\n  _onLayerAdded: function (layerModel, layersCollection) {\n    var layerIndex = layersCollection.indexOf(layerModel);\n    layerModel.setDataProvider(new GeoJSONDataProviderFactory(this, layerIndex));\n  },\n\n  _onTileJSONChanged: function () {\n    var tilejson = this.model.get('urls');\n    this.setUrl(tilejson.tiles[0]);\n  },\n\n  onAdd: function (map) {\n    CartoDBd3Layer.prototype.onAdd.call(this, map);\n    this.trigger('added', this);\n    this.added = true;\n  },\n\n  // Invoked by LeafletLayerView\n  _modelUpdated: function () {}\n});\n\nmodule.exports = LeafletCartoDBVectorLayerGroupView;\n",
    "var _ = require('underscore');\nvar L = require('leaflet');\nvar LeafletLayerView = require('./leaflet-layer-view');\n\nvar stamenSubstitute = function stamenSubstitute(type) {\n  return {\n    url: 'http://{s}.basemaps.cartocdn.com/'+ type +'_all/{z}/{x}/{y}.png',\n    subdomains: 'abcd',\n    minZoom: 0,\n    maxZoom: 18,\n    attribution: 'Map designs by <a href=\"http://stamen.com/\">Stamen</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, Provided by <a href=\"http://cartodb.com\">CartoDB</a>'\n  };\n};\n\nvar nokiaSubstitute = function nokiaSubstitute(type) {\n  return {\n    url: 'https://{s}.maps.nlp.nokia.com/maptile/2.1/maptile/newest/'+ type +'.day/{z}/{x}/{y}/256/png8?lg=eng&token=A7tBPacePg9Mj_zghvKt9Q&app_id=KuYppsdXZznpffJsKT24',\n    subdomains: '1234',\n    minZoom: 0,\n    maxZoom: 21,\n    attribution: '©2012 Nokia <a href=\"http://here.net/services/terms\" target=\"_blank\">Terms of use</a>'\n  };\n};\n\nvar substitutes = {\n  roadmap: nokiaSubstitute('normal'),\n  gray_roadmap: stamenSubstitute('light'),\n  dark_roadmap: stamenSubstitute('dark'),\n  hybrid: nokiaSubstitute('hybrid'),\n  terrain: nokiaSubstitute('terrain'),\n  satellite: nokiaSubstitute('satellite')\n};\n\nvar LeafletGmapsTiledLayerView = L.TileLayer.extend({\n  initialize: function(layerModel, leafletMap) {\n    var substitute = substitutes[layerModel.get('base_type')];\n    L.TileLayer.prototype.initialize.call(this, substitute.url, {\n      tms:          false,\n      attribution:  substitute.attribution,\n      minZoom:      substitute.minZoom,\n      maxZoom:      substitute.maxZoom,\n      subdomains:   substitute.subdomains,\n      errorTileUrl: '',\n      opacity:      1\n    });\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n  }\n\n});\n\n_.extend(LeafletGmapsTiledLayerView.prototype, LeafletLayerView.prototype, {\n\n  _modelUpdated: function() {\n    // do nothing, this map type does not support updating\n  }\n\n});\n\nmodule.exports = LeafletGmapsTiledLayerView;\n",
    "var log = require('cdb.log');\nvar LeafletTiledLayerView = require('./leaflet-tiled-layer-view');\nvar LeafletWMSLayerView = require('./leaflet-wms-layer-view');\nvar LeafletPlainLayerView = require('./leaflet-plain-layer-view');\nvar LeafletGmapsTiledLayerView = require('./leaflet-gmaps-tiled-layer-view');\nvar LeafletCartoDBLayerGroupView = require('./leaflet-cartodb-layer-group-view');\nvar LeafletTorqueLayer = require('./leaflet-torque-layer');\nvar LeafletCartoDBVectorLayerGroupView = require('./leaflet-cartodb-vector-layer-group-view');\n\nvar LayerGroupViewConstructor = function (layerGroupModel, mapModel, options) {\n  if (options.vector) {\n    var layerView = new LeafletCartoDBVectorLayerGroupView(layerGroupModel, mapModel);\n\n    return layerView;\n  }\n  return new LeafletCartoDBLayerGroupView(layerGroupModel, mapModel);\n};\n\nvar LeafletLayerViewFactory = function (options) {\n  options = options || {};\n  this._vector = options.vector;\n};\n\nLeafletLayerViewFactory.prototype._constructors = {\n  'tiled': LeafletTiledLayerView,\n  'wms': LeafletWMSLayerView,\n  'plain': LeafletPlainLayerView,\n  'gmapsbase': LeafletGmapsTiledLayerView,\n  'layergroup': LayerGroupViewConstructor,\n  'namedmap': LayerGroupViewConstructor,\n  'torque': LeafletTorqueLayer\n};\n\nLeafletLayerViewFactory.prototype.createLayerView = function (layerModel, mapModel) {\n  var layerType = layerModel.get('type').toLowerCase();\n  var LayerViewClass = this._constructors[layerType];\n\n  if (LayerViewClass) {\n    try {\n      return new LayerViewClass(layerModel, mapModel, {\n        vector: this._vector\n      });\n    } catch (e) {\n      log.error(\"Error creating an instance of layer view for '\" + layerType + \"' layer -> \" + e.message);\n      throw e;\n    }\n  } else {\n    log.error(\"Error creating an instance of layer view for '\" + layerType + \"' layer. Type is not supported\");\n  }\n};\n\nmodule.exports = LeafletLayerViewFactory;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * base layer for all leaflet layers\n */\nvar LeafletLayerView = function (layerModel, leafletLayer, leafletMap) {\n  this.leafletLayer = leafletLayer;\n  this.leafletMap = leafletMap;\n  this.model = layerModel;\n\n  this.setModel(layerModel);\n\n  this.type = layerModel.get('type') || layerModel.get('kind');\n  this.type = this.type.toLowerCase();\n};\n\n_.extend(LeafletLayerView.prototype, Backbone.Events);\n_.extend(LeafletLayerView.prototype, {\n\n  setModel: function (model) {\n    if (this.model) {\n      this.model.unbind('change', this._modelUpdated, this);\n    }\n    this.model = model;\n    this.model.bind('change', this._modelUpdated, this);\n  },\n\n  /**\n   * remove layer from the map and unbind events\n   */\n  remove: function () {\n    this.leafletMap.removeLayer(this.leafletLayer);\n    this.trigger('remove', this);\n    this.model.unbind(null, null, this);\n    this.unbind();\n  },\n\n  reload: function () {\n    this.leafletLayer.redraw();\n  }\n});\n\nmodule.exports = LeafletLayerView;\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar L = require('leaflet');\nvar MapView = require('../map-view');\nvar View = require('../../core/view');\nvar Sanitize = require('../../core/sanitize');\nvar LeafletPointView = require('./leaflet-point-view');\nvar LeafletPathView = require('./leaflet-path-view');\n\nvar LeafletMapView = MapView.extend({\n\n  initialize: function() {\n\n    _.bindAll(this, '_addLayer', '_removeLayer', '_setZoom', '_setCenter', '_setView');\n\n    MapView.prototype.initialize.call(this);\n\n    var self = this;\n\n    var center = this.map.get('center');\n\n    var mapConfig = {\n      zoomControl: false,\n      center: new L.LatLng(center[0], center[1]),\n      zoom: this.map.get('zoom'),\n      minZoom: this.map.get('minZoom'),\n      maxZoom: this.map.get('maxZoom'),\n      attributionControl: false\n    };\n\n    if (!this.isMapAlreadyCreated()) {\n      this._leafletMap = new L.Map(this.el, mapConfig);\n      if (this.map.get(\"scrollwheel\") == false) this._leafletMap.scrollWheelZoom.disable();\n      if (this.map.get(\"keyboard\") == false) this._leafletMap.keyboard.disable();\n      if (this.map.get(\"drag\") == false) {\n        this._leafletMap.dragging.disable();\n        this._leafletMap.doubleClickZoom.disable();\n      }\n    } else {\n      this._leafletMap = this.options.map_object;\n      this.setElement(this._leafletMap.getContainer());\n\n      var c = self._leafletMap.getCenter();\n\n      this._setModelProperty({ center: [c.lat, c.lng] });\n      this._setModelProperty({ zoom: self._leafletMap.getZoom() });\n\n      // unset bounds to not change mapbounds\n      this.map.unset('view_bounds_sw', { silent: true });\n      this.map.unset('view_bounds_ne', { silent: true });\n    }\n\n    this.map.bind('set_view', this._setView, this);\n\n    this.map.geometries.bind('add', this._addGeometry, this);\n    this.map.geometries.bind('remove', this._removeGeometry, this);\n\n    this._bindModel();\n    this._addLayers();\n    this.setAttribution();\n\n    this._leafletMap.on('layeradd', function(lyr) {\n      this.trigger('layeradd', lyr, self);\n    }, this);\n\n    this._leafletMap.on('zoomstart', function() {\n      self.trigger('zoomstart');\n    });\n\n    this._leafletMap.on('click', function(e) {\n      self.trigger('click', e.originalEvent, [e.latlng.lat, e.latlng.lng]);\n    });\n\n    this._leafletMap.on('dblclick', function(e) {\n      self.trigger('dblclick', e.originalEvent);\n    });\n\n    this._leafletMap.on('zoomend', function() {\n      self._setModelProperty({\n        zoom: self._leafletMap.getZoom()\n      });\n      self.trigger('zoomend');\n    }, this);\n\n    this._leafletMap.on('move', function() {\n      var c = self._leafletMap.getCenter();\n      self._setModelProperty({ center: [c.lat, c.lng] });\n    });\n\n    this._leafletMap.on('dragend', function() {\n      var c = self._leafletMap.getCenter();\n      this.trigger('dragend', [c.lat, c.lng]);\n    }, this);\n\n    this._leafletMap.on('drag', function() {\n      var c = self._leafletMap.getCenter();\n      self._setModelProperty({\n        center: [c.lat, c.lng]\n      });\n      self.trigger('drag');\n    }, this);\n\n    this.map.bind('change:maxZoom', function() {\n      L.Util.setOptions(self._leafletMap, { maxZoom: self.map.get('maxZoom') });\n    }, this);\n\n    this.map.bind('change:minZoom', function() {\n      L.Util.setOptions(self._leafletMap, { minZoom: self.map.get('minZoom') });\n    }, this);\n\n    this.trigger('ready');\n\n    // looks like leaflet dont like to change the bounds just after the inicialization\n    var bounds = this.map.getViewBounds();\n\n    if (bounds) {\n      this.showBounds(bounds);\n    }\n  },\n\n  // this replaces the default functionality to search for\n  // already added views so they are not replaced\n  _addLayers: function(layerCollection, options) {\n    var self = this;\n\n    var oldLayers = this._layerViews;\n    this._layerViews = {};\n\n    function findLayerView(layer) {\n      var lv = _.find(oldLayers, function(layerView) {\n        var m = layerView.model;\n        return m.isEqual(layer);\n      });\n      return lv;\n    }\n\n    function canReused(layer) {\n      return self.map.layers.find(function(m) {\n        return m.isEqual(layer);\n      });\n    }\n\n    // remove all\n    for(var layer in oldLayers) {\n      var layerView = oldLayers[layer];\n      if (!canReused(layerView.model)) {\n        layerView.remove();\n      }\n    }\n\n    this.map.layers.each(function(layerModel) {\n      var layerView = findLayerView(layerModel);\n      if (!layerView) {\n        self._addLayer(layerModel, layerCollection, {\n          silent: (options && options.silent) || false,\n          index: options && options.index\n        });\n      } else {\n        layerView.setModel(layerModel);\n        self._layerViews[layerModel.cid] = layerView;\n        self.trigger('newLayerView', layerView, layerModel, self);\n      }\n    });\n  },\n\n  clean: function() {\n    //see https://github.com/CloudMade/Leaflet/issues/1101\n    L.DomEvent.off(window, 'resize', this._leafletMap._onResize, this._leafletMap);\n\n    // remove layer views\n    for(var layer in this._layerViews) {\n      var layerView = this._layerViews[layer];\n      layerView.remove();\n      delete this._layerViews[layer];\n    }\n\n    View.prototype.clean.call(this);\n  },\n\n  _setKeyboard: function(model, z) {\n    if (z) {\n      this._leafletMap.keyboard.enable();\n    } else {\n      this._leafletMap.keyboard.disable();\n    }\n  },\n\n  _setScrollWheel: function(model, z) {\n    if (z) {\n      this._leafletMap.scrollWheelZoom.enable();\n    } else {\n      this._leafletMap.scrollWheelZoom.disable();\n    }\n  },\n\n  _setZoom: function(model, z) {\n    this._setView();\n  },\n\n  _setCenter: function(model, center) {\n    this._setView();\n  },\n\n  _setView: function() {\n    this._leafletMap.setView(this.map.get(\"center\"), this.map.get(\"zoom\") || 0 );\n  },\n\n  _addGeomToMap: function(geom) {\n    var geo = LeafletMapView.createGeometry(geom);\n    geo.geom.addTo(this._leafletMap);\n    return geo;\n  },\n\n  _removeGeomFromMap: function(geo) {\n    this._leafletMap.removeLayer(geo.geom);\n  },\n\n  _getNativeMap: function () {\n    return this._leafletMap;\n  },\n\n  _addLayerToMap: function(layerView, layerModel, opts) {\n    LeafletMapView.addLayerToMap(layerView, this._leafletMap);\n\n    this._reorderLayerViews();\n\n    if (!opts.silent) {\n      this.trigger('newLayerView', layerView);\n    }\n    return layerView;\n  },\n\n  _reorderLayerViews: function () {\n    this.map.layers.each(function (layerModel) {\n      var layerView = this.getLayerViewByLayerCid(layerModel.cid);\n\n      // CartoDBLayers share the same layerView so the zIndex is being overriden on every iteration.\n      // The layerView will get the order of the last CartoDB layer as the zIndex\n      if (layerView) {\n        layerView.setZIndex(layerModel.get('order'));\n      }\n    }, this);\n  },\n\n  pixelToLatLon: function(pos) {\n    var point = this._leafletMap.containerPointToLatLng([pos[0], pos[1]]);\n    return point;\n  },\n\n  latLonToPixel: function(latlon) {\n    var point = this._leafletMap.latLngToLayerPoint(new L.LatLng(latlon[0], latlon[1]));\n    return this._leafletMap.layerPointToContainerPoint(point);\n  },\n\n  // return the current bounds of the map view\n  getBounds: function() {\n    var b = this._leafletMap.getBounds();\n    var sw = b.getSouthWest();\n    var ne = b.getNorthEast();\n    return [\n      [sw.lat, sw.lng],\n      [ne.lat, ne.lng]\n    ];\n  },\n\n  setAttribution: function(mdl) {\n    var attributionControl = this._leafletMap.attributionControl;\n    if (this.isMapAlreadyCreated() && attributionControl) {\n      // If this method comes from an attribution property change\n      if (mdl) {\n        var previousAttributions = mdl.previous('attribution');\n        _.each(previousAttributions, function(text) {\n          attributionControl.removeAttribution(Sanitize.html(text));\n        });\n      }\n      var currentAttributions = this.map.get('attribution');\n      _.each(currentAttributions, function(text) {\n        attributionControl.addAttribution(Sanitize.html(text));\n      });\n    }\n  },\n\n  getSize: function() {\n    return this._leafletMap.getSize();\n  },\n\n  panBy: function(p) {\n    this._leafletMap.panBy(new L.Point(p.x, p.y));\n  },\n\n  setCursor: function(cursor) {\n    $(this._leafletMap.getContainer()).css('cursor', cursor);\n  },\n\n  getNativeMap: function() {\n    return this._leafletMap;\n  },\n\n  invalidateSize: function() {\n    // there is a race condition in leaflet. If size is invalidated\n    // and at the same time the center is set the final center is displaced\n    // so set pan to false so the map is not moved and then force the map\n    // to be at the place it should be\n    this._leafletMap.invalidateSize({ pan: false })//, animate: false });\n    this._leafletMap.setView(this.map.get(\"center\"), this.map.get(\"zoom\") || 0, {\n      animate: false\n    });\n  }\n\n}, {\n  addLayerToMap: function(layerView, map, pos) {\n    map.addLayer(layerView.leafletLayer);\n    if(pos !== undefined) {\n      if (layerView.setZIndex) {\n        layerView.setZIndex(pos);\n      }\n    }\n  },\n\n  /**\n   * create the view for the geometry model\n   */\n  createGeometry: function(geometryModel) {\n    if(geometryModel.isPoint()) {\n      return new LeafletPointView(geometryModel);\n    }\n    return new LeafletPathView(geometryModel);\n  }\n\n});\n\n// set the image path in order to be able to get leaflet icons\n// code adapted from leaflet\nL.Icon.Default.imagePath = (function () {\n  var scripts = document.getElementsByTagName('script'),\n      leafletRe = /\\/?cartodb[\\-\\._]?([\\w\\-\\._]*)\\.js\\??/;\n\n  var i, len, src, matches;\n\n  for (i = 0, len = scripts.length; i < len; i++) {\n    src = scripts[i].src;\n    matches = src.match(leafletRe);\n\n    if (matches) {\n      var bits = src.split('/')\n      delete bits[bits.length - 1];\n      return bits.join('/') + 'themes/css/images';\n    }\n  }\n}());\n\nmodule.exports = LeafletMapView;\n",
    " var _ = require('underscore');\n var L = require('leaflet');\n var GeometryView = require('../geometry-view');\n\n/**\n * view for other geometries (polygons/lines)\n */\nfunction PathView(geometryModel) {\n  // events to link\n  var events = [\n    'click',\n    'dblclick',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n  ];\n\n  this._eventHandlers = {};\n  this.model = geometryModel;\n  this.points = [];\n\n\n  this.geom = L.GeoJSON.geometryToLayer(geometryModel.get('geojson'));\n  this.geom.setStyle(geometryModel.get('style'));\n}\n\nPathView.prototype = new GeometryView();\n\nPathView.prototype._leafletLayers = function() {\n  // check if this is a multi-feature or single-feature\n  if (this.geom.getLayers) {\n    return this.geom.getLayers();\n  }\n  return [this.geom];\n};\n\n\nPathView.prototype.enableEdit = function() {\n  var self = this;\n  var layers = this._leafletLayers();\n  _.each(layers, function(g) {\n    g.setStyle(self.model.get('style'));\n    g.on('edit', function() {\n      self.model.set('geojson', self.geom.toGeoJSON().geometry);\n    }, self);\n  });\n};\n\nPathView.prototype.disableEdit = function() {\n  var self = this;\n  var layers = this._leafletLayers();\n  _.each(layers, function(g) {\n    g.off('edit', null, self);\n  });\n};\n\nPathView.prototype.edit = function(enable) {\n  var self = this;\n  var fn = enable ? 'enable': 'disable';\n  var layers = this._leafletLayers();\n  _.each(layers, function(g) {\n    g.editing[fn]();\n    enable ? self.enableEdit(): self.disableEdit();\n  });\n};\n\nmodule.exports = PathView;\n",
    "var _ = require('underscore');\nvar L = require('leaflet');\nvar LeafletLayerView = require('./leaflet-layer-view');\n\n/**\n * this is a dummy layer class that modifies the leaflet DOM element background\n * instead of creating a layer with div\n */\nvar LeafletPlainLayerView = L.Class.extend({\n  includes: L.Mixin.Events,\n\n  initialize: function(layerModel, leafletMap) {\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n  },\n\n  onAdd: function() {\n    this.redraw();\n  },\n\n  onRemove: function() {\n    var div = this.leafletMap.getContainer()\n    div.style.background = 'none';\n  },\n\n  _modelUpdated: function() {\n    this.redraw();\n  },\n\n  redraw: function() {\n    var div = this.leafletMap.getContainer()\n    div.style.backgroundColor = this.model.get('color') || '#FFF';\n\n    if (this.model.get('image')) {\n      var st = 'transparent url(' + this.model.get('image') + ') repeat center center';\n      div.style.background = st\n    }\n  },\n\n  // this method\n  setZIndex: function() {\n  }\n\n});\n\n_.extend(LeafletPlainLayerView.prototype, LeafletLayerView.prototype);\n\nmodule.exports = LeafletPlainLayerView;\n",
    " var L = require('leaflet');\n var config = require('cdb.config');\n var GeometryView = require('../geometry-view');\n\n/**\n * view for markers\n */\nfunction PointView(geometryModel) {\n  var self = this;\n  // events to link\n  var events = [\n    'click',\n    'dblclick',\n    'mousedown',\n    'mouseover',\n    'mouseout',\n    'dragstart',\n    'drag',\n    'dragend'\n  ];\n\n  this._eventHandlers = {};\n  this.model = geometryModel;\n  this.points = [];\n\n  var icon = {\n    iconUrl: this.model.get('iconUrl') || config.get('assets_url') + '/images/layout/default_marker.png',\n    iconAnchor: this.model.get('iconAnchor') || [11, 11]\n  };\n\n  this.geom = L.GeoJSON.geometryToLayer(geometryModel.get('geojson'), function(geojson, latLng) {\n      //TODO: create marker depending on the visualizacion options\n      var p = L.marker(latLng, {\n        icon: L.icon(icon)\n      });\n\n      var i;\n      for(i = 0; i < events.length; ++i) {\n        var e = events[i];\n        p.on(e, self._eventHandler(e));\n      }\n      return p;\n  });\n\n  this.bind('dragend', function(e, pos) {\n    geometryModel.set({\n      geojson: {\n        type: 'Point',\n        //geojson is lng,lat\n        coordinates: [pos[1], pos[0]]\n      }\n    });\n  });\n}\n\nPointView.prototype = new GeometryView();\n\nPointView.prototype.edit = function() {\n  this.geom.dragging.enable();\n};\n\n/**\n * returns a function to handle events fot evtType\n */\nPointView.prototype._eventHandler = function(evtType) {\n  var self = this;\n  var h = this._eventHandlers[evtType];\n  if(!h) {\n    h = function(e) {\n      var latlng = e.target.getLatLng();\n      var s = [latlng.lat, latlng.lng];\n      self.trigger(evtType, e.originalEvent, s);\n    };\n    this._eventHandlers[evtType] = h;\n  }\n  return h;\n};\n\nmodule.exports = PointView;\n",
    "var _ = require('underscore');\nvar L = require('leaflet');\nvar LeafletLayerView = require('./leaflet-layer-view');\n\nvar LeafletTiledLayerView = L.TileLayer.extend({\n  initialize: function(layerModel, leafletMap) {\n    L.TileLayer.prototype.initialize.call(this, layerModel.get('urlTemplate'), {\n      tms:          layerModel.get('tms'),\n      attribution:  layerModel.get('attribution'),\n      minZoom:      layerModel.get('minZoom'),\n      maxZoom:      layerModel.get('maxZoom'),\n      subdomains:   layerModel.get('subdomains') || 'abc',\n      errorTileUrl: layerModel.get('errorTileUrl'),\n      opacity:      layerModel.get('opacity')\n    });\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n  },\n\n  onAdd: function (map) {\n    L.TileLayer.prototype.onAdd.call(this, map);\n\n    var container = this.getContainer();\n    // Disable mouse events for the container of this layer so that\n    // events are not captured and other layers below can respond to mouse\n    // events\n    container.style.pointerEvents = 'none';\n  }\n});\n\n_.extend(LeafletTiledLayerView.prototype, LeafletLayerView.prototype, {\n\n  _modelUpdated: function() {\n    _.defaults(this.leafletLayer.options, _.clone(this.model.attributes));\n    this.leafletLayer.options.subdomains = this.model.get('subdomains') || 'abc';\n    this.leafletLayer.options.attribution = this.model.get('attribution');\n    this.leafletLayer.options.maxZoom = this.model.get('maxZoom');\n    this.leafletLayer.options.minZoom = this.model.get('minZoom');\n    // set url and reload\n    this.leafletLayer.setUrl(this.model.get('urlTemplate'));\n  }\n\n});\n\nmodule.exports = LeafletTiledLayerView;\n",
    "/* global L */\nrequire('torque.js');\nvar _ = require('underscore');\nvar util = require('cdb.core.util');\nvar LeafletLayerView = require('./leaflet-layer-view');\nvar TorqueLayerViewBase = require('../torque-layer-view-base');\n\n/**\n * leaflet torque layer\n * Assumes torque.js to have been loaded\n */\nvar LeafletTorqueLayer = L.TorqueLayer.extend({\n  initialize: function (layerModel, leafletMap) {\n    var query = this._getQuery(layerModel);\n\n    var attrs = this._initialAttrs(layerModel);\n    _.extend(attrs, {\n      dynamic_cdn: layerModel.get('dynamic_cdn'),\n      instanciateCallback: function () {\n        var cartocss = layerModel.get('cartocss') || layerModel.get('tile_style');\n        return '_cdbct_' + util.uniqueCallbackName(cartocss + query);\n      }\n    });\n\n    // initialize the base layers\n    L.TorqueLayer.prototype.initialize.call(this, attrs);\n\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n\n    // match leaflet events with backbone events\n    this.fire = this.trigger;\n\n    this._init(layerModel); // available due to this model being extended with torque-layer-base\n  },\n\n  _modelUpdated: function (model) {\n    var changed = this.model.changedAttributes();\n    if (changed === false) return;\n\n    if ('visible' in changed) {\n      this.model.get('visible') ? this.show() : this.hide();\n    }\n\n    if ('urls' in changed) {\n      // REAL HACK\n      this.provider.templateUrl = this.model.get('urls').tiles[0];\n      // set meta\n      _.extend(this.provider.options, this.model.get('meta'));\n      this.model.set(this.model.get('meta'));\n      // this needs to be deferred in order to break the infinite loop\n      // of setReady changing keys and keys updating the model\n      // If we do this in the next iteration 'urls' will not be in changedAttributes\n      // so this will not pass through this code\n      setTimeout(function () {\n        this.provider._setReady(true);\n        this._reloadTiles();\n      }.bind(this), 0);\n    }\n  }\n});\n\n_.extend(LeafletTorqueLayer.prototype, LeafletLayerView.prototype);\n_.extend(LeafletTorqueLayer.prototype, TorqueLayerViewBase);\n\nmodule.exports = LeafletTorqueLayer;\n",
    "var _ = require('underscore');\nvar L = require('leaflet');\nvar LeafletLayerView = require('./leaflet-layer-view.js');\n\nvar LeafletWMSLayerView = L.TileLayer.WMS.extend({\n  initialize: function(layerModel, leafletMap) {\n\n    L.TileLayer.WMS.prototype.initialize.call(this, layerModel.get('urlTemplate'), {\n      attribution:  layerModel.get('attribution'),\n      layers:       layerModel.get('layers'),\n      format:       layerModel.get('format'),\n      transparent:  layerModel.get('transparent'),\n      minZoom:      layerModel.get('minZomm'),\n      maxZoom:      layerModel.get('maxZoom'),\n      subdomains:   layerModel.get('subdomains') || 'abc',\n      errorTileUrl: layerModel.get('errorTileUrl'),\n      opacity:      layerModel.get('opacity')\n    });\n\n    LeafletLayerView.call(this, layerModel, this, leafletMap);\n  }\n\n});\n\n_.extend(LeafletWMSLayerView.prototype, LeafletLayerView.prototype, {\n\n  _modelUpdated: function() {\n    _.defaults(this.leafletLayer.options, _.clone(this.model.attributes));\n    this.leafletLayer.setUrl(this.model.get('urlTemplate'));\n  }\n\n});\n\nmodule.exports = LeafletWMSLayerView;\n",
    "/* global google */\nvar cdb = require('cdb');\nvar LeafletLayerViewFactory = require('./leaflet/leaflet-layer-view-factory');\nvar GMapsLayerViewFactory = require('./gmaps/gmaps-layer-view-factory');\n\nvar MapViewFactory = function () {};\n\nMapViewFactory.prototype.createMapView = function (provider, mapModel, el) {\n  var MapViewClass;\n  var LayerViewFactoryClass;\n\n  if (provider === 'leaflet') {\n    MapViewClass = cdb.geo.LeafletMapView;\n    LayerViewFactoryClass = LeafletLayerViewFactory;\n  } else if (provider === 'googlemaps') {\n    if (typeof (google) !== 'undefined' && typeof (google.maps) !== 'undefined') {\n      MapViewClass = cdb.geo.GoogleMapsMapView;\n      LayerViewFactoryClass = GMapsLayerViewFactory;\n    } else {\n      throw new Error('Google maps library should be included');\n    }\n  } else {\n    throw new Error(provider + ' provider is not supported');\n  }\n\n  return new MapViewClass({\n    el: el,\n    map: mapModel,\n    layerViewFactory: new LayerViewFactoryClass({\n      vector: mapModel.get('vector')\n    })\n  });\n};\n\nmodule.exports = MapViewFactory;\n",
    "var _ = require('underscore');\nvar log = require('cdb.log');\nvar View = require('../core/view');\n\nvar CartoDBLayerGroupNamedMap = require('./cartodb-layer-group-named-map');\nvar CartoDBLayerGroupAnonymousMap = require('./cartodb-layer-group-anonymous-map');\n\nvar MapView = View.extend({\n\n  initialize: function () {\n\n    if (this.options.map === undefined) {\n      throw new Error('you should specify a map model');\n    }\n\n    if (this.options.layerViewFactory === undefined) {\n      throw new Error('you should specify a layerViewFactory');\n    }\n\n    this.map = this.options.map;\n    this.add_related_model(this.map);\n\n    this._layerViewFactory = this.options.layerViewFactory;\n    this.autoSaveBounds = false;\n\n    // A map of the LayerViews that is linked to each of the Layer models.\n    // The cid of the layer model is used as the key for this mapping.\n    this._layerViews = {};\n    this.geometries = {};\n\n    this.map.layers.bind('reset', this._addLayers, this);\n    this.map.layers.bind('add', this._addLayer, this);\n    this.map.layers.bind('remove', this._removeLayer, this);\n\n    // TODO: When this.map.layers get new indexes, something needs to happen\n    this.add_related_model(this.map.layers);\n\n    this.bind('clean', this._removeLayers, this);\n  },\n\n  render: function() {\n    return this;\n  },\n\n  /**\n  * add a infowindow to the map\n  */\n  addInfowindow: function(infoWindowView) {\n    this.addOverlay(infoWindowView);\n  },\n\n  addOverlay: function(overlay) {\n    if (overlay) {\n      this.$el.append(overlay.render().el);\n      this.addView(overlay);\n    }\n  },\n\n  isMapAlreadyCreated: function() {\n    return this.options.map_object;\n  },\n\n  /**\n  * set model property but unbind changes first in order to not create an infinite loop\n  */\n  _setModelProperty: function(prop) {\n    this._unbindModel();\n    this.map.set(prop);\n    if(prop.center !== undefined || prop.zoom !== undefined) {\n      var b = this.getBounds();\n      this.map.set({\n        view_bounds_sw: b[0],\n        view_bounds_ne: b[1]\n      });\n      if(this.autoSaveBounds) {\n        this._saveLocation();\n      }\n    }\n    this._bindModel();\n  },\n\n  /** bind model properties */\n  _bindModel: function() {\n    this._unbindModel();\n    this.map.bind('change:view_bounds_sw',  this._changeBounds, this);\n    this.map.bind('change:view_bounds_ne',  this._changeBounds, this);\n    this.map.bind('change:zoom',            this._setZoom, this);\n    this.map.bind('change:scrollwheel',     this._setScrollWheel, this);\n    this.map.bind('change:keyboard',        this._setKeyboard, this);\n    this.map.bind('change:center',          this._setCenter, this);\n    this.map.bind('change:attribution',     this.setAttribution, this);\n  },\n\n  /** unbind model properties */\n  _unbindModel: function() {\n    this.map.unbind('change:view_bounds_sw',  null, this);\n    this.map.unbind('change:view_bounds_ne',  null, this);\n    this.map.unbind('change:zoom',            null, this);\n    this.map.unbind('change:scrollwheel',     null, this);\n    this.map.unbind('change:keyboard',        null, this);\n    this.map.unbind('change:center',          null, this);\n    this.map.unbind('change:attribution',     null, this);\n  },\n\n  _changeBounds: function() {\n    var bounds = this.map.getViewBounds();\n    if(bounds) {\n      this.showBounds(bounds);\n    }\n  },\n\n  showBounds: function(bounds) {\n    this.map.fitBounds(bounds, this.getSize());\n  },\n\n  _addLayers: function(layerCollection, options) {\n    var self = this;\n    this._removeLayers();\n    this.map.layers.each(function (layerModel) {\n      self._addLayer(layerModel, layerCollection, {\n        silent: (options && options.silent) || false,\n        index: options && options.index\n      });\n    });\n  },\n\n  _addLayer: function(layerModel, layerCollection, options) {\n    var layerView;\n    if (layerModel.get('type') === 'CartoDB') {\n      layerView = this._addGroupedLayer(layerModel);\n    } else {\n      layerView = this._addIndividualLayer(layerModel);\n    }\n\n    if (!layerView) {\n      return;\n    }\n    this._addLayerToMap(layerView, layerModel, {\n      silent: options.silent,\n      index: options.index\n    });\n  },\n\n  _addGroupedLayer: function (layerModel) {\n    var layerView;\n    if (!this._cartoDBLayerGroup) {\n      this._cartoDBLayerGroup = this._newCartoDBLayerGroup(layerModel);\n      layerView = this.createLayer(this._cartoDBLayerGroup);\n      this._layerViews[layerModel.cid] = layerView;\n    } else {\n      // Add that layer to the group\n      // TODO: The only reason why the _cartoDBLayerGroup needs to access individual layers\n      // is to know if layers are visible of not, so that URLs for attributes can use the\n      // right indexes. There should be a better way to do this.\n      this._cartoDBLayerGroup.layers.add(layerModel);\n      this._layerViews[layerModel.cid] = this.getLayerViewByLayerCid(this._cartoDBLayerGroup.layers.at(0).cid);\n    }\n\n    return layerView;\n  },\n\n  _newCartoDBLayerGroup: function (layerModel) {\n    var LayerGroupClass = CartoDBLayerGroupAnonymousMap;\n    var windshaftMap = this.map.getWindshaftMap();\n    if (windshaftMap.isNamedMap()) {\n      LayerGroupClass = CartoDBLayerGroupNamedMap;\n    }\n\n    return new LayerGroupClass({}, {\n      windshaftMap: windshaftMap,\n      layers: [layerModel]\n    });\n  },\n\n  _addIndividualLayer: function (layerModel) {\n    var layerView = this.createLayer(layerModel);\n    if (layerView) {\n      this._layerViews[layerModel.cid] = layerView;\n    }\n    return layerView;\n  },\n\n  createLayer: function (layerModel) {\n    return this._layerViewFactory.createLayerView(layerModel, this.getNativeMap());\n  },\n\n  _removeLayers: function () {\n    for (var i in this._layerViews) {\n      var layerView = this._layerViews[i];\n      layerView.remove();\n      delete this._layerViews[i];\n    }\n  },\n\n  _removeLayer: function (layerModel) {\n    var layerView = this._layerViews[layerModel.cid];\n    if (layerModel.get('type') === 'CartoDB') {\n      this._cartoDBLayerGroup.layers.remove(layerModel);\n      if (this._cartoDBLayerGroup.layers.size() === 0) {\n        delete this._cartoDBLayerGroup;\n        layerView.remove();\n      }\n    } else {\n      layerView.remove();\n    }\n    delete this._layerViews[layerModel.cid];\n  },\n\n  getLayerViewByLayerCid: function(cid) {\n    var l = this._layerViews[cid];\n    if(!l) {\n      log.debug(\"layer with cid \" + cid + \" can't be get\");\n    }\n    return l;\n  },\n\n  setAttribution: function() {\n    throw new Error('Subclasses of src/geo/map-view.js must implement .setAttribution');\n  },\n\n  getNativeMap: function () {\n    throw new Error('Subclasses of src/geo/map-view.js must implement .getNativeMap');\n  },\n\n  _addLayerToMap: function() {\n    throw new Error('Subclasses of src/geo/map-view.js must implement ._addLayerToMap');\n  },\n\n  _setZoom: function(model, z) {\n    throw new Error('Subclasses of src/geo/map-view.js must implement ._setZoom');\n  },\n\n  _setCenter: function(model, center) {\n    throw new Error('Subclasses of src/geo/map-view.js must implement ._setCenter');\n  },\n\n  _addGeomToMap: function(geom) {\n    throw new Error('Subclasses of src/geo/map-view.js must implement ._addGeomToMap');\n  },\n\n  _removeGeomFromMap: function(geo) {\n    throw new Error('Subclasses of src/geo/map-view.js must implement ._removeGeomFromMap');\n  },\n\n  setAutoSaveBounds: function() {\n    this.autoSaveBounds = true;\n  },\n\n  _saveLocation: _.debounce(function() {\n    this.map.save(null, { silent: true });\n  }, 1000),\n\n  _addGeometry: function(geom) {\n    var view = this._addGeomToMap(geom);\n    this.geometries[geom.cid] = view;\n  },\n\n  _removeGeometry: function(geo) {\n    var geo_view = this.geometries[geo.cid];\n    this._removeGeomFromMap(geo_view);\n    delete this.geometries[geo.cid];\n  }\n});\n\nmodule.exports = MapView;\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar L = require('leaflet');\nvar Backbone = require('backbone');\nvar config = require('cdb.config');\nvar log = require('cdb.log');\nvar Model = require('../core/model');\nvar Layers = require('./map/layers');\nvar sanitize = require('../core/sanitize');\nvar LayersFactory = require('../vis/layers');\n\nvar Map = Model.extend({\n\n  defaults: {\n    attribution: [config.get('cartodb_attributions')],\n    center: [0, 0],\n    zoom: 4,\n    minZoom: 0,\n    maxZoom: 20,\n    scrollwheel: true,\n    drag: true,\n    keyboard: true,\n    provider: 'leaflet',\n    // enforce client-side rendering using GeoJSON vector tiles\n    vector: false\n  },\n\n  RELOAD_DEBOUNCE_TIME: 10,\n\n  initialize: function (attrs, options) {\n    options = options || {};\n    this.layers = new Layers();\n    this.geometries = new Backbone.Collection();\n\n    this._windshaftMap = options.windshaftMap;\n    this._dataviewsCollection = options.dataviewsCollection;\n\n    attrs = attrs || {};\n    if (attrs.bounds) {\n      this.set({\n        view_bounds_sw: attrs.bounds[0],\n        view_bounds_ne: attrs.bounds[1],\n        original_view_bounds_sw: attrs.bounds[0],\n        original_view_bounds_ne: attrs.bounds[1]\n      });\n      this.unset('bounds');\n    } else {\n      this.set({\n        center: attrs.center || this.defaults.center,\n        original_center: attrs.center || this.defaults.center,\n        zoom: attrs.zoom || this.defaults.zoom\n      });\n    }\n  },\n\n  // PUBLIC API METHODS\n\n  createCartoDBLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['sql', 'cartocss']);\n    return this._addNewLayerModel('cartodb', attrs, options);\n  },\n\n  createTorqueLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['sql', 'cartocss']);\n    return this._addNewLayerModel('torque', attrs, options);\n  },\n\n  createTileLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['urlTemplate']);\n    return this._addNewLayerModel('tiled', attrs, options);\n  },\n\n  createWMSLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['urlTemplate']);\n    return this._addNewLayerModel('wms', attrs, options);\n  },\n\n  createGMapsBaseLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['base_type']);\n    return this._addNewLayerModel('gmapsbase', attrs, options);\n  },\n\n  createPlainLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['color']);\n    return this._addNewLayerModel('plain', attrs, options);\n  },\n\n  createBackgroundLayer: function (attrs, options) {\n    this._checkProperties(attrs, ['image']);\n    return this._addNewLayerModel('plain', attrs, options);\n  },\n\n  _checkProperties: function (obj, requiredProperties) {\n    var missingProperties = _.select(requiredProperties, function (property) {\n      return obj[property] === undefined;\n    });\n    if (missingProperties.length) {\n      throw new Error('The following attributes are missing: ' + missingProperties.join(','));\n    }\n  },\n\n  _addNewLayerModel: function (type, attrs, options) {\n    options = options || {};\n    var silent = options.silent;\n    var layerModel = LayersFactory.create(type, attrs, {\n      map: this\n    });\n    this.listenTo(layerModel, 'destroy', this._removeLayerModelFromCollection);\n    this.layers.add(layerModel, {\n      silent: silent\n    });\n\n    return layerModel;\n  },\n\n  _removeLayerModelFromCollection: function (layerModel) {\n    return this.layers.remove(layerModel);\n  },\n\n  // INTERNAL CartoDB.js METHODS\n\n  _initBinds: function () {\n    this.layers.bind('reset', function () {\n      if (this.layers.size() >= 1) {\n        this._adjustZoomtoLayer(this.layers.models[0]);\n      }\n    }, this);\n\n    // TODO: When the order of the layers change, the instance of the map needs\n    // to be re-recreated\n    this.layers.bind('reset', this._onLayersResetted, this);\n    this.layers.bind('add', this._onLayerAdded, this);\n    this.layers.bind('remove', this._onLayerRemoved, this);\n    this.layers.bind('change:attribution', this._updateAttributions, this);\n\n    if (this._dataviewsCollection) {\n      // When new dataviews are defined, a new instance of the map needs to be created\n      this.listenTo(this._dataviewsCollection, 'add', _.debounce(this._onDataviewAdded.bind(this), 10));\n    }\n  },\n\n  instantiateMap: function () {\n    this._initBinds();\n    this.reload();\n  },\n\n  _onLayersResetted: function () {\n    this.reload();\n    this._updateAttributions();\n  },\n\n  _onLayerAdded: function (layerModel) {\n    this.reload({\n      sourceLayerId: layerModel.get('id')\n    });\n    this._updateAttributions();\n  },\n\n  _onLayerRemoved: function () {\n    this.reload();\n    this._updateAttributions();\n  },\n\n  _onDataviewAdded: function (layerModel) {\n    this.reload();\n  },\n\n  reload: _.debounce(function (options) {\n    if (this._windshaftMap) {\n      var instanceOptions = {\n        layers: this.layers.models,\n        sourceLayerId: options && options.sourceLayerId,\n        forceFetch: options && options.forceFetch\n      };\n\n      if (this._dataviewsCollection) {\n        instanceOptions.dataviews = this._dataviewsCollection;\n      }\n      this._windshaftMap.createInstance(instanceOptions);\n    }\n  }, this.RELOAD_DEBOUNCE_TIME),\n\n  _updateAttributions: function () {\n    var defaultCartoDBAttribution = this.defaults.attribution[0];\n    var attributions = _.chain(this.layers.models)\n      .map(function (layer) { return sanitize.html(layer.get('attribution')); })\n      .reject(function (attribution) { return attribution === defaultCartoDBAttribution; })\n      .compact()\n      .uniq()\n      .value();\n\n    attributions.push(defaultCartoDBAttribution);\n\n    this.set('attribution', attributions);\n  },\n\n  getWindshaftMap: function () {\n    return this._windshaftMap;\n  },\n\n  setView: function(latlng, zoom) {\n    this.set({\n      center: latlng,\n      zoom: zoom\n    }, {\n      silent: true\n    });\n    this.trigger(\"set_view\");\n  },\n\n  setZoom: function(z) {\n    this.set({\n      zoom: z\n    });\n  },\n\n  enableKeyboard: function() {\n    this.set({\n      keyboard: true\n    });\n  },\n\n  disableKeyboard: function() {\n    this.set({\n      keyboard: false\n    });\n  },\n\n  enableScrollWheel: function() {\n    this.set({\n      scrollwheel: true\n    });\n  },\n\n  disableScrollWheel: function() {\n    this.set({\n      scrollwheel: false\n    });\n  },\n\n  getZoom: function() {\n    return this.get('zoom');\n  },\n\n  setCenter: function(latlng) {\n    this.set({\n      center: latlng\n    });\n  },\n\n  /**\n  * Change multiple options at the same time\n  * @params {Object} New options object\n  */\n  setOptions: function(options) {\n    if (typeof options != \"object\" || options.length) {\n      if (this.options.debug) {\n        throw (options + ' options has to be an object');\n      } else {\n        return;\n      }\n    }\n\n    // Set options\n    _.defaults(this.options, options);\n  },\n\n  /**\n  * return getViewbounds if it is set\n  */\n  getViewBounds: function() {\n    if(this.has('view_bounds_sw') && this.has('view_bounds_ne')) {\n      return [\n        this.get('view_bounds_sw'),\n        this.get('view_bounds_ne')\n      ];\n    }\n    return null;\n  },\n\n  getLayerAt: function(i) {\n    return this.layers.at(i);\n  },\n\n  getLayerViewByLayerCid: function(cid) {\n    return this.layers.get(cid);\n  },\n\n  _adjustZoomtoLayer: function(layer) {\n    var maxZoom = parseInt(layer.get('maxZoom'), 10);\n    var minZoom = parseInt(layer.get('minZoom'), 10);\n\n    if (_.isNumber(maxZoom) && !_.isNaN(maxZoom)) {\n      if ( this.get(\"zoom\") > maxZoom ) this.set({ zoom: maxZoom, maxZoom: maxZoom });\n      else this.set(\"maxZoom\", maxZoom);\n    }\n\n    if (_.isNumber(minZoom) && !_.isNaN(minZoom)) {\n      if ( this.get(\"zoom\") < minZoom ) this.set({ minZoom: minZoom, zoom: minZoom });\n      else this.set(\"minZoom\", minZoom);\n    }\n  },\n\n  addLayer: function(layer, opts) {\n    if(this.layers.size() == 0) {\n      this._adjustZoomtoLayer(layer);\n    }\n    this.layers.add(layer, opts);\n    this.trigger('layerAdded');\n    if(this.layers.length === 1) {\n      this.trigger('firstLayerAdded');\n    }\n    return layer.cid;\n  },\n\n  removeLayer: function(layer) {\n    this.layers.remove(layer);\n  },\n\n  removeLayerByCid: function(cid) {\n    var layer = this.layers.get(cid);\n\n    if (layer) this.removeLayer(layer);\n    else log.error(\"There's no layer with cid = \" + cid + \".\");\n  },\n\n  removeLayerAt: function(i) {\n    var layer = this.layers.at(i);\n\n    if (layer) this.removeLayer(layer);\n    else log.error(\"There's no layer in that position.\");\n  },\n\n  clearLayers: function() {\n    while (this.layers.length > 0) {\n      this.removeLayer(this.layers.at(0));\n    }\n  },\n\n  // by default the base layer is the layer at index 0\n  getBaseLayer: function() {\n    return this.layers.at(0);\n  },\n\n  /**\n  * Checks if the base layer is already in the map as base map\n  */\n  isBaseLayerAdded: function(layer) {\n    var baselayer = this.getBaseLayer()\n    return baselayer && layer.isEqual(baselayer);\n  },\n\n  /**\n  * gets the url of the template of the tile layer\n  * @method getLayerTemplate\n  */\n  getLayerTemplate: function() {\n    var baseLayer = this.getBaseLayer();\n    if(baseLayer && baseLayer.get('options'))  {\n      return baseLayer.get('options').urlTemplate;\n    }\n  },\n\n  addGeometry: function(geom) {\n    this.geometries.add(geom);\n  },\n\n  removeGeometry: function(geom) {\n    this.geometries.remove(geom);\n  },\n\n  reCenter: function () {\n    var originalViewBoundsSW = this.get('original_view_bounds_sw');\n    var originalViewBoundsNE = this.get('original_view_bounds_ne');\n    var originalCenter = this.get('original_center');\n    if (originalViewBoundsSW && originalViewBoundsNE) {\n      this.setBounds([\n        originalViewBoundsSW,\n        originalViewBoundsNE\n      ]);\n    } else {\n      this.setCenter(originalCenter);\n    }\n  },\n\n  setBounds: function(b) {\n    this.attributes.view_bounds_sw = [\n      b[0][0],\n      b[0][1]\n    ];\n    this.attributes.view_bounds_ne = [\n      b[1][0],\n      b[1][1]\n    ];\n\n    // change both at the same time\n    this.trigger('change:view_bounds_ne', this);\n  },\n\n  // set center and zoom according to fit bounds\n  fitBounds: function(bounds, mapSize) {\n    var z = this.getBoundsZoom(bounds, mapSize);\n    if(z === null) {\n      return;\n    }\n\n    // project -> calculate center -> unproject\n    var swPoint = Map.latlngToMercator(bounds[0], z);\n    var nePoint = Map.latlngToMercator(bounds[1], z);\n\n    var center = Map.mercatorToLatLng({\n      x: (swPoint[0] + nePoint[0])*0.5,\n      y: (swPoint[1] + nePoint[1])*0.5\n    }, z);\n    this.set({\n      center: center,\n      zoom: z\n    })\n  },\n\n  // adapted from leaflat src\n  // @return {Number, null} Calculated zoom from given bounds or the maxZoom if no appropriate zoom level could be found\n  //   or null if given mapSize has no size.\n  getBoundsZoom: function(boundsSWNE, mapSize) {\n    // sometimes the map reports size = 0 so return null\n    if (mapSize.x === 0 || mapSize.y === 0) {\n      return null;\n    }\n    var size = [mapSize.x, mapSize.y];\n    var zoom = this.get('minZoom') || 0;\n    var maxZoom = this.get('maxZoom') || 24;\n    var ne = boundsSWNE[1];\n    var sw = boundsSWNE[0];\n    var boundsSize = [];\n    var nePoint;\n    var swPoint;\n    var zoomNotFound = true;\n\n    do {\n      zoom++;\n      nePoint = Map.latlngToMercator(ne, zoom);\n      swPoint = Map.latlngToMercator(sw, zoom);\n      boundsSize[0] = Math.abs(nePoint[0] - swPoint[0]);\n      boundsSize[1] = Math.abs(swPoint[1] - nePoint[1]);\n      zoomNotFound = boundsSize[0] <= size[0] || boundsSize[1] <= size[1];\n    } while (zoomNotFound && zoom <= maxZoom);\n\n    if (zoomNotFound) {\n      return maxZoom;\n    }\n\n    return zoom - 1;\n  }\n}, {\n  latlngToMercator: function(latlng, zoom) {\n    var ll = new L.LatLng(latlng[0], latlng[1]);\n    var pp = L.CRS.EPSG3857.latLngToPoint(ll, zoom);\n    return [pp.x, pp.y];\n  },\n\n  mercatorToLatLng: function(point, zoom) {\n    var ll = L.CRS.EPSG3857.pointToLatLng(point, zoom);\n    return [ll.lat, ll.lng]\n  }\n});\n\nmodule.exports = Map;\n",
    "var _ = require('underscore');\nvar config = require('cdb.config');\nvar LayerModelBase = require('./layer-model-base');\n\nvar CartoDBLayer = LayerModelBase.extend({\n\n  defaults: {\n    attribution: config.get('cartodb_attributions'),\n    type: 'CartoDB',\n    visible: true\n  },\n\n  initialize: function(attrs, options) {\n    LayerModelBase.prototype.initialize.apply(this, arguments);\n    options = options || {};\n    this._map = options.map;\n    this.bind('change:visible change:sql change:cartocss', this._onAttributeChanged, this);\n  },\n\n  _onAttributeChanged: function () {\n    this._map.reload({\n      sourceLayerId: this.get('id')\n    });\n  },\n\n  hasInteraction: function() {\n    return this.isVisible() && (this.containInfowindow() || this.containTooltip());\n  },\n\n  isVisible: function() {\n    return this.get('visible');\n  },\n\n  getTooltipFieldNames: function() {\n    var names = [];\n    var tooltip = this.getTooltipData();\n    if (tooltip && tooltip.fields) {\n      names = _.pluck(tooltip.fields, 'name');\n    }\n    return names;\n  },\n\n  getTooltipData: function() {\n    var tooltip = this.get('tooltip');\n    if (tooltip && tooltip.fields && tooltip.fields.length) {\n      return tooltip;\n    }\n    return null;\n  },\n\n  containInfowindow: function() {\n    return !!this.getTooltipData();\n  },\n\n  getInfowindowFieldNames: function() {\n    var names = [];\n    var infowindow = this.getInfowindowData();\n    if (infowindow  && infowindow.fields) {\n      names = _.pluck(infowindow.fields, 'name');\n    }\n    return names;\n  },\n\n  getInfowindowData: function() {\n    var infowindow = this.get('infowindow');\n    if (infowindow && infowindow.fields && infowindow.fields.length) {\n      return infowindow;\n    }\n    return null;\n  },\n\n  containTooltip: function() {\n    return !!this.getInfowindowData();\n  },\n\n  getInteractiveColumnNames: function() {\n    var fieldNames = _.union(\n      this.getInfowindowFieldNames(),\n      this.getTooltipFieldNames()\n    );\n    if (fieldNames.length) {\n      fieldNames.unshift('cartodb_id');\n    }\n    return _.uniq(fieldNames);\n  },\n\n  // Layers inside a \"layergroup\" layer have the layer_name defined in options.layer_name\n  // Layers inside a \"namedmap\" layer have the layer_name defined in the root of their definition\n  getName: function () {\n    return this.get('options') && this.get('options').layer_name || this.get('layer_name');\n  },\n\n  setDataProvider: function (dataProvider) {\n    this._dataProvider = dataProvider;\n  },\n\n  getDataProvider: function () {\n    return this._dataProvider;\n  }\n});\n\nmodule.exports = CartoDBLayer;\n",
    "var LayerModelBase = require('./layer-model-base');\n\nvar GMapsBaseLayer = LayerModelBase.extend({\n  OPTIONS: ['roadmap', 'satellite', 'terrain', 'custom'],\n  defaults: {\n    type: 'GMapsBase',\n    base_type: 'gray_roadmap',\n    style: null\n  }\n});\n\nmodule.exports = GMapsBaseLayer;\n",
    "var _ = require('underscore');\nvar log = require('cdb.log');\n\n// TODO: can't use these requires since they in turn depends on this file (i.e. cyclic dependency), how to break?\n// var TorqueLayer = require('./torque-layer');\n// var CartoDBNamedMapLayer = require('./cartodb-named-map-layer');\nvar cdb = require('cdb'); // cdb.geo.TorqueLayer, cdb.geo.CartoDBNamedMapLayer\nvar Model = require('../../core/model');\n\n// Map layer, could be tiled or whatever\nvar MapLayer = Model.extend({\n\n  defaults: {\n    visible: true,\n    type: 'Tiled'\n  },\n\n  initialize: function () {\n    this.bind('change:type', function () {\n      log.error('changing layer type is not allowed, remove it and add a new one instead');\n    });\n  },\n\n  // PUBLIC API METHODS\n\n  remove: function () {\n    this.trigger('destroy', this);\n  },\n\n  update: function (attrs) {\n    // TODO: Pick the attributes for the specific type of layer\n    // Eg: this.set(_.pick(attrs, this.ATTR_NAMES))\n    this.set(attrs);\n  },\n\n  show: function () {\n    this.set('visible', true);\n  },\n\n  hide: function () {\n    this.set('visible', false);\n  },\n\n  toggle: function () {\n    this.set('visible', !this.get('visible'));\n  },\n\n  // INTERNAL CartoDB.js METHODS\n\n  /*\n   * Compare the layer with the received one\n   * @method isEqual\n   * @param layer {Layer}\n   */\n  isEqual: function (layer) {\n    var me = this.toJSON();\n    var other = layer.toJSON();\n    // Select params generated when layer is added to the map\n    var map_params = ['id', 'order'];\n\n    // Delete from the layers copy\n    _.each(map_params, function (param) {\n      delete me[param];\n      delete other[param];\n      if (me.options) delete me.options[param];\n      if (other.options) delete other.options[param];\n    });\n\n    var myType = me.type ? me.type : me.options.type;\n    var itsType = other.type ? other.type : other.options.type;\n    var myTemplate;\n    var itsTemplate;\n    if (myType && (myType === itsType)) {\n      if (myType === 'Tiled') {\n        myTemplate = me.urlTemplate ? me.urlTemplate : me.options.urlTemplate;\n        itsTemplate = other.urlTemplate ? other.urlTemplate : other.options.urlTemplate;\n        var myName = me.name ? me.name : me.options.name;\n        var itsName = other.name ? other.name : other.options.name;\n\n        return myTemplate === itsTemplate && myName === itsName;\n      } else if (myType === 'WMS') {\n        myTemplate = me.urlTemplate ? me.urlTemplate : me.options.urlTemplate;\n        itsTemplate = other.urlTemplate ? other.urlTemplate : other.options.urlTemplate;\n        var myLayer = me.layers ? me.layers : me.options.layers;\n        var itsLayer = other.layers ? other.layers : other.options.layers;\n        return myTemplate === itsTemplate && myLayer === itsLayer;\n      } else if (myType === 'torque') {\n        return cdb.geo.TorqueLayer.prototype.isEqual.call(this, layer);\n      } else if (myType === 'named_map') {\n        return cdb.geo.CartoDBNamedMapLayer.prototype.isEqual.call(this, layer);\n      } else { // same type but not tiled\n        var myBaseType = me.base_type ? me.base_type : me.options.base_type;\n        if (myBaseType) {\n          if (_.isEqual(me, other)) {\n            return true;\n          } else {\n            return false;\n          }\n        } else { // not gmaps\n          return true;\n        }\n      }\n    }\n    return false; // different type\n  }\n});\n\nmodule.exports = MapLayer;\n",
    "var Backbone = require('backbone');\nvar LayerModelBase = require('./layer-model-base');\n\nvar TILED_LAYER_TYPE = 'Tiled';\nvar CARTODB_LAYER_TYPE = 'CartoDB';\nvar TORQUE_LAYER_TYPE = 'torque';\n\nvar Layers = Backbone.Collection.extend({\n\n  model: LayerModelBase,\n\n  initialize: function() {\n    this.comparator = function (m) {\n      return parseInt(m.get('order'), 10);\n    };\n    this.bind('add', this._assignIndexes);\n    this.bind('remove', this._assignIndexes);\n  },\n\n  /**\n   * each time a layer is added or removed\n   * the index should be recalculated\n   */\n  _assignIndexes: function(model, col, options) {\n    if (this.size() > 0) {\n\n      // Assign an order of 0 to the first layer\n      this.at(0).set({ order: 0 });\n\n      if (this.size() > 1) {\n        var layersByType = {};\n        for (var i = 1; i < this.size(); ++i) {\n          var layer = this.at(i);\n          var layerType = layer.get('type');\n          layersByType[layerType] = layersByType[layerType] || [];\n          layersByType[layerType].push(layer);\n        }\n\n        var lastOrder = 0;\n        var sortedTypes = [CARTODB_LAYER_TYPE, TORQUE_LAYER_TYPE, TILED_LAYER_TYPE];\n        for (var i = 0; i < sortedTypes.length; ++i) {\n          var type = sortedTypes[i];\n          var layers = layersByType[type] || [];\n          for (var j = 0; j < layers.length; ++j) {\n            var layer = layers[j];\n            layer.set({\n              order: ++lastOrder\n            });\n          }\n        }\n      }\n    }\n  }\n});\n\nmodule.exports = Layers;\n",
    "var LayerModelBase = require('./layer-model-base');\n\n/**\n * this layer allows to put a plain color or image as layer (instead of tiles)\n */\nvar PlainLayer = LayerModelBase.extend({\n  defaults: {\n    type: 'Plain',\n    base_type: \"plain\",\n    className: \"plain\",\n    color: '#FFFFFF',\n    image: ''\n  }\n});\n\nmodule.exports = PlainLayer;\n",
    "var LayerModelBase = require('./layer-model-base');\n\nvar TileLayer = LayerModelBase.extend({\n  getTileLayer: function() {\n  }\n});\n\nmodule.exports = TileLayer\n",
    "var _ = require('underscore');\nvar LayerModelBase = require('./layer-model-base');\n\n/**\n * Model for a Torque Layer\n */\nvar TorqueLayer = LayerModelBase.extend({\n  defaults: {\n    type: 'torque',\n    visible: true,\n    isRunning: false,\n    renderRange: {\n      start: undefined,\n      end: undefined\n    },\n    steps: 0,\n    step: 0,\n    time: undefined // should be a Date instance\n  },\n\n  initialize: function(attrs, options) {\n    LayerModelBase.prototype.initialize.apply(this, arguments);\n    options = options || {};\n\n    this._map = options.map;\n  },\n\n  play: function () {\n    this.set('isRunning', true);\n  },\n\n  pause: function () {\n    this.set('isRunning', false);\n  },\n\n  setStep: function (step) {\n    this.set('step', step);\n  },\n\n  renderRange: function (start, end) {\n    this.set('renderRange', {\n      start: start,\n      end: end\n    });\n  },\n\n  resetRenderRange: function () {\n    this.set('renderRange', {});\n  },\n\n  isEqual: function(other) {\n    var properties = ['query', 'query_wrapper', 'cartocss'];\n    var self = this;\n    return this.get('type') === other.get('type') && _.every(properties, function(p) {\n      return other.get(p) === self.get(p);\n    });\n  },\n\n  isVisible: function() {\n    return true;\n  },\n\n  getName: function () {\n    return this.get('layer_name') || this.get('table_name');\n  },\n\n  getInfowindowData: function() {\n    // TODO: use infowindow model in the future\n    var infowindow = this.get('infowindow');\n    if (infowindow && infowindow.fields && infowindow.fields.length) {\n      return infowindow;\n    }\n    return null;\n  },\n\n  getTooltipData: function() {\n    return null;\n  },\n\n  getInteractiveColumnNames: function() {\n    return [];\n  },\n\n  getInfowindowFieldNames: function() {\n    return [];\n  },\n\n  hasInteraction: function() {\n    return this.getInteractiveColumnNames() > 0;\n  },\n\n  fetchAttributes: function(layer, featureID, callback) {\n  },\n\n  setDataProvider: function (dataProvider) {\n    this._dataProvider = dataProvider;\n  },\n\n  getDataProvider: function () {\n    return this._dataProvider;\n  },\n\n  // given a timestamp returns a step (float)\n  timeToStep: function(timestamp) {\n    var steps = this.get('steps');\n    var start = this.get('start');\n    var end = this.get('end');\n    var step = (steps * (1000*timestamp - start)) / (end - start);\n    return step;\n  }\n});\n\nmodule.exports = TorqueLayer;\n",
    "var LayerModelBase = require('./layer-model-base');\n\n/**\n * WMS layer support\n */\nvar WMSLayer = LayerModelBase.extend({\n  defaults: {\n    service: 'WMS',\n    request: 'GetMap',\n    version: '1.1.1',\n    layers: '',\n    styles: '',\n    format: 'image/jpeg',\n    transparent: false\n  }\n});\n\nmodule.exports = WMSLayer;\n",
    "var _ = require('underscore');\n\n/**\n * Implementation of all common logic of a torque-layer view.\n * All the methods and attributes here need to be consistent across all implementing models.\n *\n * Methods are prefixed with _ to indicate that they are not intended to be used outside the implementing models.\n */\nmodule.exports = {\n\n  _initialAttrs: function (layerModel) {\n    var extra = layerModel.get('extra_params');\n    return {\n      table: layerModel.get('table_name'),\n      user: layerModel.get('user_name'),\n      column: layerModel.get('property'),\n      blendmode: layerModel.get('torque-blend-mode'),\n      resolution: 1,\n      // TODO: manage time columns\n      countby: 'count(cartodb_id)',\n      sql_api_domain: layerModel.get('sql_api_domain'),\n      sql_api_protocol: layerModel.get('sql_api_protocol'),\n      sql_api_port: layerModel.get('sql_api_port'),\n      tiler_protocol: layerModel.get('tiler_protocol'),\n      tiler_domain: layerModel.get('tiler_domain'),\n      tiler_port: layerModel.get('tiler_port'),\n      maps_api_template: layerModel.get('maps_api_template'),\n      stat_tag: layerModel.get('stat_tag'),\n      animationDuration: layerModel.get('torque-duration'),\n      steps: layerModel.get('torque-steps'),\n      sql: this._getQuery(layerModel),\n      visible: layerModel.get('visible'),\n      extra_params: {\n        api_key: extra ? extra.map_key : ''\n      },\n      attribution: layerModel.get('attribution'),\n      cartocss: layerModel.get('cartocss') || layerModel.get('tile_style'),\n      named_map: layerModel.get('named_map'),\n      auth_token: layerModel.get('auth_token'),\n      no_cdn: layerModel.get('no_cdn'),\n      loop: !(layerModel.get('loop') === false)\n    };\n  },\n\n  _init: function (layerModel) {\n    if (layerModel.get('visible')) {\n      this.play();\n    }\n\n    this.on('tilesLoaded', function () {\n      this.trigger('load');\n    }, this);\n\n    this.on('tilesLoading', function () {\n      this.trigger('loading');\n    }, this);\n\n    this.on('change:time', function (changes) {\n      this._setModelAttrs({\n        step: changes.step,\n        time: changes.time,\n        renderRange: {\n          start: changes.start,\n          end: changes.end\n        }\n      });\n    }, this);\n\n    this.on('change:steps', function (changes) {\n      this._setModelAttrs({ steps: changes.steps });\n    }, this);\n\n    this.on('play', function () {\n      this._callModel('play');\n    });\n\n    this.on('pause', function () {\n      this._callModel('pause');\n    });\n\n    layerModel.set({\n      isRunning: this.isRunning(),\n      time: this.getTime(),\n      step: this.getStep(),\n      steps: layerModel.get('torque-steps') || (this.provider && this.provider.getSteps()) || this.options.steps || 0\n    });\n\n    this._onModel();\n  },\n\n  /**\n   * Set model property but unon changes first in order to not create an infinite loop\n   */\n  _setModelAttrs: function (attrs) {\n    this._unonModel();\n    this.model.set(attrs);\n    this._onModel();\n  },\n\n  _callModel: function (method) {\n    this._unonModel();\n    var args = Array.prototype.slice.call(arguments, 1);\n    this.model[method].apply(this.model, args);\n    this._onModel();\n  },\n\n  _onModel: function () {\n    this._unonModel();\n    this.listenTo(this.model, 'change:isRunning', this._isRunningChanged);\n    this.listenTo(this.model, 'change:time', this._timeChanged);\n    this.listenTo(this.model, 'change:step', this._stepChanged);\n    this.listenTo(this.model, 'change:steps', this._stepsChanged);\n    this.listenTo(this.model, 'change:renderRange', this._renderRangeChanged);\n  },\n\n  _unonModel: function () {\n    this.stopListening(this.model, 'change:isRunning', this._isRunningChanged);\n    this.stopListening(this.model, 'change:time', this._timeChanged);\n    this.stopListening(this.model, 'change:step', this._stepChanged);\n    this.stopListening(this.model, 'change:steps', this._stepsChanged);\n    this.stopListening(this.model, 'change:renderRange', this._renderRangeChanged);\n  },\n\n  _isRunningChanged: function (m, isRunning) {\n    if (isRunning) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  },\n\n  _timeChanged: function (m, time) {\n    this.setStep(this.timeToStep(time));\n  },\n\n  _stepChanged: function (m, step) {\n    this.setStep(step);\n  },\n\n  _stepsChanged: function (m, steps) {\n    this.setSteps(steps);\n  },\n\n  _renderRangeChanged: function (m, r) {\n    if (_.isObject(r) && _.isNumber(r.start) && _.isNumber(r.end)) {\n      this.renderRange(r.start, r.end);\n    } else {\n      this.resetRenderRange();\n    }\n  },\n\n  _getQuery: function (layerModel) {\n    var query = layerModel.get('query');\n    var qw = layerModel.get('query_wrapper');\n    if (qw) {\n      query = _.template(qw)({ sql: query || ('select * from ' + layerModel.get('table_name')) });\n    }\n    return query;\n  }\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Model = require('../../core/model');\nvar Template = require('../../core/template');\nvar View = require('../../core/view');\nvar sanitize = require('../../core/sanitize');\n\nvar Annotation = View.extend({\n\n  className: \"cartodb-overlay overlay-annotation\",\n\n  defaults: {\n    minZoom: 0,\n    maxZoom: 40,\n    style: {\n      textAlign: \"left\",\n      zIndex: 5,\n      color: \"#ffffff\",\n      fontSize: \"13\",\n      fontFamilyName: \"Helvetica\",\n      boxColor: \"#333333\",\n      boxOpacity: 0.7,\n      boxPadding: 10,\n      lineWidth: 50,\n      lineColor: \"#333333\"\n    }\n  },\n\n  template: Template.compile(\n    '<div class=\"content\">\\\n    <div class=\"text widget_text\">{{{ text }}}</div>\\\n    <div class=\"stick\"><div class=\"ball\"></div></div>\\\n    </div>',\n    'mustache'\n  ),\n\n  events: {\n    \"click\": \"stopPropagation\"\n  },\n\n  stopPropagation: function(e) {\n    e.stopPropagation();\n  },\n\n  initialize: function() {\n\n    this.template = this.options.template || this.template;\n    this.mapView  = this.options.mapView;\n\n    this.mobileEnabled = /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n    this._cleanStyleProperties(this.options.style);\n\n    _.defaults(this.options.style, this.defaults.style);\n\n    this._setupModels();\n\n    this._bindMap();\n\n  },\n\n  _setupModels: function() {\n\n    this.model = new Model({\n      display: true,\n      hidden: false,\n      text:    this.options.text,\n      latlng:  this.options.latlng,\n      minZoom: this.options.minZoom || this.defaults.minZoom,\n      maxZoom: this.options.maxZoom || this.defaults.maxZoom\n    });\n\n    this.model.on(\"change:display\", this._onChangeDisplay, this);\n    this.model.on(\"change:text\",    this._onChangeText, this);\n    this.model.on('change:latlng',  this._place, this);\n\n    this.model.on('change:minZoom',  this._applyZoomLevelStyle, this);\n    this.model.on('change:maxZoom',  this._applyZoomLevelStyle, this);\n\n    this.style = new Model(this.options.style);\n\n    this.style.on(\"change\", this._applyStyle, this);\n\n    this.add_related_model(this.style);\n\n  },\n\n  _bindMap: function() {\n\n    this.mapView.map.bind('change', this._place, this);\n    this.mapView.map.bind('change:zoom', this._applyZoomLevelStyle, this);\n    this.mapView.bind('zoomstart', this.hide, this);\n    this.mapView.bind('zoomend', this.show, this);\n\n  },\n\n  _unbindMap: function() {\n\n    this.mapView.map.unbind('change', this._place, this);\n    this.mapView.map.unbind('change:zoom', this._applyZoomLevelStyle, this);\n    this.mapView.unbind('zoomstart', this.hide, this);\n    this.mapView.unbind('zoomend', this.show, this);\n\n  },\n\n  _onChangeDisplay: function() {\n\n    if (this.model.get(\"display\")) this.show();\n    else this.hide();\n\n  },\n\n  _onChangeText: function() {\n    this.$el.find(\".text\").html(this._sanitizedText());\n  },\n\n  _sanitizedText: function() {\n    return sanitize.html(this.model.get(\"text\"), this.model.get('sanitizeText'));\n  },\n\n  _getStandardPropertyName: function(name) {\n    if (!name) {\n      return;\n    }\n\n    var parts = name.split(\"-\");\n\n    if (parts.length === 1) {\n      return name;\n    } else {\n      return parts[0] + _.map(parts.slice(1), function(l) {\n        return l.slice(0,1).toUpperCase() + l.slice(1);\n      }).join(\"\");\n    }\n  },\n\n  _cleanStyleProperties: function(hash) {\n\n    var standardProperties = {};\n\n    _.each(hash, function(value, key) {\n      standardProperties[this._getStandardPropertyName(key)] = value;\n    }, this);\n\n    this.options.style = standardProperties;\n\n  },\n\n  _belongsToCanvas: function() {\n\n    var mobile = (this.options.device === \"mobile\") ? true : false;\n    return mobile === this.mobileEnabled;\n  },\n\n  show: function(callback) {\n\n    if (this.model.get(\"hidden\") || !this._belongsToCanvas()) return;\n\n    var self = this;\n\n    this.$el.css({ opacity: 0, display: \"inline-table\" }); // makes the element to behave fine in the borders of the screen\n    this.$el.stop().animate({ opacity: 1 }, { duration: 150, complete: function() {\n      callback && callback();\n    }});\n\n  },\n\n  hide: function(callback) {\n    this.$el.stop().fadeOut(150, function() {\n      callback && callback();\n    });\n  },\n\n  _place: function() {\n\n    var latlng     = this.model.get(\"latlng\");\n\n    var lineWidth  = this.style.get(\"lineWidth\");\n    var textAlign  = this.style.get(\"textAlign\");\n\n    var pos        = this.mapView.latLonToPixel(latlng);\n\n    if (pos) {\n\n      var top        = pos.y - this.$el.height()/2;\n      var left       = pos.x + lineWidth;\n\n      if (textAlign === \"right\") {\n        left = pos.x - this.$el.width() - lineWidth - this.$el.find(\".ball\").width();\n      }\n\n      this.$el.css({ top: top, left: left });\n\n    }\n\n  },\n\n  setMinZoom: function(zoom) {\n\n    this.model.set(\"minZoom\", zoom);\n\n  },\n\n  setMaxZoom: function(zoom) {\n\n    this.model.set(\"maxZoom\", zoom);\n\n  },\n\n  setPosition: function(latlng) {\n\n    this.model.set(\"latlng\", latlng);\n\n  },\n\n  setText: function(text) {\n\n    this.model.set(\"text\", text);\n\n  },\n\n  setStyle: function(property, value) {\n\n    var standardProperty = this._getStandardPropertyName(property);\n\n    if (standardProperty) {\n      this.style.set(standardProperty, value);\n    }\n\n  },\n\n  _applyStyle: function() {\n\n    var textColor  = this.style.get(\"color\");\n    var textAlign  = this.style.get(\"textAlign\");\n    var boxColor   = this.style.get(\"boxColor\");\n    var boxOpacity = this.style.get(\"boxOpacity\");\n    var boxPadding = this.style.get(\"boxPadding\");\n    var lineWidth  = this.style.get(\"lineWidth\");\n    var lineColor  = this.style.get(\"lineColor\");\n    var fontFamily = this.style.get(\"fontFamilyName\");\n\n    this.$text = this.$el.find(\".text\");\n\n    this.$text.css({ color: textColor, textAlign: textAlign });\n\n    this.$el.find(\".content\").css(\"padding\", boxPadding);\n    this.$text.css(\"font-size\", this.style.get(\"fontSize\") + \"px\");\n    this.$el.css(\"z-index\", this.style.get(\"zIndex\"));\n\n    this.$el.find(\".stick\").css({ width: lineWidth, left: -lineWidth });\n\n    var fontFamilyClass = \"\";\n\n    if      (fontFamily  == \"Droid Sans\")       fontFamilyClass = \"droid\";\n    else if (fontFamily  == \"Vollkorn\")         fontFamilyClass = \"vollkorn\";\n    else if (fontFamily  == \"Open Sans\")        fontFamilyClass = \"open_sans\";\n    else if (fontFamily  == \"Roboto\")           fontFamilyClass = \"roboto\";\n    else if (fontFamily  == \"Lato\")             fontFamilyClass = \"lato\";\n    else if (fontFamily  == \"Graduate\")         fontFamilyClass = \"graduate\";\n    else if (fontFamily  == \"Gravitas One\")     fontFamilyClass = \"gravitas_one\";\n    else if (fontFamily  == \"Old Standard TT\")  fontFamilyClass = \"old_standard_tt\";\n\n    this.$el\n    .removeClass(\"droid\")\n    .removeClass(\"vollkorn\")\n    .removeClass(\"roboto\")\n    .removeClass(\"open_sans\")\n    .removeClass(\"lato\")\n    .removeClass(\"graduate\")\n    .removeClass(\"gravitas_one\")\n    .removeClass(\"old_standard_tt\");\n\n    this.$el.addClass(fontFamilyClass);\n\n    if (textAlign === \"right\") {\n      this.$el.addClass(\"align-right\");\n      this.$el.find(\".stick\").css({ left: \"auto\", right: -lineWidth });\n    } else {\n      this.$el.removeClass(\"align-right\");\n    }\n\n    this._place();\n    this._applyZoomLevelStyle();\n\n  },\n\n  _getRGBA: function(color, opacity) {\n    return 'rgba(' + parseInt(color.slice(-6,-4),16)\n    + ',' + parseInt(color.slice(-4,-2),16)\n    + ',' + parseInt(color.slice(-2),16)\n    + ',' + opacity + ' )';\n  },\n\n  _applyZoomLevelStyle: function() {\n\n    var boxColor   = this.style.get(\"boxColor\");\n    var boxOpacity = this.style.get(\"boxOpacity\");\n    var lineColor  = this.style.get(\"lineColor\");\n\n    var minZoom    = this.model.get(\"minZoom\");\n    var maxZoom    = this.model.get(\"maxZoom\");\n\n    var currentZoom = this.mapView.map.get(\"zoom\");\n\n    if (currentZoom >= minZoom && currentZoom <= maxZoom) {\n\n      var rgbaLineCol = this._getRGBA(lineColor, 1);\n      var rgbaBoxCol  = this._getRGBA(boxColor, boxOpacity);\n\n      this.$el.find(\".text\").animate({ opacity: 1 }, 150);\n\n      this.$el.css(\"background-color\", rgbaBoxCol);\n\n      this.$el.find(\".stick\").css(\"background-color\", rgbaLineCol);\n      this.$el.find(\".ball\").css(\"background-color\", rgbaLineCol);\n\n      this.model.set(\"hidden\", false);\n      this.model.set(\"display\", true);\n\n    } else {\n      this.model.set(\"hidden\", true);\n      this.model.set(\"display\", false);\n    }\n  },\n\n  clean: function() {\n    this._unbindMap();\n    View.prototype.clean.call(this);\n  },\n\n  _fixLinks: function() {\n\n    this.$el.find(\"a\").each(function(i, link) {\n      $(this).attr(\"target\", \"_top\");\n    });\n\n  },\n\n  render: function() {\n    var d = _.clone(this.model.attributes);\n    d.text = this._sanitizedText();\n    this.$el.html(this.template(d));\n\n    this._fixLinks();\n\n    var self = this;\n    setTimeout(function() {\n      self._applyStyle();\n      self._applyZoomLevelStyle();\n      self.show();\n    }, 500);\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = Annotation;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-Attribution-button js-button\">?</button> <div class=\"CDB-Attribution-text js-text\">'+\n((__t=( attributions ))==null?'':__t)+\n'</div>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar View = require('../../../core/view');\nvar Model = require('../../../core/model');\nvar template = require('./attribution-template.tpl');\nvar Sanitize = require('../../../core/sanitize');\n\n/**\n *  Attribution overlay\n *\n */\n\nvar Attribution = View.extend({\n  className: 'CDB-Attribution',\n\n  events: {\n    'click .js-button': '_toggleAttributions',\n    'dblclick': 'killEvent'\n  },\n\n  initialize: function () {\n    this.model = new Model({\n      visible: false\n    });\n    this.map = this.options.map;\n    this.model.bind('change:visible', function (mdl, isVisible) {\n      this[ isVisible ? '_showAttributions' : '_hideAttributions' ]();\n    }, this);\n    _.bindAll(this, '_onKeyDown', '_toggleAttributions');\n  },\n\n  render: function () {\n    this._disableBinds();\n    var attributions = _.compact(this.map.get('attribution')).join(', ');\n    var isGMaps = this.map.get('provider') !== 'leaflet';\n    this.$el.html(\n      template({\n        attributions: Sanitize.html(attributions)\n      })\n    );\n    this.$el.toggleClass('CDB-Attribution--gmaps', !!isGMaps);\n    return this;\n  },\n\n  _initBinds: function () {\n    $(document).bind('keydown', this._onKeyDown);\n    $(document).bind('click', this._toggleAttributions);\n    this.map.bind('change:attribution', this.render, this);\n  },\n\n  _disableBinds: function () {\n    $(document).unbind('keydown', this._onKeyDown);\n    $(document).unbind('click', this._toggleAttributions);\n    this.map.unbind(null, null, this);\n  },\n\n  _onKeyDown: function (e) {\n    if (e && e.keyCode === 27) {\n      this._toggleAttributions();\n    }\n  },\n\n  _showAttributions: function () {\n    this.$el.addClass('is-active');\n    this._initBinds();\n  },\n\n  _hideAttributions: function () {\n    this.$el.removeClass('is-active');\n    this._disableBinds();\n  },\n\n  _toggleAttributions: function (e) {\n    if (e && e.stopPropagation) {\n      this.killEvent(e);\n    }\n    this.model.set('visible', !this.model.get('visible'));\n  },\n\n  clean: function () {\n    this._disableBinds();\n    View.prototype.clean.call(this);\n  }\n});\n\nmodule.exports = Attribution;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../core/sanitize');\nvar View = require('../../core/view');\n\nvar Header = View.extend({\n\n  className: 'cartodb-header',\n\n  initialize: function() {\n    var extra = this.model.get(\"extra\");\n\n    this.model.set({\n      title:            extra.title,\n      description:      extra.description,\n      show_title:       extra.show_title,\n      show_description: extra.show_description\n    }, { silent: true });\n  },\n\n  show: function() {\n    //var display        = this.model.get(\"display\");\n    var hasTitle       = this.model.get(\"title\") && this.model.get(\"show_title\");\n    var hasDescription = this.model.get(\"description\") && this.model.get(\"show_description\");\n\n    if (hasTitle || hasDescription) {\n      this.$el.show();\n      if (hasTitle)       this.$el.find(\".content div.title\").show();\n      if (hasDescription) this.$el.find(\".content div.description\").show();\n    }\n  },\n\n  // Add target attribute to all links\n  _setLinksTarget: function(str) {\n    if (!str) return str;\n    var reg = new RegExp(/<(a)([^>]+)>/g);\n    return str.replace(reg, \"<$1 target=\\\"_blank\\\"$2>\");\n  },\n\n  render: function() {\n    var data = _.clone(this.model.attributes);\n    data.title = sanitize.html(data.title);\n    data.description = this._setLinksTarget(sanitize.html(data.description));\n    this.$el.html(this.options.template(data));\n\n    if (this.model.get(\"show_title\") || this.model.get(\"show_description\")) {\n      this.show();\n    } else {\n      this.hide();\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = Header;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar sanitize = require('../../core/sanitize');\nvar Text = require('./text');\n\nmodule.exports = Text.extend({\n\n  className: \"cartodb-overlay image-overlay\",\n\n  events: {\n    \"click\": \"stopPropagation\"\n  },\n\n  default_options: { },\n\n  stopPropagation: function(e) {\n\n    e.stopPropagation();\n\n  },\n\n  initialize: function() {\n\n    _.defaults(this.options, this.default_options);\n\n    this.template = this.options.template;\n\n    var self = this;\n\n    $(window).on(\"map_resized\", function() {\n      self._place();\n    });\n\n    $(window).on(\"resize\", function() {\n      self._place();\n    });\n\n  },\n\n  _applyStyle: function() {\n\n    var style      = this.model.get(\"style\");\n\n    var boxColor   = style[\"box-color\"];\n    var boxOpacity = style[\"box-opacity\"];\n    var boxWidth   = style[\"box-width\"];\n\n    this.$el.find(\".text\").css(style);\n    this.$el.css(\"z-index\", style[\"z-index\"]);\n\n    var rgbaCol = 'rgba(' + parseInt(boxColor.slice(-6,-4),16)\n    + ',' + parseInt(boxColor.slice(-4,-2),16)\n    + ',' + parseInt(boxColor.slice(-2),16)\n    +', ' + boxOpacity + ' )';\n\n    this.$el.css({\n      backgroundColor: rgbaCol\n    });\n\n    this.$el.find(\"img\").css({ width: boxWidth });\n\n  },\n\n  render: function() {\n    var content;\n    if (this.model.get(\"extra\").has_default_image) {\n      content = _.template('<img src=\"<%- url %>\" />')({ url: this.model.get(\"extra\").public_default_image_url });\n    } else {\n      content = sanitize.html(this.model.get(\"extra\").rendered_text, this.model.get('sanitizeContent'));\n    }\n\n    var data = _.chain(this.model.attributes).clone().extend({ content: content }).value();\n    this.$el.html(this.template(data));\n\n    var self = this;\n\n    setTimeout(function() {\n      self._applyStyle();\n      self._place();\n      self.show();\n    }, 900);\n\n\n    return this;\n\n  }\n\n});\n",
    "var _ = require('underscore');\nvar View = require('../../core/view');\nvar Template = require('../../core/template');\n\nvar InfoBox = View.extend({\n\n  className: 'cartodb-infobox',\n  defaults: {\n    pos_margin: 20,\n    position: 'bottom|right',\n    width: 200\n  },\n\n  initialize: function() {\n    var self = this;\n    _.defaults(this.options, this.defaults);\n    if(this.options.layer) {\n      this.enable();\n    }\n    this.setTemplate(this.options.template || this.defaultTemplate, 'mustache');\n  },\n\n  setTemplate: function(tmpl) {\n    this.template = Template.compile(tmpl, 'mustache');\n  },\n\n  enable: function() {\n    if(this.options.layer) {\n      this.options.layer\n        .on('featureOver', function(e, latlng, pos, data) {\n          this.render(data).show();\n        }, this)\n        .on('featureOut', function() {\n          this.hide();\n        }, this);\n    }\n  },\n\n  disable: function() {\n    if(this.options.layer) {\n      this.options.layer.off(null, null, this);\n    }\n  },\n\n  // set position based on a string like \"top|right\", \"top|left\", \"bottom|righ\"...\n  setPosition: function(pos) {\n    var props = {};\n    if(pos.indexOf('top') !== -1) {\n      props.top = this.options.pos_margin;\n    } else if(pos.indexOf('bottom') !== -1) {\n      props.bottom = this.options.pos_margin;\n    }\n\n    if(pos.indexOf('left') !== -1) {\n      props.left = this.options.pos_margin;\n    } else if(pos.indexOf('right') !== -1) {\n      props.right = this.options.pos_margin;\n    }\n    this.$el.css(props);\n\n  },\n\n  render: function(data) {\n    this.$el.html( this.template(data) );\n    if(this.options.width) {\n      this.$el.css('width', this.options.width);\n    }\n    if(this.options.position) {\n      this.setPosition(this.options.position);\n    }\n    return this;\n  }\n\n});\n\nmodule.exports = InfoBox;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Backbone = require('backbone');\n\n/**\n * Usage:\n * var infowindowModel = new InfowindowModel({\n *   template_name: 'infowindow_light',\n *   latlng: [72, -45],\n *   offset: [100, 10]\n * });\n */\nvar InfowindowModel = Backbone.Model.extend({\n\n  SYSTEM_COLUMNS: ['the_geom', 'the_geom_webmercator', 'created_at', 'updated_at', 'cartodb_id', 'cartodb_georef_status'],\n\n  defaults: {\n    template_name: 'infowindow_light',\n    latlng: [0, 0],\n    offset: [28, 0], // offset of the tip calculated from the bottom left corner\n    maxHeight: 180, // max height of the content, not the whole infowindow\n    autoPan: true,\n    template: \"\",\n    content: \"\",\n    visibility: false,\n    alternative_names: { },\n    fields: null // contains the fields displayed in the infowindow\n  },\n\n  clearFields: function() {\n    this.set({fields: []});\n  },\n\n  saveFields: function(where) {\n    where = where || 'old_fields';\n    this.set(where, _.clone(this.get('fields')));\n  },\n\n  fieldCount: function() {\n    var fields = this.get('fields')\n    if (!fields) return 0;\n    return fields.length\n  },\n\n  restoreFields: function(whiteList, from) {\n    from = from || 'old_fields';\n    var fields = this.get(from);\n    if(whiteList) {\n      fields = fields.filter(function(f) {\n        return _.contains(whiteList, f.name);\n      });\n    }\n    if(fields && fields.length) {\n      this._setFields(fields);\n    }\n    this.unset(from);\n  },\n\n  _cloneFields: function() {\n    return _(this.get('fields')).map(function(v) {\n      return _.clone(v);\n    });\n  },\n\n  _setFields: function(f) {\n    f.sort(function(a, b) { return a.position -  b.position; });\n    this.set({'fields': f});\n  },\n\n  sortFields: function() {\n    this.get('fields').sort(function(a, b) { return a.position - b.position; });\n  },\n\n  _addField: function(fieldName, at) {\n    var dfd = $.Deferred();\n    if(!this.containsField(fieldName)) {\n      var fields = this.get('fields');\n      if(fields) {\n        at = at === undefined ? fields.length: at;\n        fields.push({ name: fieldName, title: true, position: at });\n      } else {\n        at = at === undefined ? 0 : at;\n        this.set('fields', [{ name: fieldName, title: true, position: at }], { silent: true});\n      }\n    }\n    dfd.resolve();\n    return dfd.promise();\n  },\n\n  addField: function(fieldName, at) {\n    var self = this;\n    $.when(this._addField(fieldName, at)).then(function() {\n      self.sortFields();\n      self.trigger('change:fields');\n      self.trigger('add:fields');\n    });\n    return this;\n  },\n\n  getFieldProperty: function(fieldName, k) {\n    if(this.containsField(fieldName)) {\n      var fields = this.get('fields') || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      return fields[idx][k];\n    }\n    return null;\n  },\n\n  setFieldProperty: function(fieldName, k, v) {\n    if(this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      fields[idx][k] = v;\n      this._setFields(fields);\n    }\n    return this;\n  },\n\n  getAlternativeName: function(fieldName) {\n    return this.get(\"alternative_names\") && this.get(\"alternative_names\")[fieldName];\n  },\n\n  setAlternativeName: function(fieldName, alternativeName) {\n    var alternativeNames = this.get(\"alternative_names\") || [];\n\n    alternativeNames[fieldName] = alternativeName;\n    this.set({ 'alternative_names': alternativeNames });\n    this.trigger('change:alternative_names');\n  },\n\n  getFieldPos: function(fieldName) {\n    var p = this.getFieldProperty(fieldName, 'position');\n    if(p == undefined) {\n      return Number.MAX_VALUE;\n    }\n    return p;\n  },\n\n  containsAlternativeName: function(fieldName) {\n    var names = this.get('alternative_names') || [];\n    return names[fieldName];\n  },\n\n  containsField: function(fieldName) {\n    var fields = this.get('fields') || [];\n    return _.contains(_(fields).pluck('name'), fieldName);\n  },\n\n  removeField: function(fieldName) {\n    if(this.containsField(fieldName)) {\n      var fields = this._cloneFields() || [];\n      var idx = _.indexOf(_(fields).pluck('name'), fieldName);\n      if(idx >= 0) {\n        fields.splice(idx, 1);\n      }\n      this._setFields(fields);\n      this.trigger('remove:fields')\n    }\n    return this;\n  },\n\n  // updates content with attributes\n  updateContent: function(attributes) {\n    var fields = this.get('fields');\n    this.set('content', InfowindowModel.contentForFields(attributes, fields));\n  },\n\n  closeInfowindow: function(){\n  if (this.get('visibility')) {\n      this.set(\"visibility\", false);\n      this.trigger('close');\n    }\n  }\n\n}, {\n  contentForFields: function(attributes, fields, options) {\n    options = options || {};\n    var render_fields = [];\n    for(var j = 0; j < fields.length; ++j) {\n      var field = fields[j];\n      var value = attributes[field.name];\n      if(options.empty_fields || (value !== undefined && value !== null)) {\n        render_fields.push({\n          title: field.title ? field.name : null,\n          value: attributes[field.name],\n          index: j\n        });\n      }\n    }\n\n    // manage when there is no data to render\n    if (render_fields.length === 0) {\n      render_fields.push({\n        title: null,\n        value: 'No data available',\n        index: 0,\n        type: 'empty'\n      });\n    }\n\n    return {\n      fields: render_fields,\n      data: attributes\n    };\n  }\n});\n\nmodule.exports = InfowindowModel;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Ps = require('perfect-scrollbar');\nrequire('clip-path');\nvar templates = require('cdb.templates');\nvar sanitize = require('../../core/sanitize');\nvar Template = require('../../core/template');\nvar View = require('../../core/view');\nvar util = require('../../core/util');\n\n/**\n * Usage:\n * var infowindow = new Infowindow({\n *   model: infowindowModel,\n *   mapView: mapView\n * });\n *\n * // Show the infowindow:\n * infowindow.showInfowindow();\n */\n\nvar Infowindow = View.extend({\n  options: {\n    imageTransitionSpeed: 300,\n    hookMargin: 24,\n    hookHeight: 16\n  },\n\n  className: 'CDB-infowindow-wrapper',\n\n  events: {\n    // Close bindings\n    'click .close': '_closeInfowindow',\n    'touchstart .close': '_closeInfowindow',\n    'MSPointerDown .close': '_closeInfowindow',\n    // Rest infowindow bindings\n    'dragstart': '_checkOrigin',\n    'mousedown': '_checkOrigin',\n    'touchstart': '_checkOrigin',\n    'MSPointerDown': '_checkOrigin',\n    'dblclick': '_stopPropagation',\n    'DOMMouseScroll': '_stopBubbling',\n    'MozMousePixelScroll': '_stopBubbling',\n    'mousewheel': '_stopBubbling',\n    'dbclick': '_stopPropagation',\n    'click': '_stopPropagation'\n  },\n\n  initialize: function () {\n    this.mapView = this.options.mapView;\n\n    // Set template if it is defined in options\n    if (this.options.template) {\n      this.model.set('template', this.options.template);\n    }\n\n    // Set template view variable and\n    // compile it if it is necessary\n    if (this.model.get('template')) {\n      this._compileTemplate();\n    } else {\n      this._setTemplate();\n    }\n\n    this._initBinds();\n\n    // Hide the element\n    this.$el.hide();\n  },\n\n  /**\n   *  Render infowindow content\n   */\n  render: function () {\n    if (this.template) {\n      // Clone fields and template name\n      var fields = _.map(this.model.attributes.content.fields, function (field) {\n        return _.clone(field);\n      });\n\n      var data = this.model.get('content') ? this.model.get('content').data : {};\n\n      // If a custom template is not applied, let's sanitized\n      // fields for the template rendering\n      if (this.model.get('template_name')) {\n        var template_name = _.clone(this.model.attributes.template_name);\n\n        // Sanitized them\n        fields = this._fieldsToString(fields, template_name);\n      }\n\n      // Join plan fields values with content to work with\n      // custom infowindows and CartoDB infowindows.\n      var values = {};\n\n      _.each(this.model.get('content').fields, function (pair) {\n        values[pair.title] = pair.value;\n      });\n\n      var obj = _.extend({\n        content: {\n          fields: fields,\n          data: data\n        }\n      }, values);\n\n      this.$el.html(\n        sanitize.html(this.template(obj), this.model.get('sanitizeTemplate'))\n      );\n\n      // Set width and max-height from the model only\n      // If there is no width set, we don't force our infowindow\n      if (this.model.get('width')) {\n        this.$('.js-infowindow').css('width', this.model.get('width') + 'px');\n      }\n\n      if (this.model.get('maxHeight')) {\n        this.$('.js-content').css('max-height', this.model.get('maxHeight') + 'px');\n      }\n\n      if (this._containsCover()) {\n        this._loadCover();\n      }\n\n      if (!this.isLoadingData()) {\n        this.model.trigger('domready', this, this.$el);\n        this.trigger('domready', this, this.$el);\n      }\n\n      this._setupClasses();\n      this._renderScroll();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    _.bindAll(this, '_onKeyUp', '_onLoadImage', '_onLoadImageError');\n\n    this.model.bind('change:content change:alternative_names change:width change:maxHeight', this.render, this);\n    this.model.bind('change:template_name', this._setTemplate, this);\n    this.model.bind('change:latlng', this._update, this);\n    this.model.bind('change:visibility', this.toggle, this);\n    this.model.bind('change:template change:sanitizeTemplate', this._compileTemplate, this);\n\n    this.mapView.map.bind('change', this._updatePosition, this);\n\n    this.mapView.bind('zoomstart', function () {\n      this.hide(true);\n    }, this);\n\n    this.mapView.bind('zoomend', function () {\n      this.show(true);\n    }, this);\n\n    this.add_related_model(this.mapView.map);\n    this.add_related_model(this.mapView);\n  },\n\n  _onKeyUp: function (e) {\n    if (e && e.keyCode === 27) {\n      this._closeInfowindow();\n    }\n  },\n\n  _renderCoverLoader: function () {\n    var $loader = $('<div>').addClass('CDB-Loader js-loader');\n\n    if (this.$('.js-cover').length > 0) {\n      this.$('.js-cover').append($loader);\n    }\n  },\n\n  _startCoverLoader: function () {\n    this.$('.js-infowindow').addClass('is-loading');\n    this.$('.js-loader').addClass('is-visible');\n  },\n\n  _stopCoverLoader: function () {\n    this.$('.js-infowindow').removeClass('is-loading');\n    this.$('.js-loader').removeClass('is-visible');\n  },\n\n  _setupClasses: function () {\n    var $infowindow = this.$('.js-infowindow');\n\n    var hasHeader = this.$('.js-header').length;\n    var hasCover = this.$('.js-cover').length;\n    var hasContent = this.$('.js-content').length;\n    var hasTitle = this.$('.CDB-infowindow-title').length;\n\n    if (hasCover) {\n      $infowindow.addClass('has-header-image');\n    }\n    if (hasHeader) {\n      $infowindow.addClass('has-header');\n    }\n    if (hasContent) {\n      $infowindow.addClass('has-fields');\n    }\n    if (hasTitle) {\n      $infowindow.addClass('has-title');\n    }\n  },\n\n  _renderScroll: function () {\n    if (this.$('.js-content').length === 0) {\n      return;\n    }\n\n    this.$('.js-infowindow').addClass('has-scroll');\n\n    Ps.initialize(this.$('.js-content').get(0), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      minScrollbarLength: 20\n    });\n  },\n\n  _getModelTemplate: function () {\n    return this.model.get('template_name');\n  },\n\n  /**\n   *  Change template of the infowindow\n   */\n  _setTemplate: function () {\n    if (this.model.get('template_name')) {\n      this.template = templates.getTemplate(this._getModelTemplate());\n      this.render();\n    }\n  },\n\n  /**\n   *  Compile template of the infowindow\n   */\n  _compileTemplate: function () {\n    var template = this.model.get('template') ? this.model.get('template') : templates.getTemplate(this._getModelTemplate());\n\n    if (typeof (template) !== 'function') {\n      this.template = new Template({\n        template: template,\n        type: this.model.get('template_type') || 'mustache'\n      }).asFunction();\n    } else {\n      this.template = template;\n    }\n\n    this.render();\n  },\n\n  /**\n   *  Check event origin\n   */\n  _checkOrigin: function (ev) {\n    // If the mouse down come from jspVerticalBar\n    // dont stop the propagation, but if the event\n    // is a touchstart, stop the propagation\n    var come_from_scroll = (($(ev.target).closest('.jspVerticalBar').length > 0) && (ev.type !== 'touchstart'));\n\n    if (!come_from_scroll) {\n      ev.stopPropagation();\n    }\n  },\n\n  /**\n   *  Convert values to string unless value is NULL\n   */\n  _fieldsToString: function (fields, template_name) {\n    var fields_sanitized = [];\n    if (fields && fields.length > 0) {\n      var self = this;\n      fields_sanitized = _.map(fields, function (field, i) {\n        // Return whole attribute sanitized\n        return self._sanitizeField(field, template_name, field.index || i);\n      });\n    }\n    return fields_sanitized;\n  },\n\n  /**\n   *  Sanitize fields, what does it mean?\n   *  - If value is null, transform to string\n   *  - If value is an url, add it as an attribute\n   *  - Cut off title if it is very long (in header or image templates).\n   *  - If the value is a valid url, let's make it a link.\n   *  - More to come...\n   */\n  _sanitizeField: function (attr, template_name, pos) {\n    // Check null or undefined :| and set both to empty == ''\n    if (attr.value === null || attr.value === undefined) {\n      attr.value = '';\n    }\n\n    // Get the alternative title\n    var alternative_name = this.model.getAlternativeName(attr.title);\n\n    if (attr.title && alternative_name) {\n      // Alternative title\n      attr.title = alternative_name;\n    } else if (attr.title) {\n      // Remove '_' character from titles\n      attr.title = attr.title.replace(/_/g, ' ');\n    }\n\n    // Cast all values to string due to problems with Mustache 0 number rendering\n    var new_value = attr.value.toString();\n\n    // If it is index 0, not any field type, header template type and length bigger than 30... cut off the text!\n    if (!attr.type && pos === 0 && attr.value.length > 35 && template_name && template_name.search('_header_') !== -1) {\n      new_value = attr.value.substr(0, 32) + '...';\n    }\n\n    // If it is index 1, not any field type, header image template type and length bigger than 30... cut off the text!\n    if (!attr.type && pos === 1 && attr.value.length > 35 && template_name && template_name.search('_header_with_image') !== -1) {\n      new_value = attr.value.substr(0, 32) + '...';\n    }\n\n    // Is it the value a link?\n    if (this._isValidURL(attr.value)) {\n      new_value = \"<a href='\" + attr.value + \"' target='_blank' class='CDB-infowindow-link'>\" + new_value + '</a>';\n    }\n\n    // If it is index 0, not any field type, header image template type... don't cut off the text or add any link!!\n    if (pos === 0 && template_name.search('_header_with_image') !== -1) {\n      new_value = attr.value;\n    }\n\n    // Save new sanitized value\n    attr.value = new_value;\n\n    return attr;\n  },\n\n  isLoadingData: function () {\n    return this.model.get('loading');\n  },\n\n  /**\n   *  Does header contain cover?\n   */\n  _containsCover: function () {\n    return !!this.$('.js-infowindow').attr('data-cover');\n  },\n\n  _containsTemplateCover: function () {\n    return this.$('.js-cover img').length > 0;\n  },\n\n  _getCoverURL: function () {\n    var content = this.model.get('content');\n    var imageSRC = this.$('.js-cover img').attr('src');\n\n    if (imageSRC) {\n      return imageSRC;\n    }\n\n    if (content && content.fields && content.fields.length > 0) {\n      return (content.fields[0].value || '').toString();\n    }\n\n    return false;\n  },\n\n  _loadImageHook: function (imageDimensions, coverDimensions, url) {\n    var $hook = this.$('.js-hook');\n\n    if (!$hook) {\n      return;\n    }\n\n    var $hookImage = $('<img />').attr('src', url);\n\n    $hook.append($hookImage);\n\n    $hookImage.attr('data-clipPath', 'M0,0 L0,16 L24,0 L0,0 Z');\n    $hookImage.clipPath(imageDimensions.width, imageDimensions.height, -this.options.hookMargin, imageDimensions.height - this.options.hookHeight);\n\n    $hookImage.load(function () {\n      $hook.parent().addClass('has-image');\n      $hookImage.css({\n        marginTop: -coverDimensions.height,\n        width: coverDimensions.width\n      });\n    });\n  },\n\n  _loadCoverFromTemplate: function (url) {\n    this.$('.js-cover img').remove();\n    this._loadCoverFromUrl(url);\n  },\n\n  _loadCoverFromUrl: function (url) {\n    var $cover = this.$('.js-cover');\n\n    this._startCoverLoader();\n\n    var $img = $(\"<img class='CDB-infowindow-media-item' />\").attr('src', url);\n    $cover.append($img);\n    $img.load(this._onLoadImage).error(this._onLoadImageError);\n  },\n\n  _onLoadImageError: function () {\n    this._stopCoverLoader();\n    this._showInfowindowImageError();\n  },\n\n  _onLoadImage: function () {\n    var $cover = this.$('.js-cover');\n    var $img = this.$('.CDB-infowindow-media-item');\n    var url = $img.attr('src');\n\n    var imageDimensions = { width: $img.width(), height: $img.height() };\n    var coverDimensions = { width: $cover.width(), height: $cover.height() };\n\n    var styles = this._calcImageStyle(imageDimensions, coverDimensions);\n\n    $img.css(styles);\n\n    $cover.css({ height: imageDimensions.height - this.options.hookHeight });\n\n    this._stopCoverLoader();\n\n    $img.fadeIn(150);\n\n    this._loadImageHook(imageDimensions, coverDimensions, url);\n  },\n\n  _calcImageStyle: function (imageDimensions, coverDimensions) {\n    var styles = {};\n\n    var imageRatio = imageDimensions.height / imageDimensions.width;\n    var coverRatio = coverDimensions.height / coverDimensions.width;\n\n    if (imageDimensions.width > coverDimensions.width && imageDimensions.height > coverDimensions.height) {\n      if (imageRatio < coverRatio) {\n        styles = { height: coverDimensions.height };\n      }\n    } else {\n      styles = { width: imageDimensions.width };\n    }\n\n    return styles;\n  },\n\n  _loadCover: function () {\n    this._renderCoverLoader();\n    this._startCoverLoader();\n\n    var url = this._getCoverURL();\n\n    if (this._isValidURL(url)) {\n      this._clearInfowindowImageError();\n    } else {\n      this._showInfowindowImageError();\n      return;\n    }\n\n    if (this._containsTemplateCover()) {\n      this._loadCoverFromTemplate(url);\n    } else {\n      this._loadCoverFromUrl(url);\n    }\n  },\n\n  _clearInfowindowImageError: function () {\n    this.$('.js-infowindow').removeClass('is-fail');\n  },\n\n  _showInfowindowImageError: function () {\n    this.$('.js-infowindow').addClass('is-fail');\n    this.$('.js-cover').append('<p class=\"CDB-infowindow-fail\">Non-valid picture URL</p>');\n  },\n\n  /**\n   *  Return true if the provided URL is valid\n   */\n  _isValidURL: function (url) {\n    if (url) {\n      var urlPattern = /^(http|ftp|https):\\/\\/[\\w-]+(\\.[\\w-]+)+([\\w.,@?^=%&amp;:\\/~+#-|]*[\\w@?^=%&amp;\\/~+#-])?$/;\n      return String(url).match(urlPattern) !== null;\n    }\n\n    return false;\n  },\n\n  /**\n   *  Toggle infowindow visibility\n   */\n  toggle: function () {\n    if (this.model.get('visibility')) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  },\n\n  /**\n   *  Stop event bubbling\n   */\n  _stopBubbling: function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n  },\n\n  _stopPropagation: function (ev) {\n    ev.stopPropagation();\n  },\n\n  setLoading: function () {\n    this.model.set({\n      content: {\n        fields: [{\n          type: 'loading',\n          title: 'loading',\n          value: '…'\n        }]\n      }\n    });\n    return this;\n  },\n\n  setError: function () {\n    this.model.set({\n      content: {\n        fields: [{\n          title: null,\n          alternative_name: null,\n          value: 'There has been an error...',\n          index: null,\n          type: 'error'\n        }],\n        data: {}\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Set the correct position for the infowindow\n   */\n  setLatLng: function (latlng) {\n    this.model.set('latlng', latlng);\n    return this;\n  },\n\n  /**\n   *  Close infowindow\n   */\n  _closeInfowindow: function (ev) {\n    if (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    if (this.model.get('visibility')) {\n      this.model.set('visibility', false);\n      this.trigger('close');\n    }\n  },\n\n  /**\n   *  Set visibility infowindow\n   */\n  showInfowindow: function () {\n    this.model.set('visibility', true);\n  },\n\n  /**\n   *  Show infowindow (update, pan, etc)\n   */\n  show: function (no_pan) {\n    $(document)\n      .off('keyup', this._onKeyUp)\n      .on('keyup', this._onKeyUp);\n\n    if (this.model.get('visibility')) {\n      this.$el.css({ left: -5000 });\n      this._update(no_pan);\n    }\n  },\n\n  /**\n   *  Get infowindow visibility\n   */\n  isHidden: function () {\n    return !this.model.get('visibility');\n  },\n\n  /**\n   *  Set infowindow to hidden\n   */\n  hide: function (force) {\n    $(document).off('keyup', this._onKeyUp);\n    if (force || !this.model.get('visibility')) this._animateOut();\n  },\n\n  /**\n   *  Update infowindow\n   */\n  _update: function (no_pan) {\n    if (!this.isHidden()) {\n      var delay = 0;\n\n      if (!no_pan) {\n        delay = this.adjustPan();\n      }\n\n      this._updatePosition();\n      this._animateIn(delay);\n    }\n  },\n\n  /**\n   *  Animate infowindow to show up\n   */\n  _animateIn: function (delay) {\n    if (!util.ie || (util.browser.ie && util.browser.ie.version > 8)) {\n      this.$el.css({\n        'marginBottom': '-10px',\n        'display': 'block',\n        'visibility': 'visible',\n        opacity: 0\n      });\n\n      this.$el\n        .delay(delay)\n        .animate({\n          opacity: 1,\n          marginBottom: 0\n        }, 300);\n    } else {\n      this.$el.show();\n    }\n  },\n\n  /**\n   *  Animate infowindow to disappear\n   */\n  _animateOut: function () {\n    if (!util.ie || (util.browser.ie && util.browser.ie.version > 8)) {\n      var self = this;\n      this.$el.animate({\n        marginBottom: '-10px',\n        opacity: '0',\n        display: 'block'\n      }, 180, function () {\n        self.$el.css({visibility: 'hidden'});\n      });\n    } else {\n      this.$el.hide();\n    }\n  },\n\n  /**\n   *  Update the position (private)\n   */\n  _updatePosition: function () {\n    if (this.isHidden()) {\n      return;\n    }\n\n    var offset = this.model.get('offset');\n    var pos = this.mapView.latLonToPixel(this.model.get('latlng'));\n    var left = pos.x - offset[0];\n    var size = this.mapView.getSize();\n    var bottom = -1 * (pos.y - offset[1] - size.y);\n\n    this.$el.css({ bottom: bottom, left: left });\n  },\n\n  /**\n   *  Adjust pan to show correctly the infowindow\n   */\n  adjustPan: function () {\n    var offset = this.model.get('offset');\n\n    if (!this.model.get('autoPan') || this.isHidden()) { return; }\n\n    var containerHeight = this.$el.outerHeight(true) + 15; // Adding some more space\n    var containerWidth = this.$el.width();\n    var pos = this.mapView.latLonToPixel(this.model.get('latlng'));\n    var adjustOffset = {x: 0, y: 0};\n    var size = this.mapView.getSize();\n    var wait_callback = 0;\n\n    if (pos.x - offset[0] < 0) {\n      adjustOffset.x = pos.x - offset[0] - 10;\n    }\n\n    if (pos.x - offset[0] + containerWidth > size.x) {\n      adjustOffset.x = pos.x + containerWidth - size.x - offset[0] + 10;\n    }\n\n    if (pos.y - containerHeight < 0) {\n      adjustOffset.y = pos.y - containerHeight - 10;\n    }\n\n    if (pos.y - containerHeight > size.y) {\n      adjustOffset.y = pos.y + containerHeight - size.y;\n    }\n\n    if (adjustOffset.x || adjustOffset.y) {\n      this.mapView.panBy(adjustOffset);\n      wait_callback = 300;\n    }\n\n    return wait_callback;\n  }\n});\n\nmodule.exports = Infowindow;\n",
    "var _ = require('underscore');\nvar cdb = require('cdb'); // cdb.god, cdb.geo.ui.*\nvar Dropdown = require('../../ui/common/dropdown');\nvar View = require('../../core/view');\nvar Model = require('../../core/model');\nvar LayerView = require('./layer-view');\n\n/**\n *  Layer selector: it allows to select the layers that will be shown in the map\n *  - It needs the mapview, the element template and the dropdown template\n *\n *  var layer_selector = new LayerSelector({\n *    mapView: mapView,\n *    template: element_template,\n *    dropdown_template: dropdown_template\n *  });\n */\nvar LayerSelector = View.extend({\n\n  className: 'cartodb-layer-selector-box',\n\n  events: {\n    \"click\":     '_openDropdown',\n    \"dblclick\":  'killEvent',\n    \"mousedown\": 'killEvent'\n  },\n\n  initialize: function() {\n    this.map = this.options.mapView.map;\n\n    this.mapView  = this.options.mapView;\n    this.mapView.bind('click zoomstart drag', function() {\n      this.dropdown && this.dropdown.hide();\n    }, this);\n    this.add_related_model(this.mapView);\n\n    this.layers = [];\n  },\n\n  render: function() {\n\n    this.$el.html(this.options.template(this.options));\n\n    this.dropdown = new Dropdown({\n      className:\"cartodb-dropdown border\",\n      template: this.options.dropdown_template,\n      target: this.$el.find(\"a\"),\n      speedIn: 300,\n      speedOut: 200,\n      position: \"position\",\n      tick: \"right\",\n      vertical_position: \"down\",\n      horizontal_position: \"right\",\n      vertical_offset: 7,\n      horizontal_offset: 13\n    });\n\n    // TODO cdb.god only exists for cartodb editor, this would be better to extract and handle there\n    if (cdb.god) cdb.god.bind(\"closeDialogs\", this.dropdown.hide, this.dropdown);\n\n    this.$el.append(this.dropdown.render().el);\n\n    this._getLayers();\n    this._setCount();\n\n    return this;\n  },\n\n  _getLayers: function() {\n    var self = this;\n    this.layers = [];\n    var layerModels = this._getLayerModelsFromMap();\n    _.each(layerModels, function (layerModel) {\n      var layerView = self._createLayerView(layerModel);\n      layerView.bind('switchChanged', self._setCount, self);\n      self.layers.push(layerView);\n      layerModel.bind('change:visible', function (model) {\n        this.trigger(\"change:visible\", model.get('visible'), model.get('order'), model);\n      }, self);\n    });\n  },\n\n  _getLayerModelsFromMap: function () {\n    return this.map.layers.filter(function (layer) {\n      return layer.get(\"type\") === 'CartoDB' || layer.get(\"type\") === 'torque';\n    });\n  },\n\n  _createLayerView: function(model) {\n    var layerView = new LayerView({\n      model: model\n    });\n    this.$(\"ul\").append(layerView.render().el);\n    this.addView(layerView);\n    return layerView;\n  },\n\n  _setCount: function() {\n    var count = 0;\n    for (var i = 0, l = this.layers.length; i < l; ++i) {\n      var lyr = this.layers[i];\n\n      if (lyr.model.get('visible')) {\n        count++;\n      }\n    }\n\n    this.$('.count').text(count);\n    this.trigger(\"switchChanged\", this);\n  },\n\n  _openDropdown: function() {\n    this.dropdown.open();\n  }\n\n});\n\nmodule.exports = LayerSelector;\n",
    "var _ = require('underscore');\nvar templates = require('cdb.templates');\nvar View = require('../../core/view');\n\n/**\n *  View for each CartoDB layer\n *  - It needs a model to make it work.\n *\n *  var layerView = new LayerView({\n *    model: layer_model,\n *    layer_definition: layer_definition\n *  });\n */\nvar LayerView = View.extend({\n\n  tagName: \"li\",\n\n  defaults: {\n    template: '\\\n      <a class=\"layer\" href=\"#/change-layer\"><%- layerName %></a>\\\n      <a href=\"#switch\" class=\"right <%- visible ? \"enabled\" : \"disabled\" %> switch\"><span class=\"handle\"></span></a>\\\n    '\n  },\n\n  events: {\n    \"click\": '_onSwitchClick'\n  },\n\n  initialize: function() {\n\n    if (!this.model.has('visible')) this.model.set('visible', false);\n\n    this.model.bind(\"change:visible\", this._onSwitchSelected, this);\n\n    this.add_related_model(this.model);\n\n    this._onSwitchSelected();\n\n    // Template\n    this.template = this.options.template ? templates.getTemplate(this.options.template) : _.template(this.defaults.template);\n  },\n\n  render: function() {\n    var attrs = {\n      layerName: this.model.getName(),\n      visible: this.model.isVisible()\n    };\n    this.$el.append(this.template(attrs));\n    return this;\n  },\n\n  /*\n  * Throw an event when the user clicks in the switch button\n  */\n  _onSwitchSelected: function() {\n    var enabled = this.model.get('visible');\n\n    // Change switch\n    this.$el.find(\".switch\")\n      .removeClass(enabled ? 'disabled' : 'enabled')\n      .addClass(enabled    ? 'enabled'  : 'disabled');\n\n    // Send trigger\n    this.trigger('switchChanged');\n\n  },\n\n  _onSwitchClick: function(e){\n    this.killEvent(e);\n\n    // Set model\n    this.model.set(\"visible\", !this.model.get(\"visible\"));\n  }\n\n});\n\nmodule.exports = LayerView;\n",
    "module.exports = {\n  LegendItemModel: require('./legend-item-model'),\n  LegendItem: require('./legend-item'),\n  LegendItems: require('./legend-items'),\n  LegendModel: require('./legend-model'),\n  Legends: require('./legends'),\n  BaseLegend: require('./legend/base-legend'),\n  BubbleLegend: require('./legend/bubble-legend'),\n  CategoryLegend: require('./legend/category-legend'),\n  ChoroplethLegend: require('./legend/choropleth-legend'),\n  ColorLegend: require('./legend/color-legend'),\n  CustomLegend: require('./legend/custom-legend'),\n  DebugLegend: require('./legend/debug-legend'),\n  DensityLegend: require('./legend/density-legend'),\n  IntensityLegend: require('./legend/intensity-legend'),\n  NoneLegend: require('./legend/none-legend'),\n  StackedLegend: require('./legend/stacked-legend')\n};\n",
    "var Model = require('../../core/model');\n\nvar LegendItemModel = Model.extend({\n\n  defaults: {\n    name: \"Untitled\",\n    visible:true,\n    value: \"\"\n  }\n\n});\n\nmodule.exports = LegendItemModel;\n",
    "var _ = require('underscore');\nvar templates = require('cdb.templates');\nvar View = require('../../core/view');\n\n/**\n * Legend item view\n */\nvar LegendItem = View.extend({\n\n  tagName: \"li\",\n\n  initialize: function() {\n\n    _.bindAll(this, \"render\");\n\n    this.template = this.options.template ? _.template(this.options.template) : templates.getTemplate('geo/legend');\n\n  },\n\n  render: function() {\n\n    var value;\n    this.model.attributes.name = \"\"+this.model.attributes.name;\n    if (this.model.get(\"type\") == 'image' && this.model.get(\"value\")) {\n      value = \"url( \" + this.model.get(\"value\") + \")\";\n    } else {\n      value = this.model.get(\"value\");\n    }\n\n    var options = _.extend( this.model.toJSON(), { value: value });\n\n    this.$el.html(this.template(options));\n\n    return this.$el;\n  }\n\n});\n\nmodule.exports = LegendItem;\n",
    "var Backbone = require('backbone');\nvar LegendItemModel = require('./legend-item-model');\n\n/**\n * Collection of items for a legend\n */\nvar LegendItems = Backbone.Collection.extend({\n  model: LegendItemModel\n});\n\nmodule.exports = LegendItems;\n",
    "var Model = require('../../core/model');\nvar LegendItems = require('./legend-items');\n\n/**\n * Legend Model\n */\nvar LegendModel = Model.extend({\n\n  defaults: {\n    type: null,\n    show_title: false,\n    title: \"\",\n    template: \"\",\n    visible: true\n  },\n\n  initialize: function() {\n\n    this.items = new LegendItems(this.get(\"items\"));\n\n    this.items.bind(\"add remove reset change\", function() {\n      this.set({ items: this.items.toJSON() });\n    }, this);\n\n    this.bind(\"change:items\", this._onUpdateItems, this);\n    this.bind(\"change:title change:show_title\", this._onUpdateTitle, this);\n    this.bind(\"change:template\", this._onUpdateTemplate, this);\n\n  },\n\n  _onUpdateTemplate: function() {\n    this.template = this.get(\"template\");\n  },\n\n  _onUpdateTitle: function() {\n    this.title = this.get(\"title\");\n    this.show_title = this.get(\"show_title\");\n  },\n\n  _onUpdateItems: function() {\n    var items = this.get(\"items\");\n    this.items.reset(items);\n  }\n\n});\n\nmodule.exports = LegendModel;\n",
    "var _ = require('underscore');\nvar LegendModel = require('./legend-model');\nvar LegendExports = require('./legend-exports');\nvar View = require('../../core/view');\n\n/**\n * Legend View: wrapper for the different types of legends\n */\nvar Legend = View.extend({\n\n  className: \"cartodb-legend\",\n\n  events: {\n    \"dragstart\":            \"_stopPropagation\",\n    \"mousedown\":            \"_stopPropagation\",\n    \"touchstart\":           \"_stopPropagation\",\n    \"MSPointerDown\":        \"_stopPropagation\",\n    \"dblclick\":             \"_stopPropagation\",\n    \"mousewheel\":           \"_stopPropagation\",\n    \"DOMMouseScroll\":       \"_stopPropagation\",\n    \"dbclick\":              \"_stopPropagation\",\n    \"click\":                \"_stopPropagation\"\n  },\n\n  initialize: function() {\n    _.bindAll(this, \"render\", \"show\", \"hide\");\n\n    _.defaults(this.options, this.default_options);\n\n    this.map = this.options.map;\n\n    this._setupModel();\n    this._setupItems();\n\n    this._updateLegendType();\n  },\n\n  _stopPropagation: function(ev) {\n    ev.stopPropagation();\n  },\n\n  _setupModel: function() {\n    if (!this.model) {\n\n      this.model = new LegendModel({\n        type: this.options.type || LegendModel.prototype.defaults.type,\n        title: this.options.title || LegendModel.prototype.defaults.title,\n        show_title: this.options.show_title || LegendModel.prototype.defaults.show_title,\n        template: this.options.template || LegendModel.prototype.defaults.template\n      });\n    }\n\n    this.add_related_model(this.model);\n\n    //this.model.bind(\"change:template change:type change:items change:title change:show_title\",  this._updateLegendType, this);\n    this.model.bind(\"change\",  this._updateLegendType, this);\n  },\n\n  _updateLegendType: function() {\n    var type = this.model.get(\"type\");\n    this.legend_name = this._capitalize(type) + \"Legend\";\n\n    if (type == 'none' || type == null) {\n      this.legend_name = null;\n      this.model.set({ type: \"none\" }, { silent: true });\n    } else if (!LegendExports[this.legend_name]) {\n\n      // set the previous type\n      this.legend_name = null;\n      this.model.set({ type: this.model.previous(\"type\") }, { silent: true });\n      return;\n    }\n\n    this._refresh();\n  },\n\n  _capitalize: function(string) {\n    if (string && _.isString(string)) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n  },\n\n  _refresh: function() {\n    var self = this;\n\n    if (this.view) this.view.clean();\n\n    var type  = this.model.get(\"type\");\n    var title = this.model.get(\"title\");\n    var show_title = this.model.get(\"show_title\");\n    var template = this.model.get(\"template\");\n\n    if (type && this.legend_name) {\n      this.view = new LegendExports[this.legend_name]({\n        model: this.model\n      });\n\n      // Set the type as the element class for styling\n      this.$el.removeClass();\n      this.$el.addClass(this.className + \" \" + this.model.get(\"type\"));\n    } else {\n      this.hide();\n\n      this.$el.removeClass();\n      this.$el.addClass(this.className + \" none\");\n    }\n\n    this.render();\n  },\n\n  _setupItems: function() {\n    var self = this;\n\n    this.items = this.model.items;\n\n    if (this.options.data) {\n      this.items.reset(this.options.data);\n    }\n\n    this.items.bind(\"add remove change:value change:name\", this.render, this);\n  },\n\n  render: function() {\n    if (this.view) {\n\n      if (this.model.get(\"template\")) {\n        this.$el.html(this.view.render().$el.html());\n        this.$el.removeClass(this.model.get(\"type\"))\n        this.$el.addClass(\"wrapper\");\n      } else {\n        this.$el.html(this.view.render().$el.html());\n      }\n\n      if (this.model.get(\"visible\") === false) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n\n    return this;\n  },\n\n  show: function(callback) {\n    var type = this.model.get(\"type\");\n    if (type && type != \"none\") this.$el.show();\n  },\n\n  hide: function(callback) {\n    if (this.model.get(\"type\")) this.$el.hide();\n  }\n});\n\nmodule.exports = Legend;\n",
    "var $ = require('jquery');\nvar View = require('../../../core/view');\n\n/**\n * BaseLegend: common methods for all the legends\n */\nvar BaseLegend = View.extend({\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:template change:title change:show_title\", this.render, this);\n\n  },\n\n  addTo: function(element) {\n    $(element).html(this.render().$el);\n  },\n\n  setTitle: function(title) {\n    this.model.set(\"title\", title);\n  },\n\n  showTitle: function() {\n    this.model.set(\"show_title\", true);\n  },\n\n  hideTitle: function() {\n    this.model.set(\"show_title\", false);\n  }\n\n});\n\nmodule.exports = BaseLegend;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize.js')\nvar BaseLegend = require('./base-legend');\n\nvar BubbleLegend = BaseLegend.extend({\n\n  className: \"bubble-legend\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul><li>\\t<%- min %></li><li class=\"graph\">\\t\\t<div class=\"bubbles\"></div></li><li>\\t<%- max %></li></ul>'),\n\n  initialize: function() {\n\n    this.items = this.model.items;\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:template change:title change:show_title change:color change:min change:max\", this.render, this);\n\n  },\n\n  setColor: function(color) {\n    this.model.set(\"color\", color);\n  },\n\n  setMinValue: function(value) {\n    this.model.set(\"min\", value);\n  },\n\n  setMaxValue: function(value) {\n    this.model.set(\"max\", value);\n  },\n\n  _renderGraph: function(color) {\n    this.$el.find(\".graph\").css(\"background\", color);\n  },\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n      this.$el.removeClass(\"bubble-legend\");\n\n    } else {\n\n      var color = this.model.get(\"color\") || (this.items.length >= 3 ? this.items.at(2).get(\"value\") : \"\");\n\n      if (this.items.length >= 3) {\n\n        var min = this.model.get(\"min\") || this.items.at(0).get(\"value\");\n        var max = this.model.get(\"max\") || this.items.at(1).get(\"value\");\n\n        var options = _.extend(this.model.toJSON(), { min: min, max: max });\n\n        this.$el.html(this.template(options));\n\n      }\n\n      this._renderGraph(color);\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = BubbleLegend;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize');\nvar BaseLegend = require('./base-legend');\nvar LegendItem = require('../legend-item');\n\nvar CategoryLegend = BaseLegend.extend({\n\n  className: \"category-legend\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul></ul>'),\n\n  initialize: function() {\n\n    this.items = this.model.items;\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:title change:show_title change:template\", this.render, this);\n\n  },\n\n  _renderItems: function() {\n\n    this.items.each(this._renderItem, this);\n\n  },\n\n  _renderItem: function(item) {\n\n    view = new LegendItem({\n      model: item,\n      className: (item.get(\"value\") && item.get(\"value\").indexOf(\"http\") >= 0 || item.get(\"type\") && item.get(\"type\") == 'image') ? \"bkg\" : \"\",\n      template: '\\t\\t<div class=\"bullet\" style=\"background: <%= value %>\"></div> <%- name || ((name === false) ? \"false\": \"null\") %>'\n    });\n\n    this.$el.find(\"ul\").append(view.render());\n\n  },\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n    } else {\n\n      this.$el.html(this.template(this.model.toJSON()));\n\n      if (this.items.length > 0) {\n        this._renderItems();\n      } else {\n        this.$el.html('<div class=\"warning\">The category legend is empty</div>');\n      }\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = CategoryLegend;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize');\nvar BaseLegend = require('./base-legend');\n\nvar ChoroplethLegend = BaseLegend.extend({\n\n  className: \"choropleth-legend\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul><li class=\"min\">\\t\\t<%- leftLabel %></li><li class=\"max\">\\t\\t<%- rightLabel %></li><li class=\"graph count_<%- buckets_count %>\">\\t<div class=\"colors\"><%= colors %>\\n\\t</div></li></ul>'),\n\n  initialize: function() {\n\n    this.items    = this.model.items;\n\n  },\n\n  _generateColorList: function() {\n\n    var colors = \"\";\n\n    if (this.model.get(\"colors\")) {\n      return _.map(this.model.get(\"colors\"), function(color) {\n        return '\\n\\t<div class=\"quartile\" style=\"background-color:' + color + '\"></div>';\n      }).join(\"\");\n    } else {\n\n      for (var i = 2; i < this.items.length; i++) {\n        var color = this.items.at(i).get(\"value\");\n        colors += '\\n\\t<div class=\"quartile\" style=\"background-color:'+color+'\"></div>';\n      }\n    }\n\n    return colors;\n\n  },\n\n  setLeftLabel: function(text) {\n\n    this.model.set(\"leftLabel\", text);\n\n  },\n\n  setRightLabel: function(text) {\n\n    this.model.set(\"rightLabel\", text);\n\n  },\n\n  setColors: function(colors) {\n\n    this.model.set(\"colors\", colors);\n\n  },\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n    } else {\n\n\n      if (this.items.length >= 2) {\n\n        this.leftLabel  = this.items.at(0);\n        this.rightLabel = this.items.at(1);\n\n        var leftLabel   = this.model.get(\"leftLabel\")  || this.leftLabel.get(\"value\");\n        var rightLabel  = this.model.get(\"rightLabel\") || this.rightLabel.get(\"value\");\n\n        var colors = this._generateColorList();\n\n        var options = _.extend( this.model.toJSON(), { leftLabel: leftLabel, rightLabel: rightLabel, colors: colors, buckets_count: colors.length });\n\n        this.$el.html(this.template(options));\n      }\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = ChoroplethLegend;\n",
    "var _ = require('underscore');\nvar BaseLegend = require('./base-legend');\nvar LegendItem = require('../legend-item');\n\nvar ColorLegend = BaseLegend.extend({\n\n  className: \"color-legend\",\n\n  type: \"color\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul></ul>'),\n\n  initialize: function() {\n\n    this.items = this.model.items;\n\n  },\n\n  _renderItems: function() {\n\n    this.items.each(this._renderItem, this);\n\n  },\n\n  _renderItem: function(item) {\n\n    view = new LegendItem({\n      model: item,\n      className: (item.get(\"value\") && item.get(\"value\").indexOf(\"http\") >= 0) ? \"bkg\" : \"\",\n      template: '\\t\\t<div class=\"bullet\" style=\"background: <%= value %>\"></div> <%- name || ((name === false) ? \"false\": \"null\") %>'\n    });\n\n    this.$el.find(\"ul\").append(view.render());\n\n  },\n\n  render: function() {\n\n    this.$el.html(this.template(this.model.toJSON()));\n\n    if (this.items.length > 0) {\n      this._renderItems();\n    } else {\n      this.$el.html('<div class=\"warning\">The color legend is empty</div>');\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = ColorLegend;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize.js')\nvar BaseLegend = require('./base-legend');\nvar LegendItems = require('../legend-items');\nvar LegendItem = require('../legend-item');\n\nvar CustomLegend = BaseLegend.extend({\n\n  className: \"custom-legend\",\n  type: \"custom\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul></ul>'),\n\n  initialize: function() {\n    this.items = this.model.items;\n  },\n\n  setData: function(data) {\n\n    this.items = new LegendItems(data);\n    this.model.items = this.items;\n    this.model.set(\"items\", data);\n\n  },\n\n  _renderItems: function() {\n\n    this.items.each(this._renderItem, this);\n\n  },\n\n  _renderItem: function(item) {\n\n    var template = this.options.itemTemplate || '\\t\\t<div class=\"bullet\" style=\"background:<%= value %>\"></div>\\n\\t\\t<%- name || \"null\" %>';\n\n    view = new LegendItem({\n      model: item,\n      className: (item.get(\"value\") && item.get(\"value\").indexOf(\"http\") >= 0) ? \"bkg\" : \"\",\n      template: template\n    });\n\n    this.$el.find(\"ul\").append(view.render());\n\n  },\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n    } else {\n\n      this.$el.html(this.template(this.model.toJSON()));\n\n      if (this.items.length > 0) {\n        this._renderItems();\n      } else {\n        this.$el.html('<div class=\"warning\">The legend is empty</div>');\n      }\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = CustomLegend;\n",
    "var View = require('../../../core/view');\n\nvar DebugLegend = View.extend({ });\nmodule.exports = DebugLegend\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize');\nvar BaseLegend = require('./base-legend');\n\nvar DensityLegend = BaseLegend.extend({\n\n  className: \"density-legend\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul><li class=\"min\">\\t<%- leftLabel %></li><li class=\"max\">\\t<%- rightLabel %></li><li class=\"graph count_<%- buckets_count %>\">\\t<div class=\"colors\"><%= colors %>\\n\\t</div></li></ul>'),\n\n  initialize: function() {\n\n    this.items    = this.model.items;\n\n  },\n\n  setLeftLabel: function(text) {\n\n    this.model.set(\"leftLabel\", text);\n\n  },\n\n  setRightLabel: function(text) {\n\n    this.model.set(\"rightLabel\", text);\n\n  },\n\n  setColors: function(colors) {\n\n    this.model.set(\"colors\", colors);\n\n  },\n\n  _generateColorList: function() {\n\n    var colors = \"\";\n\n    if (this.model.get(\"colors\")) {\n\n      return _.map(this.model.get(\"colors\"), function(color) {\n        return '\\n\\t\\t<div class=\"quartile\" style=\"background-color:' + color + '\"></div>';\n      }).join(\"\");\n\n    } else {\n\n      for (var i = 2; i < this.items.length; i++) {\n        var color = this.items.at(i).get(\"value\");\n        colors += '\\n\\t\\t<div class=\"quartile\" style=\"background-color:'+color+'\"></div>';\n      }\n    }\n\n    return colors;\n\n  },\n\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n    } else {\n\n      if (this.items.length >= 2) {\n\n        this.leftLabel  = this.items.at(0);\n        this.rightLabel = this.items.at(1);\n\n        var leftLabel  = this.model.get(\"leftLabel\")  || this.leftLabel.get(\"value\");\n        var rightLabel = this.model.get(\"rightLabel\") || this.rightLabel.get(\"value\");\n\n        var colors = this._generateColorList();\n\n        var options = _.extend( this.model.toJSON(), { leftLabel: leftLabel, rightLabel: rightLabel, colors: colors, buckets_count: colors.length });\n\n        this.$el.html(this.template(options));\n      }\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = DensityLegend;\n",
    "var _ = require('underscore');\nvar sanitize = require('../../../core/sanitize');\nvar BaseLegend = require('./base-legend');\n\n/**\n * IntensityLegend\n */\nvar IntensityLegend = BaseLegend.extend({\n\n  className: \"intensity-legend\",\n\n  template: _.template('<% if (title && show_title) { %>\\n<div class=\"legend-title\"><%- title %></div><% } %><ul><li class=\"min\">\\t<%- leftLabel %></li><li class=\"max\">\\t<%- rightLabel %></li><li class=\"graph\"></li></ul>'),\n\n  initialize: function() {\n\n    this.items       = this.model.items;\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:template\", this.render, this);\n\n  },\n\n  setColor: function(color) {\n\n    this.model.set(\"color\", color);\n\n  },\n\n  setLeftLabel: function(text) {\n\n    this.model.set(\"leftLabel\", text);\n\n  },\n\n  setRightLabel: function(text) {\n\n    this.model.set(\"rightLabel\", text);\n\n  },\n\n  _hexToRGB: function(hex) {\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n\n  },\n\n  _rgbToHex: function(r, g, b) {\n\n    function componentToHex(c) {\n      var hex = c.toString(16);\n      return hex.length == 1 ? \"0\" + hex : hex;\n    }\n\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n  },\n\n  _calculateMultiply: function(color, steps) {\n\n    var colorHex = this._hexToRGB(color);\n\n    if (colorHex) {\n\n      var r = colorHex.r;\n      var g = colorHex.g;\n      var b = colorHex.b;\n\n      for (var i = 0; i <= steps; i++) {\n        r = Math.round(r * colorHex.r/255);\n        g = Math.round(g * colorHex.g/255);\n        b = Math.round(b * colorHex.b/255);\n      }\n\n      return this._rgbToHex(r,g,b);\n\n    }\n\n    return \"#ffffff\";\n\n  },\n\n  _renderGraph: function(baseColor) {\n\n    var s = \"\";\n\n    s+= \"background: <%= color %>;\";\n    s+= \"background: -moz-linear-gradient(left, <%= color %> 0%, <%= right %> 100%);\";\n    s+= \"background: -webkit-gradient(linear, left top, right top, color-stop(0%,<%= color %>), color-stop(100%,<%= right %>));\";\n    s+= \"background: -webkit-linear-gradient(left, <%= color %> 0%,<%= right %> 100%);\";\n    s+= \"background: -o-linear-gradient(left, <%= color %> 0%,<%= right %> 100%);\";\n    s+= \"background: -ms-linear-gradient(left, <%= color %> 0%,<%= right %> 100%)\";\n    s+= \"background: linear-gradient(to right, <%= color %> 0%,<%= right %> 100%);\";\n    s+= \"filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='<%= color %>', endColorstr='<%= right %>',GradientType=1 );\";\n    s+= \"background-image: -ms-linear-gradient(left, <%= color %> 0%,<%= right %> 100%)\";\n\n    var backgroundStyle = _.template(s);\n\n    var multipliedColor = this._calculateMultiply(baseColor, 4);\n\n    this.$el.find(\".graph\").attr(\"style\", backgroundStyle({ color: baseColor, right: multipliedColor }));\n\n  },\n\n  render: function() {\n\n    if (this.model.get(\"template\")) {\n\n      var template = _.template(sanitize.html(this.model.get(\"template\"), this.model.get('sanitizeTemplate')));\n      this.$el.html(template(this.model.toJSON()));\n\n    } else {\n\n      if (this.items.length >= 3) {\n\n        this.leftLabel  = this.items.at(0);\n        this.rightLabel = this.items.at(1);\n        var color       = this.model.get(\"color\") || this.items.at(2).get(\"value\");\n\n        var leftLabel   = this.model.get(\"leftLabel\")  || this.leftLabel.get(\"value\");\n        var rightLabel  = this.model.get(\"rightLabel\") || this.rightLabel.get(\"value\");\n\n        var options = _.extend( this.model.toJSON(), { color: color, leftLabel: leftLabel, rightLabel: rightLabel });\n\n        this.$el.html(this.template(options));\n\n        this._renderGraph(color);\n      }\n\n    }\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = IntensityLegend;\n",
    "var LegendModel = require('../legend-model');\nvar BubbleLegend = require('./bubble-legend');\n\n/**\n * Bubble Legend public interface\n */\nvar LegendBubble = BubbleLegend.extend({\n\n  className: \"cartodb-legend bubble\",\n\n  type: \"bubble\",\n\n  initialize: function() {\n\n    this.model = new LegendModel({\n      type:  this.type,\n      title: this.options.title,\n      min:   this.options.min,\n      max:   this.options.max,\n      color: this.options.color,\n      show_title: this.options.title ? true : false\n    });\n\n    this.add_related_model(this.model);\n\n    this._bindModel();\n\n  },\n\n  render: function() {\n\n    this.$el.html(this.template(this.model.toJSON()));\n\n    this._renderGraph(this.model.get(\"color\"));\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = LegendBubble;\n",
    "var CategoryLegend = require('./category-legend');\nvar LegendItems = require('../legend-items');\nvar LegendModel = require('../legend-model');\n\n/**\n * Category Legend public interface\n */\nvar LegendCategory = CategoryLegend.extend({\n\n  className: \"cartodb-legend category\",\n\n  type: \"category\",\n\n  initialize: function() {\n\n    this.items = new LegendItems(this.options.data);\n\n    this.model = new LegendModel({\n      type: this.type,\n      title: this.options.title,\n      show_title: this.options.title ? true : false\n    });\n\n    this._bindModel();\n\n  },\n\n  render: function() {\n\n    this.$el.html(this.template(this.model.toJSON()));\n\n    this._renderItems();\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = LegendCategory;\n",
    "var _ = require('underscore');\nvar ChoroplethLegend = require('./choropleth-legend');\nvar LegendModel = require('../legend-model');\n\n/**\n * Choropleth Legend public interface\n */\nvar LegendChoropleth = ChoroplethLegend.extend({\n\n  type: \"choropleth\",\n\n  className: \"cartodb-legend choropleth\",\n\n  initialize: function() {\n\n    this.items    = this.options.items;\n\n    this.model = new LegendModel({\n      type:          this.type,\n      title:         this.options.title,\n      show_title:    this.options.title ? true : false,\n      leftLabel:     this.options.left  || this.options.leftLabel,\n      rightLabel:    this.options.right || this.options.rightLabel,\n      colors:        this.options.colors,\n      buckets_count: this.options.colors ? this.options.colors.length : 0\n    });\n\n    this.add_related_model(this.model);\n    this._bindModel();\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:template change:title change:show_title change:colors change:leftLabel change:rightLabel\", this.render, this);\n\n  },\n\n  _generateColorList: function() {\n\n    return _.map(this.model.get(\"colors\"), function(color) {\n      return '\\t\\t<div class=\"quartile\" style=\"background-color:' + color + '\"></div>';\n    }).join(\"\");\n\n  },\n\n  render: function() {\n\n    var options = _.extend(this.model.toJSON(), { colors: this._generateColorList() });\n\n    this.$el.html(this.template(options));\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = LegendChoropleth;\n",
    "var LegendCategory = require('./legend-category');\n\n/**\n * Color Legend public interface\n */\nvar LegendColor = LegendCategory.extend({ });\nmodule.exports = LegendColor;\n",
    "var CustomLegend = require('./custom-legend');\nvar LegendItems = require('../legend-items');\nvar LegendModel = require('../legend-model');\n\n/**\n * Custom Legend public interface\n */\nvar LegendCustom = CustomLegend.extend({\n\n  className: \"cartodb-legend custom\",\n\n  type: \"custom\",\n\n  initialize: function() {\n\n    this.items = new LegendItems(this.options.data || this.options.items);\n\n    this.model = new LegendModel({\n      type: this.type,\n      title: this.options.title,\n      show_title: this.options.title ? true : false,\n      items: this.items.models\n    });\n\n    this._bindModel();\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:items change:template change:title change:show_title\", this.render, this);\n\n  }\n\n});\n\n\nmodule.exports = LegendCustom;\n",
    "var _ = require('underscore');\nvar DensityLegend = require('./density-legend');\nvar LegendModel = require('../legend-model');\n\n/**\n * Density Legend public interface\n */\nvar LegendDensity = DensityLegend.extend({\n\n  type: \"density\",\n\n  className: \"cartodb-legend density\",\n\n  initialize: function() {\n\n    this.items    = this.options.items;\n\n    this.model = new LegendModel({\n      type:          this.type,\n      title:         this.options.title,\n      show_title:    this.options.title ? true : false,\n      leftLabel:     this.options.left || this.options.leftLabel,\n      rightLabel:    this.options.right || this.options.rightLabel,\n      colors:        this.options.colors,\n      buckets_count: this.options.colors ? this.options.colors.length : 0,\n      items:        this.options.items\n    });\n\n    this._bindModel();\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:colors change:template change:title change:show_title change:colors change:leftLabel change:rightLabel\", this.render, this);\n\n  },\n\n  _generateColorList: function() {\n\n    return _.map(this.model.get(\"colors\"), function(color) {\n      return '<div class=\"quartile\" style=\"background-color:' + color + '\"></div>';\n    }).join(\"\");\n\n  },\n\n  render: function() {\n\n    var options = _.extend(this.model.toJSON(), { colors: this._generateColorList() });\n\n    this.$el.html(this.template(options));\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = LegendDensity;\n",
    "var IntensityLegend = require('./intensity-legend');\nvar LegendModel = require('../legend-model');\n\n/**\n * Intensity Legend public interface\n */\nvar LegendIntensity = IntensityLegend.extend({\n\n  className: \"cartodb-legend intensity\",\n  type: \"intensity\",\n\n  initialize: function() {\n\n    this.items = this.options.items;\n\n    this.model = new LegendModel({\n      type: this.type,\n      title: this.options.title,\n      show_title: this.options.title ? true : false,\n      color: this.options.color,\n      leftLabel: this.options.left || this.options.leftLabel,\n      rightLabel: this.options.right || this.options.rightLabel\n    });\n\n    this.add_related_model(this.model);\n    this._bindModel();\n\n  },\n\n  _bindModel: function() {\n\n    this.model.bind(\"change:title change:show_title change:color change:leftLabel change:rightLabel\", this.render, this);\n\n  },\n\n  render: function() {\n\n    this.$el.html(this.template(this.model.toJSON()));\n\n    this._renderGraph(this.model.get(\"color\"));\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = LegendIntensity;\n",
    "var View = require('../../../core/view');\n\nvar LegendNone = View.extend({ });\n\nmodule.exports = LegendNone;\n",
    "var _ = require('underscore');\nvar cdb = require('cdb'); // cdb.geo.ui.Legend.*\nvar Legends = require('../legends');\nvar LegendModel = require('../legend-model');\nvar StackedLegend = require('./stacked-legend');\n\n/**\n * Stacked Legend public interface\n */\nvar LegendStacked = StackedLegend.extend({\n\n  initialize: function() {\n\n    if (this.options.legends) {\n\n      var legendModels = _.map(this.options.legends, function(legend) {\n        return legend.model;\n      });\n\n      this.legendItems = new Legends(legendModels);\n\n      this.legendItems.bind(\"add remove change\", this.render, this);\n\n    } else if (this.options.data) {\n\n      var legendModels = _.map(this.options.data, function(legend) {\n        return new LegendModel(legend);\n      });\n\n      this.legendItems = new Legends(legendModels);\n\n      this.legendItems.bind(\"add remove change\", this.render, this);\n\n    }\n\n  },\n\n  _capitalize: function(string) {\n    if (string && _.isString(string)) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n  },\n\n  render: function() {\n\n    this.$el.empty();\n\n    this.legends = [];\n\n    if (this.legendItems && this.legendItems.length > 0) {\n\n      this.legendItems.each(this._renderLegend, this);\n\n    }\n\n    return this;\n\n  },\n\n  _renderLegend: function(model) {\n\n    var type = model.get(\"type\");\n\n    if (!type) type = \"custom\";\n\n    type = this._capitalize(type);\n\n    // TODO: Necessary evil, can't require since end up with circular references; how to solve better?\n    var view = new cdb.geo.ui.Legend[type](model.attributes);\n\n    this.legends.push(view);\n\n    if (model.get(\"visible\") !== false) this.$el.append(view.render().$el);\n\n  },\n\n  getLegendAt: function(n) {\n\n    return this.legends[n];\n\n  },\n\n  addLegend: function(attributes) {\n\n    var legend = new LegendModel(attributes);\n    this.legendItems.push(legend);\n\n  },\n\n  removeLegendAt: function(n) {\n\n    var legend = this.legendItems.at(n);\n    this.legendItems.remove(legend);\n\n  }\n\n});\n\nmodule.exports = LegendStacked;\n",
    "var Legend = {};\nLegend.Bubble = require('./legend-bubble');\nLegend.Category = require('./legend-category');\nLegend.Choropleth = require('./legend-choropleth');\nLegend.Color = require('./legend-color');\nLegend.Custom = require('./legend-custom');\nLegend.Density = require('./legend-density');\nLegend.Intensity = require('./legend-intensity');\nLegend.None = require('./legend-none');\nLegend.Stacked = require('./legend-stacked');\n\nmodule.exports = Legend;\n",
    "var BaseLegend = require('./base-legend');\n\nvar NoneLegend  = BaseLegend.extend({ });\n\nmodule.exports = NoneLegend;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar View = require('../../../core/view');\n\nvar StackedLegend = View.extend({\n\n  events: {\n    \"dragstart\":            \"_stopPropagation\",\n    \"mousedown\":            \"_stopPropagation\",\n    \"touchstart\":           \"_stopPropagation\",\n    \"MSPointerDown\":        \"_stopPropagation\",\n    \"dblclick\":             \"_stopPropagation\",\n    \"mousewheel\":           \"_stopPropagation\",\n    \"DOMMouseScroll\":       \"_stopPropagation\",\n    \"dbclick\":              \"_stopPropagation\",\n    \"click\":                \"_stopPropagation\"\n  },\n\n  className: \"cartodb-legend-stack\",\n\n  initialize: function() {\n    _.each(this.options.legends, this._setupBinding, this);\n  },\n\n  _stopPropagation: function(ev) {\n    ev.stopPropagation();\n  },\n\n  getLegendByIndex: function(index) {\n    if (!this._layerByIndex) {\n      this._layerByIndex = {};\n      var legends = this.options.legends;\n      for (var i = 0; i < legends.length; ++i) {\n        var legend = legends[i];\n        this._layerByIndex[legend.options.index] = legend;\n      }\n    }\n    return this._layerByIndex[index];\n  },\n\n  _setupBinding: function(legend) {\n    legend.model.bind(\"change:type\", this._checkVisibility, this);\n    this.add_related_model(legend.model);\n  },\n\n  render: function() {\n    this._renderItems();\n    this._checkVisibility();\n\n    return this;\n  },\n\n  _renderItems: function() {\n    _.each(this.options.legends, function(item) {\n      this.$el.append(item.render().$el);\n    }, this);\n  },\n\n  _checkVisibility: function() {\n    var visible = _.some(this.options.legends, function(legend) {\n      return legend.model.get(\"type\") && (legend.model.get(\"type\") != \"none\"  || legend.model.get(\"template\"))\n    }, this);\n\n    if (visible) {\n      this.show();\n    } else {\n      this.hide();\n    }\n\n    _.each(this.options.legends, function(item) {\n      var legendModel = item.model;\n      if (legendModel.get(\"type\") === \"none\" || legendModel.get(\"visible\") === false) {\n        item.hide();\n      } else {\n        item.show();\n      }\n    }, this);\n  },\n\n  show: function() {\n    this.$el.show();\n  },\n\n  hide: function() {\n    this.$el.hide();\n  },\n\n  addTo: function(element) {\n    $(element).html(this.render().$el);\n  }\n});\n\nmodule.exports = StackedLegend;\n",
    "var Backbone = require('backbone');\nvar LegendModel = require('./legend-model');\n\nmodule.exports = Backbone.Collection.extend({\n  model: LegendModel\n});\n",
    "var _ = require('underscore');\nvar View = require('../../../core/view');\nvar NOKIA = require('../../../geo/geocoder/nokia-geocoder');\nvar InfowindowModel = require('../../../geo/ui/infowindow-model');\nvar Infowindow = require('../../../geo/ui/infowindow');\nvar Geometry = require('../../../geo/geometry');\nvar template = require('./search_template.tpl');\nvar infowindowTemplate = require('./search_infowindow_template.tpl');\n\n/**\n *  UI component to place the map in the\n *  location found by the geocoder.\n */\nvar Search = View.extend({\n  className: 'CDB-Search',\n\n  _ZOOM_BY_CATEGORY: {\n    'building': 18,\n    'postal-area': 15,\n    'default': 12\n  },\n\n  events: {\n    'click .js-toggle': '_onToggleClick',\n    'submit .js-form': '_onSubmit',\n    'click': '_stopPropagation',\n    'dblclick': '_stopPropagation',\n    'mousedown': '_stopPropagation'\n  },\n\n  options: {\n    searchPin: true,\n    infowindowWidth: 186,\n    infowindowOffset: [30, 30],\n    iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAfCAYAAADXwvzvAAACuklEQVR4Ae3PQ+AsNxzA8e8vo/Xus237vVN9qW3b7qW2bdu2caxt29bu/meSmaTpqW63Pfc7wemTZPh9K/Xv3zhzxIgVrho0aMsLGo2N9o+iuYDwV02E5NJpM7d5fMGC515dMP/7l6dNMc+OGJY9Uq99cVMc33I4LOJXCQBQuXPBglNnDRm0Xa1RAWewP3yL/vJLul99Q/pNm0/b+qsnbLHngXAVgAI4b9KkXWc1m9vV58ykst56lKdMptyokdTKRJUIV1MMTGTgbOTknWABgFo2SSbOjuN9wlgIBrSIJ0yiVG9QUgGxUigRRAlpCQYrBs+A/QClliuXV6ppPVibDPPqi5irL8G+/QY2S3FZhityrLNYBWkAI2G5WTA2nGTthKDTJfP/FH1sCb76nNBa7I8/knba6Eyj8wJjLbk4qlCdAFNClWXKiiL72kGRUkSRhwUuTUm7XTqZ3z3KnMM7QhAFUfiKMZ9OQci+ydFFH32BIsDh8hxjDF2T0y0KtHHUczCg34P3wgesfWhZozstW1R/cJpuohA8dI7cWrSfxqM4gwEOnoJnn4HXBVDHwHnriNr2W3G0I8FEkKufMbjcIw1DC+iCuRw2OBduEYAKDD8drlkGlk6BHwAtIEDioD/QBnsnnHAI7A9YAAAGenwEnPuAd8+DewHcS+CeB3szvL0b7ADE/FWzYf5BCxa9dMvqa7oLll7WbTlsxKkDYRi9dPqhRz743L0PuKtOPMXtutHmm/InKf5Y6Co15Upl8qSCqVajXiEeUTRb6GqNIojoGaLEDwEA6B0KIKL8lH8JBeS/3AgK73qAPfc/tCLiAACUCmyvsJHnphwEAYFStNs/NoHgn2ATWPmlF54b/9GHH/Khn88/+9SywJx/+q0SsKTZbB45d/6CO0aNHnutv3kbYDQg9JAAIRDwF/0EjlkjUi3fkAMAAAAASUVORK5CYII=',\n    iconAnchor: [7, 31]\n  },\n\n  initialize: function () {\n    this.mapView = this.options.mapView;\n    this.template = this.options.template || template;\n  },\n\n  render: function () {\n    this.$el.html(this.template(this.options));\n    return this;\n  },\n\n  _stopPropagation: function (ev) {\n    if (ev) {\n      ev.stopPropagation();\n    }\n  },\n\n  _onSubmit: function (ev) {\n    ev.preventDefault();\n    var self = this;\n    var address = this.$('.js-textInput').val();\n\n    if (!address) {\n      return;\n    }\n    // Remove previous pin without any timeout (0 represents the timeout for\n    // the animation)\n    this._destroySearchPin(0);\n    NOKIA.geocode(address, function (places) {\n      self._onResult(places);\n    });\n  },\n\n  _onResult: function (places) {\n    var position = '';\n    var address = this.$('.js-textInput').val();\n\n    if (places && places.length > 0) {\n      var location = places[0];\n      var validBBox = this._isBBoxValid(location);\n\n      // Get BBox if possible and set bounds\n      if (validBBox) {\n        var s = parseFloat(location.boundingbox.south);\n        var w = parseFloat(location.boundingbox.west);\n        var n = parseFloat(location.boundingbox.north);\n        var e = parseFloat(location.boundingbox.east);\n\n        var centerLon = (w + e) / 2;\n        var centerLat = (s + n) / 2;\n        position = [centerLat, centerLon];\n        this.model.setBounds([ [ s, w ], [ n, e ] ]);\n      }\n\n      // If location is defined,\n      // let's store it\n      if (location.lat && location.lon) {\n        position = [location.lat, location.lon];\n      }\n\n      // In the case that BBox is not valid, let's\n      // center the map using the position\n      if (!validBBox) {\n        this.model.setCenter(position);\n        this.model.setZoom(this._getZoomByCategory(location.type));\n      }\n\n      if (this.options.searchPin) {\n        this._createSearchPin(position, address);\n      }\n    }\n  },\n\n  _onToggleClick: function () {\n    this.$('.CDB-Search-inner').toggleClass('is-active');\n    this.$('.js-textInput').focus();\n  },\n\n  // Getting zoom for each type of location\n  _getZoomByCategory: function (type) {\n    if (type && this._ZOOM_BY_CATEGORY[type]) {\n      return this._ZOOM_BY_CATEGORY[type];\n    }\n    return this._ZOOM_BY_CATEGORY['default'];\n  },\n\n  _isBBoxValid: function (location) {\n    if (!location.boundingbox || location.boundingbox.south === location.boundingbox.north ||\n      location.boundingbox.east === location.boundingbox.west) {\n      return false;\n    }\n    return true;\n  },\n\n  _createSearchPin: function (position, address) {\n    this._destroySearchPin();\n    this._createPin(position, address);\n    this._createInfowindow(position, address);\n    this._bindEvents();\n  },\n\n  _destroySearchPin: function (timeout) {\n    this._unbindEvents();\n    this._destroyPin();\n    this._destroyInfowindow(timeout);\n  },\n\n  _createInfowindow: function (position, address) {\n    var infowindowModel = new InfowindowModel({\n      template: infowindowTemplate,\n      latlng: position,\n      width: this.options.infowindowWidth,\n      offset: this.options.infowindowOffset,\n      content: {\n        fields: [{\n          title: 'address',\n          value: address\n        }]\n      }\n    });\n\n    this._searchInfowindow = new Infowindow({\n      model: infowindowModel,\n      mapView: this.mapView\n    });\n\n    this.mapView.$el.append(this._searchInfowindow.el);\n    infowindowModel.set('visibility', true);\n  },\n\n  _destroyInfowindow: function (timeout) {\n    if (this._searchInfowindow) {\n      timeout = !_.isUndefined(timeout) && _.isNumber(timeout) ? timeout : 500;\n      // Hide it and then destroy it (when animation ends)\n      this._searchInfowindow.hide(true);\n      var self = this;\n      setTimeout(function () {\n        if (self._searchInfowindow) {\n          self._searchInfowindow.clean();\n          delete self._searchInfowindow;\n        }\n      }, timeout);\n    }\n  },\n\n  _createPin: function (position, address) {\n    this._searchPin = this.mapView._addGeomToMap(\n      new Geometry({\n        geojson: { type: 'Point', 'coordinates': [position[1], position[0]] },\n        iconUrl: this.options.iconUrl,\n        iconAnchor: this.options.iconAnchor\n      })\n    );\n  },\n\n  _toggleSearchInfowindow: function () {\n    var infowindowVisibility = this._searchInfowindow.model.get('visibility');\n    this._searchInfowindow.model.set('visibility', !infowindowVisibility);\n  },\n\n  _destroyPin: function () {\n    if (this._searchPin) {\n      this.mapView._removeGeomFromMap(this._searchPin);\n      delete this._searchPin;\n    }\n  },\n\n  _bindEvents: function () {\n    this._searchPin && this._searchPin.bind('click', this._toggleSearchInfowindow, this);\n    this.mapView.bind('click', this._destroySearchPin, this);\n  },\n\n  _unbindEvents: function () {\n    this._searchPin && this._searchPin.unbind('click', this._toggleSearchInfowindow, this);\n    this.mapView.unbind('click', this._destroySearchPin, this);\n  },\n\n  clean: function () {\n    this._unbindEvents();\n    this._destroySearchPin();\n    View.prototype.clean.call(this);\n  }\n\n});\n\nmodule.exports = Search;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-infowindow CDB-infowindow--light js-infowindow\"> <div class=\"CDB-infowindow-container\"> <div class=\"CDB-infowindow-inner\"> <div class=\"CDB-infowindow-list\"> <div class=\"CDB-infowindow-listItem\"> <h4 class=\"CDB-infowindow-title\">'+\n((__t=( address ))==null?'':_.escape(__t))+\n'</h4> </div> </div> </div> <div class=\"CDB-hook\"> <div class=\"CDB-hook-inner\"> </div> </div> </div> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Overlay\"> <div class=\"CDB-Search-inner\"> <form class=\"js-form\"> <div class=\"CDB-Search-action\"> <button type=\"button\" class=\"CDB-Shape CDB-Search-actionButton js-toggle\"> <span class=\"CDB-Shape-magnify is-small\"></span> </button> </div> <input type=\"text\" placeholder=\"Search Location\" class=\"CDB-Search-text js-textInput\" value=\"\"> </form> </div> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar View = require('../../core/view');\nvar sanitize = require('../../core/sanitize');\nvar $ = require('jquery');\n\nvar Text = View.extend({\n\n  className: \"cartodb-overlay overlay-text\",\n\n  events: {\n    \"click\": \"stopPropagation\"\n  },\n\n  default_options: { },\n\n  stopPropagation: function(e) {\n\n    e.stopPropagation();\n\n  },\n\n  initialize: function() {\n\n    _.defaults(this.options, this.default_options);\n\n    this.template = this.options.template;\n\n    var self = this;\n\n    $(window).on(\"map_resized\", function() {\n      self._place();\n    });\n\n    $(window).on(\"resize\", function() {\n      self._place();\n    });\n\n  },\n\n  _applyStyle: function() {\n\n    var style      = this.model.get(\"style\");\n\n    var boxColor   = style[\"box-color\"];\n    var boxOpacity = style[\"box-opacity\"];\n    var boxWidth   = style[\"box-width\"];\n    var fontFamily = style[\"font-family-name\"];\n\n    this.$text = this.$el.find(\".text\");\n\n    this.$text.css(style);\n    this.$text.css(\"font-size\", style[\"font-size\"] + \"px\");\n\n    this.$el.css(\"z-index\", style[\"z-index\"]);\n\n    var fontFamilyClass = \"\";\n\n    if      (fontFamily  == \"Droid Sans\")       fontFamilyClass = \"droid\";\n    else if (fontFamily  == \"Vollkorn\")         fontFamilyClass = \"vollkorn\";\n    else if (fontFamily  == \"Open Sans\")        fontFamilyClass = \"open_sans\";\n    else if (fontFamily  == \"Roboto\")           fontFamilyClass = \"roboto\";\n    else if (fontFamily  == \"Lato\")             fontFamilyClass = \"lato\";\n    else if (fontFamily  == \"Graduate\")         fontFamilyClass = \"graduate\";\n    else if (fontFamily  == \"Gravitas One\")     fontFamilyClass = \"gravitas_one\";\n    else if (fontFamily  == \"Old Standard TT\")  fontFamilyClass = \"old_standard_tt\";\n\n    var rgbaCol = 'rgba(' + parseInt(boxColor.slice(-6,-4),16)\n    + ',' + parseInt(boxColor.slice(-4,-2),16)\n    + ',' + parseInt(boxColor.slice(-2),16)\n    +', ' + boxOpacity + ' )';\n\n    this.$el\n    .removeClass(\"droid\")\n    .removeClass(\"vollkorn\")\n    .removeClass(\"roboto\")\n    .removeClass(\"open_sans\")\n    .removeClass(\"lato\")\n    .removeClass(\"graduate\")\n    .removeClass(\"gravitas_one\")\n    .removeClass(\"old_standard_tt\");\n\n    this.$el.addClass(fontFamilyClass);\n    this.$el.css({\n      backgroundColor: rgbaCol,\n      maxWidth:        boxWidth\n    });\n\n  },\n\n  _place: function(position) {\n\n    var extra = position || this.model.get(\"extra\");\n\n    var top   = this.model.get(\"y\");\n    var left  = this.model.get(\"x\");\n\n    var bottom_position = extra.bottom - this.$el.height();\n    var right_position  = extra.right  - this.$el.width();\n\n    // position percentages\n    var top_percentage  = extra.top_percentage;\n    var left_percentage = extra.left_percentage;\n\n    var right  = \"auto\";\n    var bottom = \"auto\";\n\n    var marginTop  = 0;\n    var marginLeft = 0;\n\n    var width  = extra.width;\n    var height = extra.height;\n\n    var portrait_dominant_side  = extra.portrait_dominant_side;\n    var landscape_dominant_side = extra.landscape_dominant_side;\n\n    if (portrait_dominant_side === 'bottom' && bottom_position <= 250) {\n\n      top = \"auto\";\n      bottom = bottom_position;\n\n    } else if (top_percentage > 45 && top_percentage < 55) {\n\n      top = \"50%\";\n      marginTop = -height/2;\n\n    }\n\n    if (landscape_dominant_side === 'right' && right_position <= 250) {\n\n      left = \"auto\";\n      right = right_position;\n\n    } else if (left_percentage > 45 && left_percentage < 55) {\n\n      left = \"50%\";\n      marginLeft = -width/2;\n\n    }\n\n    this.$el.css({\n      marginLeft: marginLeft,\n      marginTop: marginTop,\n      top: top,\n      left: left,\n      right: right,\n      bottom: bottom\n    });\n\n  },\n\n  show: function(callback) {\n    this.$el.fadeIn(150, function() {\n      callback && callback();\n    });\n  },\n\n  hide: function(callback) {\n    this.$el.fadeOut(150, function() {\n      callback && callback();\n    });\n  },\n\n  _fixLinks: function() {\n\n    this.$el.find(\"a\").each(function(i, link) {\n      $(this).attr(\"target\", \"_top\");\n    });\n\n  },\n\n  render: function() {\n    var text = sanitize.html(this.model.get(\"extra\").rendered_text, this.model.get('sanitizeText'));\n    var data = _.chain(this.model.attributes).clone().extend({ text: text }).value();\n    this.$el.html(this.template(data));\n\n    this._fixLinks();\n\n    var self = this;\n    setTimeout(function() {\n      self._applyStyle();\n      self._place();\n      self.show();\n    }, 900);\n\n    return this;\n\n  }\n\n});\n\nmodule.exports = Text;\n",
    "var _ = require('underscore');\nvar View = require('../../core/view');\n\n/**\n * Show or hide tiles loader\n *\n * Usage:\n *\n * var tiles_loader = new TilesLoader();\n * mapWrapper.$el.append(tiles_loader.render().$el);\n */\nvar TilesLoader = View.extend({\n  className: 'CDB-Loader',\n\n  options: {\n    animationSpeed: 500\n  },\n\n  initialize: function () {\n    this.isVisible = 0;\n  },\n\n  render: function () {\n    return this;\n  },\n\n  show: function (ev) {\n    if (this.isVisible) {\n      return;\n    }\n    this.$el.addClass('is-visible');\n    this.isVisible++;\n  },\n\n  hide: function (ev) {\n    this.isVisible--;\n    if (this.isVisible > 0) {\n      return;\n    }\n    this.isVisible = 0;\n    this.$el.removeClass('is-visible');\n  },\n\n  visible: function () {\n    return this.isVisible > 0;\n  }\n\n});\n\nmodule.exports = TilesLoader;\n",
    "var _ = require('underscore');\nvar InfoBox = require('./infobox');\nvar sanitize = require('../../core/sanitize');\nvar InfowindowModel = require('./infowindow-model');\n\nvar Tooltip = InfoBox.extend({\n  defaultTemplate: '<p>{{text}}</p>',\n  className: 'CDB-Tooltip-wrapper',\n\n  defaults: {\n    vertical_offset: 0,\n    horizontal_offset: 0,\n    position: 'top|center'\n  },\n\n  initialize: function () {\n    if (!this.options.mapView) {\n      throw new Error('mapView should be present');\n    }\n    this.options.template = this.options.template || this.defaultTemplate;\n    InfoBox.prototype.initialize.call(this);\n    this._filter = null;\n    this.showing = false;\n    this.showhideTimeout = null;\n  },\n\n  render: function (data) {\n    var sanitizedOutput = sanitize.html(this.template(data));\n    this.$el.html(sanitizedOutput);\n    return this;\n  },\n\n  /**\n   * sets a filter to open the tooltip. If the feature being hovered\n   * pass the filter the tooltip is shown\n   * setFilter(null) removes the filter\n   */\n  setFilter: function (f) {\n    this._filter = f;\n    return this;\n  },\n\n  setFields: function (fields) {\n    this.options.fields = fields;\n    return this;\n  },\n\n  setAlternativeNames: function (n) {\n    this.options.alternative_names = n;\n  },\n\n  enable: function () {\n    if (this.options.layer) {\n      // unbind previous events\n      this.options.layer.unbind(null, null, this);\n      this.options.layer\n        .on('mouseover', function (e, latlng, pos, data) {\n          if (this.options.fields && this.options.fields.length > 0) {\n            var non_valid_keys = ['fields', 'content'];\n\n            if (this.options.omit_columns) {\n              non_valid_keys = non_valid_keys.concat(this.options.omit_columns);\n            }\n\n            var c = InfowindowModel.contentForFields(data, this.options.fields, {\n              empty_fields: this.options.empty_fields\n            });\n\n            // Remove fields and content from data\n            // and make them visible for custom templates\n            data.content = _.omit(data, non_valid_keys);\n\n            // loop through content values\n            data.fields = c.fields;\n\n            // alternamte names\n            var names = this.options.alternative_names;\n            if (names) {\n              for (var i = 0; i < data.fields.length; ++i) {\n                var f = data.fields[i];\n                f.title = names[f.title] || f.title;\n              }\n            }\n            this.show(pos, data);\n            this.showing = true;\n          } else if (this.showing) {\n            this.hide();\n            this.showing = false;\n          }\n        }, this)\n        .on('mouseout', function () {\n          if (this.showing) {\n            this.hide();\n            this.showing = false;\n          }\n        }, this);\n      this.add_related_model(this.options.layer);\n    }\n  },\n\n  disable: function () {\n    if (this.options.layer) {\n      this.options.layer.unbind(null, null, this);\n    }\n    this.hide();\n    this.showing = false;\n  },\n\n  _visibility: function () {\n    var self = this;\n    clearTimeout(this.showhideTimeout);\n    this.showhideTimeout = setTimeout(self._showing ?\n      function () { self.$el.fadeIn(100); }\n      :\n      function () { self.$el.fadeOut(200); }\n      , 50);\n  },\n\n  hide: function () {\n    if (this._showing) {\n      this._showing = false;\n      this._visibility();\n    }\n  },\n\n  show: function (pos, data) {\n    if (this._filter && !this._filter(data)) {\n      return this;\n    }\n    this.render(data);\n    this.setPosition(pos);\n    if (!this._showing) {\n      this._showing = true;\n      this._visibility();\n    }\n    return this;\n  },\n\n  setPosition: function (point) {\n    var pos = this.options.position;\n    var height = this.$el.innerHeight();\n    var width = this.$el.innerWidth();\n    var mapViewSize = this.options.mapView.getSize();\n    var top = 0;\n    var left = 0;\n    var modifierClass = 'CDB-Tooltip-wrapper--';\n\n    // Remove tick class\n    this._removePositionModifiers();\n\n    // Vertically\n    if (pos.indexOf('top') !== -1) {\n      top = point.y - height;\n    } else if (pos.indexOf('middle') !== -1) {\n      top = point.y - (height / 2);\n    } else { // bottom\n      top = point.y;\n    }\n\n    // Fix vertical overflow\n    if (top < 0) {\n      top = point.y;\n      modifierClass += 'top';\n    } else if (top + height > mapViewSize.y) {\n      top = point.y - height;\n      modifierClass += 'bottom';\n    } else {\n      modifierClass += 'top';\n    }\n\n    // Horizontally\n    if (pos.indexOf('left') !== -1) {\n      left = point.x - width;\n    } else if (pos.indexOf('center') !== -1) {\n      left = point.x - (width / 2);\n    } else { // right\n      left = point.x;\n    }\n\n    // Fix horizontal overflow\n    if (left < 0) {\n      left = point.x;\n      modifierClass += 'Left';\n    } else if (left + width > mapViewSize.x) {\n      left = point.x - width;\n      modifierClass += 'Right';\n    } else {\n      modifierClass += 'Left';\n    }\n\n    // Add offsets\n    top += this.options.vertical_offset;\n    left += this.options.horizontal_offset;\n\n    this.$el.css({\n      top: top,\n      left: left\n    }).addClass(modifierClass);\n  },\n\n  _removePositionModifiers: function () {\n    var positions = [ 'topLeft', 'topRight', 'bottomRight', 'bottomLeft' ];\n    var positionModifiers = _.map(positions, function (className) {\n      return this._modifierClassName(className);\n    }, this);\n    this.$el.removeClass(positionModifiers.join(' '));\n  },\n\n  _modifierClassName: function (className) {\n    return this.className + '--' + className;\n  }\n});\n\nmodule.exports = Tooltip;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Overlay\"> <button class=\"CDB-Zoom-action CDB-Zoom-action--out js-zoomOut\"></button> <button class=\"CDB-Zoom-action CDB-Zoom-action--in js-zoomIn\"></button> </div> <div class=\"CDB-Zoom-info js-zoomInfo\">-</div>';\n}\nreturn __p;\n};\n",
    "var View = require('../../../core/view');\nvar template = require('./zoom-template.tpl');\n\n/**\n * View to control the zoom of the map.\n *\n * Usage:\n *\n * var zoomControl = new Zoom({ model: map, template: \"\" });\n * mapWrapper.$el.append(zoomControl.render().$el);\n *\n */\n\nmodule.exports = View.extend({\n  className: 'CDB-Zoom',\n\n  events: {\n    'click .js-zoomIn': '_onZoomIn',\n    'click .js-zoomOut': '_onZoomOut',\n    'dblclick': 'killEvent'\n  },\n\n  options: {\n    timeout: 0,\n    msg: ''\n  },\n\n  initialize: function () {\n    this.map = this.model;\n    this.template = this.options.template || template;\n    this.map.bind('change:zoom change:minZoom change:maxZoom', this._checkZoom, this);\n  },\n\n  render: function () {\n    this.$el.html(this.template(this.options));\n    this._checkZoom();\n    return this;\n  },\n\n  _checkZoom: function () {\n    var zoom = this.map.get('zoom');\n    this.$('.js-zoomIn')[ zoom < this.map.get('maxZoom') ? 'removeClass' : 'addClass' ]('is-disabled');\n    this.$('.js-zoomOut')[ zoom > this.map.get('minZoom') ? 'removeClass' : 'addClass' ]('is-disabled');\n    this.$('.js-zoomInfo').text(zoom);\n  },\n\n  _onZoomIn: function (ev) {\n    this.killEvent(ev);\n\n    if (this.map.get('maxZoom') > this.map.getZoom()) {\n      this.map.setZoom(this.map.getZoom() + 1);\n    }\n  },\n\n  _onZoomOut: function (ev) {\n    this.killEvent(ev);\n\n    if (this.map.get('minZoom') < this.map.getZoom()) {\n      this.map.setZoom(this.map.getZoom() - 1);\n    }\n  }\n\n});\n",
    "var cdb = require('./cartodb.js');\n\nmodule.exports = cdb;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar templates = require('cdb.templates');\nvar View = require('../../core/view');\n\n/**\n * generic dialog\n *\n * this opens a dialog in the middle of the screen rendering\n * a dialog using templates 'common/dialog' or template_base option.\n *\n * inherit class should implement render_content (it could return another widget)\n *\n * usage example:\n *\n *    var MyDialog = Dialog.extend({\n *      render_content: function() {\n *        return \"my content\";\n *      },\n *    })\n *    var dialog = new MyDialog({\n *        title: 'test',\n *        description: 'long description here',\n *        template_base: $('#base_template').html(),\n *        width: 500\n *    });\n *\n *    $('body').append(dialog.render().el);\n *    dialog.open();\n *\n * TODO: implement draggable\n * TODO: modal\n * TODO: document modal_type\n */\nmodule.exports = View.extend({\n\n  tagName: 'div',\n  className: 'dialog',\n\n  events: {\n    'click .ok': '_ok',\n    'click .cancel': '_cancel',\n    'click .close': '_cancel'\n  },\n\n  default_options: {\n    title: 'title',\n    description: '',\n    ok_title: 'Ok',\n    cancel_title: 'Cancel',\n    width: 300,\n    height: 200,\n    clean_on_hide: false,\n    enter_to_confirm: false,\n    template_name: 'old_common/views/dialog_base',\n    ok_button_classes: 'button green',\n    cancel_button_classes: '',\n    modal_type: '',\n    modal_class: '',\n    include_footer: true,\n    additionalButtons: []\n  },\n\n  initialize: function() {\n    _.defaults(this.options, this.default_options);\n\n    _.bindAll(this, 'render', '_keydown');\n\n    // Keydown bindings for the dialog\n    $(document).bind('keydown', this._keydown);\n\n    // After removing the dialog, cleaning other bindings\n    this.bind(\"clean\", this._reClean);\n\n    this.template_base = this.options.template_base ? _.template(this.options.template_base) : templates.getTemplate(this.options.template_name);\n  },\n\n  render: function() {\n    var $el = this.$el;\n\n    $el.html(this.template_base(this.options));\n\n    $el.find(\".modal\").css({\n      width: this.options.width\n      //height: this.options.height\n      //'margin-left': -this.options.width>>1,\n      //'margin-top': -this.options.height>>1\n    });\n\n    if(this.render_content) {\n\n      this.$('.content').append(this.render_content());\n    }\n\n    if(this.options.modal_class) {\n      this.$el.addClass(this.options.modal_class);\n    }\n\n    return this;\n  },\n\n\n  _keydown: function(e) {\n    // If clicks esc, goodbye!\n    if (e.keyCode === 27) {\n      this._cancel();\n    // If clicks enter, same as you click on ok button.\n    } else if (e.keyCode === 13 && this.options.enter_to_confirm) {\n      this._ok();\n    }\n  },\n\n  /**\n   * helper method that renders the dialog and appends it to body\n   */\n  appendToBody: function() {\n    $('body').append(this.render().el);\n    return this;\n  },\n\n  _ok: function(ev) {\n\n   if(ev) ev.preventDefault();\n\n    if (this.ok) {\n      this.ok(this.result);\n    }\n\n    this.hide();\n\n  },\n\n  _cancel: function(ev) {\n\n    if (ev) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n\n    if (this.cancel) {\n      this.cancel();\n    }\n\n    this.hide();\n\n  },\n\n  hide: function() {\n\n    this.$el.hide();\n\n    if (this.options.clean_on_hide) {\n      this.clean();\n    }\n\n  },\n\n  open: function() {\n\n    this.$el.show();\n\n  },\n\n  _reClean: function() {\n\n    $(document).unbind('keydown', this._keydown);\n\n  }\n\n});\n",
    "var $ = require('jquery');\nvar cdb = require('cdb');\nvar _ = require('underscore');\nvar templates = require('cdb.templates');\nvar View = require('../../core/view');\n\n/**\n * Show a dropdown from the target\n *\n * It shows the several options of the user settings\n *\n * usage example:\n *\n *    var settings = new Dropdown({\n *        el: \"#settings_element\",\n *        speedIn: 300,\n *        speedOut: 200\n *    });\n *    // show it\n *    settings.show();\n *    // close it\n *    settings.close();\n */\nvar Dropdown = View.extend({\n\n  tagName: 'div',\n  className: 'dropdown',\n\n  events: {\n    \"click ul li a\" : \"_fireClick\"\n  },\n\n  default_options: {\n    width: 160,\n    speedIn: 150,\n    speedOut: 300,\n    vertical_position: \"down\",\n    horizontal_position: \"right\",\n    tick: \"right\",\n    vertical_offset: 0,\n    horizontal_offset: 0\n  },\n\n  initialize: function() {\n    _.bindAll(this, \"open\", \"hide\", \"_handleClick\", \"_keydown\");\n\n    // Extend options\n    _.defaults(this.options, this.default_options);\n\n    // Dropdown template\n    if (this.options.template_base) {\n      this.template_base = templates.getTemplate(this.options.template_base);\n    } else if (this.options.template) {\n      this.template_base = this.options.template;\n    }\n\n    // Bind to target\n    $(this.options.target).bind({\"click\": this._handleClick});\n\n    // Bind ESC key\n    $(document).bind('keydown', this._keydown);\n\n    // Is open flag\n    this.isOpen = false;\n\n  },\n\n  render: function() {\n    // Render\n    var $el = this.$el;\n    $el\n      .html(this.template_base(this.options))\n      .css({\n        width: this.options.width\n      })\n    return this;\n  },\n\n  _handleClick: function(ev) {\n    //Check if the dropdown is visible to hiding with the click on the target\n    if (ev){\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n    // If visible\n    if (this.isOpen){\n      this.hide();\n    }else{\n      this.open();\n    }\n  },\n\n  _keydown: function(e) {\n    if (e.keyCode === 27) {\n      this.hide();\n    }\n  },\n\n  hide: function() {\n    this.isOpen = false;\n    this.$el.hide();\n  },\n\n  show: function() {\n    this.$el.css({\n      display: \"block\",\n      opacity: 1\n    });\n    this.isOpen = true;\n  },\n\n  open: function(ev,target) {\n    // Target\n    var $target = target && $(target) || this.options.target;\n    this.options.target = $target;\n\n    // Positionate\n    var targetPos     = $target[this.options.position || 'offset']()\n      , targetWidth   = $target.outerWidth()\n      , targetHeight  = $target.outerHeight()\n      , elementWidth  = this.$el.outerWidth()\n      , elementHeight = this.$el.outerHeight()\n      , self = this;\n\n    this.$el.css({\n      top: targetPos.top + parseInt((self.options.vertical_position == \"up\") ? (- elementHeight - 10 - self.options.vertical_offset) : (targetHeight + 10 - self.options.vertical_offset)),\n      left: targetPos.left + parseInt((self.options.horizontal_position == \"left\") ? (self.options.horizontal_offset - 15) : (targetWidth - elementWidth + 15 - self.options.horizontal_offset))\n    })\n    .addClass(\n      // Add vertical and horizontal position class\n      (this.options.vertical_position == \"up\" ? \"vertical_top\" : \"vertical_bottom\" )\n      + \" \" +\n      (this.options.horizontal_position == \"right\" ? \"horizontal_right\" : \"horizontal_left\" )\n      + \" \" +\n      // Add tick class\n      \"tick_\" + this.options.tick\n    )\n\n    // Show it\n    this.show();\n\n    // Dropdown openned\n    this.isOpen = true;\n  },\n\n  clean: function() {\n    $(this.options.target).unbind({\"click\": this._handleClick});\n    $(document).unbind('keydown', this._keydown);\n    View.prototype.clean.apply(this, arguments);\n  },\n\n  _fireClick: function(ev) {\n    this.trigger(\"optionClicked\", ev, this.el);\n  }\n});\n\nmodule.exports = Dropdown;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<a href=\"'+\n((__t=( mapUrl ))==null?'':__t)+\n'\" target=\"_blank\"> <div class=\"CDB-Shape-Arrow is-up\"></div> <div class=\"CDB-Shape-Arrow is-down\"></div> </a>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar log = require('cdb.log');\nvar View = require('../../../core/view');\nvar template = require('./fullscreen-template.tpl');\n\n/**\n *  FullScreen widget:\n *\n *  var widget = new FullScreen({\n *    doc: \".container\", // optional; if not specified, we do the fullscreen of the whole window\n *    template: this.getTemplate(\"table/views/fullscreen\")\n *  });\n *\n */\nvar FullScreen = View.extend({\n  tagName: 'div',\n  className: 'CDB-Fullscreen',\n\n  events: {\n    'click': '_toggleFullScreen'\n  },\n\n  initialize: function () {\n    _.bindAll(this, 'render');\n    this.template = this.options.template || template;\n    this._addWheelEvent();\n  },\n\n  render: function () {\n    var options = _.extend(\n      this.options,\n      {\n        mapUrl: window.location.href || ''\n      }\n    );\n    this.$el.html(this.template(options));\n\n    if (!this._canFullScreenBeEnabled()) {\n      this.undelegateEvents();\n      log.info('FullScreen API is deprecated on insecure origins. See https://goo.gl/rStTGz for more details.');\n    }\n\n    return this;\n  },\n\n  _addWheelEvent: function () {\n    var self = this;\n    var mapView = this.options.mapView;\n\n    $(document).on('webkitfullscreenchange mozfullscreenchange fullscreenchange', function () {\n      if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement) {\n        if (self.options.allowWheelOnFullscreen) {\n          mapView.options.map.set('scrollwheel', false);\n        }\n      }\n      mapView.invalidateSize();\n    });\n  },\n\n  _toggleFullScreen: function (ev) {\n    if (ev) {\n      this.killEvent(ev);\n    }\n\n    var doc = window.document;\n    var docEl = doc.documentElement;\n\n    if (this.options.doc) { // we use a custom element\n      docEl = this.options.doc;\n    }\n\n    var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;\n    var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;\n    var mapView = this.options.mapView;\n\n    if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {\n      if (docEl.webkitRequestFullScreen) {\n        // Cartodb.js #361 :: Full screen button not working on Safari 8.0.3 #361\n        // Safari has a bug that fullScreen doestn't work with Element.ALLOW_KEYBOARD_INPUT);\n        // Reference: Ehttp://stackoverflow.com/questions/8427413/webkitrequestfullscreen-fails-when-passing-element-allow-keyboard-input-in-safar\n        requestFullScreen.call(docEl, undefined);\n      } else {\n        // CartoDB.js #412 :: Fullscreen button is throwing errors\n        // Nowadays (2015/03/25), fullscreen is not supported in iOS Safari. Reference: http://caniuse.com/#feat=fullscreen\n        if (requestFullScreen) {\n          requestFullScreen.call(docEl);\n        }\n      }\n\n      if (mapView && this.options.allowWheelOnFullscreen) {\n        mapView.map.set('scrollwheel', true);\n      }\n    } else {\n      cancelFullScreen.call(doc);\n    }\n  },\n\n  _canFullScreenBeEnabled: function () {\n    if (this._isInIframe()) {\n      var parentUrl = document.referrer;\n      if (parentUrl.search('https:') !== 0) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  _isInIframe: function () {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  }\n});\n\nmodule.exports = FullScreen;\n",
    "var _ = require('underscore');\nvar templates = require('cdb.templates');\nvar View = require('../../core/view');\n\n/**\n * generic embed notification, like twitter \"new notifications\"\n *\n * it shows slowly the notification with a message and a close button.\n * Optionally you can set a timeout to close\n *\n * usage example:\n *\n      var notification = new Notification({\n          el: \"#notification_element\",\n          msg: \"error!\",\n          timeout: 1000\n      });\n      notification.show();\n      // close it\n      notification.close();\n */\nvar Notification = View.extend({\n\n  tagName: 'div',\n  className: 'dialog',\n\n  events: {\n    'click .close': 'hide'\n  },\n\n  default_options: {\n      timeout: 0,\n      msg: '',\n      hideMethod: '',\n      duration: 'normal'\n  },\n\n  initialize: function() {\n    this.closeTimeout = -1;\n    _.defaults(this.options, this.default_options);\n    this.template = this.options.template ? _.template(this.options.template) : templates.getTemplate('common/notification');\n\n    this.$el.hide();\n  },\n\n  render: function() {\n    var $el = this.$el;\n    $el.html(this.template(this.options));\n    if(this.render_content) {\n      this.$('.content').append(this.render_content());\n    }\n    return this;\n  },\n\n  hide: function(ev) {\n    var self = this;\n    if (ev)\n      ev.preventDefault();\n    clearTimeout(this.closeTimeout);\n    if(this.options.hideMethod != '' && this.$el.is(\":visible\") ) {\n      this.$el[this.options.hideMethod](this.options.duration, 'swing', function() {\n        self.$el.html('');\n        self.trigger('notificationDeleted');\n        self.remove();\n      });\n    } else {\n      this.$el.hide();\n      self.$el.html('');\n      self.trigger('notificationDeleted');\n      self.remove();\n    }\n\n  },\n\n  open: function(method, options) {\n    this.render();\n    this.$el.show(method, options);\n    if(this.options.timeout) {\n        this.closeTimeout = setTimeout(_.bind(this.hide, this), this.options.timeout);\n    }\n  }\n\n});\n\nmodule.exports = Notification;\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar View = require('../../core/view');\nvar RowView = require('./table/row-view');\n\n/**\n * generic table\n *\n * this class creates a HTML table based on Table model (see below) and modify it based on model changes\n *\n * usage example:\n *\n      var table = new Table({\n          model: table\n      });\n\n      $('body').append(table.render().el);\n\n  * model should be a collection of Rows\n * render a table\n * this widget needs two data sources\n * - the table model which contains information about the table (columns and so on). See TableProperties\n * - the model with the data itself (TableData)\n */\nvar Table = View.extend({\n\n  tagName: 'table',\n  rowView: RowView,\n\n  events: {\n      'click td': '_cellClick',\n      'dblclick td': '_cellDblClick'\n  },\n\n  default_options: {\n  },\n\n  initialize: function() {\n    var self = this;\n    _.defaults(this.options, this.default_options);\n    this.dataModel = this.options.dataModel;\n    this.rowViews = [];\n\n    // binding\n    this.setDataSource(this.dataModel);\n    this.model.bind('change', this.render, this);\n    this.model.bind('change:dataSource', this.setDataSource, this);\n\n    // assert the rows are removed when table is removed\n    this.bind('clean', this.clear_rows, this);\n\n    // prepare for cleaning\n    this.add_related_model(this.dataModel);\n    this.add_related_model(this.model);\n\n    // we need to use custom signals to make the tableview aware of a row being deleted,\n    // because when you delete a point from the map view, sometimes it isn't on the dataModel\n    // collection, so its destroy doesn't bubble throught there.\n    // Also, the only non-custom way to acknowledge that a row has been correctly deleted from a server is with\n    // a sync, that doesn't bubble through the table\n    this.model.bind('removing:row', function() {\n      self.rowsBeingDeleted = self.rowsBeingDeleted ? self.rowsBeingDeleted +1 : 1;\n      self.rowDestroying();\n    });\n    this.model.bind('remove:row', function() {\n      if(self.rowsBeingDeleted > 0) {\n        self.rowsBeingDeleted--;\n        self.rowDestroyed();\n        if(self.dataModel.length == 0) {\n          self.emptyTable();\n        }\n      }\n    });\n\n  },\n\n  headerView: function(column) {\n      return column[0];\n  },\n\n  setDataSource: function(dm) {\n    if(this.dataModel) {\n      this.dataModel.unbind(null, null, this);\n    }\n    this.dataModel = dm;\n    this.dataModel.bind('reset', this._renderRows, this);\n    this.dataModel.bind('error', this._renderRows, this);\n    this.dataModel.bind('add', this.addRow, this);\n  },\n\n  _renderHeader: function() {\n    var self = this;\n    var thead = $(\"<thead>\");\n    var tr = $(\"<tr>\");\n    if(this.options.row_header) {\n      tr.append($(\"<th>\").append(self.headerView(['', 'header'])));\n    } else {\n      tr.append($(\"<th>\").append(self.headerView(['', 'header'])));\n    }\n    _(this.model.get('schema')).each(function(col) {\n      tr.append($(\"<th>\").append(self.headerView(col)));\n    });\n    thead.append(tr);\n    return thead;\n  },\n\n  /**\n   * remove all rows\n   */\n  clear_rows: function() {\n    this.$('tfoot').remove();\n    this.$('tr.noRows').remove();\n\n    // unbind rows before cleaning them when all are gonna be removed\n    var rowView = null;\n    while(rowView = this.rowViews.pop()) {\n      // this is a hack to avoid all the elements are removed one by one\n      rowView.unbind(null, null, this);\n      // each element removes itself from rowViews\n      rowView.clean();\n    }\n    // clean all the html at the same time\n    this.rowViews = [];\n  },\n\n  /**\n   * add rows\n   */\n  addRow: function(row, collection, options) {\n    var self = this;\n    var tr = new self.rowView({\n      model: row,\n      order: this.model.columnNames(),\n      row_header: this.options.row_header\n    });\n    tr.tableView = this;\n\n    tr.bind('clean', function() {\n      var idx = _.indexOf(self.rowViews, tr);\n      self.rowViews.splice(idx, 1);\n      // update index\n      for(var i = idx; i < self.rowViews.length; ++i) {\n        self.rowViews[i].$el.attr('data-y', i);\n      }\n    }, this);\n    tr.bind('changeRow', this.rowChanged, this);\n    tr.bind('saved', this.rowSynched, this);\n    tr.bind('errorSaving', this.rowFailed, this);\n    tr.bind('saving', this.rowSaving, this);\n    this.retrigger('saving', tr);\n\n    tr.render();\n    if(options && options.index !== undefined && options.index != self.rowViews.length) {\n\n      tr.$el.insertBefore(self.rowViews[options.index].$el);\n      self.rowViews.splice(options.index, 0, tr);\n      //tr.$el.attr('data-y', options.index);\n      // change others view data-y attribute\n      for(var i = options.index; i < self.rowViews.length; ++i) {\n        self.rowViews[i].$el.attr('data-y', i);\n      }\n    } else {\n      // at the end\n      tr.$el.attr('data-y', self.rowViews.length);\n      self.$el.append(tr.el);\n      self.rowViews.push(tr);\n    }\n\n    this.trigger('createRow');\n  },\n\n  /**\n  * Callback executed when a row change\n  * @method rowChanged\n  * @abstract\n  */\n  rowChanged: function() {},\n\n  /**\n  * Callback executed when a row is sync\n  * @method rowSynched\n  * @abstract\n  */\n  rowSynched: function() {},\n\n  /**\n  * Callback executed when a row fails to reach the server\n  * @method rowFailed\n  * @abstract\n  */\n  rowFailed: function() {},\n\n  /**\n  * Callback executed when a row send a POST to the server\n  * @abstract\n  */\n  rowSaving: function() {},\n\n  /**\n  * Callback executed when a row is being destroyed\n  * @method rowDestroyed\n  * @abstract\n  */\n  rowDestroying: function() {},\n\n  /**\n  * Callback executed when a row gets destroyed\n  * @method rowDestroyed\n  * @abstract\n  */\n  rowDestroyed: function() {},\n\n  /**\n  * Callback executed when a row gets destroyed and the table data is empty\n  * @method emptyTable\n  * @abstract\n  */\n  emptyTable: function() {},\n\n  /**\n  * Checks if the table is empty\n  * @method isEmptyTable\n  * @returns boolean\n  */\n  isEmptyTable: function() {\n    return (this.dataModel.length === 0 && this.dataModel.fetched)\n  },\n\n  /**\n   * render only data rows\n   */\n  _renderRows: function() {\n    this.clear_rows();\n    if(! this.isEmptyTable()) {\n      if(this.dataModel.fetched) {\n        var self = this;\n\n        this.dataModel.each(function(row) {\n          self.addRow(row);\n        });\n      } else {\n        this._renderLoading();\n      }\n    } else {\n      this._renderEmpty();\n    }\n\n  },\n\n  _renderLoading: function() {\n  },\n\n  _renderEmpty: function() {\n  },\n\n  /**\n  * Method for the children to redefine with the table behaviour when it has no rows.\n  * @method addEmptyTableInfo\n  * @abstract\n  */\n  addEmptyTableInfo: function() {\n    // #to be overwrite by descendant classes\n  },\n\n  /**\n   * render table\n   */\n  render: function() {\n    var self = this;\n\n    // render header\n    self.$el.html(self._renderHeader());\n\n    // render data\n    self._renderRows();\n\n    return this;\n\n  },\n\n  /**\n   * return jquery cell element of cell x,y\n   */\n  getCell: function(x, y) {\n    if(this.options.row_header) {\n      ++y;\n    }\n    return this.rowViews[y].getCell(x);\n  },\n\n  _cellClick: function(e, evtName) {\n    evtName = evtName || 'cellClick';\n    e.preventDefault();\n    var cell = $(e.currentTarget || e.target);\n    var x = parseInt(cell.attr('data-x'), 10);\n    var y = parseInt(cell.parent().attr('data-y'), 10);\n    this.trigger(evtName, e, cell, x, y);\n  },\n\n  _cellDblClick: function(e) {\n    this._cellClick(e, 'cellDblClick');\n  }\n\n\n});\n\nmodule.exports = Table;\n",
    "var _ = require('underscore');\nvar View = require('../../../core/view');\n\n/**\n * renders a table row\n */\nvar RowView = View.extend({\n  tagName: 'tr',\n\n  initialize: function() {\n\n    this.model.bind('change', this.render, this);\n    this.model.bind('destroy', this.clean, this);\n    this.model.bind('remove', this.clean, this);\n    this.model.bind('change', this.triggerChange, this);\n    this.model.bind('sync', this.triggerSync, this);\n    this.model.bind('error', this.triggerError, this);\n\n    this.add_related_model(this.model);\n    this.order = this.options.order;\n  },\n\n  triggerChange: function() {\n    this.trigger('changeRow');\n  },\n\n  triggerSync: function() {\n    this.trigger('syncRow');\n  },\n\n  triggerError: function() {\n    this.trigger('errorRow')\n  },\n\n  valueView: function(colName, value) {\n    return value;\n  },\n\n  render: function() {\n    var self = this;\n    var row = this.model;\n\n    var tr = '';\n\n    var tdIndex = 0;\n    var td;\n    if(this.options.row_header) {\n        td = '<td class=\"rowHeader\" data-x=\"' + tdIndex + '\">';\n    } else {\n        td = '<td class=\"EmptyRowHeader\" data-x=\"' + tdIndex + '\">';\n    }\n    var v = self.valueView('', '');\n    if(v.html) {\n      v = v[0].outerHTML;\n    }\n    td += v;\n    td += '</td>';\n    tdIndex++;\n    tr += td\n\n    var attrs = this.order || _.keys(row.attributes);\n    var tds = '';\n    var row_attrs = row.attributes;\n    for(var i = 0, len = attrs.length; i < len; ++i) {\n      var key = attrs[i];\n      var value = row_attrs[key];\n      if(value !== undefined) {\n        var td = '<td id=\"cell_' + row.id + '_' + key + '\" data-x=\"' + tdIndex + '\">';\n        var v = self.valueView(key, value);\n        if(v.html) {\n          v = v[0].outerHTML;\n        }\n        td += v;\n        td += '</td>';\n        tdIndex++;\n        tds += td;\n      }\n    }\n    tr += tds;\n    this.$el.html(tr).attr('id', 'row_' + row.id);\n    return this;\n  },\n\n  getCell: function(x) {\n    var childNo = x;\n    if(this.options.row_header) {\n      ++x;\n    }\n    return this.$('td:eq(' + x + ')');\n  },\n\n  getTableView: function() {\n    return this.tableView;\n  }\n\n});\n\nmodule.exports = RowView;\n",
    "var Model = require('../../../core/model');\n\n/**\n * represents a table row\n */\nvar Row = Model.extend({\n});\n\nmodule.exports = Row;\n",
    "var Backbone = require('backbone');\nvar Row = require('./row');\n\nvar TableData = Backbone.Collection.extend({\n    model: Row,\n    fetched: false,\n\n    initialize: function() {\n      var self = this;\n      this.bind('reset', function() {\n        self.fetched = true;\n      })\n    },\n\n    /**\n     * get value for row index and columnName\n     */\n    getCell: function(index, columnName) {\n      var r = this.at(index);\n      if(!r) {\n        return null;\n      }\n      return r.get(columnName);\n    },\n\n    isEmpty: function() {\n      return this.length === 0;\n    }\n\n});\n\nmodule.exports = TableData;\n",
    "var _ = require('underscore');\nvar Model = require('../../../core/model');\n\n/**\n * contains information about the table, mainly the schema\n */\nvar TableProperties = Model.extend({\n\n  columnNames: function() {\n    return _.map(this.get('schema'), function(c) {\n      return c[0];\n    });\n  },\n\n  columnName: function(idx) {\n    return this.columnNames()[idx];\n  }\n});\n\nmodule.exports = TableProperties;\n",
    "var Backbone = require('backbone');\n\n/**\n * Abort ongoing request if it exists\n */\nmodule.exports = function (method, model, options) {\n  var self = arguments[1];\n\n  if (this._xhr) {\n    this._xhr.abort();\n  }\n  this._xhr = Backbone.sync.apply(this, arguments);\n  this._xhr.always(function () {\n    self._xhr = null;\n  });\n  return this._xhr;\n};\n",
    "var _ = require('underscore');\nvar Overlay = require('./vis/overlay');\nvar InfowindowModel = require('../geo/ui/infowindow-model');\n\n/**\n * Manages the infowindows for a map. It listens to changes on the collection\n * of layers and binds a new infowindow view/model to CartoDB.js whenever the\n * collection of layers changes\n */\nvar InfowindowManager = function (vis) {\n  this._vis = vis;\n};\n\nInfowindowManager.prototype.manage = function (mapView, map) {\n  this._mapView = mapView;\n  this._map = map;\n\n  this._map.layers.bind('reset', function (layers) {\n    layers.each(this._addInfowindowForLayer, this);\n  }, this);\n  this._map.layers.bind('add', this._addInfowindowForLayer, this);\n};\n\nInfowindowManager.prototype._addInfowindowForLayer = function (layerModel) {\n  if (layerModel.getInfowindowData && layerModel.getInfowindowData()) {\n    var layerView = this._mapView.getLayerViewByLayerCid(layerModel.cid);\n\n    if (!layerView.infowindowView) {\n      this._addInfowindowOverlay(layerView, layerModel);\n      this._bindFeatureClickEvent(layerView);\n    }\n\n    layerView.bind('mouseover', function () {\n      this._mapView.setCursor('pointer');\n    }, this);\n\n    layerView.bind('mouseout', function (m, layer) {\n      this._mapView.setCursor('auto');\n    }, this);\n  }\n};\n\nInfowindowManager.prototype._addInfowindowOverlay = function (layerView, layerModel) {\n  var infowindowView = layerView.infowindowView;\n  if (!infowindowView) {\n    layerView.infowindowView = infowindowView = Overlay.create('infowindow', this._vis, layerModel.getInfowindowData());\n    this._mapView.addInfowindow(infowindowView);\n  }\n};\n\nInfowindowManager.prototype._bindFeatureClickEvent = function (layerView) {\n  var infowindowView = layerView.infowindowView;\n\n  layerView.bind('featureClick', function (e, latlng, pos, data, layerIndex) {\n    var layerModel = layerView.model;\n    if (layerModel.layers) {\n      layerModel = layerModel.layers.at(layerIndex);\n    }\n    if (!layerModel) {\n      throw new Error('featureClick event for layer ' + layerIndex + ' was captured but layerModel coudn\\'t be retrieved');\n    }\n\n    var infowindowFields = layerModel.getInfowindowData();\n    if (!infowindowFields) {\n      return;\n    }\n    var cartoDBId = data.cartodb_id;\n\n    layerView.model.fetchAttributes(layerIndex, cartoDBId, function (attributes) {\n      // Old viz.json doesn't contain width and maxHeight properties\n      // and we have to get the default values if there are not defined.\n      var extra = _.defaults(\n        {\n          offset: infowindowFields.offset,\n          width: infowindowFields.width,\n          maxHeight: infowindowFields.maxHeight\n        },\n        InfowindowModel.prototype.defaults\n      );\n\n      infowindowView.model.set({\n        'fields': infowindowFields.fields,\n        'template': infowindowFields.template,\n        'template_type': infowindowFields.template_type,\n        'alternative_names': infowindowFields.alternative_names,\n        'sanitizeTemplate': infowindowFields.sanitizeTemplate,\n        'offset': extra.offset,\n        'width': extra.width,\n        'maxHeight': extra.maxHeight\n      });\n\n      if (attributes) {\n        infowindowView.model.updateContent(attributes);\n        infowindowView.adjustPan();\n      } else {\n        infowindowView.setError();\n      }\n    });\n\n    // Show infowindow with loading state\n    infowindowView\n      .setLatLng(latlng)\n      .setLoading()\n      .showInfowindow();\n\n    if (layerView.tooltipView) {\n      layerView.tooltipView.setFilter(function (feature) {\n        return feature.cartodb_id !== cartoDBId;\n      }).hide();\n    }\n  });\n};\n\nmodule.exports = InfowindowManager;\n",
    "var Layers = require('./vis/layers');\nvar TileLayer = require('../geo/map/tile-layer');\nvar WMSLayer = require('../geo/map/wms-layer');\nvar GMapsBaseLayer = require('../geo/map/gmaps-base-layer');\nvar PlainLayer = require('../geo/map/plain-layer');\nvar CartoDBLayer = require('../geo/map/cartodb-layer');\nvar TorqueLayer = require('../geo/map/torque-layer');\n\n/*\n *  if we are using http and the tiles of base map need to be fetched from\n *  https try to fix it\n */\nvar HTTPS_TO_HTTP = {\n  'https://dnv9my2eseobd.cloudfront.net/': 'http://a.tiles.mapbox.com/',\n  'https://maps.nlp.nokia.com/': 'http://maps.nlp.nokia.com/',\n  'https://tile.stamen.com/': 'http://tile.stamen.com/',\n  'https://{s}.maps.nlp.nokia.com/': 'http://{s}.maps.nlp.nokia.com/',\n  'https://cartocdn_{s}.global.ssl.fastly.net/': 'http://{s}.api.cartocdn.com/',\n  'https://cartodb-basemaps-{s}.global.ssl.fastly.net/': 'http://{s}.basemaps.cartocdn.com/'\n};\n\nfunction transformToHTTP (tilesTemplate) {\n  for (var url in HTTPS_TO_HTTP) {\n    if (tilesTemplate.indexOf(url) !== -1) {\n      return tilesTemplate.replace(url, HTTPS_TO_HTTP[url]);\n    }\n  }\n  return tilesTemplate;\n}\n\nfunction transformToHTTPS (tilesTemplate) {\n  for (var url in HTTPS_TO_HTTP) {\n    var httpsUrl = HTTPS_TO_HTTP[url];\n    if (tilesTemplate.indexOf(httpsUrl) !== -1) {\n      return tilesTemplate.replace(httpsUrl, url);\n    }\n  }\n  return tilesTemplate;\n}\n\nLayers.register('tilejson', function (data, options) {\n  var url = data.tiles[0];\n  if (options.https === true) {\n    url = transformToHTTPS(url);\n  } else if (options.https === false) { // Checking for an explicit false value. If it's undefined the url is left as is.\n    url = transformToHTTP(url);\n  }\n  return new TileLayer({\n    urlTemplate: url\n  }, {\n    map: options.map\n  });\n});\n\nLayers.register('tiled', function (data, options) {\n  var url = data.urlTemplate;\n  if (options.https === true) {\n    url = transformToHTTPS(url);\n  } else if (options.https === false) { // Checking for an explicit false value. If it's undefined the url is left as is.\n    url = transformToHTTP(url);\n  }\n\n  data.urlTemplate = url;\n  return new TileLayer(data);\n});\n\nLayers.register('wms', function (data, options) {\n  return new WMSLayer(data);\n});\n\nLayers.register('gmapsbase', function (data, options) {\n  return new GMapsBaseLayer(data);\n});\n\nLayers.register('plain', function (data, options) {\n  return new PlainLayer(data);\n});\n\nLayers.register('background', function (data, options) {\n  return new PlainLayer(data);\n});\n\nLayers.register('cartodb', function (data, options) {\n  normalizeOptions(data, options);\n  return new CartoDBLayer(data, {\n    map: options.map\n  });\n});\n\nLayers.register('torque', function (data, options) {\n  normalizeOptions(data, options);\n  // default is https\n  if (options.https) {\n    if (data.sql_api_domain && data.sql_api_domain.indexOf('cartodb.com') !== -1) {\n      data.sql_api_protocol = 'https';\n      data.sql_api_port = 443;\n      data.tiler_protocol = 'https';\n      data.tiler_port = 443;\n    }\n  }\n  return new TorqueLayer(data, {\n    map: options.map\n  });\n});\n\nfunction normalizeOptions (data, options) {\n  if (data.infowindow && data.infowindow.fields) {\n    if (data.interactivity) {\n      if (data.interactivity.indexOf('cartodb_id') === -1) {\n        data.interactivity = data.interactivity + ',cartodb_id';\n      }\n    } else {\n      data.interactivity = 'cartodb_id';\n    }\n  }\n}\n\nmodule.exports = Layers;\n",
    "var _ = require('underscore');\nvar Overlay = require('./vis/overlay');\nvar Model = require('../core/model');\nvar Template = require('../core/template');\nvar Annotation = require('../geo/ui/annotation');\nvar Header = require('../geo/ui/header');\nvar InfoBox = require('../geo/ui/infobox');\nvar Infowindow = require('../geo/ui/infowindow');\nvar InfowindowModel = require('../geo/ui/infowindow-model');\nvar LayerSelector = require('../geo/ui/layer-selector');\nvar Search = require('../geo/ui/search/search');\nvar Text = require('../geo/ui/text');\nvar TilesLoader = require('../geo/ui/tiles-loader');\nvar Tooltip = require('../geo/ui/tooltip');\nvar Zoom = require('../geo/ui/zoom/zoom-view');\nvar FullScreen = require('../ui/common/fullscreen/fullscreen-view');\nvar Attribution = require('../geo/ui/attribution/attribution-view');\n\nOverlay.register('logo', function (data, vis) {});\n\nOverlay.register('attribution', function (data, vis) {\n  var overlay = new Attribution({\n    map: data.map\n  });\n\n  return overlay.render();\n});\n\nOverlay.register('text', function (data, vis) {\n  var options = data.options;\n\n  var template = Template.compile(\n    data.template || '\\\n    <div class=\"content\">\\\n    <div class=\"text widget_text\">{{{ text }}}</div>\\\n    </div>',\n    data.templateType || 'mustache'\n  );\n\n  var widget = new Text({\n    model: new Model(options),\n    template: template,\n    className: 'cartodb-overlay overlay-text ' + options.device\n  });\n\n  return widget.render();\n\n});\n\nOverlay.register('annotation', function (data, vis) {\n  var options = data.options;\n\n  var template = Template.compile(\n    data.template || '\\\n    <div class=\"content\">\\\n    <div class=\"text widget_text\">{{{ text }}}</div>\\\n    <div class=\"stick\"><div class=\"ball\"></div></div>\\\n    </div>',\n    data.templateType || 'mustache'\n  );\n\n  var options = data.options;\n\n  var widget = new Annotation({\n    className: 'cartodb-overlay overlay-annotation ' + options.device,\n    template: template,\n    mapView: vis.mapView,\n    device: options.device,\n    text: options.extra.rendered_text,\n    minZoom: options.style['min-zoom'],\n    maxZoom: options.style['max-zoom'],\n    latlng: options.extra.latlng,\n    style: options.style\n  });\n\n  return widget.render();\n\n});\n\nOverlay.register('header', function (data, vis) {\n  var options = data.options;\n\n  var template = Template.compile(\n    data.template || '\\\n    <div class=\"content\">\\\n    <div class=\"title\">{{{ title }}}</div>\\\n    <div class=\"description\">{{{ description }}}</div>\\\n    </div>',\n    data.templateType || 'mustache'\n  );\n\n  var widget = new Header({\n    model: new Model(options),\n    template: template\n  });\n\n  return widget.render();\n\n});\n\n// map zoom control\nOverlay.register('zoom', function (data, vis) {\n  var opts = {\n    model: data.map\n  };\n\n  var zoom = new Zoom(opts);\n  return zoom.render();\n});\n\n// Tiles loader\nOverlay.register('loader', function (data) {\n  var tilesLoader = new TilesLoader();\n  return tilesLoader.render();\n});\n\n// Header to show informtion (title and description)\nOverlay.register('_header', function (data, vis) {\n  var MAX_SHORT_DESCRIPTION_LENGTH = 100;\n\n  // Add the complete url for facebook and twitter\n  if (location.href) {\n    data.share_url = encodeURIComponent(location.href);\n  } else {\n    data.share_url = data.url;\n  }\n\n  var template = Template.compile(\n    data.template || '\\\n      {{#title}}\\\n        <h1>\\\n          {{#url}}\\\n            <a href=\\'#\\' onmousedown=\"window.open(\\'{{url}}\\')\">{{title}}</a>\\\n          {{/url}}\\\n          {{^url}}\\\n            {{title}}\\\n          {{/url}}\\\n        </h1>\\\n      {{/title}}\\\n      {{#description}}<p>{{{description}}}</p>{{/description}}\\\n      {{#mobile_shareable}}\\\n        <div class=\\'social\\'>\\\n          <a class=\\'facebook\\' target=\\'_blank\\'\\\n            href=\\'http://www.facebook.com/sharer.php?u={{share_url}}&text=Map of {{title}}: {{description}}\\'>F</a>\\\n          <a class=\\'twitter\\' href=\\'https://twitter.com/share?url={{share_url}}&text={{twitter_title}}\\'\\\n           target=\\'_blank\\'>T</a>\\\n        </div>\\\n      {{/mobile_shareable}}\\\n    ',\n    data.templateType || 'mustache'\n  );\n\n  function truncate (s, length) {\n    return s.substr(0, length - 1) + (s.length > length ? '…' : '');\n  }\n\n  var title = data.map.get('title');\n  var description = data.map.get('description');\n\n  var facebook_title = title + ': ' + description;\n  var twitter_title;\n\n  if (title && description) {\n    twitter_title = truncate(title + ': ' + description, 112) + ' %23map ';\n  } else if (title) {\n    twitter_title = truncate(title, 112) + ' %23map';\n  } else if (description) {\n    twitter_title = truncate(description, 112) + ' %23map';\n  } else {\n    twitter_title = '%23map';\n  }\n\n  var shareable = (data.shareable == 'false' || !data.shareable) ? null : data.shareable;\n  var mobile_shareable = shareable;\n\n  mobile_shareable = mobile_shareable && (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n  var header = new Header({\n    title: title,\n    description: description,\n    facebook_title: facebook_title,\n    twitter_title: twitter_title,\n    url: data.url,\n    share_url: data.share_url,\n    mobile_shareable: mobile_shareable,\n    shareable: shareable && !mobile_shareable,\n    template: template\n  });\n\n  return header.render();\n});\n\n// infowindow\nOverlay.register('infowindow', function (data, vis) {\n  if (_.size(data.fields) == 0) {\n    return null;\n  }\n\n  var infowindowModel = new InfowindowModel({\n    template: data.template,\n    template_type: data.templateType,\n    alternative_names: data.alternative_names,\n    fields: data.fields,\n    template_name: data.template_name,\n    template_type: data.template_type\n  });\n\n  var infowindow = new Infowindow({\n    model: infowindowModel,\n    mapView: vis.mapView,\n    template: data.template\n  });\n\n  return infowindow;\n});\n\n// layer_selector\nOverlay.register('layer_selector', function (data, vis) {\n  var options = data.options;\n  // if (!options.display) return;\n\n  var template = Template.compile(\n    data.template || '\\\n      <a href=\"#/change-visibility\" class=\"layers\">Visible layers<div class=\"count\"></div></a>\\\n      ',\n    data.templateType || 'underscore'\n  );\n\n  var dropdown_template = Template.compile(\n    data.template || '\\\n      <ul></ul><div class=\"tail\"><span class=\"border\"></span></div>\\\n      ',\n    data.templateType || 'underscore'\n  );\n\n  var layerSelector = new LayerSelector({\n    model: new Model(options),\n    mapView: vis.mapView,\n    template: template,\n    dropdown_template: dropdown_template,\n    layer_names: data.layer_names\n  });\n\n  if (vis.legends) {\n    layerSelector.bind('change:visible', function (visible, order, layer) {\n      if (layer.get('type') === 'layergroup' || layer.get('type') === 'torque') {\n        var legend = vis.legends && vis.legends.getLegendByIndex(order);\n\n        if (legend) {\n          legend[visible ? 'show' : 'hide']();\n        }\n      }\n    });\n  }\n\n  return layerSelector.render();\n});\n\n// fullscreen\nOverlay.register('fullscreen', function (data, vis) {\n  var options = _.extend(data, {\n    doc: vis.$el.find('> div').get(0),\n    allowWheelOnFullscreen: false,\n    mapView: vis.mapView\n  });\n\n  if (data.template) {\n    options.template = Template.compile(\n      data.template,\n      data.templateType || 'mustache'\n    );\n  }\n\n  var fullscreen = new FullScreen(options);\n  return fullscreen.render();\n});\n\n// share content\nOverlay.register('share', function (data, vis) {});\n\n// search content\nOverlay.register('search', function (data, vis) {\n  var opts = _.extend(data, {\n    mapView: vis.mapView,\n    model: vis.map\n  });\n\n  if (data.template) {\n    opts.template = Template.compile(data.template, data.templateType || 'mustache');\n  }\n  var search = new Search(opts);\n  return search.render();\n});\n\n// tooltip\nOverlay.register('tooltip', function (data, vis) {\n  if (!data.layer && vis.getLayers().length <= 1) {\n    throw new Error('layer is null');\n  }\n  data.layer = data.layer || vis.getLayers()[1];\n  data.layer.setInteraction(true);\n  data.mapView = vis.mapView;\n  return new Tooltip(data);\n});\n\nOverlay.register('infobox', function (data, vis) {\n  var layer;\n  var layers = vis.getLayers();\n  if (!data.layer) {\n    if (layers.length > 1) {\n      layer = layers[1];\n    }\n    data.layer = layer;\n  }\n  if (!data.layer) {\n    throw new Error('layer is null');\n  }\n  data.layer.setInteraction(true);\n  var infobox = new InfoBox(data);\n  return infobox;\n\n});\n",
    "var Tooltip = require('../geo/ui/tooltip');\n\n/**\n * Manages the tooltips for a map. It listens to changes on the collection\n * of layers and binds a new tooltip view/model to CartoDB.js whenever the\n * collection of layers changes\n */\nvar TooltipManager = function (vis) {\n  this._vis = vis;\n};\n\nTooltipManager.prototype.manage = function (mapView, map) {\n  this._mapView = mapView;\n  this._map = map;\n\n  this._map.layers.bind('reset', function (layers) {\n    layers.each(this._addTooltipForLayer, this);\n  }, this);\n  this._map.layers.bind('add', this._addTooltipForLayer, this);\n};\n\nTooltipManager.prototype._addTooltipForLayer = function (layerModel) {\n  if (layerModel.getTooltipData && layerModel.getTooltipData()) {\n    var layerView = this._mapView.getLayerViewByLayerCid(layerModel.cid);\n\n    if (!layerView.tooltipView) {\n      this._addTooltipOverlay(layerView, layerModel);\n      this._bindFeatureOverEvent(layerView);\n    }\n  }\n};\n\nTooltipManager.prototype._addTooltipOverlay = function (layerView, layerModel) {\n  var tooltipView = layerView.tooltipView;\n  if (!tooltipView) {\n    var tooltipData = layerModel.getTooltipData();\n    layerView.tooltipView = tooltipView = new Tooltip({\n      mapView: this._mapView,\n      layer: layerView,\n      template: tooltipData.template,\n      position: 'bottom|right',\n      vertical_offset: 10,\n      horizontal_offset: 4,\n      fields: tooltipData.fields,\n      omit_columns: ['cartodb_id']\n    });\n    this._mapView.addOverlay(tooltipView);\n\n    // TODO: Test this\n    layerView.bind('remove', function () {\n      tooltipView.clean();\n    });\n  }\n};\n\nTooltipManager.prototype._bindFeatureOverEvent = function (layerView) {\n  var tooltipView = layerView.tooltipView;\n\n  layerView.bind('featureOver', function (e, latlng, pos, data, layerIndex) {\n    var layerModel = layerView.model;\n    if (layerModel.layers) {\n      layerModel = layerModel.layers.at(layerIndex);\n    }\n    if (!layerModel) {\n      throw new Error('featureOver event for layer ' + layerIndex + ' was captured but layerModel coudn\\'t be retrieved');\n    }\n\n    var tooltipData = layerModel.getTooltipData();\n    if (tooltipData) {\n      tooltipView.setTemplate(tooltipData.template);\n      tooltipView.setFields(tooltipData.fields);\n      tooltipView.setAlternativeNames(tooltipData.alternative_names);\n      tooltipView.enable();\n    } else {\n      tooltipView.disable();\n    }\n  });\n};\n\nmodule.exports = TooltipManager;\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar $ = require('jquery');\nvar log = require('cdb.log');\nvar util = require('cdb.core.util');\nvar Loader = require('../core/loader');\nvar View = require('../core/view');\nvar StackedLegend = require('../geo/ui/legend/stacked-legend');\nvar Map = require('../geo/map');\nvar MapViewFactory = require('../geo/map-view-factory');\nvar LegendModel = require('../geo/ui/legend-model');\nvar Legend = require('../geo/ui/legend');\nvar InfowindowModel = require('../geo/ui/infowindow-model');\nvar Infowindow = require('../geo/ui/infowindow');\nvar Template = require('../core/template');\nvar Layers = require('./vis/layers');\nvar Overlay = require('./vis/overlay');\nvar INFOWINDOW_TEMPLATE = require('./vis/infowindow-template');\nvar DataviewsFactory = require('../dataviews/dataviews-factory');\nvar DataviewCollection = require('../dataviews/dataviews-collection');\nvar InfowindowManager = require('./infowindow-manager');\nvar TooltipManager = require('./tooltip-manager');\nvar WindshaftConfig = require('../windshaft/config');\nvar WindshaftClient = require('../windshaft/client');\nvar WindshaftLayerGroupConfig = require('../windshaft/layergroup-config');\nvar WindshaftNamedMapConfig = require('../windshaft/namedmap-config');\nvar WindshaftMap = require('../windshaft/windshaft-map');\nvar VizJSON = require('./vizjson');\nvar util = require('cdb.core.util');\n\n/**\n * Visualization creation\n */\nvar Vis = View.extend({\n  initialize: function () {\n    _.bindAll(this, 'loadingTiles', 'loadTiles', '_onResize');\n\n    this.overlays = [];\n\n    if (this.options.mapView) {\n      this.mapView = this.options.mapView;\n      this.map = this.mapView.map;\n    }\n  },\n\n  _addLegends: function (legends) {\n    if (this.legends) {\n      this.legends.remove();\n    }\n\n    this.legends = new StackedLegend({\n      legends: legends\n    });\n\n    this.mapView.addOverlay(this.legends);\n  },\n\n  addLegends: function (layers) {\n    this._addLegends(this.createLegendView(layers));\n  },\n\n  _setLayerOptions: function (options) {\n    var layers = [];\n\n    // flatten layers (except baselayer)\n    var layers = _.map(this.getLayers().slice(1), function (layer) {\n      if (layer.getSubLayers) {\n        return layer.getSubLayers();\n      }\n      return layer;\n    });\n\n    layers = _.flatten(layers);\n\n    for (i = 0; i < Math.min(options.sublayer_options.length, layers.length); ++i) {\n      var o = options.sublayer_options[i];\n      var subLayer = layers[i];\n      var legend = this.legends && this.legends.getLegendByIndex(i);\n\n      if (legend) {\n        legend[o.visible ? 'show' : 'hide']();\n      }\n\n      // HACK\n      if (subLayer.model && subLayer.model.get('type') === 'torque') {\n        if (o.visible === false) {\n          subLayer.model.set('visible', false);\n        }\n      }\n    }\n  },\n\n  _addOverlays: function (overlays, data, options) {\n    overlays = overlays.toJSON();\n    // Sort the overlays by its internal order\n    overlays = _.sortBy(overlays, function (overlay) {\n      return overlay.order === null ? Number.MAX_VALUE : overlay.order;\n    });\n\n    // clean current overlays\n    while (this.overlays.length !== 0) {\n      this.overlays.pop().clean();\n    }\n\n    this._createOverlays(overlays, data, options);\n  },\n\n  _createOverlays: function (overlays, vis_data, options) {\n    _(overlays).each(function (data) {\n      var type = data.type;\n\n      // IE<10 doesn't support the Fullscreen API\n      if (type === 'fullscreen' && util.browser.ie && util.browser.ie.version <= 10) return;\n\n      // Decide to create or not the custom overlays\n      if (type === 'image' || type === 'text' || type === 'annotation') {\n        var isDevice = data.options.device == 'mobile' ? true : false;\n        if (this.mobile !== isDevice) return;\n        if (!options[type] && options[type] !== undefined) {\n          return;\n        }\n      }\n\n      // We add the header overlay\n      if (type === 'header') {\n        var overlay = this._addHeader(data, vis_data);\n      } else {\n        var overlay = this.addOverlay(data);\n      }\n\n      // We show/hide the overlays\n      if (overlay && (type in options) && options[type] === false) overlay.hide();\n\n      var opt = data.options;\n\n      if (type == 'layer_selector' && options[type] || type == 'layer_selector' && overlay.model.get('display') && options[type] == undefined) {\n        overlay.show();\n      }\n\n      if (type == 'fullscreen' && options[type] || type == 'fullscreen' && opt.display && options[type] == undefined) {\n        overlay.show();\n      }\n\n      if (type == 'search' && options[type] || type == 'search' && opt.display && options[type] == undefined) {\n        overlay.show();\n      }\n\n      if (type === 'header') {\n        var m = overlay.model;\n\n        if (options.title !== undefined) {\n          m.set('show_title', options.title);\n        }\n\n        if (options.description !== undefined) {\n          m.set('show_description', options.description);\n        }\n\n        if (m.get('show_title') || m.get('show_description')) {\n          $('.cartodb-map-wrapper').addClass('with_header');\n        }\n\n        overlay.render();\n      }\n    }, this);\n  },\n\n  _setupSublayers: function (layers, options) {\n    options.sublayer_options = [];\n\n    _.each(layers.slice(1), function (lyr) {\n      if (lyr.type === 'layergroup') {\n        _.each(lyr.options.layer_definition.layers, function (l) {\n          options.sublayer_options.push({ visible: ( l.visible !== undefined ? l.visible : true) });\n        });\n      } else if (lyr.type === 'namedmap') {\n        _.each(lyr.options.named_map.layers, function (l) {\n          options.sublayer_options.push({ visible: ( l.visible !== undefined ? l.visible : true) });\n        });\n      } else if (lyr.type === 'torque') {\n        options.sublayer_options.push({ visible: ( lyr.options.visible !== undefined ? lyr.options.visible : true) });\n      }\n    });\n  },\n\n  load: function (data, options) {\n    if (typeof (data) === 'string') {\n      var url = data;\n      Loader.get(url, function (data) {\n        if (data) {\n          this.load(data, options);\n        } else {\n          this.throwError('error fetching viz.json file');\n        }\n      }.bind(this));\n\n      return;\n    }\n\n    var DEFAULT_OPTIONS = {\n      tiles_loader: true,\n      loaderControl: true,\n      infowindow: true,\n      tooltip: true,\n      time_slider: true\n    };\n\n    options = _.defaults(options || {}, DEFAULT_OPTIONS);\n    var vizjson = new VizJSON(data);\n    this._applyOptionsToVizJSON(vizjson, options);\n\n    this._dataviewsCollection = new DataviewCollection();\n\n    // Create the WindhaftClient\n\n    var endpoint;\n    var configGenerator;\n    var datasource = vizjson.datasource;\n\n    // TODO: We can use something else to differentiate types of \"datasource\"s\n    if (datasource.template_name) {\n      endpoint = [WindshaftConfig.MAPS_API_BASE_URL, 'named', datasource.template_name].join('/');\n      configGenerator = WindshaftNamedMapConfig;\n    } else {\n      endpoint = WindshaftConfig.MAPS_API_BASE_URL;\n      configGenerator = WindshaftLayerGroupConfig;\n    }\n\n    var windshaftClient = new WindshaftClient({\n      endpoint: endpoint,\n      urlTemplate: datasource.maps_api_template,\n      userName: datasource.user_name,\n      forceCors: datasource.force_cors || true\n    });\n\n    // Create the WindshaftMap\n\n    var windshaftMap = new WindshaftMap(null, { // eslint-disable-line\n      client: windshaftClient,\n      configGenerator: configGenerator,\n      statTag: datasource.stat_tag\n    });\n\n    // Create the Map\n\n    var allowDragging = util.isMobileDevice() || vizjson.hasZoomOverlay() || vizjson.scrollwheel;\n    var center = vizjson.center;\n    if (typeof (center) === 'string') {\n      center = $.parseJSON(center);\n    }\n\n    var mapConfig = {\n      title: vizjson.title,\n      description: vizjson.description,\n      maxZoom: vizjson.maxZoom,\n      minZoom: vizjson.minZoom,\n      legends: vizjson.legends,\n      bounds: vizjson.bounds,\n      center: center,\n      zoom: vizjson.zoom,\n      scrollwheel: !!this.scrollwheel,\n      drag: allowDragging,\n      provider: vizjson.map_provider,\n      vector: vizjson.vector\n    };\n\n    this.map = new Map(mapConfig, {\n      windshaftMap: windshaftMap,\n      dataviewsCollection: this._dataviewsCollection\n    });\n\n    // If a CartoDB embed map is hidden by default, its\n    // height is 0 and it will need to recalculate its size\n    // and re-center again.\n    // We will wait until it is resized and then apply\n    // the center provided in the parameters and the\n    // correct size.\n    var map_h = this.$el.outerHeight();\n\n    if (map_h === 0) {\n      $(window).bind('resize', this._onResize);\n    }\n\n    // Create the MapView\n\n    var div = $('<div>').css({\n      position: 'relative',\n      width: '100%',\n      height: '100%'\n    });\n\n    this.container = div;\n\n    // Another div to prevent leaflet grabbing the div\n    var div_hack = $('<div>')\n      .addClass('cartodb-map-wrapper')\n      .css({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        width: '100%'\n      });\n\n    div.append(div_hack);\n\n    this.$el.append(div);\n\n    var mapViewFactory = new MapViewFactory();\n    this.mapView = mapViewFactory.createMapView(this.map.get('provider'), this.map, div_hack);\n\n    // Bindings\n\n    if (options.legends || (options.legends === undefined && this.map.get('legends') !== false)) {\n      this.map.layers.bind('reset', this.addLegends, this);\n    }\n\n    this.mapView.bind('newLayerView', this._addLoading, this);\n\n    // Create the Layer Models and set them on hte map\n    this.https = (window && window.location.protocol && window.location.protocol === 'https:') || !!vizjson.https || !!options.https;\n    var layerModels = this._newLayerModels(data, this.map);\n\n    var infowindowManager = new InfowindowManager(this);\n    infowindowManager.manage(this.mapView, this.map);\n\n    var tooltipManager = new TooltipManager(this);\n    tooltipManager.manage(this.mapView, this.map);\n\n    // Create the collection of Overlays\n    var overlaysCollection = new Backbone.Collection();\n    overlaysCollection.bind('reset', function (overlays) {\n      this._addOverlays(overlays, data, options);\n    }, this);\n    overlaysCollection.reset(vizjson.overlays);\n\n    // Create the public Dataview Factory\n    this.dataviews = new DataviewsFactory(null, {\n      dataviewsCollection: this._dataviewsCollection,\n      layersCollection: this.map.layers,\n      map: this.map,\n      windshaftMap: windshaftMap\n    });\n\n    if (!options.skipMapInstantiation) {\n      this.instantiateMap();\n    }\n\n    // Lastly: reset the layer models on the map\n    this.map.layers.reset(layerModels);\n\n    // Global variable for easier console debugging / testing\n    window.vis = this;\n\n    return this;\n  },\n\n  _applyOptionsToVizJSON: function (vizjson, options) {\n    vizjson.scrollwheel = options.scrollwheel || vizjson.scrollwheel;\n\n    if (!options.tiles_loader || !options.loaderControl) {\n      vizjson.removeLoaderOverlay();\n    }\n\n    if (options.searchControl === true) {\n      vizjson.addSearchOverlay();\n    } else if (options.searchControl === false) {\n      vizjson.removeSearchOverlay();\n    }\n\n    if ((options.title && vizjson.title) || (options.description && vizjson.description)) {\n      vizjson.addHeaderOverlay(options.title, options.description, options.shareable);\n    }\n\n    if (options.layer_selector) {\n      vizjson.addLayerSelectorOverlay();\n    }\n\n    if (options.zoomControl !== undefined && !options.zoomControl) {\n      vizjson.removeZoomOverlay();\n    }\n\n    // if bounds are present zoom and center will not taken into account\n    var zoom = parseInt(options.zoom, 10);\n    if (!isNaN(zoom)) {\n      vizjson.setZoom(zoom);\n    }\n\n    // Center coordinates?\n    var center_lat = parseFloat(options.center_lat);\n    var center_lon = parseFloat(options.center_lon);\n    if (!isNaN(center_lat) && !isNaN(center_lon)) {\n      vizjson.setCenter([center_lat, center_lon]);\n    }\n\n    // Center object\n    if (options.center !== undefined) {\n      vizjson.setCenter(options.center);\n    }\n\n    // Bounds?\n    var sw_lat = parseFloat(options.sw_lat);\n    var sw_lon = parseFloat(options.sw_lon);\n    var ne_lat = parseFloat(options.ne_lat);\n    var ne_lon = parseFloat(options.ne_lon);\n\n    if (!isNaN(sw_lat) && !isNaN(sw_lon) && !isNaN(ne_lat) && !isNaN(ne_lon)) {\n      vizjson.setBounds([\n        [ sw_lat, sw_lon ],\n        [ ne_lat, ne_lon ]\n      ]);\n    }\n\n    if (options.gmaps_base_type) {\n      vizjson.enforceGMapsBaseLayer(options.gmaps_base_type, options.gmaps_style);\n    }\n  },\n\n  /**\n   * Force a map instantiation.\n   * Only expected to be called if {skipMapInstantiation} flag is set to true when vis is created.\n   */\n  instantiateMap: function () {\n    var self = this;\n    this._dataviewsCollection.on('add reset remove', _.debounce(this._invalidateSizeOnDataviewsChanges, 10), this);\n    this.map.instantiateMap();\n\n    // Trigger 'done' event\n    _.defer(function () {\n      self.trigger('done', self, self.map.layers);\n    });\n  },\n\n  centerMapToOrigin: function () {\n    this.mapView.invalidateSize();\n    this.map.reCenter();\n  },\n\n  _newLayerModels: function (vizjson, map) {\n    var layerModels = [];\n    var layersOptions = {\n      https: this.https,\n      map: map\n    };\n    _.each(vizjson.layers, function (layerData) {\n      if (layerData.type === 'layergroup' || layerData.type === 'namedmap') {\n        var layersData;\n        if (layerData.type === 'layergroup') {\n          layersData = layerData.options.layer_definition.layers;\n        } else {\n          layersData = layerData.options.named_map.layers;\n        }\n        _.each(layersData, function (layerData) {\n          layerModels.push(Layers.create('CartoDB', layerData, layersOptions));\n        });\n      } else {\n        layerModels.push(Layers.create(layerData.type, layerData, layersOptions));\n      }\n    });\n\n    return layerModels;\n  },\n\n  _invalidateSizeOnDataviewsChanges: function () {\n    if (this._dataviewsCollection.size() > 0) {\n      this.mapView.invalidateSize();\n    }\n  },\n\n  _addHeader: function (data, vis_data) {\n    return this.addOverlay({\n      type: 'header',\n      options: data.options\n    });\n  },\n\n  _createLegendView: function (layer, layerView) {\n    if (layer.legend) {\n      layer.legend.data = layer.legend.items;\n      var legend = layer.legend;\n\n      if ((legend.items && legend.items.length) || legend.template) {\n        var legendAttrs = _.extend(layer.legend, {\n          visible: layer.visible\n        });\n        var legendModel = new LegendModel(legendAttrs);\n        var legendView = new Legend({ model: legendModel });\n        layerView.bind('change:visibility', function (layer, hidden) {\n          legendView[hidden ? 'hide' : 'show']();\n        });\n        layerView.legend = legendModel;\n        return legendView;\n      }\n    }\n    return null;\n  },\n\n  createLegendView: function (layers) {\n    var legends = [];\n    var self = this;\n    for (var i = layers.length - 1; i >= 0; --i) {\n      var cid = layers.at(i).cid;\n      var layer = layers.at(i).attributes;\n      if (layer.visible) {\n        var layerView = this.mapView.getLayerViewByLayerCid(cid);\n        if (layerView) {\n          var layerView = this.mapView.getLayerViewByLayerCid(cid);\n          legends.push(this._createLayerLegendView(layer, layerView));\n        }\n      }\n    }\n    return _.flatten(legends);\n  },\n\n  _createLayerLegendView: function (layer, layerView) {\n    var self = this;\n    var legends = [];\n    if (layer.options && layer.options.layer_definition) {\n      var sublayers = layer.options.layer_definition.layers;\n      _(sublayers).each(function (sub, i) {\n        legends.push(self._createLegendView(sub, layerView.getSubLayer(i)));\n      });\n    } else if (layer.options && layer.options.named_map && layer.options.named_map.layers) {\n      var sublayers = layer.options.named_map.layers;\n      _(sublayers).each(function (sub, i) {\n        legends.push(self._createLegendView(sub, layerView.getSubLayer(i)));\n      });\n    } else {\n      legends.push(this._createLegendView(layer, layerView));\n    }\n    return _.compact(legends).reverse();\n  },\n\n  addOverlay: function (overlay) {\n    overlay.map = this.map;\n\n    var v = Overlay.create(overlay.type, this, overlay);\n\n    if (v) {\n      // Save tiles loader view for later\n      if (overlay.type == 'loader') {\n        this.loader = v;\n      }\n\n      this.mapView.addOverlay(v);\n\n      this.overlays.push(v);\n\n      v.bind('clean', function () {\n        for (var i in this.overlays) {\n          var o = this.overlays[i];\n          if (v.cid === o.cid) {\n            this.overlays.splice(i, 1);\n            return;\n          }\n        }\n      }, this);\n    }\n    return v;\n  },\n\n  createLayer: function (layerData) {\n    var layerModel = Layers.create(layerData.type || layerData.kind, this, layerData);\n    return this.mapView.createLayer(layerModel);\n  },\n\n  _addLoading: function (layerView) {\n    if (layerView) {\n      var self = this;\n\n      var loadingTiles = function () {\n        self.loadingTiles();\n      };\n\n      var loadTiles = function () {\n        self.loadTiles();\n      };\n\n      layerView.bind('loading', loadingTiles);\n      layerView.bind('load', loadTiles);\n    }\n  },\n\n  loadingTiles: function () {\n    if (this.loader) {\n      this.loader.show();\n    }\n    if (this.layersLoading === 0) {\n      this.trigger('loading');\n    }\n    this.layersLoading++;\n  },\n\n  loadTiles: function () {\n    if (this.loader) {\n      this.loader.hide();\n    }\n    this.layersLoading--;\n    // check less than 0 because loading event sometimes is\n    // thrown before visualization creation\n    if (this.layersLoading <= 0) {\n      this.layersLoading = 0;\n      this.trigger('load');\n    }\n  },\n\n  throwError: function (msg, lyr) {\n    log.error(msg);\n    var self = this;\n    _.defer(function () {\n      self.trigger('error', msg, lyr);\n    });\n  },\n\n  error: function (fn) {\n    return this.bind('error', fn);\n  },\n\n  done: function (fn) {\n    return this.bind('done', fn);\n  },\n\n  // public methods\n  //\n\n  // get the native map used behind the scenes\n  getNativeMap: function () {\n    return this.mapView.getNativeMap();\n  },\n\n  // returns an array of layers\n  // TODO: Rename to getLayerViews\n  getLayers: function () {\n    var self = this;\n    return _.compact(this.map.layers.map(function (layer) {\n      return self.mapView.getLayerViewByLayerCid(layer.cid);\n    }));\n  },\n\n  getOverlays: function () {\n    return this.overlays;\n  },\n\n  getOverlay: function (type) {\n    return _(this.overlays).find(function (v) {\n      return v.type == type;\n    });\n  },\n\n  getOverlaysByType: function (type) {\n    return _(this.overlays).filter(function (v) {\n      return v.type == type;\n    });\n  },\n\n  _onResize: function () {\n    $(window).unbind('resize', this._onResize);\n\n    var self = this;\n    // This timeout is necessary due to GMaps needs time\n    // to load tiles and recalculate its bounds :S\n    setTimeout(function () {\n      self.centerMapToOrigin();\n    }, 150);\n  }\n}, {\n  /**\n   * adds an infowindow to the map controlled by layer events.\n   * it enables interaction and overrides the layer interacivity\n   * ``fields`` array of column names\n   * ``map`` native map object, leaflet of gmaps\n   * ``layer`` cartodb layer (or sublayer)\n   */\n  addInfowindow: function (map, layer, fields, opts) {\n    var options = _.defaults(opts || {}, {\n      infowindowTemplate: INFOWINDOW_TEMPLATE.light,\n      templateType: 'mustache',\n      triggerEvent: 'featureClick',\n      templateName: 'light',\n      extraFields: [],\n      cursorInteraction: true\n    });\n\n    if (!map) throw new Error('map is not valid');\n    if (!layer) throw new Error('layer is not valid');\n    if (!fields && fields.length === undefined) throw new Error('fields should be a list of strings');\n\n    var f = [];\n    fields = fields.concat(options.extraFields);\n    for (var i = 0; i < fields.length; ++i) {\n      f.push({ name: fields, order: i});\n    }\n\n    var infowindowModel = new InfowindowModel({\n      fields: f,\n      template_name: options.templateName\n    });\n\n    var infowindow = new Infowindow({\n      model: infowindowModel,\n      mapView: map.viz.mapView,\n      template: new Template({\n        template: options.infowindowTemplate,\n        type: options.templateType\n      }).asFunction()\n    });\n\n    map.viz.mapView.addInfowindow(infowindow);\n\n    layer.bind(options.triggerEvent, function (e, latlng, pos, data, layer) {\n      var render_fields = [];\n      var d;\n      for (var f = 0; f < fields.length; ++f) {\n        var field = fields[f];\n        if (d = data[field]) {\n          render_fields.push({\n            title: field,\n            value: d,\n            index: 0\n          });\n        }\n      }\n\n      infowindow.model.set({\n        content: {\n          fields: render_fields,\n          data: data\n        }\n      });\n\n      infowindow\n        .setLatLng(latlng)\n        .showInfowindow();\n      infowindow.adjustPan();\n    }, infowindow);\n\n    // remove the callback on clean\n    infowindow.bind('clean', function () {\n      layer.unbind(options.triggerEvent, null, infowindow);\n    });\n\n    if (options.cursorInteraction) {\n      Vis.addCursorInteraction(map, layer);\n    }\n\n    return infowindow;\n  },\n\n  addCursorInteraction: function (map, layer) {\n    var mapView = map.viz.mapView;\n    layer.bind('mouseover', function () {\n      mapView.setCursor('pointer');\n    });\n\n    layer.bind('mouseout', function (m, layer) {\n      mapView.setCursor('auto');\n    });\n  },\n\n  removeCursorInteraction: function (map, layer) {\n    var mapView = map.viz.mapView;\n    layer.unbind(null, null, mapView);\n  }\n});\n\nmodule.exports = Vis;\n",
    "var INFOWINDOW_TEMPLATE = {\n  light: [\n    '<div class=\"cartodb-popup v2\">',\n    '<a href=\"#close\" class=\"cartodb-popup-close-button close\">x</a>',\n    '<div class=\"cartodb-popup-content-wrapper\">',\n      '<div class=\"cartodb-popup-content\">',\n        '{{#content.fields}}',\n          '{{#title}}<h4>{{title}}</h4>{{/title}}',\n          '{{#value}}',\n            '<p {{#type}}class=\"{{ type }}\"{{/type}}>{{{ value }}}</p>',\n          '{{/value}}',\n          '{{^value}}',\n            '<p class=\"empty\">null</p>',\n          '{{/value}}',\n        '{{/content.fields}}',\n      '</div>',\n    '</div>',\n    '<div class=\"cartodb-popup-tip-container\"></div>',\n  '</div>'\n  ].join('')\n};\n\nmodule.exports = INFOWINDOW_TEMPLATE;\n",
    "var _ = require('underscore');\nvar log = require('cdb.log');\n\n// layer factory\nvar Layers = {\n\n  _types: {},\n\n  register: function (type, creatorFn) {\n    this._types[type] = creatorFn;\n  },\n\n  create: function (type, data, options) {\n    if (!type) {\n      log.error('creating a layer without type');\n      return null;\n    }\n    var LayerClass = this._types[type.toLowerCase()];\n\n    var layerAttributes = {};\n    layerAttributes.type = type;\n    _.extend(layerAttributes, data, data.options);\n    return new LayerClass(layerAttributes, options);\n  }\n};\n\nmodule.exports = Layers;\n",
    "var log = require('cdb.log');\n\n/**\n * defines the container for an overlay.\n * It places the overlay\n */\nvar Overlay = {\n\n  _types: {},\n\n  // register a type to be created\n  register: function(type, creatorFn) {\n    Overlay._types[type] = creatorFn;\n  },\n\n  // create a type given the data\n  // raise an exception if the type does not exist\n  create: function(type, vis, data) {\n    var t = Overlay._types[type];\n\n    if (!t) {\n      log.error(\"Overlay: \" + type + \" does not exist\");\n      return;\n    }\n\n    data.options = typeof data.options === 'string' ? JSON.parse(data.options): data.options;\n    data.options = data.options || {}\n    var widget = t(data, vis);\n\n    if (widget) {\n      widget.type = type;\n      return widget;\n    }\n\n    return false;\n  }\n};\n\nmodule.exports = Overlay;\n",
    "var Backbone = require('backbone');\n\nvar Overlays = Backbone.Collection.extend({\n  comparator: function() {\n  }\n});\n\nmodule.exports = Overlays;\n",
    "var _ = require('underscore');\nvar log = require('cdb.log');\n\nvar GMAPS_BASE_LAYER_TYPES = ['roadmap', 'gray_roadmap', 'dark_roadmap', 'hybrid', 'satellite', 'terrain'];\n\nvar VizJSON = function (vizjson) {\n  _.each(Object.keys(vizjson), function (property) {\n    this[property] = vizjson[property];\n  }, this);\n\n  this.overlays = this.overlays || [];\n  this.layers = this.layers || [];\n\n  this._addAttributionOverlay();\n};\n\nVizJSON.OVERLAY_TYPES = {\n  ZOOM: 'zoom',\n  ATTRIBUTION: 'attribution',\n  LOADER: 'loader',\n  SEARCH: 'search',\n  HEADER: 'header',\n  LAYER_SELECTOR: 'layer_selector'\n};\n\nVizJSON.MAP_PROVIDER_TYPES = {\n  GMAPS: 'googlemaps',\n  LEAFLET: 'leaflet'\n};\n\nVizJSON.prototype.hasZoomOverlay = function () {\n  return this.hasOverlay(VizJSON.OVERLAY_TYPES.ZOOM);\n};\n\nVizJSON.prototype.hasOverlay = function (overlayType) {\n  return _.isObject(this.getOverlayByType(overlayType));\n};\n\nVizJSON.prototype.getOverlayByType = function (overlayType) {\n  return _.find(this.overlays, function (overlay) {\n    return overlay.type === overlayType;\n  });\n};\n\nVizJSON.prototype.addHeaderOverlay = function (showTitle, showDescription, isShareable) {\n  if (!this.hasOverlay(VizJSON.OVERLAY_TYPES.HEADER)) {\n    this.overlays.unshift({\n      type: VizJSON.OVERLAY_TYPES.HEADER,\n      order: 1,\n      shareable: isShareable,\n      url: this.url,\n      options: {\n        extra: {\n          title: this.title,\n          description: this.description,\n          show_title: showTitle,\n          show_description: showDescription\n        }\n      }\n    });\n  }\n};\n\nVizJSON.prototype.addLayerSelectorOverlay = function () {\n  if (!this.hasOverlay(VizJSON.OVERLAY_TYPES.LAYER_SELECTOR)) {\n    this.overlays.push({\n      type: VizJSON.OVERLAY_TYPES.LAYER_SELECTOR\n    });\n  }\n};\n\nVizJSON.prototype.addSearchOverlay = function () {\n  if (!this.hasOverlay(VizJSON.OVERLAY_TYPES.SEARCH)) {\n    this.overlays.push({\n      type: VizJSON.OVERLAY_TYPES.SEARCH,\n      order: 3\n    });\n  }\n};\n\nVizJSON.prototype.removeOverlay = function (overlayType) {\n  for (var i = 0; i < this.overlays.length; ++i) {\n    if (this.overlays[i].type === overlayType) {\n      this.overlays.splice(i, 1);\n      return;\n    }\n  }\n};\n\nVizJSON.prototype.removeLoaderOverlay = function () {\n  this.removeOverlay(VizJSON.OVERLAY_TYPES.LOADER);\n};\n\nVizJSON.prototype.removeZoomOverlay = function () {\n  this.removeOverlay(VizJSON.OVERLAY_TYPES.ZOOM);\n};\n\nVizJSON.prototype.removeSearchOverlay = function () {\n  this.removeOverlay(VizJSON.OVERLAY_TYPES.SEARCH);\n};\n\nVizJSON.prototype._addAttributionOverlay = function () {\n  this.overlays.push({\n    type: VizJSON.OVERLAY_TYPES.ATTRIBUTION\n  });\n};\n\nVizJSON.prototype.enforceGMapsBaseLayer = function (gmapsBaseType, gmapsStyle) {\n  var isGmapsBaseTypeValid = _.contains(GMAPS_BASE_LAYER_TYPES, gmapsBaseType);\n  if (this.map_provider === VizJSON.MAP_PROVIDER_TYPES.LEAFLET && isGmapsBaseTypeValid) {\n    if (this.layers) {\n      this.layers[0].options.type = 'GMapsBase';\n      this.layers[0].options.base_type = gmapsBaseType;\n      this.layers[0].options.name = gmapsBaseType;\n\n      if (gmapsStyle) {\n        this.layers[0].options.style = typeof gmapsStyle === 'string' ? JSON.parse(gmapsStyle) : gmapsStyle;\n      }\n\n      this.map_provider = VizJSON.MAP_PROVIDER_TYPES.GMAPS;\n      this.layers[0].options.attribution = ''; // GMaps has its own attribution\n    } else {\n      log.error('No base map loaded. Using Leaflet.');\n    }\n  } else {\n    log.error('GMaps base_type \"' + gmapsBaseType + ' is not supported. Using leaflet.');\n  }\n};\n\nVizJSON.prototype.setZoom = function (zoom) {\n  this.zoom = zoom;\n  this.bounds = null;\n};\n\nVizJSON.prototype.setCenter = function (center) {\n  this.center = center;\n  this.bounds = null;\n};\n\nVizJSON.prototype.setBounds = function (bounds) {\n  this.bounds = bounds;\n};\n\nmodule.exports = VizJSON;\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar LZMA = require('lzma');\nvar util = require('../core/util');\n\nvar validatePresenceOfOptions = function (options, requiredOptions) {\n  var missingOptions = _.filter(requiredOptions, function (option) {\n    return !options[option];\n  });\n  if (missingOptions.length) {\n    throw new Error('WindshaftClient could not be initialized. The following options are missing: ' + missingOptions.join(', '));\n  }\n};\n\n/**\n * Windshaft client. It provides a method to create instances of maps in Windshaft.\n * @param {object} options Options to set up the client\n */\nvar WindshaftClient = function (options) {\n  validatePresenceOfOptions(options, ['urlTemplate', 'userName', 'endpoint']);\n\n  this.urlTemplate = options.urlTemplate;\n  this.userName = options.userName;\n  this.endpoint = options.endpoint;\n  this.statTag = options.statTag;\n  this.forceCors = options.forceCors || false;\n\n  this.url = this.urlTemplate.replace('{user}', this.userName);\n};\n\nWindshaftClient.DEFAULT_COMPRESSION_LEVEL = 3;\nWindshaftClient.MAX_GET_SIZE = 2033;\n\nWindshaftClient.prototype.instantiateMap = function (options) {\n  var mapDefinition = options.mapDefinition;\n  var statTag = options.statTag;\n  var filters = options.filters || {};\n  var successCallback = options.success;\n  var errorCallback = options.error;\n  var payload = JSON.stringify(mapDefinition);\n\n  var ajaxOptions = {\n    success: function (data) {\n      if (data.errors) {\n        errorCallback(data.errors[0]);\n      } else {\n        successCallback(data);\n      }\n    },\n    error: function (xhr) {\n      var err = { errors: ['Unknown error'] };\n      try {\n        err = JSON.parse(xhr.responseText);\n      } catch (e) {}\n      errorCallback(err.errors[0]);\n    }\n  };\n\n  // TODO: Move this\n  var params = [\n    ['stat_tag', statTag].join('=')\n  ];\n\n  if (Object.keys(filters).length) {\n    params.push(['filters', encodeURIComponent(JSON.stringify(filters))].join('='));\n  }\n\n  if (this._usePOST(payload, params)) {\n    this._post(payload, params, ajaxOptions);\n  } else {\n    this._get(payload, params, ajaxOptions);\n  }\n};\n\nWindshaftClient.prototype._usePOST = function (payload, params) {\n  if (util.isCORSSupported() && this.forceCors) {\n    return true;\n  }\n  return payload.length >= this.constructor.MAX_GET_SIZE;\n};\n\nWindshaftClient.prototype._post = function (payload, params, options) {\n  $.ajax({\n    crossOrigin: true,\n    method: 'POST',\n    dataType: 'json',\n    contentType: 'application/json',\n    url: this._getURL(params),\n    data: payload,\n    success: options.success,\n    error: options.error\n  });\n};\n\nWindshaftClient.prototype._get = function (payload, params, options) {\n  var compressFunction = this._getCompressor(payload);\n  compressFunction(payload, this.constructor.DEFAULT_COMPRESSION_LEVEL, function (dataParameter) {\n    params.push(dataParameter);\n    $.ajax({\n      url: this._getURL(params),\n      method: 'GET',\n      dataType: 'jsonp',\n      jsonpCallback: this._jsonpCallbackName(payload),\n      cache: true,\n      success: options.success,\n      error: options.error\n    });\n  }.bind(this));\n};\n\nWindshaftClient.prototype._getCompressor = function (payload) {\n  if (payload.length < this.constructor.MAX_GET_SIZE) {\n    return function (data, level, callback) {\n      callback('config=' + encodeURIComponent(data));\n    };\n  }\n\n  return function (data, level, callback) {\n    data = JSON.stringify({ config: data });\n    LZMA.compress(data, level, function (encoded) {\n      callback('lzma=' + encodeURIComponent(util.array2hex(encoded)));\n    });\n  };\n};\n\nWindshaftClient.prototype._getURL = function (params) {\n  return [this.url, this.endpoint].join('/') + '?' + params.join('&');\n};\n\nWindshaftClient.prototype._jsonpCallbackName = function (payload) {\n  return '_cdbc_' + util.uniqueCallbackName(payload);\n};\n\nmodule.exports = WindshaftClient;\n",
    "module.exports = {\n  MAPS_API_BASE_URL: 'api/v1/map'\n};\n",
    "var Model = require('../../core/model');\n\nmodule.exports = Model.extend({\n\n  isEmpty: function () {\n    throw new Error('Filters must implement the .isEmpty method');\n  },\n\n  toJSON: function () {\n    throw new Error('Filters must implement the .toJSON method');\n  },\n\n  remove: function () {\n    this.trigger('destroy', this);\n    this.stopListening();\n  }\n});\n",
    "var Model = require('../../core/model');\n\nmodule.exports = Model.extend({\n  initialize: function (bounds) {\n    this.setBounds(bounds);\n  },\n\n  setBounds: function (bounds) {\n    this.set({\n      west: bounds[0][1],\n      south: bounds[0][0],\n      east: bounds[1][1],\n      north: bounds[1][0]\n    });\n  },\n\n  toString: function () {\n    return [\n      this.get('west'),\n      this.get('south'),\n      this.get('east'),\n      this.get('north')\n    ].join(',');\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\nvar WindshaftFilterBase = require('./base');\n\n/**\n * Filter used by the category dataview\n */\nmodule.exports = WindshaftFilterBase.extend({\n\n  defaults: {\n    rejectAll: false\n  },\n\n  initialize: function () {\n    this.rejectedCategories = new Backbone.Collection();\n    this.acceptedCategories = new Backbone.Collection();\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.rejectedCategories, 'add remove', function () {\n      this.set('rejectAll', false);\n    });\n    this.listenTo(this.acceptedCategories, 'add remove', function () {\n      this.set('rejectAll', false);\n    });\n  },\n\n  isEmpty: function () {\n    return this.rejectedCategories.size() === 0 && this.acceptedCategories.size() === 0 && !this.get('rejectAll');\n  },\n\n  accept: function (values, applyFilter) {\n    values = !_.isArray(values) ? [values] : values;\n\n    _.each(values, function (value) {\n      var d = { name: value };\n      var rejectedMdls = this.rejectedCategories.where(d);\n      var acceptedMdls = this.acceptedCategories.where(d);\n      if (rejectedMdls.length > 0) {\n        this.rejectedCategories.remove(rejectedMdls);\n      } else if (!acceptedMdls.length) {\n        this.acceptedCategories.add(d);\n      }\n    }, this);\n\n    if (applyFilter !== false) {\n      this.applyFilter();\n    }\n  },\n\n  acceptAll: function () {\n    this.set('rejectAll', false);\n    this.cleanFilter();\n  },\n\n  isAccepted: function (name) {\n    return this.acceptedCategories.where({ name: name }).length > 0;\n  },\n\n  reject: function (values, applyFilter) {\n    values = !_.isArray(values) ? [values] : values;\n\n    _.each(values, function (value) {\n      var d = { name: value };\n      var acceptedMdls = this.acceptedCategories.where(d);\n      var rejectedMdls = this.rejectedCategories.where(d);\n      if (acceptedMdls.length > 0) {\n        this.acceptedCategories.remove(acceptedMdls);\n      } else {\n        if (!rejectedMdls.length) {\n          this.rejectedCategories.add(d);\n        }\n      }\n    }, this);\n\n    if (applyFilter !== false) {\n      this.applyFilter();\n    }\n  },\n\n  isRejected: function (name) {\n    var acceptCount = this.acceptedCategories.size();\n    if (this.rejectedCategories.where({ name: name }).length > 0) {\n      return true;\n    } else if (acceptCount > 0 && this.acceptedCategories.where({ name: name }).length === 0) {\n      return true;\n    } else if (this.get('rejectAll')) {\n      return true;\n    } else {\n      return false;\n    }\n  },\n\n  rejectAll: function () {\n    this.set('rejectAll', true);\n    this.cleanFilter();\n  },\n\n  cleanFilter: function (triggerChange) {\n    this.acceptedCategories.reset();\n    this.rejectedCategories.reset();\n    if (triggerChange !== false) {\n      this.applyFilter();\n    }\n  },\n\n  applyFilter: function () {\n    this.trigger('change', this);\n  },\n\n  areAllRejected: function () {\n    return this.get('rejectAll');\n  },\n\n  toJSON: function () {\n    var filter = {};\n    var rejectCount = this.rejectedCategories.size();\n    var acceptCount = this.acceptedCategories.size();\n    var acceptedCats = { accept: _.pluck(this.acceptedCategories.toJSON(), 'name') };\n    var rejectedCats = { reject: _.pluck(this.rejectedCategories.toJSON(), 'name') };\n\n    if (this.get('rejectAll')) {\n      filter = { accept: [] };\n    } else if (acceptCount > 0) {\n      filter = acceptedCats;\n    } else if (rejectCount > 0 && acceptCount === 0) {\n      filter = rejectedCats;\n    }\n\n    var json = {};\n    json[this.get('dataviewId')] = filter;\n\n    return json;\n  },\n\n  getAcceptedCategoryNames: function () {\n    return this.acceptedCategories.map(function (category) { return category.get('name'); });\n  },\n\n  getRejectedCategoryNames: function () {\n    return this.rejectedCategories.map(function (category) { return category.get('name'); });\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\nmodule.exports = Backbone.Collection.extend({\n\n  /**\n   * @param  {Array.<Filter>} filters Array with the filters to add to the collection.\n   * @param  {Array.<LayerModel>} layers  Array of LayerModel in the same order passed to the WindshaftMap.\n   * @returns {WindshaftFilterCollection}\n   */\n  initialize: function (filters, layers) {\n    this.layers = layers;\n    Backbone.Collection.prototype.initialize.apply(this, filters);\n  },\n\n  toJSON: function () {\n    var json = {};\n    var activeFilters = this.getActiveFilters();\n    if (activeFilters.length) {\n      json.layers = [];\n      var l, f, filters, filtersJson;\n      for (l = 0; l < this.layers.length; l++) {\n        var layer = this.layers[l];\n        if (layer.isVisible()) {\n          filters = this.getActiveFiltersForLayer(layer);\n          filtersJson = {};\n          if (filters.length) {\n            for (f = 0; f < filters.length; f++) {\n              _.extend(filtersJson, filters[f].toJSON());\n            }\n          }\n          json.layers.push(filtersJson);\n        }\n      }\n    }\n    return json;\n  },\n\n  getActiveFilters: function () {\n    return this.filter(function (filter) {\n      return !filter.isEmpty();\n    });\n  },\n\n  getActiveFiltersForLayer: function (layer) {\n    return this.filter(function (filter) {\n      return !filter.isEmpty() && filter.get('layer') === layer;\n    });\n  }\n});\n",
    "var _ = require('underscore');\nvar WindshaftFilterBase = require('./base');\n\nmodule.exports = WindshaftFilterBase.extend({\n\n  isEmpty: function () {\n    return _.isUndefined(this.get('min')) && _.isUndefined(this.get('max'));\n  },\n\n  setRange: function (min, max) {\n    this.set({\n      min: min,\n      max: max\n    });\n  },\n\n  unsetRange: function () {\n    this.setRange(undefined, undefined);\n  },\n\n  toJSON: function () {\n    var json = {};\n    json[this.get('dataviewId')] = {\n      min: this.get('min'),\n      max: this.get('max'),\n      column_type: this.get('column_type')\n    };\n\n    return json;\n  }\n});\n",
    "var _ = require('underscore');\nvar LayerGroupConfig = {};\n\nvar DEFAULT_CARTOCSS_VERSION = '2.1.0';\n\nLayerGroupConfig.generate = function (options) {\n  var layers = options.layers;\n  var dataviews = options.dataviews;\n  var config = { layers: [] };\n  _.each(layers, function (layer) {\n    if (layer.isVisible()) {\n      var layerConfig = {\n        type: layer.get('type').toLowerCase(),\n        options: {\n          sql: layer.get('sql'),\n          cartocss: layer.get('cartocss'),\n          cartocss_version: layer.get('cartocss_version') || DEFAULT_CARTOCSS_VERSION,\n          interactivity: layer.getInteractiveColumnNames(),\n          // TODO widgets should be renamed to dataviews, requires Windshaft to be changed first though\n          widgets: {}\n        }\n      };\n\n      if (dataviews) {\n        layerConfig.options.widgets = dataviews.reduce(function (memo, m) {\n          if (layer.get('id') === m.layer.get('id')) {\n            memo[m.get('id')] = m.toJSON();\n          }\n          return memo;\n        }, {});\n      }\n\n      if (layer.getInfowindowFieldNames().length) {\n        layerConfig.options.attributes = {\n          id: 'cartodb_id',\n          columns: layer.getInfowindowFieldNames()\n        };\n      }\n\n      config.layers.push(layerConfig);\n    }\n  });\n\n  return config;\n};\n\nmodule.exports = LayerGroupConfig;\n",
    "var _ = require('underscore');\nvar NamedMapConfig = {};\n\nNamedMapConfig.generate = function (options) {\n  var layers = options.layers;\n  var config = {};\n\n  _.each(layers, function (layer, index) {\n    config['layer' + index] = layer.isVisible() ? 1 : 0;\n  });\n\n  // TODO: We should add the params\n  // TODO: We should add the auth_token\n  return config;\n};\n\nmodule.exports = NamedMapConfig;\n",
    "var Backbone = require('backbone');\nvar _ = require('underscore');\nvar WindshaftFiltersCollection = require('./filters/collection');\nvar WindshaftLayerGroupConfig = require('./layergroup-config');\nvar WindshaftNamedMapConfig = require('./namedmap-config');\nvar WindshaftConfig = require('./config');\nvar EMPTY_GIF = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nvar WindshaftMap = Backbone.Model.extend({\n\n  initialize: function (attrs, options) {\n    this.client = options.client;\n    this.statTag = options.statTag;\n    this.configGenerator = options.configGenerator;\n\n    // TODO: What params are really used?\n    this.pngParams = ['map_key', 'api_key', 'cache_policy', 'updated_at'];\n    this.gridParams = ['map_key', 'api_key', 'cache_policy', 'updated_at'];\n\n    this.set({\n      urlTemplate: this.client.urlTemplate,\n      userName: this.client.userName\n    });\n  },\n\n  isNamedMap: function () {\n    return this.configGenerator === WindshaftNamedMapConfig;\n  },\n\n  isAnonymousMap: function () {\n    return this.configGenerator === WindshaftLayerGroupConfig;\n  },\n\n  createInstance: function (options) {\n    options = options || {};\n    // WindshaftMap knows what types of layers should be sent to Windshaft:\n    var layers = _.select(options.layers, function (layer) {\n      return layer.get('type') === 'CartoDB' || layer.get('type') === 'torque';\n    });\n    var dataviews = options.dataviews;\n    var sourceLayerId = options.sourceLayerId;\n    var forceFetch = options.forceFetch;\n\n    var mapConfig = this.configGenerator.generate({\n      layers: layers,\n      dataviews: dataviews\n    });\n\n    var filtersFromVisibleLayers = [];\n    if (dataviews) {\n      filtersFromVisibleLayers = dataviews.chain()\n        .filter(function (dataview) {\n          return dataview.layer.isVisible();\n        })\n        .map(function (dataview) {\n          return dataview.filter;\n        })\n        .compact() // not all dataviews have filters\n        .value();\n    }\n\n    var filters = new WindshaftFiltersCollection(filtersFromVisibleLayers, layers);\n\n    this.client.instantiateMap({\n      mapDefinition: mapConfig,\n      statTag: this.statTag,\n      filters: filters.toJSON(),\n      success: function (mapInstance) {\n        this.set(mapInstance);\n        _.each(layers, function (layer, layerIndex) {\n          if (layer.get('type') === 'torque') {\n            layer.set('meta', this.getLayerMeta(layerIndex));\n            layer.set('urls', this.getTiles('torque'));\n          } else if (layer.get('type') === 'CartoDB') {\n            layer.set('meta', this.getLayerMeta(layerIndex));\n          }\n        }, this);\n        this.trigger('instanceCreated', this, sourceLayerId, forceFetch);\n      }.bind(this),\n      error: function (error) {\n        console.log('Error creating the map instance on Windshaft: ' + error);\n      }\n    });\n\n    return this;\n  },\n\n  TILE_EXTENSIONS_BY_LAYER_TYPE: {\n    'mapnik': '.png',\n    'torque': '.json.torque'\n  },\n\n  getBaseURL: function (subhost) {\n    return [\n      this._getHost(subhost),\n      WindshaftConfig.MAPS_API_BASE_URL,\n      this.get('layergroupid')\n    ].join('/');\n  },\n\n  _getHost: function (subhost) {\n    var userName = this.get('userName');\n    var protocol = this._useHTTPS() ? 'https' : 'http';\n    subhost = subhost ? subhost + '.' : '';\n    var host = this.get('urlTemplate').replace('{user}', userName);\n    var cdnHost = this.get('cdn_url') && this.get('cdn_url')[protocol];\n    if (cdnHost) {\n      host = [protocol, '://', subhost, cdnHost, '/', userName].join('');\n    }\n\n    return host;\n  },\n\n  _useHTTPS: function () {\n    return this.get('urlTemplate').indexOf('https') === 0;\n  },\n\n  getDataviewURL: function (options) {\n    var dataviewId = options.dataviewId;\n    var protocol = options.protocol;\n    var url;\n    var layers = this.get('metadata') && this.get('metadata').layers;\n\n    _.each(layers, function (layer) {\n      // TODO layer.widgets is the raw data returned from metadata… should be renamed once the result from Windshaft is changed\n      var dataviews = layer.widgets;\n      for (var id in dataviews) {\n        if (dataviewId === id) {\n          url = dataviews[id].url[protocol];\n          return;\n        }\n      }\n    });\n\n    return url;\n  },\n\n  getTiles: function (layerType, params) {\n    var grids = [];\n    var tiles = [];\n\n    var pngParams = this._encodeParams(params, this.pngParams);\n    var gridParams = this._encodeParams(params, this.gridParams);\n    var subdomains = ['0', '1', '2', '3'];\n\n    if (this._useHTTPS()) {\n      subdomains = [''];\n    }\n\n    layerType = layerType || 'mapnik';\n\n    var layerIndexes = this._getLayerIndexesByType(layerType);\n    if (layerIndexes.length) {\n      var gridTemplate = '/{z}/{x}/{y}';\n\n      for (var i = 0; i < subdomains.length; ++i) {\n        var subdomain = subdomains[i];\n        var tileURLTemplate = [\n          this.getBaseURL(subdomain),\n          '/',\n          layerIndexes.join(','),\n          '/{z}/{x}/{y}',\n          this.TILE_EXTENSIONS_BY_LAYER_TYPE[layerType],\n          (pngParams ? '?' + pngParams : '')\n        ].join('');\n\n        tiles.push(tileURLTemplate);\n\n        // for mapnik layers add grid json too\n        if (layerType === 'mapnik') {\n          for (var layer = 0; layer < this.get('metadata').layers.length; ++layer) {\n            var index = this._getLayerIndexByType(layer, 'mapnik');\n            if (index >= 0) {\n              var gridURLTemplate = [\n                this.getBaseURL(subdomain),\n                '/',\n                index,\n                gridTemplate,\n                '.grid.json',\n                (gridParams ? '?' + gridParams : '')\n              ].join('');\n              grids[layer] = grids[layer] || [];\n              grids[layer].push(gridURLTemplate);\n            }\n          }\n        }\n      }\n    } else {\n      // TODO: Clients of this method should decide what to render if no layers are present\n      tiles = [EMPTY_GIF];\n    }\n\n    this.urls = {\n      tiles: tiles,\n      grids: grids\n    };\n    return this.urls;\n  },\n\n  getLayerMeta: function (layerIndex) {\n    var layerMeta = {};\n    var metadataLayerIndex = this._localLayerIndexToWindshaftLayerIndex(layerIndex);\n    var layers = this.get('metadata') && this.get('metadata').layers;\n    if (layers && layers[metadataLayerIndex]) {\n      layerMeta = layers[metadataLayerIndex].meta || {};\n    }\n    return layerMeta;\n  },\n\n  _localLayerIndexToWindshaftLayerIndex: function (layerIndex) {\n    var layers = this.get('metadata') && this.get('metadata').layers;\n    var hasTiledLayer = layers.length > 0 && layers[0].type === 'http';\n    return hasTiledLayer ? ++layerIndex : layerIndex;\n  },\n\n  _encodeParams: function (params, included) {\n    if (!params) return '';\n    var url_params = [];\n    included = included || _.keys(params);\n    for (var i in included) {\n      var k = included[i];\n      var p = params[k];\n      if (p) {\n        if (_.isArray(p)) {\n          for (var j = 0, len = p.length; j < len; j++) {\n            url_params.push(k + '[]=' + encodeURIComponent(p[j]));\n          }\n        } else {\n          var q = encodeURIComponent(p);\n          q = q.replace(/%7Bx%7D/g, '{x}').replace(/%7By%7D/g, '{y}').replace(/%7Bz%7D/g, '{z}');\n          url_params.push(k + '=' + q);\n        }\n      }\n    }\n    return url_params.join('&');\n  },\n\n  /**\n   * Returns the index of a layer of a given type, as the tiler kwows it.\n   *\n   * @param {string|array} types - Type or types of layers\n   */\n  _getLayerIndexesByType: function (types) {\n    var layers = this.get('metadata') && this.get('metadata').layers;\n\n    if (!layers) {\n      return;\n    }\n    var layerIndexes = [];\n    for (var i = 0; i < layers.length; i++) {\n      var layer = layers[i];\n      var isValidType = false;\n      if (types && types.length > 0) {\n        isValidType = types.indexOf(layer.type) !== -1;\n      }\n      if (isValidType) {\n        layerIndexes.push(i);\n      }\n    }\n    return layerIndexes;\n  },\n\n  /**\n   * Returns the index of a layer of a given type, as the tiler kwows it.\n   *\n   * @param {integer} index - number of layer of the specified type\n   * @param {string} layerType - type of the layers\n   */\n  _getLayerIndexByType: function (index, layerType) {\n    var layers = this.get('metadata') && this.get('metadata').layers;\n\n    if (!layers) {\n      return index;\n    }\n\n    var tilerLayerIndex = {};\n    var j = 0;\n    for (var i = 0; i < layers.length; i++) {\n      if (layers[i].type === layerType) {\n        tilerLayerIndex[j] = i;\n        j++;\n      }\n    }\n    if (tilerLayerIndex[index] === undefined) {\n      return -1;\n    }\n    return tilerLayerIndex[index];\n  }\n});\n\nmodule.exports = WindshaftMap;\n",
    "; var __browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\nvar GeoJSON = function( geojson, options ){\n\n  var _geometryToGoogleMaps = function( geojsonGeometry, opts, geojsonProperties ){\n\n    var googleObj;\n\n    switch ( geojsonGeometry.type ){\n      case \"Point\":\n        opts.position = new google.maps.LatLng(geojsonGeometry.coordinates[1], geojsonGeometry.coordinates[0]);\n        googleObj = new google.maps.Marker(opts);\n        if (geojsonProperties) {\n          googleObj.set(\"geojsonProperties\", geojsonProperties);\n        }\n        break;\n\n      case \"MultiPoint\":\n        googleObj = [];\n        for (var i = 0; i < geojsonGeometry.coordinates.length; i++){\n          opts.position = new google.maps.LatLng(geojsonGeometry.coordinates[i][1], geojsonGeometry.coordinates[i][0]);\n          googleObj.push(new google.maps.Marker(opts));\n        }\n        if (geojsonProperties) {\n          for (var k = 0; k < googleObj.length; k++){\n            googleObj[k].set(\"geojsonProperties\", geojsonProperties);\n          }\n        }\n        break;\n\n      case \"LineString\":\n        var path = [];\n        for (var i = 0; i < geojsonGeometry.coordinates.length; i++){\n          var coord = geojsonGeometry.coordinates[i];\n          var ll = new google.maps.LatLng(coord[1], coord[0]);\n          path.push(ll);\n        }\n        opts.path = path;\n        googleObj = new google.maps.Polyline(opts);\n        if (geojsonProperties) {\n          googleObj.set(\"geojsonProperties\", geojsonProperties);\n        }\n        break;\n\n      case \"MultiLineString\":\n        googleObj = [];\n        for (var i = 0; i < geojsonGeometry.coordinates.length; i++){\n          var path = [];\n          for (var j = 0; j < geojsonGeometry.coordinates[i].length; j++){\n            var coord = geojsonGeometry.coordinates[i][j];\n            var ll = new google.maps.LatLng(coord[1], coord[0]);\n            path.push(ll);\n          }\n          opts.path = path;\n          googleObj.push(new google.maps.Polyline(opts));\n        }\n        if (geojsonProperties) {\n          for (var k = 0; k < googleObj.length; k++){\n            googleObj[k].set(\"geojsonProperties\", geojsonProperties);\n          }\n        }\n        break;\n\n      case \"Polygon\":\n        var paths = [];\n        var exteriorDirection;\n        var interiorDirection;\n        for (var i = 0; i < geojsonGeometry.coordinates.length; i++){\n          var path = [];\n          for (var j = 0; j < geojsonGeometry.coordinates[i].length; j++){\n            var ll = new google.maps.LatLng(geojsonGeometry.coordinates[i][j][1], geojsonGeometry.coordinates[i][j][0]);\n            path.push(ll);\n          }\n          if(!i){\n            exteriorDirection = _ccw(path);\n            paths.push(path);\n          }else if(i == 1){\n            interiorDirection = _ccw(path);\n            if(exteriorDirection == interiorDirection){\n              paths.push(path.reverse());\n            }else{\n              paths.push(path);\n            }\n          }else{\n            if(exteriorDirection == interiorDirection){\n              paths.push(path.reverse());\n            }else{\n              paths.push(path);\n            }\n          }\n        }\n        opts.paths = paths;\n        googleObj = new google.maps.Polygon(opts);\n        if (geojsonProperties) {\n          googleObj.set(\"geojsonProperties\", geojsonProperties);\n        }\n        break;\n\n      case \"MultiPolygon\":\n        googleObj = [];\n        for (var i = 0; i < geojsonGeometry.coordinates.length; i++){\n          var paths = [];\n          var exteriorDirection;\n          var interiorDirection;\n          for (var j = 0; j < geojsonGeometry.coordinates[i].length; j++){\n            var path = [];\n            for (var k = 0; k < geojsonGeometry.coordinates[i][j].length - 1; k++){\n              var ll = new google.maps.LatLng(geojsonGeometry.coordinates[i][j][k][1], geojsonGeometry.coordinates[i][j][k][0]);\n              path.push(ll);\n            }\n            if(!j){\n              exteriorDirection = _ccw(path);\n              paths.push(path);\n            }else if(j == 1){\n              interiorDirection = _ccw(path);\n              if(exteriorDirection == interiorDirection){\n                paths.push(path.reverse());\n              }else{\n                paths.push(path);\n              }\n            }else{\n              if(exteriorDirection == interiorDirection){\n                paths.push(path.reverse());\n              }else{\n                paths.push(path);\n              }\n            }\n          }\n          opts.paths = paths;\n          googleObj.push(new google.maps.Polygon(opts));\n        }\n        if (geojsonProperties) {\n          for (var k = 0; k < googleObj.length; k++){\n            googleObj[k].set(\"geojsonProperties\", geojsonProperties);\n          }\n        }\n        break;\n\n      case \"GeometryCollection\":\n        googleObj = [];\n        if (!geojsonGeometry.geometries){\n          googleObj = _error(\"Invalid GeoJSON object: GeometryCollection object missing \\\"geometries\\\" member.\");\n        }else{\n          for (var i = 0; i < geojsonGeometry.geometries.length; i++){\n            googleObj.push(_geometryToGoogleMaps(geojsonGeometry.geometries[i], opts, geojsonProperties || null));\n          }\n        }\n        break;\n\n      default:\n        googleObj = _error(\"Invalid GeoJSON object: Geometry object must be one of \\\"Point\\\", \\\"LineString\\\", \\\"Polygon\\\" or \\\"MultiPolygon\\\".\");\n    }\n\n    return googleObj;\n\n  };\n\n  var _error = function( message ){\n\n    return {\ntype: \"Error\",\n        message: message\n    };\n\n  };\n\n  var _ccw = function( path ){\n    var isCCW;\n    var a = 0;\n    for (var i = 0; i < path.length-2; i++){\n      a += ((path[i+1].lat() - path[i].lat()) * (path[i+2].lng() - path[i].lng()) - (path[i+2].lat() - path[i].lat()) * (path[i+1].lng() - path[i].lng()));\n    }\n    if(a > 0){\n      isCCW = true;\n    }\n    else{\n      isCCW = false;\n    }\n    return isCCW;\n  };\n\n  var obj;\n\n  var opts = options || {};\n\n  switch ( geojson.type ){\n\n    case \"FeatureCollection\":\n      if (!geojson.features){\n        obj = _error(\"Invalid GeoJSON object: FeatureCollection object missing \\\"features\\\" member.\");\n      }else{\n        obj = [];\n        for (var i = 0; i < geojson.features.length; i++){\n          obj.push(_geometryToGoogleMaps(geojson.features[i].geometry, opts, geojson.features[i].properties));\n        }\n      }\n      break;\n\n    case \"GeometryCollection\":\n      if (!geojson.geometries){\n        obj = _error(\"Invalid GeoJSON object: GeometryCollection object missing \\\"geometries\\\" member.\");\n      }else{\n        obj = [];\n        for (var i = 0; i < geojson.geometries.length; i++){\n          obj.push(_geometryToGoogleMaps(geojson.geometries[i], opts));\n        }\n      }\n      break;\n\n    case \"Feature\":\n      if (!( geojson.properties && geojson.geometry )){\n        obj = _error(\"Invalid GeoJSON object: Feature object missing \\\"properties\\\" or \\\"geometry\\\" member.\");\n      }else{\n        obj = _geometryToGoogleMaps(geojson.geometry, opts, geojson.properties);\n      }\n      break;\n\n    case \"Point\": case \"MultiPoint\": case \"LineString\": case \"MultiLineString\": case \"Polygon\": case \"MultiPolygon\":\n      obj = geojson.coordinates\n        ? obj = _geometryToGoogleMaps(geojson, opts)\n        : _error(\"Invalid GeoJSON object: Geometry object missing \\\"coordinates\\\" member.\");\n      break;\n\n    default:\n      obj = _error(\"Invalid GeoJSON object: GeoJSON object must be one of \\\"Point\\\", \\\"LineString\\\", \\\"Polygon\\\", \\\"MultiPolygon\\\", \\\"Feature\\\", \\\"FeatureCollection\\\" or \\\"GeometryCollection\\\".\");\n\n  }\n\n  return obj;\n\n};\n\n; browserify_shim__define__module__export__(typeof GeoJSON != \"undefined\" ? GeoJSON : window.GeoJSON);\n\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n",
    "\n; _ = global._ = require(\"underscore\");\njQuery = global.jQuery = require(\"jquery\");\n; var __browserify_shim_require__=require;(function browserifyShim(module, define, require) {\n(function($) {\n  $.fn.clipPath = function(w, h, x, y) {\n    this.filter('[data-clipPath]').each(function(id) {\n\n      var path = $(this).attr('data-clipPath');\n      var src = $(this).attr('src');\n\n      var tpl = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" class=\"CDB-infowindow-mask\" width=\"<%- w %>\" height=\"<%- h %>\" viewBox=\"0 0 <%- w %> <%- h %>\">';\n      tpl += '<defs><clipPath id=\"maskID<%-id %>\"><path d=\"<%-path %>\"/></clipPath></defs>';\n      tpl += '<image clip-path=\"url(#maskID<%-id %>)\" x=\"<%- x %>\" y=\"<%- y %>\" width=\"<%-w %>\" height=\"<%-h %>\" xlink:href=\"<%-src %>\" />';\n      tpl += '</svg>';\n\n      var svg = $(_.template(tpl)({ id: id, x: x, y: -y, w: w, h: h, src: src, path: path }));\n\n      $(this).replaceWith(svg);\n    });\n\n    return this;\n  };\n}(jQuery));\n\n}).call(global, module, undefined, undefined);\n",
    "; var __browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\n// -------------------------------------------------------------------------------------------------------------------\n// This file is was created from the google-caja project, and the standalone sanitizer // cd ~/src/cartodb\n// https://code.google.com/p/google-caja/wiki/JsHtmlSanitizer\n//\n// Steps to rebuild this file:\n// $ git clone https://github.com/google/caja.git google-caja\n// $ cd google-caja\n// $ ant\n// $ cp ant-lib/com/google/caja/plugin/html-css-sanitizer-bundle.js /path/to/cartodb.js/vendor/\n//\n// Additional changes after the built file above:\n// - Added: This header\n// - Modified: `iframe` element. Mark it as unsafe changing code from 4 to 16. (line: 3543)\n// - Modified: `sanitizeAttribs` at end, to allow \"data-*\"\" attributes (lines ~4755-4761)\n// - changed policy for a::target attribute to be allowed (html4.ATTRIBS: { 'a::target': ... changed value from 10 to 0) (line 3211)\n// -------------------------------------------------------------------------------------------------------------------\n\n\n/* Copyright Google Inc.\n * Licensed under the Apache Licence Version 2.0\n * Autogenerated at Wed Nov 25 17:35:12 CET 2015\n * \\@overrides window\n * \\@provides cssSchema, CSS_PROP_BIT_QUANTITY, CSS_PROP_BIT_HASH_VALUE, CSS_PROP_BIT_NEGATIVE_QUANTITY, CSS_PROP_BIT_QSTRING, CSS_PROP_BIT_URL, CSS_PROP_BIT_UNRESERVED_WORD, CSS_PROP_BIT_UNICODE_RANGE, CSS_PROP_BIT_GLOBAL_NAME, CSS_PROP_BIT_PROPERTY_NAME */\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_QUANTITY = 1;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_HASH_VALUE = 2;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_NEGATIVE_QUANTITY = 4;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_QSTRING = 8;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_URL = 16;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_UNRESERVED_WORD = 64;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_UNICODE_RANGE = 128;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_GLOBAL_NAME = 512;\n/**\n * @const\n * @type {number}\n */\nvar CSS_PROP_BIT_PROPERTY_NAME = 1024;\nvar cssSchema = (function () {\n    var L = [ [ 'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure',\n        'beige', 'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet',\n        'brown', 'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral',\n        'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue',\n        'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkkhaki',\n        'darkmagenta', 'darkolivegreen', 'darkorange', 'darkorchid', 'darkred',\n        'darksalmon', 'darkseagreen', 'darkslateblue', 'darkslategray',\n        'darkturquoise', 'darkviolet', 'deeppink', 'deepskyblue', 'dimgray',\n        'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia',\n        'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'green',\n        'greenyellow', 'honeydew', 'hotpink', 'indianred', 'indigo', 'ivory',\n        'khaki', 'lavender', 'lavenderblush', 'lawngreen', 'lemonchiffon',\n        'lightblue', 'lightcoral', 'lightcyan', 'lightgoldenrodyellow',\n        'lightgreen', 'lightgrey', 'lightpink', 'lightsalmon', 'lightseagreen',\n        'lightskyblue', 'lightslategray', 'lightsteelblue', 'lightyellow',\n        'lime', 'limegreen', 'linen', 'magenta', 'maroon', 'mediumaquamarine',\n        'mediumblue', 'mediumorchid', 'mediumpurple', 'mediumseagreen',\n        'mediumslateblue', 'mediumspringgreen', 'mediumturquoise',\n        'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose',\n        'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab',\n        'orange', 'orangered', 'orchid', 'palegoldenrod', 'palegreen',\n        'paleturquoise', 'palevioletred', 'papayawhip', 'peachpuff', 'peru',\n        'pink', 'plum', 'powderblue', 'purple', 'red', 'rosybrown',\n        'royalblue', 'saddlebrown', 'salmon', 'sandybrown', 'seagreen',\n        'seashell', 'sienna', 'silver', 'skyblue', 'slateblue', 'slategray',\n        'snow', 'springgreen', 'steelblue', 'tan', 'teal', 'thistle', 'tomato',\n        'transparent', 'turquoise', 'violet', 'wheat', 'white', 'whitesmoke',\n        'yellow', 'yellowgreen' ], [ 'all-scroll', 'col-resize', 'crosshair',\n        'default', 'e-resize', 'hand', 'help', 'move', 'n-resize', 'ne-resize',\n        'no-drop', 'not-allowed', 'nw-resize', 'pointer', 'progress',\n        'row-resize', 's-resize', 'se-resize', 'sw-resize', 'text',\n        'vertical-text', 'w-resize', 'wait' ], [ 'armenian', 'decimal',\n        'decimal-leading-zero', 'disc', 'georgian', 'lower-alpha',\n        'lower-greek', 'lower-latin', 'lower-roman', 'square', 'upper-alpha',\n        'upper-latin', 'upper-roman' ], [ '100', '200', '300', '400', '500',\n        '600', '700', '800', '900', 'bold', 'bolder', 'lighter' ], [\n        'block-level', 'inline-level', 'table-caption', 'table-cell',\n        'table-column', 'table-column-group', 'table-footer-group',\n        'table-header-group', 'table-row', 'table-row-group' ], [ 'condensed',\n        'expanded', 'extra-condensed', 'extra-expanded', 'narrower',\n        'semi-condensed', 'semi-expanded', 'ultra-condensed', 'ultra-expanded',\n        'wider' ], [ 'inherit', 'inline', 'inline-block', 'inline-box',\n        'inline-flex', 'inline-grid', 'inline-list-item', 'inline-stack',\n        'inline-table', 'run-in' ], [ 'behind', 'center-left', 'center-right',\n        'far-left', 'far-right', 'left-side', 'leftwards', 'right-side',\n        'rightwards' ], [ 'large', 'larger', 'small', 'smaller', 'x-large',\n        'x-small', 'xx-large', 'xx-small' ], [ 'dashed', 'dotted', 'double',\n        'groove', 'outset', 'ridge', 'solid' ], [ 'ease', 'ease-in',\n        'ease-in-out', 'ease-out', 'linear', 'step-end', 'step-start' ], [\n        'at', 'closest-corner', 'closest-side', 'ellipse', 'farthest-corner',\n        'farthest-side' ], [ 'baseline', 'middle', 'sub', 'super',\n        'text-bottom', 'text-top' ], [ 'caption', 'icon', 'menu',\n        'message-box', 'small-caption', 'status-bar' ], [ 'fast', 'faster',\n        'slow', 'slower', 'x-fast', 'x-slow' ], [ 'above', 'below', 'higher',\n        'level', 'lower' ], [ 'cursive', 'fantasy', 'monospace', 'sans-serif',\n        'serif' ], [ 'loud', 'silent', 'soft', 'x-loud', 'x-soft' ], [\n        'no-repeat', 'repeat-x', 'repeat-y', 'round', 'space' ], [ 'blink',\n        'line-through', 'overline', 'underline' ], [ 'block', 'flex', 'grid',\n        'table' ], [ 'high', 'low', 'x-high', 'x-low' ], [ 'nowrap', 'pre',\n        'pre-line', 'pre-wrap' ], [ 'absolute', 'relative', 'static' ], [\n        'alternate', 'alternate-reverse', 'reverse' ], [ 'border-box',\n        'content-box', 'padding-box' ], [ 'capitalize', 'lowercase',\n        'uppercase' ], [ 'child', 'female', 'male' ], [ '=', 'opacity' ], [\n        'backwards', 'forwards' ], [ 'bidi-override', 'embed' ], [ 'bottom',\n        'top' ], [ 'break-all', 'keep-all' ], [ 'clip', 'ellipsis' ], [\n        'contain', 'cover' ], [ 'continuous', 'digits' ], [ 'end', 'start' ], [\n        'flat', 'preserve-3d' ], [ 'hide', 'show' ], [ 'horizontal', 'vertical'\n      ], [ 'inside', 'outside' ], [ 'italic', 'oblique' ], [ 'left', 'right' ],\n      [ 'ltr', 'rtl' ], [ 'no-content', 'no-display' ], [ 'paused', 'running' ]\n      , [ 'suppress', 'unrestricted' ], [ 'thick', 'thin' ], [ ',' ], [ '/' ],\n      [ 'all' ], [ 'always' ], [ 'auto' ], [ 'avoid' ], [ 'both' ], [\n        'break-word' ], [ 'center' ], [ 'circle' ], [ 'code' ], [ 'collapse' ],\n      [ 'contents' ], [ 'fixed' ], [ 'hidden' ], [ 'infinite' ], [ 'inset' ], [\n        'invert' ], [ 'justify' ], [ 'list-item' ], [ 'local' ], [ 'medium' ],\n      [ 'mix' ], [ 'none' ], [ 'normal' ], [ 'once' ], [ 'repeat' ], [ 'scroll'\n      ], [ 'separate' ], [ 'small-caps' ], [ 'spell-out' ], [ 'to' ], [\n        'visible' ] ];\n    var schema = {\n      'animation': {\n        'cssPropBits': 517,\n        'cssLitGroup': [ L[ 10 ], L[ 24 ], L[ 29 ], L[ 45 ], L[ 48 ], L[ 54 ],\n          L[ 63 ], L[ 71 ], L[ 72 ] ],\n        'cssFns': [ 'cubic-bezier()', 'steps()' ]\n      },\n      'animation-delay': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'animation-direction': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 24 ], L[ 48 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'animation-duration': 'animation-delay',\n      'animation-fill-mode': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 29 ], L[ 48 ], L[ 54 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'animation-iteration-count': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 48 ], L[ 63 ] ],\n        'cssFns': [ ]\n      },\n      'animation-name': {\n        'cssPropBits': 512,\n        'cssLitGroup': [ L[ 48 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'animation-play-state': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 45 ], L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'animation-timing-function': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 10 ], L[ 48 ] ],\n        'cssFns': [ 'cubic-bezier()', 'steps()' ]\n      },\n      'appearance': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'azimuth': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 7 ], L[ 42 ], L[ 56 ] ],\n        'cssFns': [ ]\n      },\n      'backface-visibility': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 59 ], L[ 62 ], L[ 80 ] ],\n        'cssFns': [ ]\n      },\n      'background': {\n        'cssPropBits': 23,\n        'cssLitGroup': [ L[ 0 ], L[ 18 ], L[ 25 ], L[ 31 ], L[ 34 ], L[ 42 ],\n          L[ 48 ], L[ 49 ], L[ 52 ], L[ 56 ], L[ 61 ], L[ 68 ], L[ 71 ], L[ 74\n          ], L[ 75 ] ],\n        'cssFns': [ 'image()', 'linear-gradient()', 'radial-gradient()',\n          'repeating-linear-gradient()', 'repeating-radial-gradient()',\n          'rgb()', 'rgba()' ]\n      },\n      'background-attachment': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 48 ], L[ 61 ], L[ 68 ], L[ 75 ] ],\n        'cssFns': [ ]\n      },\n      'background-color': {\n        'cssPropBits': 2,\n        'cssLitGroup': [ L[ 0 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'background-image': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 48 ], L[ 71 ] ],\n        'cssFns': [ 'image()', 'linear-gradient()', 'radial-gradient()',\n          'repeating-linear-gradient()', 'repeating-radial-gradient()' ]\n      },\n      'background-position': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 31 ], L[ 42 ], L[ 48 ], L[ 56 ] ],\n        'cssFns': [ ]\n      },\n      'background-repeat': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 18 ], L[ 48 ], L[ 74 ] ],\n        'cssFns': [ ]\n      },\n      'background-size': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 34 ], L[ 48 ], L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'border': {\n        'cssPropBits': 7,\n        'cssLitGroup': [ L[ 0 ], L[ 9 ], L[ 47 ], L[ 62 ], L[ 64 ], L[ 69 ], L[\n            71 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'border-bottom': 'border',\n      'border-bottom-color': 'background-color',\n      'border-bottom-left-radius': {\n        'cssPropBits': 5,\n        'cssFns': [ ]\n      },\n      'border-bottom-right-radius': 'border-bottom-left-radius',\n      'border-bottom-style': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 9 ], L[ 62 ], L[ 64 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'border-bottom-width': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 47 ], L[ 69 ] ],\n        'cssFns': [ ]\n      },\n      'border-collapse': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 59 ], L[ 76 ] ],\n        'cssFns': [ ]\n      },\n      'border-color': 'background-color',\n      'border-left': 'border',\n      'border-left-color': 'background-color',\n      'border-left-style': 'border-bottom-style',\n      'border-left-width': 'border-bottom-width',\n      'border-radius': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 49 ] ],\n        'cssFns': [ ]\n      },\n      'border-right': 'border',\n      'border-right-color': 'background-color',\n      'border-right-style': 'border-bottom-style',\n      'border-right-width': 'border-bottom-width',\n      'border-spacing': 'border-bottom-left-radius',\n      'border-style': 'border-bottom-style',\n      'border-top': 'border',\n      'border-top-color': 'background-color',\n      'border-top-left-radius': 'border-bottom-left-radius',\n      'border-top-right-radius': 'border-bottom-left-radius',\n      'border-top-style': 'border-bottom-style',\n      'border-top-width': 'border-bottom-width',\n      'border-width': 'border-bottom-width',\n      'bottom': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'box': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 60 ], L[ 71 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'box-shadow': {\n        'cssPropBits': 7,\n        'cssLitGroup': [ L[ 0 ], L[ 48 ], L[ 64 ], L[ 71 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'box-sizing': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 25 ] ],\n        'cssFns': [ ]\n      },\n      'caption-side': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 31 ] ],\n        'cssFns': [ ]\n      },\n      'clear': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 42 ], L[ 54 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'clip': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 52 ] ],\n        'cssFns': [ 'rect()' ]\n      },\n      'color': 'background-color',\n      'content': {\n        'cssPropBits': 8,\n        'cssLitGroup': [ L[ 71 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'cue': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'cue-after': 'cue',\n      'cue-before': 'cue',\n      'cursor': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 1 ], L[ 48 ], L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'direction': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 43 ] ],\n        'cssFns': [ ]\n      },\n      'display': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 4 ], L[ 6 ], L[ 20 ], L[ 52 ], L[ 67 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'display-extras': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 67 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'display-inside': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 20 ], L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'display-outside': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 4 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'elevation': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 15 ] ],\n        'cssFns': [ ]\n      },\n      'empty-cells': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 38 ] ],\n        'cssFns': [ ]\n      },\n      'filter': {\n        'cssPropBits': 0,\n        'cssFns': [ 'alpha()' ]\n      },\n      'float': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 42 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'font': {\n        'cssPropBits': 73,\n        'cssLitGroup': [ L[ 3 ], L[ 8 ], L[ 13 ], L[ 16 ], L[ 41 ], L[ 48 ], L[\n            49 ], L[ 69 ], L[ 72 ], L[ 77 ] ],\n        'cssFns': [ ]\n      },\n      'font-family': {\n        'cssPropBits': 72,\n        'cssLitGroup': [ L[ 16 ], L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'font-size': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 8 ], L[ 69 ] ],\n        'cssFns': [ ]\n      },\n      'font-stretch': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 5 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'font-style': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 41 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'font-variant': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 72 ], L[ 77 ] ],\n        'cssFns': [ ]\n      },\n      'font-weight': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 3 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'height': 'bottom',\n      'left': 'bottom',\n      'letter-spacing': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'line-height': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'list-style': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 2 ], L[ 40 ], L[ 57 ], L[ 71 ] ],\n        'cssFns': [ 'image()', 'linear-gradient()', 'radial-gradient()',\n          'repeating-linear-gradient()', 'repeating-radial-gradient()' ]\n      },\n      'list-style-image': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ 'image()', 'linear-gradient()', 'radial-gradient()',\n          'repeating-linear-gradient()', 'repeating-radial-gradient()' ]\n      },\n      'list-style-position': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 40 ] ],\n        'cssFns': [ ]\n      },\n      'list-style-type': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 2 ], L[ 57 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'margin': 'bottom',\n      'margin-bottom': 'bottom',\n      'margin-left': 'bottom',\n      'margin-right': 'bottom',\n      'margin-top': 'bottom',\n      'max-height': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 52 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'max-width': 'max-height',\n      'min-height': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'min-width': 'min-height',\n      'opacity': {\n        'cssPropBits': 1,\n        'cssFns': [ ]\n      },\n      'outline': {\n        'cssPropBits': 7,\n        'cssLitGroup': [ L[ 0 ], L[ 9 ], L[ 47 ], L[ 62 ], L[ 64 ], L[ 65 ], L[\n            69 ], L[ 71 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'outline-color': {\n        'cssPropBits': 2,\n        'cssLitGroup': [ L[ 0 ], L[ 65 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'outline-style': 'border-bottom-style',\n      'outline-width': 'border-bottom-width',\n      'overflow': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 52 ], L[ 62 ], L[ 75 ], L[ 80 ] ],\n        'cssFns': [ ]\n      },\n      'overflow-wrap': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 55 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'overflow-x': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 44 ], L[ 52 ], L[ 62 ], L[ 75 ], L[ 80 ] ],\n        'cssFns': [ ]\n      },\n      'overflow-y': 'overflow-x',\n      'padding': 'opacity',\n      'padding-bottom': 'opacity',\n      'padding-left': 'opacity',\n      'padding-right': 'opacity',\n      'padding-top': 'opacity',\n      'page-break-after': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 42 ], L[ 51 ], L[ 52 ], L[ 53 ] ],\n        'cssFns': [ ]\n      },\n      'page-break-before': 'page-break-after',\n      'page-break-inside': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 52 ], L[ 53 ] ],\n        'cssFns': [ ]\n      },\n      'pause': 'border-bottom-left-radius',\n      'pause-after': 'border-bottom-left-radius',\n      'pause-before': 'border-bottom-left-radius',\n      'perspective': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'perspective-origin': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 31 ], L[ 42 ], L[ 56 ] ],\n        'cssFns': [ ]\n      },\n      'pitch': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 21 ], L[ 69 ] ],\n        'cssFns': [ ]\n      },\n      'pitch-range': 'border-bottom-left-radius',\n      'play-during': {\n        'cssPropBits': 16,\n        'cssLitGroup': [ L[ 52 ], L[ 70 ], L[ 71 ], L[ 74 ] ],\n        'cssFns': [ ]\n      },\n      'position': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 23 ] ],\n        'cssFns': [ ]\n      },\n      'quotes': {\n        'cssPropBits': 8,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'resize': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 39 ], L[ 54 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'richness': 'border-bottom-left-radius',\n      'right': 'bottom',\n      'speak': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 71 ], L[ 72 ], L[ 78 ] ],\n        'cssFns': [ ]\n      },\n      'speak-header': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 51 ], L[ 73 ] ],\n        'cssFns': [ ]\n      },\n      'speak-numeral': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 35 ] ],\n        'cssFns': [ ]\n      },\n      'speak-punctuation': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 58 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'speech-rate': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 14 ], L[ 69 ] ],\n        'cssFns': [ ]\n      },\n      'stress': 'border-bottom-left-radius',\n      'table-layout': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 52 ], L[ 61 ] ],\n        'cssFns': [ ]\n      },\n      'text-align': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 42 ], L[ 56 ], L[ 66 ] ],\n        'cssFns': [ ]\n      },\n      'text-decoration': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 19 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'text-indent': 'border-bottom-left-radius',\n      'text-overflow': {\n        'cssPropBits': 8,\n        'cssLitGroup': [ L[ 33 ] ],\n        'cssFns': [ ]\n      },\n      'text-shadow': 'box-shadow',\n      'text-transform': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 26 ], L[ 71 ] ],\n        'cssFns': [ ]\n      },\n      'text-wrap': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 46 ], L[ 71 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'top': 'bottom',\n      'transform': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 71 ] ],\n        'cssFns': [ 'matrix()', 'perspective()', 'rotate()', 'rotate3d()',\n          'rotatex()', 'rotatey()', 'rotatez()', 'scale()', 'scale3d()',\n          'scalex()', 'scaley()', 'scalez()', 'skew()', 'skewx()', 'skewy()',\n          'translate()', 'translate3d()', 'translatex()', 'translatey()',\n          'translatez()' ]\n      },\n      'transform-origin': 'perspective-origin',\n      'transform-style': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 37 ] ],\n        'cssFns': [ ]\n      },\n      'transition': {\n        'cssPropBits': 1029,\n        'cssLitGroup': [ L[ 10 ], L[ 48 ], L[ 50 ], L[ 71 ] ],\n        'cssFns': [ 'cubic-bezier()', 'steps()' ]\n      },\n      'transition-delay': 'animation-delay',\n      'transition-duration': 'animation-delay',\n      'transition-property': {\n        'cssPropBits': 1024,\n        'cssLitGroup': [ L[ 48 ], L[ 50 ] ],\n        'cssFns': [ ]\n      },\n      'transition-timing-function': 'animation-timing-function',\n      'unicode-bidi': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 30 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'vertical-align': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 12 ], L[ 31 ] ],\n        'cssFns': [ ]\n      },\n      'visibility': 'backface-visibility',\n      'voice-family': {\n        'cssPropBits': 8,\n        'cssLitGroup': [ L[ 27 ], L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'volume': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 17 ], L[ 69 ] ],\n        'cssFns': [ ]\n      },\n      'white-space': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 22 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'width': 'min-height',\n      'word-break': {\n        'cssPropBits': 0,\n        'cssLitGroup': [ L[ 32 ], L[ 72 ] ],\n        'cssFns': [ ]\n      },\n      'word-spacing': 'letter-spacing',\n      'word-wrap': 'overflow-wrap',\n      'z-index': 'bottom',\n      'zoom': 'line-height',\n      'cubic-bezier()': 'animation-delay',\n      'steps()': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 36 ], L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'image()': {\n        'cssPropBits': 18,\n        'cssLitGroup': [ L[ 0 ], L[ 48 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'linear-gradient()': {\n        'cssPropBits': 7,\n        'cssLitGroup': [ L[ 0 ], L[ 31 ], L[ 42 ], L[ 48 ], L[ 79 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'radial-gradient()': {\n        'cssPropBits': 7,\n        'cssLitGroup': [ L[ 0 ], L[ 11 ], L[ 31 ], L[ 42 ], L[ 48 ], L[ 56 ],\n          L[ 57 ] ],\n        'cssFns': [ 'rgb()', 'rgba()' ]\n      },\n      'repeating-linear-gradient()': 'linear-gradient()',\n      'repeating-radial-gradient()': 'radial-gradient()',\n      'rgb()': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 48 ] ],\n        'cssFns': [ ]\n      },\n      'rgba()': 'rgb()',\n      'rect()': {\n        'cssPropBits': 5,\n        'cssLitGroup': [ L[ 48 ], L[ 52 ] ],\n        'cssFns': [ ]\n      },\n      'alpha()': {\n        'cssPropBits': 1,\n        'cssLitGroup': [ L[ 28 ] ],\n        'cssFns': [ ]\n      },\n      'matrix()': 'animation-delay',\n      'perspective()': 'border-bottom-left-radius',\n      'rotate()': 'border-bottom-left-radius',\n      'rotate3d()': 'animation-delay',\n      'rotatex()': 'border-bottom-left-radius',\n      'rotatey()': 'border-bottom-left-radius',\n      'rotatez()': 'border-bottom-left-radius',\n      'scale()': 'animation-delay',\n      'scale3d()': 'animation-delay',\n      'scalex()': 'border-bottom-left-radius',\n      'scaley()': 'border-bottom-left-radius',\n      'scalez()': 'border-bottom-left-radius',\n      'skew()': 'animation-delay',\n      'skewx()': 'border-bottom-left-radius',\n      'skewy()': 'border-bottom-left-radius',\n      'translate()': 'animation-delay',\n      'translate3d()': 'animation-delay',\n      'translatex()': 'border-bottom-left-radius',\n      'translatey()': 'border-bottom-left-radius',\n      'translatez()': 'border-bottom-left-radius'\n    };\n    if (true) {\n      for (var key in schema) {\n        if ('string' === typeof schema[ key ] &&\n          Object.hasOwnProperty.call(schema, key)) {\n          schema[ key ] = schema[ schema[ key ] ];\n        }\n      }\n    }\n    return schema;\n  })();\nif (typeof window !== 'undefined') {\n  window['cssSchema'] = cssSchema;\n}\n;\n// Copyright (C) 2011 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * A lexical scannar for CSS3 as defined at http://www.w3.org/TR/css3-syntax .\n *\n * @author Mike Samuel <mikesamuel@gmail.com>\n * \\@provides lexCss, decodeCss\n * \\@overrides window\n */\n\nvar lexCss;\nvar decodeCss;\n\n(function () {\n\n  /**\n   * Decodes an escape sequence as specified in CSS3 section 4.1.\n   * http://www.w3.org/TR/css3-syntax/#characters\n   * @private\n   */\n  function decodeCssEscape(s) {\n    var i = parseInt(s.substring(1), 16);\n    // If parseInt didn't find a hex diigt, it returns NaN so return the\n    // escaped character.\n    // Otherwise, parseInt will stop at the first non-hex digit so there's no\n    // need to worry about trailing whitespace.\n    if (i > 0xffff) {\n      // A supplemental codepoint.\n      return i -= 0x10000,\n        String.fromCharCode(\n            0xd800 + (i >> 10),\n            0xdc00 + (i & 0x3FF));\n    } else if (i == i) {\n      return String.fromCharCode(i);\n    } else if (s[1] < ' ') {\n      // \"a backslash followed by a newline is ignored\".\n      return '';\n    } else {\n      return s[1];\n    }\n  }\n\n  /**\n   * Returns an equivalent CSS string literal given plain text: foo -> \"foo\".\n   * @private\n   */\n  function escapeCssString(s, replacer) {\n    return '\"' + s.replace(/[\\u0000-\\u001f\\\\\\\"<>]/g, replacer) + '\"';\n  }\n\n  /**\n   * Maps chars to CSS escaped equivalents: \"\\n\" -> \"\\\\a \".\n   * @private\n   */\n  function escapeCssStrChar(ch) {\n    return cssStrChars[ch]\n        || (cssStrChars[ch] = '\\\\' + ch.charCodeAt(0).toString(16) + ' ');\n  }\n\n  /**\n   * Maps chars to URI escaped equivalents: \"\\n\" -> \"%0a\".\n   * @private\n   */\n  function escapeCssUrlChar(ch) {\n    return cssUrlChars[ch]\n        || (cssUrlChars[ch] = (ch < '\\x10' ? '%0' : '%')\n            + ch.charCodeAt(0).toString(16));\n  }\n\n  /**\n   * Mapping of CSS special characters to escaped equivalents.\n   * @private\n   */\n  var cssStrChars = {\n    '\\\\': '\\\\\\\\'\n  };\n\n  /**\n   * Mapping of CSS special characters to URL-escaped equivalents.\n   * @private\n   */\n  var cssUrlChars = {\n    '\\\\': '%5c'\n  };\n\n  // The comments below are copied from the CSS3 module syntax at\n  // http://www.w3.org/TR/css3-syntax .\n  // These string constants minify out when this is run-through closure\n  // compiler.\n  // Rules that have been adapted have comments prefixed with \"Diff:\", and\n  // where rules have been combined to avoid back-tracking in the regex engine\n  // or to work around limitations, there is a comment prefixed with\n  // \"NewRule:\".\n\n  // In the below, we assume CRLF and CR have been normalize to CR.\n\n  // wc  ::=  #x9 | #xA | #xC | #xD | #x20\n  var WC = '[\\\\t\\\\n\\\\f ]';\n  // w  ::=  wc*\n  var W = WC + '*';\n  // nl  ::=  #xA | #xD #xA | #xD | #xC\n  var NL = '[\\\\n\\\\f]';\n  // nonascii  ::=  [#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]\n  // NewRule: Supplemental codepoints are represented as surrogate pairs in JS.\n  var SURROGATE_PAIR = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\n  var NONASCII = '[\\\\u0080-\\\\ud7ff\\\\ue000-\\\\ufffd]|' + SURROGATE_PAIR;\n  // unicode  ::=  '\\' [0-9a-fA-F]{1,6} wc?\n  // NewRule: No point in having ESCAPE do (\\\\x|\\\\y)\n  var UNICODE_TAIL = '[0-9a-fA-F]{1,6}' + WC + '?';\n  var UNICODE = '\\\\\\\\' + UNICODE_TAIL;\n  // escape  ::=  unicode\n  //           | '\\' [#x20-#x7E#x80-#xD7FF#xE000-#xFFFD#x10000-#x10FFFF]\n  // NewRule: Below we use escape tail to efficiently match an escape or a\n  // line continuation so we can decode string content.\n  var ESCAPE_TAIL = '(?:' + UNICODE_TAIL\n      + '|[\\\\u0020-\\\\u007e\\\\u0080-\\\\ud7ff\\\\ue000\\\\ufffd]|'\n      + SURROGATE_PAIR + ')';\n  var ESCAPE = '\\\\\\\\' + ESCAPE_TAIL;\n  // urlchar  ::=  [#x9#x21#x23-#x26#x28-#x7E] | nonascii | escape\n  var URLCHAR = '(?:[\\\\t\\\\x21\\\\x23-\\\\x26\\\\x28-\\\\x5b\\\\x5d-\\\\x7e]|'\n      + NONASCII + '|' + ESCAPE + ')';\n  // stringchar  ::= urlchar | #x20 | '\\' nl\n  // We ignore mismatched surrogate pairs inside strings, so stringchar\n  // simplifies to a non-(quote|newline|backslash) or backslash any.\n  // Since we normalize CRLF to a single code-unit, there is no special\n  // handling needed for '\\\\' + CRLF.\n  var STRINGCHAR = '[^\\'\"\\\\n\\\\f\\\\\\\\]|\\\\\\\\[\\\\s\\\\S]';\n  // string  ::=  '\"' (stringchar | \"'\")* '\"' | \"'\" (stringchar | '\"')* \"'\"\n  var STRING = '\"(?:\\'|' + STRINGCHAR + ')*\"'\n      + '|\\'(?:\\\"|' + STRINGCHAR + ')*\\'';\n  // num  ::=  [0-9]+ | [0-9]* '.' [0-9]+\n  // Diff: We attach signs to num tokens.\n  var NUM = '[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)';\n  // nmstart  ::=  [a-zA-Z] | '_' | nonascii | escape\n  var NMSTART = '(?:[a-zA-Z_]|' + NONASCII + '|' + ESCAPE + ')';\n  // nmchar  ::=  [a-zA-Z0-9] | '-' | '_' | nonascii | escape\n  var NMCHAR = '(?:[a-zA-Z0-9_-]|' + NONASCII + '|' + ESCAPE + ')';\n  // name  ::=  nmchar+\n  var NAME = NMCHAR + '+';\n  // ident  ::=  '-'? nmstart nmchar*\n  var IDENT = '-?' + NMSTART + NMCHAR + '*';\n\n  // ATKEYWORD  ::=  '@' ident\n  var ATKEYWORD = '@' + IDENT;\n  // HASH  ::=  '#' name\n  var HASH = '#' + NAME;\n  // NUMBER  ::=  num\n  var NUMBER = NUM;\n\n  // NewRule: union of IDENT, ATKEYWORD, HASH, but excluding #[0-9].\n  var WORD_TERM = '(?:@?-?' + NMSTART + '|#)' + NMCHAR + '*';\n\n  // PERCENTAGE  ::=  num '%'\n  var PERCENTAGE = NUM + '%';\n  // DIMENSION  ::=  num ident\n  var DIMENSION = NUM + IDENT;\n  var NUMERIC_VALUE = NUM + '(?:%|' + IDENT + ')?';\n  // URI  ::=  \"url(\" w (string | urlchar* ) w \")\"\n  var URI = 'url[(]' + W + '(?:' + STRING + '|' + URLCHAR + '*)' + W + '[)]';\n  // UNICODE-RANGE  ::=  \"U+\" [0-9A-F?]{1,6} ('-' [0-9A-F]{1,6})?\n  var UNICODE_RANGE = 'U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?';\n  // CDO  ::=  \"<\\!--\"\n  var CDO = '<\\!--';\n  // CDC  ::=  \"-->\"\n  var CDC = '-->';\n  // S  ::=  wc+\n  var S = WC + '+';\n  // COMMENT  ::=  \"/*\" [^*]* '*'+ ([^/] [^*]* '*'+)* \"/\"\n  // Diff: recognizes // comments.\n  var COMMENT = '/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\\\n\\\\f]*)';\n  // FUNCTION  ::=  ident '('\n  // Diff: We exclude url explicitly.\n  // TODO: should we be tolerant of \"fn (\"?\n  var FUNCTION = '(?!url[(])' + IDENT + '[(]';\n  // INCLUDES  ::=  \"~=\"\n  var INCLUDES = '~=';\n  // DASHMATCH  ::=  \"|=\"\n  var DASHMATCH = '[|]=';\n  // PREFIXMATCH  ::=  \"^=\"\n  var PREFIXMATCH = '[^]=';\n  // SUFFIXMATCH  ::=  \"$=\"\n  var SUFFIXMATCH = '[$]=';\n  // SUBSTRINGMATCH  ::=  \"*=\"\n  var SUBSTRINGMATCH = '[*]=';\n  // NewRule: one rule for all the comparison operators.\n  var CMP_OPS = '[~|^$*]=';\n  // CHAR  ::=  any character not matched by the above rules, except for \" or '\n  // Diff: We exclude / and \\ since they are handled above to prevent\n  // /* without a following */ from combining when comments are concatenated.\n  var CHAR = '[^\"\\'\\\\\\\\/]|/(?![/*])';\n  // BOM  ::=  #xFEFF\n  var BOM = '\\\\uFEFF';\n\n  var CSS_TOKEN = new RegExp([\n      BOM, UNICODE_RANGE, URI, FUNCTION, WORD_TERM, STRING, NUMERIC_VALUE,\n      CDO, CDC, S, COMMENT, CMP_OPS, CHAR].join(\"|\"), 'gi');\n\n  var CSS_DECODER = new RegExp('\\\\\\\\(?:' + ESCAPE_TAIL + '|' + NL + ')', 'g');\n  var URL_RE = new RegExp('^url\\\\(' + W + '[\"\\']?|[\"\\']?' + W + '\\\\)$', 'gi');\n  /**\n   * Decodes CSS escape sequences in a CSS string body.\n   */\n   decodeCss = function (css) {\n     return css.replace(CSS_DECODER, decodeCssEscape);\n   };\n\n  /**\n   * Given CSS Text, returns an array of normalized tokens.\n   * @param {string} cssText\n   * @return {Array.<string>} tokens where all ignorable token sequences have\n   *    been reduced to a single {@code \" \"} and all strings and\n   *    {@code url(...)} tokens have been normalized to use double quotes as\n   *    delimiters and to not otherwise contain double quotes.\n   */\n  lexCss = function (cssText) {\n    // Stringify input. Additionally, insert and remove a non-latin1 character\n    // to force Firefox 33 to switch to a wide string representation, avoiding\n    // a performance bug. This workaround should become unnecessary after\n    // Firefox 34. https://bugzilla.mozilla.org/show_bug.cgi?id=1081175\n    // https://code.google.com/p/google-caja/issues/detail?id=1941\n    cssText = ('\\uffff' + cssText).replace(/^\\uffff/, '');\n\n    // // Normalize CRLF & CR to LF.\n    cssText = cssText.replace(/\\r\\n?/g, '\\n');\n\n    // Tokenize.\n    var tokens = cssText.match(CSS_TOKEN) || [];\n    var j = 0;\n    var last = ' ';\n    for (var i = 0, n = tokens.length; i < n; ++i) {\n      // Normalize all escape sequences.  We will have to re-escape some\n      // codepoints in string and url(...) bodies but we already know the\n      // boundaries.\n      // We might mistakenly treat a malformed identifier like \\22\\20\\22 as a\n      // string, but that will not break any valid stylesheets since we requote\n      // and re-escape in string below.\n      var tok = decodeCss(tokens[i]);\n      var len = tok.length;\n      var cc = tok.charCodeAt(0);\n      tok =\n          // All strings should be double quoted, and the body should never\n          // contain a double quote.\n          (cc == '\"'.charCodeAt(0) || cc == '\\''.charCodeAt(0))\n          ? escapeCssString(tok.substring(1, len - 1), escapeCssStrChar)\n          // A breaking ignorable token should is replaced with a single space.\n          : (cc == '/'.charCodeAt(0) && len > 1  // Comment.\n             || tok == '\\\\' || tok == CDC || tok == CDO || tok == '\\ufeff'\n             // Characters in W.\n             || cc <= ' '.charCodeAt(0))\n          ? ' '\n          // Make sure that all url(...)s are double quoted.\n          : /url\\(/i.test(tok)\n          ? 'url(' + escapeCssString(\n            tok.replace(URL_RE, ''),\n            escapeCssUrlChar)\n            + ')'\n          // Escapes in identifier like tokens will have been normalized above.\n          : tok;\n      // Merge adjacent space tokens.\n      if (last != tok || tok != ' ') {\n        tokens[j++] = last = tok;\n      }\n    }\n    tokens.length = j;\n    return tokens;\n  };\n})();\n\n// Exports for closure compiler.\nif (typeof window !== 'undefined') {\n  window['lexCss'] = lexCss;\n  window['decodeCss'] = decodeCss;\n}\n;\n// Copyright (C) 2010 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * Implements RFC 3986 for parsing/formatting URIs.\n *\n * @author mikesamuel@gmail.com\n * \\@provides URI\n * \\@overrides window\n */\n\nvar URI = (function () {\n\n/**\n * creates a uri from the string form.  The parser is relaxed, so special\n * characters that aren't escaped but don't cause ambiguities will not cause\n * parse failures.\n *\n * @return {URI|null}\n */\nfunction parse(uriStr) {\n  var m = ('' + uriStr).match(URI_RE_);\n  if (!m) { return null; }\n  return new URI(\n      nullIfAbsent(m[1]),\n      nullIfAbsent(m[2]),\n      nullIfAbsent(m[3]),\n      nullIfAbsent(m[4]),\n      nullIfAbsent(m[5]),\n      nullIfAbsent(m[6]),\n      nullIfAbsent(m[7]));\n}\n\n\n/**\n * creates a uri from the given parts.\n *\n * @param scheme {string} an unencoded scheme such as \"http\" or null\n * @param credentials {string} unencoded user credentials or null\n * @param domain {string} an unencoded domain name or null\n * @param port {number} a port number in [1, 32768].\n *    -1 indicates no port, as does null.\n * @param path {string} an unencoded path\n * @param query {Array.<string>|string|null} a list of unencoded cgi\n *   parameters where even values are keys and odds the corresponding values\n *   or an unencoded query.\n * @param fragment {string} an unencoded fragment without the \"#\" or null.\n * @return {URI}\n */\nfunction create(scheme, credentials, domain, port, path, query, fragment) {\n  var uri = new URI(\n      encodeIfExists2(scheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n      encodeIfExists2(\n          credentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n      encodeIfExists(domain),\n      port > 0 ? port.toString() : null,\n      encodeIfExists2(path, URI_DISALLOWED_IN_PATH_),\n      null,\n      encodeIfExists(fragment));\n  if (query) {\n    if ('string' === typeof query) {\n      uri.setRawQuery(query.replace(/[^?&=0-9A-Za-z_\\-~.%]/g, encodeOne));\n    } else {\n      uri.setAllParameters(query);\n    }\n  }\n  return uri;\n}\nfunction encodeIfExists(unescapedPart) {\n  if ('string' == typeof unescapedPart) {\n    return encodeURIComponent(unescapedPart);\n  }\n  return null;\n};\n/**\n * if unescapedPart is non null, then escapes any characters in it that aren't\n * valid characters in a url and also escapes any special characters that\n * appear in extra.\n *\n * @param unescapedPart {string}\n * @param extra {RegExp} a character set of characters in [\\01-\\177].\n * @return {string|null} null iff unescapedPart == null.\n */\nfunction encodeIfExists2(unescapedPart, extra) {\n  if ('string' == typeof unescapedPart) {\n    return encodeURI(unescapedPart).replace(extra, encodeOne);\n  }\n  return null;\n};\n/** converts a character in [\\01-\\177] to its url encoded equivalent. */\nfunction encodeOne(ch) {\n  var n = ch.charCodeAt(0);\n  return '%' + '0123456789ABCDEF'.charAt((n >> 4) & 0xf) +\n      '0123456789ABCDEF'.charAt(n & 0xf);\n}\n\n/**\n * {@updoc\n *  $ normPath('foo/./bar')\n *  # 'foo/bar'\n *  $ normPath('./foo')\n *  # 'foo'\n *  $ normPath('foo/.')\n *  # 'foo'\n *  $ normPath('foo//bar')\n *  # 'foo/bar'\n * }\n */\nfunction normPath(path) {\n  return path.replace(/(^|\\/)\\.(?:\\/|$)/g, '$1').replace(/\\/{2,}/g, '/');\n}\n\nvar PARENT_DIRECTORY_HANDLER = new RegExp(\n    ''\n    // A path break\n    + '(/|^)'\n    // followed by a non .. path element\n    // (cannot be . because normPath is used prior to this RegExp)\n    + '(?:[^./][^/]*|\\\\.{2,}(?:[^./][^/]*)|\\\\.{3,}[^/]*)'\n    // followed by .. followed by a path break.\n    + '/\\\\.\\\\.(?:/|$)');\n\nvar PARENT_DIRECTORY_HANDLER_RE = new RegExp(PARENT_DIRECTORY_HANDLER);\n\nvar EXTRA_PARENT_PATHS_RE = /^(?:\\.\\.\\/)*(?:\\.\\.$)?/;\n\n/**\n * Normalizes its input path and collapses all . and .. sequences except for\n * .. sequences that would take it above the root of the current parent\n * directory.\n * {@updoc\n *  $ collapse_dots('foo/../bar')\n *  # 'bar'\n *  $ collapse_dots('foo/./bar')\n *  # 'foo/bar'\n *  $ collapse_dots('foo/../bar/./../../baz')\n *  # 'baz'\n *  $ collapse_dots('../foo')\n *  # '../foo'\n *  $ collapse_dots('../foo').replace(EXTRA_PARENT_PATHS_RE, '')\n *  # 'foo'\n * }\n */\nfunction collapse_dots(path) {\n  if (path === null) { return null; }\n  var p = normPath(path);\n  // Only /../ left to flatten\n  var r = PARENT_DIRECTORY_HANDLER_RE;\n  // We replace with $1 which matches a / before the .. because this\n  // guarantees that:\n  // (1) we have at most 1 / between the adjacent place,\n  // (2) always have a slash if there is a preceding path section, and\n  // (3) we never turn a relative path into an absolute path.\n  for (var q; (q = p.replace(r, '$1')) != p; p = q) {};\n  return p;\n}\n\n/**\n * resolves a relative url string to a base uri.\n * @return {URI}\n */\nfunction resolve(baseUri, relativeUri) {\n  // there are several kinds of relative urls:\n  // 1. //foo - replaces everything from the domain on.  foo is a domain name\n  // 2. foo - replaces the last part of the path, the whole query and fragment\n  // 3. /foo - replaces the the path, the query and fragment\n  // 4. ?foo - replace the query and fragment\n  // 5. #foo - replace the fragment only\n\n  var absoluteUri = baseUri.clone();\n  // we satisfy these conditions by looking for the first part of relativeUri\n  // that is not blank and applying defaults to the rest\n\n  var overridden = relativeUri.hasScheme();\n\n  if (overridden) {\n    absoluteUri.setRawScheme(relativeUri.getRawScheme());\n  } else {\n    overridden = relativeUri.hasCredentials();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawCredentials(relativeUri.getRawCredentials());\n  } else {\n    overridden = relativeUri.hasDomain();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawDomain(relativeUri.getRawDomain());\n  } else {\n    overridden = relativeUri.hasPort();\n  }\n\n  var rawPath = relativeUri.getRawPath();\n  var simplifiedPath = collapse_dots(rawPath);\n  if (overridden) {\n    absoluteUri.setPort(relativeUri.getPort());\n    simplifiedPath = simplifiedPath\n        && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n  } else {\n    overridden = !!rawPath;\n    if (overridden) {\n      // resolve path properly\n      if (simplifiedPath.charCodeAt(0) !== 0x2f /* / */) {  // path is relative\n        var absRawPath = collapse_dots(absoluteUri.getRawPath() || '')\n            .replace(EXTRA_PARENT_PATHS_RE, '');\n        var slash = absRawPath.lastIndexOf('/') + 1;\n        simplifiedPath = collapse_dots(\n            (slash ? absRawPath.substring(0, slash) : '')\n            + collapse_dots(rawPath))\n            .replace(EXTRA_PARENT_PATHS_RE, '');\n      }\n    } else {\n      simplifiedPath = simplifiedPath\n          && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n      if (simplifiedPath !== rawPath) {\n        absoluteUri.setRawPath(simplifiedPath);\n      }\n    }\n  }\n\n  if (overridden) {\n    absoluteUri.setRawPath(simplifiedPath);\n  } else {\n    overridden = relativeUri.hasQuery();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawQuery(relativeUri.getRawQuery());\n  } else {\n    overridden = relativeUri.hasFragment();\n  }\n\n  if (overridden) {\n    absoluteUri.setRawFragment(relativeUri.getRawFragment());\n  }\n\n  return absoluteUri;\n}\n\n/**\n * a mutable URI.\n *\n * This class contains setters and getters for the parts of the URI.\n * The <tt>getXYZ</tt>/<tt>setXYZ</tt> methods return the decoded part -- so\n * <code>uri.parse('/foo%20bar').getPath()</code> will return the decoded path,\n * <tt>/foo bar</tt>.\n *\n * <p>The raw versions of fields are available too.\n * <code>uri.parse('/foo%20bar').getRawPath()</code> will return the raw path,\n * <tt>/foo%20bar</tt>.  Use the raw setters with care, since\n * <code>URI::toString</code> is not guaranteed to return a valid url if a\n * raw setter was used.\n *\n * <p>All setters return <tt>this</tt> and so may be chained, a la\n * <code>uri.parse('/foo').setFragment('part').toString()</code>.\n *\n * <p>You should not use this constructor directly -- please prefer the factory\n * functions {@link uri.parse}, {@link uri.create}, {@link uri.resolve}\n * instead.</p>\n *\n * <p>The parameters are all raw (assumed to be properly escaped) parts, and\n * any (but not all) may be null.  Undefined is not allowed.</p>\n *\n * @constructor\n */\nfunction URI(\n    rawScheme,\n    rawCredentials, rawDomain, port,\n    rawPath, rawQuery, rawFragment) {\n  this.scheme_ = rawScheme;\n  this.credentials_ = rawCredentials;\n  this.domain_ = rawDomain;\n  this.port_ = port;\n  this.path_ = rawPath;\n  this.query_ = rawQuery;\n  this.fragment_ = rawFragment;\n  /**\n   * @type {Array|null}\n   */\n  this.paramCache_ = null;\n}\n\n/** returns the string form of the url. */\nURI.prototype.toString = function () {\n  var out = [];\n  if (null !== this.scheme_) { out.push(this.scheme_, ':'); }\n  if (null !== this.domain_) {\n    out.push('//');\n    if (null !== this.credentials_) { out.push(this.credentials_, '@'); }\n    out.push(this.domain_);\n    if (null !== this.port_) { out.push(':', this.port_.toString()); }\n  }\n  if (null !== this.path_) { out.push(this.path_); }\n  if (null !== this.query_) { out.push('?', this.query_); }\n  if (null !== this.fragment_) { out.push('#', this.fragment_); }\n  return out.join('');\n};\n\nURI.prototype.clone = function () {\n  return new URI(this.scheme_, this.credentials_, this.domain_, this.port_,\n                 this.path_, this.query_, this.fragment_);\n};\n\nURI.prototype.getScheme = function () {\n  // HTML5 spec does not require the scheme to be lowercased but\n  // all common browsers except Safari lowercase the scheme.\n  return this.scheme_ && decodeURIComponent(this.scheme_).toLowerCase();\n};\nURI.prototype.getRawScheme = function () {\n  return this.scheme_;\n};\nURI.prototype.setScheme = function (newScheme) {\n  this.scheme_ = encodeIfExists2(\n      newScheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n  return this;\n};\nURI.prototype.setRawScheme = function (newScheme) {\n  this.scheme_ = newScheme ? newScheme : null;\n  return this;\n};\nURI.prototype.hasScheme = function () {\n  return null !== this.scheme_;\n};\n\n\nURI.prototype.getCredentials = function () {\n  return this.credentials_ && decodeURIComponent(this.credentials_);\n};\nURI.prototype.getRawCredentials = function () {\n  return this.credentials_;\n};\nURI.prototype.setCredentials = function (newCredentials) {\n  this.credentials_ = encodeIfExists2(\n      newCredentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n\n  return this;\n};\nURI.prototype.setRawCredentials = function (newCredentials) {\n  this.credentials_ = newCredentials ? newCredentials : null;\n  return this;\n};\nURI.prototype.hasCredentials = function () {\n  return null !== this.credentials_;\n};\n\n\nURI.prototype.getDomain = function () {\n  return this.domain_ && decodeURIComponent(this.domain_);\n};\nURI.prototype.getRawDomain = function () {\n  return this.domain_;\n};\nURI.prototype.setDomain = function (newDomain) {\n  return this.setRawDomain(newDomain && encodeURIComponent(newDomain));\n};\nURI.prototype.setRawDomain = function (newDomain) {\n  this.domain_ = newDomain ? newDomain : null;\n  // Maintain the invariant that paths must start with a slash when the URI\n  // is not path-relative.\n  return this.setRawPath(this.path_);\n};\nURI.prototype.hasDomain = function () {\n  return null !== this.domain_;\n};\n\n\nURI.prototype.getPort = function () {\n  return this.port_ && decodeURIComponent(this.port_);\n};\nURI.prototype.setPort = function (newPort) {\n  if (newPort) {\n    newPort = Number(newPort);\n    if (newPort !== (newPort & 0xffff)) {\n      throw new Error('Bad port number ' + newPort);\n    }\n    this.port_ = '' + newPort;\n  } else {\n    this.port_ = null;\n  }\n  return this;\n};\nURI.prototype.hasPort = function () {\n  return null !== this.port_;\n};\n\n\nURI.prototype.getPath = function () {\n  return this.path_ && decodeURIComponent(this.path_);\n};\nURI.prototype.getRawPath = function () {\n  return this.path_;\n};\nURI.prototype.setPath = function (newPath) {\n  return this.setRawPath(encodeIfExists2(newPath, URI_DISALLOWED_IN_PATH_));\n};\nURI.prototype.setRawPath = function (newPath) {\n  if (newPath) {\n    newPath = String(newPath);\n    this.path_ =\n      // Paths must start with '/' unless this is a path-relative URL.\n      (!this.domain_ || /^\\//.test(newPath)) ? newPath : '/' + newPath;\n  } else {\n    this.path_ = null;\n  }\n  return this;\n};\nURI.prototype.hasPath = function () {\n  return null !== this.path_;\n};\n\n\nURI.prototype.getQuery = function () {\n  // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n  // Within the query string, the plus sign is reserved as shorthand notation\n  // for a space.\n  return this.query_ && decodeURIComponent(this.query_).replace(/\\+/g, ' ');\n};\nURI.prototype.getRawQuery = function () {\n  return this.query_;\n};\nURI.prototype.setQuery = function (newQuery) {\n  this.paramCache_ = null;\n  this.query_ = encodeIfExists(newQuery);\n  return this;\n};\nURI.prototype.setRawQuery = function (newQuery) {\n  this.paramCache_ = null;\n  this.query_ = newQuery ? newQuery : null;\n  return this;\n};\nURI.prototype.hasQuery = function () {\n  return null !== this.query_;\n};\n\n/**\n * sets the query given a list of strings of the form\n * [ key0, value0, key1, value1, ... ].\n *\n * <p><code>uri.setAllParameters(['a', 'b', 'c', 'd']).getQuery()</code>\n * will yield <code>'a=b&c=d'</code>.\n */\nURI.prototype.setAllParameters = function (params) {\n  if (typeof params === 'object') {\n    if (!(params instanceof Array)\n        && (params instanceof Object\n            || Object.prototype.toString.call(params) !== '[object Array]')) {\n      var newParams = [];\n      var i = -1;\n      for (var k in params) {\n        var v = params[k];\n        if ('string' === typeof v) {\n          newParams[++i] = k;\n          newParams[++i] = v;\n        }\n      }\n      params = newParams;\n    }\n  }\n  this.paramCache_ = null;\n  var queryBuf = [];\n  var separator = '';\n  for (var j = 0; j < params.length;) {\n    var k = params[j++];\n    var v = params[j++];\n    queryBuf.push(separator, encodeURIComponent(k.toString()));\n    separator = '&';\n    if (v) {\n      queryBuf.push('=', encodeURIComponent(v.toString()));\n    }\n  }\n  this.query_ = queryBuf.join('');\n  return this;\n};\nURI.prototype.checkParameterCache_ = function () {\n  if (!this.paramCache_) {\n    var q = this.query_;\n    if (!q) {\n      this.paramCache_ = [];\n    } else {\n      var cgiParams = q.split(/[&\\?]/);\n      var out = [];\n      var k = -1;\n      for (var i = 0; i < cgiParams.length; ++i) {\n        var m = cgiParams[i].match(/^([^=]*)(?:=(.*))?$/);\n        // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n        // Within the query string, the plus sign is reserved as shorthand\n        // notation for a space.\n        out[++k] = decodeURIComponent(m[1]).replace(/\\+/g, ' ');\n        out[++k] = decodeURIComponent(m[2] || '').replace(/\\+/g, ' ');\n      }\n      this.paramCache_ = out;\n    }\n  }\n};\n/**\n * sets the values of the named cgi parameters.\n *\n * <p>So, <code>uri.parse('foo?a=b&c=d&e=f').setParameterValues('c', ['new'])\n * </code> yields <tt>foo?a=b&c=new&e=f</tt>.</p>\n *\n * @param key {string}\n * @param values {Array.<string>} the new values.  If values is a single string\n *   then it will be treated as the sole value.\n */\nURI.prototype.setParameterValues = function (key, values) {\n  // be nice and avoid subtle bugs where [] operator on string performs charAt\n  // on some browsers and crashes on IE\n  if (typeof values === 'string') {\n    values = [ values ];\n  }\n\n  this.checkParameterCache_();\n  var newValueIndex = 0;\n  var pc = this.paramCache_;\n  var params = [];\n  for (var i = 0, k = 0; i < pc.length; i += 2) {\n    if (key === pc[i]) {\n      if (newValueIndex < values.length) {\n        params.push(key, values[newValueIndex++]);\n      }\n    } else {\n      params.push(pc[i], pc[i + 1]);\n    }\n  }\n  while (newValueIndex < values.length) {\n    params.push(key, values[newValueIndex++]);\n  }\n  this.setAllParameters(params);\n  return this;\n};\nURI.prototype.removeParameter = function (key) {\n  return this.setParameterValues(key, []);\n};\n/**\n * returns the parameters specified in the query part of the uri as a list of\n * keys and values like [ key0, value0, key1, value1, ... ].\n *\n * @return {Array.<string>}\n */\nURI.prototype.getAllParameters = function () {\n  this.checkParameterCache_();\n  return this.paramCache_.slice(0, this.paramCache_.length);\n};\n/**\n * returns the value<b>s</b> for a given cgi parameter as a list of decoded\n * query parameter values.\n * @return {Array.<string>}\n */\nURI.prototype.getParameterValues = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  var values = [];\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    if (paramNameUnescaped === this.paramCache_[i]) {\n      values.push(this.paramCache_[i + 1]);\n    }\n  }\n  return values;\n};\n/**\n * returns a map of cgi parameter names to (non-empty) lists of values.\n * @return {Object.<string,Array.<string>>}\n */\nURI.prototype.getParameterMap = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  var paramMap = {};\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    var key = this.paramCache_[i++],\n      value = this.paramCache_[i++];\n    if (!(key in paramMap)) {\n      paramMap[key] = [value];\n    } else {\n      paramMap[key].push(value);\n    }\n  }\n  return paramMap;\n};\n/**\n * returns the first value for a given cgi parameter or null if the given\n * parameter name does not appear in the query string.\n * If the given parameter name does appear, but has no '<tt>=</tt>' following\n * it, then the empty string will be returned.\n * @return {string|null}\n */\nURI.prototype.getParameterValue = function (paramNameUnescaped) {\n  this.checkParameterCache_();\n  for (var i = 0; i < this.paramCache_.length; i += 2) {\n    if (paramNameUnescaped === this.paramCache_[i]) {\n      return this.paramCache_[i + 1];\n    }\n  }\n  return null;\n};\n\nURI.prototype.getFragment = function () {\n  return this.fragment_ && decodeURIComponent(this.fragment_);\n};\nURI.prototype.getRawFragment = function () {\n  return this.fragment_;\n};\nURI.prototype.setFragment = function (newFragment) {\n  this.fragment_ = newFragment ? encodeURIComponent(newFragment) : null;\n  return this;\n};\nURI.prototype.setRawFragment = function (newFragment) {\n  this.fragment_ = newFragment ? newFragment : null;\n  return this;\n};\nURI.prototype.hasFragment = function () {\n  return null !== this.fragment_;\n};\n\nfunction nullIfAbsent(matchPart) {\n  return ('string' == typeof matchPart) && (matchPart.length > 0)\n         ? matchPart\n         : null;\n}\n\n\n\n\n/**\n * a regular expression for breaking a URI into its component parts.\n *\n * <p>http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234 says\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * <p>The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * <p>The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * <p>msamuel: I have modified the regular expression slightly to expose the\n * credentials, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       credentials -\\\n *    $3 = www.ics.uci.edu   domain       | authority\n *    $4 = <undefined>       port        -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n */\nvar URI_RE_ = new RegExp(\n      \"^\" +\n      \"(?:\" +\n        \"([^:/?#]+)\" +         // scheme\n      \":)?\" +\n      \"(?://\" +\n        \"(?:([^/?#]*)@)?\" +    // credentials\n        \"([^/?#:@]*)\" +        // domain\n        \"(?::([0-9]+))?\" +     // port\n      \")?\" +\n      \"([^?#]+)?\" +            // path\n      \"(?:\\\\?([^#]*))?\" +      // query\n      \"(?:#(.*))?\" +           // fragment\n      \"$\"\n      );\n\nvar URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_ = /[#\\/\\?@]/g;\nvar URI_DISALLOWED_IN_PATH_ = /[\\#\\?]/g;\n\nURI.parse = parse;\nURI.create = create;\nURI.resolve = resolve;\nURI.collapse_dots = collapse_dots;  // Visible for testing.\n\n// lightweight string-based api for loadModuleMaker\nURI.utils = {\n  mimeTypeOf: function (uri) {\n    var uriObj = parse(uri);\n    if (/\\.html$/.test(uriObj.getPath())) {\n      return 'text/html';\n    } else {\n      return 'application/javascript';\n    }\n  },\n  resolve: function (base, uri) {\n    if (base) {\n      return resolve(parse(base), parse(uri)).toString();\n    } else {\n      return '' + uri;\n    }\n  }\n};\n\n\nreturn URI;\n})();\n\n// Exports for closure compiler.\nif (typeof window !== 'undefined') {\n  window['URI'] = URI;\n}\n;\n// Copyright (C) 2011 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * JavaScript support for client-side CSS sanitization.\n * The CSS property schema API is defined in CssPropertyPatterns.java which\n * is used to generate css-defs.js.\n *\n * @author mikesamuel@gmail.com\n * \\@requires CSS_PROP_BIT_GLOBAL_NAME\n * \\@requires CSS_PROP_BIT_HASH_VALUE\n * \\@requires CSS_PROP_BIT_NEGATIVE_QUANTITY\n * \\@requires CSS_PROP_BIT_PROPERTY_NAME\n * \\@requires CSS_PROP_BIT_QUANTITY\n * \\@requires CSS_PROP_BIT_QSTRING\n * \\@requires CSS_PROP_BIT_UNRESERVED_WORD\n * \\@requires CSS_PROP_BIT_URL\n * \\@requires cssSchema\n * \\@requires decodeCss\n * \\@requires html4\n * \\@requires URI\n * \\@overrides window\n * \\@requires parseCssStylesheet\n * \\@provides sanitizeCssProperty\n * \\@provides sanitizeCssSelectorList\n * \\@provides sanitizeStylesheet\n * \\@provides sanitizeStylesheetWithExternals\n * \\@provides sanitizeMediaQuery\n */\n\nvar sanitizeCssProperty = undefined;\nvar sanitizeCssSelectorList = undefined;\nvar sanitizeStylesheet = undefined;\nvar sanitizeStylesheetWithExternals = undefined;\nvar sanitizeMediaQuery = undefined;\n\n(function () {\n  var NOEFFECT_URL = 'url(\"about:blank\")';\n  /**\n   * The set of characters that need to be normalized inside url(\"...\").\n   * We normalize newlines because they are not allowed inside quoted strings,\n   * normalize quote characters, angle-brackets, and asterisks because they\n   * could be used to break out of the URL or introduce targets for CSS\n   * error recovery.  We normalize parentheses since they delimit unquoted\n   * URLs and calls and could be a target for error recovery.\n   */\n  var NORM_URL_REGEXP = /[\\n\\f\\r\\\"\\'()*<>]/g;\n  /** The replacements for NORM_URL_REGEXP. */\n  var NORM_URL_REPLACEMENTS = {\n    '\\n': '%0a',\n    '\\f': '%0c',\n    '\\r': '%0d',\n    '\"':  '%22',\n    '\\'': '%27',\n    '(':  '%28',\n    ')':  '%29',\n    '*':  '%2a',\n    '<':  '%3c',\n    '>':  '%3e'\n  };\n\n  function normalizeUrl(s) {\n    if ('string' === typeof s) {\n      return 'url(\"' + s.replace(NORM_URL_REGEXP, normalizeUrlChar) + '\")';\n    } else {\n      return NOEFFECT_URL;\n    }\n  }\n  function normalizeUrlChar(ch) {\n    return NORM_URL_REPLACEMENTS[ch];\n  }\n\n  // From RFC3986\n  var URI_SCHEME_RE = new RegExp(\n      '^' +\n      '(?:' +\n        '([^:\\/?# ]+)' +         // scheme\n      ':)?'\n  );\n\n  var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\n  function resolveUri(baseUri, uri) {\n    if (baseUri) {\n      return URI.utils.resolve(baseUri, uri);\n    }\n    return uri;\n  }\n\n  function safeUri(uri, prop, naiveUriRewriter) {\n    if (!naiveUriRewriter) { return null; }\n    var parsed = ('' + uri).match(URI_SCHEME_RE);\n    if (parsed && (!parsed[1] || ALLOWED_URI_SCHEMES.test(parsed[1]))) {\n      return naiveUriRewriter(uri, prop);\n    } else {\n      return null;\n    }\n  }\n\n  function withoutVendorPrefix(ident) {\n    // http://stackoverflow.com/a/5411098/20394 has a fairly extensive list\n    // of vendor prefices.\n    // Blink has not declared a vendor prefix distinct from -webkit-\n    // and http://css-tricks.com/tldr-on-vendor-prefix-drama/ discusses\n    // how Mozilla recognizes some -webkit-\n    // http://wiki.csswg.org/spec/vendor-prefixes talks more about\n    // cross-implementation, and lists other prefixes.\n    // Note: info is duplicated in CssValidator.java\n    return ident.replace(\n        /^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/, '');\n  }\n\n  /**\n   * Given a series of normalized CSS tokens, applies a property schema, as\n   * defined in CssPropertyPatterns.java, and sanitizes the tokens in place.\n   * @param property a property name.\n   * @param tokens as parsed by lexCss.  Modified in place.\n   * @param opt_naiveUriRewriter a URI rewriter; an object with a \"rewrite\"\n   *     function that takes a URL and returns a safe URL.\n   * @param opt_baseURI a URI against which all relative URLs in tokens will\n   *     be resolved.\n   * @param opt_idSuffix {string} appended to all IDs to scope them.\n   */\n  sanitizeCssProperty = (function () {\n\n    function unionArrays(arrs) {\n      var map = {};\n      for (var i = arrs.length; --i >= 0;) {\n        var arr = arrs[i];\n        for (var j = arr.length; --j >= 0;) {\n          map[arr[j]] = ALLOWED_LITERAL;\n        }\n      }\n      return map;\n    }\n\n    // Used as map value to avoid hasOwnProperty checks.\n    var ALLOWED_LITERAL = {};\n\n    return function sanitize(\n        property, tokens, opt_naiveUriRewriter, opt_baseUri, opt_idSuffix) {\n\n      var propertyKey = withoutVendorPrefix(property);\n      var propertySchema = cssSchema[propertyKey];\n\n      // If the property isn't recognized, elide all tokens.\n      if (!propertySchema || 'object' !== typeof propertySchema) {\n        tokens.length = 0;\n        return;\n      }\n\n      var propBits = propertySchema['cssPropBits'];\n\n      /**\n       * Recurse to apply the appropriate function schema to the function call\n       * that starts at {@code tokens[start]}.\n       * @param {Array.<string>} tokens an array of CSS token that is modified\n       *   in place so that all tokens involved in the function call\n       *   (from {@code tokens[start]} to a close parenthesis) are folded to\n       *   one token.\n       * @param {number} start an index into tokens of a function token like\n       *   {@code 'name('}.\n       * @return the replacement function or the empty string if the function\n       *   call is not both well-formed and allowed.\n       */\n      function sanitizeFunctionCall(tokens, start) {\n        var parenDepth = 1, end = start + 1, n = tokens.length;\n        while (end < n && parenDepth) {\n          var token = tokens[end++];\n          // Decrement if we see a close parenthesis, and increment if we\n          // see a function.  Since url(...) are whole tokens, they will not\n          // affect the token scanning.\n          parenDepth += (token === ')' ? -1 : /^[^\"']*\\($/.test(token));\n        }\n        // Allow error-recovery from unclosed functions by ignoring the call and\n        // so allowing resumption at the next ';'.\n        if (!parenDepth) {\n          var fnToken = tokens[start].toLowerCase();\n          var bareFnToken = withoutVendorPrefix(fnToken);\n          // Cut out the originals, so the caller can step by one token.\n          var fnTokens = tokens.splice(start, end - start, '');\n          var fns = propertySchema['cssFns'];\n          // Look for a function that matches the name.\n          for (var i = 0, nFns = fns.length; i < nFns; ++i) {\n            if (fns[i].substring(0, bareFnToken.length) == bareFnToken) {\n              fnTokens[0] = fnTokens[fnTokens.length - 1] = '';\n              // Recurse and sanitize the function parameters.\n              sanitize(\n                fns[i],\n                // The actual parameters to the function.\n                fnTokens,\n                opt_naiveUriRewriter, opt_baseUri);\n              // Reconstitute the function from its parameter tokens.\n              return fnToken + fnTokens.join(' ') + ')';\n            }\n          }\n        }\n        return '';\n      }\n\n      // Used to determine whether to treat quoted strings as URLs or\n      // plain text content, and whether unrecognized keywords can be quoted\n      // to treat ['Arial', 'Black'] equivalently to ['\"Arial Black\"'].\n      var stringDisposition =\n        propBits & (CSS_PROP_BIT_URL | CSS_PROP_BIT_UNRESERVED_WORD);\n      // Used to determine what to do with unreserved words.\n      var identDisposition =\n        propBits & (CSS_PROP_BIT_GLOBAL_NAME | CSS_PROP_BIT_PROPERTY_NAME);\n\n      // Used to join unquoted keywords into a single quoted string.\n      var lastQuoted = NaN;\n      var i = 0, k = 0;\n      for (;i < tokens.length; ++i) {\n        // Has the effect of normalizing hex digits, keywords,\n        // and function names.\n        var token = tokens[i].toLowerCase();\n        var cc = token.charCodeAt(0), cc1, cc2, isnum1, isnum2, end;\n        var litGroup, litMap;\n        token = (\n\n          // Strip out spaces.  Normally cssparser.js dumps these, but we\n          // strip them out in case the content doesn't come via cssparser.js.\n          (cc === ' '.charCodeAt(0)) ? ''\n          : (cc === '\"'.charCodeAt(0)) ? (  // Quoted string.\n            (stringDisposition === CSS_PROP_BIT_URL)\n            ? (opt_naiveUriRewriter\n               // Sanitize and convert to url(\"...\") syntax.\n               // Treat url content as case-sensitive.\n               ? (normalizeUrl(\n                   // Rewrite to a safe URI.\n                   safeUri(\n                     // Convert to absolute URL\n                     resolveUri(\n                       opt_baseUri,\n                       // Strip off quotes\n                       decodeCss(tokens[i].substring(1, token.length - 1))),\n                     propertyKey,\n                     opt_naiveUriRewriter)))\n              : '')\n            : ((propBits & CSS_PROP_BIT_QSTRING)\n               // Ambiguous when more than one bit set in disposition.\n               && !(stringDisposition & (stringDisposition - 1)))\n            ? token\n            // Drop if quoted strings not allowed.\n            : ''\n          )\n\n          // inherit is always allowed.\n          : token === 'inherit'\n          ? token\n\n          : (\n            litGroup = propertySchema['cssLitGroup'],\n            litMap = (litGroup\n                      ? (propertySchema['cssLitMap']\n                         // Lazily compute the union from litGroup.\n                         || (propertySchema['cssLitMap'] =\n                             unionArrays(litGroup)))\n                      : ALLOWED_LITERAL),  // A convenient empty object.\n            (litMap[withoutVendorPrefix(token)] === ALLOWED_LITERAL)\n          )\n          // Token is in the literal map or matches extra.\n          ? token\n\n          // Preserve hash color literals if allowed.\n          : (cc === '#'.charCodeAt(0) && /^#(?:[0-9a-f]{3}){1,2}$/.test(token))\n          ? (propBits & CSS_PROP_BIT_HASH_VALUE ? token : '')\n\n          : ('0'.charCodeAt(0) <= cc && cc <= '9'.charCodeAt(0))\n          // A number starting with a digit.\n          ? ((propBits & CSS_PROP_BIT_QUANTITY) ? token : '')\n\n          // Normalize quantities so they don't start with a '.' or '+' sign and\n          // make sure they all have an integer component so can't be confused\n          // with a dotted identifier.\n          // This can't be done in the lexer since \".4\" is a valid rule part.\n          : (cc1 = token.charCodeAt(1),\n             cc2 = token.charCodeAt(2),\n             isnum1 = '0'.charCodeAt(0) <= cc1 && cc1 <= '9'.charCodeAt(0),\n             isnum2 = '0'.charCodeAt(0) <= cc2 && cc2 <= '9'.charCodeAt(0),\n             // +.5 -> 0.5 if allowed.\n             (cc === '+'.charCodeAt(0)\n              && (isnum1 || (cc1 === '.'.charCodeAt(0) && isnum2))))\n          ? ((propBits & CSS_PROP_BIT_QUANTITY)\n            ? ((isnum1 ? '' : '0') + token.substring(1))\n            : '')\n\n          // -.5 -> -0.5 if allowed otherwise -> 0 if quantities allowed.\n          : (cc === '-'.charCodeAt(0)\n             && (isnum1 || (cc1 === '.'.charCodeAt(0) && isnum2)))\n            ? ((propBits & CSS_PROP_BIT_NEGATIVE_QUANTITY)\n               ? ((isnum1 ? '-' : '-0') + token.substring(1))\n               : ((propBits & CSS_PROP_BIT_QUANTITY) ? '0' : ''))\n\n          // .5 -> 0.5 if allowed.\n          : (cc === '.'.charCodeAt(0) && isnum1)\n          ? ((propBits & CSS_PROP_BIT_QUANTITY) ? '0' + token : '')\n\n          // Handle url(\"...\") by rewriting the body.\n          : ('url(\"' === token.substring(0, 5))\n          ? ((opt_naiveUriRewriter && (propBits & CSS_PROP_BIT_URL))\n             ? normalizeUrl(safeUri(resolveUri(opt_baseUri,\n                  tokens[i].substring(5, token.length - 2)),\n                  propertyKey,\n                  opt_naiveUriRewriter))\n             : '')\n\n          // Handle func(...) by recursing.\n          // Functions start at a token like \"name(\" and end with a \")\" taking\n          // into account nesting.\n          : (token.charAt(token.length-1) === '(')\n          ? sanitizeFunctionCall(tokens, i)\n\n          : (identDisposition\n             && /^-?[a-z_][\\w\\-]*$/.test(token) && !/__$/.test(token))\n          ? (opt_idSuffix && identDisposition === CSS_PROP_BIT_GLOBAL_NAME\n             ? tokens[i] + opt_idSuffix  // use original token, not lowercased\n             : (identDisposition === CSS_PROP_BIT_PROPERTY_NAME\n                && cssSchema[token]\n                && 'number' === typeof cssSchema[token].cssPropBits)\n             ? token\n             : '')\n\n          : (/^\\w+$/.test(token)\n             && stringDisposition === CSS_PROP_BIT_UNRESERVED_WORD\n             && (propBits & CSS_PROP_BIT_QSTRING))\n          // Quote unrecognized keywords so font names like\n          //    Arial Bold\n          // ->\n          //    \"Arial Bold\"\n          ? (lastQuoted+1 === k\n             // If the last token was also a keyword that was quoted, then\n             // combine this token into that.\n             ? (tokens[lastQuoted] = (\n                  tokens[lastQuoted].substring(0, tokens[lastQuoted].length-1)\n                  + ' ' + token + '\"'),\n                token = '')\n             : (lastQuoted = k, '\"' + token + '\"'))\n\n          // Disallowed.\n          : '');\n        if (token) {\n          tokens[k++] = token;\n        }\n      }\n      // For single URL properties, if the URL failed to pass the sanitizer,\n      // then just drop it.\n      if (k === 1 && tokens[0] === NOEFFECT_URL) { k = 0; }\n      tokens.length = k;\n    };\n  })();\n\n  // Note, duplicated in CssRewriter.java\n  // Constructed from\n  //    https://developer.mozilla.org/en-US/docs/Web/CSS/Reference\n  //    https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\n  //    http://dev.w3.org/csswg/selectors4/\n  var PSEUDO_SELECTOR_WHITELIST =\n    new RegExp(\n        '^(active|after|before|blank|checked|default|disabled'\n        + '|drop|empty|enabled|first|first-child|first-letter'\n        + '|first-line|first-of-type|fullscreen|focus|hover'\n        + '|in-range|indeterminate|invalid|last-child|last-of-type'\n        + '|left|link|only-child|only-of-type|optional|out-of-range'\n        + '|placeholder-shown|read-only|read-write|required|right'\n        + '|root|scope|user-error|valid|visited'\n        + ')$');\n\n  // Set of punctuation tokens that are child/sibling selectors.\n  var COMBINATOR = {};\n  COMBINATOR['>'] = COMBINATOR['+'] = COMBINATOR['~'] = COMBINATOR;\n\n  /**\n   * Given a series of tokens, returns a list of sanitized selectors.\n   * @param {Array.<string>} selectors In the form produced by csslexer.js.\n   * @param {{\n   *     containerClass: ?string,\n   *     idSuffix: string,\n   *     tagPolicy: function(string, Array.<string>): ?Array.<string>,\n   *     virtualizeAttrName: ?function(string, string): ?string\n   *   }} virtualization An object like <pre<{\n   *   containerClass: class name prepended to all selectors to scope them (if\n   *       not null)\n   *   idSuffix: appended to all IDs to scope them\n   *   tagPolicy: As in html-sanitizer, used for rewriting element names.\n   *   virtualizeAttrName: Rewrite a single attribute name for attribute\n   *       selectors, or return null if not possible. Should be consistent\n   *       with tagPolicy if possible.\n   * }</pre>\n   *    If containerClass is {@code \"sfx\"} and idSuffix is {@code \"-sfx\"}, the\n   *    selector\n   *    {@code [\"a\", \"#foo\", \" \", \"b\", \".bar\"]} will be namespaced to\n   *    {@code [\".sfx\", \" \", \"a\", \"#foo-sfx\", \" \", \"b\", \".bar\"]}.\n   * @param {function(Array.<string>): boolean} opt_onUntranslatableSelector\n   *     When a selector cannot be translated, this function is called with the\n   *     non-whitespace/comment tokens comprising the selector and returns a\n   *     value indicating whether to continue processing the selector list.\n   *     If it returns falsey, then processing is aborted and null is returned.\n   *     If not present or it returns truthy, then the complex selector is\n   *     dropped from the selector list.\n   * @return {Array.<string>}? an array of sanitized selectors.\n   *    Null when the untraslatable compound selector handler aborts processing.\n   */\n  sanitizeCssSelectorList = function(\n      selectors, virtualization, opt_onUntranslatableSelector) {\n    var containerClass = virtualization.containerClass;\n    var idSuffix = virtualization.idSuffix;\n    var tagPolicy = virtualization.tagPolicy;\n    var sanitized = [];\n\n    // Remove any spaces that are not operators.\n    var k = 0, i, inBrackets = 0, tok;\n    for (i = 0; i < selectors.length; ++i) {\n      tok = selectors[i];\n\n      if (\n            (tok == '(' || tok == '[') ? (++inBrackets, true)\n          : (tok == ')' || tok == ']') ? (inBrackets && --inBrackets, true)\n          : !(selectors[i] == ' '\n              && (inBrackets || COMBINATOR[selectors[i-1]] === COMBINATOR\n                  || COMBINATOR[selectors[i+1]] === COMBINATOR))\n        ) {\n        selectors[k++] = selectors[i];\n      }\n    }\n    selectors.length = k;\n\n    // Split around commas.  If there is an error in one of the comma separated\n    // bits, we throw the whole away, but the failure of one selector does not\n    // affect others except that opt_onUntranslatableSelector allows one to\n    // treat the entire output as unusable.\n    var n = selectors.length, start = 0;\n    for (i = 0; i < n; ++i) {\n      if (selectors[i] === ',') {  // TODO: ignore ',' inside brackets.\n        if (!processComplexSelector(start, i)) { return null; }\n        start = i+1;\n      }\n    }\n    if (!processComplexSelector(start, n)) { return null; }\n\n\n    function processComplexSelector(start, end) {\n      // Space around commas is not an operator.\n      if (selectors[start] === ' ') { ++start; }\n      if (end-1 !== start && selectors[end] === ' ') { --end; }\n\n      // Split the selector into element selectors, content around\n      // space (ancestor operator) and '>' (descendant operator).\n      var out = [];\n      var lastOperator = start;\n      var valid = true;  // True iff out contains a valid complex selector.\n      for (var i = start; valid && i < end; ++i) {\n        var tok = selectors[i];\n        if (COMBINATOR[tok] === COMBINATOR || tok === ' ') {\n          // We've found the end of a single link in the selector chain.\n          if (!processCompoundSelector(lastOperator, i, tok)) {\n            valid = false;\n          } else {\n            lastOperator = i+1;\n          }\n        }\n      }\n      if (!processCompoundSelector(lastOperator, end, '')) {\n        valid = false;\n      }\n\n      function processCompoundSelector(start, end, combinator) {\n        // Split the element selector into four parts.\n        // DIV.foo#bar[href]:hover\n        //    ^       ^     ^\n        // el classes attrs pseudo\n        var element, classId, attrs, pseudoSelector,\n            tok,  // The current token\n            // valid implies the parts above comprise a sanitized selector.\n            valid = true;\n        element = '';\n        if (start < end) {\n          tok = selectors[start];\n          if (tok === '*') {\n            ++start;\n            element = tok;\n          } else if (/^[a-zA-Z]/.test(tok)) {  // is an element selector\n            var decision = tagPolicy(tok.toLowerCase(), []);\n            if (decision) {\n              if ('tagName' in decision) {\n                tok = decision['tagName'];\n              }\n              ++start;\n              element = tok;\n            }\n          }\n        }\n        classId = '';\n        attrs = '';\n        pseudoSelector = '';\n        for (;valid && start < end; ++start) {\n          tok = selectors[start];\n          if (tok.charAt(0) === '#') {\n            if (/^#_|__$|[^\\w#:\\-]/.test(tok)) {\n              valid = false;\n            } else {\n              // Rewrite ID elements to include the suffix.\n              classId += tok + idSuffix;\n            }\n          } else if (tok === '.') {\n            if (++start < end\n                && /^[0-9A-Za-z:_\\-]+$/.test(tok = selectors[start])\n                && !/^_|__$/.test(tok)) {\n              classId += '.' + tok;\n            } else {\n              valid = false;\n            }\n          } else if (start + 1 < end && selectors[start] === '[') {\n            ++start;\n            var vAttr = selectors[start++].toLowerCase();\n            // Schema lookup for type information\n            var atype = html4.ATTRIBS[element + '::' + vAttr];\n            if (atype !== +atype) { atype = html4.ATTRIBS['*::' + vAttr]; }\n\n            var rAttr;\n            // Consult policy\n            // TODO(kpreid): Making this optional is a kludge to avoid changing\n            // the public interface until we have a more well-structured design.\n            if (virtualization.virtualizeAttrName) {\n              rAttr = virtualization.virtualizeAttrName(element, vAttr);\n              if (typeof rAttr !== 'string') {\n                // rejected\n                valid = false;\n                rAttr = vAttr;\n              }\n              // don't reject even if not in schema\n              if (valid && atype !== +atype) {\n                atype = html4.atype['NONE'];\n              }\n            } else {\n              rAttr = vAttr;\n              if (atype !== +atype) {  // not permitted according to schema\n                valid = false;\n              }\n            }\n\n            var op = '', value = '', ignoreCase = false;\n            if (/^[~^$*|]?=$/.test(selectors[start])) {\n              op = selectors[start++];\n              value = selectors[start++];\n              // Quote identifier values.\n              if (/^[0-9A-Za-z:_\\-]+$/.test(value)) {\n                value = '\"' + value + '\"';\n              } else if (value === ']') {\n                value = '\"\"';\n                --start;\n              }\n              // Reject unquoted values.\n              if (!/^\"([^\\\"\\\\]|\\\\.)*\"$/.test(value)) {\n                valid = false;\n              }\n              ignoreCase = selectors[start] === \"i\";\n              if (ignoreCase) { ++start; }\n            }\n            if (selectors[start] !== ']') {\n              ++start;\n              valid = false;\n            }\n            // TODO: replace this with a lookup table that also provides a\n            // function from operator and value to testable value.\n            switch (atype) {\n            case html4.atype['CLASSES']:\n            case html4.atype['LOCAL_NAME']:\n            case html4.atype['NONE']:\n              break;\n            case html4.atype['GLOBAL_NAME']:\n            case html4.atype['ID']:\n            case html4.atype['IDREF']:\n              if ((op === '=' || op === '~=' || op === '$=')\n                  && value != '\"\"' && !ignoreCase) {\n                // The suffix is case-sensitive, so we can't translate case\n                // ignoring matches.\n                value = '\"'\n                  + value.substring(1, value.length-1) + idSuffix\n                  + '\"';\n              } else if (op === '|=' || op === '') {\n                // Ok.  a|=b -> a == b || a.startsWith(b + \"-\") and since we\n                // use \"-\" to separate the suffix from the identifier, we can\n                // allow this through unmodified.\n                // Existence checks are also ok.\n              } else {\n                // Can't correctly handle prefix and substring operators\n                // without leaking information about the suffix.\n                valid = false;\n              }\n              break;\n            case html4.atype['URI']:\n            case html4.atype['URI_FRAGMENT']:\n              // URIs are rewritten, so we can't meanginfully translate URI\n              // selectors besides the common a[href] one that is used to\n              // distinguish links from naming anchors.\n              if (op !== '') { valid = false; }\n              break;\n            // TODO: IDREFS\n            default:\n              valid = false;\n            }\n            if (valid) {\n              attrs += '[' + rAttr.replace(/[^\\w-]/g, '\\\\$&') + op + value +\n                  (ignoreCase ? ' i]' : ']');\n            }\n          } else if (start < end && selectors[start] === ':') {\n            tok = selectors[++start];\n            if (PSEUDO_SELECTOR_WHITELIST.test(tok)) {\n              pseudoSelector += ':' + tok;\n            } else {\n              break;\n            }\n          } else {\n            break;  // Unrecognized token.\n          }\n        }\n        if (start !== end) {  // Tokens not consumed.\n          valid = false;\n        }\n        if (valid) {\n          // ':' is allowed in identifiers, but is also the\n          // pseudo-selector separator, so ':' in preceding parts needs to\n          // be escaped.\n          var selector = (element + classId).replace(/[^ .*#\\w-]/g, '\\\\$&')\n              + attrs + pseudoSelector + combinator;\n          if (selector) { out.push(selector); }\n        }\n        return valid;\n      }\n\n      if (valid) {\n        if (out.length) {\n          var safeSelector = out.join('');\n\n          // Namespace the selector so that it only matches under\n          // a node with suffix in its CLASS attribute.\n          if (containerClass !== null) {\n            safeSelector = '.' + containerClass + ' ' + safeSelector;\n          }\n\n          sanitized.push(safeSelector);\n        }  // else nothing there.\n        return true;\n      } else {\n        return !opt_onUntranslatableSelector\n          || opt_onUntranslatableSelector(selectors.slice(start, end));\n      }\n    }\n    return sanitized;\n  };\n\n  (function () {\n    var MEDIA_TYPE =\n       '(?:'\n       + 'all|aural|braille|embossed|handheld|print'\n       + '|projection|screen|speech|tty|tv'\n       + ')';\n\n    // A white-list of media features extracted from the \"Pseudo-BNF\" in\n    // http://dev.w3.org/csswg/mediaqueries4/#media1 and\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries\n    var MEDIA_FEATURE =\n       '(?:'\n       + '(?:min-|max-)?'\n       + '(?:' + (\n           '(?:device-)?'\n         + '(?:aspect-ratio|height|width)'\n         + '|color(?:-index)?'\n         + '|monochrome'\n         + '|orientation'\n         + '|resolution'\n       )\n       + ')'\n       + '|grid'\n       + '|hover'\n       + '|luminosity'\n       + '|pointer'\n       + '|scan'\n       + '|script'\n       + ')';\n\n    var LENGTH_UNIT = '(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)';\n\n    var CSS_VALUE =\n       '-?(?:'\n       + '[a-z]\\\\w+(?:-\\\\w+)*'  // An identifier\n       // A length or scalar quantity, or a rational number.\n       // dev.w3.org/csswg/mediaqueries4/#values introduces a ratio value-type\n       // to allow matching aspect ratios like \"4 / 3\".\n       + '|\\\\d+(?: / \\\\d+|(?:\\\\.\\\\d+)?' + LENGTH_UNIT + '?)'\n       + ')';\n\n    var MEDIA_EXPR =\n       '\\\\( ' + MEDIA_FEATURE + ' (?:' + ': ' + CSS_VALUE + ' )?\\\\)';\n\n    var MEDIA_QUERY =\n       '(?:'\n       + '(?:(?:(?:only|not) )?' + MEDIA_TYPE + '|' + MEDIA_EXPR + ')'\n       // We use 'and ?' since 'and(' is a single CSS function token while\n       // 'and (' parses to two separate tokens -- IDENT \"and\", DELIM \"(\".\n       + '(?: and ?' + MEDIA_EXPR + ')*'\n       + ')';\n\n    var STARTS_WITH_KEYWORD_REGEXP = /^\\w/;\n\n    var MEDIA_QUERY_LIST_REGEXP = new RegExp(\n      '^' + MEDIA_QUERY + '(?: , ' + MEDIA_QUERY + ')*' + '$',\n      'i'\n    );\n\n    /**\n     * Sanitizes a media query as defined in\n     * http://dev.w3.org/csswg/mediaqueries4/#syntax\n     * <blockquote>\n     * Media Queries allow authors to adapt the style applied to a document\n     * based on the environment the document is being rendered in.\n     * </blockquote>\n     *\n     * @param {Array.<string>} cssTokens an array of tokens of the kind produced\n     *   by cssLexers.\n     * @return {string} a CSS media query.  This may be the empty string, or if\n     *   the input is invalid, then a query that is always false.\n     */\n    sanitizeMediaQuery = function (cssTokens) {\n      cssTokens = cssTokens.slice();\n      // Strip out space tokens.\n      var nTokens = cssTokens.length, k = 0;\n      for (var i = 0; i < nTokens; ++i) {\n        var tok = cssTokens[i];\n        if (tok != ' ') { cssTokens[k++] = tok; }\n      }\n      cssTokens.length = k;\n      var css = cssTokens.join(' ');\n      css = (\n        !css.length ? ''  // Always true per the spec.\n        : !(MEDIA_QUERY_LIST_REGEXP.test(css)) ? 'not all'  // Always false.\n        // Emit as-is if it starts with 'only', 'not' or a media type.\n        : STARTS_WITH_KEYWORD_REGEXP.test(css) ? css\n        : 'not all , ' + css  // Not ambiguous with a URL.\n      );\n      return css;\n    };\n  }());\n\n  (function () {\n\n    /**\n     * Extracts a url out of an at-import rule of the form:\n     *   \\@import \"mystyle.css\";\n     *   \\@import url(\"mystyle.css\");\n     *\n     * Returns null if no valid url was found.\n     */\n    function cssParseUri(candidate) {\n      var string1 = /^\\s*[\"]([^\"]*)[\"]\\s*$/;\n      var string2 = /^\\s*[']([^']*)[']\\s*$/;\n      var url1 = /^\\s*url\\s*[(][\"]([^\"]*)[\"][)]\\s*$/;\n      var url2 = /^\\s*url\\s*[(][']([^']*)['][)]\\s*$/;\n      // Not officially part of the CSS2.1 grammar\n      // but supported by Chrome\n      var url3 = /^\\s*url\\s*[(]([^)]*)[)]\\s*$/;\n      var match;\n      if ((match = string1.exec(candidate))) {\n        return match[1];\n      } else if ((match = string2.exec(candidate))) {\n        return match[1];\n      } else if ((match = url1.exec(candidate))) {\n        return match[1];\n      } else if ((match = url2.exec(candidate))) {\n        return match[1];\n      } else if ((match = url3.exec(candidate))) {\n        return match[1];\n      }\n      return null;\n    }\n\n    /**\n     * @param {string} baseUri a string against which relative urls are\n     *    resolved.\n     * @param {string} cssText a string containing a CSS stylesheet.\n     * @param {{\n     *     containerClass: ?string,\n     *     idSuffix: string,\n     *     tagPolicy: function(string, Array.<string>): ?Array.<string>,\n     *     virtualizeAttrName: ?function(string, string): ?string\n     *   }} virtualization An object like <pre<{\n     *   containerClass: class name prepended to all selectors to scope them (if\n     *       not null)\n     *   idSuffix: appended to all IDs to scope them\n     *   tagPolicy: As in html-sanitizer, used for rewriting element names.\n     *   virtualizeAttrName: Rewrite a single attribute name for attribute\n     *       selectors, or return null if not possible. Should be consistent\n     *       with tagPolicy if possible. Optional.\n     * }</pre>\n     *    If containerClass is {@code \"sfx\"} and idSuffix is {@code \"-sfx\"}, the\n     *    selector\n     *    {@code [\"a\", \"#foo\", \" \", \"b\", \".bar\"]} will be namespaced to\n     *    {@code [\".sfx\", \" \", \"a\", \"#foo-sfx\", \" \", \"b\", \".bar\"]}.\n     * @param {function(string, string)} naiveUriRewriter maps URLs of media\n     *    (images, sounds) that appear as CSS property values to sanitized\n     *    URLs or null if the URL should not be allowed as an external media\n     *    file in sanitized CSS.\n     * @param {undefined|function({toString: function ():string}, boolean)}\n     *     continuation\n     *     callback that receives the result of loading imported CSS.\n     *     The callback is called with\n     *     (cssContent : function ():string, moreToCome : boolean)\n     *     where cssContent is the CSS at the imported URL, and moreToCome is\n     *     true when the external URL itself loaded other external URLs.\n     *     If the output of the original call is stringified when moreToCome is\n     *     false, then it will be complete.\n     * @param {Array.<number>} opt_importCount the number of imports that need\n     *     to be satisfied before there is no more pending content.\n     * @return {{result:{toString:function ():string},moreToCome:boolean}}\n     *     the CSS text, and a flag that indicates whether there are pending\n     *     imports that will be passed to continuation.\n     */\n    function sanitizeStylesheetInternal(\n        baseUri, cssText, virtualization, naiveUriRewriter, naiveUriFetcher,\n        continuation, opt_importCount) {\n      var safeCss = void 0;\n      // Return a result with moreToCome===true when the last import has been\n      // sanitized.\n      var importCount = opt_importCount || [0];\n      // A stack describing the { ... } regions.\n      // Null elements indicate blocks that should not be emitted.\n      var blockStack = [];\n      // True when the content of the current block should be left off safeCss.\n      var elide = false;\n      parseCssStylesheet(\n          cssText,\n          {\n            'startStylesheet': function () {\n              safeCss = [];\n            },\n            'endStylesheet': function () {\n            },\n            'startAtrule': function (atIdent, headerArray) {\n              if (elide) {\n                atIdent = null;\n              } else if (atIdent === '@media') {\n                safeCss.push('@media', ' ', sanitizeMediaQuery(headerArray));\n              } else if (atIdent === '@keyframes'\n                         || atIdent === '@-webkit-keyframes') {\n                var animationId = headerArray[0];\n                if (headerArray.length === 1\n                    && !/__$|[^\\w\\-]/.test(animationId)) {\n                  safeCss.push(\n                      atIdent, ' ', animationId + virtualization.idSuffix);\n                  atIdent = '@keyframes';\n                } else {\n                  atIdent = null;\n                }\n              } else {\n                if (atIdent === '@import' && headerArray.length > 0) {\n                  atIdent = null;\n                  if ('function' === typeof continuation) {\n                    var mediaQuery = sanitizeMediaQuery(headerArray.slice(1));\n                    if (mediaQuery !== 'not all') {\n                      ++importCount[0];\n                      var placeholder = [];\n                      safeCss.push(placeholder);\n                      var cssUrl = safeUri(\n                          resolveUri(baseUri, cssParseUri(headerArray[0])),\n                          function(result) {\n                            var sanitized = sanitizeStylesheetInternal(\n                                cssUrl, result.html, virtualization,\n                                naiveUriRewriter, naiveUriFetcher,\n                                continuation, importCount);\n                            --importCount[0];\n                            var safeImportedCss = mediaQuery\n                              ? {\n                                toString: function () {\n                                  return (\n                                    '@media ' + mediaQuery + ' {'\n                                    + sanitized.result + '}'\n                                  );\n                                }\n                              }\n                              : sanitized.result;\n                            placeholder[0] = safeImportedCss;\n                            continuation(safeImportedCss, !!importCount[0]);\n                          },\n                          naiveUriFetcher);\n                    }\n                  } else {\n                    // TODO: Use a logger instead.\n                    if (window.console) {\n                      window.console.log(\n                          '@import ' + headerArray.join(' ') + ' elided');\n                    }\n                  }\n                }\n              }\n              elide = !atIdent;\n              blockStack.push(atIdent);\n            },\n            'endAtrule': function () {\n              blockStack.pop();\n              if (!elide) {\n                safeCss.push(';');\n              }\n              checkElide();\n            },\n            'startBlock': function () {\n              // There are no bare blocks in CSS, so we do not change the\n              // block stack here, but instead in the events that bracket\n              // blocks.\n              if (!elide) {\n                safeCss.push('{');\n              }\n            },\n            'endBlock': function () {\n              if (!elide) {\n                safeCss.push('}');\n                elide = true;  // skip any semicolon from endAtRule.\n              }\n            },\n            'startRuleset': function (selectorArray) {\n              if (!elide) {\n                var selector = void 0;\n                if (blockStack[blockStack.length - 1] === '@keyframes') {\n                  // Allow [from | to | <percentage>]\n                  selector = selectorArray.join(' ')\n                    .match(/^ *(?:from|to|\\d+(?:\\.\\d+)?%) *(?:, *(?:from|to|\\d+(?:\\.\\d+)?%) *)*$/i);\n                  elide = !selector;\n                  if (selector) { selector = selector[0].replace(/ +/g, ''); }\n                } else {\n                  var selectors = sanitizeCssSelectorList(\n                      selectorArray, virtualization);\n                  if (!selectors || !selectors.length) {\n                    elide = true;\n                  } else {\n                    selector = selectors.join(', ');\n                  }\n                }\n                if (!elide) {\n                  safeCss.push(selector, '{');\n                }\n              }\n              blockStack.push(null);\n            },\n            'endRuleset': function () {\n              blockStack.pop();\n              if (!elide) {\n                safeCss.push('}');\n              }\n              checkElide();\n            },\n            'declaration': function (property, valueArray) {\n              if (!elide) {\n                var isImportant = false;\n                var nValues = valueArray.length;\n                if (nValues >= 2\n                    && valueArray[nValues - 2] === '!'\n                    && valueArray[nValues - 1].toLowerCase() === 'important') {\n                  isImportant = true;\n                  valueArray.length -= 2;\n                }\n                sanitizeCssProperty(\n                    property, valueArray, naiveUriRewriter, baseUri,\n                    virtualization.idSuffix);\n                if (valueArray.length) {\n                  safeCss.push(\n                      property, ':', valueArray.join(' '),\n                      isImportant ? ' !important;' : ';');\n                }\n              }\n            }\n          });\n      function checkElide() {\n        elide = blockStack.length && blockStack[blockStack.length-1] === null;\n      }\n      return {\n        result : { toString: function () { return safeCss.join(''); } },\n        moreToCome : !!importCount[0]\n      };\n    }\n\n    sanitizeStylesheet = function (\n        baseUri, cssText, virtualization, naiveUriRewriter) {\n      return sanitizeStylesheetInternal(\n          baseUri, cssText, virtualization,\n          naiveUriRewriter, undefined, undefined).result.toString();\n    };\n\n    sanitizeStylesheetWithExternals = function (\n        baseUri, cssText, virtualization, naiveUriRewriter, naiveUriFetcher,\n        continuation) {\n      return sanitizeStylesheetInternal(\n          baseUri, cssText, virtualization,\n          naiveUriRewriter, naiveUriFetcher, continuation);\n    };\n  })();\n})();\n\n// Exports for closure compiler.\nif (typeof window !== 'undefined') {\n  window['sanitizeCssProperty'] = sanitizeCssProperty;\n  window['sanitizeCssSelectorList'] = sanitizeCssSelectorList;\n  window['sanitizeStylesheet'] = sanitizeStylesheet;\n  window['sanitizeMediaQuery'] = sanitizeMediaQuery;\n}\n;\n// Copyright (C) 2010 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * Utilities for dealing with CSS source code.\n *\n * @author mikesamuel@gmail.com\n * \\@requires lexCss\n * \\@overrides window\n * \\@provides parseCssStylesheet, parseCssDeclarations\n */\n\n// The Turkish i seems to be a non-issue, but abort in case it is.\nif ('I'.toLowerCase() !== 'i') { throw 'I/i problem'; }\n\n/**\n * parseCssStylesheet takes a chunk of CSS text and a handler object with\n * methods that it calls as below:\n * <pre>\n * // At the beginning of a stylesheet.\n * handler.startStylesheet();\n *\n * // For an @foo rule ended by a semicolon: @import \"foo.css\";\n * handler.startAtrule('@import', ['\"foo.css\"']);\n * handler.endAtrule();\n *\n * // For an @foo rule ended with a block. @media print { ... }\n * handler.startAtrule('@media', ['print']);\n * handler.startBlock();\n * // Calls to contents elided.  Probably selectors and declarations as below.\n * handler.endBlock();\n * handler.endAtrule();\n *\n * // For a ruleset: p.clazz q, s { color: blue; }\n * handler.startRuleset(['p', '.', 'clazz', ' ', 'q', ',', ' ', 's']);\n * handler.declaration('color', ['blue']);\n * handler.endRuleset();\n *\n * // At the end of a stylesheet.\n * handler.endStylesheet();\n * </pre>\n * When errors are encountered, the parser drops the useless tokens and\n * attempts to resume parsing.\n *\n * @param {string} cssText CSS3 content to parse as a stylesheet.\n * @param {Object} handler An object like <pre>{\n *   startStylesheet: function () { ... },\n *   endStylesheet: function () { ... },\n *   startAtrule: function (atIdent, headerArray) { ... },\n *   endAtrule: function () { ... },\n *   startBlock: function () { ... },\n *   endBlock: function () { ... },\n *   startRuleset: function (selectorArray) { ... },\n *   endRuleset: function () { ... },\n *   declaration: function (property, valueArray) { ... },\n * }</pre>\n */\nvar parseCssStylesheet;\n\n/**\n * parseCssDeclarations parses a run of declaration productions as seen in the\n * body of the HTML5 {@code style} attribute.\n *\n * @param {string} cssText CSS3 content to parse as a run of declarations.\n * @param {Object} handler An object like <pre>{\n *   declaration: function (property, valueArray) { ... },\n * }</pre>\n */\nvar parseCssDeclarations;\n\n(function () {\n  // stylesheet  : [ CDO | CDC | S | statement ]*;\n  parseCssStylesheet = function(cssText, handler) {\n    var toks = lexCss(cssText);\n    if (handler['startStylesheet']) { handler['startStylesheet'](); }\n    for (var i = 0, n = toks.length; i < n;) {\n      // CDO and CDC (\"<!--\" and \"-->\") are converted to space by the lexer.\n      i = toks[i] === ' ' ? i+1 : statement(toks, i, n, handler);\n    }\n    if (handler['endStylesheet']) { handler['endStylesheet'](); }\n  };\n\n  // statement   : ruleset | at-rule;\n  function statement(toks, i, n, handler) {\n    if (i < n) {\n      var tok = toks[i];\n      if (tok.charAt(0) === '@') {\n        return atrule(toks, i, n, handler, true);\n      } else {\n        return ruleset(toks, i, n, handler);\n      }\n    } else {\n      return i;\n    }\n  }\n\n  // at-rule     : ATKEYWORD S* any* [ block | ';' S* ];\n  function atrule(toks, i, n, handler, blockok) {\n    var start = i++;\n    while (i < n && toks[i] !== '{' && toks[i] !== ';') {\n      ++i;\n    }\n    if (i < n && (blockok || toks[i] === ';')) {\n      var s = start+1, e = i;\n      if (s < n && toks[s] === ' ') { ++s; }\n      if (e > s && toks[e-1] === ' ') { --e; }\n      if (handler['startAtrule']) {\n        handler['startAtrule'](toks[start].toLowerCase(), toks.slice(s, e));\n      }\n      i = (toks[i] === '{')\n          ? block(toks, i, n, handler)\n          : i+1;  // Skip over ';'\n      if (handler['endAtrule']) {\n        handler['endAtrule']();\n      }\n    }\n    // Else we reached end of input or are missing a semicolon.\n    // Drop the rule on the floor.\n    return i;\n  }\n\n  // block       : '{' S* [ any | block | ATKEYWORD S* | ';' S* ]* '}' S*;\n   // Assumes the leading '{' has been verified by callers.\n  function block(toks, i, n, handler) {\n    ++i; //  skip over '{'\n    if (handler['startBlock']) { handler['startBlock'](); }\n    while (i < n) {\n      var ch = toks[i].charAt(0);\n      if (ch == '}') {\n        ++i;\n        break;\n      }\n      if (ch === ' ' || ch === ';') {\n        i = i+1;\n      } else if (ch === '@') {\n        i = atrule(toks, i, n, handler, false);\n      } else if (ch === '{') {\n        i = block(toks, i, n, handler);\n      } else {\n        // Instead of using (any* block) to subsume ruleset we allow either\n        // blocks or rulesets with a non-blank selector.\n        // This is more restrictive but does not require atrule specific\n        // parse tree fixup to realize that the contents of the block in\n        //    @media print { ... }\n        // is a ruleset.  We just don't care about any block carrying at-rules\n        // whose body content is not ruleset content.\n        i = ruleset(toks, i, n, handler);\n      }\n    }\n    if (handler['endBlock']) { handler['endBlock'](); }\n    return i;\n  }\n\n  // ruleset    : selector? '{' S* declaration? [ ';' S* declaration? ]* '}' S*;\n  function ruleset(toks, i, n, handler) {\n    // toks[s:e] are the selector tokens including internal whitespace.\n    var s = i, e = selector(toks, i, n, true);\n    if (e < 0) {\n      // Skip malformed content per selector calling convention.\n      e = ~e;\n      // Make sure we skip at least one token.\n      return e === s ? e+1 : e;\n    }\n    var tok = toks[e];\n    if (tok !== '{') {\n      // Make sure we skip at least one token.\n      return e === s ? e+1 : e;\n    }\n    i = e+1;  // Skip over '{'\n    // Don't include any trailing space in the selector slice.\n    if (e > s && toks[e-1] === ' ') { --e; }\n    if (handler['startRuleset']) {\n      handler['startRuleset'](toks.slice(s, e));\n    }\n    while (i < n) {\n      tok = toks[i];\n      if (tok === '}') {\n        ++i;\n        break;\n      }\n      if (tok === ' ') {\n        i = i+1;\n      } else {\n        i = declaration(toks, i, n, handler);\n      }\n    }\n    if (handler['endRuleset']) {\n      handler['endRuleset']();\n    }\n    return i;\n  }\n\n  // selector    : any+;\n  // any         : [ IDENT | NUMBER | PERCENTAGE | DIMENSION | STRING\n  //               | DELIM | URI | HASH | UNICODE-RANGE | INCLUDES\n  //               | FUNCTION S* any* ')' | DASHMATCH | '(' S* any* ')'\n  //               | '[' S* any* ']' ] S*;\n  // A negative return value, rv, indicates the selector was malformed and\n  // the index at which we stopped is ~rv.\n  function selector(toks, i, n, allowSemi) {\n    var s = i;\n    // The definition of any above can be summed up as\n    //   \"any run of token except ('[', ']', '(', ')', ':', ';', '{', '}')\n    //    or nested runs of parenthesized tokens or square bracketed tokens\".\n    // Spaces are significant in the selector.\n    // Selector is used as (selector?) so the below looks for (any*) for\n    // simplicity.\n    var tok;\n    // Keeping a stack pointer actually causes this to minify better since\n    // \".length\" and \".push\" are a lo of chars.\n    var brackets = [], stackLast = -1;\n    for (;i < n; ++i) {\n      tok = toks[i].charAt(0);\n      if (tok === '[' || tok === '(') {\n        brackets[++stackLast] = tok;\n      } else if ((tok === ']' && brackets[stackLast] === '[') ||\n                 (tok === ')' && brackets[stackLast] === '(')) {\n        --stackLast;\n      } else if (tok === '{' || tok === '}' || tok === ';' || tok === '@'\n                 || (tok === ':' && !allowSemi)) {\n        break;\n      }\n    }\n    if (stackLast >= 0) {\n      // Returns the bitwise inverse of i+1 to indicate an error in the\n      // token stream so that clients can ignore it.\n      i = ~(i+1);\n    }\n    return i;\n  }\n\n  var ident = /^-?[a-z]/i;\n\n  function skipDeclaration(toks, i, n) {\n    // TODO(felix8a): maybe skip balanced pairs of {}\n    while (i < n && toks[i] !== ';' && toks[i] !== '}') { ++i; }\n    return i < n && toks[i] === ';' ? i+1 : i;\n  }\n\n  // declaration : property ':' S* value;\n  // property    : IDENT S*;\n  // value       : [ any | block | ATKEYWORD S* ]+;\n  function declaration(toks, i, n, handler) {\n    var property = toks[i++];\n    if (!ident.test(property)) {\n      return skipDeclaration(toks, i, n);\n    }\n    var tok;\n    if (i < n && toks[i] === ' ') { ++i; }\n    if (i == n || toks[i] !== ':') {\n      return skipDeclaration(toks, i, n);\n    }\n    ++i;\n    if (i < n && toks[i] === ' ') { ++i; }\n\n    // None of the rules we care about want atrules or blocks in value, so\n    // we look for any+ but that is the same as selector but not zero-length.\n    // This gets us the benefit of not emitting any value with mismatched\n    // brackets.\n    var s = i, e = selector(toks, i, n, false);\n    if (e < 0) {\n      // Skip malformed content per selector calling convention.\n      e = ~e;\n    } else {\n      var value = [], valuelen = 0;\n      for (var j = s; j < e; ++j) {\n        tok = toks[j];\n        if (tok !== ' ') {\n          value[valuelen++] = tok;\n        }\n      }\n      // One of the following is now true:\n      // (1) e is flush with the end of the tokens as in <... style=\"x:y\">.\n      // (2) tok[e] points to a ';' in which case we need to consume the semi.\n      // (3) tok[e] points to a '}' in which case we don't consume it.\n      // (4) else there is bogus unparsed value content at toks[e:].\n      // Allow declaration flush with end for style attr body.\n      if (e < n) {  // 2, 3, or 4\n        do {\n          tok = toks[e];\n          if (tok === ';' || tok === '}') { break; }\n          // Don't emit the property if there is questionable trailing content.\n          valuelen = 0;\n        } while (++e < n);\n        if (tok === ';') {\n          ++e;\n        }\n      }\n      if (valuelen && handler['declaration']) {\n        // TODO: coerce non-keyword ident tokens to quoted strings.\n        handler['declaration'](property.toLowerCase(), value);\n      }\n    }\n    return e;\n  }\n\n  parseCssDeclarations = function(cssText, handler) {\n    var toks = lexCss(cssText);\n    for (var i = 0, n = toks.length; i < n;) {\n      i = toks[i] !== ' ' ? declaration(toks, i, n, handler) : i+1;\n    }\n  };\n})();\n\n// Exports for closure compiler.\nif (typeof window !== 'undefined') {\n  window['parseCssStylesheet'] = parseCssStylesheet;\n  window['parseCssDeclarations'] = parseCssDeclarations;\n}\n;\n// Copyright Google Inc.\n// Licensed under the Apache Licence Version 2.0\n// Autogenerated at Wed Nov 25 17:35:12 CET 2015\n// @overrides window\n// @provides html4\nvar html4 = {};\nhtml4.atype = {\n  'NONE': 0,\n  'URI': 1,\n  'URI_FRAGMENT': 11,\n  'SCRIPT': 2,\n  'STYLE': 3,\n  'HTML': 12,\n  'ID': 4,\n  'IDREF': 5,\n  'IDREFS': 6,\n  'GLOBAL_NAME': 7,\n  'LOCAL_NAME': 8,\n  'CLASSES': 9,\n  'FRAME_TARGET': 10,\n  'MEDIA_QUERY': 13\n};\nhtml4[ 'atype' ] = html4.atype;\nhtml4.ATTRIBS = {\n  '*::class': 9,\n  '*::dir': 0,\n  '*::draggable': 0,\n  '*::hidden': 0,\n  '*::id': 4,\n  '*::inert': 0,\n  '*::itemprop': 0,\n  '*::itemref': 6,\n  '*::itemscope': 0,\n  '*::lang': 0,\n  '*::onblur': 2,\n  '*::onchange': 2,\n  '*::onclick': 2,\n  '*::ondblclick': 2,\n  '*::onerror': 2,\n  '*::onfocus': 2,\n  '*::onkeydown': 2,\n  '*::onkeypress': 2,\n  '*::onkeyup': 2,\n  '*::onload': 2,\n  '*::onmousedown': 2,\n  '*::onmousemove': 2,\n  '*::onmouseout': 2,\n  '*::onmouseover': 2,\n  '*::onmouseup': 2,\n  '*::onreset': 2,\n  '*::onscroll': 2,\n  '*::onselect': 2,\n  '*::onsubmit': 2,\n  '*::ontouchcancel': 2,\n  '*::ontouchend': 2,\n  '*::ontouchenter': 2,\n  '*::ontouchleave': 2,\n  '*::ontouchmove': 2,\n  '*::ontouchstart': 2,\n  '*::onunload': 2,\n  '*::spellcheck': 0,\n  '*::style': 3,\n  '*::tabindex': 0,\n  '*::title': 0,\n  '*::translate': 0,\n  'a::accesskey': 0,\n  'a::coords': 0,\n  'a::href': 1,\n  'a::hreflang': 0,\n  'a::name': 7,\n  'a::onblur': 2,\n  'a::onfocus': 2,\n  'a::shape': 0,\n  'a::target': 0,\n  'a::type': 0,\n  'area::accesskey': 0,\n  'area::alt': 0,\n  'area::coords': 0,\n  'area::href': 1,\n  'area::nohref': 0,\n  'area::onblur': 2,\n  'area::onfocus': 2,\n  'area::shape': 0,\n  'area::target': 10,\n  'audio::controls': 0,\n  'audio::loop': 0,\n  'audio::mediagroup': 5,\n  'audio::muted': 0,\n  'audio::preload': 0,\n  'audio::src': 1,\n  'bdo::dir': 0,\n  'blockquote::cite': 1,\n  'br::clear': 0,\n  'button::accesskey': 0,\n  'button::disabled': 0,\n  'button::name': 8,\n  'button::onblur': 2,\n  'button::onfocus': 2,\n  'button::type': 0,\n  'button::value': 0,\n  'canvas::height': 0,\n  'canvas::width': 0,\n  'caption::align': 0,\n  'col::align': 0,\n  'col::char': 0,\n  'col::charoff': 0,\n  'col::span': 0,\n  'col::valign': 0,\n  'col::width': 0,\n  'colgroup::align': 0,\n  'colgroup::char': 0,\n  'colgroup::charoff': 0,\n  'colgroup::span': 0,\n  'colgroup::valign': 0,\n  'colgroup::width': 0,\n  'command::checked': 0,\n  'command::command': 5,\n  'command::disabled': 0,\n  'command::icon': 1,\n  'command::label': 0,\n  'command::radiogroup': 0,\n  'command::type': 0,\n  'data::value': 0,\n  'del::cite': 1,\n  'del::datetime': 0,\n  'details::open': 0,\n  'dir::compact': 0,\n  'div::align': 0,\n  'dl::compact': 0,\n  'fieldset::disabled': 0,\n  'font::color': 0,\n  'font::face': 0,\n  'font::size': 0,\n  'form::accept': 0,\n  'form::action': 1,\n  'form::autocomplete': 0,\n  'form::enctype': 0,\n  'form::method': 0,\n  'form::name': 7,\n  'form::novalidate': 0,\n  'form::onreset': 2,\n  'form::onsubmit': 2,\n  'form::target': 10,\n  'h1::align': 0,\n  'h2::align': 0,\n  'h3::align': 0,\n  'h4::align': 0,\n  'h5::align': 0,\n  'h6::align': 0,\n  'hr::align': 0,\n  'hr::noshade': 0,\n  'hr::size': 0,\n  'hr::width': 0,\n  'iframe::align': 0,\n  'iframe::frameborder': 0,\n  'iframe::height': 0,\n  'iframe::marginheight': 0,\n  'iframe::marginwidth': 0,\n  'iframe::width': 0,\n  'img::align': 0,\n  'img::alt': 0,\n  'img::border': 0,\n  'img::height': 0,\n  'img::hspace': 0,\n  'img::ismap': 0,\n  'img::name': 7,\n  'img::src': 1,\n  'img::usemap': 11,\n  'img::vspace': 0,\n  'img::width': 0,\n  'input::accept': 0,\n  'input::accesskey': 0,\n  'input::align': 0,\n  'input::alt': 0,\n  'input::autocomplete': 0,\n  'input::checked': 0,\n  'input::disabled': 0,\n  'input::inputmode': 0,\n  'input::ismap': 0,\n  'input::list': 5,\n  'input::max': 0,\n  'input::maxlength': 0,\n  'input::min': 0,\n  'input::multiple': 0,\n  'input::name': 8,\n  'input::onblur': 2,\n  'input::onchange': 2,\n  'input::onfocus': 2,\n  'input::onselect': 2,\n  'input::pattern': 0,\n  'input::placeholder': 0,\n  'input::readonly': 0,\n  'input::required': 0,\n  'input::size': 0,\n  'input::src': 1,\n  'input::step': 0,\n  'input::type': 0,\n  'input::usemap': 11,\n  'input::value': 0,\n  'ins::cite': 1,\n  'ins::datetime': 0,\n  'label::accesskey': 0,\n  'label::for': 5,\n  'label::onblur': 2,\n  'label::onfocus': 2,\n  'legend::accesskey': 0,\n  'legend::align': 0,\n  'li::type': 0,\n  'li::value': 0,\n  'map::name': 7,\n  'menu::compact': 0,\n  'menu::label': 0,\n  'menu::type': 0,\n  'meter::high': 0,\n  'meter::low': 0,\n  'meter::max': 0,\n  'meter::min': 0,\n  'meter::optimum': 0,\n  'meter::value': 0,\n  'ol::compact': 0,\n  'ol::reversed': 0,\n  'ol::start': 0,\n  'ol::type': 0,\n  'optgroup::disabled': 0,\n  'optgroup::label': 0,\n  'option::disabled': 0,\n  'option::label': 0,\n  'option::selected': 0,\n  'option::value': 0,\n  'output::for': 6,\n  'output::name': 8,\n  'p::align': 0,\n  'pre::width': 0,\n  'progress::max': 0,\n  'progress::min': 0,\n  'progress::value': 0,\n  'q::cite': 1,\n  'select::autocomplete': 0,\n  'select::disabled': 0,\n  'select::multiple': 0,\n  'select::name': 8,\n  'select::onblur': 2,\n  'select::onchange': 2,\n  'select::onfocus': 2,\n  'select::required': 0,\n  'select::size': 0,\n  'source::type': 0,\n  'table::align': 0,\n  'table::bgcolor': 0,\n  'table::border': 0,\n  'table::cellpadding': 0,\n  'table::cellspacing': 0,\n  'table::frame': 0,\n  'table::rules': 0,\n  'table::summary': 0,\n  'table::width': 0,\n  'tbody::align': 0,\n  'tbody::char': 0,\n  'tbody::charoff': 0,\n  'tbody::valign': 0,\n  'td::abbr': 0,\n  'td::align': 0,\n  'td::axis': 0,\n  'td::bgcolor': 0,\n  'td::char': 0,\n  'td::charoff': 0,\n  'td::colspan': 0,\n  'td::headers': 6,\n  'td::height': 0,\n  'td::nowrap': 0,\n  'td::rowspan': 0,\n  'td::scope': 0,\n  'td::valign': 0,\n  'td::width': 0,\n  'textarea::accesskey': 0,\n  'textarea::autocomplete': 0,\n  'textarea::cols': 0,\n  'textarea::disabled': 0,\n  'textarea::inputmode': 0,\n  'textarea::name': 8,\n  'textarea::onblur': 2,\n  'textarea::onchange': 2,\n  'textarea::onfocus': 2,\n  'textarea::onselect': 2,\n  'textarea::placeholder': 0,\n  'textarea::readonly': 0,\n  'textarea::required': 0,\n  'textarea::rows': 0,\n  'textarea::wrap': 0,\n  'tfoot::align': 0,\n  'tfoot::char': 0,\n  'tfoot::charoff': 0,\n  'tfoot::valign': 0,\n  'th::abbr': 0,\n  'th::align': 0,\n  'th::axis': 0,\n  'th::bgcolor': 0,\n  'th::char': 0,\n  'th::charoff': 0,\n  'th::colspan': 0,\n  'th::headers': 6,\n  'th::height': 0,\n  'th::nowrap': 0,\n  'th::rowspan': 0,\n  'th::scope': 0,\n  'th::valign': 0,\n  'th::width': 0,\n  'thead::align': 0,\n  'thead::char': 0,\n  'thead::charoff': 0,\n  'thead::valign': 0,\n  'tr::align': 0,\n  'tr::bgcolor': 0,\n  'tr::char': 0,\n  'tr::charoff': 0,\n  'tr::valign': 0,\n  'track::default': 0,\n  'track::kind': 0,\n  'track::label': 0,\n  'track::srclang': 0,\n  'ul::compact': 0,\n  'ul::type': 0,\n  'video::controls': 0,\n  'video::height': 0,\n  'video::loop': 0,\n  'video::mediagroup': 5,\n  'video::muted': 0,\n  'video::poster': 1,\n  'video::preload': 0,\n  'video::src': 1,\n  'video::width': 0\n};\nhtml4[ 'ATTRIBS' ] = html4.ATTRIBS;\nhtml4.eflags = {\n  'OPTIONAL_ENDTAG': 1,\n  'EMPTY': 2,\n  'CDATA': 4,\n  'RCDATA': 8,\n  'UNSAFE': 16,\n  'FOLDABLE': 32,\n  'SCRIPT': 64,\n  'STYLE': 128,\n  'VIRTUALIZED': 256\n};\nhtml4[ 'eflags' ] = html4.eflags;\nhtml4.ELEMENTS = {\n  'a': 0,\n  'abbr': 0,\n  'acronym': 0,\n  'address': 0,\n  'applet': 272,\n  'area': 2,\n  'article': 0,\n  'aside': 0,\n  'audio': 0,\n  'b': 0,\n  'base': 274,\n  'basefont': 274,\n  'bdi': 0,\n  'bdo': 0,\n  'big': 0,\n  'blockquote': 0,\n  'body': 305,\n  'br': 2,\n  'button': 0,\n  'canvas': 0,\n  'caption': 0,\n  'center': 0,\n  'cite': 0,\n  'code': 0,\n  'col': 2,\n  'colgroup': 1,\n  'command': 2,\n  'data': 0,\n  'datalist': 0,\n  'dd': 1,\n  'del': 0,\n  'details': 0,\n  'dfn': 0,\n  'dialog': 272,\n  'dir': 0,\n  'div': 0,\n  'dl': 0,\n  'dt': 1,\n  'em': 0,\n  'fieldset': 0,\n  'figcaption': 0,\n  'figure': 0,\n  'font': 0,\n  'footer': 0,\n  'form': 0,\n  'frame': 274,\n  'frameset': 272,\n  'h1': 0,\n  'h2': 0,\n  'h3': 0,\n  'h4': 0,\n  'h5': 0,\n  'h6': 0,\n  'head': 305,\n  'header': 0,\n  'hgroup': 0,\n  'hr': 2,\n  'html': 305,\n  'i': 0,\n  'iframe': 16,\n  'img': 2,\n  'input': 2,\n  'ins': 0,\n  'isindex': 274,\n  'kbd': 0,\n  'keygen': 274,\n  'label': 0,\n  'legend': 0,\n  'li': 1,\n  'link': 274,\n  'map': 0,\n  'mark': 0,\n  'menu': 0,\n  'meta': 274,\n  'meter': 0,\n  'nav': 0,\n  'nobr': 0,\n  'noembed': 276,\n  'noframes': 276,\n  'noscript': 276,\n  'object': 272,\n  'ol': 0,\n  'optgroup': 0,\n  'option': 1,\n  'output': 0,\n  'p': 1,\n  'param': 274,\n  'pre': 0,\n  'progress': 0,\n  'q': 0,\n  's': 0,\n  'samp': 0,\n  'script': 84,\n  'section': 0,\n  'select': 0,\n  'small': 0,\n  'source': 2,\n  'span': 0,\n  'strike': 0,\n  'strong': 0,\n  'style': 148,\n  'sub': 0,\n  'summary': 0,\n  'sup': 0,\n  'table': 0,\n  'tbody': 1,\n  'td': 1,\n  'textarea': 8,\n  'tfoot': 1,\n  'th': 1,\n  'thead': 1,\n  'time': 0,\n  'title': 280,\n  'tr': 1,\n  'track': 2,\n  'tt': 0,\n  'u': 0,\n  'ul': 0,\n  'var': 0,\n  'video': 0,\n  'wbr': 2\n};\nhtml4[ 'ELEMENTS' ] = html4.ELEMENTS;\nhtml4.ELEMENT_DOM_INTERFACES = {\n  'a': 'HTMLAnchorElement',\n  'abbr': 'HTMLElement',\n  'acronym': 'HTMLElement',\n  'address': 'HTMLElement',\n  'applet': 'HTMLAppletElement',\n  'area': 'HTMLAreaElement',\n  'article': 'HTMLElement',\n  'aside': 'HTMLElement',\n  'audio': 'HTMLAudioElement',\n  'b': 'HTMLElement',\n  'base': 'HTMLBaseElement',\n  'basefont': 'HTMLBaseFontElement',\n  'bdi': 'HTMLElement',\n  'bdo': 'HTMLElement',\n  'big': 'HTMLElement',\n  'blockquote': 'HTMLQuoteElement',\n  'body': 'HTMLBodyElement',\n  'br': 'HTMLBRElement',\n  'button': 'HTMLButtonElement',\n  'canvas': 'HTMLCanvasElement',\n  'caption': 'HTMLTableCaptionElement',\n  'center': 'HTMLElement',\n  'cite': 'HTMLElement',\n  'code': 'HTMLElement',\n  'col': 'HTMLTableColElement',\n  'colgroup': 'HTMLTableColElement',\n  'command': 'HTMLCommandElement',\n  'data': 'HTMLElement',\n  'datalist': 'HTMLDataListElement',\n  'dd': 'HTMLElement',\n  'del': 'HTMLModElement',\n  'details': 'HTMLDetailsElement',\n  'dfn': 'HTMLElement',\n  'dialog': 'HTMLDialogElement',\n  'dir': 'HTMLDirectoryElement',\n  'div': 'HTMLDivElement',\n  'dl': 'HTMLDListElement',\n  'dt': 'HTMLElement',\n  'em': 'HTMLElement',\n  'fieldset': 'HTMLFieldSetElement',\n  'figcaption': 'HTMLElement',\n  'figure': 'HTMLElement',\n  'font': 'HTMLFontElement',\n  'footer': 'HTMLElement',\n  'form': 'HTMLFormElement',\n  'frame': 'HTMLFrameElement',\n  'frameset': 'HTMLFrameSetElement',\n  'h1': 'HTMLHeadingElement',\n  'h2': 'HTMLHeadingElement',\n  'h3': 'HTMLHeadingElement',\n  'h4': 'HTMLHeadingElement',\n  'h5': 'HTMLHeadingElement',\n  'h6': 'HTMLHeadingElement',\n  'head': 'HTMLHeadElement',\n  'header': 'HTMLElement',\n  'hgroup': 'HTMLElement',\n  'hr': 'HTMLHRElement',\n  'html': 'HTMLHtmlElement',\n  'i': 'HTMLElement',\n  'iframe': 'HTMLIFrameElement',\n  'img': 'HTMLImageElement',\n  'input': 'HTMLInputElement',\n  'ins': 'HTMLModElement',\n  'isindex': 'HTMLUnknownElement',\n  'kbd': 'HTMLElement',\n  'keygen': 'HTMLKeygenElement',\n  'label': 'HTMLLabelElement',\n  'legend': 'HTMLLegendElement',\n  'li': 'HTMLLIElement',\n  'link': 'HTMLLinkElement',\n  'map': 'HTMLMapElement',\n  'mark': 'HTMLElement',\n  'menu': 'HTMLMenuElement',\n  'meta': 'HTMLMetaElement',\n  'meter': 'HTMLMeterElement',\n  'nav': 'HTMLElement',\n  'nobr': 'HTMLElement',\n  'noembed': 'HTMLElement',\n  'noframes': 'HTMLElement',\n  'noscript': 'HTMLElement',\n  'object': 'HTMLObjectElement',\n  'ol': 'HTMLOListElement',\n  'optgroup': 'HTMLOptGroupElement',\n  'option': 'HTMLOptionElement',\n  'output': 'HTMLOutputElement',\n  'p': 'HTMLParagraphElement',\n  'param': 'HTMLParamElement',\n  'pre': 'HTMLPreElement',\n  'progress': 'HTMLProgressElement',\n  'q': 'HTMLQuoteElement',\n  's': 'HTMLElement',\n  'samp': 'HTMLElement',\n  'script': 'HTMLScriptElement',\n  'section': 'HTMLElement',\n  'select': 'HTMLSelectElement',\n  'small': 'HTMLElement',\n  'source': 'HTMLSourceElement',\n  'span': 'HTMLSpanElement',\n  'strike': 'HTMLElement',\n  'strong': 'HTMLElement',\n  'style': 'HTMLStyleElement',\n  'sub': 'HTMLElement',\n  'summary': 'HTMLElement',\n  'sup': 'HTMLElement',\n  'table': 'HTMLTableElement',\n  'tbody': 'HTMLTableSectionElement',\n  'td': 'HTMLTableDataCellElement',\n  'textarea': 'HTMLTextAreaElement',\n  'tfoot': 'HTMLTableSectionElement',\n  'th': 'HTMLTableHeaderCellElement',\n  'thead': 'HTMLTableSectionElement',\n  'time': 'HTMLTimeElement',\n  'title': 'HTMLTitleElement',\n  'tr': 'HTMLTableRowElement',\n  'track': 'HTMLTrackElement',\n  'tt': 'HTMLElement',\n  'u': 'HTMLElement',\n  'ul': 'HTMLUListElement',\n  'var': 'HTMLElement',\n  'video': 'HTMLVideoElement',\n  'wbr': 'HTMLElement'\n};\nhtml4[ 'ELEMENT_DOM_INTERFACES' ] = html4.ELEMENT_DOM_INTERFACES;\nhtml4.ueffects = {\n  'NOT_LOADED': 0,\n  'SAME_DOCUMENT': 1,\n  'NEW_DOCUMENT': 2\n};\nhtml4[ 'ueffects' ] = html4.ueffects;\nhtml4.URIEFFECTS = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 1,\n  'blockquote::cite': 0,\n  'command::icon': 1,\n  'del::cite': 0,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 0,\n  'q::cite': 0,\n  'video::poster': 1,\n  'video::src': 1\n};\nhtml4[ 'URIEFFECTS' ] = html4.URIEFFECTS;\nhtml4.ltypes = {\n  'UNSANDBOXED': 2,\n  'SANDBOXED': 1,\n  'DATA': 0\n};\nhtml4[ 'ltypes' ] = html4.ltypes;\nhtml4.LOADERTYPES = {\n  'a::href': 2,\n  'area::href': 2,\n  'audio::src': 2,\n  'blockquote::cite': 2,\n  'command::icon': 1,\n  'del::cite': 2,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 2,\n  'q::cite': 2,\n  'video::poster': 1,\n  'video::src': 2\n};\nhtml4[ 'LOADERTYPES' ] = html4.LOADERTYPES;\n// export for Closure Compiler\nif (typeof window !== 'undefined') {\n  window['html4'] = html4;\n}\n;\n// Copyright (C) 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * An HTML sanitizer that can satisfy a variety of security policies.\n *\n * <p>\n * The HTML sanitizer is built around a SAX parser and HTML element and\n * attributes schemas.\n *\n * If the cssparser is loaded, inline styles are sanitized using the\n * css property and value schemas.  Else they are remove during\n * sanitization.\n *\n * If it exists, uses parseCssDeclarations, sanitizeCssProperty,  cssSchema\n *\n * @author mikesamuel@gmail.com\n * @author jasvir@gmail.com\n * \\@requires html4, URI\n * \\@overrides window\n * \\@provides html, html_sanitize\n */\n\n// The Turkish i seems to be a non-issue, but abort in case it is.\nif ('I'.toLowerCase() !== 'i') { throw 'I/i problem'; }\n\n/**\n * \\@namespace\n */\nvar html = (function(html4) {\n\n  // For closure compiler\n  var parseCssDeclarations, sanitizeCssProperty, cssSchema;\n  if ('undefined' !== typeof window) {\n    parseCssDeclarations = window['parseCssDeclarations'];\n    sanitizeCssProperty = window['sanitizeCssProperty'];\n    cssSchema = window['cssSchema'];\n  }\n\n  // The keys of this object must be 'quoted' or JSCompiler will mangle them!\n  // This is a partial list -- lookupEntity() uses the host browser's parser\n  // (when available) to implement full entity lookup.\n  // Note that entities are in general case-sensitive; the uppercase ones are\n  // explicitly defined by HTML5 (presumably as compatibility).\n  var ENTITIES = {\n    'lt': '<',\n    'LT': '<',\n    'gt': '>',\n    'GT': '>',\n    'amp': '&',\n    'AMP': '&',\n    'quot': '\"',\n    'apos': '\\'',\n    'nbsp': '\\240'\n  };\n\n  // Patterns for types of entity/character reference names.\n  var decimalEscapeRe = /^#(\\d+)$/;\n  var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n  // contains every entity per http://www.w3.org/TR/2011/WD-html5-20110113/named-character-references.html\n  var safeEntityNameRe = /^[A-Za-z][A-za-z0-9]+$/;\n  // Used as a hook to invoke the browser's entity parsing. <textarea> is used\n  // because its content is parsed for entities but not tags.\n  // TODO(kpreid): This retrieval is a kludge and leads to silent loss of\n  // functionality if the document isn't available.\n  var entityLookupElement =\n      ('undefined' !== typeof window && window['document'])\n          ? window['document'].createElement('textarea') : null;\n  /**\n   * Decodes an HTML entity.\n   *\n   * {\\@updoc\n   * $ lookupEntity('lt')\n   * # '<'\n   * $ lookupEntity('GT')\n   * # '>'\n   * $ lookupEntity('amp')\n   * # '&'\n   * $ lookupEntity('nbsp')\n   * # '\\xA0'\n   * $ lookupEntity('apos')\n   * # \"'\"\n   * $ lookupEntity('quot')\n   * # '\"'\n   * $ lookupEntity('#xa')\n   * # '\\n'\n   * $ lookupEntity('#10')\n   * # '\\n'\n   * $ lookupEntity('#x0a')\n   * # '\\n'\n   * $ lookupEntity('#010')\n   * # '\\n'\n   * $ lookupEntity('#x00A')\n   * # '\\n'\n   * $ lookupEntity('Pi')      // Known failure\n   * # '\\u03A0'\n   * $ lookupEntity('pi')      // Known failure\n   * # '\\u03C0'\n   * }\n   *\n   * @param {string} name the content between the '&' and the ';'.\n   * @return {string} a single unicode code-point as a string.\n   */\n  function lookupEntity(name) {\n    // TODO: entity lookup as specified by HTML5 actually depends on the\n    // presence of the \";\".\n    if (ENTITIES.hasOwnProperty(name)) { return ENTITIES[name]; }\n    var m = name.match(decimalEscapeRe);\n    if (m) {\n      return String.fromCharCode(parseInt(m[1], 10));\n    } else if (!!(m = name.match(hexEscapeRe))) {\n      return String.fromCharCode(parseInt(m[1], 16));\n    } else if (entityLookupElement && safeEntityNameRe.test(name)) {\n      entityLookupElement.innerHTML = '&' + name + ';';\n      var text = entityLookupElement.textContent;\n      ENTITIES[name] = text;\n      return text;\n    } else {\n      return '&' + name + ';';\n    }\n  }\n\n  function decodeOneEntity(_, name) {\n    return lookupEntity(name);\n  }\n\n  var nulRe = /\\0/g;\n  function stripNULs(s) {\n    return s.replace(nulRe, '');\n  }\n\n  var ENTITY_RE_1 = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/g;\n  var ENTITY_RE_2 = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/;\n  /**\n   * The plain text of a chunk of HTML CDATA which possibly containing.\n   *\n   * {\\@updoc\n   * $ unescapeEntities('')\n   * # ''\n   * $ unescapeEntities('hello World!')\n   * # 'hello World!'\n   * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n   * # '1 < 2 && 4 > 3\\n'\n   * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n   * # '<&lt <- unfinished entity>'\n   * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n   * # '/foo?bar=baz&copy=true'\n   * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n   * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n   * }\n   *\n   * @param {string} s a chunk of HTML CDATA.  It must not start or end inside\n   *     an HTML entity.\n   */\n  function unescapeEntities(s) {\n    return s.replace(ENTITY_RE_1, decodeOneEntity);\n  }\n\n  var ampRe = /&/g;\n  var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n  var ltRe = /[<]/g;\n  var gtRe = />/g;\n  var quotRe = /\\\"/g;\n\n  /**\n   * Escapes HTML special characters in attribute values.\n   *\n   * {\\@updoc\n   * $ escapeAttrib('')\n   * # ''\n   * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n   * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n   * $ escapeAttrib('Hello <World>!')\n   * # 'Hello &lt;World&gt;!'\n   * }\n   */\n  function escapeAttrib(s) {\n    return ('' + s).replace(ampRe, '&amp;').replace(ltRe, '&lt;')\n        .replace(gtRe, '&gt;').replace(quotRe, '&#34;');\n  }\n\n  /**\n   * Escape entities in RCDATA that can be escaped without changing the meaning.\n   * {\\@updoc\n   * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n   * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n   * }\n   */\n  function normalizeRCData(rcdata) {\n    return rcdata\n        .replace(looseAmpRe, '&amp;$1')\n        .replace(ltRe, '&lt;')\n        .replace(gtRe, '&gt;');\n  }\n\n  // TODO(felix8a): validate sanitizer regexs against the HTML5 grammar at\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\n  // We initially split input so that potentially meaningful characters\n  // like '<' and '>' are separate tokens, using a fast dumb process that\n  // ignores quoting.  Then we walk that token stream, and when we see a\n  // '<' that's the start of a tag, we use ATTR_RE to extract tag\n  // attributes from the next token.  That token will never have a '>'\n  // character.  However, it might have an unbalanced quote character, and\n  // when we see that, we combine additional tokens to balance the quote.\n\n  var ATTR_RE = new RegExp(\n    '^\\\\s*' +\n    '([-.:\\\\w]+)' +             // 1 = Attribute name\n    '(?:' + (\n      '\\\\s*(=)\\\\s*' +           // 2 = Is there a value?\n      '(' + (                   // 3 = Attribute value\n        // TODO(felix8a): maybe use backref to match quotes\n        '(\\\")[^\\\"]*(\\\"|$)' +    // 4, 5 = Double-quoted string\n        '|' +\n        '(\\')[^\\']*(\\'|$)' +    // 6, 7 = Single-quoted string\n        '|' +\n        // Positive lookahead to prevent interpretation of\n        // <foo a= b=c> as <foo a='b=c'>\n        // TODO(felix8a): might be able to drop this case\n        '(?=[a-z][-\\\\w]*\\\\s*=)' +\n        '|' +\n        // Unquoted value that isn't an attribute name\n        // (since we didn't match the positive lookahead above)\n        '[^\\\"\\'\\\\s]*' ) +\n      ')' ) +\n    ')?',\n    'i');\n\n  // false on IE<=8, true on most other browsers\n  var splitWillCapture = ('a,b'.split(/(,)/).length === 3);\n\n  // bitmask for tags with special parsing, like <script> and <textarea>\n  var EFLAGS_TEXT = html4.eflags['CDATA'] | html4.eflags['RCDATA'];\n\n  /**\n   * Given a SAX-like event handler, produce a function that feeds those\n   * events and a parameter to the event handler.\n   *\n   * The event handler has the form:{@code\n   * {\n   *   // Name is an upper-case HTML tag name.  Attribs is an array of\n   *   // alternating upper-case attribute names, and attribute values.  The\n   *   // attribs array is reused by the parser.  Param is the value passed to\n   *   // the saxParser.\n   *   startTag: function (name, attribs, param) { ... },\n   *   endTag:   function (name, param) { ... },\n   *   pcdata:   function (text, param) { ... },\n   *   rcdata:   function (text, param) { ... },\n   *   cdata:    function (text, param) { ... },\n   *   startDoc: function (param) { ... },\n   *   endDoc:   function (param) { ... }\n   * }}\n   *\n   * @param {Object} handler a record containing event handlers.\n   * @return {function(string, Object)} A function that takes a chunk of HTML\n   *     and a parameter.  The parameter is passed on to the handler methods.\n   */\n  function makeSaxParser(handler) {\n    // Accept quoted or unquoted keys (Closure compat)\n    var hcopy = {\n      cdata: handler.cdata || handler['cdata'],\n      comment: handler.comment || handler['comment'],\n      endDoc: handler.endDoc || handler['endDoc'],\n      endTag: handler.endTag || handler['endTag'],\n      pcdata: handler.pcdata || handler['pcdata'],\n      rcdata: handler.rcdata || handler['rcdata'],\n      startDoc: handler.startDoc || handler['startDoc'],\n      startTag: handler.startTag || handler['startTag']\n    };\n    return function(htmlText, param) {\n      return parse(htmlText, hcopy, param);\n    };\n  }\n\n  // Parsing strategy is to split input into parts that might be lexically\n  // meaningful (every \">\" becomes a separate part), and then recombine\n  // parts if we discover they're in a different context.\n\n  // TODO(felix8a): Significant performance regressions from -legacy,\n  // tested on\n  //    Chrome 18.0\n  //    Firefox 11.0\n  //    IE 6, 7, 8, 9\n  //    Opera 11.61\n  //    Safari 5.1.3\n  // Many of these are unusual patterns that are linearly slower and still\n  // pretty fast (eg 1ms to 5ms), so not necessarily worth fixing.\n\n  // TODO(felix8a): \"<script> && && && ... <\\/script>\" is slower on all\n  // browsers.  The hotspot is htmlSplit.\n\n  // TODO(felix8a): \"<p title='>>>>...'><\\/p>\" is slower on all browsers.\n  // This is partly htmlSplit, but the hotspot is parseTagAndAttrs.\n\n  // TODO(felix8a): \"<a><\\/a><a><\\/a>...\" is slower on IE9.\n  // \"<a>1<\\/a><a>1<\\/a>...\" is faster, \"<a><\\/a>2<a><\\/a>2...\" is faster.\n\n  // TODO(felix8a): \"<p<p<p...\" is slower on IE[6-8]\n\n  var continuationMarker = {};\n  function parse(htmlText, handler, param) {\n    var m, p, tagName;\n    var parts = htmlSplit(htmlText);\n    var state = {\n      noMoreGT: false,\n      noMoreEndComments: false\n    };\n    parseCPS(handler, parts, 0, state, param);\n  }\n\n  function continuationMaker(h, parts, initial, state, param) {\n    return function () {\n      parseCPS(h, parts, initial, state, param);\n    };\n  }\n\n  function parseCPS(h, parts, initial, state, param) {\n    try {\n      if (h.startDoc && initial == 0) { h.startDoc(param); }\n      var m, p, tagName;\n      for (var pos = initial, end = parts.length; pos < end;) {\n        var current = parts[pos++];\n        var next = parts[pos];\n        switch (current) {\n        case '&':\n          if (ENTITY_RE_2.test(next)) {\n            if (h.pcdata) {\n              h.pcdata('&' + next, param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n            pos++;\n          } else {\n            if (h.pcdata) { h.pcdata(\"&amp;\", param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\/':\n          if ((m = /^([-\\w:]+)[^\\'\\\"]*/.exec(next))) {\n            if (m[0].length === next.length && parts[pos + 1] === '>') {\n              // fast case, no attribute parsing needed\n              pos += 2;\n              tagName = m[1].toLowerCase();\n              if (h.endTag) {\n                h.endTag(tagName, param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n            } else {\n              // slow case, need to parse attributes\n              // TODO(felix8a): do we really care about misparsing this?\n              pos = parseEndTag(\n                parts, pos, h, param, continuationMarker, state);\n            }\n          } else {\n            if (h.pcdata) {\n              h.pcdata('&lt;/', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<':\n          if (m = /^([-\\w:]+)\\s*\\/?/.exec(next)) {\n            if (m[0].length === next.length && parts[pos + 1] === '>') {\n              // fast case, no attribute parsing needed\n              pos += 2;\n              tagName = m[1].toLowerCase();\n              if (h.startTag) {\n                h.startTag(tagName, [], param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n              // tags like <script> and <textarea> have special parsing\n              var eflags = html4.ELEMENTS[tagName];\n              if (eflags & EFLAGS_TEXT) {\n                var tag = { name: tagName, next: pos, eflags: eflags };\n                pos = parseText(\n                  parts, tag, h, param, continuationMarker, state);\n              }\n            } else {\n              // slow case, need to parse attributes\n              pos = parseStartTag(\n                parts, pos, h, param, continuationMarker, state);\n            }\n          } else {\n            if (h.pcdata) {\n              h.pcdata('&lt;', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\!--':\n          // The pathological case is n copies of '<\\!--' without '-->', and\n          // repeated failure to find '-->' is quadratic.  We avoid that by\n          // remembering when search for '-->' fails.\n          if (!state.noMoreEndComments) {\n            // A comment <\\!--x--> is split into three tokens:\n            //   '<\\!--', 'x--', '>'\n            // We want to find the next '>' token that has a preceding '--'.\n            // pos is at the 'x--'.\n            for (p = pos + 1; p < end; p++) {\n              if (parts[p] === '>' && /--$/.test(parts[p - 1])) { break; }\n            }\n            if (p < end) {\n              if (h.comment) {\n                var comment = parts.slice(pos, p).join('');\n                h.comment(\n                  comment.substr(0, comment.length - 2), param,\n                  continuationMarker,\n                  continuationMaker(h, parts, p + 1, state, param));\n              }\n              pos = p + 1;\n            } else {\n              state.noMoreEndComments = true;\n            }\n          }\n          if (state.noMoreEndComments) {\n            if (h.pcdata) {\n              h.pcdata('&lt;!--', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '<\\!':\n          if (!/^\\w/.test(next)) {\n            if (h.pcdata) {\n              h.pcdata('&lt;!', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          } else {\n            // similar to noMoreEndComment logic\n            if (!state.noMoreGT) {\n              for (p = pos + 1; p < end; p++) {\n                if (parts[p] === '>') { break; }\n              }\n              if (p < end) {\n                pos = p + 1;\n              } else {\n                state.noMoreGT = true;\n              }\n            }\n            if (state.noMoreGT) {\n              if (h.pcdata) {\n                h.pcdata('&lt;!', param, continuationMarker,\n                  continuationMaker(h, parts, pos, state, param));\n              }\n            }\n          }\n          break;\n        case '<?':\n          // similar to noMoreEndComment logic\n          if (!state.noMoreGT) {\n            for (p = pos + 1; p < end; p++) {\n              if (parts[p] === '>') { break; }\n            }\n            if (p < end) {\n              pos = p + 1;\n            } else {\n              state.noMoreGT = true;\n            }\n          }\n          if (state.noMoreGT) {\n            if (h.pcdata) {\n              h.pcdata('&lt;?', param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n            }\n          }\n          break;\n        case '>':\n          if (h.pcdata) {\n            h.pcdata(\"&gt;\", param, continuationMarker,\n              continuationMaker(h, parts, pos, state, param));\n          }\n          break;\n        case '':\n          break;\n        default:\n          if (h.pcdata) {\n            h.pcdata(current, param, continuationMarker,\n              continuationMaker(h, parts, pos, state, param));\n          }\n          break;\n        }\n      }\n      if (h.endDoc) { h.endDoc(param); }\n    } catch (e) {\n      if (e !== continuationMarker) { throw e; }\n    }\n  }\n\n  // Split str into parts for the html parser.\n  function htmlSplit(str) {\n    // can't hoist this out of the function because of the re.exec loop.\n    var re = /(<\\/|<\\!--|<[!?]|[&<>])/g;\n    str += '';\n    if (splitWillCapture) {\n      return str.split(re);\n    } else {\n      var parts = [];\n      var lastPos = 0;\n      var m;\n      while ((m = re.exec(str)) !== null) {\n        parts.push(str.substring(lastPos, m.index));\n        parts.push(m[0]);\n        lastPos = m.index + m[0].length;\n      }\n      parts.push(str.substring(lastPos));\n      return parts;\n    }\n  }\n\n  function parseEndTag(parts, pos, h, param, continuationMarker, state) {\n    var tag = parseTagAndAttrs(parts, pos);\n    // drop unclosed tags\n    if (!tag) { return parts.length; }\n    if (h.endTag) {\n      h.endTag(tag.name, param, continuationMarker,\n        continuationMaker(h, parts, pos, state, param));\n    }\n    return tag.next;\n  }\n\n  function parseStartTag(parts, pos, h, param, continuationMarker, state) {\n    var tag = parseTagAndAttrs(parts, pos);\n    // drop unclosed tags\n    if (!tag) { return parts.length; }\n    if (h.startTag) {\n      h.startTag(tag.name, tag.attrs, param, continuationMarker,\n        continuationMaker(h, parts, tag.next, state, param));\n    }\n    // tags like <script> and <textarea> have special parsing\n    if (tag.eflags & EFLAGS_TEXT) {\n      return parseText(parts, tag, h, param, continuationMarker, state);\n    } else {\n      return tag.next;\n    }\n  }\n\n  var endTagRe = {};\n\n  // Tags like <script> and <textarea> are flagged as CDATA or RCDATA,\n  // which means everything is text until we see the correct closing tag.\n  function parseText(parts, tag, h, param, continuationMarker, state) {\n    var end = parts.length;\n    if (!endTagRe.hasOwnProperty(tag.name)) {\n      endTagRe[tag.name] = new RegExp('^' + tag.name + '(?:[\\\\s\\\\/]|$)', 'i');\n    }\n    var re = endTagRe[tag.name];\n    var first = tag.next;\n    var p = tag.next + 1;\n    for (; p < end; p++) {\n      if (parts[p - 1] === '<\\/' && re.test(parts[p])) { break; }\n    }\n    if (p < end) { p -= 1; }\n    var buf = parts.slice(first, p).join('');\n    if (tag.eflags & html4.eflags['CDATA']) {\n      if (h.cdata) {\n        h.cdata(buf, param, continuationMarker,\n          continuationMaker(h, parts, p, state, param));\n      }\n    } else if (tag.eflags & html4.eflags['RCDATA']) {\n      if (h.rcdata) {\n        h.rcdata(normalizeRCData(buf), param, continuationMarker,\n          continuationMaker(h, parts, p, state, param));\n      }\n    } else {\n      throw new Error('bug');\n    }\n    return p;\n  }\n\n  // at this point, parts[pos-1] is either \"<\" or \"<\\/\".\n  function parseTagAndAttrs(parts, pos) {\n    var m = /^([-\\w:]+)/.exec(parts[pos]);\n    var tag = {};\n    tag.name = m[1].toLowerCase();\n    tag.eflags = html4.ELEMENTS[tag.name];\n    var buf = parts[pos].substr(m[0].length);\n    // Find the next '>'.  We optimistically assume this '>' is not in a\n    // quoted context, and further down we fix things up if it turns out to\n    // be quoted.\n    var p = pos + 1;\n    var end = parts.length;\n    for (; p < end; p++) {\n      if (parts[p] === '>') { break; }\n      buf += parts[p];\n    }\n    if (end <= p) { return void 0; }\n    var attrs = [];\n    while (buf !== '') {\n      m = ATTR_RE.exec(buf);\n      if (!m) {\n        // No attribute found: skip garbage\n        buf = buf.replace(/^[\\s\\S][^a-z\\s]*/, '');\n\n      } else if ((m[4] && !m[5]) || (m[6] && !m[7])) {\n        // Unterminated quote: slurp to the next unquoted '>'\n        var quote = m[4] || m[6];\n        var sawQuote = false;\n        var abuf = [buf, parts[p++]];\n        for (; p < end; p++) {\n          if (sawQuote) {\n            if (parts[p] === '>') { break; }\n          } else if (0 <= parts[p].indexOf(quote)) {\n            sawQuote = true;\n          }\n          abuf.push(parts[p]);\n        }\n        // Slurp failed: lose the garbage\n        if (end <= p) { break; }\n        // Otherwise retry attribute parsing\n        buf = abuf.join('');\n        continue;\n\n      } else {\n        // We have an attribute\n        var aName = m[1].toLowerCase();\n        var aValue = m[2] ? decodeValue(m[3]) : '';\n        attrs.push(aName, aValue);\n        buf = buf.substr(m[0].length);\n      }\n    }\n    tag.attrs = attrs;\n    tag.next = p + 1;\n    return tag;\n  }\n\n  function decodeValue(v) {\n    var q = v.charCodeAt(0);\n    if (q === 0x22 || q === 0x27) { // \" or '\n      v = v.substr(1, v.length - 2);\n    }\n    return unescapeEntities(stripNULs(v));\n  }\n\n  /**\n   * Returns a function that strips unsafe tags and attributes from html.\n   * @param {function(string, Array.<string>): ?Array.<string>} tagPolicy\n   *     A function that takes (tagName, attribs[]), where tagName is a key in\n   *     html4.ELEMENTS and attribs is an array of alternating attribute names\n   *     and values.  It should return a record (as follows), or null to delete\n   *     the element.  It's okay for tagPolicy to modify the attribs array,\n   *     but the same array is reused, so it should not be held between calls.\n   *     Record keys:\n   *        attribs: (required) Sanitized attributes array.\n   *        tagName: Replacement tag name.\n   * @return {function(string, Array)} A function that sanitizes a string of\n   *     HTML and appends result strings to the second argument, an array.\n   */\n  function makeHtmlSanitizer(tagPolicy) {\n    var stack;\n    var ignoring;\n    var emit = function (text, out) {\n      if (!ignoring) { out.push(text); }\n    };\n    return makeSaxParser({\n      'startDoc': function(_) {\n        stack = [];\n        ignoring = false;\n      },\n      'startTag': function(tagNameOrig, attribs, out) {\n        if (ignoring) { return; }\n        if (!html4.ELEMENTS.hasOwnProperty(tagNameOrig)) { return; }\n        var eflagsOrig = html4.ELEMENTS[tagNameOrig];\n        if (eflagsOrig & html4.eflags['FOLDABLE']) {\n          return;\n        }\n\n        var decision = tagPolicy(tagNameOrig, attribs);\n        if (!decision) {\n          ignoring = !(eflagsOrig & html4.eflags['EMPTY']);\n          return;\n        } else if (typeof decision !== 'object') {\n          throw new Error('tagPolicy did not return object (old API?)');\n        }\n        if ('attribs' in decision) {\n          attribs = decision['attribs'];\n        } else {\n          throw new Error('tagPolicy gave no attribs');\n        }\n        var eflagsRep;\n        var tagNameRep;\n        if ('tagName' in decision) {\n          tagNameRep = decision['tagName'];\n          eflagsRep = html4.ELEMENTS[tagNameRep];\n        } else {\n          tagNameRep = tagNameOrig;\n          eflagsRep = eflagsOrig;\n        }\n        // TODO(mikesamuel): relying on tagPolicy not to insert unsafe\n        // attribute names.\n\n        // If this is an optional-end-tag element and either this element or its\n        // previous like sibling was rewritten, then insert a close tag to\n        // preserve structure.\n        if (eflagsOrig & html4.eflags['OPTIONAL_ENDTAG']) {\n          var onStack = stack[stack.length - 1];\n          if (onStack && onStack.orig === tagNameOrig &&\n              (onStack.rep !== tagNameRep || tagNameOrig !== tagNameRep)) {\n                out.push('<\\/', onStack.rep, '>');\n          }\n        }\n\n        if (!(eflagsOrig & html4.eflags['EMPTY'])) {\n          stack.push({orig: tagNameOrig, rep: tagNameRep});\n        }\n\n        out.push('<', tagNameRep);\n        for (var i = 0, n = attribs.length; i < n; i += 2) {\n          var attribName = attribs[i],\n              value = attribs[i + 1];\n          if (value !== null && value !== void 0) {\n            out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n          }\n        }\n        out.push('>');\n\n        if ((eflagsOrig & html4.eflags['EMPTY'])\n            && !(eflagsRep & html4.eflags['EMPTY'])) {\n          // replacement is non-empty, synthesize end tag\n          out.push('<\\/', tagNameRep, '>');\n        }\n      },\n      'endTag': function(tagName, out) {\n        if (ignoring) {\n          ignoring = false;\n          return;\n        }\n        if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n        var eflags = html4.ELEMENTS[tagName];\n        if (!(eflags & (html4.eflags['EMPTY'] | html4.eflags['FOLDABLE']))) {\n          var index;\n          if (eflags & html4.eflags['OPTIONAL_ENDTAG']) {\n            for (index = stack.length; --index >= 0;) {\n              var stackElOrigTag = stack[index].orig;\n              if (stackElOrigTag === tagName) { break; }\n              if (!(html4.ELEMENTS[stackElOrigTag] &\n                    html4.eflags['OPTIONAL_ENDTAG'])) {\n                // Don't pop non optional end tags looking for a match.\n                return;\n              }\n            }\n          } else {\n            for (index = stack.length; --index >= 0;) {\n              if (stack[index].orig === tagName) { break; }\n            }\n          }\n          if (index < 0) { return; }  // Not opened.\n          for (var i = stack.length; --i > index;) {\n            var stackElRepTag = stack[i].rep;\n            if (!(html4.ELEMENTS[stackElRepTag] &\n                  html4.eflags['OPTIONAL_ENDTAG'])) {\n              out.push('<\\/', stackElRepTag, '>');\n            }\n          }\n          if (index < stack.length) {\n            tagName = stack[index].rep;\n          }\n          stack.length = index;\n          out.push('<\\/', tagName, '>');\n        }\n      },\n      'pcdata': emit,\n      'rcdata': emit,\n      'cdata': emit,\n      'endDoc': function(out) {\n        for (; stack.length; stack.length--) {\n          out.push('<\\/', stack[stack.length - 1].rep, '>');\n        }\n      }\n    });\n  }\n\n  var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\n  function safeUri(uri, effect, ltype, hints, naiveUriRewriter) {\n    if (!naiveUriRewriter) { return null; }\n    try {\n      var parsed = URI.parse('' + uri);\n      if (parsed) {\n        if (!parsed.hasScheme() ||\n            ALLOWED_URI_SCHEMES.test(parsed.getScheme())) {\n          var safe = naiveUriRewriter(parsed, effect, ltype, hints);\n          return safe ? safe.toString() : null;\n        }\n      }\n    } catch (e) {\n      return null;\n    }\n    return null;\n  }\n\n  function log(logger, tagName, attribName, oldValue, newValue) {\n    if (!attribName) {\n      logger(tagName + \" removed\", {\n        change: \"removed\",\n        tagName: tagName\n      });\n    }\n    if (oldValue !== newValue) {\n      var changed = \"changed\";\n      if (oldValue && !newValue) {\n        changed = \"removed\";\n      } else if (!oldValue && newValue)  {\n        changed = \"added\";\n      }\n      logger(tagName + \".\" + attribName + \" \" + changed, {\n        change: changed,\n        tagName: tagName,\n        attribName: attribName,\n        oldValue: oldValue,\n        newValue: newValue\n      });\n    }\n  }\n\n  function lookupAttribute(map, tagName, attribName) {\n    var attribKey;\n    attribKey = tagName + '::' + attribName;\n    if (map.hasOwnProperty(attribKey)) {\n      return map[attribKey];\n    }\n    attribKey = '*::' + attribName;\n    if (map.hasOwnProperty(attribKey)) {\n      return map[attribKey];\n    }\n    return void 0;\n  }\n  function getAttributeType(tagName, attribName) {\n    return lookupAttribute(html4.ATTRIBS, tagName, attribName);\n  }\n  function getLoaderType(tagName, attribName) {\n    return lookupAttribute(html4.LOADERTYPES, tagName, attribName);\n  }\n  function getUriEffect(tagName, attribName) {\n    return lookupAttribute(html4.URIEFFECTS, tagName, attribName);\n  }\n\n  /**\n   * Sanitizes attributes on an HTML tag.\n   * @param {string} tagName An HTML tag name in lowercase.\n   * @param {Array.<?string>} attribs An array of alternating names and values.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes; it can return a new string value, or null to\n   *     delete the attribute.  If unspecified, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes; it can return a new string value, or null to delete\n   *     the attribute.  If unspecified, these attributes are kept unchanged.\n   * @return {Array.<?string>} The sanitized attributes as a list of alternating\n   *     names and values, where a null value means to omit the attribute.\n   */\n  function sanitizeAttribs(tagName, attribs,\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    // TODO(felix8a): it's obnoxious that domado duplicates much of this\n    // TODO(felix8a): maybe consistently enforce constraints like target=\n    for (var i = 0; i < attribs.length; i += 2) {\n      var attribName = attribs[i];\n      var value = attribs[i + 1];\n      var oldValue = value;\n      var atype = null, attribKey;\n      if ((attribKey = tagName + '::' + attribName,\n           html4.ATTRIBS.hasOwnProperty(attribKey)) ||\n          (attribKey = '*::' + attribName,\n           html4.ATTRIBS.hasOwnProperty(attribKey))) {\n        atype = html4.ATTRIBS[attribKey];\n      }\n      if (atype !== null) {\n        switch (atype) {\n          case html4.atype['NONE']: break;\n          case html4.atype['SCRIPT']:\n            value = null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['STYLE']:\n            if ('undefined' === typeof parseCssDeclarations) {\n              value = null;\n              if (opt_logger) {\n                log(opt_logger, tagName, attribName, oldValue, value);\n\t      }\n              break;\n            }\n            var sanitizedDeclarations = [];\n            parseCssDeclarations(\n                value,\n                {\n                  'declaration': function (property, tokens) {\n                    var normProp = property.toLowerCase();\n                    sanitizeCssProperty(\n                        normProp, tokens,\n                        opt_naiveUriRewriter\n                        ? function (url) {\n                            return safeUri(\n                                url, html4.ueffects.SAME_DOCUMENT,\n                                html4.ltypes.SANDBOXED,\n                                {\n                                  \"TYPE\": \"CSS\",\n                                  \"CSS_PROP\": normProp\n                                }, opt_naiveUriRewriter);\n                          }\n                        : null);\n                    if (tokens.length) {\n                      sanitizedDeclarations.push(\n                          normProp + ': ' + tokens.join(' '));\n                    }\n                  }\n                });\n            value = sanitizedDeclarations.length > 0 ?\n              sanitizedDeclarations.join(' ; ') : null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['ID']:\n          case html4.atype['IDREF']:\n          case html4.atype['IDREFS']:\n          case html4.atype['GLOBAL_NAME']:\n          case html4.atype['LOCAL_NAME']:\n          case html4.atype['CLASSES']:\n            value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['URI']:\n            value = safeUri(value,\n              getUriEffect(tagName, attribName),\n              getLoaderType(tagName, attribName),\n              {\n                \"TYPE\": \"MARKUP\",\n                \"XML_ATTR\": attribName,\n                \"XML_TAG\": tagName\n              }, opt_naiveUriRewriter);\n              if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          case html4.atype['URI_FRAGMENT']:\n            if (value && '#' === value.charAt(0)) {\n              value = value.substring(1);  // remove the leading '#'\n              value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n              if (value !== null && value !== void 0) {\n                value = '#' + value;  // restore the leading '#'\n              }\n            } else {\n              value = null;\n            }\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n          default:\n            value = null;\n            if (opt_logger) {\n              log(opt_logger, tagName, attribName, oldValue, value);\n            }\n            break;\n        }\n      } else {\n        // ***CartoDB.js Custom start: allow data-* attributes\n        // As proposed in https://groups.google.com/forum/#!topic/google-caja-discuss/ihuk9fMkJMw\n        if (/data-[\\w-]+/.test(attribName)) {\n          value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n        } else {\n          value = null;\n        }\n        if (opt_logger) {\n          log(opt_logger, tagName, attribName, oldValue, value);\n        }\n      }\n      attribs[i + 1] = value;\n    }\n    return attribs;\n  }\n\n  /**\n   * Creates a tag policy that omits all tags marked UNSAFE in html4-defs.js\n   * and applies the default attribute sanitizer with the supplied policy for\n   * URI attributes and NMTOKEN attributes.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes.  If not given, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes.  If not given, such attributes are left unchanged.\n   * @return {function(string, Array.<?string>)} A tagPolicy suitable for\n   *     passing to html.sanitize.\n   */\n  function makeTagPolicy(\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    return function(tagName, attribs) {\n      if (!(html4.ELEMENTS[tagName] & html4.eflags['UNSAFE'])) {\n        return {\n          'attribs': sanitizeAttribs(tagName, attribs,\n            opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger)\n        };\n      } else {\n        if (opt_logger) {\n          log(opt_logger, tagName, undefined, undefined, undefined);\n        }\n      }\n    };\n  }\n\n  /**\n   * Sanitizes HTML tags and attributes according to a given policy.\n   * @param {string} inputHtml The HTML to sanitize.\n   * @param {function(string, Array.<?string>)} tagPolicy A function that\n   *     decides which tags to accept and sanitizes their attributes (see\n   *     makeHtmlSanitizer above for details).\n   * @return {string} The sanitized HTML.\n   */\n  function sanitizeWithPolicy(inputHtml, tagPolicy) {\n    var outputArray = [];\n    makeHtmlSanitizer(tagPolicy)(inputHtml, outputArray);\n    return outputArray.join('');\n  }\n\n  /**\n   * Strips unsafe tags and attributes from HTML.\n   * @param {string} inputHtml The HTML to sanitize.\n   * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n   *     apply to URI attributes.  If not given, URI attributes are deleted.\n   * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n   *     to attributes containing HTML names, element IDs, and space-separated\n   *     lists of classes.  If not given, such attributes are left unchanged.\n   */\n  function sanitize(inputHtml,\n    opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    var tagPolicy = makeTagPolicy(\n      opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n    return sanitizeWithPolicy(inputHtml, tagPolicy);\n  }\n\n  // Export both quoted and unquoted names for Closure linkage.\n  var html = {};\n  html.escapeAttrib = html['escapeAttrib'] = escapeAttrib;\n  html.makeHtmlSanitizer = html['makeHtmlSanitizer'] = makeHtmlSanitizer;\n  html.makeSaxParser = html['makeSaxParser'] = makeSaxParser;\n  html.makeTagPolicy = html['makeTagPolicy'] = makeTagPolicy;\n  html.normalizeRCData = html['normalizeRCData'] = normalizeRCData;\n  html.sanitize = html['sanitize'] = sanitize;\n  html.sanitizeAttribs = html['sanitizeAttribs'] = sanitizeAttribs;\n  html.sanitizeWithPolicy = html['sanitizeWithPolicy'] = sanitizeWithPolicy;\n  html.unescapeEntities = html['unescapeEntities'] = unescapeEntities;\n  return html;\n})(html4);\n\nvar html_sanitize = html['sanitize'];\n\n// Exports for Closure compiler.  Note this file is also cajoled\n// for domado and run in an environment without 'window'\nif (typeof window !== 'undefined') {\n  window['html'] = html;\n  window['html_sanitize'] = html_sanitize;\n}\n\n; browserify_shim__define__module__export__(typeof html != \"undefined\" ? html : window.html);\n\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n",
    "; var __browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\nvar LZMA = (function () {\n\tvar action_compress   = 1,\n\t\taction_decompress = 2,\n\t\taction_update\t  = 3;\n\t\n\tfunction update_progress(percent, callback_num) {\n\t\t///TODO: Calculate ETA.\n\t\tpostMessage({\n\t\t\taction: 3,\n\t\t\tcallback_num: callback_num,\n\t\t\tresult: percent\n\t\t});\n\t}\n\t\n\tvar $moduleName, $moduleBase;\n\t\n\tvar _,\n\t\tN8000000000000000_longLit = [0, -9223372036854775808],\n\t\tN1_longLit = [4294967295, -4294967296],\n\t\tP0_longLit = [0, 0],\n\t\tP1_longLit = [1, 0],\n\t\tP4_longLit = [4, 0],\n\t\tP1000_longLit = [4096, 0],\n\t\tPffffff_longLit = [16777215, 0],\n\t\tP1000000_longLit = [16777216, 0],\n\t\tPff000000_longLit = [4278190080, 0],\n\t\tPffffffff_longLit = [4294967295, 0],\n\t\tP7fffffffffffffff_longLit = [4294967295, 9223372032559808512];\n\n\tfunction getClass_18() {\n\t\treturn Ljava_lang_Object_2_classLit;\n\t}\n\t\n\tfunction Object_0() {\n\t}\n\t\n\t_ = Object_0.prototype = {};\n\t_.getClass$ = getClass_18;\n\t_.typeMarker$ = nullMethod;\n\t_.typeId$ = 1;\n\tfunction getClass_22() {\n\t\treturn Ljava_lang_Throwable_2_classLit;\n\t}\n\t\n\tfunction Throwable() {\n\t}\n\t\n\t_ = Throwable.prototype = new Object_0();\n\t_.getClass$ = getClass_22;\n\t_.typeId$ = 3;\n\t_.detailMessage = null;\n\tfunction getClass_13() {\n\t\treturn Ljava_lang_Exception_2_classLit;\n\t}\n\t\n\tfunction Exception() {\n\t}\n\t\n\t_ = Exception.prototype = new Throwable();\n\t_.getClass$ = getClass_13;\n\t_.typeId$ = 4;\n\tfunction $RuntimeException(this$static, message) {\n\t\tthis$static.detailMessage = message;\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_19() {\n\t\treturn Ljava_lang_RuntimeException_2_classLit;\n\t}\n\t\n\tfunction RuntimeException() {\n\t}\n\t\n\t_ = RuntimeException.prototype = new Exception();\n\t_.getClass$ = getClass_19;\n\t_.typeId$ = 5;\n\tfunction $JavaScriptException(this$static, e) {\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_0() {\n\t\treturn Lcom_google_gwt_core_client_JavaScriptException_2_classLit;\n\t}\n\t\n\tfunction JavaScriptException() {\n\t}\n\t\n\t_ = JavaScriptException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_0;\n\t_.typeId$ = 6;\n\tfunction $append(a, x) {\n\t\ta[a.explicitLength++] = x;\n\t}\n\t\n\tfunction $appendNonNull(a, x) {\n\t\ta[a.explicitLength++] = x;\n\t}\n\t\n\tfunction $toString(a) {\n\t\tvar s_0, s;\n\t\ts_0 = (s = a.join('') , a.length = a.explicitLength = 0 , s);\n\t\ta[a.explicitLength++] = s_0;\n\t\treturn s_0;\n\t}\n\t\n\tfunction createFromSeed(seedType, length_0) {\n\t\tvar array = new Array(length_0);\n\t\tif (seedType > 0) {\n\t\t\tvar value = [null, 0, false, [0, 0]][seedType];\n\t\t\tfor (var i = 0; i < length_0; ++i) {\n\t\t\t\tarray[i] = value;\n\t\t\t}\n\t\t}\n\t\treturn array;\n\t}\n\t\n\tfunction getClass_2() {\n\t\treturn this.arrayClass$;\n\t}\n\t\n\tfunction initDim(arrayClass, typeId, queryId, length_0, seedType) {\n\t\tvar result;\n\t\tresult = createFromSeed(seedType, length_0);\n\t\t$clinit_4();\n\t\twrapArray(result, expandoNames_0, expandoValues_0);\n\t\tresult.arrayClass$ = arrayClass;\n\t\tresult.typeId$ = typeId;\n\t\tresult.queryId$ = queryId;\n\t\treturn result;\n\t}\n\t\n\tfunction initValues(arrayClass, typeId, queryId, array) {\n\t\t$clinit_4();\n\t\twrapArray(array, expandoNames_0, expandoValues_0);\n\t\tarray.arrayClass$ = arrayClass;\n\t\tarray.typeId$ = typeId;\n\t\tarray.queryId$ = queryId;\n\t\treturn array;\n\t}\n\t\n\tfunction setCheck(array, index, value) {\n\t\tif (value != null) {\n\t\t\tif (array.queryId$ > 0 && !canCastUnsafe(value.typeId$, array.queryId$)) {\n\t\t\tthrow new ArrayStoreException();\n\t\t\t}\n\t\t\tif (array.queryId$ < 0 && (value.typeMarker$ == nullMethod || value.typeId$ == 2)) {\n\t\t\tthrow new ArrayStoreException();\n\t\t\t}\n\t\t}\n\t\treturn array[index] = value;\n\t}\n\t\n\tfunction Array_0() {\n\t}\n\t\n\t_ = Array_0.prototype = new Object_0();\n\t_.getClass$ = getClass_2;\n\t_.typeId$ = 0;\n\t_.arrayClass$ = null;\n\t_.length = 0;\n\t_.queryId$ = 0;\n\tfunction $clinit_4() {\n\t\t$clinit_4 = nullMethod;\n\t\texpandoNames_0 = [];\n\t\texpandoValues_0 = [];\n\t\tinitExpandos(new Array_0(), expandoNames_0, expandoValues_0);\n\t}\n\t\n\tfunction initExpandos(protoType, expandoNames, expandoValues) {\n\t\tvar i = 0, value;\n\t\tfor (var name_0 in protoType) {\n\t\t\tif (value = protoType[name_0]) {\n\t\t\texpandoNames[i] = name_0;\n\t\t\texpandoValues[i] = value;\n\t\t\t++i;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction wrapArray(array, expandoNames, expandoValues) {\n\t\t$clinit_4();\n\t\tfor (var i = 0, c = expandoNames.length; i < c; ++i) {\n\t\t\tarray[expandoNames[i]] = expandoValues[i];\n\t\t}\n\t}\n\t\n\tvar expandoNames_0, expandoValues_0;\n\tfunction canCast(srcId, dstId) {\n\t\treturn srcId && !!typeIdArray[srcId][dstId];\n\t}\n\t\n\tfunction canCastUnsafe(srcId, dstId) {\n\t\treturn srcId && typeIdArray[srcId][dstId];\n\t}\n\t\n\tfunction dynamicCast(src, dstId) {\n\t\tif (src != null && !canCastUnsafe(src.typeId$, dstId)) {\n\t\t\tthrow new ClassCastException();\n\t\t}\n\t\treturn src;\n\t}\n\t\n\tfunction instanceOf(src, dstId) {\n\t\treturn src != null && canCast(src.typeId$, dstId);\n\t}\n\t\n\tfunction round_int(x) {\n\t\treturn ~~Math.max(Math.min(x, 2147483647), -2147483648);\n\t}\n\t\n\tvar typeIdArray = [\n\t\t\t{},\n\t\t\t{},\n\t\t\t{1:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1, 10:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1, 11:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{2:1},\n\t\t\t{4:1},\n\t\t\t{5:1},\n\t\t\t{6:1},\n\t\t\t{7:1},\n\t\t\t{8:1},\n\t\t\t{9:1}\n\t\t];\n\n\tfunction caught(e) {\n\t\tif (e != null && canCast(e.typeId$, 2)) {\n\t\t\treturn e;\n\t\t}\n\t\treturn $JavaScriptException(new JavaScriptException(), e);\n\t}\n\t\n\tfunction add(a, b) {\n\t\tvar newHigh, newLow;\n\t\tnewHigh = a[1] + b[1];\n\t\tnewLow = a[0] + b[0];\n\t\treturn create(newLow, newHigh);\n\t}\n\t\n\tfunction addTimes(accum, a, b) {\n\t\tif (a == 0) {\n\t\t\treturn accum;\n\t\t}\n\t\tif (b == 0) {\n\t\t\treturn accum;\n\t\t}\n\t\treturn add(accum, create(a * b, 0));\n\t}\n\t\n\tfunction and(a, b) {\n\t\treturn makeFromBits(~~Math.max(Math.min(a[1] / 4294967296, 2147483647), -2147483648) & ~~Math.max(Math.min(b[1] / 4294967296, 2147483647), -2147483648), lowBits_0(a) & lowBits_0(b));\n\t}\n\t\n\tfunction compare(a, b) {\n\t\tvar nega, negb;\n\t\tif (a[0] == b[0] && a[1] == b[1]) {\n\t\t\treturn 0;\n\t\t}\n\t\tnega = a[1] < 0;\n\t\tnegb = b[1] < 0;\n\t\tif (nega && !negb) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (!nega && negb) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (sub(a, b)[1] < 0) {\n\t\t\treturn -1;\n\t\t}\n\t\telse {\n\t\t\treturn 1;\n\t\t}\n\t}\n\t\n\tfunction create(valueLow, valueHigh) {\n\t\tvar diffHigh, diffLow;\n\t\tvalueHigh %= 1.8446744073709552E19;\n\t\tvalueLow %= 1.8446744073709552E19;\n\t\tdiffHigh = valueHigh % 4294967296;\n\t\tdiffLow = Math.floor(valueLow / 4294967296) * 4294967296;\n\t\tvalueHigh = valueHigh - diffHigh + diffLow;\n\t\tvalueLow = valueLow - diffLow + diffHigh;\n\t\twhile (valueLow < 0) {\n\t\t\tvalueLow += 4294967296;\n\t\t\tvalueHigh -= 4294967296;\n\t\t}\n\t\twhile (valueLow > 4294967295) {\n\t\t\tvalueLow -= 4294967296;\n\t\t\tvalueHigh += 4294967296;\n\t\t}\n\t\tvalueHigh = valueHigh % 1.8446744073709552E19;\n\t\twhile (valueHigh > 9223372032559808512) {\n\t\t\tvalueHigh -= 1.8446744073709552E19;\n\t\t}\n\t\twhile (valueHigh < -9223372036854775808) {\n\t\t\tvalueHigh += 1.8446744073709552E19;\n\t\t}\n\t\treturn [valueLow, valueHigh];\n\t}\n\t\n\tfunction div(a, b) {\n\t\tvar approx, deltaRem, deltaResult, halfa, rem, result;\n\t\tif (b[0] == 0 && b[1] == 0) {\n\t\t\tthrow $ArithmeticException(new ArithmeticException(), '/ by zero');\n\t\t}\n\t\tif (a[0] == 0 && a[1] == 0) {\n\t\t\treturn $clinit_10() , ZERO;\n\t\t}\n\t\tif (eq(a, ($clinit_10() , MIN_VALUE))) {\n\t\t\tif (eq(b, ONE) || eq(b, NEG_ONE)) {\n\t\t\t\treturn MIN_VALUE;\n\t\t\t}\n\t\t\thalfa = shr(a, 1);\n\t\t\tapprox = shl(div(halfa, b), 1);\n\t\t\trem = sub(a, mul(b, approx));\n\t\t\treturn add(approx, div(rem, b));\n\t\t}\n\t\tif (eq(b, MIN_VALUE)) {\n\t\t\treturn ZERO;\n\t\t}\n\t\tif (a[1] < 0) {\n\t\t\tif (b[1] < 0) {\n\t\t\t\treturn div(neg(a), neg(b));\n\t\t\t} else {\n\t\t\t\treturn neg(div(neg(a), b));\n\t\t\t}\n\t\t}\n\t\tif (b[1] < 0) {\n\t\t\treturn neg(div(a, neg(b)));\n\t\t}\n\t\tresult = ZERO;\n\t\trem = a;\n\t\twhile (compare(rem, b) >= 0) {\n\t\t\tdeltaResult = fromDouble(Math.floor(toDoubleRoundDown(rem) / toDoubleRoundUp(b)));\n\t\t\tif (deltaResult[0] == 0 && deltaResult[1] == 0) {\n\t\t\t\tdeltaResult = ONE;\n\t\t\t}\n\t\t\tdeltaRem = mul(deltaResult, b);\n\t\t\tresult = add(result, deltaResult);\n\t\t\trem = sub(rem, deltaRem);\n\t\t}\n\t\treturn result;\n\t}\n\t\n\tfunction eq(a, b) {\n\t\treturn a[0] == b[0] && a[1] == b[1];\n\t}\n\t\n\tfunction fromDouble(value) {\n\t\tif (isNaN(value)) {\n\t\t\treturn $clinit_10() , ZERO;\n\t\t}\n\t\tif (value < -9223372036854775808) {\n\t\t\treturn $clinit_10() , MIN_VALUE;\n\t\t}\n\t\tif (value >= 9223372036854775807) {\n\t\t\treturn $clinit_10() , MAX_VALUE;\n\t\t}\n\t\tif (value > 0) {\n\t\t\treturn create(Math.floor(value), 0);\n\t\t} else {\n\t\t\treturn create(Math.ceil(value), 0);\n\t\t}\n\t}\n\t\n\tfunction fromInt(value) {\n\t\tvar rebase, result;\n\t\tif (value > -129 && value < 128) {\n\t\t\trebase = value + 128;\n\t\t\tresult = ($clinit_9() , boxedValues)[rebase];\n\t\t\tif (result == null) {\n\t\t\t\tresult = boxedValues[rebase] = internalFromInt(value);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn internalFromInt(value);\n\t}\n\t\n\tfunction internalFromInt(value) {\n\t\tif (value >= 0) {\n\t\t\treturn [value, 0];\n\t\t} else {\n\t\t\treturn [value + 4294967296, -4294967296];\n\t\t}\n\t}\n\t\n\tfunction lowBits_0(a) {\n\t\tif (a[0] >= 2147483648) {\n\t\t\treturn ~~Math.max(Math.min(a[0] - 4294967296, 2147483647), -2147483648);\n\t\t} else {\n\t\t\treturn ~~Math.max(Math.min(a[0], 2147483647), -2147483648);\n\t\t}\n\t}\n\t\n\tfunction makeFromBits(highBits, lowBits) {\n\t\tvar high, low;\n\t\thigh = highBits * 4294967296;\n\t\tlow = lowBits;\n\t\tif (lowBits < 0) {\n\t\t\tlow += 4294967296;\n\t\t}\n\t\treturn [low, high];\n\t}\n\t\n\tfunction mul(a, b) {\n\t\tvar a1, a2, a3, a4, b1, b2, b3, b4, res;\n\t\tif (a[0] == 0 && a[1] == 0) {\n\t\t\treturn $clinit_10() , ZERO;\n\t\t}\n\t\tif (b[0] == 0 && b[1] == 0) {\n\t\t\treturn $clinit_10() , ZERO;\n\t\t}\n\t\tif (eq(a, ($clinit_10() , MIN_VALUE))) {\n\t\t\treturn multByMinValue(b);\n\t\t}\n\t\tif (eq(b, MIN_VALUE)) {\n\t\t\treturn multByMinValue(a);\n\t\t}\n\t\tif (a[1] < 0) {\n\t\t\tif (b[1] < 0) {\n\t\t\t\treturn mul(neg(a), neg(b));\n\t\t\t} else {\n\t\t\t\treturn neg(mul(neg(a), b));\n\t\t\t}\n\t\t}\n\t\tif (b[1] < 0) {\n\t\t\treturn neg(mul(a, neg(b)));\n\t\t}\n\t\tif (compare(a, TWO_PWR_24) < 0 && compare(b, TWO_PWR_24) < 0) {\n\t\t\treturn create((a[1] + a[0]) * (b[1] + b[0]), 0);\n\t\t}\n\t\ta3 = a[1] % 281474976710656;\n\t\ta4 = a[1] - a3;\n\t\ta1 = a[0] % 65536;\n\t\ta2 = a[0] - a1;\n\t\tb3 = b[1] % 281474976710656;\n\t\tb4 = b[1] - b3;\n\t\tb1 = b[0] % 65536;\n\t\tb2 = b[0] - b1;\n\t\tres = ZERO;\n\t\tres = addTimes(res, a4, b1);\n\t\tres = addTimes(res, a3, b2);\n\t\tres = addTimes(res, a3, b1);\n\t\tres = addTimes(res, a2, b3);\n\t\tres = addTimes(res, a2, b2);\n\t\tres = addTimes(res, a2, b1);\n\t\tres = addTimes(res, a1, b4);\n\t\tres = addTimes(res, a1, b3);\n\t\tres = addTimes(res, a1, b2);\n\t\tres = addTimes(res, a1, b1);\n\t\treturn res;\n\t}\n\t\n\tfunction multByMinValue(a) {\n\t\tif ((lowBits_0(a) & 1) == 1) {\n\t\t\treturn $clinit_10() , MIN_VALUE;\n\t\t} else {\n\t\t\treturn $clinit_10() , ZERO;\n\t\t}\n\t}\n\t\n\tfunction neg(a) {\n\t\tvar newHigh, newLow;\n\t\tif (eq(a, ($clinit_10() , MIN_VALUE))) {\n\t\t\treturn MIN_VALUE;\n\t\t}\n\t\tnewHigh = -a[1];\n\t\tnewLow = -a[0];\n\t\tif (newLow > 4294967295) {\n\t\t\tnewLow -= 4294967296;\n\t\t\tnewHigh += 4294967296;\n\t\t}\n\t\tif (newLow < 0) {\n\t\t\tnewLow += 4294967296;\n\t\t\tnewHigh -= 4294967296;\n\t\t}\n\t\treturn [newLow, newHigh];\n\t}\n\t\n\tfunction pwrAsDouble(n) {\n\t\tif (n <= 30) {\n\t\t\treturn 1 << n;\n\t\t} else {\n\t\t\treturn pwrAsDouble(30) * pwrAsDouble(n - 30);\n\t\t}\n\t}\n\t\n\tfunction shl(a, n) {\n\t\tvar diff, newHigh, newLow, twoToN;\n\t\tn &= 63;\n\t\tif (eq(a, ($clinit_10() , MIN_VALUE))) {\n\t\t\tif (n == 0) {\n\t\t\t\treturn a;\n\t\t\t} else {\n\t\t\t\treturn ZERO;\n\t\t\t}\n\t\t}\n\t\tif (a[1] < 0) {\n\t\t\treturn neg(shl(neg(a), n));\n\t\t}\n\t\ttwoToN = pwrAsDouble(n);\n\t\tnewHigh = a[1] * twoToN % 1.8446744073709552E19;\n\t\tnewLow = a[0] * twoToN;\n\t\tdiff = newLow - newLow % 4294967296;\n\t\tnewHigh += diff;\n\t\tnewLow -= diff;\n\t\tif (newHigh >= 9223372036854775807) {\n\t\t\tnewHigh -= 1.8446744073709552E19;\n\t\t}\n\t\treturn [newLow, newHigh];\n\t}\n\t\n\tfunction shr(a, n) {\n\t\tvar newHigh, newLow, shiftFact;\n\t\tn &= 63;\n\t\tshiftFact = pwrAsDouble(n);\n\t\tnewHigh = a[1] / shiftFact;\n\t\tnewLow = Math.floor(a[0] / shiftFact);\n\t\treturn create(newLow, newHigh);\n\t}\n\t\n\tfunction shru(a, n) {\n\t\tvar sr;\n\t\tn &= 63;\n\t\tsr = shr(a, n);\n\t\tif (a[1] < 0) {\n\t\t\tsr = add(sr, shl(($clinit_10() , TWO), 63 - n));\n\t\t}\n\t\treturn sr;\n\t}\n\t\n\tfunction sub(a, b) {\n\t\tvar newHigh, newLow;\n\t\tnewHigh = a[1] - b[1];\n\t\tnewLow = a[0] - b[0];\n\t\treturn create(newLow, newHigh);\n\t}\n\t\n\tfunction toDoubleRoundDown(a) {\n\t\tvar diff, magnitute, toSubtract;\n\t\tmagnitute = round_int(Math.log(a[1]) / ($clinit_10() , LN_2));\n\t\tif (magnitute <= 48) {\n\t\t\treturn a[1] + a[0];\n\t\t} else {\n\t\t\tdiff = magnitute - 48;\n\t\t\ttoSubtract = (1 << diff) - 1;\n\t\t\treturn a[1] + (a[0] - toSubtract);\n\t\t}\n\t}\n\t\n\tfunction toDoubleRoundUp(a) {\n\t\tvar diff, magnitute, toAdd;\n\t\tmagnitute = round_int(Math.log(a[1]) / ($clinit_10() , LN_2));\n\t\tif (magnitute <= 48) {\n\t\t\treturn a[1] + a[0];\n\t\t} else {\n\t\t\tdiff = magnitute - 48;\n\t\t\ttoAdd = (1 << diff) - 1;\n\t\t\treturn a[1] + (a[0] + toAdd);\n\t\t}\n\t}\n\t\n\tfunction toString_0(a) {\n\t\tvar digits, rem, remDivTenPower, res, tenPowerLong, zeroesNeeded;\n\t\tif (a[0] == 0 && a[1] == 0) {\n\t\t\treturn '0';\n\t\t}\n\t\tif (eq(a, ($clinit_10() , MIN_VALUE))) {\n\t\t\treturn '-9223372036854775808';\n\t\t}\n\t\tif (a[1] < 0) {\n\t\t\treturn '-' + toString_0(neg(a));\n\t\t}\n\t\trem = a;\n\t\tres = '';\n\t\twhile (!(rem[0] == 0 && rem[1] == 0)) {\n\t\t\ttenPowerLong = fromInt(1000000000);\n\t\t\tremDivTenPower = div(rem, tenPowerLong);\n\t\t\tdigits = '' + lowBits_0(sub(rem, mul(remDivTenPower, tenPowerLong)));\n\t\t\trem = remDivTenPower;\n\t\t\tif (!(rem[0] == 0 && rem[1] == 0)) {\n\t\t\t\tzeroesNeeded = 9 - digits.length;\n\t\t\t\tfor (; zeroesNeeded > 0; --zeroesNeeded) {\n\t\t\t\t\tdigits = '0' + digits;\n\t\t\t\t}\n\t\t\t}\n\t\t\tres = digits + res;\n\t\t}\n\t\treturn res;\n\t}\n\t\n\tfunction $clinit_9() {\n\t\t$clinit_9 = nullMethod;\n\t\tboxedValues = initDim(_3_3D_classLit, 0, 9, 256, 0);\n\t}\n\t\n\tvar boxedValues;\n\tfunction $clinit_10() {\n\t\t$clinit_10 = nullMethod;\n\t\tLN_2 = Math.log(2);\n\t\tMAX_VALUE = P7fffffffffffffff_longLit;\n\t\tMIN_VALUE = N8000000000000000_longLit;\n\t\tNEG_ONE = fromInt(-1);\n\t\tONE = fromInt(1);\n\t\tTWO = fromInt(2);\n\t\tTWO_PWR_24 = P1000000_longLit;\n\t\tZERO = fromInt(0);\n\t}\n\t\n\tvar LN_2, MAX_VALUE, MIN_VALUE, NEG_ONE, ONE, TWO, TWO_PWR_24, ZERO;\n\tfunction getClass_6() {\n\t\treturn Ljava_io_InputStream_2_classLit;\n\t}\n\t\n\tfunction InputStream() {\n\t}\n\t\n\t_ = InputStream.prototype = new Object_0();\n\t_.getClass$ = getClass_6;\n\t_.typeId$ = 0;\n\tfunction $ByteArrayInputStream(this$static, buf) {\n\t\t$ByteArrayInputStream_0(this$static, buf, 0, buf.length);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $ByteArrayInputStream_0(this$static, buf, off, len) {\n\t\tthis$static.buf = buf;\n\t\tthis$static.pos = off;\n\t\tthis$static.count = off + len;\n\t\tif (this$static.count > buf.length)\n\t\t\tthis$static.count = buf.length;\n\t\treturn this$static;\n\t}\n\t\n\tfunction $read(this$static) {\n\t\tif (this$static.pos >= this$static.count)\n\t\t\treturn -1;\n\t\treturn this$static.buf[this$static.pos++] & 255;\n\t}\n\t\n\tfunction $read_0(this$static, buf, off, len) {\n\t\tif (this$static.pos >= this$static.count)\n\t\t\treturn -1;\n\t\tlen = min(len, this$static.count - this$static.pos);\n\t\tarraycopy(this$static.buf, this$static.pos, buf, off, len);\n\t\tthis$static.pos += len;\n\t\treturn len;\n\t}\n\t\n\tfunction getClass_3() {\n\t\treturn Ljava_io_ByteArrayInputStream_2_classLit;\n\t}\n\t\n\tfunction ByteArrayInputStream() {\n\t}\n\t\n\t_ = ByteArrayInputStream.prototype = new InputStream();\n\t_.getClass$ = getClass_3;\n\t_.typeId$ = 0;\n\t_.buf = null;\n\t_.count = 0;\n\t_.pos = 0;\n\tfunction getClass_7() {\n\t\treturn Ljava_io_OutputStream_2_classLit;\n\t}\n\t\n\tfunction OutputStream() {\n\t}\n\t\n\t_ = OutputStream.prototype = new Object_0();\n\t_.getClass$ = getClass_7;\n\t_.typeId$ = 0;\n\tfunction $ByteArrayOutputStream(this$static) {\n\t\tthis$static.buf = initDim(_3B_classLit, 0, -1, 32, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $ensureCapacity(this$static, len) {\n\t\tvar newbuf;\n\t\tif (len <= this$static.buf.length)\n\t\t\treturn;\n\t\tlen = max(len, this$static.buf.length * 2);\n\t\tnewbuf = initDim(_3B_classLit, 0, -1, len, 1);\n\t\tarraycopy(this$static.buf, 0, newbuf, 0, this$static.buf.length);\n\t\tthis$static.buf = newbuf;\n\t}\n\t\n\tfunction $toByteArray(this$static) {\n\t\tvar data;\n\t\tdata = initDim(_3B_classLit, 0, -1, this$static.count, 1);\n\t\tarraycopy(this$static.buf, 0, data, 0, this$static.count);\n\t\treturn data;\n\t}\n\t\n\tfunction $write(this$static, b) {\n\t\t$ensureCapacity(this$static, this$static.count + 1);\n\t\tthis$static.buf[this$static.count++] = b << 24 >> 24;\n\t}\n\t\n\tfunction $write_0(this$static, buf, off, len) {\n\t\t$ensureCapacity(this$static, this$static.count + len);\n\t\tarraycopy(buf, off, this$static.buf, this$static.count, len);\n\t\tthis$static.count += len;\n\t}\n\t\n\tfunction getClass_4() {\n\t\treturn Ljava_io_ByteArrayOutputStream_2_classLit;\n\t}\n\t\n\tfunction ByteArrayOutputStream() {\n\t}\n\t\n\t_ = ByteArrayOutputStream.prototype = new OutputStream();\n\t_.getClass$ = getClass_4;\n\t_.typeId$ = 0;\n\t_.buf = null;\n\t_.count = 0;\n\tfunction $IOException(this$static, message) {\n\t\tthis$static.detailMessage = message;\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_5() {\n\t\treturn Ljava_io_IOException_2_classLit;\n\t}\n\t\n\tfunction IOException() {\n\t}\n\t\n\t_ = IOException.prototype = new Exception();\n\t_.getClass$ = getClass_5;\n\t_.typeId$ = 7;\n\tfunction $ArithmeticException(this$static, explanation) {\n\t\tthis$static.detailMessage = explanation;\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_8() {\n\t\treturn Ljava_lang_ArithmeticException_2_classLit;\n\t}\n\t\n\tfunction ArithmeticException() {\n\t}\n\t\n\t_ = ArithmeticException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_8;\n\t_.typeId$ = 8;\n\tfunction $ArrayStoreException(this$static, message) {\n\t\tthis$static.detailMessage = message;\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_9() {\n\t\treturn Ljava_lang_ArrayStoreException_2_classLit;\n\t}\n\t\n\tfunction ArrayStoreException() {\n\t}\n\t\n\t_ = ArrayStoreException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_9;\n\t_.typeId$ = 9;\n\tfunction createForArray(packageName, className) {\n\t\tvar clazz;\n\t\tclazz = new Class();\n\t\tclazz.typeName = packageName + className;\n\t\treturn clazz;\n\t}\n\t\n\tfunction createForClass(packageName, className) {\n\t\tvar clazz;\n\t\tclazz = new Class();\n\t\tclazz.typeName = packageName + className;\n\t\treturn clazz;\n\t}\n\t\n\tfunction createForEnum(packageName, className) {\n\t\tvar clazz;\n\t\tclazz = new Class();\n\t\tclazz.typeName = packageName + className;\n\t\treturn clazz;\n\t}\n\t\n\tfunction getClass_11() {\n\t\treturn Ljava_lang_Class_2_classLit;\n\t}\n\t\n\tfunction Class() {\n\t}\n\t\n\t_ = Class.prototype = new Object_0();\n\t_.getClass$ = getClass_11;\n\t_.typeId$ = 0;\n\t_.typeName = null;\n\tfunction getClass_10() {\n\t\treturn Ljava_lang_ClassCastException_2_classLit;\n\t}\n\t\n\tfunction ClassCastException() {\n\t}\n\t\n\t_ = ClassCastException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_10;\n\t_.typeId$ = 12;\n\tfunction getClass_12() {\n\t\treturn Ljava_lang_Enum_2_classLit;\n\t}\n\t\n\tfunction Enum() {\n\t}\n\t\n\t_ = Enum.prototype = new Object_0();\n\t_.getClass$ = getClass_12;\n\t_.typeId$ = 0;\n\tfunction $IllegalArgumentException(this$static, message) {\n\t\tthis$static.detailMessage = message;\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_14() {\n\t\treturn Ljava_lang_IllegalArgumentException_2_classLit;\n\t}\n\t\n\tfunction IllegalArgumentException() {\n\t}\n\t\n\t_ = IllegalArgumentException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_14;\n\t_.typeId$ = 13;\n\tfunction getClass_15() {\n\t\treturn Ljava_lang_IllegalStateException_2_classLit;\n\t}\n\t\n\tfunction IllegalStateException() {\n\t}\n\t\n\t_ = IllegalStateException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_15;\n\t_.typeId$ = 14;\n\tfunction getClass_16() {\n\t\treturn Ljava_lang_IndexOutOfBoundsException_2_classLit;\n\t}\n\t\n\tfunction IndexOutOfBoundsException() {\n\t}\n\t\n\t_ = IndexOutOfBoundsException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_16;\n\t_.typeId$ = 15;\n\tfunction max(x, y) {\n\t\treturn x > y?x:y;\n\t}\n\t\n\tfunction min(x, y) {\n\t\treturn x < y?x:y;\n\t}\n\t\n\tfunction getClass_17() {\n\t\treturn Ljava_lang_NullPointerException_2_classLit;\n\t}\n\t\n\tfunction NullPointerException() {\n\t}\n\t\n\t_ = NullPointerException.prototype = new RuntimeException();\n\t_.getClass$ = getClass_17;\n\t_.typeId$ = 16;\n\tfunction $equals(this$static, other) {\n\t\tif (other == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn String(this$static) == other;\n\t}\n\t\n\tfunction $getChars(this$static, srcBegin, srcEnd, dst, dstBegin) {\n\t\tvar srcIdx;\n\t\tfor (srcIdx = srcBegin; srcIdx < srcEnd; ++srcIdx) {\n\t\t\tdst[dstBegin++] = this$static.charCodeAt(srcIdx);\n\t\t}\n\t}\n\t\n\tfunction getClass_21() {\n\t\treturn Ljava_lang_String_2_classLit;\n\t}\n\t\n\t_ = String.prototype;\n\t_.getClass$ = getClass_21;\n\t_.typeId$ = 2;\n\tfunction $StringBuilder(this$static) {\n\t\tvar array;\n\t\tthis$static.data = (array = [] , array.explicitLength = 0 , array);\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_20() {\n\t\treturn Ljava_lang_StringBuilder_2_classLit;\n\t}\n\t\n\tfunction StringBuilder() {\n\t}\n\t\n\t_ = StringBuilder.prototype = new Object_0();\n\t_.getClass$ = getClass_20;\n\t_.typeId$ = 0;\n\tfunction arraycopy(src, srcOfs, dest, destOfs, len) {\n\t\tvar destArray, destEnd, destTypeName, destlen, i, srcArray, srcTypeName, srclen;\n\t\t\n\t\tif (src == null || dest == null) {\n\t\t\tthrow new NullPointerException();\n\t\t}\n\t\t\n\t\tsrcTypeName  = (src.typeMarker$  == nullMethod || src.typeId$  == 2 ? src.getClass$()  : Lcom_google_gwt_core_client_JavaScriptObject_2_classLit).typeName;\n\t\tdestTypeName = (dest.typeMarker$ == nullMethod || dest.typeId$ == 2 ? dest.getClass$() : Lcom_google_gwt_core_client_JavaScriptObject_2_classLit).typeName;\n\t\t\n\t\tif (srcTypeName.charCodeAt(0) != 91 || destTypeName.charCodeAt(0) != 91) {\n\t\t\tthrow $ArrayStoreException(new ArrayStoreException(), 'Must be array types');\n\t\t}\n\t\tif (srcTypeName.charCodeAt(1) != destTypeName.charCodeAt(1)) {\n\t\t\tthrow $ArrayStoreException(new ArrayStoreException(), 'Array types must match');\n\t\t}\n\t\t\n\t\tsrclen  = src.length;\n\t\tdestlen = dest.length;\n\t\tif (srcOfs < 0 || destOfs < 0 || len < 0 || srcOfs + len > srclen || destOfs + len > destlen) {\n\t\t\tthrow new IndexOutOfBoundsException();\n\t\t}\n\t\tif ((srcTypeName.charCodeAt(1) == 76 || srcTypeName.charCodeAt(1) == 91) && !$equals(srcTypeName, destTypeName)) {\n\t\t\tsrcArray  = dynamicCast(src, 3);\n\t\t\tdestArray = dynamicCast(dest, 3);\n\t\t\tif ((src == null ? null : src) === (dest == null ? null : dest) && srcOfs < destOfs) {\n\t\t\t\tsrcOfs += len;\n\t\t\t\tfor (destEnd = destOfs + len; destEnd-- > destOfs;) {\n\t\t\t\t\tsetCheck(destArray, destEnd, srcArray[--srcOfs]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (destEnd = destOfs + len; destOfs < destEnd;) {\n\t\t\t\t\tsetCheck(destArray, destOfs++, srcArray[srcOfs++]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i = 0; i < len; ++i) {\n\t\t\t\tdest[destOfs + i] = src[srcOfs + i]\n\t\t\t}\n\t\t}\n\t}\n\t\n\t\n\tfunction $configure(this$static, encoder) {\n\tif (!$SetDictionarySize_0(encoder, 1 << this$static.dictionarySize))\n\t\tthrow $RuntimeException(new RuntimeException(), 'unexpected failure');\n\tif (!$SetNumFastBytes(encoder, this$static.fb))\n\t\tthrow $RuntimeException(new RuntimeException(), 'unexpected failure');\n\tif (!$SetMatchFinder(encoder, this$static.matchFinder))\n\t\tthrow $RuntimeException(new RuntimeException(), 'unexpected failure');\n\tif (!$SetLcLpPb_0(encoder, this$static.lc, this$static.lp, this$static.pb))\n\t\tthrow $RuntimeException(new RuntimeException(), 'unexpected failure');\n\t}\n\t\n\tfunction getClass_23() {\n\t\treturn Lorg_dellroad_lzma_client_CompressionMode_2_classLit;\n\t}\n\t\n\tfunction CompressionMode() {\n\t}\n\t\n\t_ = CompressionMode.prototype = new Enum();\n\t_.getClass$ = getClass_23;\n\t_.typeId$ = 0;\n\t_.dictionarySize = 0;\n\t_.fb = 0;\n\t_.lc = 0;\n\t_.lp = 0;\n\t_.matchFinder = 0;\n\t_.pb = 0;\n\t\n\tfunction $execute(this$static) {\n\t\tvar $e0;\n\t\ttry {\n\t\t\treturn $processChunk(this$static.chunker);\n\t\t}\n\t\tcatch ($e0) {\n\t\t\t$e0 = caught($e0);\n\t\t\tif (instanceOf($e0, 10)) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthrow $e0;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $init(this$static, input, output, length_0, mode) {\n\t\tvar encoder, i;\n\t\tif (!mode)\n\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'null mode');\n\t\tif (compare(length_0, N1_longLit) < 0)\n\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid length ' + toString_0(length_0));\n\t\tthis$static.length_0 = length_0;\n\t\tencoder = $Encoder(new Encoder());\n\t\t$configure(mode, encoder);\n\t\tencoder._writeEndMark = true;\n\t\t$WriteCoderProperties(encoder, output);\n\t\tfor (i = 0; i < 64; i += 8)\n\t\t\t$write(output, lowBits_0(shr(length_0, i)) & 255);\n\t\tthis$static.chunker = (encoder._needReleaseMFStream = false , (encoder._inStream = input , encoder._finished = false , $Create_2(encoder) , encoder._rangeEncoder.Stream = output , $Init_4(encoder) , $FillDistancesPrices(encoder) , $FillAlignPrices(encoder) , encoder._lenEncoder._tableSize = encoder._numFastBytes + 1 - 2 , $UpdateTables(encoder._lenEncoder, 1 << encoder._posStateBits) , encoder._repMatchLenEncoder._tableSize = encoder._numFastBytes + 1 - 2 , $UpdateTables(encoder._repMatchLenEncoder, 1 << encoder._posStateBits) , encoder.nowPos64 = P0_longLit , undefined) , $Chunker_0(new Chunker(), encoder));\n\t}\n\t\n\tfunction getClass_26() {\n\t\treturn Lorg_dellroad_lzma_client_LZMACompressor_2_classLit;\n\t}\n\t\n\tfunction LZMACompressor() {\n\t}\n\t\n\t_ = LZMACompressor.prototype = new Object_0();\n\t_.getClass$ = getClass_26;\n\t_.typeId$ = 0;\n\t_.chunker = null;\n\t\n\tfunction $LZMAByteArrayCompressor(this$static, data, mode) {\n\t\tvar $e0;\n\t\tthis$static.output = $ByteArrayOutputStream(new ByteArrayOutputStream());\n\t\ttry {\n\t\t\t$init(this$static, $ByteArrayInputStream(new ByteArrayInputStream(), data), this$static.output, fromInt(data.length), mode);\n\t\t} catch ($e0) {\n\t\t\t$e0 = caught($e0);\n\t\t\tif (instanceOf($e0, 10)) {\n\t\t\t\tthrow $RuntimeException(new RuntimeException(), 'impossible exception');\n\t\t\t} else {\n\t\t\t\tthrow $e0;\n\t\t\t}\n\t\t}\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_24() {\n\t\treturn Lorg_dellroad_lzma_client_LZMAByteArrayCompressor_2_classLit;\n\t}\n\t\n\tfunction LZMAByteArrayCompressor() {\n\t}\n\t\n\t_ = LZMAByteArrayCompressor.prototype = new LZMACompressor();\n\t_.getClass$ = getClass_24;\n\t_.typeId$ = 0;\n\t_.output = null;\n\tfunction $execute_0(this$static) {\n\t\tvar $e0, e;\n\t\ttry {\n\t\t\treturn $processChunk(this$static.chunker);\n\t\t}\n\t\tcatch ($e0) {\n\t\t\t$e0 = caught($e0);\n\t\t\tif (instanceOf($e0, 10)) {\n\t\t\t\te = $e0;\n\t\t\t\tthis$static.exception = e;\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthrow $e0;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $init_0(this$static, input, output) {\n\t\tvar decoder,\n\t\t\thex_length = \"\",\n\t\t\ti,\n\t\t\tproperties,\n\t\t\tr,\n\t\t\ttmp_length;\n\t\t\n\t\tproperties = initDim(_3B_classLit, 0, -1, 5, 1);\n\t\tfor (i = 0; i < properties.length; ++i) {\n\t\t\tr = $read(input);\n\t\t\tif (r == -1)\n\t\t\t\tthrow $IOException(new IOException(), 'truncated input');\n\t\t\tproperties[i] = r << 24 >> 24;\n\t\t}\n\t\tdecoder = $Decoder(new Decoder());\n\t\tif (!$SetDecoderProperties(decoder, properties))\n\t\t\tthrow $IOException(new IOException(), 'corrupted input');\n\t\t\n\t\tfor (i = 0; i < 64; i += 8) {\n\t\t\tr = $read(input);\n\t\t\tif (r == -1)\n\t\t\t\tthrow $IOException(new IOException(), 'truncated input');\n\t\t\tr = r.toString(16);\n\t\t\tif (r.length == 1) r = \"0\" + r;\n\t\t\thex_length = r + \"\" + hex_length;\n\t\t}\n\t\t\n\t\t/// Was the length set in the header (if it was compressed from a stream, the length is all f's).\n\t\tif (hex_length.toLowerCase() == \"ffffffffffffffffff\" || hex_length == 0) {\n\t\t\t/// The length is unknown, so set to -1.\n\t\t\tthis$static.length_0 = N1_longLit;\n\t\t} else {\n\t\t\t///NOTE: If there is a problem with the decoder because of the length, you can always set the length to -1 (N1_longLit) which means unknown.\n\t\t\ttmp_length = parseInt(hex_length, 16);\n\t\t\t/// If the length is too long to handle, just set it to unknown.\n\t\t\tif (tmp_length > 4294967295) {\n\t\t\t\tthis$static.length_0 = N1_longLit;\n\t\t\t} else {\n\t\t\t\tthis$static.length_0 = fromDouble(tmp_length);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis$static.chunker = $CodeInChunks(decoder, input, output, this$static.length_0);\n\t}\n\t\n\tfunction getClass_27() {\n\t\treturn Lorg_dellroad_lzma_client_LZMADecompressor_2_classLit;\n\t}\n\t\n\tfunction LZMADecompressor() {\n\t}\n\t\n\t_ = LZMADecompressor.prototype = new Object_0();\n\t_.getClass$ = getClass_27;\n\t_.typeId$ = 0;\n\t_.chunker = null;\n\t_.exception = null;\n\t_.length_0 = P0_longLit;\n\tfunction $LZMAByteArrayDecompressor(this$static, data) {\n\t\tthis$static.output = $ByteArrayOutputStream(new ByteArrayOutputStream());\n\t\t$init_0(this$static, $ByteArrayInputStream(new ByteArrayInputStream(), data), this$static.output);\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_25() {\n\t\treturn Lorg_dellroad_lzma_client_LZMAByteArrayDecompressor_2_classLit;\n\t}\n\t\n\tfunction LZMAByteArrayDecompressor() {\n\t}\n\t\n\t_ = LZMAByteArrayDecompressor.prototype = new LZMADecompressor();\n\t_.getClass$ = getClass_25;\n\t_.typeId$ = 0;\n\t_.output = null;\n\tfunction $Create_4(this$static, keepSizeBefore, keepSizeAfter, keepSizeReserv) {\n\t\tvar blockSize;\n\t\tthis$static._keepSizeBefore = keepSizeBefore;\n\t\tthis$static._keepSizeAfter = keepSizeAfter;\n\t\tblockSize = keepSizeBefore + keepSizeAfter + keepSizeReserv;\n\t\tif (this$static._bufferBase == null || this$static._blockSize != blockSize) {\n\t\t\tthis$static._bufferBase = null;\n\t\t\tthis$static._blockSize = blockSize;\n\t\t\tthis$static._bufferBase = initDim(_3B_classLit, 0, -1, this$static._blockSize, 1);\n\t\t}\n\t\tthis$static._pointerToLastSafePosition = this$static._blockSize - keepSizeAfter;\n\t}\n\t\n\tfunction $GetIndexByte(this$static, index) {\n\t\treturn this$static._bufferBase[this$static._bufferOffset + this$static._pos + index];\n\t}\n\t\n\tfunction $GetMatchLen(this$static, index, distance, limit) {\n\t\tvar i, pby;\n\t\tif (this$static._streamEndWasReached) {\n\t\t\tif (this$static._pos + index + limit > this$static._streamPos) {\n\t\t\t\tlimit = this$static._streamPos - (this$static._pos + index);\n\t\t\t}\n\t\t}\n\t\t++distance;\n\t\tpby = this$static._bufferOffset + this$static._pos + index;\n\t\tfor (i = 0; i < limit && this$static._bufferBase[pby + i] == this$static._bufferBase[pby + i - distance]; ++i) {\n\t\t}\n\t\treturn i;\n\t}\n\t\n\tfunction $GetNumAvailableBytes(this$static) {\n\t\treturn this$static._streamPos - this$static._pos;\n\t}\n\t\n\tfunction $MoveBlock(this$static) {\n\t\tvar i, numBytes, offset;\n\t\toffset = this$static._bufferOffset + this$static._pos - this$static._keepSizeBefore;\n\t\tif (offset > 0) {\n\t\t\t--offset;\n\t\t}\n\t\tnumBytes = this$static._bufferOffset + this$static._streamPos - offset;\n\t\tfor (i = 0; i < numBytes; ++i) {\n\t\t\tthis$static._bufferBase[i] = this$static._bufferBase[offset + i];\n\t\t}\n\t\tthis$static._bufferOffset -= offset;\n\t}\n\t\n\tfunction $MovePos_1(this$static) {\n\t\tvar pointerToPostion;\n\t\t++this$static._pos;\n\t\tif (this$static._pos > this$static._posLimit) {\n\t\t\tpointerToPostion = this$static._bufferOffset + this$static._pos;\n\t\t\tif (pointerToPostion > this$static._pointerToLastSafePosition) {\n\t\t\t\t$MoveBlock(this$static);\n\t\t\t}\n\t\t\t$ReadBlock(this$static);\n\t\t}\n\t}\n\t\n\tfunction $ReadBlock(this$static) {\n\t\tvar numReadBytes, pointerToPostion, size;\n\t\tif (this$static._streamEndWasReached)\n\t\t\treturn;\n\t\twhile (true) {\n\t\t\tsize = -this$static._bufferOffset + this$static._blockSize - this$static._streamPos;\n\t\t\tif (size == 0)\n\t\t\t\treturn;\n\t\t\tnumReadBytes = $read_0(this$static._stream, this$static._bufferBase, this$static._bufferOffset + this$static._streamPos, size);\n\t\t\tif (numReadBytes == -1) {\n\t\t\t\tthis$static._posLimit = this$static._streamPos;\n\t\t\t\tpointerToPostion = this$static._bufferOffset + this$static._posLimit;\n\t\t\t\tif (pointerToPostion > this$static._pointerToLastSafePosition) {\n\t\t\t\t\tthis$static._posLimit = this$static._pointerToLastSafePosition - this$static._bufferOffset;\n\t\t\t\t}\n\t\t\t\tthis$static._streamEndWasReached = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis$static._streamPos += numReadBytes;\n\t\t\tif (this$static._streamPos >= this$static._pos + this$static._keepSizeAfter) {\n\t\t\t\tthis$static._posLimit = this$static._streamPos - this$static._keepSizeAfter;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $ReduceOffsets(this$static, subValue) {\n\t\tthis$static._bufferOffset += subValue;\n\t\tthis$static._posLimit -= subValue;\n\t\tthis$static._pos -= subValue;\n\t\tthis$static._streamPos -= subValue;\n\t}\n\t\n\tfunction getClass_40() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZ_InWindow_2_classLit;\n\t}\n\t\n\tfunction InWindow() {\n\t}\n\t\n\t_ = InWindow.prototype = new Object_0();\n\t_.getClass$ = getClass_40;\n\t_.typeId$ = 0;\n\t_._blockSize = 0;\n\t_._bufferBase = null;\n\t_._bufferOffset = 0;\n\t_._keepSizeAfter = 0;\n\t_._keepSizeBefore = 0;\n\t_._pointerToLastSafePosition = 0;\n\t_._pos = 0;\n\t_._posLimit = 0;\n\t_._stream = null;\n\t_._streamEndWasReached = false;\n\t_._streamPos = 0;\n\tfunction $clinit_60() {\n\t\t$clinit_60 = nullMethod;\n\t\tvar i, j, r;\n\t\tCrcTable = initDim(_3I_classLit, 0, -1, 256, 1);\n\t\tfor (i = 0; i < 256; ++i) {\n\t\t\tr = i;\n\t\t\tfor (j = 0; j < 8; ++j)\n\t\t\tif ((r & 1) != 0) {\n\t\t\t\tr = r >>> 1 ^ -306674912;\n\t\t\t} else {\n\t\t\t\tr >>>= 1;\n\t\t\t}\n\t\t\tCrcTable[i] = r;\n\t\t}\n\t}\n\t\n\tfunction $Create_3(this$static, historySize, keepAddBufferBefore, matchMaxLen, keepAddBufferAfter) {\n\t\tvar cyclicBufferSize, hs, windowReservSize;\n\t\tif (historySize > 1073741567) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis$static._cutValue = 16 + (matchMaxLen >> 1);\n\t\twindowReservSize = ~~((historySize + keepAddBufferBefore + matchMaxLen + keepAddBufferAfter) / 2) + 256;\n\t\t$Create_4(this$static, historySize + keepAddBufferBefore, matchMaxLen + keepAddBufferAfter, windowReservSize);\n\t\tthis$static._matchMaxLen = matchMaxLen;\n\t\tcyclicBufferSize = historySize + 1;\n\t\tif (this$static._cyclicBufferSize != cyclicBufferSize) {\n\t\t\tthis$static._son = initDim(_3I_classLit, 0, -1, (this$static._cyclicBufferSize = cyclicBufferSize) * 2, 1);\n\t\t}\n\n\t\ths = 65536;\n\t\tif (this$static.HASH_ARRAY) {\n\t\t\ths = historySize - 1;\n\t\t\ths |= hs >> 1;\n\t\t\ths |= hs >> 2;\n\t\t\ths |= hs >> 4;\n\t\t\ths |= hs >> 8;\n\t\t\ths >>= 1;\n\t\t\ths |= 65535;\n\t\t\tif (hs > 16777216)\n\t\t\ths >>= 1;\n\t\t\tthis$static._hashMask = hs;\n\t\t\t++hs;\n\t\t\ths += this$static.kFixHashSize;\n\t\t}\n\n\t\tif (hs != this$static._hashSizeSum) {\n\t\t\tthis$static._hash = initDim(_3I_classLit, 0, -1, this$static._hashSizeSum = hs, 1);\n\t\t}\n\t\treturn true;\n\t}\n\t\n\tfunction $GetMatches(this$static, distances) {\n\t\tvar count, cur, curMatch, curMatch2, curMatch3, cyclicPos, delta, hash2Value, hash3Value, hashValue, len, len0, len1, lenLimit, matchMinPos, maxLen, offset, pby1, ptr0, ptr1, temp;\n\t\tif (this$static._pos + this$static._matchMaxLen <= this$static._streamPos) {\n\t\t\tlenLimit = this$static._matchMaxLen;\n\t\t} else {\n\t\t\tlenLimit = this$static._streamPos - this$static._pos;\n\t\t\tif (lenLimit < this$static.kMinMatchCheck) {\n\t\t\t\t$MovePos_0(this$static);\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t\toffset = 0;\n\t\tmatchMinPos = this$static._pos > this$static._cyclicBufferSize?this$static._pos - this$static._cyclicBufferSize:0;\n\t\tcur = this$static._bufferOffset + this$static._pos;\n\t\tmaxLen = 1;\n\t\thash2Value = 0;\n\t\thash3Value = 0;\n\t\tif (this$static.HASH_ARRAY) {\n\t\t\ttemp = CrcTable[this$static._bufferBase[cur] & 255] ^ this$static._bufferBase[cur + 1] & 255;\n\t\t\thash2Value = temp & 1023;\n\t\t\ttemp ^= (this$static._bufferBase[cur + 2] & 255) << 8;\n\t\t\thash3Value = temp & 65535;\n\t\t\thashValue = (temp ^ CrcTable[this$static._bufferBase[cur + 3] & 255] << 5) & this$static._hashMask;\n\t\t} else {\n\t\t\thashValue = this$static._bufferBase[cur] & 255 ^ (this$static._bufferBase[cur + 1] & 255) << 8;\n\t\t}\n\n\t\tcurMatch = this$static._hash[this$static.kFixHashSize + hashValue];\n\t\tif (this$static.HASH_ARRAY) {\n\t\t\tcurMatch2 = this$static._hash[hash2Value];\n\t\t\tcurMatch3 = this$static._hash[1024 + hash3Value];\n\t\t\tthis$static._hash[hash2Value] = this$static._pos;\n\t\t\tthis$static._hash[1024 + hash3Value] = this$static._pos;\n\t\t\tif (curMatch2 > matchMinPos) {\n\t\t\t\tif (this$static._bufferBase[this$static._bufferOffset + curMatch2] == this$static._bufferBase[cur]) {\n\t\t\t\t\tdistances[offset++] = maxLen = 2;\n\t\t\t\t\tdistances[offset++] = this$static._pos - curMatch2 - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curMatch3 > matchMinPos) {\n\t\t\t\tif (this$static._bufferBase[this$static._bufferOffset + curMatch3] == this$static._bufferBase[cur]) {\n\t\t\t\t\tif (curMatch3 == curMatch2) {\n\t\t\t\t\t\toffset -= 2;\n\t\t\t\t\t}\n\t\t\t\t\tdistances[offset++] = maxLen = 3;\n\t\t\t\t\tdistances[offset++] = this$static._pos - curMatch3 - 1;\n\t\t\t\t\tcurMatch2 = curMatch3;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (offset != 0 && curMatch2 == curMatch) {\n\t\t\t\toffset -= 2;\n\t\t\t\tmaxLen = 1;\n\t\t\t}\n\t\t}\n\t\tthis$static._hash[this$static.kFixHashSize + hashValue] = this$static._pos;\n\t\tptr0 = (this$static._cyclicBufferPos << 1) + 1;\n\t\tptr1 = this$static._cyclicBufferPos << 1;\n\t\tlen0 = len1 = this$static.kNumHashDirectBytes;\n\t\tif (this$static.kNumHashDirectBytes != 0) {\n\t\t\tif (curMatch > matchMinPos) {\n\t\t\t\tif (this$static._bufferBase[this$static._bufferOffset + curMatch + this$static.kNumHashDirectBytes] != this$static._bufferBase[cur + this$static.kNumHashDirectBytes]) {\n\t\t\t\t\tdistances[offset++] = maxLen = this$static.kNumHashDirectBytes;\n\t\t\t\t\tdistances[offset++] = this$static._pos - curMatch - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcount = this$static._cutValue;\n\t\twhile (true) {\n\t\t\tif (curMatch <= matchMinPos || count-- == 0) {\n\t\t\t\tthis$static._son[ptr0] = this$static._son[ptr1] = 0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdelta = this$static._pos - curMatch;\n\t\t\tcyclicPos = (delta <= this$static._cyclicBufferPos?this$static._cyclicBufferPos - delta:this$static._cyclicBufferPos - delta + this$static._cyclicBufferSize) << 1;\n\t\t\tpby1 = this$static._bufferOffset + curMatch;\n\t\t\tlen = len0 < len1?len0:len1;\n\t\t\tif (this$static._bufferBase[pby1 + len] == this$static._bufferBase[cur + len]) {\n\t\t\t\twhile (++len != lenLimit) {\n\t\t\t\t\tif (this$static._bufferBase[pby1 + len] != this$static._bufferBase[cur + len]) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (maxLen < len) {\n\t\t\t\t\tdistances[offset++] = maxLen = len;\n\t\t\t\t\tdistances[offset++] = delta - 1;\n\t\t\t\t\tif (len == lenLimit) {\n\t\t\t\t\tthis$static._son[ptr1] = this$static._son[cyclicPos];\n\t\t\t\t\tthis$static._son[ptr0] = this$static._son[cyclicPos + 1];\n\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((this$static._bufferBase[pby1 + len] & 255) < (this$static._bufferBase[cur + len] & 255)) {\n\t\t\t\tthis$static._son[ptr1] = curMatch;\n\t\t\t\tptr1 = cyclicPos + 1;\n\t\t\t\tcurMatch = this$static._son[ptr1];\n\t\t\t\tlen1 = len;\n\t\t\t} else {\n\t\t\t\tthis$static._son[ptr0] = curMatch;\n\t\t\t\tptr0 = cyclicPos;\n\t\t\t\tcurMatch = this$static._son[ptr0];\n\t\t\t\tlen0 = len;\n\t\t\t}\n\t\t}\n\t\t$MovePos_0(this$static);\n\t\treturn offset;\n\t}\n\t\n\tfunction $Init_5(this$static) {\n\t\tvar i;\n\t\tthis$static._bufferOffset = 0;\n\t\tthis$static._pos = 0;\n\t\tthis$static._streamPos = 0;\n\t\tthis$static._streamEndWasReached = false;\n\t\t$ReadBlock(this$static);\n\t\tfor (i = 0; i < this$static._hashSizeSum; ++i) {\n\t\t\tthis$static._hash[i] = 0;\n\t\t}\n\t\tthis$static._cyclicBufferPos = 0;\n\t\t$ReduceOffsets(this$static, -1);\n\t}\n\t\n\tfunction $MovePos_0(this$static) {\n\t\tvar subValue;\n\t\tif (++this$static._cyclicBufferPos >= this$static._cyclicBufferSize) {\n\t\t\tthis$static._cyclicBufferPos = 0;\n\t\t}\n\t\t$MovePos_1(this$static);\n\t\tif (this$static._pos == 1073741823) {\n\t\t\tsubValue = this$static._pos - this$static._cyclicBufferSize;\n\t\t\t$NormalizeLinks(this$static._son, this$static._cyclicBufferSize * 2, subValue);\n\t\t\t$NormalizeLinks(this$static._hash, this$static._hashSizeSum, subValue);\n\t\t\t$ReduceOffsets(this$static, subValue);\n\t\t}\n\t}\n\t\n\tfunction $NormalizeLinks(items, numItems, subValue) {\n\t\tvar i, value;\n\t\tfor (i = 0; i < numItems; ++i) {\n\t\t\tvalue = items[i];\n\t\t\tif (value <= subValue) {\n\t\t\t\tvalue = 0;\n\t\t\t} else {\n\t\t\t\tvalue -= subValue;\n\t\t\t}\n\t\t\titems[i] = value;\n\t\t}\n\t}\n\t\n\tfunction $SetType(this$static, numHashBytes) {\n\t\tthis$static.HASH_ARRAY = numHashBytes > 2;\n\t\tif (this$static.HASH_ARRAY) {\n\t\t\tthis$static.kNumHashDirectBytes = 0;\n\t\t\tthis$static.kMinMatchCheck = 4;\n\t\t\tthis$static.kFixHashSize = 66560;\n\t\t} else {\n\t\t\tthis$static.kNumHashDirectBytes = 2;\n\t\t\tthis$static.kMinMatchCheck = 3;\n\t\t\tthis$static.kFixHashSize = 0;\n\t\t}\n\t}\n\t\n\tfunction $Skip(this$static, num) {\n\t\tvar count, cur, curMatch, cyclicPos, delta, hash2Value, hash3Value, hashValue, len, len0, len1, lenLimit, matchMinPos, pby1, ptr0, ptr1, temp;\n\t\tdo {\n\t\t\tif (this$static._pos + this$static._matchMaxLen <= this$static._streamPos) {\n\t\t\t\tlenLimit = this$static._matchMaxLen;\n\t\t\t} else {\n\t\t\t\tlenLimit = this$static._streamPos - this$static._pos;\n\t\t\t\tif (lenLimit < this$static.kMinMatchCheck) {\n\t\t\t\t\t$MovePos_0(this$static);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmatchMinPos = this$static._pos > this$static._cyclicBufferSize?this$static._pos - this$static._cyclicBufferSize:0;\n\t\t\tcur = this$static._bufferOffset + this$static._pos;\n\t\t\tif (this$static.HASH_ARRAY) {\n\t\t\t\ttemp = CrcTable[this$static._bufferBase[cur] & 255] ^ this$static._bufferBase[cur + 1] & 255;\n\t\t\t\thash2Value = temp & 1023;\n\t\t\t\tthis$static._hash[hash2Value] = this$static._pos;\n\t\t\t\ttemp ^= (this$static._bufferBase[cur + 2] & 255) << 8;\n\t\t\t\thash3Value = temp & 65535;\n\t\t\t\tthis$static._hash[1024 + hash3Value] = this$static._pos;\n\t\t\t\thashValue = (temp ^ CrcTable[this$static._bufferBase[cur + 3] & 255] << 5) & this$static._hashMask;\n\t\t\t} else {\n\t\t\t\thashValue = this$static._bufferBase[cur] & 255 ^ (this$static._bufferBase[cur + 1] & 255) << 8;\n\t\t\t}\n\t\t\tcurMatch = this$static._hash[this$static.kFixHashSize + hashValue];\n\t\t\tthis$static._hash[this$static.kFixHashSize + hashValue] = this$static._pos;\n\t\t\tptr0 = (this$static._cyclicBufferPos << 1) + 1;\n\t\t\tptr1 = this$static._cyclicBufferPos << 1;\n\t\t\tlen0 = len1 = this$static.kNumHashDirectBytes;\n\t\t\tcount = this$static._cutValue;\n\t\t\twhile (true) {\n\t\t\t\tif (curMatch <= matchMinPos || count-- == 0) {\n\t\t\t\t\tthis$static._son[ptr0] = this$static._son[ptr1] = 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelta = this$static._pos - curMatch;\n\t\t\t\tcyclicPos = (delta <= this$static._cyclicBufferPos?this$static._cyclicBufferPos - delta:this$static._cyclicBufferPos - delta + this$static._cyclicBufferSize) << 1;\n\t\t\t\tpby1 = this$static._bufferOffset + curMatch;\n\t\t\t\tlen = len0 < len1?len0:len1;\n\t\t\t\tif (this$static._bufferBase[pby1 + len] == this$static._bufferBase[cur + len]) {\n\t\t\t\t\twhile (++len != lenLimit) {\n\t\t\t\t\t\tif (this$static._bufferBase[pby1 + len] != this$static._bufferBase[cur + len]) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (len == lenLimit) {\n\t\t\t\t\t\tthis$static._son[ptr1] = this$static._son[cyclicPos];\n\t\t\t\t\t\tthis$static._son[ptr0] = this$static._son[cyclicPos + 1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((this$static._bufferBase[pby1 + len] & 255) < (this$static._bufferBase[cur + len] & 255)) {\n\t\t\t\t\tthis$static._son[ptr1] = curMatch;\n\t\t\t\t\tptr1 = cyclicPos + 1;\n\t\t\t\t\tcurMatch = this$static._son[ptr1];\n\t\t\t\t\tlen1 = len;\n\t\t\t\t} else {\n\t\t\t\t\tthis$static._son[ptr0] = curMatch;\n\t\t\t\t\tptr0 = cyclicPos;\n\t\t\t\t\tcurMatch = this$static._son[ptr0];\n\t\t\t\t\tlen0 = len;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$MovePos_0(this$static);\n\t\t}\n\t\twhile (--num != 0);\n\t}\n\t\n\tfunction getClass_39() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZ_BinTree_2_classLit;\n\t}\n\t\n\tfunction BinTree() {\n\t}\n\t\n\t_ = BinTree.prototype = new InWindow();\n\t_.getClass$ = getClass_39;\n\t_.typeId$ = 0;\n\t_.HASH_ARRAY = true;\n\t_._cutValue = 255;\n\t_._cyclicBufferPos = 0;\n\t_._cyclicBufferSize = 0;\n\t_._hash = null;\n\t_._hashMask = 0;\n\t_._hashSizeSum = 0;\n\t_._matchMaxLen = 0;\n\t_._son = null;\n\t_.kFixHashSize = 66560;\n\t_.kMinMatchCheck = 4;\n\t_.kNumHashDirectBytes = 0;\n\tvar CrcTable;\n\tfunction $CopyBlock(this$static, distance, len) {\n\t\tvar pos;\n\t\tpos = this$static._pos - distance - 1;\n\t\tif (pos < 0) {\n\t\t\tpos += this$static._windowSize;\n\t\t}\n\t\tfor (; len != 0; --len) {\n\t\t\tif (pos >= this$static._windowSize) {\n\t\t\t\tpos = 0;\n\t\t\t}\n\t\t\tthis$static._buffer[this$static._pos++] = this$static._buffer[pos++];\n\t\t\tif (this$static._pos >= this$static._windowSize) {\n\t\t\t\t$Flush_0(this$static);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $Create_5(this$static, windowSize) {\n\t\tif (this$static._buffer == null || this$static._windowSize != windowSize) {\n\t\t\tthis$static._buffer = initDim(_3B_classLit, 0, -1, windowSize, 1);\n\t\t}\n\t\tthis$static._windowSize = windowSize;\n\t\tthis$static._pos = 0;\n\t\tthis$static._streamPos = 0;\n\t}\n\t\n\tfunction $Flush_0(this$static) {\n\t\tvar size;\n\t\tsize = this$static._pos - this$static._streamPos;\n\t\tif (size == 0) {\n\t\t\treturn;\n\t\t}\n\t\t$write_0(this$static._stream, this$static._buffer, this$static._streamPos, size);\n\t\tif (this$static._pos >= this$static._windowSize) {\n\t\t\tthis$static._pos = 0;\n\t\t}\n\t\tthis$static._streamPos = this$static._pos;\n\t}\n\t\n\tfunction $GetByte(this$static, distance) {\n\t\tvar pos;\n\t\tpos = this$static._pos - distance - 1;\n\t\tif (pos < 0) {\n\t\t\tpos += this$static._windowSize;\n\t\t}\n\t\treturn this$static._buffer[pos];\n\t}\n\t\n\tfunction $Init_7(this$static, solid) {\n\t\tif (!solid) {\n\t\t\tthis$static._streamPos = 0;\n\t\t\tthis$static._pos = 0;\n\t\t}\n\t}\n\t\n\tfunction $PutByte(this$static, b) {\n\t\tthis$static._buffer[this$static._pos++] = b;\n\t\tif (this$static._pos >= this$static._windowSize) {\n\t\t\t$Flush_0(this$static);\n\t\t}\n\t}\n\t\n\tfunction $ReleaseStream(this$static) {\n\t\t$Flush_0(this$static);\n\t\tthis$static._stream = null;\n\t}\n\t\n\tfunction $SetStream_0(this$static, stream) {\n\t\t$Flush_0(this$static);\n\t\tthis$static._stream = null;\n\t\tthis$static._stream = stream;\n\t}\n\t\n\tfunction getClass_41() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZ_OutWindow_2_classLit;\n\t}\n\t\n\tfunction OutWindow() {\n\t}\n\t\n\t_ = OutWindow.prototype = new Object_0();\n\t_.getClass$ = getClass_41;\n\t_.typeId$ = 0;\n\t_._buffer = null;\n\t_._pos = 0;\n\t_._stream = null;\n\t_._streamPos = 0;\n\t_._windowSize = 0;\n\tfunction GetLenToPosState(len) {\n\t\tlen -= 2;\n\t\tif (len < 4) {\n\t\t\treturn len;\n\t\t}\n\t\treturn 3;\n\t}\n\t\n\tfunction StateUpdateChar(index) {\n\t\tif (index < 4) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (index < 10) {\n\t\t\treturn index - 3;\n\t\t}\n\t\treturn index - 6;\n\t}\n\t\n\tfunction $Chunker_0(this$static, encoder) {\n\t\tthis$static.encoder = encoder;\n\t\tthis$static.decoder = null;\n\t\tthis$static.alive = true;\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Chunker(this$static, decoder) {\n\t\tthis$static.decoder = decoder;\n\t\tthis$static.encoder = null;\n\t\tthis$static.alive = true;\n\t\treturn this$static;\n\t}\n\t\n\tfunction $processChunk(this$static) {\n\t\tvar exception;\n\t\tif (!this$static.alive) {\n\t\t\tthrow new IllegalStateException();\n\t\t}\n\t\texception = true;\n\t\ttry {\n\t\t\tif (this$static.encoder) {\n\t\t\t\t$processEncoderChunk(this$static);\n\t\t\t} else {\n\t\t\t\t$processDecoderChunk(this$static);\n\t\t\t}\n\t\t\texception = false;\n\t\t\treturn this$static.alive;\n\t\t} finally {\n\t\t\tif (exception) {\n\t\t\t\tthis$static.alive = false;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $processDecoderChunk(this$static) {\n\t\tvar result;\n\t\tresult = $CodeOneChunk(this$static.decoder);\n\t\tif (result == -1) {\n\t\t\tthrow $IOException(new IOException(), 'corrupted input');\n\t\t}\n\t\tthis$static.inBytesProcessed = N1_longLit;\n\t\tthis$static.outBytesProcessed = this$static.decoder.nowPos64;\n\t\tif (result == 1 || compare(this$static.decoder.outSize, P0_longLit) >= 0 && compare(this$static.decoder.nowPos64, this$static.decoder.outSize) >= 0) {\n\t\t\t$CodeFinish(this$static.decoder);\n\t\t\tthis$static.alive = false;\n\t\t}\n\t}\n\t\n\tfunction $processEncoderChunk(this$static) {\n\t\t$CodeOneBlock(this$static.encoder, this$static.encoder.processedInSize, this$static.encoder.processedOutSize, this$static.encoder.finished);\n\t\tthis$static.inBytesProcessed = this$static.encoder.processedInSize[0];\n\t\tif (this$static.encoder.finished[0]) {\n\t\t\t$ReleaseStreams(this$static.encoder);\n\t\t\tthis$static.alive = false;\n\t\t}\n\t}\n\t\n\tfunction getClass_28() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Chunker_2_classLit;\n\t}\n\t\n\tfunction Chunker() {\n\t}\n\t\n\t_ = Chunker.prototype = new Object_0();\n\t_.getClass$ = getClass_28;\n\t_.typeId$ = 0;\n\t_.alive = false;\n\t_.decoder = null;\n\t_.encoder = null;\n\tfunction $CodeFinish(this$static) {\n\t\t$Flush_0(this$static.m_OutWindow);\n\t\t$ReleaseStream(this$static.m_OutWindow);\n\t\tthis$static.m_RangeDecoder.Stream = null;\n\t}\n\t\n\tfunction $CodeInChunks(this$static, inStream, outStream, outSize) {\n\t\tthis$static.m_RangeDecoder.Stream = inStream;\n\t\t$SetStream_0(this$static.m_OutWindow, outStream);\n\t\t$Init_1(this$static);\n\t\tthis$static.state = 0;\n\t\tthis$static.rep0 = 0;\n\t\tthis$static.rep1 = 0;\n\t\tthis$static.rep2 = 0;\n\t\tthis$static.rep3 = 0;\n\t\tthis$static.outSize = outSize;\n\t\tthis$static.nowPos64 = P0_longLit;\n\t\tthis$static.prevByte = 0;\n\t\treturn $Chunker(new Chunker(), this$static);\n\t}\n\t\n\tfunction $CodeOneChunk(this$static) {\n\tvar decoder2, distance, len, numDirectBits, posSlot, posState;\n\tposState = lowBits_0(this$static.nowPos64) & this$static.m_PosStateMask;\n\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsMatchDecoders, (this$static.state << 4) + posState) == 0) {\n\t\tdecoder2 = $GetDecoder(this$static.m_LiteralDecoder, lowBits_0(this$static.nowPos64), this$static.prevByte);\n\t\tif (this$static.state < 7) {\n\t\tthis$static.prevByte = $DecodeNormal(decoder2, this$static.m_RangeDecoder);\n\t\t}\n\t\telse {\n\t\tthis$static.prevByte = $DecodeWithMatchByte(decoder2, this$static.m_RangeDecoder, $GetByte(this$static.m_OutWindow, this$static.rep0));\n\t\t}\n\t\t$PutByte(this$static.m_OutWindow, this$static.prevByte);\n\t\tthis$static.state = StateUpdateChar(this$static.state);\n\t\tthis$static.nowPos64 = add(this$static.nowPos64, P1_longLit);\n\t} else {\n\t\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsRepDecoders, this$static.state) == 1) {\n\t\t\tlen = 0;\n\t\t\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsRepG0Decoders, this$static.state) == 0) {\n\t\t\t\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsRep0LongDecoders, (this$static.state << 4) + posState) == 0) {\n\t\t\t\t\tthis$static.state = this$static.state < 7?9:11;\n\t\t\t\t\tlen = 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsRepG1Decoders, this$static.state) == 0) {\n\t\t\t\t\tdistance = this$static.rep1;\n\t\t\t\t} else {\n\t\t\t\t\tif ($DecodeBit(this$static.m_RangeDecoder, this$static.m_IsRepG2Decoders, this$static.state) == 0) {\n\t\t\t\t\t\tdistance = this$static.rep2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistance = this$static.rep3;\n\t\t\t\t\t\tthis$static.rep3 = this$static.rep2;\n\t\t\t\t\t}\n\t\t\t\t\tthis$static.rep2 = this$static.rep1;\n\t\t\t\t}\n\t\t\t\tthis$static.rep1 = this$static.rep0;\n\t\t\t\tthis$static.rep0 = distance;\n\t\t\t}\n\t\t\tif (len == 0) {\n\t\t\t\tlen = $Decode(this$static.m_RepLenDecoder, this$static.m_RangeDecoder, posState) + 2;\n\t\t\t\tthis$static.state = this$static.state < 7?8:11;\n\t\t\t}\n\t\t} else {\n\t\t\tthis$static.rep3 = this$static.rep2;\n\t\t\tthis$static.rep2 = this$static.rep1;\n\t\t\tthis$static.rep1 = this$static.rep0;\n\t\t\tlen = 2 + $Decode(this$static.m_LenDecoder, this$static.m_RangeDecoder, posState);\n\t\t\tthis$static.state = this$static.state < 7?7:10;\n\t\t\tposSlot = $Decode_0(this$static.m_PosSlotDecoder[GetLenToPosState(len)], this$static.m_RangeDecoder);\n\t\t\tif (posSlot >= 4) {\n\t\t\t\tnumDirectBits = (posSlot >> 1) - 1;\n\t\t\t\tthis$static.rep0 = (2 | posSlot & 1) << numDirectBits;\n\t\t\t\tif (posSlot < 14) {\n\t\t\t\t\tthis$static.rep0 += ReverseDecode(this$static.m_PosDecoders, this$static.rep0 - posSlot - 1, this$static.m_RangeDecoder, numDirectBits);\n\t\t\t\t} else {\n\t\t\t\t\tthis$static.rep0 += $DecodeDirectBits(this$static.m_RangeDecoder, numDirectBits - 4) << 4;\n\t\t\t\t\tthis$static.rep0 += $ReverseDecode(this$static.m_PosAlignDecoder, this$static.m_RangeDecoder);\n\t\t\t\t\tif (this$static.rep0 < 0) {\n\t\t\t\t\t\tif (this$static.rep0 == -1) {\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else \n\t\t\t\tthis$static.rep0 = posSlot;\n\t\t\t}\n\t\t\tif (compare(fromInt(this$static.rep0), this$static.nowPos64) >= 0 || this$static.rep0 >= this$static.m_DictionarySizeCheck) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\t$CopyBlock(this$static.m_OutWindow, this$static.rep0, len);\n\t\t\tthis$static.nowPos64 = add(this$static.nowPos64, fromInt(len));\n\t\t\tthis$static.prevByte = $GetByte(this$static.m_OutWindow, 0);\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\tfunction $Decoder(this$static) {\n\t\tvar i;\n\t\tthis$static.m_OutWindow = new OutWindow();\n\t\tthis$static.m_RangeDecoder = new Decoder_0();\n\t\tthis$static.m_IsMatchDecoders = initDim(_3S_classLit, 0, -1, 192, 1);\n\t\tthis$static.m_IsRepDecoders = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static.m_IsRepG0Decoders = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static.m_IsRepG1Decoders = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static.m_IsRepG2Decoders = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static.m_IsRep0LongDecoders = initDim(_3S_classLit, 0, -1, 192, 1);\n\t\tthis$static.m_PosSlotDecoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit, 0, 7, 4, 0);\n\t\tthis$static.m_PosDecoders = initDim(_3S_classLit, 0, -1, 114, 1);\n\t\tthis$static.m_PosAlignDecoder = $BitTreeDecoder(new BitTreeDecoder(), 4);\n\t\tthis$static.m_LenDecoder = $Decoder$LenDecoder(new Decoder$LenDecoder());\n\t\tthis$static.m_RepLenDecoder = $Decoder$LenDecoder(new Decoder$LenDecoder());\n\t\tthis$static.m_LiteralDecoder = new Decoder$LiteralDecoder();\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tthis$static.m_PosSlotDecoder[i] = $BitTreeDecoder(new BitTreeDecoder(), 6);\n\t\t}\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Init_1(this$static) {\n\t\tvar i;\n\t\t$Init_7(this$static.m_OutWindow, false);\n\t\tInitBitModels(this$static.m_IsMatchDecoders);\n\t\tInitBitModels(this$static.m_IsRep0LongDecoders);\n\t\tInitBitModels(this$static.m_IsRepDecoders);\n\t\tInitBitModels(this$static.m_IsRepG0Decoders);\n\t\tInitBitModels(this$static.m_IsRepG1Decoders);\n\t\tInitBitModels(this$static.m_IsRepG2Decoders);\n\t\tInitBitModels(this$static.m_PosDecoders);\n\t\t$Init_0(this$static.m_LiteralDecoder);\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tInitBitModels(this$static.m_PosSlotDecoder[i].Models);\n\t\t}\n\t\t$Init(this$static.m_LenDecoder);\n\t\t$Init(this$static.m_RepLenDecoder);\n\t\tInitBitModels(this$static.m_PosAlignDecoder.Models);\n\t\t$Init_8(this$static.m_RangeDecoder);\n\t}\n\t\n\tfunction $SetDecoderProperties(this$static, properties) {\n\t\tvar dictionarySize, i, lc, lp, pb, remainder, val;\n\t\tif (properties.length < 5)\n\t\t\treturn false;\n\t\tval = properties[0] & 255;\n\t\tlc = val % 9;\n\t\tremainder = ~~(val / 9);\n\t\tlp = remainder % 5;\n\t\tpb = ~~(remainder / 5);\n\t\tdictionarySize = 0;\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tdictionarySize += (properties[1 + i] & 255) << i * 8;\n\t\t}\n\t\tif (!$SetLcLpPb(this$static, lc, lp, pb)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn $SetDictionarySize(this$static, dictionarySize);\n\t}\n\t\n\tfunction $SetDictionarySize(this$static, dictionarySize) {\n\t\tif (dictionarySize < 0) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this$static.m_DictionarySize != dictionarySize) {\n\t\t\tthis$static.m_DictionarySize = dictionarySize;\n\t\t\tthis$static.m_DictionarySizeCheck = max(this$static.m_DictionarySize, 1);\n\t\t\t$Create_5(this$static.m_OutWindow, max(this$static.m_DictionarySizeCheck, 4096));\n\t\t}\n\t\treturn true;\n\t}\n\t\n\tfunction $SetLcLpPb(this$static, lc, lp, pb) {\n\t\tvar numPosStates;\n\t\tif (lc > 8 || lp > 4 || pb > 4) {\n\t\t\treturn false;\n\t\t}\n\t\t$Create_0(this$static.m_LiteralDecoder, lp, lc);\n\t\tnumPosStates = 1 << pb;\n\t\t$Create(this$static.m_LenDecoder, numPosStates);\n\t\t$Create(this$static.m_RepLenDecoder, numPosStates);\n\t\tthis$static.m_PosStateMask = numPosStates - 1;\n\t\treturn true;\n\t}\n\t\n\tfunction getClass_32() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder_2_classLit;\n\t}\n\t\n\tfunction Decoder() {\n\t}\n\t\n\t_ = Decoder.prototype = new Object_0();\n\t_.getClass$ = getClass_32;\n\t_.typeId$ = 0;\n\t_.m_DictionarySize = -1;\n\t_.m_DictionarySizeCheck = -1;\n\t_.m_PosStateMask = 0;\n\t_.nowPos64 = P0_longLit;\n\t_.outSize = P0_longLit;\n\t_.prevByte = 0;\n\t_.rep0 = 0;\n\t_.rep1 = 0;\n\t_.rep2 = 0;\n\t_.rep3 = 0;\n\t_.state = 0;\n\tfunction $Create(this$static, numPosStates) {\n\t\tfor (; this$static.m_NumPosStates < numPosStates; ++this$static.m_NumPosStates) {\n\t\t\tthis$static.m_LowCoder[this$static.m_NumPosStates] = $BitTreeDecoder(new BitTreeDecoder(), 3);\n\t\t\tthis$static.m_MidCoder[this$static.m_NumPosStates] = $BitTreeDecoder(new BitTreeDecoder(), 3);\n\t\t}\n\t}\n\t\n\tfunction $Decode(this$static, rangeDecoder, posState) {\n\t\tvar symbol;\n\t\tif ($DecodeBit(rangeDecoder, this$static.m_Choice, 0) == 0) {\n\t\t\treturn $Decode_0(this$static.m_LowCoder[posState], rangeDecoder);\n\t\t}\n\t\tsymbol = 8;\n\t\tif ($DecodeBit(rangeDecoder, this$static.m_Choice, 1) == 0) {\n\t\t\tsymbol += $Decode_0(this$static.m_MidCoder[posState], rangeDecoder);\n\t\t} else {\n\t\t\tsymbol += 8 + $Decode_0(this$static.m_HighCoder, rangeDecoder);\n\t\t}\n\t\treturn symbol;\n\t}\n\t\n\tfunction $Decoder$LenDecoder(this$static) {\n\t\tthis$static.m_Choice = initDim(_3S_classLit, 0, -1, 2, 1);\n\t\tthis$static.m_LowCoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit, 0, 7, 16, 0);\n\t\tthis$static.m_MidCoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit, 0, 7, 16, 0);\n\t\tthis$static.m_HighCoder = $BitTreeDecoder(new BitTreeDecoder(), 8);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Init(this$static) {\n\t\tvar posState;\n\t\tInitBitModels(this$static.m_Choice);\n\t\tfor (posState = 0; posState < this$static.m_NumPosStates; ++posState) {\n\t\t\tInitBitModels(this$static.m_LowCoder[posState].Models);\n\t\t\tInitBitModels(this$static.m_MidCoder[posState].Models);\n\t\t}\n\t\tInitBitModels(this$static.m_HighCoder.Models);\n\t}\n\t\n\tfunction getClass_29() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LenDecoder_2_classLit;\n\t}\n\t\n\tfunction Decoder$LenDecoder() {\n\t}\n\t\n\t_ = Decoder$LenDecoder.prototype = new Object_0();\n\t_.getClass$ = getClass_29;\n\t_.typeId$ = 0;\n\t_.m_NumPosStates = 0;\n\tfunction $Create_0(this$static, numPosBits, numPrevBits) {\n\tvar i, numStates;\n\tif (this$static.m_Coders != null && this$static.m_NumPrevBits == numPrevBits && this$static.m_NumPosBits == numPosBits)\n\t\treturn;\n\tthis$static.m_NumPosBits = numPosBits;\n\tthis$static.m_PosMask = (1 << numPosBits) - 1;\n\tthis$static.m_NumPrevBits = numPrevBits;\n\tnumStates = 1 << this$static.m_NumPrevBits + this$static.m_NumPosBits;\n\tthis$static.m_Coders = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder$Decoder2_2_classLit, 0, 4, numStates, 0);\n\tfor (i = 0; i < numStates; ++i)\n\t\tthis$static.m_Coders[i] = $Decoder$LiteralDecoder$Decoder2(new Decoder$LiteralDecoder$Decoder2());\n\t}\n\t\n\tfunction $GetDecoder(this$static, pos, prevByte) {\n\t\treturn this$static.m_Coders[((pos & this$static.m_PosMask) << this$static.m_NumPrevBits) + ((prevByte & 255) >>> 8 - this$static.m_NumPrevBits)];\n\t}\n\t\n\tfunction $Init_0(this$static) {\n\t\tvar i, numStates;\n\t\tnumStates = 1 << this$static.m_NumPrevBits + this$static.m_NumPosBits;\n\t\tfor (i = 0; i < numStates; ++i) {\n\t\t\tInitBitModels(this$static.m_Coders[i].m_Decoders);\n\t\t}\n\t}\n\t\n\tfunction getClass_31() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder_2_classLit;\n\t}\n\t\n\tfunction Decoder$LiteralDecoder() {\n\t}\n\t\n\t_ = Decoder$LiteralDecoder.prototype = new Object_0();\n\t_.getClass$ = getClass_31;\n\t_.typeId$ = 0;\n\t_.m_Coders = null;\n\t_.m_NumPosBits = 0;\n\t_.m_NumPrevBits = 0;\n\t_.m_PosMask = 0;\n\tfunction $DecodeNormal(this$static, rangeDecoder) {\n\t\tvar symbol;\n\t\tsymbol = 1;\n\t\tdo {\n\t\t\tsymbol = symbol << 1 | $DecodeBit(rangeDecoder, this$static.m_Decoders, symbol);\n\t\t} while (symbol < 256);\n\t\treturn symbol << 24 >> 24;\n\t}\n\t\n\tfunction $DecodeWithMatchByte(this$static, rangeDecoder, matchByte) {\n\t\tvar bit, matchBit, symbol;\n\t\tsymbol = 1;\n\t\tdo {\n\t\t\tmatchBit = matchByte >> 7 & 1;\n\t\t\tmatchByte <<= 1;\n\t\t\tbit = $DecodeBit(rangeDecoder, this$static.m_Decoders, (1 + matchBit << 8) + symbol);\n\t\t\tsymbol = symbol << 1 | bit;\n\t\t\tif (matchBit != bit) {\n\t\t\t\twhile (symbol < 256) {\n\t\t\t\t\tsymbol = symbol << 1 | $DecodeBit(rangeDecoder, this$static.m_Decoders, symbol);\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\t}\n\t\t} while (symbol < 256);\n\t\treturn symbol << 24 >> 24;\n\t}\n\t\n\tfunction $Decoder$LiteralDecoder$Decoder2(this$static) {\n\t\tthis$static.m_Decoders = initDim(_3S_classLit, 0, -1, 768, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction getClass_30() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder$Decoder2_2_classLit;\n\t}\n\t\n\tfunction Decoder$LiteralDecoder$Decoder2() {\n\t}\n\t\n\t_ = Decoder$LiteralDecoder$Decoder2.prototype = new Object_0();\n\t_.getClass$ = getClass_30;\n\t_.typeId$ = 17;\n\tfunction $clinit_59() {\n\t\t$clinit_59 = nullMethod;\n\t\tvar c, j, k, slotFast;\n\t\tg_FastPos = initDim(_3B_classLit, 0, -1, 2048, 1);\n\t\tc = 2;\n\t\tg_FastPos[0] = 0;\n\t\tg_FastPos[1] = 1;\n\t\tfor (slotFast = 2; slotFast < 22; ++slotFast) {\n\t\t\tk = 1 << (slotFast >> 1) - 1;\n\t\t\tfor (j = 0; j < k; ++j , ++c)\n\t\t\tg_FastPos[c] = slotFast << 24 >> 24;\n\t\t}\n\t}\n\t\n\tfunction $Backward(this$static, cur) {\n\t\tvar backCur, backMem, posMem, posPrev;\n\t\tthis$static._optimumEndIndex = cur;\n\t\tposMem = this$static._optimum[cur].PosPrev;\n\t\tbackMem = this$static._optimum[cur].BackPrev;\n\t\tdo {\n\t\t\tif (this$static._optimum[cur].Prev1IsChar) {\n\t\t\t\t$MakeAsChar(this$static._optimum[posMem]);\n\t\t\t\tthis$static._optimum[posMem].PosPrev = posMem - 1;\n\t\t\t\tif (this$static._optimum[cur].Prev2) {\n\t\t\t\t\tthis$static._optimum[posMem - 1].Prev1IsChar = false;\n\t\t\t\t\tthis$static._optimum[posMem - 1].PosPrev = this$static._optimum[cur].PosPrev2;\n\t\t\t\t\tthis$static._optimum[posMem - 1].BackPrev = this$static._optimum[cur].BackPrev2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tposPrev = posMem;\n\t\t\tbackCur = backMem;\n\t\t\tbackMem = this$static._optimum[posPrev].BackPrev;\n\t\t\tposMem = this$static._optimum[posPrev].PosPrev;\n\t\t\tthis$static._optimum[posPrev].BackPrev = backCur;\n\t\t\tthis$static._optimum[posPrev].PosPrev = cur;\n\t\t\tcur = posPrev;\n\t\t} while (cur > 0);\n\t\tthis$static.backRes = this$static._optimum[0].BackPrev;\n\t\tthis$static._optimumCurrentIndex = this$static._optimum[0].PosPrev;\n\t\treturn this$static._optimumCurrentIndex;\n\t}\n\t\n\tfunction $BaseInit(this$static) {\n\t\tvar i;\n\t\tthis$static._state = 0;\n\t\tthis$static._previousByte = 0;\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tthis$static._repDistances[i] = 0;\n\t\t}\n\t}\n\t\n\tfunction $CodeOneBlock(this$static, inSize, outSize, finished) {\n\t\tvar baseVal, complexState, curByte, distance, footerBits, i, len, lenToPosState, matchByte, pos, posReduced, posSlot, posState, progressPosValuePrev, subCoder;\n\t\tinSize[0] = P0_longLit;\n\t\toutSize[0] = P0_longLit;\n\t\tfinished[0] = true;\n\t\tif (this$static._inStream) {\n\t\t\tthis$static._matchFinder._stream = this$static._inStream;\n\t\t\t$Init_5(this$static._matchFinder);\n\t\t\tthis$static._needReleaseMFStream = true;\n\t\t\tthis$static._inStream = null;\n\t\t}\n\t\tif (this$static._finished) {\n\t\t\treturn;\n\t\t}\n\t\tthis$static._finished = true;\n\t\tprogressPosValuePrev = this$static.nowPos64;\n\t\tif (eq(this$static.nowPos64, P0_longLit)) {\n\t\t\tif ($GetNumAvailableBytes(this$static._matchFinder) == 0) {\n\t\t\t\t$Flush(this$static, lowBits_0(this$static.nowPos64));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$ReadMatchDistances(this$static);\n\t\t\tposState = lowBits_0(this$static.nowPos64) & this$static._posStateMask;\n\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isMatch, (this$static._state << 4) + posState, 0);\n\t\t\tthis$static._state = StateUpdateChar(this$static._state);\n\t\t\tcurByte = $GetIndexByte(this$static._matchFinder, -this$static._additionalOffset);\n\t\t\t$Encode_1($GetSubCoder(this$static._literalEncoder, lowBits_0(this$static.nowPos64), this$static._previousByte), this$static._rangeEncoder, curByte);\n\t\t\tthis$static._previousByte = curByte;\n\t\t\t--this$static._additionalOffset;\n\t\t\tthis$static.nowPos64 = add(this$static.nowPos64, P1_longLit);\n\t\t}\n\t\tif ($GetNumAvailableBytes(this$static._matchFinder) == 0) {\n\t\t\t$Flush(this$static, lowBits_0(this$static.nowPos64));\n\t\t\treturn;\n\t\t}\n\t\twhile (true) {\n\t\t\tlen = $GetOptimum(this$static, lowBits_0(this$static.nowPos64));\n\t\t\tpos = this$static.backRes;\n\t\t\tposState = lowBits_0(this$static.nowPos64) & this$static._posStateMask;\n\t\t\tcomplexState = (this$static._state << 4) + posState;\n\t\t\tif (len == 1 && pos == -1) {\n\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isMatch, complexState, 0);\n\t\t\t\tcurByte = $GetIndexByte(this$static._matchFinder, -this$static._additionalOffset);\n\t\t\t\tsubCoder = $GetSubCoder(this$static._literalEncoder, lowBits_0(this$static.nowPos64), this$static._previousByte);\n\t\t\t\tif (this$static._state < 7) {\n\t\t\t\t\t$Encode_1(subCoder, this$static._rangeEncoder, curByte);\n\t\t\t\t} else {\n\t\t\t\t\tmatchByte = $GetIndexByte(this$static._matchFinder, -this$static._repDistances[0] - 1 - this$static._additionalOffset);\n\t\t\t\t\t$EncodeMatched(subCoder, this$static._rangeEncoder, matchByte, curByte);\n\t\t\t\t}\n\t\t\t\tthis$static._previousByte = curByte;\n\t\t\t\tthis$static._state = StateUpdateChar(this$static._state);\n\t\t\t} else {\n\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isMatch, complexState, 1);\n\t\t\t\tif (pos < 4) {\n\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRep, this$static._state, 1);\n\t\t\t\t\tif (pos == 0) {\n\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRepG0, this$static._state, 0);\n\t\t\t\t\t\tif (len == 1) {\n\t\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRep0Long, complexState, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRep0Long, complexState, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRepG0, this$static._state, 1);\n\t\t\t\t\t\tif (pos == 1) {\n\t\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRepG1, this$static._state, 0);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRepG1, this$static._state, 1);\n\t\t\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRepG2, this$static._state, pos - 2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (len == 1) {\n\t\t\t\t\t\tthis$static._state = this$static._state < 7?9:11;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$Encode_0(this$static._repMatchLenEncoder, this$static._rangeEncoder, len - 2, posState);\n\t\t\t\t\t\tthis$static._state = this$static._state < 7?8:11;\n\t\t\t\t\t}\n\t\t\t\t\tdistance = this$static._repDistances[pos];\n\t\t\t\t\tif (pos != 0) {\n\t\t\t\t\t\tfor (i = pos; i >= 1; --i) {\n\t\t\t\t\t\t\tthis$static._repDistances[i] = this$static._repDistances[i - 1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis$static._repDistances[0] = distance;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$Encode_3(this$static._rangeEncoder, this$static._isRep, this$static._state, 0);\n\t\t\t\t\tthis$static._state = this$static._state < 7?7:10;\n\t\t\t\t\t$Encode_0(this$static._lenEncoder, this$static._rangeEncoder, len - 2, posState);\n\t\t\t\t\tpos -= 4;\n\t\t\t\t\tposSlot = GetPosSlot(pos);\n\t\t\t\t\tlenToPosState = GetLenToPosState(len);\n\t\t\t\t\t$Encode_2(this$static._posSlotEncoder[lenToPosState], this$static._rangeEncoder, posSlot);\n\t\t\t\t\tif (posSlot >= 4) {\n\t\t\t\t\t\tfooterBits = (posSlot >> 1) - 1;\n\t\t\t\t\t\tbaseVal = (2 | posSlot & 1) << footerBits;\n\t\t\t\t\t\tposReduced = pos - baseVal;\n\t\t\t\t\t\tif (posSlot < 14) {\n\t\t\t\t\t\t\tReverseEncode(this$static._posEncoders, baseVal - posSlot - 1, this$static._rangeEncoder, footerBits, posReduced);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$EncodeDirectBits(this$static._rangeEncoder, posReduced >> 4, footerBits - 4);\n\t\t\t\t\t\t\t$ReverseEncode(this$static._posAlignEncoder, this$static._rangeEncoder, posReduced & 15);\n\t\t\t\t\t\t\t++this$static._alignPriceCount;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdistance = pos;\n\t\t\t\t\tfor (i = 3; i >= 1; --i) {\n\t\t\t\t\t\tthis$static._repDistances[i] = this$static._repDistances[i - 1];\n\t\t\t\t\t}\n\t\t\t\t\tthis$static._repDistances[0] = distance;\n\t\t\t\t\t++this$static._matchPriceCount;\n\t\t\t\t}\n\t\t\t\tthis$static._previousByte = $GetIndexByte(this$static._matchFinder, len - 1 - this$static._additionalOffset);\n\t\t\t}\n\t\t\tthis$static._additionalOffset -= len;\n\t\t\tthis$static.nowPos64 = add(this$static.nowPos64, fromInt(len));\n\t\t\tif (this$static._additionalOffset == 0) {\n\t\t\t\tif (this$static._matchPriceCount >= 128) {\n\t\t\t\t\t$FillDistancesPrices(this$static);\n\t\t\t\t}\n\t\t\t\tif (this$static._alignPriceCount >= 16) {\n\t\t\t\t\t$FillAlignPrices(this$static);\n\t\t\t\t}\n\t\t\t\tinSize[0] = this$static.nowPos64;\n\t\t\t\toutSize[0] = $GetProcessedSizeAdd(this$static._rangeEncoder);\n\t\t\t\tif ($GetNumAvailableBytes(this$static._matchFinder) == 0) {\n\t\t\t\t\t$Flush(this$static, lowBits_0(this$static.nowPos64));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (compare(sub(this$static.nowPos64, progressPosValuePrev), P1000_longLit) >= 0) {\n\t\t\t\t\tthis$static._finished = false;\n\t\t\t\t\tfinished[0] = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $Create_2(this$static) {\n\t\tvar bt, numHashBytes;\n\t\tif (!this$static._matchFinder) {\n\t\t\tbt = ($clinit_60() , new BinTree());\n\t\t\tnumHashBytes = 4;\n\t\t\tif (this$static._matchFinderType == 0) {\n\t\t\t\tnumHashBytes = 2;\n\t\t\t}\n\t\t\t$SetType(bt, numHashBytes);\n\t\t\tthis$static._matchFinder = bt;\n\t\t}\n\t\t$Create_1(this$static._literalEncoder, this$static._numLiteralPosStateBits, this$static._numLiteralContextBits);\n\t\tif (this$static._dictionarySize == this$static._dictionarySizePrev && this$static._numFastBytesPrev == this$static._numFastBytes) {\n\t\t\treturn;\n\t\t}\n\t\t$Create_3(this$static._matchFinder, this$static._dictionarySize, 4096, this$static._numFastBytes, 274);\n\t\tthis$static._dictionarySizePrev = this$static._dictionarySize;\n\t\tthis$static._numFastBytesPrev = this$static._numFastBytes;\n\t}\n\t\n\tfunction $Encoder(this$static) {\n\t\tvar i;\n\t\t$clinit_59();\n\t\tthis$static._repDistances = initDim(_3I_classLit, 0, -1, 4, 1);\n\t\tthis$static._optimum = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$Optimal_2_classLit, 0, 6, 4096, 0);\n\t\tthis$static._rangeEncoder = ($clinit_66() , new Encoder_0());\n\t\tthis$static._isMatch = initDim(_3S_classLit, 0, -1, 192, 1);\n\t\tthis$static._isRep = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static._isRepG0 = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static._isRepG1 = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static._isRepG2 = initDim(_3S_classLit, 0, -1, 12, 1);\n\t\tthis$static._isRep0Long = initDim(_3S_classLit, 0, -1, 192, 1);\n\t\tthis$static._posSlotEncoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit, 0, 8, 4, 0);\n\t\tthis$static._posEncoders = initDim(_3S_classLit, 0, -1, 114, 1);\n\t\tthis$static._posAlignEncoder = $BitTreeEncoder(new BitTreeEncoder(), 4);\n\t\tthis$static._lenEncoder = $Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder());\n\t\tthis$static._repMatchLenEncoder = $Encoder$LenPriceTableEncoder(new Encoder$LenPriceTableEncoder());\n\t\tthis$static._literalEncoder = new Encoder$LiteralEncoder();\n\t\tthis$static._matchDistances = initDim(_3I_classLit, 0, -1, 548, 1);\n\t\tthis$static._posSlotPrices = initDim(_3I_classLit, 0, -1, 256, 1);\n\t\tthis$static._distancesPrices = initDim(_3I_classLit, 0, -1, 512, 1);\n\t\tthis$static._alignPrices = initDim(_3I_classLit, 0, -1, 16, 1);\n\t\tthis$static.reps = initDim(_3I_classLit, 0, -1, 4, 1);\n\t\tthis$static.repLens = initDim(_3I_classLit, 0, -1, 4, 1);\n\t\tthis$static.processedInSize = initDim(_3J_classLit, 0, -1, 1, 3);\n\t\tthis$static.processedOutSize = initDim(_3J_classLit, 0, -1, 1, 3);\n\t\tthis$static.finished = initDim(_3Z_classLit, 0, -1, 1, 2);\n\t\tthis$static.properties = initDim(_3B_classLit, 0, -1, 5, 1);\n\t\tthis$static.tempPrices = initDim(_3I_classLit, 0, -1, 128, 1);\n\t\tfor (i = 0; i < 4096; ++i) {\n\t\t\tthis$static._optimum[i] = new Encoder$Optimal();\n\t\t}\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tthis$static._posSlotEncoder[i] = $BitTreeEncoder(new BitTreeEncoder(), 6);\n\t\t}\n\t\treturn this$static;\n\t}\n\t\n\tfunction $FillAlignPrices(this$static) {\n\t\tvar i;\n\t\tfor (i = 0; i < 16; ++i) {\n\t\t\tthis$static._alignPrices[i] = $ReverseGetPrice(this$static._posAlignEncoder, i);\n\t\t}\n\t\tthis$static._alignPriceCount = 0;\n\t}\n\t\n\tfunction $FillDistancesPrices(this$static) {\n\t\tvar baseVal, encoder, footerBits, i, lenToPosState, posSlot, st, st2;\n\t\tfor (i = 4; i < 128; ++i) {\n\t\t\tposSlot = GetPosSlot(i);\n\t\t\tfooterBits = (posSlot >> 1) - 1;\n\t\t\tbaseVal = (2 | posSlot & 1) << footerBits;\n\t\t\tthis$static.tempPrices[i] = ReverseGetPrice(this$static._posEncoders, baseVal - posSlot - 1, footerBits, i - baseVal);\n\t\t}\n\t\tfor (lenToPosState = 0; lenToPosState < 4; ++lenToPosState) {\n\t\t\tencoder = this$static._posSlotEncoder[lenToPosState];\n\t\t\tst = lenToPosState << 6;\n\t\t\tfor (posSlot = 0; posSlot < this$static._distTableSize; ++posSlot) {\n\t\t\t\tthis$static._posSlotPrices[st + posSlot] = $GetPrice_1(encoder, posSlot);\n\t\t\t}\n\t\t\tfor (posSlot = 14; posSlot < this$static._distTableSize; ++posSlot) {\n\t\t\t\tthis$static._posSlotPrices[st + posSlot] += (posSlot >> 1) - 1 - 4 << 6;\n\t\t\t}\n\t\t\tst2 = lenToPosState * 128;\n\t\t\tfor (i = 0; i < 4; ++i) {\n\t\t\t\tthis$static._distancesPrices[st2 + i] = this$static._posSlotPrices[st + i];\n\t\t\t}\n\t\t\tfor (; i < 128; ++i) {\n\t\t\t\tthis$static._distancesPrices[st2 + i] = this$static._posSlotPrices[st + GetPosSlot(i)] + this$static.tempPrices[i];\n\t\t\t}\n\t\t}\n\t\tthis$static._matchPriceCount = 0;\n\t}\n\t\n\tfunction $Flush(this$static, nowPos) {\n\t\t$ReleaseMFStream(this$static);\n\t\t$WriteEndMarker(this$static, nowPos & this$static._posStateMask);\n\t\t$FlushData(this$static._rangeEncoder);\n\t}\n\t\n\tfunction $GetOptimum(this$static, position) {\n\t\tvar cur, curAnd1Price, curAndLenCharPrice, curAndLenPrice, curBack, curPrice, currentByte, distance, i, len, lenEnd, lenMain, lenRes, lenTest, lenTest2, lenTestTemp, matchByte, matchPrice, newLen, nextIsChar, nextMatchPrice, nextOptimum, nextRepMatchPrice, normalMatchPrice, numAvailableBytes, numAvailableBytesFull, numDistancePairs, offs, offset, opt, optimum, pos, posPrev, posState, posStateNext, price_4, repIndex, repLen, repMatchPrice, repMaxIndex, shortRepPrice, startLen, state, state2, t, price, price_0, price_1, price_2, price_3;\n\t\tif (this$static._optimumEndIndex != this$static._optimumCurrentIndex) {\n\t\t\tlenRes = this$static._optimum[this$static._optimumCurrentIndex].PosPrev - this$static._optimumCurrentIndex;\n\t\t\tthis$static.backRes = this$static._optimum[this$static._optimumCurrentIndex].BackPrev;\n\t\t\tthis$static._optimumCurrentIndex = this$static._optimum[this$static._optimumCurrentIndex].PosPrev;\n\t\t\treturn lenRes;\n\t\t}\n\t\tthis$static._optimumCurrentIndex = this$static._optimumEndIndex = 0;\n\t\tif (this$static._longestMatchWasFound) {\n\t\t\tlenMain = this$static._longestMatchLength;\n\t\t\tthis$static._longestMatchWasFound = false;\n\t\t} else {\n\t\t\tlenMain = $ReadMatchDistances(this$static);\n\t\t}\n\t\tnumDistancePairs = this$static._numDistancePairs;\n\t\tnumAvailableBytes = $GetNumAvailableBytes(this$static._matchFinder) + 1;\n\t\tif (numAvailableBytes < 2) {\n\t\t\tthis$static.backRes = -1;\n\t\t\treturn 1;\n\t\t}\n\t\tif (numAvailableBytes > 273) {\n\t\t\tnumAvailableBytes = 273;\n\t\t}\n\t\trepMaxIndex = 0;\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tthis$static.reps[i] = this$static._repDistances[i];\n\t\t\tthis$static.repLens[i] = $GetMatchLen(this$static._matchFinder, -1, this$static.reps[i], 273);\n\t\t\tif (this$static.repLens[i] > this$static.repLens[repMaxIndex]) {\n\t\t\t\trepMaxIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (this$static.repLens[repMaxIndex] >= this$static._numFastBytes) {\n\t\t\tthis$static.backRes = repMaxIndex;\n\t\t\tlenRes = this$static.repLens[repMaxIndex];\n\t\t\t$MovePos(this$static, lenRes - 1);\n\t\t\treturn lenRes;\n\t\t}\n\t\tif (lenMain >= this$static._numFastBytes) {\n\t\t\tthis$static.backRes = this$static._matchDistances[numDistancePairs - 1] + 4;\n\t\t\t$MovePos(this$static, lenMain - 1);\n\t\t\treturn lenMain;\n\t\t}\n\t\tcurrentByte = $GetIndexByte(this$static._matchFinder, -1);\n\t\tmatchByte = $GetIndexByte(this$static._matchFinder, -this$static._repDistances[0] - 1 - 1);\n\t\tif (lenMain < 2 && currentByte != matchByte && this$static.repLens[repMaxIndex] < 2) {\n\t\t\tthis$static.backRes = -1;\n\t\t\treturn 1;\n\t\t}\n\t\tthis$static._optimum[0].State = this$static._state;\n\t\tposState = position & this$static._posStateMask;\n\t\tthis$static._optimum[1].Price = ($clinit_66() , ProbPrices[this$static._isMatch[(this$static._state << 4) + posState] >>> 2]) + $GetPrice_0($GetSubCoder(this$static._literalEncoder, position, this$static._previousByte), this$static._state >= 7, matchByte, currentByte);\n\t\t$MakeAsChar(this$static._optimum[1]);\n\t\tmatchPrice = ProbPrices[2048 - this$static._isMatch[(this$static._state << 4) + posState] >>> 2];\n\t\trepMatchPrice = matchPrice + ProbPrices[2048 - this$static._isRep[this$static._state] >>> 2];\n\t\tif (matchByte == currentByte) {\n\t\t\tshortRepPrice = repMatchPrice + $GetRepLen1Price(this$static, this$static._state, posState);\n\t\t\tif (shortRepPrice < this$static._optimum[1].Price) {\n\t\t\t\tthis$static._optimum[1].Price = shortRepPrice;\n\t\t\t\t$MakeAsShortRep(this$static._optimum[1]);\n\t\t\t}\n\t\t}\n\t\tlenEnd = lenMain >= this$static.repLens[repMaxIndex]?lenMain:this$static.repLens[repMaxIndex];\n\t\tif (lenEnd < 2) {\n\t\t\tthis$static.backRes = this$static._optimum[1].BackPrev;\n\t\t\treturn 1;\n\t\t}\n\t\tthis$static._optimum[1].PosPrev = 0;\n\t\tthis$static._optimum[0].Backs0 = this$static.reps[0];\n\t\tthis$static._optimum[0].Backs1 = this$static.reps[1];\n\t\tthis$static._optimum[0].Backs2 = this$static.reps[2];\n\t\tthis$static._optimum[0].Backs3 = this$static.reps[3];\n\t\tlen = lenEnd;\n\t\tdo {\n\t\t\tthis$static._optimum[len--].Price = 268435455;\n\t\t} while (len >= 2);\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\trepLen = this$static.repLens[i];\n\t\t\tif (repLen < 2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tprice_4 = repMatchPrice + $GetPureRepPrice(this$static, i, this$static._state, posState);\n\t\t\tdo {\n\t\t\t\tcurAndLenPrice = price_4 + $GetPrice(this$static._repMatchLenEncoder, repLen - 2, posState);\n\t\t\t\toptimum = this$static._optimum[repLen];\n\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\toptimum.PosPrev = 0;\n\t\t\t\t\toptimum.BackPrev = i;\n\t\t\t\t\toptimum.Prev1IsChar = false;\n\t\t\t\t}\n\t\t\t} while (--repLen >= 2);\n\t\t}\n\t\tnormalMatchPrice = matchPrice + ProbPrices[this$static._isRep[this$static._state] >>> 2];\n\t\tlen = this$static.repLens[0] >= 2?this$static.repLens[0] + 1:2;\n\t\tif (len <= lenMain) {\n\t\t\toffs = 0;\n\t\t\twhile (len > this$static._matchDistances[offs]) {\n\t\t\t\toffs += 2;\n\t\t\t}\n\t\t\tfor (;; ++len) {\n\t\t\t\tdistance = this$static._matchDistances[offs + 1];\n\t\t\t\tcurAndLenPrice = normalMatchPrice + $GetPosLenPrice(this$static, distance, len, posState);\n\t\t\t\toptimum = this$static._optimum[len];\n\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\toptimum.PosPrev = 0;\n\t\t\t\t\toptimum.BackPrev = distance + 4;\n\t\t\t\t\toptimum.Prev1IsChar = false;\n\t\t\t\t}\n\t\t\t\tif (len == this$static._matchDistances[offs]) {\n\t\t\t\t\toffs += 2;\n\t\t\t\t\tif (offs == numDistancePairs) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcur = 0;\n\t\twhile (true) {\n\t\t\t++cur;\n\t\t\tif (cur == lenEnd) {\n\t\t\t\treturn $Backward(this$static, cur);\n\t\t\t}\n\t\t\tnewLen = $ReadMatchDistances(this$static);\n\t\t\tnumDistancePairs = this$static._numDistancePairs;\n\t\t\tif (newLen >= this$static._numFastBytes) {\n\t\t\t\tthis$static._longestMatchLength = newLen;\n\t\t\t\tthis$static._longestMatchWasFound = true;\n\t\t\t\treturn $Backward(this$static, cur);\n\t\t\t}\n\t\t\t++position;\n\t\t\tposPrev = this$static._optimum[cur].PosPrev;\n\t\t\tif (this$static._optimum[cur].Prev1IsChar) {\n\t\t\t\t--posPrev;\n\t\t\t\tif (this$static._optimum[cur].Prev2) {\n\t\t\t\t\tstate = this$static._optimum[this$static._optimum[cur].PosPrev2].State;\n\t\t\t\t\tif (this$static._optimum[cur].BackPrev2 < 4) {\n\t\t\t\t\t\tstate = (state < 7) ? 8 : 11;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = (state < 7) ? 7 : 10;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstate = this$static._optimum[posPrev].State;\n\t\t\t\t}\n\t\t\t\tstate = StateUpdateChar(state);\n\t\t\t} else {\n\t\t\t\tstate = this$static._optimum[posPrev].State;\n\t\t\t}\n\t\t\tif (posPrev == cur - 1) {\n\t\t\t\tif (this$static._optimum[cur].BackPrev == 0) {\n\t\t\t\t\tstate = state < 7?9:11;\n\t\t\t\t} else {\n\t\t\t\t\tstate = StateUpdateChar(state);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this$static._optimum[cur].Prev1IsChar && this$static._optimum[cur].Prev2) {\n\t\t\t\t\tposPrev = this$static._optimum[cur].PosPrev2;\n\t\t\t\t\tpos = this$static._optimum[cur].BackPrev2;\n\t\t\t\t\tstate = state < 7?8:11;\n\t\t\t\t} else {\n\t\t\t\t\tpos = this$static._optimum[cur].BackPrev;\n\t\t\t\t\tif (pos < 4) {\n\t\t\t\t\t\tstate = state < 7?8:11;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = state < 7?7:10;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\topt = this$static._optimum[posPrev];\n\t\t\t\tif (pos < 4) {\n\t\t\t\t\tif (pos == 0) {\n\t\t\t\t\t\tthis$static.reps[0] = opt.Backs0;\n\t\t\t\t\t\tthis$static.reps[1] = opt.Backs1;\n\t\t\t\t\t\tthis$static.reps[2] = opt.Backs2;\n\t\t\t\t\t\tthis$static.reps[3] = opt.Backs3;\n\t\t\t\t\t} else if (pos == 1) {\n\t\t\t\t\t\tthis$static.reps[0] = opt.Backs1;\n\t\t\t\t\t\tthis$static.reps[1] = opt.Backs0;\n\t\t\t\t\t\tthis$static.reps[2] = opt.Backs2;\n\t\t\t\t\t\tthis$static.reps[3] = opt.Backs3;\n\t\t\t\t\t} else if (pos == 2) {\n\t\t\t\t\t\tthis$static.reps[0] = opt.Backs2;\n\t\t\t\t\t\tthis$static.reps[1] = opt.Backs0;\n\t\t\t\t\t\tthis$static.reps[2] = opt.Backs1;\n\t\t\t\t\t\tthis$static.reps[3] = opt.Backs3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis$static.reps[0] = opt.Backs3;\n\t\t\t\t\t\tthis$static.reps[1] = opt.Backs0;\n\t\t\t\t\t\tthis$static.reps[2] = opt.Backs1;\n\t\t\t\t\t\tthis$static.reps[3] = opt.Backs2;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis$static.reps[0] = pos - 4;\n\t\t\t\t\tthis$static.reps[1] = opt.Backs0;\n\t\t\t\t\tthis$static.reps[2] = opt.Backs1;\n\t\t\t\t\tthis$static.reps[3] = opt.Backs2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis$static._optimum[cur].State = state;\n\t\t\tthis$static._optimum[cur].Backs0 = this$static.reps[0];\n\t\t\tthis$static._optimum[cur].Backs1 = this$static.reps[1];\n\t\t\tthis$static._optimum[cur].Backs2 = this$static.reps[2];\n\t\t\tthis$static._optimum[cur].Backs3 = this$static.reps[3];\n\t\t\tcurPrice = this$static._optimum[cur].Price;\n\t\t\tcurrentByte = $GetIndexByte(this$static._matchFinder, -1);\n\t\t\tmatchByte = $GetIndexByte(this$static._matchFinder, -this$static.reps[0] - 1 - 1);\n\t\t\tposState = position & this$static._posStateMask;\n\t\t\tcurAnd1Price = curPrice + ProbPrices[this$static._isMatch[(state << 4) + posState] >>> 2] + $GetPrice_0($GetSubCoder(this$static._literalEncoder, position, $GetIndexByte(this$static._matchFinder, -2)), state >= 7, matchByte, currentByte);\n\t\t\tnextOptimum = this$static._optimum[cur + 1];\n\t\t\tnextIsChar = false;\n\t\t\tif (curAnd1Price < nextOptimum.Price) {\n\t\t\t\tnextOptimum.Price = curAnd1Price;\n\t\t\t\tnextOptimum.PosPrev = cur;\n\t\t\t\tnextOptimum.BackPrev = -1;\n\t\t\t\tnextOptimum.Prev1IsChar = false;\n\t\t\t\tnextIsChar = true;\n\t\t\t}\n\t\t\tmatchPrice = curPrice + ProbPrices[2048 - this$static._isMatch[(state << 4) + posState] >>> 2];\n\t\t\trepMatchPrice = matchPrice + ProbPrices[2048 - this$static._isRep[state] >>> 2];\n\t\t\tif (matchByte == currentByte && !(nextOptimum.PosPrev < cur && nextOptimum.BackPrev == 0)) {\n\t\t\t\tshortRepPrice = repMatchPrice + (ProbPrices[this$static._isRepG0[state] >>> 2] + ProbPrices[this$static._isRep0Long[(state << 4) + posState] >>> 2]);\n\t\t\t\tif (shortRepPrice <= nextOptimum.Price) {\n\t\t\t\t\tnextOptimum.Price = shortRepPrice;\n\t\t\t\t\tnextOptimum.PosPrev = cur;\n\t\t\t\t\tnextOptimum.BackPrev = 0;\n\t\t\t\t\tnextOptimum.Prev1IsChar = false;\n\t\t\t\t\tnextIsChar = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tnumAvailableBytesFull = $GetNumAvailableBytes(this$static._matchFinder) + 1;\n\t\t\tnumAvailableBytesFull = 4095 - cur < numAvailableBytesFull?4095 - cur:numAvailableBytesFull;\n\t\t\tnumAvailableBytes = numAvailableBytesFull;\n\t\t\tif (numAvailableBytes < 2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (numAvailableBytes > this$static._numFastBytes) {\n\t\t\t\tnumAvailableBytes = this$static._numFastBytes;\n\t\t\t}\n\t\t\tif (!nextIsChar && matchByte != currentByte) {\n\t\t\t\tt = min(numAvailableBytesFull - 1, this$static._numFastBytes);\n\t\t\t\tlenTest2 = $GetMatchLen(this$static._matchFinder, 0, this$static.reps[0], t);\n\t\t\t\tif (lenTest2 >= 2) {\n\t\t\t\t\tstate2 = StateUpdateChar(state);\n\t\t\t\t\tposStateNext = position + 1 & this$static._posStateMask;\n\t\t\t\t\tnextRepMatchPrice = curAnd1Price + ProbPrices[2048 - this$static._isMatch[(state2 << 4) + posStateNext] >>> 2] + ProbPrices[2048 - this$static._isRep[state2] >>> 2];\n\t\t\t\t\toffset = cur + 1 + lenTest2;\n\t\t\t\t\twhile (lenEnd < offset) {\n\t\t\t\t\t\tthis$static._optimum[++lenEnd].Price = 268435455;\n\t\t\t\t\t}\n\t\t\t\t\tcurAndLenPrice = nextRepMatchPrice + (price = $GetPrice(this$static._repMatchLenEncoder, lenTest2 - 2, posStateNext) , price + $GetPureRepPrice(this$static, 0, state2, posStateNext));\n\t\t\t\t\toptimum = this$static._optimum[offset];\n\t\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\t\toptimum.PosPrev = cur + 1;\n\t\t\t\t\t\toptimum.BackPrev = 0;\n\t\t\t\t\t\toptimum.Prev1IsChar = true;\n\t\t\t\t\t\toptimum.Prev2 = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tstartLen = 2;\n\t\t\tfor (repIndex = 0; repIndex < 4; ++repIndex) {\n\t\t\t\tlenTest = $GetMatchLen(this$static._matchFinder, -1, this$static.reps[repIndex], numAvailableBytes);\n\t\t\t\tif (lenTest < 2) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlenTestTemp = lenTest;\n\t\t\t\tdo {\n\t\t\t\t\twhile (lenEnd < cur + lenTest) {\n\t\t\t\t\t\tthis$static._optimum[++lenEnd].Price = 268435455;\n\t\t\t\t\t}\n\t\t\t\t\tcurAndLenPrice = repMatchPrice + (price_0 = $GetPrice(this$static._repMatchLenEncoder, lenTest - 2, posState) , price_0 + $GetPureRepPrice(this$static, repIndex, state, posState));\n\t\t\t\t\toptimum = this$static._optimum[cur + lenTest];\n\t\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\t\toptimum.PosPrev = cur;\n\t\t\t\t\t\toptimum.BackPrev = repIndex;\n\t\t\t\t\t\toptimum.Prev1IsChar = false;\n\t\t\t\t\t}\n\t\t\t\t} while (--lenTest >= 2);\n\t\t\t\tlenTest = lenTestTemp;\n\t\t\t\tif (repIndex == 0) {\n\t\t\t\t\tstartLen = lenTest + 1;\n\t\t\t\t}\n\t\t\t\tif (lenTest < numAvailableBytesFull) {\n\t\t\t\t\tt = min(numAvailableBytesFull - 1 - lenTest, this$static._numFastBytes);\n\t\t\t\t\tlenTest2 = $GetMatchLen(this$static._matchFinder, lenTest, this$static.reps[repIndex], t);\n\t\t\t\t\tif (lenTest2 >= 2) {\n\t\t\t\t\t\tstate2 = state < 7?8:11;\n\t\t\t\t\t\tposStateNext = position + lenTest & this$static._posStateMask;\n\t\t\t\t\t\tcurAndLenCharPrice = repMatchPrice + (price_1 = $GetPrice(this$static._repMatchLenEncoder, lenTest - 2, posState) , price_1 + $GetPureRepPrice(this$static, repIndex, state, posState)) + ProbPrices[this$static._isMatch[(state2 << 4) + posStateNext] >>> 2] + $GetPrice_0($GetSubCoder(this$static._literalEncoder, position + lenTest, $GetIndexByte(this$static._matchFinder, lenTest - 1 - 1)), true, $GetIndexByte(this$static._matchFinder, lenTest - 1 - (this$static.reps[repIndex] + 1)), $GetIndexByte(this$static._matchFinder, lenTest - 1));\n\t\t\t\t\t\tstate2 = StateUpdateChar(state2);\n\t\t\t\t\t\tposStateNext = position + lenTest + 1 & this$static._posStateMask;\n\t\t\t\t\t\tnextMatchPrice = curAndLenCharPrice + ProbPrices[2048 - this$static._isMatch[(state2 << 4) + posStateNext] >>> 2];\n\t\t\t\t\t\tnextRepMatchPrice = nextMatchPrice + ProbPrices[2048 - this$static._isRep[state2] >>> 2];\n\t\t\t\t\t\toffset = lenTest + 1 + lenTest2;\n\t\t\t\t\t\twhile (lenEnd < cur + offset) {\n\t\t\t\t\t\t\tthis$static._optimum[++lenEnd].Price = 268435455;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcurAndLenPrice = nextRepMatchPrice + (price_2 = $GetPrice(this$static._repMatchLenEncoder, lenTest2 - 2, posStateNext) , price_2 + $GetPureRepPrice(this$static, 0, state2, posStateNext));\n\t\t\t\t\t\toptimum = this$static._optimum[cur + offset];\n\t\t\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\t\t\toptimum.PosPrev = cur + lenTest + 1;\n\t\t\t\t\t\t\toptimum.BackPrev = 0;\n\t\t\t\t\t\t\toptimum.Prev1IsChar = true;\n\t\t\t\t\t\t\toptimum.Prev2 = true;\n\t\t\t\t\t\t\toptimum.PosPrev2 = cur;\n\t\t\t\t\t\t\toptimum.BackPrev2 = repIndex;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newLen > numAvailableBytes) {\n\t\t\t\tnewLen = numAvailableBytes;\n\t\t\t\tfor (numDistancePairs = 0; newLen > this$static._matchDistances[numDistancePairs]; numDistancePairs += 2) {\n\t\t\t\t}\n\t\t\t\tthis$static._matchDistances[numDistancePairs] = newLen;\n\t\t\t\tnumDistancePairs += 2;\n\t\t\t}\n\t\t\tif (newLen >= startLen) {\n\t\t\tnormalMatchPrice = matchPrice + ProbPrices[this$static._isRep[state] >>> 2];\n\t\t\twhile (lenEnd < cur + newLen) {\n\t\t\t\tthis$static._optimum[++lenEnd].Price = 268435455;\n\t\t\t}\n\t\t\toffs = 0;\n\t\t\twhile (startLen > this$static._matchDistances[offs]) {\n\t\t\t\toffs += 2;\n\t\t\t}\n\t\t\tfor (lenTest = startLen;; ++lenTest) {\n\t\t\t\tcurBack = this$static._matchDistances[offs + 1];\n\t\t\t\tcurAndLenPrice = normalMatchPrice + $GetPosLenPrice(this$static, curBack, lenTest, posState);\n\t\t\t\toptimum = this$static._optimum[cur + lenTest];\n\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\toptimum.PosPrev = cur;\n\t\t\t\t\toptimum.BackPrev = curBack + 4;\n\t\t\t\t\toptimum.Prev1IsChar = false;\n\t\t\t\t}\n\t\t\t\tif (lenTest == this$static._matchDistances[offs]) {\n\t\t\t\t\tif (lenTest < numAvailableBytesFull) {\n\t\t\t\t\t\tt = min(numAvailableBytesFull - 1 - lenTest, this$static._numFastBytes);\n\t\t\t\t\t\tlenTest2 = $GetMatchLen(this$static._matchFinder, lenTest, curBack, t);\n\t\t\t\t\t\tif (lenTest2 >= 2) {\n\t\t\t\t\t\t\tstate2 = state < 7?7:10;\n\t\t\t\t\t\t\tposStateNext = position + lenTest & this$static._posStateMask;\n\t\t\t\t\t\t\tcurAndLenCharPrice = curAndLenPrice + ProbPrices[this$static._isMatch[(state2 << 4) + posStateNext] >>> 2] + $GetPrice_0($GetSubCoder(this$static._literalEncoder, position + lenTest, $GetIndexByte(this$static._matchFinder, lenTest - 1 - 1)), true, $GetIndexByte(this$static._matchFinder, lenTest - (curBack + 1) - 1), $GetIndexByte(this$static._matchFinder, lenTest - 1));\n\t\t\t\t\t\t\tstate2 = StateUpdateChar(state2);\n\t\t\t\t\t\t\tposStateNext = position + lenTest + 1 & this$static._posStateMask;\n\t\t\t\t\t\t\tnextMatchPrice = curAndLenCharPrice + ProbPrices[2048 - this$static._isMatch[(state2 << 4) + posStateNext] >>> 2];\n\t\t\t\t\t\t\tnextRepMatchPrice = nextMatchPrice + ProbPrices[2048 - this$static._isRep[state2] >>> 2];\n\t\t\t\t\t\t\toffset = lenTest + 1 + lenTest2;\n\t\t\t\t\t\t\twhile (lenEnd < cur + offset) {\n\t\t\t\t\t\t\t\tthis$static._optimum[++lenEnd].Price = 268435455;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurAndLenPrice = nextRepMatchPrice + (price_3 = $GetPrice(this$static._repMatchLenEncoder, lenTest2 - 2, posStateNext) , price_3 + $GetPureRepPrice(this$static, 0, state2, posStateNext));\n\t\t\t\t\t\t\toptimum = this$static._optimum[cur + offset];\n\t\t\t\t\t\t\tif (curAndLenPrice < optimum.Price) {\n\t\t\t\t\t\t\t\toptimum.Price = curAndLenPrice;\n\t\t\t\t\t\t\t\toptimum.PosPrev = cur + lenTest + 1;\n\t\t\t\t\t\t\t\toptimum.BackPrev = 0;\n\t\t\t\t\t\t\t\toptimum.Prev1IsChar = true;\n\t\t\t\t\t\t\t\toptimum.Prev2 = true;\n\t\t\t\t\t\t\t\toptimum.PosPrev2 = cur;\n\t\t\t\t\t\t\t\toptimum.BackPrev2 = curBack + 4;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\toffs += 2;\n\t\t\t\t\tif (offs == numDistancePairs)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $GetPosLenPrice(this$static, pos, len, posState) {\n\t\tvar lenToPosState, price;\n\t\tlenToPosState = GetLenToPosState(len);\n\t\tif (pos < 128) {\n\t\t\tprice = this$static._distancesPrices[lenToPosState * 128 + pos];\n\t\t} else {\n\t\t\tprice = this$static._posSlotPrices[(lenToPosState << 6) + GetPosSlot2(pos)] + this$static._alignPrices[pos & 15];\n\t\t}\n\t\treturn price + $GetPrice(this$static._lenEncoder, len - 2, posState);\n\t}\n\t\n\tfunction $GetPureRepPrice(this$static, repIndex, state, posState) {\n\t\tvar price;\n\t\tif (repIndex == 0) {\n\t\t\tprice = ($clinit_66() , ProbPrices[this$static._isRepG0[state] >>> 2]);\n\t\t\tprice += ProbPrices[2048 - this$static._isRep0Long[(state << 4) + posState] >>> 2];\n\t\t} else {\n\t\t\tprice = ($clinit_66() , ProbPrices[2048 - this$static._isRepG0[state] >>> 2]);\n\t\t\tif (repIndex == 1) {\n\t\t\t\tprice += ProbPrices[this$static._isRepG1[state] >>> 2];\n\t\t\t} else {\n\t\t\t\tprice += ProbPrices[2048 - this$static._isRepG1[state] >>> 2];\n\t\t\t\tprice += GetPrice(this$static._isRepG2[state], repIndex - 2);\n\t\t\t}\n\t\t}\n\t\treturn price;\n\t}\n\t\n\tfunction $GetRepLen1Price(this$static, state, posState) {\n\t\treturn ($clinit_66() , ProbPrices[this$static._isRepG0[state] >>> 2]) + ProbPrices[this$static._isRep0Long[(state << 4) + posState] >>> 2];\n\t}\n\t\n\tfunction $Init_4(this$static) {\n\t\tvar i;\n\t\t$BaseInit(this$static);\n\t\t$Init_9(this$static._rangeEncoder);\n\t\tInitBitModels_0(this$static._isMatch);\n\t\tInitBitModels_0(this$static._isRep0Long);\n\t\tInitBitModels_0(this$static._isRep);\n\t\tInitBitModels_0(this$static._isRepG0);\n\t\tInitBitModels_0(this$static._isRepG1);\n\t\tInitBitModels_0(this$static._isRepG2);\n\t\tInitBitModels_0(this$static._posEncoders);\n\t\t$Init_3(this$static._literalEncoder);\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tInitBitModels(this$static._posSlotEncoder[i].Models);\n\t\t}\n\t\t$Init_2(this$static._lenEncoder, 1 << this$static._posStateBits);\n\t\t$Init_2(this$static._repMatchLenEncoder, 1 << this$static._posStateBits);\n\t\tInitBitModels(this$static._posAlignEncoder.Models);\n\t\tthis$static._longestMatchWasFound = false;\n\t\tthis$static._optimumEndIndex = 0;\n\t\tthis$static._optimumCurrentIndex = 0;\n\t\tthis$static._additionalOffset = 0;\n\t}\n\t\n\tfunction $MovePos(this$static, num) {\n\t\tif (num > 0) {\n\t\t\t$Skip(this$static._matchFinder, num);\n\t\t\tthis$static._additionalOffset += num;\n\t\t}\n\t}\n\t\n\tfunction $ReadMatchDistances(this$static) {\n\t\tvar lenRes;\n\t\tlenRes = 0;\n\t\tthis$static._numDistancePairs = $GetMatches(this$static._matchFinder, this$static._matchDistances);\n\t\tif (this$static._numDistancePairs > 0) {\n\t\t\tlenRes = this$static._matchDistances[this$static._numDistancePairs - 2];\n\t\t\tif (lenRes == this$static._numFastBytes)\n\t\t\tlenRes += $GetMatchLen(this$static._matchFinder, lenRes - 1, this$static._matchDistances[this$static._numDistancePairs - 1], 273 - lenRes);\n\t\t}\n\t\t++this$static._additionalOffset;\n\t\treturn lenRes;\n\t}\n\t\n\tfunction $ReleaseMFStream(this$static) {\n\t\tif (!!this$static._matchFinder && this$static._needReleaseMFStream) {\n\t\t\tthis$static._matchFinder._stream = null;\n\t\t\tthis$static._needReleaseMFStream = false;\n\t\t}\n\t}\n\t\n\tfunction $ReleaseStreams(this$static) {\n\t\t$ReleaseMFStream(this$static);\n\t\tthis$static._rangeEncoder.Stream = null;\n\t}\n\t\n\tfunction $SetDictionarySize_0(this$static, dictionarySize) {\n\t\tvar dicLogSize;\n\t\tif (dictionarySize < 1 || dictionarySize > 536870912) {\n\t\t\treturn false;\n\t\t}\n\t\tthis$static._dictionarySize = dictionarySize;\n\t\tfor (dicLogSize = 0; dictionarySize > 1 << dicLogSize; ++dicLogSize) {\n\t\t}\n\t\tthis$static._distTableSize = dicLogSize * 2;\n\t\treturn true;\n\t}\n\t\n\tfunction $SetLcLpPb_0(this$static, lc, lp, pb) {\n\t\tif (lp < 0 || lp > 4 || lc < 0 || lc > 8 || pb < 0 || pb > 4) {\n\t\t\treturn false;\n\t\t}\n\t\tthis$static._numLiteralPosStateBits = lp;\n\t\tthis$static._numLiteralContextBits = lc;\n\t\tthis$static._posStateBits = pb;\n\t\tthis$static._posStateMask = (1 << this$static._posStateBits) - 1;\n\t\treturn true;\n\t}\n\t\n\tfunction $SetMatchFinder(this$static, matchFinderIndex) {\n\t\tvar matchFinderIndexPrev;\n\t\tif (matchFinderIndex < 0 || matchFinderIndex > 2) {\n\t\t\treturn false;\n\t\t}\n\t\tmatchFinderIndexPrev = this$static._matchFinderType;\n\t\tthis$static._matchFinderType = matchFinderIndex;\n\t\tif (!!this$static._matchFinder && matchFinderIndexPrev != this$static._matchFinderType) {\n\t\t\tthis$static._dictionarySizePrev = -1;\n\t\t\tthis$static._matchFinder = null;\n\t\t}\n\t\treturn true;\n\t}\n\t\n\tfunction $SetNumFastBytes(this$static, numFastBytes) {\n\t\tif (numFastBytes < 5 || numFastBytes > 273) {\n\t\t\treturn false;\n\t\t}\n\t\tthis$static._numFastBytes = numFastBytes;\n\t\treturn true;\n\t}\n\t\n\tfunction $WriteCoderProperties(this$static, outStream) {\n\t\tvar i;\n\t\tthis$static.properties[0] = (this$static._posStateBits * 5 + this$static._numLiteralPosStateBits) * 9 + this$static._numLiteralContextBits << 24 >> 24;\n\t\tfor (i = 0; i < 4; ++i) {\n\t\t\tthis$static.properties[1 + i] = this$static._dictionarySize >> 8 * i << 24 >> 24;\n\t\t}\n\t\t$write_0(outStream, this$static.properties, 0, 5);\n\t}\n\t\n\tfunction $WriteEndMarker(this$static, posState) {\n\t\tvar lenToPosState;\n\t\tif (!this$static._writeEndMark) {\n\t\t\treturn;\n\t\t}\n\t\t$Encode_3(this$static._rangeEncoder, this$static._isMatch, (this$static._state << 4) + posState, 1);\n\t\t$Encode_3(this$static._rangeEncoder, this$static._isRep, this$static._state, 0);\n\t\tthis$static._state = this$static._state < 7?7:10;\n\t\t$Encode_0(this$static._lenEncoder, this$static._rangeEncoder, 0, posState);\n\t\tlenToPosState = GetLenToPosState(2);\n\t\t$Encode_2(this$static._posSlotEncoder[lenToPosState], this$static._rangeEncoder, 63);\n\t\t$EncodeDirectBits(this$static._rangeEncoder, 67108863, 26);\n\t\t$ReverseEncode(this$static._posAlignEncoder, this$static._rangeEncoder, 15);\n\t}\n\t\n\tfunction GetPosSlot(pos) {\n\t\tif (pos < 2048) {\n\t\t\treturn g_FastPos[pos];\n\t\t}\n\t\tif (pos < 2097152) {\n\t\t\treturn g_FastPos[pos >> 10] + 20;\n\t\t}\n\t\treturn g_FastPos[pos >> 20] + 40;\n\t}\n\t\n\tfunction GetPosSlot2(pos) {\n\t\tif (pos < 131072) {\n\t\t\treturn g_FastPos[pos >> 6] + 12;\n\t\t}\n\t\tif (pos < 134217728) {\n\t\t\treturn g_FastPos[pos >> 16] + 32;\n\t\t}\n\t\treturn g_FastPos[pos >> 26] + 52;\n\t}\n\t\n\tfunction getClass_38() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder_2_classLit;\n\t}\n\t\n\tfunction Encoder() {\n\t}\n\t\n\t_ = Encoder.prototype = new Object_0();\n\t_.getClass$ = getClass_38;\n\t_.typeId$ = 0;\n\t_._additionalOffset = 0;\n\t_._alignPriceCount = 0;\n\t_._dictionarySize = 4194304;\n\t_._dictionarySizePrev = -1;\n\t_._distTableSize = 44;\n\t_._finished = false;\n\t_._inStream = null;\n\t_._longestMatchLength = 0;\n\t_._longestMatchWasFound = false;\n\t_._matchFinder = null;\n\t_._matchFinderType = 1;\n\t_._matchPriceCount = 0;\n\t_._needReleaseMFStream = false;\n\t_._numDistancePairs = 0;\n\t_._numFastBytes = 32;\n\t_._numFastBytesPrev = -1;\n\t_._numLiteralContextBits = 3;\n\t_._numLiteralPosStateBits = 0;\n\t_._optimumCurrentIndex = 0;\n\t_._optimumEndIndex = 0;\n\t_._posStateBits = 2;\n\t_._posStateMask = 3;\n\t_._previousByte = 0;\n\t_._state = 0;\n\t_._writeEndMark = false;\n\t_.backRes = 0;\n\t_.nowPos64 = P0_longLit;\n\tvar g_FastPos;\n\tfunction $Encode(this$static, rangeEncoder, symbol, posState) {\n\t\tif (symbol < 8) {\n\t\t\t$Encode_3(rangeEncoder, this$static._choice, 0, 0);\n\t\t\t$Encode_2(this$static._lowCoder[posState], rangeEncoder, symbol);\n\t\t} else {\n\t\t\tsymbol -= 8;\n\t\t\t$Encode_3(rangeEncoder, this$static._choice, 0, 1);\n\t\t\tif (symbol < 8) {\n\t\t\t\t$Encode_3(rangeEncoder, this$static._choice, 1, 0);\n\t\t\t\t$Encode_2(this$static._midCoder[posState], rangeEncoder, symbol);\n\t\t\t} else {\n\t\t\t\t$Encode_3(rangeEncoder, this$static._choice, 1, 1);\n\t\t\t\t$Encode_2(this$static._highCoder, rangeEncoder, symbol - 8);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $Encoder$LenEncoder(this$static) {\n\t\tvar posState;\n\t\tthis$static._choice = initDim(_3S_classLit, 0, -1, 2, 1);\n\t\tthis$static._lowCoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit, 0, 8, 16, 0);\n\t\tthis$static._midCoder = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit, 0, 8, 16, 0);\n\t\tthis$static._highCoder = $BitTreeEncoder(new BitTreeEncoder(), 8);\n\t\tfor (posState = 0; posState < 16; ++posState) {\n\t\t\tthis$static._lowCoder[posState] = $BitTreeEncoder(new BitTreeEncoder(), 3);\n\t\t\tthis$static._midCoder[posState] = $BitTreeEncoder(new BitTreeEncoder(), 3);\n\t\t}\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Init_2(this$static, numPosStates) {\n\t\tvar posState;\n\t\tInitBitModels_0(this$static._choice);\n\t\tfor (posState = 0; posState < numPosStates; ++posState) {\n\t\t\tInitBitModels(this$static._lowCoder[posState].Models);\n\t\t\tInitBitModels(this$static._midCoder[posState].Models);\n\t\t}\n\t\tInitBitModels(this$static._highCoder.Models);\n\t}\n\t\n\tfunction $SetPrices(this$static, posState, numSymbols, prices, st) {\n\t\tvar a0, a1, b0, b1, i;\n\t\ta0 = ($clinit_66() , ProbPrices[this$static._choice[0] >>> 2]);\n\t\ta1 = ProbPrices[2048 - this$static._choice[0] >>> 2];\n\t\tb0 = a1 + ProbPrices[this$static._choice[1] >>> 2];\n\t\tb1 = a1 + ProbPrices[2048 - this$static._choice[1] >>> 2];\n\t\ti = 0;\n\t\tfor (i = 0; i < 8; ++i) {\n\t\t\tif (i >= numSymbols)\n\t\t\treturn;\n\t\t\tprices[st + i] = a0 + $GetPrice_1(this$static._lowCoder[posState], i);\n\t\t}\n\t\tfor (; i < 16; ++i) {\n\t\t\tif (i >= numSymbols)\n\t\t\treturn;\n\t\t\tprices[st + i] = b0 + $GetPrice_1(this$static._midCoder[posState], i - 8);\n\t\t}\n\t\tfor (; i < numSymbols; ++i) {\n\t\t\tprices[st + i] = b1 + $GetPrice_1(this$static._highCoder, i - 8 - 8);\n\t\t}\n\t}\n\t\t\n\tfunction getClass_33() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LenEncoder_2_classLit;\n\t}\n\t\n\tfunction Encoder$LenEncoder() {\n\t}\n\t\n\t_ = Encoder$LenEncoder.prototype = new Object_0();\n\t_.getClass$ = getClass_33;\n\t_.typeId$ = 0;\n\tfunction $Encode_0(this$static, rangeEncoder, symbol, posState) {\n\t\t$Encode(this$static, rangeEncoder, symbol, posState);\n\t\tif (--this$static._counters[posState] == 0) {\n\t\t\t$SetPrices(this$static, posState, this$static._tableSize, this$static._prices, posState * 272);\n\t\t\tthis$static._counters[posState] = this$static._tableSize;\n\t\t}\n\t}\n\t\n\tfunction $Encoder$LenPriceTableEncoder(this$static) {\n\t\t$Encoder$LenEncoder(this$static);\n\t\tthis$static._prices = initDim(_3I_classLit, 0, -1, 4352, 1);\n\t\tthis$static._counters = initDim(_3I_classLit, 0, -1, 16, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $GetPrice(this$static, symbol, posState) {\n\t\treturn this$static._prices[posState * 272 + symbol];\n\t}\n\t\n\tfunction $UpdateTables(this$static, numPosStates) {\n\t\tvar posState;\n\t\tfor (posState = 0; posState < numPosStates; ++posState) {\n\t\t\t$SetPrices(this$static, posState, this$static._tableSize, this$static._prices, posState * 272);\n\t\t\tthis$static._counters[posState] = this$static._tableSize;\n\t\t}\n\t}\n\t\n\tfunction getClass_34() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LenPriceTableEncoder_2_classLit;\n\t}\n\t\n\tfunction Encoder$LenPriceTableEncoder() {\n\t}\n\t\n\t_ = Encoder$LenPriceTableEncoder.prototype = new Encoder$LenEncoder();\n\t_.getClass$ = getClass_34;\n\t_.typeId$ = 0;\n\t_._tableSize = 0;\n\tfunction $Create_1(this$static, numPosBits, numPrevBits) {\n\t\tvar i, numStates;\n\t\tif (this$static.m_Coders != null && this$static.m_NumPrevBits == numPrevBits && this$static.m_NumPosBits == numPosBits) {\n\t\t\treturn;\n\t\t}\n\t\tthis$static.m_NumPosBits = numPosBits;\n\t\tthis$static.m_PosMask = (1 << numPosBits) - 1;\n\t\tthis$static.m_NumPrevBits = numPrevBits;\n\t\tnumStates = 1 << this$static.m_NumPrevBits + this$static.m_NumPosBits;\n\t\tthis$static.m_Coders = initDim(_3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder$Encoder2_2_classLit, 0, 5, numStates, 0);\n\t\tfor (i = 0; i < numStates; ++i) {\n\t\t\tthis$static.m_Coders[i] = $Encoder$LiteralEncoder$Encoder2(new Encoder$LiteralEncoder$Encoder2());\n\t\t}\n\t}\n\t\n\tfunction $GetSubCoder(this$static, pos, prevByte) {\n\t\treturn this$static.m_Coders[((pos & this$static.m_PosMask) << this$static.m_NumPrevBits) + ((prevByte & 255) >>> 8 - this$static.m_NumPrevBits)];\n\t}\n\t\n\tfunction $Init_3(this$static) {\n\t\tvar i, numStates;\n\t\tnumStates = 1 << this$static.m_NumPrevBits + this$static.m_NumPosBits;\n\t\tfor (i = 0; i < numStates; ++i) {\n\t\t\tInitBitModels_0(this$static.m_Coders[i].m_Encoders);\n\t\t}\n\t}\n\t\n\tfunction getClass_36() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder_2_classLit;\n\t}\n\t\n\tfunction Encoder$LiteralEncoder() {\n\t}\n\t\n\t_ = Encoder$LiteralEncoder.prototype = new Object_0();\n\t_.getClass$ = getClass_36;\n\t_.typeId$ = 0;\n\t_.m_Coders = null;\n\t_.m_NumPosBits = 0;\n\t_.m_NumPrevBits = 0;\n\t_.m_PosMask = 0;\n\tfunction $Encode_1(this$static, rangeEncoder, symbol) {\n\t\tvar bit, context, i;\n\t\tcontext = 1;\n\t\tfor (i = 7; i >= 0; --i) {\n\t\t\tbit = symbol >> i & 1;\n\t\t\t$Encode_3(rangeEncoder, this$static.m_Encoders, context, bit);\n\t\t\tcontext = context << 1 | bit;\n\t\t}\n\t}\n\t\n\tfunction $EncodeMatched(this$static, rangeEncoder, matchByte, symbol) {\n\t\tvar bit, context, i, matchBit, same, state;\n\t\tcontext = 1;\n\t\tsame = true;\n\t\tfor (i = 7; i >= 0; --i) {\n\t\t\tbit = symbol >> i & 1;\n\t\t\tstate = context;\n\t\t\tif (same) {\n\t\t\t\tmatchBit = matchByte >> i & 1;\n\t\t\t\tstate += 1 + matchBit << 8;\n\t\t\t\tsame = matchBit == bit;\n\t\t\t}\n\t\t\t$Encode_3(rangeEncoder, this$static.m_Encoders, state, bit);\n\t\t\tcontext = context << 1 | bit;\n\t\t}\n\t}\n\t\n\tfunction $Encoder$LiteralEncoder$Encoder2(this$static) {\n\t\tthis$static.m_Encoders = initDim(_3S_classLit, 0, -1, 768, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $GetPrice_0(this$static, matchMode, matchByte, symbol) {\n\t\tvar bit, context, i, matchBit, price;\n\t\tprice = 0;\n\t\tcontext = 1;\n\t\ti = 7;\n\t\tif (matchMode) {\n\t\t\tfor (; i >= 0; --i) {\n\t\t\t\tmatchBit = matchByte >> i & 1;\n\t\t\t\tbit = symbol >> i & 1;\n\t\t\t\tprice += GetPrice(this$static.m_Encoders[(1 + matchBit << 8) + context], bit);\n\t\t\t\tcontext = context << 1 | bit;\n\t\t\t\tif (matchBit != bit) {\n\t\t\t\t\t--i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (; i >= 0; --i) {\n\t\t\tbit = symbol >> i & 1;\n\t\t\tprice += GetPrice(this$static.m_Encoders[context], bit);\n\t\t\tcontext = context << 1 | bit;\n\t\t}\n\t\treturn price;\n\t}\n\t\n\tfunction getClass_35() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder$Encoder2_2_classLit;\n\t}\n\t\n\tfunction Encoder$LiteralEncoder$Encoder2() {\n\t}\n\t\n\t_ = Encoder$LiteralEncoder$Encoder2.prototype = new Object_0();\n\t_.getClass$ = getClass_35;\n\t_.typeId$ = 18;\n\tfunction $MakeAsChar(this$static) {\n\t\tthis$static.BackPrev = -1;\n\t\tthis$static.Prev1IsChar = false;\n\t}\n\t\n\tfunction $MakeAsShortRep(this$static) {\n\t\tthis$static.BackPrev = 0;\n\t\tthis$static.Prev1IsChar = false;\n\t}\n\t\n\tfunction getClass_37() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$Optimal_2_classLit;\n\t}\n\t\n\tfunction Encoder$Optimal() {\n\t}\n\t\n\t_ = Encoder$Optimal.prototype = new Object_0();\n\t_.getClass$ = getClass_37;\n\t_.typeId$ = 19;\n\t_.BackPrev = 0;\n\t_.BackPrev2 = 0;\n\t_.Backs0 = 0;\n\t_.Backs1 = 0;\n\t_.Backs2 = 0;\n\t_.Backs3 = 0;\n\t_.PosPrev = 0;\n\t_.PosPrev2 = 0;\n\t_.Prev1IsChar = false;\n\t_.Prev2 = false;\n\t_.Price = 0;\n\t_.State = 0;\n\tfunction $BitTreeDecoder(this$static, numBitLevels) {\n\t\tthis$static.NumBitLevels = numBitLevels;\n\t\tthis$static.Models = initDim(_3S_classLit, 0, -1, 1 << numBitLevels, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Decode_0(this$static, rangeDecoder) {\n\t\tvar bitIndex, m;\n\t\tm = 1;\n\t\tfor (bitIndex = this$static.NumBitLevels; bitIndex != 0; --bitIndex) {\n\t\t\tm = (m << 1) + $DecodeBit(rangeDecoder, this$static.Models, m);\n\t\t}\n\t\treturn m - (1 << this$static.NumBitLevels);\n\t}\n\t\n\tfunction $ReverseDecode(this$static, rangeDecoder) {\n\t\tvar bit, bitIndex, m, symbol;\n\t\tm = 1;\n\t\tsymbol = 0;\n\t\tfor (bitIndex = 0; bitIndex < this$static.NumBitLevels; ++bitIndex) {\n\t\t\tbit = $DecodeBit(rangeDecoder, this$static.Models, m);\n\t\t\tm <<= 1;\n\t\t\tm += bit;\n\t\t\tsymbol |= bit << bitIndex;\n\t\t}\n\t\treturn symbol;\n\t}\n\t\n\tfunction ReverseDecode(Models, startIndex, rangeDecoder, NumBitLevels) {\n\t\tvar bit, bitIndex, m, symbol;\n\t\tm = 1;\n\t\tsymbol = 0;\n\t\tfor (bitIndex = 0; bitIndex < NumBitLevels; ++bitIndex) {\n\t\t\tbit = $DecodeBit(rangeDecoder, Models, startIndex + m);\n\t\t\tm <<= 1;\n\t\t\tm += bit;\n\t\t\tsymbol |= bit << bitIndex;\n\t\t}\n\t\treturn symbol;\n\t}\n\t\n\tfunction getClass_42() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit;\n\t}\n\t\n\tfunction BitTreeDecoder() {\n\t}\n\t\n\t_ = BitTreeDecoder.prototype = new Object_0();\n\t_.getClass$ = getClass_42;\n\t_.typeId$ = 20;\n\t_.Models = null;\n\t_.NumBitLevels = 0;\n\tfunction $BitTreeEncoder(this$static, numBitLevels) {\n\t\tthis$static.NumBitLevels = numBitLevels;\n\t\tthis$static.Models = initDim(_3S_classLit, 0, -1, 1 << numBitLevels, 1);\n\t\treturn this$static;\n\t}\n\t\n\tfunction $Encode_2(this$static, rangeEncoder, symbol) {\n\t\tvar bit, bitIndex, m;\n\t\tm = 1;\n\t\tfor (bitIndex = this$static.NumBitLevels; bitIndex != 0;) {\n\t\t\t--bitIndex;\n\t\t\tbit = symbol >>> bitIndex & 1;\n\t\t\t$Encode_3(rangeEncoder, this$static.Models, m, bit);\n\t\t\tm = m << 1 | bit;\n\t\t}\n\t}\n\t\n\tfunction $GetPrice_1(this$static, symbol) {\n\t\tvar bit, bitIndex, m, price;\n\t\tprice = 0;\n\t\tm = 1;\n\t\tfor (bitIndex = this$static.NumBitLevels; bitIndex != 0;) {\n\t\t\t--bitIndex;\n\t\t\tbit = symbol >>> bitIndex & 1;\n\t\t\tprice += GetPrice(this$static.Models[m], bit);\n\t\t\tm = (m << 1) + bit;\n\t\t}\n\t\treturn price;\n\t}\n\t\n\tfunction $ReverseEncode(this$static, rangeEncoder, symbol) {\n\t\tvar bit, i, m;\n\t\tm = 1;\n\t\tfor (i = 0; i < this$static.NumBitLevels; ++i) {\n\t\t\tbit = symbol & 1;\n\t\t\t$Encode_3(rangeEncoder, this$static.Models, m, bit);\n\t\t\tm = m << 1 | bit;\n\t\t\tsymbol >>= 1;\n\t\t}\n\t}\n\t\n\tfunction $ReverseGetPrice(this$static, symbol) {\n\t\tvar bit, i, m, price;\n\t\tprice = 0;\n\t\tm = 1;\n\t\tfor (i = this$static.NumBitLevels; i != 0; --i) {\n\t\t\tbit = symbol & 1;\n\t\t\tsymbol >>>= 1;\n\t\t\tprice += GetPrice(this$static.Models[m], bit);\n\t\t\tm = m << 1 | bit;\n\t\t}\n\t\treturn price;\n\t}\n\t\n\tfunction ReverseEncode(Models, startIndex, rangeEncoder, NumBitLevels, symbol) {\n\t\tvar bit, i, m;\n\t\tm = 1;\n\t\tfor (i = 0; i < NumBitLevels; ++i) {\n\t\t\tbit = symbol & 1;\n\t\t\t$Encode_3(rangeEncoder, Models, startIndex + m, bit);\n\t\t\tm = m << 1 | bit;\n\t\t\tsymbol >>= 1;\n\t\t}\n\t}\n\t\n\tfunction ReverseGetPrice(Models, startIndex, NumBitLevels, symbol) {\n\t\tvar bit, i, m, price;\n\t\tprice = 0;\n\t\tm = 1;\n\t\tfor (i = NumBitLevels; i != 0; --i) {\n\t\t\tbit = symbol & 1;\n\t\t\tsymbol >>>= 1;\n\t\t\tprice += ($clinit_66() , ProbPrices[((Models[startIndex + m] - bit ^ -bit) & 2047) >>> 2]);\n\t\t\tm = m << 1 | bit;\n\t\t}\n\t\treturn price;\n\t}\n\t\n\tfunction getClass_43() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit;\n\t}\n\t\n\tfunction BitTreeEncoder() {\n\t}\n\t\n\t_ = BitTreeEncoder.prototype = new Object_0();\n\t_.getClass$ = getClass_43;\n\t_.typeId$ = 21;\n\t_.Models = null;\n\t_.NumBitLevels = 0;\n\tfunction $DecodeBit(this$static, probs, index) {\n\t\tvar newBound, prob;\n\t\tprob = probs[index];\n\t\tnewBound = (this$static.Range >>> 11) * prob;\n\t\tif ((this$static.Code ^ -2147483648) < (newBound ^ -2147483648)) {\n\t\t\tthis$static.Range = newBound;\n\t\t\tprobs[index] = prob + (2048 - prob >>> 5) << 16 >> 16;\n\t\t\tif ((this$static.Range & -16777216) == 0) {\n\t\t\t\tthis$static.Code = this$static.Code << 8 | $read(this$static.Stream);\n\t\t\t\tthis$static.Range <<= 8;\n\t\t\t}\n\t\t\treturn 0;\n\t\t} else {\n\t\t\tthis$static.Range -= newBound;\n\t\t\tthis$static.Code -= newBound;\n\t\t\tprobs[index] = prob - (prob >>> 5) << 16 >> 16;\n\t\t\tif ((this$static.Range & -16777216) == 0) {\n\t\t\t\tthis$static.Code = this$static.Code << 8 | $read(this$static.Stream);\n\t\t\t\tthis$static.Range <<= 8;\n\t\t\t}\n\t\t\treturn 1;\n\t\t}\n\t}\n\t\n\tfunction $DecodeDirectBits(this$static, numTotalBits) {\n\t\tvar i, result, t;\n\t\tresult = 0;\n\t\tfor (i = numTotalBits; i != 0; --i) {\n\t\t\tthis$static.Range >>>= 1;\n\t\t\tt = this$static.Code - this$static.Range >>> 31;\n\t\t\tthis$static.Code -= this$static.Range & t - 1;\n\t\t\tresult = result << 1 | 1 - t;\n\t\t\tif ((this$static.Range & -16777216) == 0) {\n\t\t\t\tthis$static.Code = this$static.Code << 8 | $read(this$static.Stream);\n\t\t\t\tthis$static.Range <<= 8;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\t\n\tfunction $Init_8(this$static) {\n\t\tvar i;\n\t\tthis$static.Code = 0;\n\t\tthis$static.Range = -1;\n\t\tfor (i = 0; i < 5; ++i) {\n\t\t\tthis$static.Code = this$static.Code << 8 | $read(this$static.Stream);\n\t\t}\n\t}\n\t\n\tfunction InitBitModels(probs) {\n\t\tvar i;\n\t\tfor (i = 0; i < probs.length; ++i) {\n\t\t\tprobs[i] = 1024;\n\t\t}\n\t}\n\t\n\tfunction getClass_44() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_Decoder_2_classLit;\n\t}\n\t\n\tfunction Decoder_0() {\n\t}\n\t\n\t_ = Decoder_0.prototype = new Object_0();\n\t_.getClass$ = getClass_44;\n\t_.typeId$ = 0;\n\t_.Code = 0;\n\t_.Range = 0;\n\t_.Stream = null;\n\tfunction $clinit_66() {\n\t\t$clinit_66 = nullMethod;\n\t\tvar end, i, j, start;\n\t\tProbPrices = initDim(_3I_classLit, 0, -1, 512, 1);\n\t\tfor (i = 8; i >= 0; --i) {\n\t\t\tstart = 1 << 9 - i - 1;\n\t\t\tend = 1 << 9 - i;\n\t\t\tfor (j = start; j < end; ++j) {\n\t\t\t\tProbPrices[j] = (i << 6) + (end - j << 6 >>> 9 - i - 1);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $Encode_3(this$static, probs, index, symbol) {\n\t\tvar newBound, prob;\n\t\tprob = probs[index];\n\t\tnewBound = (this$static.Range >>> 11) * prob;\n\t\tif (symbol == 0) {\n\t\t\tthis$static.Range = newBound;\n\t\t\tprobs[index] = prob + (2048 - prob >>> 5) << 16 >> 16;\n\t\t} else {\n\t\t\tthis$static.Low = add(this$static.Low, and(fromInt(newBound), Pffffffff_longLit));\n\t\t\tthis$static.Range -= newBound;\n\t\t\tprobs[index] = prob - (prob >>> 5) << 16 >> 16;\n\t\t}\n\t\tif ((this$static.Range & -16777216) == 0) {\n\t\t\tthis$static.Range <<= 8;\n\t\t\t$ShiftLow(this$static);\n\t\t}\n\t}\n\t\n\tfunction $EncodeDirectBits(this$static, v, numTotalBits) {\n\t\tvar i;\n\t\tfor (i = numTotalBits - 1; i >= 0; --i) {\n\t\t\tthis$static.Range >>>= 1;\n\t\t\tif ((v >>> i & 1) == 1) {\n\t\t\t\tthis$static.Low = add(this$static.Low, fromInt(this$static.Range));\n\t\t\t}\n\t\t\tif ((this$static.Range & -16777216) == 0) {\n\t\t\t\tthis$static.Range <<= 8;\n\t\t\t\t$ShiftLow(this$static);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction $FlushData(this$static) {\n\t\tvar i;\n\t\tfor (i = 0; i < 5; ++i) {\n\t\t\t$ShiftLow(this$static);\n\t\t}\n\t}\n\t\n\tfunction $GetProcessedSizeAdd(this$static) {\n\t\treturn add(add(fromInt(this$static._cacheSize), this$static._position), P4_longLit);\n\t}\n\t\n\tfunction $Init_9(this$static) {\n\t\tthis$static._position = P0_longLit;\n\t\tthis$static.Low = P0_longLit;\n\t\tthis$static.Range = -1;\n\t\tthis$static._cacheSize = 1;\n\t\tthis$static._cache = 0;\n\t}\n\t\n\tfunction $ShiftLow(this$static) {\n\t\tvar LowHi, temp;\n\t\tLowHi = lowBits_0(shru(this$static.Low, 32));\n\t\tif (LowHi != 0 || compare(this$static.Low, Pff000000_longLit) < 0) {\n\t\t\tthis$static._position = add(this$static._position, fromInt(this$static._cacheSize));\n\t\t\ttemp = this$static._cache;\n\t\t\tdo {\n\t\t\t\t$write(this$static.Stream, temp + LowHi);\n\t\t\t\ttemp = 255;\n\t\t\t} while (--this$static._cacheSize != 0);\n\t\t\tthis$static._cache = lowBits_0(this$static.Low) >>> 24;\n\t\t}\n\t\t++this$static._cacheSize;\n\t\tthis$static.Low = shl(and(this$static.Low, Pffffff_longLit), 8);\n\t}\n\t\n\tfunction GetPrice(Prob, symbol) {\n\t\t$clinit_66();\n\t\treturn ProbPrices[((Prob - symbol ^ -symbol) & 2047) >>> 2];\n\t}\n\t\n\tfunction InitBitModels_0(probs) {\n\t\t$clinit_66();\n\t\tvar i;\n\t\tfor (i = 0; i < probs.length; ++i) {\n\t\t\tprobs[i] = 1024;\n\t\t}\n\t}\n\t\n\tfunction getClass_45() {\n\t\treturn Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_Encoder_2_classLit;\n\t}\n\t\n\tfunction Encoder_0() {\n\t}\n\t\n\t_ = Encoder_0.prototype = new Object_0();\n\t_.getClass$ = getClass_45;\n\t_.typeId$ = 0;\n\t_.Low = P0_longLit;\n\t_.Range = 0;\n\t_.Stream = null;\n\t_._cache = 0;\n\t_._cacheSize = 0;\n\t_._position = P0_longLit;\n\tvar ProbPrices;\n\tfunction decode(utf) {\n\t\tvar buf, i, x, y, z;\n\t\tbuf = $StringBuilder(new StringBuilder());\n\t\tfor (i = 0; i < utf.length; ++i) {\n\t\t\tx = utf[i] & 255;\n\t\t\tif ((x & 128) == 0) {\n\t\t\t\tif (x == 0) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\t$appendNonNull(buf.data, String.fromCharCode(x & 65535));\n\t\t\t} else if ((x & 224) == 192) {\n\t\t\t\tif (i + 1 >= utf.length) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\ty = utf[++i] & 255;\n\t\t\t\tif ((y & 192) != 128) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\t$append(buf.data, String.fromCharCode((x & 31) << 6 & 65535 | y & 63));\n\t\t\t} else if ((x & 240) == 224) {\n\t\t\t\tif (i + 2 >= utf.length) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\ty = utf[++i] & 255;\n\t\t\t\tif ((y & 192) != 128) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\tz = utf[++i] & 255;\n\t\t\t\tif ((z & 192) != 128) {\n\t\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t\t}\n\t\t\t\t$appendNonNull(buf.data, String.fromCharCode(((x & 15) << 12 | (y & 63) << 6 | z & 63) & 65535));\n\t\t\t} else {\n\t\t\t\tthrow $IllegalArgumentException(new IllegalArgumentException(), 'invalid UTF-8');\n\t\t\t}\n\t\t}\n\t\treturn $toString(buf.data);\n\t}\n\t\n\tfunction encode(s) {\n\t\tvar ch, chars, data, elen, i, charArr, n;\n\t\tchars = (n = s.length , charArr = initDim(_3C_classLit, 0, -1, n, 1) , $getChars(s, 0, n, charArr, 0) , charArr);\n\t\telen = 0;\n\t\tfor (i = 0; i < s.length; ++i) {\n\t\t\tch = chars[i];\n\t\t\tif (ch >= 1 && ch <= 127) {\n\t\t\t\t++elen;\n\t\t\t} else if (ch == 0 || ch >= 128 && ch <= 2047) {\n\t\t\t\telen += 2;\n\t\t\t} else {\n\t\t\t\telen += 3;\n\t\t\t}\n\t\t}\n\t\tdata = initDim(_3B_classLit, 0, -1, elen, 1);\n\t\telen = 0;\n\t\tfor (i = 0; i < s.length; ++i) {\n\t\t\tch = chars[i];\n\t\t\tif (ch >= 1 && ch <= 127) {\n\t\t\t\tdata[elen++] = ch << 24 >> 24;\n\t\t\t} else if (ch == 0 || ch >= 128 && ch <= 2047) {\n\t\t\t\tdata[elen++] = (192 | ch >> 6 & 31) << 24 >> 24;\n\t\t\t\tdata[elen++] = (128 | ch & 63) << 24 >> 24;\n\t\t\t} else {\n\t\t\t\tdata[elen++] = (224 | ch >> 12 & 15) << 24 >> 24;\n\t\t\t\tdata[elen++] = (128 | ch >> 6 & 63) << 24 >> 24;\n\t\t\t\tdata[elen++] = (128 | ch & 63) << 24 >> 24;\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\t\n\tfunction $LZMADemo(this$static) {\n\t\treturn this$static;\n\t}\n\tfunction toDouble(a) {\n\t\treturn a[1] + a[0];\n\t}\n\t\n\tfunction compress() {\n\t\tvar this$static = $LZMADemo(new LZMADemo()),\n\t\t\tpercent,\n\t\t\tstart,\n\t\t\t/// Arguments\n\t\t\tstr = arguments[0],\n\t\t\tmode = arguments[1],\n\t\t\tcallback_num,\n\t\t\ton_finish,\n\t\t\ton_progress;\n\t\t\n\t\tif (typeof arguments[2] === \"function\") {\n\t\t\ton_finish = arguments[2];\n\t\t\tif (typeof arguments[3] === \"function\") {\n\t\t\t\ton_progress = arguments[3];\n\t\t\t}\n\t\t} else {\n\t\t\tcallback_num = arguments[2];\n\t\t}\n\t\t\n\t\tthis$static.mode = get_mode_obj(mode);\n\t\t\n\t\tthis$static.c = $LZMAByteArrayCompressor(new LZMAByteArrayCompressor(), encode(str), this$static.mode);\n\t\t\n\t\tif (on_progress) {\n\t\t\ton_progress(0);\n\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\tupdate_progress(0, callback_num);\n\t\t}\n\t\t\n\t\tfunction do_action() {\n\t\t\tvar res;\n\t\t\tstart = (new Date).getTime();\n\t\t\twhile ($execute(this$static.c)) {\n\t\t\t\tpercent = toDouble(this$static.c.chunker.inBytesProcessed) / toDouble(this$static.c.length_0);\n\t\t\t\t/// If about 200 miliseconds have passed, update the progress.\n\t\t\t\tif ((new Date).getTime() - start > 200) {\n\t\t\t\t\tif (on_progress) {\n\t\t\t\t\t\ton_progress(percent);\n\t\t\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\t\t\tupdate_progress(percent, callback_num);\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(do_action, 0);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (on_progress) {\n\t\t\t\ton_progress(1);\n\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\tupdate_progress(1, callback_num);\n\t\t\t}\n\t\t\t\n\t\t\t/// .slice(0) is required for Firefox 4.0 (because I think arrays are now passed by reference, which is not allowed when sending messages to or from web workers).\n\t\t\t/// .slice(0) simply returns the entire array by value.\n\t\t\tres = $toByteArray(this$static.c.output).slice(0);\n\t\t\t\n\t\t\tif (on_finish) {\n\t\t\t\ton_finish(res);\n\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\tpostMessage({\n\t\t\t\t\taction: action_compress,\n\t\t\t\t\tcallback_num: callback_num,\n\t\t\t\t\tresult: res\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tsetTimeout(do_action, 1);\n\t}\n\t\n\tfunction decompress() {\n\t\tvar this$static = $LZMADemo(new LZMADemo()),\n\t\t\tpercent,\n\t\t\tdata,\n\t\t\tstart,\n\t\t\ttext,\n\t\t\t/// Arguments\n\t\t\tbyte_arr = arguments[0],\n\t\t\tcallback_num,\n\t\t\ton_finish,\n\t\t\ton_progress;\n\t\t\n\t\tif (typeof arguments[1] === \"function\") {\n\t\t\ton_finish = arguments[1];\n\t\t\tif (typeof arguments[2] === \"function\") {\n\t\t\t\ton_progress = arguments[2];\n\t\t\t}\n\t\t} else {\n\t\t\tcallback_num = arguments[1];\n\t\t}\n\t\t\n\t\tdata = initValues(_3B_classLit, 0, -1, byte_arr);\n\t\t\n\t\tthis$static.d = $LZMAByteArrayDecompressor(new LZMAByteArrayDecompressor(), data);\n\t\t\n\t\tif (on_progress) {\n\t\t\ton_progress(0);\n\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\tupdate_progress(0, callback_num);\n\t\t}\n\t\t\n\t\tfunction do_action() {\n\t\t\tvar res;\n\t\t\tstart = (new Date).getTime();\n\t\t\twhile ($execute_0(this$static.d)) {\n\t\t\t\tpercent = toDouble(this$static.d.chunker.decoder.nowPos64) / toDouble(this$static.d.length_0);\n\t\t\t\t/// If about 200 miliseconds have passed, update the progress.\n\t\t\t\tif ((new Date).getTime() - start > 200) {\n\t\t\t\t\tif (on_progress) {\n\t\t\t\t\t\ton_progress(percent);\n\t\t\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\t\t\tupdate_progress(percent, callback_num);\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(do_action, 0);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (on_progress) {\n\t\t\t\ton_progress(1);\n\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\tupdate_progress(1, callback_num);\n\t\t\t}\n\t\t\t\n\t\t\tres = decode($toByteArray(this$static.d.output));\n\t\t\t\n\t\t\tif (on_finish) {\n\t\t\t\ton_finish(res);\n\t\t\t} else if (typeof callback_num !== \"undefined\") {\n\t\t\t\tpostMessage({\n\t\t\t\t\taction: action_decompress,\n\t\t\t\t\tcallback_num: callback_num,\n\t\t\t\t\tresult: res\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tsetTimeout(do_action, 0);\n\t}\n\t\n\tfunction $onModuleLoad(this$static) {\n\t\tcompress(this$static);\n\t\tdecompress(this$static);\n\t}\n\t\n\tfunction getClass_46() {\n\t\treturn Lorg_dellroad_lzma_demo_client_LZMADemo_2_classLit;\n\t}\n\t\n\tfunction LZMADemo () {}\n\t\n\t_ = LZMADemo.prototype = new Object_0();\n\t_.getClass$ = getClass_46;\n\t_.typeId$ = 0;\n\t_.c = null;\n\t_.d = null;\n\tvar DEFAULT_COMPRESSION_MODE;\n\tfunction init() {\n\t\t!!$stats && $stats({moduleName:$moduleName, subSystem:'startup', evtGroup:'moduleStartup', millis:(new Date()).getTime(), type:'onModuleLoadStart', className:'org.dellroad.lzma.demo.client.LZMADemo'});\n\t}\n\t\n\tfunction gwtOnLoad(errFn, modName, modBase) {\n\t\t$moduleName = modName;\n\t\t$moduleBase = modBase;\n\t\tif (errFn) {\n\t\t\ttry {\n\t\t\t\tinit();\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\terrFn(modName);\n\t\t\t}\n\t\t} else {\n\t\t\tinit();\n\t\t}\n\t}\n\t\n\tfunction nullMethod() {\n\t}\n\t\n\tvar Ljava_lang_Object_2_classLit = createForClass('java.lang.', 'Object'),\n\t\tLjava_lang_Throwable_2_classLit = createForClass('java.lang.', 'Throwable'),\n\t\tLjava_lang_Exception_2_classLit = createForClass('java.lang.', 'Exception'),\n\t\tLjava_lang_RuntimeException_2_classLit = createForClass('java.lang.', 'RuntimeException'),\n\t\tLcom_google_gwt_core_client_JavaScriptException_2_classLit = createForClass('com.google.gwt.core.client.', 'JavaScriptException'),\n\t\tLcom_google_gwt_core_client_JavaScriptObject_2_classLit = createForClass('com.google.gwt.core.client.', 'JavaScriptObject$'), _3_3D_classLit = createForArray('', '[[D'),\n\t\tLjava_io_InputStream_2_classLit = createForClass('java.io.', 'InputStream'),\n\t\tLjava_io_ByteArrayInputStream_2_classLit = createForClass('java.io.', 'ByteArrayInputStream'), _3B_classLit = createForArray('', '[B'),\n\t\tLjava_io_OutputStream_2_classLit = createForClass('java.io.', 'OutputStream'),\n\t\tLjava_io_ByteArrayOutputStream_2_classLit = createForClass('java.io.', 'ByteArrayOutputStream'),\n\t\tLjava_io_IOException_2_classLit = createForClass('java.io.', 'IOException'),\n\t\tLjava_lang_Enum_2_classLit = createForClass('java.lang.', 'Enum'),\n\t\tLjava_lang_ArithmeticException_2_classLit = createForClass('java.lang.', 'ArithmeticException'),\n\t\tLjava_lang_ArrayStoreException_2_classLit = createForClass('java.lang.', 'ArrayStoreException'), _3C_classLit = createForArray('', '[C'),\n\t\tLjava_lang_Class_2_classLit = createForClass('java.lang.', 'Class'),\n\t\tLjava_lang_ClassCastException_2_classLit = createForClass('java.lang.', 'ClassCastException'),\n\t\tLjava_lang_IllegalArgumentException_2_classLit = createForClass('java.lang.', 'IllegalArgumentException'),\n\t\tLjava_lang_IllegalStateException_2_classLit = createForClass('java.lang.', 'IllegalStateException'),\n\t\tLjava_lang_IndexOutOfBoundsException_2_classLit = createForClass('java.lang.', 'IndexOutOfBoundsException'), _3I_classLit = createForArray('', '[I'),\n\t\tLjava_lang_NullPointerException_2_classLit = createForClass('java.lang.', 'NullPointerException'),\n\t\tLjava_lang_String_2_classLit = createForClass('java.lang.', 'String'),\n\t\tLjava_lang_StringBuilder_2_classLit = createForClass('java.lang.', 'StringBuilder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZ_InWindow_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZ.', 'InWindow'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZ_BinTree_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZ.', 'BinTree'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZ_OutWindow_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZ.', 'OutWindow'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Chunker_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Chunker'), _3S_classLit = createForArray('', '[S'), _3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit = createForArray('[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'BitTreeDecoder;'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Decoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LenDecoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Decoder$LenDecoder'), _3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder$Decoder2_2_classLit = createForArray('[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Decoder$LiteralDecoder$Decoder2;'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Decoder$LiteralDecoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Decoder$LiteralDecoder$Decoder2_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Decoder$LiteralDecoder$Decoder2'), _3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$Optimal_2_classLit = createForArray('[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$Optimal;'), _3Lorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit = createForArray('[Lorg.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'BitTreeEncoder;'), _3J_classLit = createForArray('', '[J'), _3Z_classLit = createForArray('', '[Z'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder'), _3Lorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder$Encoder2_2_classLit = createForArray('[Lorg.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$LiteralEncoder$Encoder2;'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$LiteralEncoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LiteralEncoder$Encoder2_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$LiteralEncoder$Encoder2'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LenEncoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$LenEncoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$LenPriceTableEncoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$LenPriceTableEncoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_LZMA_Encoder$Optimal_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.LZMA.', 'Encoder$Optimal'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeDecoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'BitTreeDecoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_BitTreeEncoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'BitTreeEncoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_Decoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'Decoder'),\n\t\tLorg_dellroad_lzma_client_SevenZip_Compression_RangeCoder_Encoder_2_classLit = createForClass('org.dellroad.lzma.client.SevenZip.Compression.RangeCoder.', 'Encoder'),\n\t\tLorg_dellroad_lzma_client_CompressionMode_2_classLit = createForEnum('org.dellroad.lzma.client.', 'CompressionMode'),\n\t\tLorg_dellroad_lzma_client_LZMACompressor_2_classLit = createForClass('org.dellroad.lzma.client.', 'LZMACompressor'),\n\t\tLorg_dellroad_lzma_client_LZMAByteArrayCompressor_2_classLit = createForClass('org.dellroad.lzma.client.', 'LZMAByteArrayCompressor'),\n\t\tLorg_dellroad_lzma_client_LZMADecompressor_2_classLit = createForClass('org.dellroad.lzma.client.', 'LZMADecompressor'),\n\t\tLorg_dellroad_lzma_client_LZMAByteArrayDecompressor_2_classLit = createForClass('org.dellroad.lzma.client.', 'LZMAByteArrayDecompressor'),\n\t\tLorg_dellroad_lzma_demo_client_LZMADemo_2_classLit = createForClass('org.dellroad.lzma.demo.client.', 'LZMADemo');\n\t\n\tgwtOnLoad(function() {},'lzma_demo','');\n\t\n\t\n\tvar get_mode_obj = (function () {\n\t\tvar modes = [\n\t\t\t\t\t\t{dictionarySize: 16, fb: 64,  matchFinder: 0, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 20, fb: 64,  matchFinder: 0, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 19, fb: 64,  matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 20, fb: 64,  matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 21, fb: 128, matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 22, fb: 128, matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 23, fb: 128, matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 24, fb: 255, matchFinder: 1, lc: 3, lp: 0, pb: 2},\n\t\t\t\t\t\t{dictionarySize: 25, fb: 255, matchFinder: 1, lc: 3, lp: 0, pb: 2}\n\t\t\t\t\t];\n\t\t\n\t\tfunction isNumber(n) {\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\n\t\t}\n\n\t\treturn function (mode) {\n\t\t\tif (!isNumber(mode)) {\n\t\t\t\tmode = 1;\n\t\t\t} else {\n\t\t\t\tif (mode < 1) {\n\t\t\t\t\tmode = 1;\n\t\t\t\t} else if (mode > 9) {\n\t\t\t\t\tmode = 9;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn modes[mode - 1];\n\t\t}\n\t}());\n\t\n\treturn {\n\t\tcompress:   compress,\n\t\tdecompress: decompress\n\t};\n}());\n\n/// Allow node.js to be able to access this directly if it is included directly.\nthis.LZMA = LZMA;\n\n; browserify_shim__define__module__export__(typeof LZMA != \"undefined\" ? LZMA : window.LZMA);\n\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n",
    "\n; jQuery = global.jQuery = require(\"jquery\");\n; var __browserify_shim_require__=require;(function browserifyShim(module, define, require) {\n/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)\n * Licensed under the MIT License (LICENSE.txt).\n *\n * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.\n * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.\n * Thanks to: Seamus Leahy for adding deltaX and deltaY\n *\n * Version: 3.0.6\n * \n * Requires: 1.2.2+\n */\n\n(function($) {\n\nvar types = ['DOMMouseScroll', 'mousewheel'];\n\nif ($.event.fixHooks) {\n    for ( var i=types.length; i; ) {\n        $.event.fixHooks[ types[--i] ] = $.event.mouseHooks;\n    }\n}\n\n$.event.special.mousewheel = {\n    setup: function() {\n        if ( this.addEventListener ) {\n            for ( var i=types.length; i; ) {\n                this.addEventListener( types[--i], handler, false );\n            }\n        } else {\n            this.onmousewheel = handler;\n        }\n    },\n    \n    teardown: function() {\n        if ( this.removeEventListener ) {\n            for ( var i=types.length; i; ) {\n                this.removeEventListener( types[--i], handler, false );\n            }\n        } else {\n            this.onmousewheel = null;\n        }\n    }\n};\n\n$.fn.extend({\n    mousewheel: function(fn) {\n        return fn ? this.bind(\"mousewheel\", fn) : this.trigger(\"mousewheel\");\n    },\n    \n    unmousewheel: function(fn) {\n        return this.unbind(\"mousewheel\", fn);\n    }\n});\n\n\nfunction handler(event) {\n    var orgEvent = event || window.event, args = [].slice.call( arguments, 1 ), delta = 0, returnValue = true, deltaX = 0, deltaY = 0;\n    event = $.event.fix(orgEvent);\n    event.type = \"mousewheel\";\n    \n    // Old school scrollwheel delta\n    if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta/120; }\n    if ( orgEvent.detail     ) { delta = -orgEvent.detail/3; }\n    \n    // New school multidimensional scroll (touchpads) deltas\n    deltaY = delta;\n    \n    // Gecko\n    if ( orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {\n        deltaY = 0;\n        deltaX = -1*delta;\n    }\n    \n    // Webkit\n    if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY/120; }\n    if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = -1*orgEvent.wheelDeltaX/120; }\n    \n    // Add event and delta to the front of the arguments\n    args.unshift(event, delta, deltaX, deltaY);\n    \n    return ($.event.dispatch || $.event.handle).apply(this, args);\n}\n\n})(jQuery);\n}).call(global, module, undefined, undefined);\n",
    "\n; jQuery = global.jQuery = require(\"jquery\");\n; var __browserify_shim_require__=require;(function browserifyShim(module, define, require) {\n/**\n * @author trixta and bodrovis\n * @version 1.3\n */\n(function($){\n    var mwheelI = {\n            pos: [-260, -260]\n        },\n        minDif \t= 3,\n        doc \t= document,\n        root \t= doc.documentElement,\n        body \t= doc.body,\n        longDelay, shortDelay\n        ;\n\n    function unsetPos(){\n        if(this === mwheelI.elem){\n            mwheelI.pos = [-260, -260];\n            mwheelI.elem = false;\n            minDif = 3;\n        }\n    }\n\n    $.event.special.mwheelIntent = {\n        setup: function() {\n            var jElm = $(this).on('mousewheel', $.event.special.mwheelIntent.handler);\n            if( this !== doc && this !== root && this !== body ){\n                jElm.on('mouseleave', unsetPos);\n            }\n            jElm = null;\n            return true;\n        },\n        teardown: function(){\n            $(this)\n                .off('mousewheel', $.event.special.mwheelIntent.handler)\n                .off('mouseleave', unsetPos)\n            ;\n            return true;\n        },\n        handler: function(e, d) {\n            var pos = [e.clientX, e.clientY];\n            if( this === mwheelI.elem || Math.abs(mwheelI.pos[0] - pos[0]) > minDif ||\n                Math.abs(mwheelI.pos[1] - pos[1]) > minDif ) {\n                mwheelI.elem = this;\n                mwheelI.pos = pos;\n                minDif = 250;\n\n                clearTimeout(shortDelay);\n                shortDelay = setTimeout(function(){\n                    minDif = 10;\n                }, 200);\n                clearTimeout(longDelay);\n                longDelay = setTimeout(function(){\n                    minDif = 3;\n                }, 1500);\n                e = $.extend({}, e, {type: 'mwheelIntent'});\n                return $.event.dispatch.apply(this, arguments);\n            }\n        }\n    };\n\n    $.fn.extend({\n        mwheelIntent: function(fn) {\n            return fn ? this.on(\"mwheelIntent\", fn) : this.trigger(\"mwheelIntent\");\n        },\n\n        unmwheelIntent: function(fn) {\n            return this.off(\"mwheelIntent\", fn);\n        }\n    });\n\n    $(function(){\n        body = doc.body;\n        //assume that document is always scrollable, doesn't hurt if not\n        $(doc).on('mwheelIntent.mwheelIntentDefault', $.noop);\n    });\n})(jQuery);\n\n}).call(global, module, undefined, undefined);\n",
    "; var __browserify_shim_require__=require;(function browserifyShim(module, exports, require, define, browserify_shim__define__module__export__) {\n/* wax - 7.0.1 - v6.0.4-181-ga34788e */\n\n\n!function (name, context, definition) {\n  //if (typeof module !== 'undefined') module.exports = definition(name, context);\n  //else if (typeof define === 'function' && typeof define.amd  === 'object') define(definition);\n  //else context[name] = definition(name, context);\n  context[name] = definition(name, context);\n}('bean', this, function (name, context) {\n  var win = window\n    , old = context[name]\n    , overOut = /over|out/\n    , namespaceRegex = /[^\\.]*(?=\\..*)\\.|.*/\n    , nameRegex = /\\..*/\n    , addEvent = 'addEventListener'\n    , attachEvent = 'attachEvent'\n    , removeEvent = 'removeEventListener'\n    , detachEvent = 'detachEvent'\n    , doc = document || {}\n    , root = doc.documentElement || {}\n    , W3C_MODEL = root[addEvent]\n    , eventSupport = W3C_MODEL ? addEvent : attachEvent\n    , slice = Array.prototype.slice\n    , mouseTypeRegex = /click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i\n    , mouseWheelTypeRegex = /mouse.*(wheel|scroll)/i\n    , textTypeRegex = /^text/i\n    , touchTypeRegex = /^touch|^gesture/i\n    , ONE = { one: 1 } // singleton for quick matching making add() do one()\n\n    , nativeEvents = (function (hash, events, i) {\n        for (i = 0; i < events.length; i++)\n          hash[events[i]] = 1\n        return hash\n      })({}, (\n          'click dblclick mouseup mousedown contextmenu ' +                  // mouse buttons\n          'mousewheel mousemultiwheel DOMMouseScroll ' +                     // mouse wheel\n          'mouseover mouseout mousemove selectstart selectend ' +            // mouse movement\n          'keydown keypress keyup ' +                                        // keyboard\n          'orientationchange ' +                                             // mobile\n          'focus blur change reset select submit ' +                         // form elements\n          'load unload beforeunload resize move DOMContentLoaded readystatechange ' + // window\n          'error abort scroll ' +                                            // misc\n          (W3C_MODEL ? // element.fireEvent('onXYZ'... is not forgiving if we try to fire an event\n                       // that doesn't actually exist, so make sure we only do these on newer browsers\n            'show ' +                                                          // mouse buttons\n            'input invalid ' +                                                 // form elements\n            'touchstart touchmove touchend touchcancel ' +                     // touch\n            'gesturestart gesturechange gestureend ' +                         // gesture\n            'MSPointerUp MSPointerDown MSPointerCancel MSPointerMove ' +       // MS Pointer events\n            'MSPointerOver MSPointerOut ' +                                    // MS Pointer events\n            'pointerup pointerdown pointermove pointercancel' +                // MS Pointer events\n            'message readystatechange pageshow pagehide popstate ' +           // window\n            'hashchange offline online ' +                                     // window\n            'afterprint beforeprint ' +                                        // printing\n            'dragstart dragenter dragover dragleave drag drop dragend ' +      // dnd\n            'loadstart progress suspend emptied stalled loadmetadata ' +       // media\n            'loadeddata canplay canplaythrough playing waiting seeking ' +     // media\n            'seeked ended durationchange timeupdate play pause ratechange ' +  // media\n            'volumechange cuechange ' +                                        // media\n            'checking noupdate downloading cached updateready obsolete ' +     // appcache\n            '' : '')\n        ).split(' ')\n      )\n\n    , customEvents = (function () {\n        function isDescendant(parent, node) {\n          while ((node = node.parentNode) !== null) {\n            if (node === parent) return true\n          }\n          return false\n        }\n\n        function check(event) {\n          var related = event.relatedTarget\n          if (!related) return related === null\n          return (related !== this && related.prefix !== 'xul' && !/document/.test(this.toString()) && !isDescendant(this, related))\n        }\n\n        return {\n            mouseenter: { base: 'mouseover', condition: check }\n          , mouseleave: { base: 'mouseout', condition: check }\n          , mousewheel: { base: /Firefox/.test(navigator.userAgent) ? 'DOMMouseScroll' : 'mousewheel' }\n        }\n      })()\n\n    , fixEvent = (function () {\n        var commonProps = 'altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which'.split(' ')\n          , mouseProps = commonProps.concat('button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement'.split(' '))\n          , mouseWheelProps = mouseProps.concat('wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis'.split(' ')) // 'axis' is FF specific\n          , keyProps = commonProps.concat('char charCode key keyCode keyIdentifier keyLocation'.split(' '))\n          , textProps = commonProps.concat(['data'])\n          , touchProps = commonProps.concat('touches targetTouches changedTouches scale rotation'.split(' '))\n          , preventDefault = 'preventDefault'\n          , createPreventDefault = function (event) {\n              return function () {\n                if (event[preventDefault])\n                  event[preventDefault]()\n                else\n                  event.returnValue = false\n              }\n            }\n          , stopPropagation = 'stopPropagation'\n          , createStopPropagation = function (event) {\n              return function () {\n                if (event[stopPropagation])\n                  event[stopPropagation]()\n                else\n                  event.cancelBubble = true\n              }\n            }\n          , createStop = function (synEvent) {\n              return function () {\n                synEvent[preventDefault]()\n                synEvent[stopPropagation]()\n                synEvent.stopped = true\n              }\n            }\n          , copyProps = function (event, result, props) {\n              var i, p\n              for (i = props.length; i--;) {\n                p = props[i]\n                if (!(p in result) && p in event) result[p] = event[p]\n              }\n            }\n\n        return function (event, isNative) {\n          var result = { originalEvent: event, isNative: isNative }\n          if (!event)\n            return result\n\n          var props\n            , type = event.type\n            , target = event.target || event.srcElement\n\n          result[preventDefault] = createPreventDefault(event)\n          result[stopPropagation] = createStopPropagation(event)\n          result.stop = createStop(result)\n          result.target = target && target.nodeType === 3 ? target.parentNode : target\n\n          if (isNative) { // we only need basic augmentation on custom events, the rest is too expensive\n            if (type.indexOf('key') !== -1) {\n              props = keyProps\n              result.keyCode = event.which || event.keyCode\n            } else if (mouseTypeRegex.test(type)) {\n              props = mouseProps\n              result.rightClick = event.which === 3 || event.button === 2\n              result.pos = { x: 0, y: 0 }\n              if (event.pageX || event.pageY) {\n                result.clientX = event.pageX\n                result.clientY = event.pageY\n              } else if (event.clientX || event.clientY) {\n                result.clientX = event.clientX + doc.body.scrollLeft + root.scrollLeft\n                result.clientY = event.clientY + doc.body.scrollTop + root.scrollTop\n              }\n              if (overOut.test(type))\n                result.relatedTarget = event.relatedTarget || event[(type === 'mouseover' ? 'from' : 'to') + 'Element']\n            } else if (touchTypeRegex.test(type)) {\n              props = touchProps\n            } else if (mouseWheelTypeRegex.test(type)) {\n              props = mouseWheelProps\n            } else if (textTypeRegex.test(type)) {\n              props = textProps\n            }\n            copyProps(event, result, props || commonProps)\n          }\n          return result\n        }\n      })()\n\n      // if we're in old IE we can't do onpropertychange on doc or win so we use doc.documentElement for both\n    , targetElement = function (element, isNative) {\n        return !W3C_MODEL && !isNative && (element === doc || element === win) ? root : element\n      }\n\n      // we use one of these per listener, of any type\n    , RegEntry = (function () {\n        function entry(element, type, handler, original, namespaces) {\n          this.element = element\n          this.type = type\n          this.handler = handler\n          this.original = original\n          this.namespaces = namespaces\n          this.custom = customEvents[type]\n          this.isNative = nativeEvents[type] && element[eventSupport]\n          this.eventType = W3C_MODEL || this.isNative ? type : 'propertychange'\n          this.customType = !W3C_MODEL && !this.isNative && type\n          this.target = targetElement(element, this.isNative)\n          this.eventSupport = this.target[eventSupport]\n        }\n\n        entry.prototype = {\n            // given a list of namespaces, is our entry in any of them?\n            inNamespaces: function (checkNamespaces) {\n              var i, j\n              if (!checkNamespaces)\n                return true\n              if (!this.namespaces)\n                return false\n              for (i = checkNamespaces.length; i--;) {\n                for (j = this.namespaces.length; j--;) {\n                  if (checkNamespaces[i] === this.namespaces[j])\n                    return true\n                }\n              }\n              return false\n            }\n\n            // match by element, original fn (opt), handler fn (opt)\n          , matches: function (checkElement, checkOriginal, checkHandler) {\n              return this.element === checkElement &&\n                (!checkOriginal || this.original === checkOriginal) &&\n                (!checkHandler || this.handler === checkHandler)\n            }\n        }\n\n        return entry\n      })()\n\n    , registry = (function () {\n        // our map stores arrays by event type, just because it's better than storing\n        // everything in a single array. uses '$' as a prefix for the keys for safety\n        var map = {}\n\n          // generic functional search of our registry for matching listeners,\n          // `fn` returns false to break out of the loop\n          , forAll = function (element, type, original, handler, fn) {\n              if (!type || type === '*') {\n                // search the whole registry\n                for (var t in map) {\n                  if (t.charAt(0) === '$')\n                    forAll(element, t.substr(1), original, handler, fn)\n                }\n              } else {\n                var i = 0, l, list = map['$' + type], all = element === '*'\n                if (!list)\n                  return\n                for (l = list.length; i < l; i++) {\n                  if (all || list[i].matches(element, original, handler))\n                    if (!fn(list[i], list, i, type))\n                      return\n                }\n              }\n            }\n\n          , has = function (element, type, original) {\n              // we're not using forAll here simply because it's a bit slower and this\n              // needs to be fast\n              var i, list = map['$' + type]\n              if (list) {\n                for (i = list.length; i--;) {\n                  if (list[i].matches(element, original, null))\n                    return true\n                }\n              }\n              return false\n            }\n\n          , get = function (element, type, original) {\n              var entries = []\n              forAll(element, type, original, null, function (entry) { return entries.push(entry) })\n              return entries\n            }\n\n          , put = function (entry) {\n              (map['$' + entry.type] || (map['$' + entry.type] = [])).push(entry)\n              return entry\n            }\n\n          , del = function (entry) {\n              forAll(entry.element, entry.type, null, entry.handler, function (entry, list, i) {\n                list.splice(i, 1)\n                if (list.length === 0)\n                  delete map['$' + entry.type]\n                return false\n              })\n            }\n\n            // dump all entries, used for onunload\n          , entries = function () {\n              var t, entries = []\n              for (t in map) {\n                if (t.charAt(0) === '$')\n                  entries = entries.concat(map[t])\n              }\n              return entries\n            }\n\n        return { has: has, get: get, put: put, del: del, entries: entries }\n      })()\n\n      // add and remove listeners to DOM elements\n    , listener = W3C_MODEL ? function (element, type, fn, add) {\n        element[add ? addEvent : removeEvent](type, fn, false)\n      } : function (element, type, fn, add, custom) {\n        if (custom && add && element['_on' + custom] === null)\n          element['_on' + custom] = 0\n        element[add ? attachEvent : detachEvent]('on' + type, fn)\n      }\n\n    , nativeHandler = function (element, fn, args) {\n        return function (event) {\n          event = fixEvent(event || ((this.ownerDocument || this.document || this).parentWindow || win).event, true)\n          return fn.apply(element, [event].concat(args))\n        }\n      }\n\n    , customHandler = function (element, fn, type, condition, args, isNative) {\n        return function (event) {\n          if (condition ? condition.apply(this, arguments) : W3C_MODEL ? true : event && event.propertyName === '_on' + type || !event) {\n            if (event)\n              event = fixEvent(event || ((this.ownerDocument || this.document || this).parentWindow || win).event, isNative)\n            fn.apply(element, event && (!args || args.length === 0) ? arguments : slice.call(arguments, event ? 0 : 1).concat(args))\n          }\n        }\n      }\n\n    , once = function (rm, element, type, fn, originalFn) {\n        // wrap the handler in a handler that does a remove as well\n        return function () {\n          rm(element, type, originalFn)\n          fn.apply(this, arguments)\n        }\n      }\n\n    , removeListener = function (element, orgType, handler, namespaces) {\n        var i, l, entry\n          , type = (orgType && orgType.replace(nameRegex, ''))\n          , handlers = registry.get(element, type, handler)\n\n        for (i = 0, l = handlers.length; i < l; i++) {\n          if (handlers[i].inNamespaces(namespaces)) {\n            if ((entry = handlers[i]).eventSupport)\n              listener(entry.target, entry.eventType, entry.handler, false, entry.type)\n            // TODO: this is problematic, we have a registry.get() and registry.del() that\n            // both do registry searches so we waste cycles doing this. Needs to be rolled into\n            // a single registry.forAll(fn) that removes while finding, but the catch is that\n            // we'll be splicing the arrays that we're iterating over. Needs extra tests to\n            // make sure we don't screw it up. @rvagg\n            registry.del(entry)\n          }\n        }\n      }\n\n    , addListener = function (element, orgType, fn, originalFn, args) {\n        var entry\n          , type = orgType.replace(nameRegex, '')\n          , namespaces = orgType.replace(namespaceRegex, '').split('.')\n\n        if (registry.has(element, type, fn))\n          return element // no dupe\n        if (type === 'unload')\n          fn = once(removeListener, element, type, fn, originalFn) // self clean-up\n        if (customEvents[type]) {\n          if (customEvents[type].condition)\n            fn = customHandler(element, fn, type, customEvents[type].condition, true)\n          type = customEvents[type].base || type\n        }\n        entry = registry.put(new RegEntry(element, type, fn, originalFn, namespaces[0] && namespaces))\n        entry.handler = entry.isNative ?\n          nativeHandler(element, entry.handler, args) :\n          customHandler(element, entry.handler, type, false, args, false)\n        if (entry.eventSupport)\n          listener(entry.target, entry.eventType, entry.handler, true, entry.customType)\n      }\n\n    , del = function (selector, fn, $) {\n        return function (e) {\n          var target, i, array = typeof selector === 'string' ? $(selector, this) : selector\n          for (target = e.target; target && target !== this; target = target.parentNode) {\n            for (i = array.length; i--;) {\n              if (array[i] === target) {\n                return fn.apply(target, arguments)\n              }\n            }\n          }\n        }\n      }\n\n    , remove = function (element, typeSpec, fn) {\n        var k, m, type, namespaces, i\n          , rm = removeListener\n          , isString = typeSpec && typeof typeSpec === 'string'\n\n        if (isString && typeSpec.indexOf(' ') > 0) {\n          // remove(el, 't1 t2 t3', fn) or remove(el, 't1 t2 t3')\n          typeSpec = typeSpec.split(' ')\n          for (i = typeSpec.length; i--;)\n            remove(element, typeSpec[i], fn)\n          return element\n        }\n        type = isString && typeSpec.replace(nameRegex, '')\n        if (type && customEvents[type])\n          type = customEvents[type].type\n        if (!typeSpec || isString) {\n          // remove(el) or remove(el, t1.ns) or remove(el, .ns) or remove(el, .ns1.ns2.ns3)\n          if (namespaces = isString && typeSpec.replace(namespaceRegex, ''))\n            namespaces = namespaces.split('.')\n          rm(element, type, fn, namespaces)\n        } else if (typeof typeSpec === 'function') {\n          // remove(el, fn)\n          rm(element, null, typeSpec)\n        } else {\n          // remove(el, { t1: fn1, t2, fn2 })\n          for (k in typeSpec) {\n            if (typeSpec.hasOwnProperty(k))\n              remove(element, k, typeSpec[k])\n          }\n        }\n        return element\n      }\n\n    , add = function (element, events, fn, delfn, $) {\n        var type, types, i, args\n          , originalFn = fn\n          , isDel = fn && typeof fn === 'string'\n\n        if (events && !fn && typeof events === 'object') {\n          for (type in events) {\n            if (events.hasOwnProperty(type))\n              add.apply(this, [ element, type, events[type] ])\n          }\n        } else {\n          args = arguments.length > 3 ? slice.call(arguments, 3) : []\n          types = (isDel ? fn : events).split(' ')\n          isDel && (fn = del(events, (originalFn = delfn), $)) && (args = slice.call(args, 1))\n          // special case for one()\n          this === ONE && (fn = once(remove, element, events, fn, originalFn))\n          for (i = types.length; i--;) addListener(element, types[i], fn, originalFn, args)\n        }\n        return element\n      }\n\n    , one = function () {\n        return add.apply(ONE, arguments)\n      }\n\n    , fireListener = W3C_MODEL ? function (isNative, type, element) {\n        var evt = doc.createEvent(isNative ? 'HTMLEvents' : 'UIEvents')\n        evt[isNative ? 'initEvent' : 'initUIEvent'](type, true, true, win, 1)\n        element.dispatchEvent(evt)\n      } : function (isNative, type, element) {\n        element = targetElement(element, isNative)\n        // if not-native then we're using onpropertychange so we just increment a custom property\n        isNative ? element.fireEvent('on' + type, doc.createEventObject()) : element['_on' + type]++\n      }\n\n    , fire = function (element, type, args) {\n        var i, j, l, names, handlers\n          , types = type.split(' ')\n\n        for (i = types.length; i--;) {\n          type = types[i].replace(nameRegex, '')\n          if (names = types[i].replace(namespaceRegex, ''))\n            names = names.split('.')\n          if (!names && !args && element[eventSupport]) {\n            fireListener(nativeEvents[type], type, element)\n          } else {\n            // non-native event, either because of a namespace, arguments or a non DOM element\n            // iterate over all listeners and manually 'fire'\n            handlers = registry.get(element, type)\n            args = [false].concat(args)\n            for (j = 0, l = handlers.length; j < l; j++) {\n              if (handlers[j].inNamespaces(names))\n                handlers[j].handler.apply(element, args)\n            }\n          }\n        }\n        return element\n      }\n\n    , clone = function (element, from, type) {\n        var i = 0\n          , handlers = registry.get(from, type)\n          , l = handlers.length\n\n        for (;i < l; i++)\n          handlers[i].original && add(element, handlers[i].type, handlers[i].original)\n        return element\n      }\n\n    , bean = {\n          add: add\n        , one: one\n        , remove: remove\n        , clone: clone\n        , fire: fire\n        , noConflict: function () {\n            context[name] = old\n            return this\n          }\n      }\n\n  if (win[attachEvent]) {\n    // for IE, clean up on unload to avoid leaks\n    var cleanup = function () {\n      var i, entries = registry.entries()\n      for (i in entries) {\n        if (entries[i].type && entries[i].type !== 'unload')\n          remove(entries[i].element, entries[i].type)\n      }\n      win[detachEvent]('onunload', cleanup)\n      win.CollectGarbage && win.CollectGarbage()\n    }\n    win[attachEvent]('onunload', cleanup)\n  }\n\n  return bean\n})\n// Copyright Google Inc.\n// Licensed under the Apache Licence Version 2.0\n// Autogenerated at Tue Oct 11 13:36:46 EDT 2011\n// @provides html4\nvar html4 = {};\nhtml4.atype = {\n  NONE: 0,\n  URI: 1,\n  URI_FRAGMENT: 11,\n  SCRIPT: 2,\n  STYLE: 3,\n  ID: 4,\n  IDREF: 5,\n  IDREFS: 6,\n  GLOBAL_NAME: 7,\n  LOCAL_NAME: 8,\n  CLASSES: 9,\n  FRAME_TARGET: 10\n};\nhtml4.ATTRIBS = {\n  '*::class': 9,\n  '*::dir': 0,\n  '*::id': 4,\n  '*::lang': 0,\n  '*::onclick': 2,\n  '*::ondblclick': 2,\n  '*::onkeydown': 2,\n  '*::onkeypress': 2,\n  '*::onkeyup': 2,\n  '*::onload': 2,\n  '*::onmousedown': 2,\n  '*::onmousemove': 2,\n  '*::onmouseout': 2,\n  '*::onmouseover': 2,\n  '*::onmouseup': 2,\n  '*::style': 3,\n  '*::title': 0,\n  'a::accesskey': 0,\n  'a::coords': 0,\n  'a::href': 1,\n  'a::hreflang': 0,\n  'a::name': 7,\n  'a::onblur': 2,\n  'a::onfocus': 2,\n  'a::rel': 0,\n  'a::rev': 0,\n  'a::shape': 0,\n  'a::tabindex': 0,\n  'a::target': 10,\n  'a::type': 0,\n  'area::accesskey': 0,\n  'area::alt': 0,\n  'area::coords': 0,\n  'area::href': 1,\n  'area::nohref': 0,\n  'area::onblur': 2,\n  'area::onfocus': 2,\n  'area::shape': 0,\n  'area::tabindex': 0,\n  'area::target': 10,\n  'bdo::dir': 0,\n  'blockquote::cite': 1,\n  'br::clear': 0,\n  'button::accesskey': 0,\n  'button::disabled': 0,\n  'button::name': 8,\n  'button::onblur': 2,\n  'button::onfocus': 2,\n  'button::tabindex': 0,\n  'button::type': 0,\n  'button::value': 0,\n  'canvas::height': 0,\n  'canvas::width': 0,\n  'caption::align': 0,\n  'col::align': 0,\n  'col::char': 0,\n  'col::charoff': 0,\n  'col::span': 0,\n  'col::valign': 0,\n  'col::width': 0,\n  'colgroup::align': 0,\n  'colgroup::char': 0,\n  'colgroup::charoff': 0,\n  'colgroup::span': 0,\n  'colgroup::valign': 0,\n  'colgroup::width': 0,\n  'del::cite': 1,\n  'del::datetime': 0,\n  'dir::compact': 0,\n  'div::align': 0,\n  'dl::compact': 0,\n  'font::color': 0,\n  'font::face': 0,\n  'font::size': 0,\n  'form::accept': 0,\n  'form::action': 1,\n  'form::autocomplete': 0,\n  'form::enctype': 0,\n  'form::method': 0,\n  'form::name': 7,\n  'form::onreset': 2,\n  'form::onsubmit': 2,\n  'form::target': 10,\n  'h1::align': 0,\n  'h2::align': 0,\n  'h3::align': 0,\n  'h4::align': 0,\n  'h5::align': 0,\n  'h6::align': 0,\n  'hr::align': 0,\n  'hr::noshade': 0,\n  'hr::size': 0,\n  'hr::width': 0,\n  'iframe::align': 0,\n  'iframe::frameborder': 0,\n  'iframe::height': 0,\n  'iframe::marginheight': 0,\n  'iframe::marginwidth': 0,\n  'iframe::width': 0,\n  'img::align': 0,\n  'img::alt': 0,\n  'img::border': 0,\n  'img::height': 0,\n  'img::hspace': 0,\n  'img::ismap': 0,\n  'img::name': 7,\n  'img::src': 1,\n  'img::usemap': 11,\n  'img::vspace': 0,\n  'img::width': 0,\n  'input::accept': 0,\n  'input::accesskey': 0,\n  'input::align': 0,\n  'input::alt': 0,\n  'input::autocomplete': 0,\n  'input::checked': 0,\n  'input::disabled': 0,\n  'input::ismap': 0,\n  'input::maxlength': 0,\n  'input::name': 8,\n  'input::onblur': 2,\n  'input::onchange': 2,\n  'input::onfocus': 2,\n  'input::onselect': 2,\n  'input::readonly': 0,\n  'input::size': 0,\n  'input::src': 1,\n  'input::tabindex': 0,\n  'input::type': 0,\n  'input::usemap': 11,\n  'input::value': 0,\n  'ins::cite': 1,\n  'ins::datetime': 0,\n  'label::accesskey': 0,\n  'label::for': 5,\n  'label::onblur': 2,\n  'label::onfocus': 2,\n  'legend::accesskey': 0,\n  'legend::align': 0,\n  'li::type': 0,\n  'li::value': 0,\n  'map::name': 7,\n  'menu::compact': 0,\n  'ol::compact': 0,\n  'ol::start': 0,\n  'ol::type': 0,\n  'optgroup::disabled': 0,\n  'optgroup::label': 0,\n  'option::disabled': 0,\n  'option::label': 0,\n  'option::selected': 0,\n  'option::value': 0,\n  'p::align': 0,\n  'pre::width': 0,\n  'q::cite': 1,\n  'select::disabled': 0,\n  'select::multiple': 0,\n  'select::name': 8,\n  'select::onblur': 2,\n  'select::onchange': 2,\n  'select::onfocus': 2,\n  'select::size': 0,\n  'select::tabindex': 0,\n  'table::align': 0,\n  'table::bgcolor': 0,\n  'table::border': 0,\n  'table::cellpadding': 0,\n  'table::cellspacing': 0,\n  'table::frame': 0,\n  'table::rules': 0,\n  'table::summary': 0,\n  'table::width': 0,\n  'tbody::align': 0,\n  'tbody::char': 0,\n  'tbody::charoff': 0,\n  'tbody::valign': 0,\n  'td::abbr': 0,\n  'td::align': 0,\n  'td::axis': 0,\n  'td::bgcolor': 0,\n  'td::char': 0,\n  'td::charoff': 0,\n  'td::colspan': 0,\n  'td::headers': 6,\n  'td::height': 0,\n  'td::nowrap': 0,\n  'td::rowspan': 0,\n  'td::scope': 0,\n  'td::valign': 0,\n  'td::width': 0,\n  'textarea::accesskey': 0,\n  'textarea::cols': 0,\n  'textarea::disabled': 0,\n  'textarea::name': 8,\n  'textarea::onblur': 2,\n  'textarea::onchange': 2,\n  'textarea::onfocus': 2,\n  'textarea::onselect': 2,\n  'textarea::readonly': 0,\n  'textarea::rows': 0,\n  'textarea::tabindex': 0,\n  'tfoot::align': 0,\n  'tfoot::char': 0,\n  'tfoot::charoff': 0,\n  'tfoot::valign': 0,\n  'th::abbr': 0,\n  'th::align': 0,\n  'th::axis': 0,\n  'th::bgcolor': 0,\n  'th::char': 0,\n  'th::charoff': 0,\n  'th::colspan': 0,\n  'th::headers': 6,\n  'th::height': 0,\n  'th::nowrap': 0,\n  'th::rowspan': 0,\n  'th::scope': 0,\n  'th::valign': 0,\n  'th::width': 0,\n  'thead::align': 0,\n  'thead::char': 0,\n  'thead::charoff': 0,\n  'thead::valign': 0,\n  'tr::align': 0,\n  'tr::bgcolor': 0,\n  'tr::char': 0,\n  'tr::charoff': 0,\n  'tr::valign': 0,\n  'ul::compact': 0,\n  'ul::type': 0\n};\nhtml4.eflags = {\n  OPTIONAL_ENDTAG: 1,\n  EMPTY: 2,\n  CDATA: 4,\n  RCDATA: 8,\n  UNSAFE: 16,\n  FOLDABLE: 32,\n  SCRIPT: 64,\n  STYLE: 128\n};\nhtml4.ELEMENTS = {\n  'a': 0,\n  'abbr': 0,\n  'acronym': 0,\n  'address': 0,\n  'applet': 16,\n  'area': 2,\n  'b': 0,\n  'base': 18,\n  'basefont': 18,\n  'bdo': 0,\n  'big': 0,\n  'blockquote': 0,\n  'body': 49,\n  'br': 2,\n  'button': 0,\n  'canvas': 0,\n  'caption': 0,\n  'center': 0,\n  'cite': 0,\n  'code': 0,\n  'col': 2,\n  'colgroup': 1,\n  'dd': 1,\n  'del': 0,\n  'dfn': 0,\n  'dir': 0,\n  'div': 0,\n  'dl': 0,\n  'dt': 1,\n  'em': 0,\n  'fieldset': 0,\n  'font': 0,\n  'form': 0,\n  'frame': 18,\n  'frameset': 16,\n  'h1': 0,\n  'h2': 0,\n  'h3': 0,\n  'h4': 0,\n  'h5': 0,\n  'h6': 0,\n  'head': 49,\n  'hr': 2,\n  'html': 49,\n  'i': 0,\n  'iframe': 4,\n  'img': 2,\n  'input': 2,\n  'ins': 0,\n  'isindex': 18,\n  'kbd': 0,\n  'label': 0,\n  'legend': 0,\n  'li': 1,\n  'link': 18,\n  'map': 0,\n  'menu': 0,\n  'meta': 18,\n  'nobr': 0,\n  'noembed': 4,\n  'noframes': 20,\n  'noscript': 20,\n  'object': 16,\n  'ol': 0,\n  'optgroup': 0,\n  'option': 1,\n  'p': 1,\n  'param': 18,\n  'pre': 0,\n  'q': 0,\n  's': 0,\n  'samp': 0,\n  'script': 84,\n  'select': 0,\n  'small': 0,\n  'span': 0,\n  'strike': 0,\n  'strong': 0,\n  'style': 148,\n  'sub': 0,\n  'sup': 0,\n  'table': 0,\n  'tbody': 1,\n  'td': 1,\n  'textarea': 8,\n  'tfoot': 1,\n  'th': 1,\n  'thead': 1,\n  'title': 24,\n  'tr': 1,\n  'tt': 0,\n  'u': 0,\n  'ul': 0,\n  'var': 0\n};\nhtml4.ueffects = {\n  NOT_LOADED: 0,\n  SAME_DOCUMENT: 1,\n  NEW_DOCUMENT: 2\n};\nhtml4.URIEFFECTS = {\n  'a::href': 2,\n  'area::href': 2,\n  'blockquote::cite': 0,\n  'body::background': 1,\n  'del::cite': 0,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 0,\n  'q::cite': 0\n};\nhtml4.ltypes = {\n  UNSANDBOXED: 2,\n  SANDBOXED: 1,\n  DATA: 0\n};\nhtml4.LOADERTYPES = {\n  'a::href': 2,\n  'area::href': 2,\n  'blockquote::cite': 2,\n  'body::background': 1,\n  'del::cite': 2,\n  'form::action': 2,\n  'img::src': 1,\n  'input::src': 1,\n  'ins::cite': 2,\n  'q::cite': 2\n};;\n// Copyright (C) 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * An HTML sanitizer that can satisfy a variety of security policies.\n *\n * <p>\n * The HTML sanitizer is built around a SAX parser and HTML element and\n * attributes schemas.\n *\n * @author mikesamuel@gmail.com\n * @requires html4\n * @overrides window\n * @provides html, html_sanitize\n */\n\n/**\n * @namespace\n */\nvar html = (function (html4) {\n  var lcase;\n  // The below may not be true on browsers in the Turkish locale.\n  if ('script' === 'SCRIPT'.toLowerCase()) {\n    lcase = function (s) { return s.toLowerCase(); };\n  } else {\n    /**\n     * {@updoc\n     * $ lcase('SCRIPT')\n     * # 'script'\n     * $ lcase('script')\n     * # 'script'\n     * }\n     */\n    lcase = function (s) {\n      return s.replace(\n          /[A-Z]/g,\n          function (ch) {\n            return String.fromCharCode(ch.charCodeAt(0) | 32);\n          });\n    };\n  }\n\n  var ENTITIES = {\n    lt   : '<',\n    gt   : '>',\n    amp  : '&',\n    nbsp : '\\240',\n    quot : '\"',\n    apos : '\\''\n  };\n  \n  // Schemes on which to defer to uripolicy. Urls with other schemes are denied\n  var WHITELISTED_SCHEMES = /^(?:https?|mailto|data)$/i;\n\n  var decimalEscapeRe = /^#(\\d+)$/;\n  var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n  /**\n   * Decodes an HTML entity.\n   *\n   * {@updoc\n   * $ lookupEntity('lt')\n   * # '<'\n   * $ lookupEntity('GT')\n   * # '>'\n   * $ lookupEntity('amp')\n   * # '&'\n   * $ lookupEntity('nbsp')\n   * # '\\xA0'\n   * $ lookupEntity('apos')\n   * # \"'\"\n   * $ lookupEntity('quot')\n   * # '\"'\n   * $ lookupEntity('#xa')\n   * # '\\n'\n   * $ lookupEntity('#10')\n   * # '\\n'\n   * $ lookupEntity('#x0a')\n   * # '\\n'\n   * $ lookupEntity('#010')\n   * # '\\n'\n   * $ lookupEntity('#x00A')\n   * # '\\n'\n   * $ lookupEntity('Pi')      // Known failure\n   * # '\\u03A0'\n   * $ lookupEntity('pi')      // Known failure\n   * # '\\u03C0'\n   * }\n   *\n   * @param name the content between the '&' and the ';'.\n   * @return a single unicode code-point as a string.\n   */\n  function lookupEntity(name) {\n    name = lcase(name);  // TODO: &pi; is different from &Pi;\n    if (ENTITIES.hasOwnProperty(name)) { return ENTITIES[name]; }\n    var m = name.match(decimalEscapeRe);\n    if (m) {\n      return String.fromCharCode(parseInt(m[1], 10));\n    } else if (!!(m = name.match(hexEscapeRe))) {\n      return String.fromCharCode(parseInt(m[1], 16));\n    }\n    return '';\n  }\n\n  function decodeOneEntity(_, name) {\n    return lookupEntity(name);\n  }\n\n  var nulRe = /\\0/g;\n  function stripNULs(s) {\n    return s.replace(nulRe, '');\n  }\n\n  var entityRe = /&(#\\d+|#x[0-9A-Fa-f]+|\\w+);/g;\n  /**\n   * The plain text of a chunk of HTML CDATA which possibly containing.\n   *\n   * {@updoc\n   * $ unescapeEntities('')\n   * # ''\n   * $ unescapeEntities('hello World!')\n   * # 'hello World!'\n   * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n   * # '1 < 2 && 4 > 3\\n'\n   * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n   * # '<&lt <- unfinished entity>'\n   * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n   * # '/foo?bar=baz&copy=true'\n   * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n   * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n   * }\n   *\n   * @param s a chunk of HTML CDATA.  It must not start or end inside an HTML\n   *   entity.\n   */\n  function unescapeEntities(s) {\n    return s.replace(entityRe, decodeOneEntity);\n  }\n\n  var ampRe = /&/g;\n  var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n  var ltRe = /</g;\n  var gtRe = />/g;\n  var quotRe = /\\\"/g;\n  var eqRe = /\\=/g;  // Backslash required on JScript.net\n\n  /**\n   * Escapes HTML special characters in attribute values as HTML entities.\n   *\n   * {@updoc\n   * $ escapeAttrib('')\n   * # ''\n   * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n   * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n   * $ escapeAttrib('Hello <World>!')\n   * # 'Hello &lt;World&gt;!'\n   * }\n   */\n  function escapeAttrib(s) {\n    // Escaping '=' defangs many UTF-7 and SGML short-tag attacks.\n    return s.replace(ampRe, '&amp;').replace(ltRe, '&lt;').replace(gtRe, '&gt;')\n        .replace(quotRe, '&#34;').replace(eqRe, '&#61;');\n  }\n\n  /**\n   * Escape entities in RCDATA that can be escaped without changing the meaning.\n   * {@updoc\n   * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n   * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n   * }\n   */\n  function normalizeRCData(rcdata) {\n    return rcdata\n        .replace(looseAmpRe, '&amp;$1')\n        .replace(ltRe, '&lt;')\n        .replace(gtRe, '&gt;');\n  }\n\n\n  // TODO(mikesamuel): validate sanitizer regexs against the HTML5 grammar at\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\n  /** token definitions. */\n  var INSIDE_TAG_TOKEN = new RegExp(\n      // Don't capture space.\n      '^\\\\s*(?:'\n      // Capture an attribute name in group 1, and value in group 3.\n      // We capture the fact that there was an attribute in group 2, since\n      // interpreters are inconsistent in whether a group that matches nothing\n      // is null, undefined, or the empty string.\n      + ('(?:'\n         + '([a-z][a-z-]*)'                    // attribute name\n         + ('('                                // optionally followed\n            + '\\\\s*=\\\\s*'\n            + ('('\n               // A double quoted string.\n               + '\\\"[^\\\"]*\\\"'\n               // A single quoted string.\n               + '|\\'[^\\']*\\''\n               // The positive lookahead is used to make sure that in\n               // <foo bar= baz=boo>, the value for bar is blank, not \"baz=boo\".\n               + '|(?=[a-z][a-z-]*\\\\s*=)'\n               // An unquoted value that is not an attribute name.\n               // We know it is not an attribute name because the previous\n               // zero-width match would've eliminated that possibility.\n               + '|[^>\\\"\\'\\\\s]*'\n               + ')'\n               )\n            + ')'\n            ) + '?'\n         + ')'\n         )\n      // End of tag captured in group 3.\n      + '|(\\/?>)'\n      // Don't capture cruft\n      + '|[\\\\s\\\\S][^a-z\\\\s>]*)',\n      'i');\n\n  var OUTSIDE_TAG_TOKEN = new RegExp(\n      '^(?:'\n      // Entity captured in group 1.\n      + '&(\\\\#[0-9]+|\\\\#[x][0-9a-f]+|\\\\w+);'\n      // Comment, doctypes, and processing instructions not captured.\n      + '|<\\!--[\\\\s\\\\S]*?--\\>|<!\\\\w[^>]*>|<\\\\?[^>*]*>'\n      // '/' captured in group 2 for close tags, and name captured in group 3.\n      + '|<(\\/)?([a-z][a-z0-9]*)'\n      // Text captured in group 4.\n      + '|([^<&>]+)'\n      // Cruft captured in group 5.\n      + '|([<&>]))',\n      'i');\n\n  /**\n   * Given a SAX-like event handler, produce a function that feeds those\n   * events and a parameter to the event handler.\n   *\n   * The event handler has the form:{@code\n   * {\n   *   // Name is an upper-case HTML tag name.  Attribs is an array of\n   *   // alternating upper-case attribute names, and attribute values.  The\n   *   // attribs array is reused by the parser.  Param is the value passed to\n   *   // the saxParser.\n   *   startTag: function (name, attribs, param) { ... },\n   *   endTag:   function (name, param) { ... },\n   *   pcdata:   function (text, param) { ... },\n   *   rcdata:   function (text, param) { ... },\n   *   cdata:    function (text, param) { ... },\n   *   startDoc: function (param) { ... },\n   *   endDoc:   function (param) { ... }\n   * }}\n   *\n   * @param {Object} handler a record containing event handlers.\n   * @return {Function} that takes a chunk of html and a parameter.\n   *   The parameter is passed on to the handler methods.\n   */\n  function makeSaxParser(handler) {\n    return function parse(htmlText, param) {\n      htmlText = String(htmlText);\n      var htmlLower = null;\n\n      var inTag = false;  // True iff we're currently processing a tag.\n      var attribs = [];  // Accumulates attribute names and values.\n      var tagName = void 0;  // The name of the tag currently being processed.\n      var eflags = void 0;  // The element flags for the current tag.\n      var openTag = void 0;  // True if the current tag is an open tag.\n\n      if (handler.startDoc) { handler.startDoc(param); }\n\n      while (htmlText) {\n        var m = htmlText.match(inTag ? INSIDE_TAG_TOKEN : OUTSIDE_TAG_TOKEN);\n        htmlText = htmlText.substring(m[0].length);\n\n        if (inTag) {\n          if (m[1]) { // attribute\n            // setAttribute with uppercase names doesn't work on IE6.\n            var attribName = lcase(m[1]);\n            var decodedValue;\n            if (m[2]) {\n              var encodedValue = m[3];\n              switch (encodedValue.charCodeAt(0)) {  // Strip quotes\n                case 34: case 39:\n                  encodedValue = encodedValue.substring(\n                      1, encodedValue.length - 1);\n                  break;\n              }\n              decodedValue = unescapeEntities(stripNULs(encodedValue));\n            } else {\n              // Use name as value for valueless attribs, so\n              //   <input type=checkbox checked>\n              // gets attributes ['type', 'checkbox', 'checked', 'checked']\n              decodedValue = attribName;\n            }\n            attribs.push(attribName, decodedValue);\n          } else if (m[4]) {\n            if (eflags !== void 0) {  // False if not in whitelist.\n              if (openTag) {\n                if (handler.startTag) {\n                  handler.startTag(tagName, attribs, param);\n                }\n              } else {\n                if (handler.endTag) {\n                  handler.endTag(tagName, param);\n                }\n              }\n            }\n\n            if (openTag\n                && (eflags & (html4.eflags.CDATA | html4.eflags.RCDATA))) {\n              if (htmlLower === null) {\n                htmlLower = lcase(htmlText);\n              } else {\n                htmlLower = htmlLower.substring(\n                    htmlLower.length - htmlText.length);\n              }\n              var dataEnd = htmlLower.indexOf('</' + tagName);\n              if (dataEnd < 0) { dataEnd = htmlText.length; }\n              if (dataEnd) {\n                if (eflags & html4.eflags.CDATA) {\n                  if (handler.cdata) {\n                    handler.cdata(htmlText.substring(0, dataEnd), param);\n                  }\n                } else if (handler.rcdata) {\n                  handler.rcdata(\n                    normalizeRCData(htmlText.substring(0, dataEnd)), param);\n                }\n                htmlText = htmlText.substring(dataEnd);\n              }\n            }\n\n            tagName = eflags = openTag = void 0;\n            attribs.length = 0;\n            inTag = false;\n          }\n        } else {\n          if (m[1]) {  // Entity\n            if (handler.pcdata) { handler.pcdata(m[0], param); }\n          } else if (m[3]) {  // Tag\n            openTag = !m[2];\n            inTag = true;\n            tagName = lcase(m[3]);\n            eflags = html4.ELEMENTS.hasOwnProperty(tagName)\n                ? html4.ELEMENTS[tagName] : void 0;\n          } else if (m[4]) {  // Text\n            if (handler.pcdata) { handler.pcdata(m[4], param); }\n          } else if (m[5]) {  // Cruft\n            if (handler.pcdata) {\n              var ch = m[5];\n              handler.pcdata(\n                  ch === '<' ? '&lt;' : ch === '>' ? '&gt;' : '&amp;',\n                  param);\n            }\n          }\n        }\n      }\n\n      if (handler.endDoc) { handler.endDoc(param); }\n    };\n  }\n\n  /**\n   * Returns a function that strips unsafe tags and attributes from html.\n   * @param {Function} sanitizeAttributes\n   *     maps from (tagName, attribs[]) to null or a sanitized attribute array.\n   *     The attribs array can be arbitrarily modified, but the same array\n   *     instance is reused, so should not be held.\n   * @return {Function} from html to sanitized html\n   */\n  function makeHtmlSanitizer(sanitizeAttributes) {\n    var stack;\n    var ignoring;\n    return makeSaxParser({\n        startDoc: function (_) {\n          stack = [];\n          ignoring = false;\n        },\n        startTag: function (tagName, attribs, out) {\n          if (ignoring) { return; }\n          if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n          var eflags = html4.ELEMENTS[tagName];\n          if (eflags & html4.eflags.FOLDABLE) {\n            return;\n          } else if (eflags & html4.eflags.UNSAFE) {\n            ignoring = !(eflags & html4.eflags.EMPTY);\n            return;\n          }\n          attribs = sanitizeAttributes(tagName, attribs);\n          // TODO(mikesamuel): relying on sanitizeAttributes not to\n          // insert unsafe attribute names.\n          if (attribs) {\n            if (!(eflags & html4.eflags.EMPTY)) {\n              stack.push(tagName);\n            }\n\n            out.push('<', tagName);\n            for (var i = 0, n = attribs.length; i < n; i += 2) {\n              var attribName = attribs[i],\n                  value = attribs[i + 1];\n              if (value !== null && value !== void 0) {\n                out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n              }\n            }\n            out.push('>');\n          }\n        },\n        endTag: function (tagName, out) {\n          if (ignoring) {\n            ignoring = false;\n            return;\n          }\n          if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n          var eflags = html4.ELEMENTS[tagName];\n          if (!(eflags & (html4.eflags.UNSAFE | html4.eflags.EMPTY\n                          | html4.eflags.FOLDABLE))) {\n            var index;\n            if (eflags & html4.eflags.OPTIONAL_ENDTAG) {\n              for (index = stack.length; --index >= 0;) {\n                var stackEl = stack[index];\n                if (stackEl === tagName) { break; }\n                if (!(html4.ELEMENTS[stackEl]\n                      & html4.eflags.OPTIONAL_ENDTAG)) {\n                  // Don't pop non optional end tags looking for a match.\n                  return;\n                }\n              }\n            } else {\n              for (index = stack.length; --index >= 0;) {\n                if (stack[index] === tagName) { break; }\n              }\n            }\n            if (index < 0) { return; }  // Not opened.\n            for (var i = stack.length; --i > index;) {\n              var stackEl = stack[i];\n              if (!(html4.ELEMENTS[stackEl]\n                    & html4.eflags.OPTIONAL_ENDTAG)) {\n                out.push('</', stackEl, '>');\n              }\n            }\n            stack.length = index;\n            out.push('</', tagName, '>');\n          }\n        },\n        pcdata: function (text, out) {\n          if (!ignoring) { out.push(text); }\n        },\n        rcdata: function (text, out) {\n          if (!ignoring) { out.push(text); }\n        },\n        cdata: function (text, out) {\n          if (!ignoring) { out.push(text); }\n        },\n        endDoc: function (out) {\n          for (var i = stack.length; --i >= 0;) {\n            out.push('</', stack[i], '>');\n          }\n          stack.length = 0;\n        }\n      });\n  }\n\n  // From RFC3986\n  var URI_SCHEME_RE = new RegExp(\n        \"^\" +\n      \"(?:\" +\n        \"([^:\\/?#]+)\" +         // scheme\n      \":)?\"\n      );\n\n  /**\n   * Strips unsafe tags and attributes from html.\n   * @param {string} htmlText to sanitize\n   * @param {Function} opt_uriPolicy -- a transform to apply to uri/url\n   *     attribute values.  If no opt_uriPolicy is provided, no uris\n   *     are allowed ie. the default uriPolicy rewrites all uris to null\n   * @param {Function} opt_nmTokenPolicy : string -> string? -- a transform to\n   *     apply to names, ids, and classes. If no opt_nmTokenPolicy is provided,\n   *     all names, ids and classes are passed through ie. the default\n   *     nmTokenPolicy is an identity transform\n   * @return {string} html\n   */\n  function sanitize(htmlText, opt_uriPolicy, opt_nmTokenPolicy) {\n    var out = [];\n    makeHtmlSanitizer(\n      function sanitizeAttribs(tagName, attribs) {\n        for (var i = 0; i < attribs.length; i += 2) {\n          var attribName = attribs[i];\n          var value = attribs[i + 1];\n          var atype = null, attribKey;\n          if ((attribKey = tagName + '::' + attribName,\n               html4.ATTRIBS.hasOwnProperty(attribKey))\n              || (attribKey = '*::' + attribName,\n                  html4.ATTRIBS.hasOwnProperty(attribKey))) {\n            atype = html4.ATTRIBS[attribKey];\n          }\n          if (atype !== null) {\n            switch (atype) {\n              case html4.atype.NONE: break;\n              case html4.atype.SCRIPT:\n              case html4.atype.STYLE:\n                value = null;\n                break;\n              case html4.atype.ID:\n              case html4.atype.IDREF:\n              case html4.atype.IDREFS:\n              case html4.atype.GLOBAL_NAME:\n              case html4.atype.LOCAL_NAME:\n              case html4.atype.CLASSES:\n                value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                break;\n              case html4.atype.URI:\n                var parsedUri = ('' + value).match(URI_SCHEME_RE);\n                if (!parsedUri) {\n                  value = null;\n                } else if (!parsedUri[1] ||\n                    WHITELISTED_SCHEMES.test(parsedUri[1])) {\n                  value = opt_uriPolicy && opt_uriPolicy(value);\n                } else {\n                  value = null;\n                }\n                break;\n              case html4.atype.URI_FRAGMENT:\n                if (value && '#' === value.charAt(0)) {\n                  value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                  if (value) { value = '#' + value; }\n                } else {\n                  value = null;\n                }\n                break;\n              default:\n                value = null;\n                break;\n            }\n          } else {\n            value = null;\n          }\n          attribs[i + 1] = value;\n        }\n        return attribs;\n      })(htmlText, out);\n    return out.join('');\n  }\n\n  return {\n    escapeAttrib: escapeAttrib,\n    makeHtmlSanitizer: makeHtmlSanitizer,\n    makeSaxParser: makeSaxParser,\n    normalizeRCData: normalizeRCData,\n    sanitize: sanitize,\n    unescapeEntities: unescapeEntities\n  };\n})(html4);\n\nvar html_sanitize = html.sanitize;\n\n// Exports for closure compiler.  Note this file is also cajoled\n// for domado and run in an environment without 'window'\nif (typeof window !== 'undefined') {\n  window['html'] = html;\n  window['html_sanitize'] = html_sanitize;\n}\n// Loosen restrictions of Caja's\n// html-sanitizer to allow for styling\nhtml4.ATTRIBS['*::style'] = 0;\nhtml4.ELEMENTS['style'] = 0;\n\nhtml4.ATTRIBS['a::target'] = 0;\n\nhtml4.ELEMENTS['video'] = 0;\nhtml4.ATTRIBS['video::src'] = 0;\nhtml4.ATTRIBS['video::poster'] = 0;\nhtml4.ATTRIBS['video::controls'] = 0;\n\nhtml4.ELEMENTS['audio'] = 0;\nhtml4.ATTRIBS['audio::src'] = 0;\nhtml4.ATTRIBS['video::autoplay'] = 0;\nhtml4.ATTRIBS['video::controls'] = 0;\n/*!\n  * Reqwest! A general purpose XHR connection manager\n  * (c) Dustin Diaz 2012\n  * https://github.com/ded/reqwest\n  * license MIT\n  */\n;(function (name, context, definition) {\n  context[name] = definition()\n})('reqwest', this, function () {\n\n  var win = window\n    , doc = document\n    , twoHundo = /^20\\d$/\n    , byTag = 'getElementsByTagName'\n    , readyState = 'readyState'\n    , contentType = 'Content-Type'\n    , requestedWith = 'X-Requested-With'\n    , head = doc[byTag]('head')[0]\n    , uniqid = 0\n    , callbackPrefix = 'reqwest_' + (+new Date())\n    , lastValue // data stored by the most recent JSONP callback\n    , xmlHttpRequest = 'XMLHttpRequest'\n    , noop = function () {}\n\n    , isArray = typeof Array.isArray == 'function'\n        ? Array.isArray\n        : function (a) {\n            return a instanceof Array\n          }\n\n    , defaultHeaders = {\n          contentType: 'application/x-www-form-urlencoded'\n        , requestedWith: xmlHttpRequest\n        , accept: {\n              '*':  'text/javascript, text/html, application/xml, text/xml, */*'\n            , xml:  'application/xml, text/xml'\n            , html: 'text/html'\n            , text: 'text/plain'\n            , json: 'application/json, text/javascript'\n            , js:   'application/javascript, text/javascript'\n          }\n      }\n\n    , xhr = win[xmlHttpRequest]\n        ? function () {\n            return new XMLHttpRequest()\n          }\n        : function () {\n            return new ActiveXObject('Microsoft.XMLHTTP')\n          }\n\n  function handleReadyState (r, success, error) {\n    return function () {\n      // use _aborted to mitigate against IE err c00c023f\n      // (can't read props on aborted request objects)\n      if (r._aborted) return error(r.request)\n      if (r.request && r.request[readyState] == 4) {\n        r.request.onreadystatechange = noop\n        if (twoHundo.test(r.request.status))\n          success(r.request)\n        else\n          error(r.request)\n      }\n    }\n  }\n\n  function setHeaders (http, o) {\n    var headers = o.headers || {}\n      , h\n\n    headers.Accept = headers.Accept\n      || defaultHeaders.accept[o.type]\n      || defaultHeaders.accept['*']\n\n    // breaks cross-origin requests with legacy browsers\n    if (!o.crossOrigin && !headers[requestedWith]) headers[requestedWith] = defaultHeaders.requestedWith\n    if (!headers[contentType]) headers[contentType] = o.contentType || defaultHeaders.contentType\n    for (h in headers)\n      headers.hasOwnProperty(h) && http.setRequestHeader(h, headers[h])\n  }\n\n  function setCredentials (http, o) {\n    if (typeof o.withCredentials !== 'undefined' && typeof http.withCredentials !== 'undefined') {\n      http.withCredentials = !!o.withCredentials\n    }\n  }\n\n  function generalCallback (data) {\n    lastValue = data\n  }\n\n  function urlappend (url, s) {\n    return url + (/\\?/.test(url) ? '&' : '?') + s\n  }\n\n  function handleJsonp (o, fn, err, url) {\n    var reqId = uniqid++\n      , cbkey = o.jsonpCallback || 'callback' // the 'callback' key\n      , cbval = o.jsonpCallbackName || reqwest.getcallbackPrefix(reqId)\n      // , cbval = o.jsonpCallbackName || ('reqwest_' + reqId) // the 'callback' value\n      , cbreg = new RegExp('((^|\\\\?|&)' + cbkey + ')=([^&]+)')\n      , match = url.match(cbreg)\n      , script = doc.createElement('script')\n      , loaded = 0\n      , isIE10 = navigator.userAgent.indexOf('MSIE 10.0') !== -1;\n\n    if (match) {\n      if (match[3] === '?') {\n        url = url.replace(cbreg, '$1=' + cbval) // wildcard callback func name\n      } else {\n        cbval = match[3] // provided callback func name\n      }\n    } else {\n      url = urlappend(url, cbkey + '=' + cbval) // no callback details, add 'em\n    }\n\n    win[cbval] = generalCallback\n\n    script.type = 'text/javascript'\n    if (typeof script.onreadystatechange !== 'undefined' && !isIE10) {\n      // need this for IE due to out-of-order onreadystatechange(), binding script\n      // execution to an event listener gives us control over when the script\n      // is executed. See http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n      //\n      // if this hack is used in IE10 jsonp callback are never called\n      script.event = 'onclick'\n      script.htmlFor = script.id = '_reqwest_' + reqId\n    }\n\n    script.onload = script.onreadystatechange = function () {\n      if ((script[readyState] && script[readyState] !== 'complete' && script[readyState] !== 'loaded') || loaded) {\n        return false\n      }\n      script.onload = script.onreadystatechange = null\n      script.onclick && script.onclick()\n      // Call the user callback with the last value stored and clean up values and scripts.\n      o.success && o.success(lastValue)\n      lastValue = undefined\n      head.removeChild(script)\n      loaded = 1\n    }\n\n    script.src = url\n    script.async = true\n\n    // Add the script to the DOM head\n    head.appendChild(script)\n\n    // Enable JSONP timeout\n    return {\n      abort: function () {\n        script.onload = script.onreadystatechange = null\n        o.error && o.error({}, 'Request is aborted: timeout', {})\n        lastValue = undefined\n        head.removeChild(script)\n        loaded = 1\n      }\n    }\n  }\n\n  function getRequest (fn, err) {\n    var o = this.o\n      , method = (o.method || 'GET').toUpperCase()\n      , url = typeof o === 'string' ? o : o.url\n      // convert non-string objects to query-string form unless o.processData is false\n      , data = (o.processData !== false && o.data && typeof o.data !== 'string')\n        ? reqwest.toQueryString(o.data)\n        : (o.data || null)\n      , http\n\n    // if we're working on a GET request and we have data then we should append\n    // query string to end of URL and not post data\n    if ((o.type == 'jsonp' || method == 'GET') && data) {\n      url = urlappend(url, data)\n      data = null\n    }\n\n    if (o.type == 'jsonp') return handleJsonp(o, fn, err, url)\n\n    http = xhr()\n    http.open(method, url, true)\n    setHeaders(http, o)\n    setCredentials(http, o)\n    http.onreadystatechange = handleReadyState(this, fn, err)\n    o.before && o.before(http)\n    http.send(data)\n    return http\n  }\n\n  function Reqwest (o, fn) {\n    this.o = o\n    this.fn = fn\n\n    init.apply(this, arguments)\n  }\n\n  function setType (url) {\n    var m = url.match(/\\.(json|jsonp|html|xml)(\\?|$)/)\n    return m ? m[1] : 'js'\n  }\n\n  function init (o, fn) {\n\n    this.url = typeof o == 'string' ? o : o.url\n    this.timeout = null\n\n    // whether request has been fulfilled for purpose\n    // of tracking the Promises\n    this._fulfilled = false\n    // success handlers\n    this._fulfillmentHandlers = []\n    // error handlers\n    this._errorHandlers = []\n    // complete (both success and fail) handlers\n    this._completeHandlers = []\n    this._erred = false\n    this._responseArgs = {}\n\n    var self = this\n      , type = o.type || setType(this.url)\n\n    fn = fn || function () {}\n\n    if (o.timeout) {\n      this.timeout = setTimeout(function () {\n        self.abort()\n      }, o.timeout)\n    }\n\n    if (o.success) {\n      this._fulfillmentHandlers.push(function () {\n        o.success.apply(o, arguments)\n      })\n    }\n\n    if (o.error) {\n      this._errorHandlers.push(function () {\n        o.error.apply(o, arguments)\n      })\n    }\n\n    if (o.complete) {\n      this._completeHandlers.push(function () {\n        o.complete.apply(o, arguments)\n      })\n    }\n\n    function complete (resp) {\n      o.timeout && clearTimeout(self.timeout)\n      self.timeout = null\n      while (self._completeHandlers.length > 0) {\n        self._completeHandlers.shift()(resp)\n      }\n    }\n\n    function success (resp) {\n      var r = resp.responseText\n      if (r) {\n        switch (type) {\n        case 'json':\n          try {\n            resp = win.JSON ? win.JSON.parse(r) : eval('(' + r + ')')\n          } catch (err) {\n            return error(resp, 'Could not parse JSON in response', err)\n          }\n          break\n        case 'js':\n          resp = eval(r)\n          break\n        case 'html':\n          resp = r\n          break\n        case 'xml':\n          resp = resp.responseXML\n              && resp.responseXML.parseError // IE trololo\n              && resp.responseXML.parseError.errorCode\n              && resp.responseXML.parseError.reason\n            ? null\n            : resp.responseXML\n          break\n        }\n      }\n\n      self._responseArgs.resp = resp\n      self._fulfilled = true\n      fn(resp)\n      while (self._fulfillmentHandlers.length > 0) {\n        self._fulfillmentHandlers.shift()(resp)\n      }\n\n      complete(resp)\n    }\n\n    function error (resp, msg, t) {\n      self._responseArgs.resp = resp\n      self._responseArgs.msg = msg\n      self._responseArgs.t = t\n      self._erred = true\n      while (self._errorHandlers.length > 0) {\n        self._errorHandlers.shift()(resp, msg, t)\n      }\n      complete(resp)\n    }\n\n    this.request = getRequest.call(this, success, error)\n  }\n\n  Reqwest.prototype = {\n    abort: function () {\n      this._aborted = true\n      this.request.abort()\n    }\n\n  , retry: function () {\n      init.call(this, this.o, this.fn)\n    }\n\n    /**\n     * Small deviation from the Promises A CommonJs specification\n     * http://wiki.commonjs.org/wiki/Promises/A\n     */\n\n    /**\n     * `then` will execute upon successful requests\n     */\n  , then: function (success, fail) {\n      if (this._fulfilled) {\n        success(this._responseArgs.resp)\n      } else if (this._erred) {\n        fail(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._fulfillmentHandlers.push(success)\n        this._errorHandlers.push(fail)\n      }\n      return this\n    }\n\n    /**\n     * `always` will execute whether the request succeeds or fails\n     */\n  , always: function (fn) {\n      if (this._fulfilled || this._erred) {\n        fn(this._responseArgs.resp)\n      } else {\n        this._completeHandlers.push(fn)\n      }\n      return this\n    }\n\n    /**\n     * `fail` will execute when the request fails\n     */\n  , fail: function (fn) {\n      if (this._erred) {\n        fn(this._responseArgs.resp, this._responseArgs.msg, this._responseArgs.t)\n      } else {\n        this._errorHandlers.push(fn)\n      }\n      return this\n    }\n  }\n\n  function reqwest (o, fn) {\n    return new Reqwest(o, fn)\n  }\n\n  // normalize newline variants according to spec -> CRLF\n  function normalize (s) {\n    return s ? s.replace(/\\r?\\n/g, '\\r\\n') : ''\n  }\n\n  function serial (el, cb) {\n    var n = el.name\n      , t = el.tagName.toLowerCase()\n      , optCb = function (o) {\n          // IE gives value=\"\" even where there is no value attribute\n          // 'specified' ref: http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-862529273\n          if (o && !o.disabled)\n            cb(n, normalize(o.attributes.value && o.attributes.value.specified ? o.value : o.text))\n        }\n      , ch, ra, val, i\n\n    // don't serialize elements that are disabled or without a name\n    if (el.disabled || !n) return\n\n    switch (t) {\n    case 'input':\n      if (!/reset|button|image|file/i.test(el.type)) {\n        ch = /checkbox/i.test(el.type)\n        ra = /radio/i.test(el.type)\n        val = el.value\n        // WebKit gives us \"\" instead of \"on\" if a checkbox has no value, so correct it here\n        ;(!(ch || ra) || el.checked) && cb(n, normalize(ch && val === '' ? 'on' : val))\n      }\n      break\n    case 'textarea':\n      cb(n, normalize(el.value))\n      break\n    case 'select':\n      if (el.type.toLowerCase() === 'select-one') {\n        optCb(el.selectedIndex >= 0 ? el.options[el.selectedIndex] : null)\n      } else {\n        for (i = 0; el.length && i < el.length; i++) {\n          el.options[i].selected && optCb(el.options[i])\n        }\n      }\n      break\n    }\n  }\n\n  // collect up all form elements found from the passed argument elements all\n  // the way down to child elements; pass a '<form>' or form fields.\n  // called with 'this'=callback to use for serial() on each element\n  function eachFormElement () {\n    var cb = this\n      , e, i\n      , serializeSubtags = function (e, tags) {\n          var i, j, fa\n          for (i = 0; i < tags.length; i++) {\n            fa = e[byTag](tags[i])\n            for (j = 0; j < fa.length; j++) serial(fa[j], cb)\n          }\n        }\n\n    for (i = 0; i < arguments.length; i++) {\n      e = arguments[i]\n      if (/input|select|textarea/i.test(e.tagName)) serial(e, cb)\n      serializeSubtags(e, [ 'input', 'select', 'textarea' ])\n    }\n  }\n\n  // standard query string style serialization\n  function serializeQueryString () {\n    return reqwest.toQueryString(reqwest.serializeArray.apply(null, arguments))\n  }\n\n  // { 'name': 'value', ... } style serialization\n  function serializeHash () {\n    var hash = {}\n    eachFormElement.apply(function (name, value) {\n      if (name in hash) {\n        hash[name] && !isArray(hash[name]) && (hash[name] = [hash[name]])\n        hash[name].push(value)\n      } else hash[name] = value\n    }, arguments)\n    return hash\n  }\n\n  // [ { name: 'name', value: 'value' }, ... ] style serialization\n  reqwest.serializeArray = function () {\n    var arr = []\n    eachFormElement.apply(function (name, value) {\n      arr.push({name: name, value: value})\n    }, arguments)\n    return arr\n  }\n\n  reqwest.serialize = function () {\n    if (arguments.length === 0) return ''\n    var opt, fn\n      , args = Array.prototype.slice.call(arguments, 0)\n\n    opt = args.pop()\n    opt && opt.nodeType && args.push(opt) && (opt = null)\n    opt && (opt = opt.type)\n\n    if (opt == 'map') fn = serializeHash\n    else if (opt == 'array') fn = reqwest.serializeArray\n    else fn = serializeQueryString\n\n    return fn.apply(null, args)\n  }\n\n  reqwest.toQueryString = function (o) {\n    var qs = '', i\n      , enc = encodeURIComponent\n      , push = function (k, v) {\n          qs += enc(k) + '=' + enc(v) + '&'\n        }\n      , k, v\n\n    if (isArray(o)) {\n      for (i = 0; o && i < o.length; i++) push(o[i].name, o[i].value)\n    } else {\n      for (k in o) {\n        if (!Object.hasOwnProperty.call(o, k)) continue\n        v = o[k]\n        if (isArray(v)) {\n          for (i = 0; i < v.length; i++) push(k, v[i])\n        } else push(k, o[k])\n      }\n    }\n\n    // spaces should be + according to spec\n    return qs.replace(/&$/, '').replace(/%20/g, '+')\n  }\n\n  reqwest.getcallbackPrefix = function () {\n    return callbackPrefix\n  }\n\n  // jQuery and Zepto compatibility, differences can be remapped here so you can call\n  // .ajax.compat(options, callback)\n  reqwest.compat = function (o, fn) {\n    if (o) {\n      o.type && (o.method = o.type) && delete o.type\n      o.dataType && (o.type = o.dataType)\n      o.jsonpCallback && (o.jsonpCallbackName = o.jsonpCallback) && delete o.jsonpCallback\n      o.jsonp && (o.jsonpCallback = o.jsonp)\n    }\n    return new Reqwest(o, fn)\n  }\n\n  return reqwest\n})\n;wax = wax || {};\n\n// Attribution\n// -----------\nwax.attribution = function() {\n    var a = {};\n\n    var container = document.createElement('div');\n    container.className = 'map-attribution';\n\n    a.content = function(x) {\n        if (typeof x === 'undefined') return container.innerHTML;\n        container.innerHTML = wax.u.sanitize(x);\n        return this;\n    };\n\n    a.element = function() {\n        return container;\n    };\n\n    a.init = function() {\n        return this;\n    };\n\n    return a;\n};\nwax = wax || {};\n\n// Attribution\n// -----------\nwax.bwdetect = function(options, callback) {\n    var detector = {},\n        threshold = options.threshold || 400,\n        // test image: 30.29KB\n        testImage = 'http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache=' + (+new Date()),\n        // High-bandwidth assumed\n        // 1: high bandwidth (.png, .jpg)\n        // 0: low bandwidth (.png128, .jpg70)\n        bw = 1,\n        // Alternative versions\n        auto = options.auto === undefined ? true : options.auto;\n\n    function bwTest() {\n        wax.bw = -1;\n        var im = new Image();\n        im.src = testImage;\n        var first = true;\n        var timeout = setTimeout(function() {\n            if (first && wax.bw == -1) {\n                detector.bw(0);\n                first = false;\n            }\n        }, threshold);\n        im.onload = function() {\n            if (first && wax.bw == -1) {\n                clearTimeout(timeout);\n                detector.bw(1);\n                first = false;\n            }\n        };\n    }\n\n    detector.bw = function(x) {\n        if (!arguments.length) return bw;\n        var oldBw = bw;\n        if (wax.bwlisteners && wax.bwlisteners.length) (function () {\n            listeners = wax.bwlisteners;\n            wax.bwlisteners = [];\n            for (i = 0; i < listeners; i++) {\n                listeners[i](x);\n            }\n        })();\n        wax.bw = x;\n\n        if (bw != (bw = x)) callback(x);\n    };\n\n    detector.add = function() {\n        if (auto) bwTest();\n        return this;\n    };\n\n    if (wax.bw == -1) {\n      wax.bwlisteners = wax.bwlisteners || [];\n      wax.bwlisteners.push(detector.bw);\n    } else if (wax.bw !== undefined) {\n        detector.bw(wax.bw);\n    } else {\n        detector.add();\n    }\n    return detector;\n};\n// Formatter\n// ---------\n//\n// This code is no longer the recommended code path for Wax -\n// see `template.js`, a safe implementation of Mustache templates.\nwax.formatter = function(x) {\n    var formatter = {},\n        f;\n\n    // Prevent against just any input being used.\n    if (x && typeof x === 'string') {\n        try {\n            // Ugly, dangerous use of eval.\n            eval('f = ' + x);\n        } catch (e) {\n            if (console) console.log(e);\n        }\n    } else if (x && typeof x === 'function') {\n        f = x;\n    } else {\n        f = function() {};\n    }\n\n    // Wrap the given formatter function in order to\n    // catch exceptions that it may throw.\n    formatter.format = function(options, data) {\n        try {\n            return wax.u.sanitize(f(options, data));\n        } catch (e) {\n            if (console) console.log(e);\n        }\n    };\n\n    return formatter;\n};\n// GridInstance\n// ------------\n// GridInstances are queryable, fully-formed\n// objects for acquiring features from events.\n//\n// This code ignores format of 1.1-1.2\nwax.gi = function(grid_tile, options) {\n    options = options || {};\n    // resolution is the grid-elements-per-pixel ratio of gridded data.\n    // The size of a tile element. For now we expect tiles to be squares.\n    var instance = {},\n        resolution = options.resolution || 4,\n        tileSize = options.tileSize || 256;\n\n    // Resolve the UTF-8 encoding stored in grids to simple\n    // number values.\n    // See the [utfgrid spec](https://github.com/mapbox/utfgrid-spec)\n    // for details.\n    function resolveCode(key) {\n        if (key >= 93) key--;\n        if (key >= 35) key--;\n        key -= 32;\n        return key;\n    }\n\n    instance.grid_tile = function() {\n        return grid_tile;\n    };\n\n    instance.getKey = function(x, y) {\n        if (!(grid_tile && grid_tile.grid)) return;\n        if ((y < 0) || (x < 0)) return;\n        if ((Math.floor(y) >= tileSize) ||\n            (Math.floor(x) >= tileSize)) return;\n        // Find the key in the grid. The above calls should ensure that\n        // the grid's array is large enough to make this work.\n        return resolveCode(grid_tile.grid[\n           Math.floor((y) / resolution)\n        ].charCodeAt(\n           Math.floor((x) / resolution)\n        ));\n    };\n\n    // Lower-level than tileFeature - has nothing to do\n    // with the DOM. Takes a px offset from 0, 0 of a grid.\n    instance.gridFeature = function(x, y) {\n        // Find the key in the grid. The above calls should ensure that\n        // the grid's array is large enough to make this work.\n        var key = this.getKey(x, y),\n            keys = grid_tile.keys;\n\n        if (keys &&\n            keys[key] &&\n            grid_tile.data[keys[key]]) {\n            return grid_tile.data[keys[key]];\n        }\n    };\n\n    // Get a feature:\n    // * `x` and `y`: the screen coordinates of an event\n    // * `tile_element`: a DOM element of a tile, from which we can get an offset.\n    instance.tileFeature = function(x, y, tile_element) {\n        if (!grid_tile) return;\n        // IE problem here - though recoverable, for whatever reason\n        var offset = wax.u.offset(tile_element);\n            feature = this.gridFeature(x - offset.left, y - offset.top);\n        return feature;\n    };\n\n    return instance;\n};\n// GridManager\n// -----------\n// Generally one GridManager will be used per map.\n//\n// It takes one options object, which current accepts a single option:\n// `resolution` determines the number of pixels per grid element in the grid.\n// The default is 4.\nwax.gm = function() {\n\n    var resolution = 4,\n        grid_tiles = {},\n        manager = {},\n        tilejson,\n        formatter;\n\n    var gridUrl = function(url) {\n        if (url) {\n            return url.replace(/(\\.png|\\.jpg|\\.jpeg)(\\d*)/, '.grid.json');\n        }\n    };\n\n    function templatedGridUrl(template) {\n        if (typeof template === 'string') template = [template];\n        return function templatedGridFinder(url) {\n            if (!url) return;\n            var rx = new RegExp(manager.tileRegexp())\n            var xyz = rx.exec(url);\n            if (!xyz) return;\n            return template[parseInt(xyz[2], 10) % template.length]\n                .replace(/\\{z\\}/g, xyz[1])\n                .replace(/\\{x\\}/g, xyz[2])\n                .replace(/\\{y\\}/g, xyz[3]);\n        };\n    }\n\n    // return the regexp to catch the tile number given the url\n    manager.tileRegexp = function() {\n      var tileTemplate = tilejson.tiles[0];\n      // remove params\n      var p = tileTemplate.indexOf('?');\n      if(p !== -1) {\n        tileTemplate = tileTemplate.substr(0, p);\n      }\n      // remove from the url all the special characters\n      // replacing them by a dot (dont mind the character)\n      tileTemplate = tileTemplate.\n                        replace(/[\\(\\)\\?\\$\\*\\+\\^]/g,'.')\n\n      // the browser removes the port in the case it matchs with\n      // the default port of the protocol\n      if(tileTemplate.indexOf('https') === 0) {\n        tileTemplate = tileTemplate.replace(':443', '[:0-9]*')\n      } else if(tileTemplate.indexOf('http') === 0) {\n        tileTemplate = tileTemplate.replace(':80', '[:0-9]*')\n      }\n\n      var r = '';\n      if(tilejson.tiles.length > 1) {\n        var t0 = tilejson.tiles[0];\n        var t1 = tilejson.tiles[1];\n        //search characters where differs\n        for(var i = 0; i < t0.length; ++i) {\n          if(t0.charAt(i) != t1.charAt(i)) {\n            r += '.';\n          } else {\n            r += tileTemplate.charAt(i) || '';\n          }\n        }\n      } else {\n        r = tileTemplate;\n      }\n\n      // replace the first {x}{y}{z} by (\\\\d+)\n      return r\n        .replace(/\\{x\\}/,'(\\\\d+)')\n        .replace(/\\{y\\}/,'(\\\\d+)')\n        .replace(/\\{z\\}/,'(\\\\d+)')\n    }\n\n    manager.formatter = function(x) {\n        if (!arguments.length) return formatter;\n        formatter =  wax.formatter(x);\n        return manager;\n    };\n\n    manager.template = function(x) {\n        if (!arguments.length) return formatter;\n        formatter = wax.template(x);\n        return manager;\n    };\n\n    manager.gridUrl = function(x) {\n        // Getter-setter\n        if (!arguments.length) return gridUrl;\n\n        // Handle tilesets that don't support grids\n        if (!x) {\n            gridUrl = function() { return null; };\n        } else {\n            gridUrl = typeof x === 'function' ?\n                x : templatedGridUrl(x);\n        }\n        return manager;\n    };\n\n    manager.getGrid = function(url, callback) {\n        var gurl = gridUrl(url);\n        if (!formatter || !gurl) return callback(null, null);\n\n        wax.request.get(gurl, function(err, t) {\n            if (err) return callback(err, null);\n            callback(null, wax.gi(t, {\n                formatter: formatter,\n                resolution: resolution\n            }));\n        });\n        return manager;\n    };\n\n    manager.tilejson = function(x) {\n        if (!arguments.length) return tilejson;\n        // prefer templates over formatters\n        if (x.template) {\n            manager.template(x.template);\n        } else if (x.formatter) {\n            manager.formatter(x.formatter);\n        } else {\n            // In this case, we cannot support grids\n            formatter = undefined;\n        }\n        manager.gridUrl(x.grids);\n        if (x.resolution) resolution = x.resolution;\n        tilejson = x;\n        return manager;\n    };\n\n    return manager;\n};\nwax = wax || {};\n\n// Hash\n// ----\nwax.hash = function(options) {\n    options = options || {};\n\n    var s0, // old hash\n        hash = {},\n        lat = 90 - 1e-8;  // allowable latitude range\n\n    function getState() {\n        return location.hash.substring(1);\n    }\n\n    function pushState(state) {\n        var l = window.location;\n        l.replace(l.toString().replace((l.hash || /$/), '#' + state));\n    }\n\n    function parseHash(s) {\n        var args = s.split('/');\n        for (var i = 0; i < args.length; i++) {\n            args[i] = Number(args[i]);\n            if (isNaN(args[i])) return true;\n        }\n        if (args.length < 3) {\n            // replace bogus hash\n            return true;\n        } else if (args.length == 3) {\n            options.setCenterZoom(args);\n        }\n    }\n\n    function move() {\n        var s1 = options.getCenterZoom();\n        if (s0 !== s1) {\n            s0 = s1;\n            // don't recenter the map!\n            pushState(s0);\n        }\n    }\n\n    function stateChange(state) {\n        // ignore spurious hashchange events\n        if (state === s0) return;\n        if (parseHash(s0 = state)) {\n            // replace bogus hash\n            move();\n        }\n    }\n\n    var _move = wax.u.throttle(move, 500);\n\n    hash.add = function() {\n        stateChange(getState());\n        options.bindChange(_move);\n        return hash;\n    };\n\n    hash.remove = function() {\n        options.unbindChange(_move);\n        return hash;\n    };\n\n    return hash;\n};\nwax = wax || {};\n\nwax.interaction = function() {\n    var gm = wax.gm(),\n        interaction = {},\n        _downLock = false,\n        _clickTimeout = null,\n        // Active feature\n        // Down event\n        _d,\n        // Touch tolerance\n        tol = 4,\n        grid,\n        attach,\n        detach,\n        parent,\n        map,\n        tileGrid,\n        // google maps sends touchmove and click at the same time \n        // most of the time when an user taps the screen, see onUp \n        // for more information\n        _discardTouchMove = false;\n\n    var defaultEvents = {\n        mousemove: onMove,\n        touchstart: onDown,\n        mousedown: onDown\n    };\n\n    var touchEnds = {\n        touchend: onUp,\n        touchmove: onUp,\n        touchcancel: touchCancel\n    };\n\n    var mspointerEnds = {\n        MSPointerUp: onUp,\n        MSPointerMove: onUp,\n        MSPointerCancel: touchCancel\n    };\n\n    var pointerEnds = {\n        pointerup: onUp,\n        pointermove: onUp,\n        pointercancel: touchCancel\n    };\n\n    // Abstract getTile method. Depends on a tilegrid with\n    // grid[ [x, y, tile] ] structure.\n    function getTile(e) {\n        var g = grid();\n        var regExp = new RegExp(gm.tileRegexp());\n        for (var i = 0; i < g.length; i++) {\n            if (e) {\n                var isInside = ((g[i][0] <= e.y) &&\n                     ((g[i][0] + 256) > e.y) &&\n                      (g[i][1] <= e.x) &&\n                     ((g[i][1] + 256) > e.x));\n                if(isInside && regExp.exec(g[i][2].src)) {\n                    return g[i][2];\n                }\n            }\n        }\n        return false;\n    }\n\n    // Clear the double-click timeout to prevent double-clicks from\n    // triggering popups.\n    function killTimeout() {\n        if (_clickTimeout) {\n            window.clearTimeout(_clickTimeout);\n            _clickTimeout = null;\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    function onMove(e) {\n        // If the user is actually dragging the map, exit early\n        // to avoid performance hits.\n        if (_downLock) return;\n\n        var _e = (e.type !== \"MSPointerMove\" && e.type !== \"pointermove\" ? e : e.originalEvent);\n        var pos = wax.u.eventoffset(_e);\n\n        interaction.screen_feature(pos, function(feature) {\n            if (feature) {\n                bean.fire(interaction, 'on', {\n                    parent: parent(),\n                    data: feature,\n                    formatter: gm.formatter().format,\n                    e: e\n                });\n            } else {\n                bean.fire(interaction, 'off');\n            }\n        });\n    }\n\n    // A handler for 'down' events - which means `mousedown` and `touchstart`\n    function onDown(e) {\n\n        // Prevent interaction offset calculations happening while\n        // the user is dragging the map.\n        //\n        // Store this event so that we can compare it to the\n        // up event\n        _downLock = true;\n        var _e = (e.type !== \"MSPointerDown\" && e.type !== \"pointerdown\" ? e : e.originalEvent); \n        _d = wax.u.eventoffset(_e);\n        if (e.type === 'mousedown') {\n            bean.add(document.body, 'click', onUp);\n            // track mouse up to remove lockDown when the drags end\n            bean.add(document.body, 'mouseup', dragEnd);\n\n        // Only track single-touches. Double-touches will not affect this\n        // control\n        } else if (e.type === 'touchstart' && e.touches.length === 1) {\n            //GMaps fix: Because it's triggering always mousedown and click, we've to remove it\n            bean.remove(document.body, 'click', onUp); //GMaps fix\n\n            //When we finish dragging, then the click will be \n            bean.add(document.body, 'click', onUp);\n            bean.add(document.body, 'touchEnd', dragEnd);\n        } else if (e.originalEvent.type === \"MSPointerDown\" && e.originalEvent.touches && e.originalEvent.touches.length === 1) {\n          // Don't make the user click close if they hit another tooltip\n            bean.fire(interaction, 'off');\n            // Touch moves invalidate touches\n            bean.add(parent(), mspointerEnds);\n        } else if (e.type === \"pointerdown\" && e.originalEvent.touches && e.originalEvent.touches.length === 1) {\n            // Don't make the user click close if they hit another tooltip\n            bean.fire(interaction, 'off');\n            // Touch moves invalidate touches\n            bean.add(parent(), pointerEnds);\n        } else {\n            // Fix layer interaction in IE10/11 (CDBjs #139)\n            // Reason: Internet Explorer is triggering pointerdown when you click on the marker, and other browsers don't.\n            // Because of that, _downLock was active and it believed that you're dragging the map, instead of dragging the marker\n            _downLock = false;\n        }\n\n    }\n\n    function dragEnd() {\n        _downLock = false;\n    }\n\n    function touchCancel() {\n        bean.remove(parent(), touchEnds);\n        bean.remove(parent(), mspointerEnds);\n        bean.remove(parent(), pointerEnds);\n        _downLock = false;\n    }\n\n    function onUp(e) {\n        var evt = {};\n        var _e = (e.type !== \"MSPointerMove\" && e.type !== \"MSPointerUp\" && e.type !== \"pointerup\" && e.type !== \"pointermove\" ? e : e.originalEvent);\n        var pos = wax.u.eventoffset(_e);\n        _downLock = false;\n\n        for (var key in _e) {\n          evt[key] = _e[key];\n        }\n\n        // for (var key in e) {\n        //   evt[key] = e[key];\n        // }\n\n        bean.remove(document.body, 'mouseup', onUp);\n        bean.remove(parent(), touchEnds);\n        bean.remove(parent(), mspointerEnds);\n        bean.remove(parent(), pointerEnds);\n\n        if (e.type === 'touchend') {\n            // If this was a touch and it survived, there's no need to avoid a double-tap\n            // but also wax.u.eventoffset will have failed, since this touch\n            // event doesn't have coordinates\n            interaction.click(e, _d);\n        } else if (pos && _d) {\n          // If pos is not defined means wax can't calculate event position,\n          // So next cases aren't possible.\n\n          if (evt.type === \"MSPointerMove\" || evt.type === \"MSPointerUp\") {\n            evt.changedTouches = [];\n            interaction.click(evt, pos);\n          } else if (evt.type === \"pointermove\" || evt.type === \"pointerup\") {\n            interaction.click(evt, pos);\n          } else if (Math.round(pos.y / tol) === Math.round(_d.y / tol) &&\n            Math.round(pos.x / tol) === Math.round(_d.x / tol)) {\n            // if mousemove and click are sent at the same time this code\n            // will not trigger click event because less than 150ms pass between\n            // those events.\n            // Because of that this flag discards touchMove\n            if (_discardTouchMove && evt.type === 'touchmove') return onUp;\n            // Contain the event data in a closure.\n            // Ignore double-clicks by ignoring clicks within 300ms of\n            // each other.\n            if(!_clickTimeout) {\n              _clickTimeout = window.setTimeout(function() {\n                  _clickTimeout = null;\n                  interaction.click(evt, pos);\n              }, 150);\n            } else {\n              killTimeout();\n            }\n          }\n\n        }\n\n        return onUp;\n    }\n\n    interaction.discardTouchMove = function(_) {\n      if (!arguments.length) return _discardTouchMove;\n      _discardTouchMove = _;\n      return interaction;\n    }\n\n    // Handle a click event. Takes a second\n    interaction.click = function(e, pos) {\n        interaction.screen_feature(pos, function(feature) {\n            if (feature) bean.fire(interaction, 'on', {\n                parent: parent(),\n                data: feature,\n                formatter: gm.formatter().format,\n                e: e\n            });\n        });\n    };\n\n    interaction.screen_feature = function(pos, callback) {\n        var tile = getTile(pos);\n        if (!tile) callback(null);\n        gm.getGrid(tile.src, function(err, g) {\n            if (err || !g) return callback(null);\n            var feature = g.tileFeature(pos.x, pos.y, tile);\n            callback(feature);\n        });\n    };\n\n    // set an attach function that should be\n    // called when maps are set\n    interaction.attach = function(x) {\n        if (!arguments.length) return attach;\n        attach = x;\n        return interaction;\n    };\n\n    interaction.detach = function(x) {\n        if (!arguments.length) return detach;\n        detach = x;\n        return interaction;\n    };\n\n    // Attach listeners to the map\n    interaction.map = function(x) {\n        if (!arguments.length) return map;\n        map = x;\n        if (attach) attach(map);\n        bean.add(parent(), defaultEvents);\n        bean.add(parent(), 'touchstart', onDown);\n        bean.add(parent(), 'MSPointerDown', onDown);\n        bean.add(parent(), 'pointerdown', onDown);\n        return interaction;\n    };\n\n    // set a grid getter for this control\n    interaction.grid = function(x) {\n        if (!arguments.length) return grid;\n        grid = x;\n        return interaction;\n    };\n\n    // detach this and its events from the map cleanly\n    interaction.remove = function(x) {\n        if (detach) detach(map);\n        bean.remove(parent(), defaultEvents);\n        bean.fire(interaction, 'remove');\n        return interaction;\n    };\n\n    // get or set a tilejson chunk of json\n    interaction.tilejson = function(x) {\n        if (!arguments.length) return gm.tilejson();\n        gm.tilejson(x);\n        return interaction;\n    };\n\n    // return the formatter, which has an exposed .format\n    // function\n    interaction.formatter = function() {\n        return gm.formatter();\n    };\n\n    // ev can be 'on', 'off', fn is the handler\n    interaction.on = function(ev, fn) {\n        bean.add(interaction, ev, fn);\n        return interaction;\n    };\n\n    // ev can be 'on', 'off', fn is the handler\n    interaction.off = function(ev, fn) {\n        bean.remove(interaction, ev, fn);\n        return interaction;\n    };\n\n    // Return or set the gridmanager implementation\n    interaction.gridmanager = function(x) {\n        if (!arguments.length) return gm;\n        gm = x;\n        return interaction;\n    };\n\n    // parent should be a function that returns\n    // the parent element of the map\n    interaction.parent  = function(x) {\n        parent = x;\n        return interaction;\n    };\n\n    return interaction;\n};\nvar wax = wax || {};\n\nwax.location = function() {\n\n    var t = {};\n\n    function on(o) {\n        if ((o.e.type === 'mousemove' || !o.e.type)) {\n            return;\n        } else {\n            var loc = o.formatter({ format: 'location' }, o.data);\n            if (loc) {\n                window.location.href = loc;\n            }\n        }\n    }\n\n    t.events = function() {\n        return {\n            on: on\n        };\n    };\n\n    return t;\n\n};\n// Wax GridUtil\n// ------------\n\n// Wax header\nvar wax = wax || {};\n\n// Request\n// -------\n// Request data cache. `callback(data)` where `data` is the response data.\nwax.request = {\n    cache: {},\n    locks: {},\n    promises: {},\n    get: function(url, callback) {\n        // Cache hit.\n        if (this.cache[url]) {\n            return callback(this.cache[url][0], this.cache[url][1]);\n        // Cache miss.\n        } else {\n            this.promises[url] = this.promises[url] || [];\n            this.promises[url].push(callback);\n            // Lock hit.\n            if (this.locks[url]) return;\n            // Request.\n            var that = this;\n            this.locks[url] = true;\n            reqwest({\n                url: url + (~url.indexOf('?') ? '&' : '?') + 'callback=grid',\n                type: 'jsonp',\n                jsonpCallback: 'callback',\n                success: function(data) {\n                    that.locks[url] = false;\n                    that.cache[url] = [null, data];\n                    for (var i = 0; i < that.promises[url].length; i++) {\n                        that.promises[url][i](that.cache[url][0], that.cache[url][1]);\n                    }\n                },\n                error: function(err) {\n                    that.locks[url] = false;\n                    that.cache[url] = [err, null];\n                    for (var i = 0; i < that.promises[url].length; i++) {\n                        that.promises[url][i](that.cache[url][0], that.cache[url][1]);\n                    }\n                }\n            });\n        }\n    }\n};\n// Templating\n// ---------\nwax.template = function(x) {\n    var template = {};\n\n    // Clone the data object such that the '__[format]__' key is only\n    // set for this instance of templating.\n    template.format = function(options, data) {\n\n        // mustache.js has been removed as a dependency\n        throw new Error('mustache.js templates are no longer supported');\n\n        // var clone = {};\n        // for (var key in data) {\n        //     clone[key] = data[key];\n        // }\n        // if (options.format) {\n        //     clone['__' + options.format + '__'] = true;\n        // }\n        // return wax.u.sanitize(Mustache.to_html(x, clone));\n    };\n\n    return template;\n};\nif (!wax) var wax = {};\n\n// A wrapper for reqwest jsonp to easily load TileJSON from a URL.\nwax.tilejson = function(url, callback) {\n    reqwest({\n        url: url + (~url.indexOf('?') ? '&' : '?') + 'callback=grid',\n        type: 'jsonp',\n        jsonpCallback: 'callback',\n        success: callback,\n        error: callback\n    });\n};\nvar wax = wax || {};\n\n// Utils are extracted from other libraries or\n// written from scratch to plug holes in browser compatibility.\nwax.u = {\n    // From Bonzo\n    offset: function(el) {\n        // TODO: window margins\n        //\n        // Okay, so fall back to styles if offsetWidth and height are botched\n        // by Firefox.\n        var width = el.offsetWidth || parseInt(el.style.width, 10),\n            height = el.offsetHeight || parseInt(el.style.height, 10),\n            doc_body = document.body,\n            top = 0,\n            left = 0;\n\n        var calculateOffset = function(el) {\n            if (el === doc_body || el === document.documentElement) return;\n            top += el.offsetTop;\n            left += el.offsetLeft;\n\n            var style = el.style.transform ||\n                el.style.WebkitTransform ||\n                el.style.OTransform ||\n                el.style.MozTransform ||\n                el.style.msTransform;\n\n            if (style) {\n                var match;\n                if (match = style.match(/translate\\((.+)px, (.+)px\\)/)) {\n                    top += parseInt(match[2], 10);\n                    left += parseInt(match[1], 10);\n                } else if (match = style.match(/translate3d\\((.+)px, (.+)px, (.+)px\\)/)) {\n                    top += parseInt(match[2], 10);\n                    left += parseInt(match[1], 10);\n                } else if (match = style.match(/matrix3d\\(([\\-\\d,\\s]+)\\)/)) {\n                    var pts = match[1].split(',');\n                    top += parseInt(pts[13], 10);\n                    left += parseInt(pts[12], 10);\n                } else if (match = style.match(/matrix\\(.+, .+, .+, .+, (.+), (.+)\\)/)) {\n                    top += parseInt(match[2], 10);\n                    left += parseInt(match[1], 10);\n                }\n            }\n        };\n\n        //Function that protects 'Unspected error' with Internet Explorer 11\n        function calculateOffsetIE(){\n          calculateOffset(el);\n          try {\n              while (el = el.offsetParent) { calculateOffset(el); }\n          } catch(e) {\n              // Hello, internet explorer.\n          }\n        }\n\n        // from jquery, offset.js\n        if ( typeof el.getBoundingClientRect !== \"undefined\" ) {\n          var body = document.body;\n          var doc = el.ownerDocument.documentElement;\n          var clientTop  = document.clientTop  || body.clientTop  || 0;\n          var clientLeft = document.clientLeft || body.clientLeft || 0;\n          var scrollTop  = window.pageYOffset || doc.scrollTop;\n          var scrollLeft = window.pageXOffset || doc.scrollLeft;\n\n          //With Internet Explorer 11, the function getBoundingClientRect() sometimes\n          //triggers the error: 'Unspected error.' Protecting it with try/catch\n          try {\n              var box = el.getBoundingClientRect();\n              top = box.top + scrollTop  - clientTop;\n              left = box.left + scrollLeft - clientLeft;\n          } catch(e) {\n              calculateOffsetIE();\n          }\n        } else {\n          calculateOffsetIE();\n        }\n\n        // Offsets from the body\n        top += doc_body.offsetTop;\n        left += doc_body.offsetLeft;\n        // Offsets from the HTML element\n        top += doc_body.parentNode.offsetTop;\n        left += doc_body.parentNode.offsetLeft;\n\n        // Firefox and other weirdos. Similar technique to jQuery's\n        // `doesNotIncludeMarginInBodyOffset`.\n        var htmlComputed = document.defaultView ?\n            window.getComputedStyle(doc_body.parentNode, null) :\n            doc_body.parentNode.currentStyle;\n        if (doc_body.parentNode.offsetTop !==\n            parseInt(htmlComputed.marginTop, 10) &&\n            !isNaN(parseInt(htmlComputed.marginTop, 10))) {\n            top += parseInt(htmlComputed.marginTop, 10);\n            left += parseInt(htmlComputed.marginLeft, 10);\n        }\n\n        return {\n            top: top,\n            left: left,\n            height: height,\n            width: width\n        };\n    },\n\n    '$': function(x) {\n        return (typeof x === 'string') ?\n            document.getElementById(x) :\n            x;\n    },\n\n    // From quirksmode: normalize the offset of an event from the top-left\n    // of the page.\n    eventoffset: function(e) {\n        var posx = 0;\n        var posy = 0;\n        if (!e) { e = window.event; }\n        if (e.type == \"MSPointerMove\" || e.type == \"MSPointerDown\" || e.type == \"MSPointerUp\") {\n          return {\n            x: e.pageX + window.pageXOffset,\n            y: e.pageY + window.pageYOffset\n          }\n        }\n        if (e.pageX || e.pageY) {\n            // Good browsers\n            return {\n                x: e.pageX,\n                y: e.pageY\n            };\n        } else if (e.clientX || e.clientY) {\n            // Internet Explorer\n            return {\n                x: e.clientX,\n                y: e.clientY\n            };\n        } else if (e.touches && e.touches.length === 1) {\n            // Touch browsers\n            return {\n                x: e.touches[0].pageX,\n                y: e.touches[0].pageY\n            };\n        }\n    },\n\n    // Ripped from underscore.js\n    // Internal function used to implement `_.throttle` and `_.debounce`.\n    limit: function(func, wait, debounce) {\n        var timeout;\n        return function() {\n            var context = this, args = arguments;\n            var throttler = function() {\n                timeout = null;\n                func.apply(context, args);\n            };\n            if (debounce) clearTimeout(timeout);\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\n        };\n    },\n\n    // Returns a function, that, when invoked, will only be triggered at most once\n    // during a given window of time.\n    throttle: function(func, wait) {\n        return this.limit(func, wait, false);\n    },\n\n    sanitize: function(content) {\n        if (!content) return '';\n\n        function urlX(url) {\n            // Data URIs are subject to a bug in Firefox\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=255107\n            // which let them be a vector. But WebKit does 'the right thing'\n            // or at least 'something' about this situation, so we'll tolerate\n            // them.\n            if (/^(https?:\\/\\/|data:image)/.test(url)) {\n                return url;\n            }\n        }\n\n        function idX(id) { return id; }\n\n        return html_sanitize(content, urlX, idX);\n    }\n};\nwax = wax || {};\nwax.leaf = wax.leaf || {};\n\nwax.leaf.hash = function(map) {\n    return wax.hash({\n        getCenterZoom: function () {\n            var center = map.getCenter(),\n                zoom = map.getZoom(),\n                precision = Math.max(\n                    0,\n                    Math.ceil(Math.log(zoom) / Math.LN2));\n\n            return [\n                zoom,\n                center.lat.toFixed(precision),\n                center.lng.toFixed(precision)\n            ].join('/');\n        },\n\n        setCenterZoom: function (args) {\n            map.setView(new L.LatLng(args[1], args[2]), args[0]);\n        },\n\n        bindChange: function (fn) {\n            map.on('moveend', fn);\n        },\n\n        unbindChange: function (fn) {\n            map.off('moveend', fn);\n        }\n    });\n};\nwax = wax || {};\nwax.leaf = wax.leaf || {};\n\nwax.leaf.interaction = function() {\n    var dirty = false, _grid, map;\n\n    function setdirty() { dirty = true; }\n\n    function grid() {\n        // TODO: don't build for tiles outside of viewport\n        // Touch interaction leads to intermediate\n        //var zoomLayer = map.createOrGetLayer(Math.round(map.getZoom())); //?what is this doing?\n        // Calculate a tile grid and cache it, by using the `.tiles`\n        // element on this map.\n        if (!dirty && _grid) {\n            return _grid;\n        } else {\n            return (_grid = (function(layers) {\n                var o = [];\n                for (var layerId in layers) {\n                    // This only supports tiled layers\n                    if (layers[layerId]._tiles) {\n                        for (var tile in layers[layerId]._tiles) {\n                            var _tile = layers[layerId]._tiles[tile];\n                            // avoid adding tiles without src, grid url can't be found for them\n                            if(_tile.src) {\n                              var offset = wax.u.offset(_tile);\n                              o.push([offset.top, offset.left, _tile]);\n                            }\n                        }\n                    }\n                }\n                return o;\n            })(map._layers));\n        }\n    }\n\n    function attach(x) {\n        if (!arguments.length) return map;\n        map = x;\n        var l = ['moveend'];\n        for (var i = 0; i < l.length; i++) {\n            map.on(l[i], setdirty);\n        }\n    }\n\n    function detach(x) {\n        if (!arguments.length) return map;\n        map = x;\n        var l = ['moveend'];\n        for (var i = 0; i < l.length; i++) {\n            map.off(l[i], setdirty);\n        }\n    }\n\n    return wax.interaction()\n        .attach(attach)\n        .detach(detach)\n        .parent(function() {\n          return map._container;\n        })\n        .grid(grid);\n};\nwax = wax || {};\nwax.leaf = wax.leaf || {};\n\nwax.leaf.connector = L.TileLayer.extend({\n    initialize: function(options) {\n        options = options || {};\n        options.minZoom = options.minzoom || 0;\n        options.maxZoom = options.maxzoom || 22;\n        L.TileLayer.prototype.initialize.call(this, options.tiles[0], options);\n    }\n});\nwax = wax || {};\nwax.g = wax.g || {};\n\n// Attribution\n// -----------\n// Attribution wrapper for Google Maps.\nwax.g.attribution = function(map, tilejson) {\n    tilejson = tilejson || {};\n    var a, // internal attribution control\n        attribution = {};\n\n    attribution.element = function() {\n        return a.element();\n    };\n\n    attribution.appendTo = function(elem) {\n        wax.u.$(elem).appendChild(a.element());\n        return this;\n    };\n\n    attribution.init = function() {\n        a = wax.attribution();\n        a.content(tilejson.attribution);\n        a.element().className = 'map-attribution map-g';\n        return this;\n    };\n\n    return attribution.init();\n};\nwax = wax || {};\nwax.g = wax.g || {};\n\n// Bandwidth Detection\n// ------------------\nwax.g.bwdetect = function(map, options) {\n    options = options || {};\n    var lowpng = options.png || '.png128',\n        lowjpg = options.jpg || '.jpg70';\n\n    // Create a low-bandwidth map type.\n    if (!map.mapTypes['mb-low']) {\n        var mb = map.mapTypes.mb;\n        var tilejson = {\n            tiles: [],\n            scheme: mb.options.scheme,\n            blankImage: mb.options.blankImage,\n            minzoom: mb.minZoom,\n            maxzoom: mb.maxZoom,\n            name: mb.name,\n            description: mb.description\n        };\n        for (var i = 0; i < mb.options.tiles.length; i++) {\n            tilejson.tiles.push(mb.options.tiles[i]\n                .replace('.png', lowpng)\n                .replace('.jpg', lowjpg));\n        }\n        m.mapTypes.set('mb-low', new wax.g.connector(tilejson));\n    }\n\n    return wax.bwdetect(options, function(bw) {\n      map.setMapTypeId(bw ? 'mb' : 'mb-low');\n    });\n};\nwax = wax || {};\nwax.g = wax.g || {};\n\nwax.g.hash = function(map) {\n    return wax.hash({\n        getCenterZoom: function() {\n            var center = map.getCenter(),\n                zoom = map.getZoom(),\n                precision = Math.max(\n                    0,\n                    Math.ceil(Math.log(zoom) / Math.LN2));\n            return [zoom.toFixed(2),\n                center.lat().toFixed(precision),\n                center.lng().toFixed(precision)\n            ].join('/');\n        },\n        setCenterZoom: function setCenterZoom(args) {\n            map.setCenter(new google.maps.LatLng(args[1], args[2]));\n            map.setZoom(args[0]);\n        },\n        bindChange: function(fn) {\n            google.maps.event.addListener(map, 'idle', fn);\n        },\n        unbindChange: function(fn) {\n            google.maps.event.removeListener(map, 'idle', fn);\n        }\n    });\n};\nwax = wax || {};\nwax.g = wax.g || {};\n\nwax.g.interaction = function() {\n    var dirty = false, _grid, map, interactionEnabled = false;\n    var tileloadListener = null,\n        idleListener = null;\n\n    function setdirty() { dirty = true; }\n\n    function grid() {\n\n        // when interaction is enabled there should be grid tiles\n        if (!dirty && _grid && (_grid.length > 0 || !interactionEnabled)) {\n            return _grid;\n        } else {\n            _grid = [];\n            var zoom = map.getZoom();\n            var mapOffset = wax.u.offset(map.getDiv());\n            var get = function(mapType) {\n                if (!mapType || !mapType.interactive) return;\n                interactionEnabled = true;\n                for (var key in mapType.cache) {\n                    if (key.split('/')[0] != zoom) continue;\n                    var tileOffset = wax.u.offset(mapType.cache[key]);\n                    _grid.push([\n                        tileOffset.top,\n                        tileOffset.left,\n                        mapType.cache[key]\n                    ]);\n                }\n            };\n            // Iterate over base mapTypes and overlayMapTypes.\n            for (var i in map.mapTypes) get(map.mapTypes[i]);\n            map.overlayMapTypes.forEach(get);\n        }\n        return _grid;\n    }\n\n    function attach(x) {\n        if (!arguments.length) return map;\n        map = x;\n        tileloadListener = google.maps.event.addListener(map, 'tileloaded',\n            setdirty);\n        idleListener = google.maps.event.addListener(map, 'idle',\n            setdirty);\n    }\n\n    function detach(x) {\n        if(tileloadListener)\n          google.maps.event.removeListener(tileloadListener);\n        if(idleListener)\n          google.maps.event.removeListener(idleListener);\n    }\n\n\n\n    return wax.interaction()\n        .attach(attach)\n        .detach(detach)\n        .discardTouchMove(true)\n        .parent(function() {\n          return map.getDiv();\n        })\n        .grid(grid);\n};\n// Wax for Google Maps API v3\n// --------------------------\n\n// Wax header\nvar wax = wax || {};\nwax.g = wax.g || {};\n\n// Wax Google Maps MapType: takes an object of options in the form\n//\n//     {\n//       name: '',\n//       filetype: '.png',\n//       layerName: 'world-light',\n//       alt: '',\n//       zoomRange: [0, 18],\n//       baseUrl: 'a url',\n//     }\nwax.g.connector = function(options) {\n    options = options || {};\n\n    this.options = {\n        tiles: options.tiles,\n        scheme: options.scheme || 'xyz',\n        blankImage: options.blankImage || 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n    };\n\n    this.opacity = options.opacity || 0;\n    this.minZoom = options.minzoom || 0;\n    this.maxZoom = options.maxzoom || 22;\n\n    this.name = options.name || '';\n    this.description = options.description || '';\n\n    // non-configurable options\n    this.interactive = true;\n    this.tileSize = new google.maps.Size(256, 256);\n\n    // DOM element cache\n    this.cache = {};\n};\n\n// Get a tile element from a coordinate, zoom level, and an ownerDocument.\nwax.g.connector.prototype.getTile = function(coord, zoom, ownerDocument) {\n    var key = zoom + '/' + coord.x + '/' + coord.y;\n    if (!this.cache[key]) {\n        var img = this.cache[key] = new Image(256, 256);\n        this.cache[key].src = this.getTileUrl(coord, zoom);\n        this.cache[key].setAttribute('gTileKey', key);\n        this.cache[key].setAttribute(\"style\",\"opacity: \"+this.opacity+\"; filter: alpha(opacity=\"+(this.opacity*100)+\");\");\n        this.cache[key].onerror = function() { img.style.display = 'none'; };\n    }\n    return this.cache[key];\n};\n\n// Remove a tile that has fallen out of the map's viewport.\n//\n// TODO: expire cache data in the gridmanager.\nwax.g.connector.prototype.releaseTile = function(tile) {\n    var key = tile.getAttribute('gTileKey');\n    if (this.cache[key]) delete this.cache[key];\n    if (tile.parentNode) tile.parentNode.removeChild(tile);\n};\n\n// Get a tile url, based on x, y coordinates and a z value.\nwax.g.connector.prototype.getTileUrl = function(coord, z) {\n    // Y coordinate is flipped in Mapbox, compared to Google\n    var mod = Math.pow(2, z),\n        y = (this.options.scheme === 'tms') ?\n            (mod - 1) - coord.y :\n            coord.y,\n        x = (coord.x % mod);\n\n    x = (x < 0) ? (coord.x % mod) + mod : x;\n\n    if (y < 0) return this.options.blankImage;\n\n    return this.options.tiles\n        [parseInt(x + y, 10) %\n            this.options.tiles.length]\n                .replace(/\\{z\\}/g, z)\n                .replace(/\\{x\\}/g, x)\n                .replace(/\\{y\\}/g, y);\n};\n\n; browserify_shim__define__module__export__(typeof wax != \"undefined\" ? wax : window.wax);\n\n}).call(global, undefined, undefined, undefined, undefined, function defineExport(ex) { module.exports = ex; });\n",
    null,
    "// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// when used in node, this will actually load the util module we depend on\n// versus loading the builtin util module as happens otherwise\n// this is a bug in node module loading as far as I am concerned\nvar util = require('util/');\n\nvar pSlice = Array.prototype.slice;\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  }\n  else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = stackStartFunction.name;\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction replacer(key, value) {\n  if (util.isUndefined(value)) {\n    return '' + value;\n  }\n  if (util.isNumber(value) && !isFinite(value)) {\n    return value.toString();\n  }\n  if (util.isFunction(value) || util.isRegExp(value)) {\n    return value.toString();\n  }\n  return value;\n}\n\nfunction truncate(s, n) {\n  if (util.isString(s)) {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\n\nfunction getMessage(self) {\n  return truncate(JSON.stringify(self.actual, replacer), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(JSON.stringify(self.expected, replacer), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (util.isBuffer(actual) && util.isBuffer(expected)) {\n    if (actual.length != expected.length) return false;\n\n    for (var i = 0; i < actual.length; i++) {\n      if (actual[i] !== expected[i]) return false;\n    }\n\n    return true;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!util.isObject(actual) && !util.isObject(expected)) {\n    return actual == expected;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b) {\n  if (util.isNullOrUndefined(a) || util.isNullOrUndefined(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b)) {\n    return a === b;\n  }\n  var aIsArgs = isArguments(a),\n      bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b);\n  }\n  var ka = objectKeys(a),\n      kb = objectKeys(b),\n      key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key])) return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  } else if (actual instanceof expected) {\n    return true;\n  } else if (expected.call({}, actual) === true) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (util.isString(expected)) {\n    message = expected;\n    expected = null;\n  }\n\n  try {\n    block();\n  } catch (e) {\n    actual = e;\n  }\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  if (!shouldThrow && expectedException(actual, expected)) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws.apply(this, [true].concat(pSlice.call(arguments)));\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/message) {\n  _throws.apply(this, [false].concat(pSlice.call(arguments)));\n};\n\nassert.ifError = function(err) { if (err) {throw err;}};\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n",
    "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n",
    "// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n",
    "//! moment.js\n//! version : 2.10.6\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, function () { 'use strict';\n\n    var hookCallback;\n\n    function utils_hooks__hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function create_utc__createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    function valid__isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            m._isValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated;\n\n            if (m._strict) {\n                m._isValid = m._isValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n        }\n        return m._isValid;\n    }\n\n    function valid__createInvalid (flags) {\n        var m = create_utc__createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    var momentProperties = utils_hooks__hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (typeof from._isAMomentObject !== 'undefined') {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (typeof from._i !== 'undefined') {\n            to._i = from._i;\n        }\n        if (typeof from._f !== 'undefined') {\n            to._f = from._f;\n        }\n        if (typeof from._l !== 'undefined') {\n            to._l = from._l;\n        }\n        if (typeof from._strict !== 'undefined') {\n            to._strict = from._strict;\n        }\n        if (typeof from._tzm !== 'undefined') {\n            to._tzm = from._tzm;\n        }\n        if (typeof from._isUTC !== 'undefined') {\n            to._isUTC = from._isUTC;\n        }\n        if (typeof from._offset !== 'undefined') {\n            to._offset = from._offset;\n        }\n        if (typeof from._pf !== 'undefined') {\n            to._pf = getParsingFlags(from);\n        }\n        if (typeof from._locale !== 'undefined') {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i in momentProperties) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (typeof val !== 'undefined') {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            utils_hooks__hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            return Math.ceil(number);\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function Locale() {\n    }\n\n    var locales = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && typeof module !== 'undefined' &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                require('./locale/' + name);\n                // because defineLocale currently also sets the global locale, we\n                // want to undo that for lazy loaded locales\n                locale_locales__getSetGlobalLocale(oldLocale);\n            } catch (e) { }\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function locale_locales__getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (typeof values === 'undefined') {\n                data = locale_locales__getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, values) {\n        if (values !== null) {\n            values.abbr = name;\n            locales[name] = locales[name] || new Locale();\n            locales[name].set(values);\n\n            // backwards compat for now: also set the locale\n            locale_locales__getSetGlobalLocale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    // returns locale data\n    function locale_locales__getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                get_set__set(this, unit, value);\n                utils_hooks__hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get_set__get(this, unit);\n            }\n        };\n    }\n\n    function get_set__get (mom, unit) {\n        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();\n    }\n\n    function get_set__set (mom, unit, value) {\n        return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n    }\n\n    // MOMENTS\n\n    function getSet (units, value) {\n        var unit;\n        if (typeof units === 'object') {\n            for (unit in units) {\n                this.set(unit, units[unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (typeof this[units] === 'function') {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '';\n            for (i = 0; i < length; i++) {\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    var matchWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i;\n\n    var regexes = {};\n\n    function isFunction (sth) {\n        // https://github.com/moment/moment/issues/2325\n        return typeof sth === 'function' &&\n            Object.prototype.toString.call(sth) === '[object Function]';\n    }\n\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }).replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (typeof callback === 'number') {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n\n    function daysInMonth(year, month) {\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  matchWord);\n    addRegexToken('MMMM', matchWord);\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m) {\n        return this._months[m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m) {\n        return this._monthsShort[m.month()];\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = create_utc__createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        // TODO: Move this out of here!\n        if (typeof value === 'string') {\n            value = mom.localeData().monthsParse(value);\n            // TODO: Another silent failure?\n            if (typeof value !== 'number') {\n                return mom;\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            utils_hooks__hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get_set__get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    function warn(msg) {\n        if (utils_hooks__hooks.suppressDeprecationWarnings === false && typeof console !== 'undefined' && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (firstTime) {\n                warn(msg + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    utils_hooks__hooks.suppressDeprecationWarnings = false;\n\n    var from_string__isoRegex = /^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d{2}-\\d{2}/],\n        ['YYYY-MM-DD', /\\d{4}-\\d{2}-\\d{2}/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d{2}-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d{2}/],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss', /(T| )\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /(T| )\\d\\d:\\d\\d/],\n        ['HH', /(T| )\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = from_string__isoRegex.exec(string);\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(string)) {\n                    config._f = isoDates[i][0];\n                    break;\n                }\n            }\n            for (i = 0, l = isoTimes.length; i < l; i++) {\n                if (isoTimes[i][1].exec(string)) {\n                    // match[6] should be 'T' or space\n                    config._f += (match[6] || ' ') + isoTimes[i][0];\n                    break;\n                }\n            }\n            if (string.match(matchOffset)) {\n                config._f += 'Z';\n            }\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n            utils_hooks__hooks.createFromInputFallback(config);\n        }\n    }\n\n    utils_hooks__hooks.createFromInputFallback = deprecate(\n        'moment construction falls back to js Date. This is ' +\n        'discouraged and will be removed in upcoming major ' +\n        'release. Please refer to ' +\n        'https://github.com/moment/moment/issues/1407 for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    function createDate (y, m, d, h, M, s, ms) {\n        //can't just apply() to create a date:\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\n        var date = new Date(y, m, d, h, M, s, ms);\n\n        //the date constructor doesn't accept years < 1970\n        if (y < 1970) {\n            date.setFullYear(y);\n        }\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date = new Date(Date.UTC.apply(null, arguments));\n        if (y < 1970) {\n            date.setUTCFullYear(y);\n        }\n        return date;\n    }\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    utils_hooks__hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', false);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // firstDayOfWeek       0 = sun, 6 = sat\n    //                      the day of the week that starts the week\n    //                      (usually sunday or monday)\n    // firstDayOfWeekOfYear 0 = sun, 6 = sat\n    //                      the first week is the week that contains the first\n    //                      of this day of the week\n    //                      (eg. ISO weeks use thursday (4))\n    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {\n        var end = firstDayOfWeekOfYear - firstDayOfWeek,\n            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),\n            adjustedMoment;\n\n\n        if (daysToDayOfWeek > end) {\n            daysToDayOfWeek -= 7;\n        }\n\n        if (daysToDayOfWeek < end - 7) {\n            daysToDayOfWeek += 7;\n        }\n\n        adjustedMoment = local__createLocal(mom).add(daysToDayOfWeek, 'd');\n        return {\n            week: Math.ceil(adjustedMoment.dayOfYear() / 7),\n            year: adjustedMoment.year()\n        };\n    }\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 1st is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {\n        var week1Jan = 6 + firstDayOfWeek - firstDayOfWeekOfYear, janX = createUTCDate(year, 0, 1 + week1Jan), d = janX.getUTCDay(), dayOfYear;\n        if (d < firstDayOfWeek) {\n            d += 7;\n        }\n\n        weekday = weekday != null ? 1 * weekday : firstDayOfWeek;\n\n        dayOfYear = 1 + week1Jan + 7 * (week - 1) - d + weekday;\n\n        return {\n            year: dayOfYear > 0 ? year : year - 1,\n            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear\n        };\n    }\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        var now = new Date();\n        if (config._useUTC) {\n            return [now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()];\n        }\n        return [now.getFullYear(), now.getMonth(), now.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse)) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);\n            week = defaults(w.w, 1);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < dow) {\n                    ++week;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from begining of week\n                weekday = w.e + dow;\n            } else {\n                // default to begining of week\n                weekday = dow;\n            }\n        }\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);\n\n        config._a[YEAR] = temp.year;\n        config._dayOfYear = temp.dayOfYear;\n    }\n\n    utils_hooks__hooks.ISO_8601 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === utils_hooks__hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (getParsingFlags(config).bigHour === true &&\n                config._a[HOUR] <= 12 &&\n                config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!valid__isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = [i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond];\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || locale_locales__getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return valid__createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        } else if (isDate(input)) {\n            config._d = input;\n        } else {\n            configFromInput(config);\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (input === undefined) {\n            config._d = new Date();\n        } else if (isDate(input)) {\n            config._d = new Date(+input);\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (typeof(input) === 'object') {\n            configFromObject(config);\n        } else if (typeof(input) === 'number') {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            utils_hooks__hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (typeof(locale) === 'boolean') {\n            strict = locale;\n            locale = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function local__createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n         'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\n         function () {\n             var other = local__createLocal.apply(null, arguments);\n             return other < this ? this : other;\n         }\n     );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\n        function () {\n            var other = local__createLocal.apply(null, arguments);\n            return other > this ? this : other;\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return local__createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 36e5; // 1000 * 60 * 60\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = locale_locales__getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchOffset);\n    addRegexToken('ZZ', matchOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(string) {\n        var matches = ((string || '').match(matchOffset) || []);\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? +input : +local__createLocal(input)) - (+res);\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(+res._d + diff);\n            utils_hooks__hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return local__createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    utils_hooks__hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(input);\n            }\n            if (Math.abs(input) < 16) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    utils_hooks__hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm) {\n            this.utcOffset(this._tzm);\n        } else if (typeof this._i === 'string') {\n            this.utcOffset(offsetFromString(this._i));\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        input = input ? local__createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (typeof this._isDSTShifted !== 'undefined') {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return !this._isUTC;\n    }\n\n    function isUtcOffset () {\n        return this._isUTC;\n    }\n\n    function isUtc () {\n        return this._isUTC && this._offset === 0;\n    }\n\n    var aspNetRegex = /(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    var create__isoRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;\n\n    function create__createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (typeof input === 'number') {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])        * sign,\n                h  : toInt(match[HOUR])        * sign,\n                m  : toInt(match[MINUTE])      * sign,\n                s  : toInt(match[SECOND])      * sign,\n                ms : toInt(match[MILLISECOND]) * sign\n            };\n        } else if (!!(match = create__isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                d : parseIso(match[4], sign),\n                h : parseIso(match[5], sign),\n                m : parseIso(match[6], sign),\n                s : parseIso(match[7], sign),\n                w : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    create__createDuration.fn = Duration.prototype;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {milliseconds: 0, months: 0};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = create__createDuration(val, period);\n            add_subtract__addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function add_subtract__addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = duration._days,\n            months = duration._months;\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (milliseconds) {\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\n        }\n        if (days) {\n            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);\n        }\n        if (months) {\n            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);\n        }\n        if (updateOffset) {\n            utils_hooks__hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add_subtract__add      = createAdder(1, 'add');\n    var add_subtract__subtract = createAdder(-1, 'subtract');\n\n    function moment_calendar__calendar (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || local__createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            diff = this.diff(sod, 'days', true),\n            format = diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n        return this.format(formats && formats[format] || this.localeData().calendar(format, this, local__createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var inputMs;\n        units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\n        if (units === 'millisecond') {\n            input = isMoment(input) ? input : local__createLocal(input);\n            return +this > +input;\n        } else {\n            inputMs = isMoment(input) ? +input : +local__createLocal(input);\n            return inputMs < +this.clone().startOf(units);\n        }\n    }\n\n    function isBefore (input, units) {\n        var inputMs;\n        units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');\n        if (units === 'millisecond') {\n            input = isMoment(input) ? input : local__createLocal(input);\n            return +this < +input;\n        } else {\n            inputMs = isMoment(input) ? +input : +local__createLocal(input);\n            return +this.clone().endOf(units) < inputMs;\n        }\n    }\n\n    function isBetween (from, to, units) {\n        return this.isAfter(from, units) && this.isBefore(to, units);\n    }\n\n    function isSame (input, units) {\n        var inputMs;\n        units = normalizeUnits(units || 'millisecond');\n        if (units === 'millisecond') {\n            input = isMoment(input) ? input : local__createLocal(input);\n            return +this === +input;\n        } else {\n            inputMs = +local__createLocal(input);\n            return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));\n        }\n    }\n\n    function diff (input, units, asFloat) {\n        var that = cloneWithOffset(input, this),\n            zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4,\n            delta, output;\n\n        units = normalizeUnits(units);\n\n        if (units === 'year' || units === 'month' || units === 'quarter') {\n            output = monthDiff(this, that);\n            if (units === 'quarter') {\n                output = output / 3;\n            } else if (units === 'year') {\n                output = output / 12;\n            }\n        } else {\n            delta = this - that;\n            output = units === 'second' ? delta / 1e3 : // 1000\n                units === 'minute' ? delta / 6e4 : // 1000 * 60\n                units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60\n                units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\n                units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\n                delta;\n        }\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        return -(wholeMonthDiff + adjust);\n    }\n\n    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function moment_format__toISOString () {\n        var m = this.clone().utc();\n        if (0 < m.year() && m.year() <= 9999) {\n            if ('function' === typeof Date.prototype.toISOString) {\n                // native implementation is ~50x faster, use it when we can\n                return this.toDate().toISOString();\n            } else {\n                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n            }\n        } else {\n            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n        }\n    }\n\n    function format (inputString) {\n        var output = formatMoment(this, inputString || utils_hooks__hooks.defaultFormat);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n        return create__createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(local__createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n        return create__createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(local__createLocal(), withoutSuffix);\n    }\n\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = locale_locales__getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    function startOf (units) {\n        units = normalizeUnits(units);\n        // the following switch intentionally omits break keywords\n        // to utilize falling through the cases.\n        switch (units) {\n        case 'year':\n            this.month(0);\n            /* falls through */\n        case 'quarter':\n        case 'month':\n            this.date(1);\n            /* falls through */\n        case 'week':\n        case 'isoWeek':\n        case 'day':\n            this.hours(0);\n            /* falls through */\n        case 'hour':\n            this.minutes(0);\n            /* falls through */\n        case 'minute':\n            this.seconds(0);\n            /* falls through */\n        case 'second':\n            this.milliseconds(0);\n        }\n\n        // weeks are a special case\n        if (units === 'week') {\n            this.weekday(0);\n        }\n        if (units === 'isoWeek') {\n            this.isoWeekday(1);\n        }\n\n        // quarters are also special\n        if (units === 'quarter') {\n            this.month(Math.floor(this.month() / 3) * 3);\n        }\n\n        return this;\n    }\n\n    function endOf (units) {\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond') {\n            return this;\n        }\n        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n    }\n\n    function to_type__valueOf () {\n        return +this._d - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(+this / 1000);\n    }\n\n    function toDate () {\n        return this._offset ? new Date(+this) : this._d;\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function moment_valid__isValid () {\n        return valid__isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);\n    });\n\n    // HELPERS\n\n    function weeksInYear(year, dow, doy) {\n        return weekOfYear(local__createLocal([year, 11, 31 + dow - doy]), dow, doy).week;\n    }\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;\n        return input == null ? year : this.add((input - year), 'y');\n    }\n\n    function getSetISOWeekYear (input) {\n        var year = weekOfYear(this, 1, 4).year;\n        return input == null ? year : this.add((input - year), 'y');\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    addFormatToken('Q', 0, 0, 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0], 10);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   matchWord);\n    addRegexToken('ddd',  matchWord);\n    addRegexToken('dddd', matchWord);\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config) {\n        var weekday = config._locale.weekdaysParse(input);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    // LOCALES\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m) {\n        return this._weekdays[m.day()];\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return this._weekdaysShort[m.day()];\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return this._weekdaysMin[m.day()];\n    }\n\n    function localeWeekdaysParse (weekdayName) {\n        var i, mom, regex;\n\n        this._weekdaysParse = this._weekdaysParse || [];\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            if (!this._weekdaysParse[i]) {\n                mom = local__createLocal([2000, 1]).day(i);\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n        return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, function () {\n        return this.hours() % 12 || 12;\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour he wants. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var momentPrototype__proto = Moment.prototype;\n\n    momentPrototype__proto.add          = add_subtract__add;\n    momentPrototype__proto.calendar     = moment_calendar__calendar;\n    momentPrototype__proto.clone        = clone;\n    momentPrototype__proto.diff         = diff;\n    momentPrototype__proto.endOf        = endOf;\n    momentPrototype__proto.format       = format;\n    momentPrototype__proto.from         = from;\n    momentPrototype__proto.fromNow      = fromNow;\n    momentPrototype__proto.to           = to;\n    momentPrototype__proto.toNow        = toNow;\n    momentPrototype__proto.get          = getSet;\n    momentPrototype__proto.invalidAt    = invalidAt;\n    momentPrototype__proto.isAfter      = isAfter;\n    momentPrototype__proto.isBefore     = isBefore;\n    momentPrototype__proto.isBetween    = isBetween;\n    momentPrototype__proto.isSame       = isSame;\n    momentPrototype__proto.isValid      = moment_valid__isValid;\n    momentPrototype__proto.lang         = lang;\n    momentPrototype__proto.locale       = locale;\n    momentPrototype__proto.localeData   = localeData;\n    momentPrototype__proto.max          = prototypeMax;\n    momentPrototype__proto.min          = prototypeMin;\n    momentPrototype__proto.parsingFlags = parsingFlags;\n    momentPrototype__proto.set          = getSet;\n    momentPrototype__proto.startOf      = startOf;\n    momentPrototype__proto.subtract     = add_subtract__subtract;\n    momentPrototype__proto.toArray      = toArray;\n    momentPrototype__proto.toObject     = toObject;\n    momentPrototype__proto.toDate       = toDate;\n    momentPrototype__proto.toISOString  = moment_format__toISOString;\n    momentPrototype__proto.toJSON       = moment_format__toISOString;\n    momentPrototype__proto.toString     = toString;\n    momentPrototype__proto.unix         = unix;\n    momentPrototype__proto.valueOf      = to_type__valueOf;\n\n    // Year\n    momentPrototype__proto.year       = getSetYear;\n    momentPrototype__proto.isLeapYear = getIsLeapYear;\n\n    // Week Year\n    momentPrototype__proto.weekYear    = getSetWeekYear;\n    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;\n\n    // Quarter\n    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;\n\n    // Month\n    momentPrototype__proto.month       = getSetMonth;\n    momentPrototype__proto.daysInMonth = getDaysInMonth;\n\n    // Week\n    momentPrototype__proto.week           = momentPrototype__proto.weeks        = getSetWeek;\n    momentPrototype__proto.isoWeek        = momentPrototype__proto.isoWeeks     = getSetISOWeek;\n    momentPrototype__proto.weeksInYear    = getWeeksInYear;\n    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;\n\n    // Day\n    momentPrototype__proto.date       = getSetDayOfMonth;\n    momentPrototype__proto.day        = momentPrototype__proto.days             = getSetDayOfWeek;\n    momentPrototype__proto.weekday    = getSetLocaleDayOfWeek;\n    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;\n    momentPrototype__proto.dayOfYear  = getSetDayOfYear;\n\n    // Hour\n    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;\n\n    // Minute\n    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;\n\n    // Second\n    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;\n\n    // Millisecond\n    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;\n\n    // Offset\n    momentPrototype__proto.utcOffset            = getSetOffset;\n    momentPrototype__proto.utc                  = setOffsetToUTC;\n    momentPrototype__proto.local                = setOffsetToLocal;\n    momentPrototype__proto.parseZone            = setOffsetToParsedOffset;\n    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    momentPrototype__proto.isDST                = isDaylightSavingTime;\n    momentPrototype__proto.isDSTShifted         = isDaylightSavingTimeShifted;\n    momentPrototype__proto.isLocal              = isLocal;\n    momentPrototype__proto.isUtcOffset          = isUtcOffset;\n    momentPrototype__proto.isUtc                = isUtc;\n    momentPrototype__proto.isUTC                = isUtc;\n\n    // Timezone\n    momentPrototype__proto.zoneAbbr = getZoneAbbr;\n    momentPrototype__proto.zoneName = getZoneName;\n\n    // Deprecations\n    momentPrototype__proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    momentPrototype__proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    momentPrototype__proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779', getSetZone);\n\n    var momentPrototype = momentPrototype__proto;\n\n    function moment__createUnix (input) {\n        return local__createLocal(input * 1000);\n    }\n\n    function moment__createInZone () {\n        return local__createLocal.apply(null, arguments).parseZone();\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function locale_calendar__calendar (key, mom, now) {\n        var output = this._calendar[key];\n        return typeof output === 'function' ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relative__relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (typeof output === 'function') ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);\n    }\n\n    function locale_set__set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (typeof prop === 'function') {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _ordinalParseLenient.\n        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\\d{1,2}/).source);\n    }\n\n    var prototype__proto = Locale.prototype;\n\n    prototype__proto._calendar       = defaultCalendar;\n    prototype__proto.calendar        = locale_calendar__calendar;\n    prototype__proto._longDateFormat = defaultLongDateFormat;\n    prototype__proto.longDateFormat  = longDateFormat;\n    prototype__proto._invalidDate    = defaultInvalidDate;\n    prototype__proto.invalidDate     = invalidDate;\n    prototype__proto._ordinal        = defaultOrdinal;\n    prototype__proto.ordinal         = ordinal;\n    prototype__proto._ordinalParse   = defaultOrdinalParse;\n    prototype__proto.preparse        = preParsePostFormat;\n    prototype__proto.postformat      = preParsePostFormat;\n    prototype__proto._relativeTime   = defaultRelativeTime;\n    prototype__proto.relativeTime    = relative__relativeTime;\n    prototype__proto.pastFuture      = pastFuture;\n    prototype__proto.set             = locale_set__set;\n\n    // Month\n    prototype__proto.months       =        localeMonths;\n    prototype__proto._months      = defaultLocaleMonths;\n    prototype__proto.monthsShort  =        localeMonthsShort;\n    prototype__proto._monthsShort = defaultLocaleMonthsShort;\n    prototype__proto.monthsParse  =        localeMonthsParse;\n\n    // Week\n    prototype__proto.week = localeWeek;\n    prototype__proto._week = defaultLocaleWeek;\n    prototype__proto.firstDayOfYear = localeFirstDayOfYear;\n    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;\n\n    // Day of Week\n    prototype__proto.weekdays       =        localeWeekdays;\n    prototype__proto._weekdays      = defaultLocaleWeekdays;\n    prototype__proto.weekdaysMin    =        localeWeekdaysMin;\n    prototype__proto._weekdaysMin   = defaultLocaleWeekdaysMin;\n    prototype__proto.weekdaysShort  =        localeWeekdaysShort;\n    prototype__proto._weekdaysShort = defaultLocaleWeekdaysShort;\n    prototype__proto.weekdaysParse  =        localeWeekdaysParse;\n\n    // Hours\n    prototype__proto.isPM = localeIsPM;\n    prototype__proto._meridiemParse = defaultLocaleMeridiemParse;\n    prototype__proto.meridiem = localeMeridiem;\n\n    function lists__get (format, index, field, setter) {\n        var locale = locale_locales__getLocale();\n        var utc = create_utc__createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function list (format, index, field, count, setter) {\n        if (typeof format === 'number') {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return lists__get(format, index, field, setter);\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < count; i++) {\n            out[i] = lists__get(format, i, field, setter);\n        }\n        return out;\n    }\n\n    function lists__listMonths (format, index) {\n        return list(format, index, 'months', 12, 'month');\n    }\n\n    function lists__listMonthsShort (format, index) {\n        return list(format, index, 'monthsShort', 12, 'month');\n    }\n\n    function lists__listWeekdays (format, index) {\n        return list(format, index, 'weekdays', 7, 'day');\n    }\n\n    function lists__listWeekdaysShort (format, index) {\n        return list(format, index, 'weekdaysShort', 7, 'day');\n    }\n\n    function lists__listWeekdaysMin (format, index) {\n        return list(format, index, 'weekdaysMin', 7, 'day');\n    }\n\n    locale_locales__getSetGlobalLocale('en', {\n        ordinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);\n    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);\n\n    var mathAbs = Math.abs;\n\n    function duration_abs__abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function duration_add_subtract__addSubtract (duration, input, value, direction) {\n        var other = create__createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function duration_add_subtract__add (input, value) {\n        return duration_add_subtract__addSubtract(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function duration_add_subtract__subtract (input, value) {\n        return duration_add_subtract__addSubtract(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'year') {\n            days   = this._days   + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            return units === 'month' ? months : months / 12;\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function duration_as__valueOf () {\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asYears        = makeAs('y');\n\n    function duration_get__get (units) {\n        units = normalizeUnits(units);\n        return this[units + 's']();\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this._data[name];\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        s: 45,  // seconds to minute\n        m: 45,  // minutes to hour\n        h: 22,  // hours to day\n        d: 26,  // days to month\n        M: 11   // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function duration_humanize__relativeTime (posNegDuration, withoutSuffix, locale) {\n        var duration = create__createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds < thresholds.s && ['s', seconds]  ||\n                minutes === 1          && ['m']           ||\n                minutes < thresholds.m && ['mm', minutes] ||\n                hours   === 1          && ['h']           ||\n                hours   < thresholds.h && ['hh', hours]   ||\n                days    === 1          && ['d']           ||\n                days    < thresholds.d && ['dd', days]    ||\n                months  === 1          && ['M']           ||\n                months  < thresholds.M && ['MM', months]  ||\n                years   === 1          && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function duration_humanize__getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        var locale = this.localeData();\n        var output = duration_humanize__relativeTime(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var iso_string__abs = Math.abs;\n\n    function iso_string__toISOString() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        var seconds = iso_string__abs(this._milliseconds) / 1000;\n        var days         = iso_string__abs(this._days);\n        var months       = iso_string__abs(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds;\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        return (total < 0 ? '-' : '') +\n            'P' +\n            (Y ? Y + 'Y' : '') +\n            (M ? M + 'M' : '') +\n            (D ? D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? h + 'H' : '') +\n            (m ? m + 'M' : '') +\n            (s ? s + 'S' : '');\n    }\n\n    var duration_prototype__proto = Duration.prototype;\n\n    duration_prototype__proto.abs            = duration_abs__abs;\n    duration_prototype__proto.add            = duration_add_subtract__add;\n    duration_prototype__proto.subtract       = duration_add_subtract__subtract;\n    duration_prototype__proto.as             = as;\n    duration_prototype__proto.asMilliseconds = asMilliseconds;\n    duration_prototype__proto.asSeconds      = asSeconds;\n    duration_prototype__proto.asMinutes      = asMinutes;\n    duration_prototype__proto.asHours        = asHours;\n    duration_prototype__proto.asDays         = asDays;\n    duration_prototype__proto.asWeeks        = asWeeks;\n    duration_prototype__proto.asMonths       = asMonths;\n    duration_prototype__proto.asYears        = asYears;\n    duration_prototype__proto.valueOf        = duration_as__valueOf;\n    duration_prototype__proto._bubble        = bubble;\n    duration_prototype__proto.get            = duration_get__get;\n    duration_prototype__proto.milliseconds   = milliseconds;\n    duration_prototype__proto.seconds        = seconds;\n    duration_prototype__proto.minutes        = minutes;\n    duration_prototype__proto.hours          = hours;\n    duration_prototype__proto.days           = days;\n    duration_prototype__proto.weeks          = weeks;\n    duration_prototype__proto.months         = months;\n    duration_prototype__proto.years          = years;\n    duration_prototype__proto.humanize       = humanize;\n    duration_prototype__proto.toISOString    = iso_string__toISOString;\n    duration_prototype__proto.toString       = iso_string__toISOString;\n    duration_prototype__proto.toJSON         = iso_string__toISOString;\n    duration_prototype__proto.locale         = locale;\n    duration_prototype__proto.localeData     = localeData;\n\n    // Deprecations\n    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);\n    duration_prototype__proto.lang = lang;\n\n    // Side effect imports\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    utils_hooks__hooks.version = '2.10.6';\n\n    setHookCallback(local__createLocal);\n\n    utils_hooks__hooks.fn                    = momentPrototype;\n    utils_hooks__hooks.min                   = min;\n    utils_hooks__hooks.max                   = max;\n    utils_hooks__hooks.utc                   = create_utc__createUTC;\n    utils_hooks__hooks.unix                  = moment__createUnix;\n    utils_hooks__hooks.months                = lists__listMonths;\n    utils_hooks__hooks.isDate                = isDate;\n    utils_hooks__hooks.locale                = locale_locales__getSetGlobalLocale;\n    utils_hooks__hooks.invalid               = valid__createInvalid;\n    utils_hooks__hooks.duration              = create__createDuration;\n    utils_hooks__hooks.isMoment              = isMoment;\n    utils_hooks__hooks.weekdays              = lists__listWeekdays;\n    utils_hooks__hooks.parseZone             = moment__createInZone;\n    utils_hooks__hooks.localeData            = locale_locales__getLocale;\n    utils_hooks__hooks.isDuration            = isDuration;\n    utils_hooks__hooks.monthsShort           = lists__listMonthsShort;\n    utils_hooks__hooks.weekdaysMin           = lists__listWeekdaysMin;\n    utils_hooks__hooks.defineLocale          = defineLocale;\n    utils_hooks__hooks.weekdaysShort         = lists__listWeekdaysShort;\n    utils_hooks__hooks.normalizeUnits        = normalizeUnits;\n    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;\n\n    var _moment = utils_hooks__hooks;\n\n    return _moment;\n\n}));",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar DashboardView = require('./dashboard-view');\nvar WidgetsCollection = require('./widgets/widgets-collection');\nvar WidgetsService = require('./widgets-service');\n\n/**\n * Translates a vizJSON v3 datastructure into a working dashboard which will be rendered in given selector.\n *\n * @param {String} selector e.g. \"#foobar-id\", \".some-class\"\n * @param {Object} vizJSON JSON datastructure\n * @param {Object} opts (Optional) flags, see 3rd param for cdb.createVis for available ones. Keys used here:\n *   renderMenu: {Boolean} If true (default), render a top-level menu on the left side.\n * @return {Object} with keys:\n *   dashboardView: root (backbone) view of the dashboard\n *   vis: the instantiated vis map, same result as given from cdb.createVis()\n */\nmodule.exports = function (selector, vizJSON, opts) {\n  var dashboardEl = document.querySelector(selector);\n  if (!dashboardEl) throw new Error('no element found with selector ' + selector);\n\n  // Default options\n  opts = opts || {};\n  opts.renderMenu = _.isBoolean(opts.renderMenu)\n    ? opts.renderMenu\n    : true;\n\n  var widgets = new WidgetsCollection();\n\n  var model = new cdb.core.Model({\n    title: vizJSON.title,\n    description: vizJSON.description,\n    updatedAt: vizJSON.updated_at,\n    userName: vizJSON.user.fullname,\n    userAvatarURL: vizJSON.user.avatar_url,\n    renderMenu: opts.renderMenu\n  });\n  var dashboardView = new DashboardView({\n    el: dashboardEl,\n    widgets: widgets,\n    model: model\n  });\n  var vis = cdb.createVis(dashboardView.$('#map'), vizJSON, _.extend(opts, {\n    skipMapInstantiation: true\n  }));\n\n  // Create widgets\n  var widgetsService = new WidgetsService(widgets, vis.dataviews);\n  var widgetModelsMap = {\n    list: widgetsService.createListModel.bind(widgetsService),\n    formula: widgetsService.createFormulaModel.bind(widgetsService),\n    histogram: widgetsService.createHistogramModel.bind(widgetsService),\n    'time-series': widgetsService.createTimeSeriesModel.bind(widgetsService),\n    category: widgetsService.createCategoryModel.bind(widgetsService)\n  };\n  vizJSON.widgets.forEach(function (d) {\n    // Flatten the data structure given in vizJSON, the widgetsService will use whatever it needs and ignore the rest\n    var attrs = _.extend({}, d, d.options);\n    var newWidgetModel = widgetModelsMap[d.type];\n\n    if (_.isFunction(newWidgetModel)) {\n      // Find the Layer that the Widget should be created for.\n      var layer;\n      if (d.layer_id) {\n        layer = vis.map.layers.get(d.layer_id);\n      } else if (Number.isInteger(d.layerIndex)) {\n        // TODO Since namedmap doesn't have ids we need to map in another way, here using index\n        //   should we solve this in another way?\n        layer = vis.map.layers.at(d.layerIndex);\n      }\n\n      newWidgetModel(attrs, layer);\n    } else {\n      cdb.log.error('No widget found for type ' + d.type);\n    }\n  });\n\n  dashboardView.render();\n\n  if (widgets.size() > 0) {\n    vis.centerMapToOrigin();\n  }\n\n  vis.instantiateMap();\n\n  return {\n    dashboardView: dashboardView,\n    widgets: widgetsService,\n    vis: vis\n  };\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar WidgetViewFactory = require('./widgets/widget-view-factory');\nvar TimeSeriesContentView = require('./widgets/time-series/content-view');\nvar TorqueTimeSeriesContentView = require('./widgets/time-series/torque-content-view');\n\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Dashboard-belowMap',\n\n  initialize: function (options) {\n    this._widgetViewFactory = new WidgetViewFactory([\n      {\n        // same type as below, but also check if the associated layer is a a torque layer\n        match: function (widgetModel) {\n          if (widgetModel.get('type') === 'time-series') {\n            var d = widgetModel.dataviewModel;\n            return d && d.layer.get('type') === 'torque';\n          }\n          return false;\n        },\n        createContentView: function (widgetModel) {\n          return new TorqueTimeSeriesContentView({\n            model: widgetModel\n          });\n        },\n        customizeWidgetAttrs: function (attrs) {\n          attrs.className += ' CDB-Widget--timeSeries';\n          return attrs;\n        }\n      }, {\n        type: 'time-series',\n        createContentView: function (widgetModel) {\n          return new TimeSeriesContentView({\n            model: widgetModel\n          });\n        },\n        customizeWidgetAttrs: function (attrs) {\n          attrs.className += ' CDB-Widget--timeSeries';\n          return attrs;\n        }\n      }\n    ]);\n\n    this._widgets = options.widgets;\n    this._widgets.bind('add', this._maybeRenderWidgetView, this);\n    this._widgets.bind('reset', this.render, this);\n    this._widgets.bind('add reset remove', this._onWidgetsChange, this);\n    this.add_related_model(this._widgets);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    this._widgets.each(this._maybeRenderWidgetView, this);\n    this._toggleVisiblity();\n\n    return this;\n  },\n\n  _maybeRenderWidgetView: function (widgetModel) {\n    var view = this._widgetViewFactory.createWidgetView(widgetModel);\n    if (view) {\n      this.addView(view);\n      this.$el.append(view.render().el);\n    }\n  },\n\n  _toggleVisiblity: function () {\n    this.$el.toggle(!_.isEmpty(this._subviews));\n  },\n\n  _onWidgetsChange: function () {\n    this._toggleVisiblity();\n  }\n\n});\n",
    "var cdb = require('cartodb.js');\nvar template = require('./dashboard-menu-view.tpl');\nvar moment = require('moment');\n\nvar DashboardMenuView = cdb.core.View.extend({\n  className: 'CDB-Dashboard-menu',\n\n  events: {\n    'click .js-toggle-view': '_toogleView'\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        description: this.model.get('description'),\n        updatedAt: moment(this.model.get('updatedAt')).fromNow(),\n        userName: this.model.get('userName'),\n        userAvatarURL: this.model.get('userAvatarURL')\n      })\n    );\n\n    return this;\n  },\n\n  _toogleView: function () {\n    this.$el.toggleClass('is-active');\n  }\n});\n\nmodule.exports = DashboardMenuView;\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Dashboard-menuContainer\"> <div class=\"CDB-Dashboard-menuInner\"> <div class=\"CDB-Dashboard-menuHeader\"> <div class=\"CDB-Dashboard-menuLogo\"> <i class=\"CDB-IconFont CDB-IconFont-cartoFante\"></i> </div> <div class=\"CDB-Dashboard-menuInfo\"> <button class=\"CDB-Shape CDB-Shape--medium js-toggle-view\"> <div class=\"CDB-Shape-threePoints is-horizontal is-medium is-white\"> <div class=\"CDB-Shape-threePointsItem is-round\"></div> <div class=\"CDB-Shape-threePointsItem is-round\"></div> <div class=\"CDB-Shape-threePointsItem is-round\"></div> </div> </button> </div> <div class=\"CDB-Dashboard-menuInfo is-active\"> <button class=\"CDB-Shape CDB-Shape--medium js-toggle-view\"> <div class=\"CDB-Shape-threePoints is-horizontal is-medium\"> <div class=\"CDB-Shape-threePointsItem is-round\"></div> <div class=\"CDB-Shape-threePointsItem is-round\"></div> <div class=\"CDB-Shape-threePointsItem is-round\"></div> </div> </button> </div> <ul class=\"CDB-Dashboard-menuActions\"> <li class=\"CDB-Dashboard-menuActionsItem\"> <a href=\"#\" class=\"u-hintTextColor\"> <i class=\"CDB-IconFont CDB-IconFont-heartFill CDB-Size-large\"></i> </a> </li> <li class=\"CDB-Dashboard-menuActionsItem\"> <a href=\"#\" class=\"u-hintTextColor\"> <i class=\"CDB-IconFont CDB-IconFont-twitter CDB-Size-large\"></i> </a> </li> <li class=\"CDB-Dashboard-menuActionsItem\"> <a href=\"#\" class=\"u-hintTextColor\"> <i class=\"CDB-IconFont CDB-IconFont-facebook CDB-Size-medium\"></i> </a> </li> <li class=\"CDB-Dashboard-menuActionsItem\"> <a href=\"#\" class=\"u-hintTextColor\"> <i class=\"CDB-IconFont CDB-IconFont-anchor CDB-Size-medium\"></i> </a> </li> </ul> <div class=\"CDB-Dashboard-menuTexts CDB-Dashboard-hideMobile\"> <p class=\"CDB-Text CDB-Size-small u-upperCase u-altTextColor u-bSpace--m js-timeAgo\">UPDATED '+\n((__t=( updatedAt ))==null?'':_.escape(__t))+\n'</p> <h1 class=\"CDB-Dashboard-menuTitle CDB-Text CDB-Size-huge u-ellipsis js-title\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h1> <h2 class=\"CDB-Text CDB-Size-large is-light u-secondaryTextColor js-description\">'+\n((__t=( cdb.core.sanitize.html(description) ))==null?'':__t)+\n'</h2> </div> </div> <div class=\"CDB-Dashboard-menuFooter\"> <ul> <li class=\"CDB-Dashboard-menuFooterItem\"> <div class=\"CDB-Dashboard-menuMedia CDB-Dashboard-menuAvatar\"> <img src=\"'+\n((__t=( userAvatarURL ))==null?'':_.escape(__t))+\n'\" alt=\"avatar\" class=\"inline-block\"> </div> <p class=\"CDB-Text CDB-Size-medium CDB-Dashboard-menuFooterTxt\">'+\n((__t=( userName ))==null?'':_.escape(__t))+\n'</p> </li> </ul> </div> </div> <div class=\"CDB-Dashboard-bg js-toggle-view\"></div> <div class=\"CDB-Dashboard-menuHeaderMobile u-showMobile\"> <div class=\"CDB-Dashboard-menuLogo\"> <i class=\"CDB-IconFont CDB-IconFont-cartoFante\"></i> </div> <button class=\"js-toggle-view\"> <span class=\"CDB-Shape CDB-Shape--hamburguer\"></span> </button> <div class=\"CDB-Dashboard-menuMedia CDB-Dashboard-menuAvatar\"> <img src=\"'+\n((__t=( userAvatarURL ))==null?'':_.escape(__t))+\n'\" alt=\"avatar\" class=\"inline-block\"> </div> </div> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar Ps = require('perfect-scrollbar');\nvar cdb = require('cartodb.js');\nvar CategoryContentView = require('./widgets/category/content-view');\nvar FormulaContentView = require('./widgets/formula/content-view');\nvar HistogramContentView = require('./widgets/histogram/content-view');\nvar ListContentView = require('./widgets/list/content-view');\nvar WidgetViewFactory = require('./widgets/widget-view-factory');\nvar template = require('./dashboard-sidebar.tpl');\n\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-canvas',\n\n  initialize: function (options) {\n    this._widgetViewFactory = new WidgetViewFactory([\n      {\n        type: 'formula',\n        createContentView: function (widgetModel) {\n          return new FormulaContentView({\n            model: widgetModel\n          });\n        }\n      }, {\n        type: 'list',\n        createContentView: function (widgetModel) {\n          return new ListContentView({\n            model: widgetModel\n          });\n        }\n      }, {\n        type: 'histogram',\n        createContentView: function (widgetModel) {\n          return new HistogramContentView({\n            model: widgetModel\n          });\n        }\n      }, {\n        type: 'category',\n        createContentView: function (widgetModel) {\n          return new CategoryContentView({\n            model: widgetModel\n          });\n        }\n      }\n    ]);\n\n    this._widgets = options.widgets;\n\n    this._widgets.bind('add', this._maybeRenderWidgetView, this);\n    this._widgets.bind('reset', this.render, this);\n    this._widgets.bind('orderChanged', this.render, this);\n    this._widgets.bind('change:collapsed', this._onWidgetCollapsed, this);\n    this._widgets.bind('add remove reset', this._onUpdate, this); // have to be called _after_ any other add/remove/reset\n    this.add_related_model(this._widgets);\n  },\n\n  render: function () {\n    this._cleanScroll();\n    this.clearSubViews();\n\n    this.$el.html(template());\n    this.$el.toggleClass('CDB-Widget-canvas--withMenu', this.model.get('renderMenu'));\n    this._widgets.each(this._maybeRenderWidgetView, this);\n    this.$el.toggle(!_.isEmpty(this._subviews));\n\n    this._renderScroll();\n    this._renderShadows();\n    this._bindScroll();\n\n    return this;\n  },\n\n  _$container: function () {\n    return $(this._container());\n  },\n\n  _container: function () {\n    return this.el.querySelector('.js-container');\n  },\n\n  _maybeRenderWidgetView: function (widgetModel) {\n    var view = this._widgetViewFactory.createWidgetView(widgetModel);\n    if (view) {\n      this.addView(view);\n      this._$container().append(view.render().el);\n    }\n  },\n\n  _bindScroll: function () {\n    this._$container()\n      .on('ps-y-reach-start', _.bind(this._onScrollTop, this))\n      .on('ps-y-reach-end', _.bind(this._onScrollBottom, this))\n      .on('ps-scroll-y', _.bind(this._onScroll, this));\n  },\n\n  _renderScroll: function () {\n    Ps.initialize(this._container(), {\n      wheelSpeed: 2,\n      wheelPropagation: true,\n      minScrollbarLength: 20\n    });\n  },\n\n  _onWidgetCollapsed: function () {\n    Ps.update(this._container());\n  },\n\n  _renderShadows: function () {\n    this.$shadowTop = $('<div>').addClass('CDB-Widget-canvasShadow CDB-Widget-canvasShadow--top');\n    this.$shadowBottom = $('<div>').addClass('CDB-Widget-canvasShadow CDB-Widget-canvasShadow--bottom is-visible');\n    this.$el.append(this.$shadowTop);\n    this.$el.append(this.$shadowBottom);\n  },\n\n  _onScrollTop: function () {\n    this.$shadowTop.removeClass('is-visible');\n  },\n\n  _onScroll: function () {\n    var $el = this._$container();\n    var currentPos = $el.scrollTop();\n    var max = $el.get(0).scrollHeight;\n    var height = $el.outerHeight();\n    var maxPos = max - height;\n    this.$shadowTop.toggleClass('is-visible', currentPos > 0);\n    this.$shadowBottom.toggleClass('is-visible', currentPos < maxPos);\n  },\n\n  _onScrollBottom: function () {\n    this.$shadowBottom.removeClass('is-visible');\n  },\n\n  _cleanScroll: function () {\n    if (this._container()) {\n      this._$container().off('ps-scroll-y');\n      Ps.destroy(this._container());\n    }\n  },\n\n  _onUpdate: function () {\n    this.$el.toggle(_.size(this._subviews) > 0);\n  },\n\n  clean: function () {\n    this._cleanScroll();\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-canvasInner js-container\"></div>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./dashboard.tpl');\nvar DashboardBelowMapView = require('./dashboard-below-map-view');\nvar DashboardMenuView = require('./dashboard-menu-view');\nvar DashboardSidebarView = require('./dashboard-sidebar-view');\n\n/**\n * Dashboard is a wrapper around the map canvas, which contains widget views for the map contdxt\n * Widgets may be rendered in two areas, in the \"sidebar\" or \"below-map\".\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Dashboard-canvas',\n\n  initialize: function (options) {\n    this._widgets = options.widgets;\n    this._infoView = options.infoView;\n\n    // TODO parent context requires some markup to be present already, but NOT the other views\n    this.el.classList.add(this.className);\n    this.$el.html(template());\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    var view;\n    var doRenderMenu = this.model.get('renderMenu');\n\n    if (doRenderMenu) {\n      view = new DashboardMenuView({\n        model: this.model\n      });\n      this.addView(view);\n      this.$el.append(view.render().el);\n    }\n\n    view = new DashboardBelowMapView({\n      widgets: this._widgets\n    });\n    this.addView(view);\n    this.$('.js-map-wrapper')\n      .toggleClass('CDB-Dashboard-mapWrapper--withMenu', doRenderMenu)\n      .append(view.render().el);\n\n    view = new DashboardSidebarView({\n      widgets: this._widgets,\n      model: this.model\n    });\n    this.addView(view);\n    this.$el.append(view.render().el);\n\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Dashboard-mapWrapper js-map-wrapper\"> <div class=\"CDB-Map-canvas\"> <div class=\"CDB-Map\" id=\"map\"></div> </div> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar d3 = require('d3');\n\nvar format = {};\n\nformat.formatNumber = function (value, unit) {\n  if (!_.isNumber(value)) {\n    return value;\n  }\n\n  var format = d3.format('.2s');\n\n  if (value < 1000) {\n    var v = (value).toFixed(2);\n    // v ends with .00\n    if (v.match('.00' + '$')) {\n      v = v.replace('.00', '');\n    }\n    return v;\n  }\n\n  value = format(value) + (unit ? ' ' + unit : '');\n\n  // value ends with .0\n  if (value.match('.0' + '$')) {\n    value = value.replace('.0', '');\n  }\n\n  return value === '0.0' ? 0 : value;\n};\n\nformat.formatDate = function (value) {\n  return d3.time.format('%Y-%m-%d')(value);\n};\n\nformat.formatValue = function (value) {\n  if (_.isNumber(value)) {\n    return format.formatNumber(value);\n  }\n  if (_.isDate(value)) {\n    return format.formatDate(value);\n  }\n  return value;\n};\n\nmodule.exports = format;\n",
    "var cdb = require('cartodb.js');\n\ncdb.deepInsights = {\n  createDashboard: require('./create-dashboard')\n};\n\nmodule.exports = cdb;\n",
    "var _ = require('underscore');\nvar WidgetModel = require('./widgets/widget-model');\nvar CategoryWidgetModel = require('./widgets/category/category-widget-model');\nvar HistogramWidgetModel = require('./widgets/histogram/histogram-widget-model');\n\n/**\n * Public API to interact with dashboard widgets.\n */\nvar WidgetsService = function (widgetsCollection, dataviews) {\n  this._widgetsCollection = widgetsCollection;\n  this._dataviews = dataviews;\n};\n\nWidgetsService.prototype.get = function (id) {\n  return this._widgetsCollection.get(id);\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column to use to aggregate\n * @param {String} attrs.aggregation Name of aggregation operation to apply to get categories\n *   can be any of ['sum', 'count']. Default is 'count'\n * @param {String} attrs.aggregation_column column to be used for the aggregation operation\n *  it only applies for sum operations.\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {CategoryWidgetModel}\n */\nWidgetsService.prototype.createCategoryModel = function (attrs, layer) {\n  _checkProperties(attrs, ['title']);\n\n  var dataviewModel = this._dataviews.createCategoryModel(layer, attrs);\n\n  var attrsNames = ['id', 'title', 'order', 'collapsed', 'prefix', 'suffix', 'show_stats'];\n  var widgetAttrs = _.pick(attrs, attrsNames);\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new CategoryWidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel\n  });\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column\n * @param {Number} attrs.bins Count of bins\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {WidgetModel}\n */\nWidgetsService.prototype.createHistogramModel = function (attrs, layer) {\n  _checkProperties(attrs, ['title']);\n\n  var dataviewModel = this._dataviews.createHistogramModel(layer, attrs);\n\n  var attrsNames = ['id', 'title', 'order', 'collapsed', 'bins', 'show_stats', 'normalized'];\n  var widgetAttrs = _.pick(attrs, attrsNames);\n  widgetAttrs.type = 'histogram';\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new HistogramWidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel\n  });\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {String} attrs.column Name of column\n * @param {String} attrs.operation Name of operation to use, can be any of ['min', 'max', 'avg', 'sum']\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {CategoryWidgetModel}\n */\nWidgetsService.prototype.createFormulaModel = function (attrs, layer) {\n  _checkProperties(attrs, ['title']);\n\n  var dataviewModel = this._dataviews.createFormulaModel(layer, attrs);\n\n  var attrsNames = ['id', 'title', 'order', 'collapsed', 'prefix', 'suffix', 'show_stats', 'description'];\n  var widgetAttrs = _.pick(attrs, attrsNames);\n  widgetAttrs.type = 'formula';\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new WidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel\n  });\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.title Title rendered on the widget view\n * @param {Array} attrs.columns Names of columns\n * @param {Number} attrs.bins Count of bins\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @return {WidgetModel}\n */\nWidgetsService.prototype.createListModel = function (attrs, layer) {\n  _checkProperties(attrs, ['title', 'columns_title']);\n\n  var dataviewModel = this._dataviews.createListModel(layer, attrs);\n\n  var attrsNames = ['id', 'title', 'order', 'columns_title', 'show_stats'];\n  var widgetAttrs = _.pick(attrs, attrsNames);\n  widgetAttrs.type = 'list';\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new WidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel\n  });\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\n/**\n * @param {Object} attrs\n * @param {String} attrs.column Name of column that contains\n * @param {Object} layer Instance of a layer model (cartodb.js)\n * @param {Number} bins\n * @return {WidgetModel}\n */\nWidgetsService.prototype.createTimeSeriesModel = function (attrs, layer) {\n  // TODO will other kind really work for a time-series?\n  attrs.column_type = attrs.column_type || 'date';\n  var dataviewModel = this._dataviews.createHistogramModel(layer, attrs);\n\n  var attrsNames = ['id'];\n  var widgetAttrs = _.pick(attrs, attrsNames);\n  widgetAttrs.type = 'time-series';\n  widgetAttrs.attrsNames = attrsNames;\n\n  var widgetModel = new WidgetModel(widgetAttrs, {\n    dataviewModel: dataviewModel\n  });\n  this._widgetsCollection.add(widgetModel);\n\n  return widgetModel;\n};\n\nfunction _checkProperties (obj, propertiesArray) {\n  _.each(propertiesArray, function (prop) {\n    if (obj[prop] === undefined) {\n      throw new Error(prop + ' is required');\n    }\n  });\n}\n\nmodule.exports = WidgetsService;\n",
    "var _ = require('underscore');\nvar d3 = require('d3');\nvar cdb = require('cartodb.js');\n\n/**\n * Animate between two values\n */\nmodule.exports = cdb.core.View.extend({\n  animateFromValues: function (from, to, className, template, opts) {\n    var $el = this.$(className);\n    var options = opts || {};\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      var value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  },\n\n  animateFromCurrentValue: function (value, className, template, opts) {\n    var $el = this.$(className);\n\n    var options = opts || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var to = value;\n    var from = +this.$(className).text();\n\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  },\n\n  animateValue: function (model, what, className, template, opts) {\n    var $el = this.$(className);\n\n    var options = opts || {};\n    var debounceWait = options.debounceWait || 500;\n\n    var to = model.get(what);\n    var from = model.previous(what) || 0;\n\n    var formatter = options.formatter || d3.format('0,000');\n    var templateData = options.templateData || {};\n\n    var hasDecimals = (to % 1 === 0);\n\n    var stepValue = function (i) {\n      i = hasDecimals ? Math.round(i) : i;\n      var value = (_.isNaN(i) || i === undefined) ? (options.defaultValue || 0) : formatter(i);\n      var data = _.extend({ value: value }, templateData);\n      $el.text(template(data));\n    };\n\n    if (options.animationSpeed === 0) {\n      stepValue(to);\n      return;\n    }\n\n    stepValue(from);\n\n    var animate = _.debounce(function () {\n      $el.prop('counter', from).stop().animate({ counter: to }, {\n        duration: options.animationSpeed || 500,\n        easing: options.easingMethod || 'swing',\n        step: stepValue\n      });\n    }, debounceWait);\n\n    animate();\n  }\n});\n",
    "var _ = require('underscore');\nvar colors = ['#2CA095', '#E5811B', '#4A4DBA', '#AD2BAD', '#559030', '#E1C221']; // Demo colors\nvar defaultColor = '#CCC';\n\n/**\n *  Class to set categories to each color\n *  - Right now, there is a relation 1 color to 1 category.\n *  - If that category is not available in the new data, that\n *    color will be freed.\n *\n */\n\nfunction CategoryColors () {\n  this.colors = {};\n  _.each(colors, function (c) {\n    this.colors[c] = null;\n  }, this);\n}\n\nCategoryColors.prototype.updateData = function (d) {\n  // Remove categories from colors where they are not present anymore\n  _.each(this.colors, function (value, key) {\n    if (!_.contains(d, value)) {\n      this.colors[key] = null;\n    } else {\n      d = _.without(d, value);\n    }\n  }, this);\n\n  // Set colors by new categories\n  _.each(d, function (category) {\n    var nextFreeColor = this.getNextAvailableColor();\n    if (nextFreeColor) {\n      this.colors[nextFreeColor] = category;\n    }\n  }, this);\n};\n\nCategoryColors.prototype.getNextAvailableColor = function () {\n  for (var i in this.colors) {\n    if (this.colors[i] === null) {\n      return i;\n    }\n  }\n  return null;\n};\n\nCategoryColors.prototype.getColorByCategory = function (category) {\n  for (var i in this.colors) {\n    if (this.colors[i] === category) {\n      return i;\n    }\n  }\n  return defaultColor;\n};\n\nCategoryColors.prototype.getCategoryByColor = function (color) {\n  return this.colors[color];\n};\n\nmodule.exports = CategoryColors;\n",
    "var _ = require('underscore');\nvar WidgetModel = require('../widget-model');\nvar CategoryColors = require('./category-colors');\nvar LockedCategoriesCollection = require('./locked-categories-collection');\n\n/**\n * Model for a category widget\n */\nmodule.exports = WidgetModel.extend({\n\n  defaults: _.extend(\n    {\n      type: 'category',\n      search: false,\n      locked: false,\n      isColorsApplied: false\n    },\n    WidgetModel.prototype.defaults\n  ),\n\n  initialize: function () {\n    WidgetModel.prototype.initialize.apply(this, arguments);\n    this.colors = new CategoryColors();\n    this.lockedCategories = new LockedCategoriesCollection();\n\n    this.listenTo(this.dataviewModel, 'change:allCategoryNames', this._onDataviewAllCategoryNamesChange);\n    this.on('change:locked', this._onLockedChange, this);\n    this.on('change:collapsed', this._onCollapsedChange, this);\n  },\n\n  setupSearch: function () {\n    this.dataviewModel.setupSearch();\n    this.lockedCategories.addItems(this._acceptedCategories().toJSON());\n    this.toggleSearch();\n  },\n\n  toggleSearch: function () {\n    this.set('search', !this.get('search'));\n  },\n\n  enableSearch: function () {\n    this.set('search', true);\n  },\n\n  disableSearch: function () {\n    this.set('search', false);\n  },\n\n  isSearchEnabled: function () {\n    return this.get('search');\n  },\n\n  cleanSearch: function () {\n    this.dataviewModel.cleanSearch();\n    this.lockedCategories.reset([]);\n  },\n\n  applyColors: function () {\n    this.set('isColorsApplied', true);\n  },\n\n  cancelColors: function () {\n    this.set('isColorsApplied', false);\n  },\n\n  isColorApplied: function () {\n    return this.get('isColorsApplied');\n  },\n\n  isLocked: function () {\n    return this.get('locked');\n  },\n\n  canBeLocked: function () {\n    return this.isLocked() || this._acceptedCategories().size() > 0;\n  },\n\n  canApplyLocked: function () {\n    if (this._acceptedCategories().size() !== this.lockedCategories.size()) {\n      return true;\n    }\n\n    return this._acceptedCategories().any(function (m) {\n      return !this.lockedCategories.isItemLocked(m.get('name'));\n    }, this);\n  },\n\n  applyLocked: function () {\n    var currentLocked = this.lockedCategories.getItemsName();\n    if (!currentLocked.length) {\n      this.unlockCategories();\n      return false;\n    }\n\n    this.set('locked', true);\n\n    var f = this.dataviewModel.filter;\n    f.cleanFilter(false);\n    f.accept(currentLocked);\n    f.applyFilter();\n\n    this.cleanSearch();\n  },\n\n  lockCategories: function () {\n    this.set('locked', true);\n    this.dataviewModel.fetch();\n  },\n\n  unlockCategories: function () {\n    this.set('locked', false);\n    this.dataviewModel.filter.acceptAll();\n  },\n\n  _onDataviewAllCategoryNamesChange: function (m, names) {\n    this.colors.updateData(names);\n    if (this.isColorApplied()) {\n      this.applyColors();\n    }\n  },\n\n  _onLockedChange: function (m, isLocked) {\n    if (isLocked) {\n      this.dataviewModel.enableFilter();\n    } else {\n      this.dataviewModel.disableFilter();\n    }\n  },\n\n  _acceptedCategories: function () {\n    return this.dataviewModel.filter.acceptedCategories;\n  },\n\n  _onCollapsedChange: function (m, isCollapsed) {\n    this.dataviewModel.set('enabled', !isCollapsed);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header js-header\"></div> <div class=\"CDB-Widget-content CDB-Widget-content--noSidesMargin\"> <div class=\"CDB-Widget-listWrapper js-content\"></div> </div> <div class=\"CDB-Widget-footer js-footer\"></div>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar SearchTitleView = require('./title/search-title-view');\nvar CategoryOptionsView = require('./options/options-view');\nvar CategoryItemsView = require('./list/items-view');\nvar CategoryStatsView = require('./stats/stats-view');\nvar CategoryPaginatorView = require('./paginator/paginator-view');\nvar SearchCategoryItemsView = require('./list/search-items-view');\nvar SearchCategoryPaginatorView = require('./paginator/search-paginator-view');\nvar template = require('./content-template.tpl');\n\n/**\n * Content view for category widget\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body',\n\n  _ITEMS_PER_PAGE: 6,\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(template());\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:collapsed', function (mdl, isCollapsed) {\n      this.$el.toggleClass('is-collapsed', !!isCollapsed);\n    }, this);\n  },\n\n  _initViews: function () {\n    var searchTitle = new SearchTitleView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-header').append(searchTitle.render().el);\n    this.addView(searchTitle);\n\n    var stats = new CategoryStatsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-header').append(stats.render().el);\n    this.addView(stats);\n\n    var options = new CategoryOptionsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-content').html(options.render().el);\n    this.addView(options);\n\n    var dataList = new CategoryItemsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE\n    });\n    this.$('.js-content').append(dataList.render().el);\n    this.addView(dataList);\n\n    var pagination = new CategoryPaginatorView({\n      $target: dataList.$el,\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE\n    });\n    this.$('.js-footer').append(pagination.render().el);\n    this.addView(pagination);\n\n    var searchList = new SearchCategoryItemsView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginator: true\n    });\n    this.$('.js-content').append(searchList.render().el);\n    this.addView(searchList);\n\n    var searchPagination = new SearchCategoryPaginatorView({\n      $target: searchList.$el,\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel,\n      itemsPerPage: this._ITEMS_PER_PAGE,\n      paginator: true\n    });\n    this.$('.js-footer').append(searchPagination.render().el);\n    this.addView(searchPagination);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-Widget-listItemInner CDB-Widget-listButton js-button '+\n((__t=( isDisabled ? 'is-disabled' : '' ))==null?'':_.escape(__t))+\n'\"> <div class=\"CDB-Widget-contentSpaced\"> <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</p> <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( prefix ))==null?'':_.escape(__t))+\n''+\n((__t=( formattedValue ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n'</p> </div> <div class=\"CDB-Widget-progressBar\"> <div class=\"CDB-Widget-progressState '+\n((__t=( isAggregated ? 'CDB-Widget-progressState--pattern' : '' ))==null?'':_.escape(__t))+\n'\" style=\"width: '+\n((__t=( percentage ))==null?'':_.escape(__t))+\n'%; background-color: '+\n((__t=( customColor ? color : '' ))==null?'':_.escape(__t))+\n'\"></div> </div> </button>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-listItemInner '+\n((__t=( isDisabled ? 'is-disabled' : '' ))==null?'':_.escape(__t))+\n'\"> <div class=\"CDB-Widget-contentSpaced\"> <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</p> <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( prefix ))==null?'':_.escape(__t))+\n''+\n((__t=( formattedValue ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n'</p> </div> <div class=\"CDB-Widget-progressBar\"> <div class=\"CDB-Widget-progressState CDB-Widget-progressState--pattern '+\n((__t=( isAggregated ? 'CDB-Widget-progressState--inactive' : '' ))==null?'':_.escape(__t))+\n'\" style=\"width: '+\n((__t=( percentage ))==null?'':_.escape(__t))+\n'%; background-color: '+\n((__t=( customColor ? color : '' ))==null?'':_.escape(__t))+\n'\"></div> </div> </div>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar formatter = require('../../../../formatter');\nvar clickableTemplate = require('./item-clickable-template.tpl');\nvar unclickableTemplate = require('./item-unclickable-template.tpl');\n\n/**\n * Category list item view\n */\nmodule.exports = cdb.core.View.extend({\n  tagName: 'li',\n  className: 'CDB-Widget-listItem',\n\n  events: {\n    'click .js-button': '_onItemClick'\n  },\n\n  initialize: function (options) {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var name = this.model.get('name');\n    var value = this.model.get('value');\n    var template = this.model.get('agg') || this.widgetModel.isLocked()\n      ? unclickableTemplate\n      : clickableTemplate;\n\n    this.$el.html(\n      template({\n        customColor: this.widgetModel.isColorApplied(),\n        isAggregated: this.model.get('agg'),\n        name: name,\n        value: value,\n        formattedValue: formatter.formatNumber(value),\n        percentage: ((value / this.dataviewModel.get('max')) * 100),\n        color: this.widgetModel.colors.getColorByCategory(name),\n        isDisabled: !this.model.get('selected') ? 'is-disabled' : '',\n        prefix: this.widgetModel.get('prefix'),\n        suffix: this.widgetModel.get('suffix')\n      })\n    );\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change', this.render, this);\n    this.widgetModel.bind('change:search change:isColorsApplied change:prefix change:suffix', this.render, this);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _onItemClick: function () {\n    this.trigger('itemClicked', this.model, this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button type=\"button\" class=\"CDB-Widget-listItemInner CDB-Widget-listItemInner--fullSpace CDB-Widget-listButton js-button '+\n((__t=( isDisabled ? 'is-disabled' : '' ))==null?'':_.escape(__t))+\n'\"> <span class=\"CDB-Widget-checkbox '+\n((__t=( isDisabled ? '' : 'is-checked' ))==null?'':_.escape(__t))+\n'\"></span> <div class=\"u-lSpace--xl\"> <div class=\"CDB-Widget-contentSpaced\"> <p class=\"CDB-Text is-semibold u-upperCase CDB-Size-medium u-ellipsis u-rSpace--xl\" title=\"'+\n((__t=( name ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( name ))==null?'':_.escape(__t))+\n'</p> <p class=\"CDB-Text CDB-Size-small u-secondaryTextColor\" title=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( prefix ))==null?'':_.escape(__t))+\n''+\n((__t=( formattedValue ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n'</p> </div> <div class=\"CDB-Widget-progressBar\"> <div class=\"CDB-Widget-progressState\" style=\"width: '+\n((__t=( percentage ))==null?'':_.escape(__t))+\n'%\"></div> </div> </div> </button>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar formatter = require('../../../../formatter');\nvar template = require('./search-item-clickable-template.tpl');\n\n/**\n * Category search list view\n */\nmodule.exports = cdb.core.View.extend({\n  tagName: 'li',\n  className: 'CDB-Widget-listItem',\n\n  events: {\n    'click .js-button': '_onItemClick'\n  },\n\n  initialize: function (options) {\n    // This data model comes from the original data in order to get\n    // the max value and set properly the progress bar and add the\n    // necessary suffix and prefix for the item.\n    this.dataviewModel = this.options.dataviewModel;\n    this.widgetModel = this.options.widgetModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var value = this.model.get('value');\n\n    this.$el.html(\n      template({\n        name: this.model.get('name'),\n        value: value,\n        formattedValue: formatter.formatNumber(value),\n        percentage: ((value / this.dataviewModel.get('max')) * 100),\n        isDisabled: !this.model.get('selected'),\n        prefix: this.widgetModel.get('prefix'),\n        suffix: this.widgetModel.get('suffix')\n      })\n    );\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:selected', this.render, this);\n\n    this.widgetModel.bind('change:prefix change:suffix', this.render, this);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _onItemClick: function () {\n    this.model.set('selected', !this.model.get('selected'));\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar CategoryItemView = require('./item/item-view');\nvar placeholder = require('./items-placeholder-template.tpl');\n\n/**\n * Category list view\n */\nmodule.exports = cdb.core.View.extend({\n  options: {\n    paginator: false,\n    itemsPerPage: 6\n  },\n\n  className: 'CDB-Widget-list CDB-Widget-list--wrapped js-list',\n  tagName: 'ul',\n\n  initialize: function () {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var data = this.dataviewModel.getData();\n    var isDataEmpty = _.isEmpty(data) || _.size(data) === 0;\n\n    if (isDataEmpty) {\n      this._renderPlaceholder();\n    } else {\n      this._renderList();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:search', this.toggle, this);\n    this.widgetModel.bind('change:isColorsApplied', this.render, this);\n    this.add_related_model(this.widgetModel);\n\n    this.dataviewModel.bind('change:data', this.render, this);\n    this.add_related_model(this.dataviewModel);\n  },\n\n  _renderPlaceholder: function () {\n    // Change view classes\n    this.$el\n      .addClass('CDB-Widget-list--withBorders')\n      .removeClass('CDB-Widget-list--wrapped');\n    this.$el.append(placeholder());\n  },\n\n  _renderList: function () {\n    // Change view classes\n    this.$el.removeClass('CDB-Widget-list--withBorders');\n    this.$el[this.options.paginator ? 'addClass' : 'removeClass']('CDB-Widget-list--wrapped');\n\n    var groupItem;\n    var data = this.dataviewModel.getData();\n\n    data.each(function (mdl, i) {\n      if (i % this.options.itemsPerPage === 0) {\n        groupItem = $('<div>').addClass('CDB-Widget-listGroup');\n        this.$el.append(groupItem);\n      }\n      this._addItem(mdl, groupItem);\n    }, this);\n  },\n\n  _addItem: function (mdl, $parent) {\n    var v = new CategoryItemView({\n      model: mdl,\n      widgetModel: this.widgetModel,\n      dataviewModel: this.dataviewModel\n    });\n    v.bind('itemClicked', this._setFilters, this);\n    this.addView(v);\n    $parent.append(v.render().el);\n  },\n\n  _setFilters: function (mdl) {\n    var isSelected = mdl.get('selected');\n    var filter = this.dataviewModel.filter;\n    var clickedName = mdl.get('name');\n\n    if (isSelected) {\n      // If there isn't any filter applied,\n      // clicking over one will turn rest into as \"unselected\"\n      if (filter.rejectedCategories.size() === 0 &&\n          filter.acceptedCategories.size() === 0\n      ) {\n        var data = this.dataviewModel.getData();\n        // Make elements \"unselected\"\n        data.each(function (m) {\n          var name = m.get('name');\n          if (name !== clickedName) {\n            m.set('selected', false);\n          }\n        });\n        filter.accept(mdl.get('name'));\n      } else {\n        mdl.set('selected', false);\n        filter.reject(clickedName);\n      }\n    } else {\n      mdl.set('selected', true);\n      filter.accept(clickedName);\n    }\n  },\n\n  toggle: function () {\n    this[!this.widgetModel.isSearchEnabled() ? 'show' : 'hide']();\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<li class=\"CDB-Widget-listItem\"> <h4 class=\"CDB-Text CDB-Size-large\">No results</h4> <p class=\"CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor\">Your search \"'+\n((__t=( q ))==null?'':_.escape(__t))+\n'\" didn\\'t match<br>with any value.</p> <p class=\"CDB-Text CDB-Size-medium u-tSpace-xl u-altTextColor\">Try searching again.</p> </li>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar CategoryItemsView = require('./items-view');\nvar WidgetSearchCategoryItemView = require('./item/search-item-view');\nvar placeholder = require('./search-items-no-results-template.tpl');\n\n/**\n * Category list view\n */\nmodule.exports = CategoryItemsView.extend({\n  className: 'CDB-Widget-list is-hidden CDB-Widget-list--wrapped js-list',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var data = this._searchResultsCollection;\n    var isDataEmpty = data.isEmpty() || data.size() === 0;\n\n    if (isDataEmpty) {\n      this._renderPlaceholder();\n    } else {\n      this._renderList();\n    }\n    return this;\n  },\n\n  _initBinds: function () {\n    CategoryItemsView.prototype._initBinds.apply(this, arguments);\n    this._searchResultsCollection = this.dataviewModel.getSearchResult();\n    this._searchResultsCollection.on('change:selected', this._onSelectedItemChange, this);\n    this._searchResultsCollection.on('reset', this.render, this);\n    this.add_related_model(this._searchResultsCollection);\n  },\n\n  _renderList: function () {\n    this.$el.removeClass('CDB-Widget-list--withBorders CDB-Widget-list--noresults');\n    this.$el.addClass('CDB-Widget-list--wrapped');\n\n    var groupItem;\n    var data = this._searchResultsCollection;\n\n    data.each(function (mdl, i) {\n      if (i % this.options.itemsPerPage === 0) {\n        groupItem = $('<div>').addClass('CDB-Widget-listGroup');\n        this.$el.append(groupItem);\n      }\n      this._addItem(mdl, groupItem);\n    }, this);\n  },\n\n  _renderPlaceholder: function () {\n    // Change view classes\n    this.$el\n      .addClass('CDB-Widget-list--noresults')\n      .removeClass('CDB-Widget-list--wrapped');\n\n    this.$el.html(\n      placeholder({\n        q: this.dataviewModel.getSearchQuery()\n      })\n    );\n  },\n\n  _addItem: function (mdl, $parent) {\n    var v = new WidgetSearchCategoryItemView({\n      model: mdl,\n      widgetModel: this.widgetModel,\n      dataviewModel: this.dataviewModel\n    });\n    this.addView(v);\n    $parent.append(v.render().el);\n  },\n\n  toggle: function () {\n    this[this.widgetModel.isSearchEnabled() ? 'show' : 'hide']();\n  },\n\n  _onSelectedItemChange: function (m, isSelected) {\n    this.widgetModel.lockedCategories[isSelected ? 'addItem' : 'removeItem'](m);\n  }\n\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n *  Locked categories collection\n *\n */\nmodule.exports = Backbone.Collection.extend({\n\n  addItem: function (mdl) {\n    if (!this.isItemLocked(mdl.get('name'))) {\n      this.add(mdl);\n    }\n  },\n\n  addItems: function (mdls) {\n    _.each(mdls, function (m) {\n      if (!this.isItemLocked(m.name)) {\n        this.add(m);\n      }\n    }, this);\n  },\n\n  resetItems: function (mdls) {\n    this.reset(mdls);\n  },\n\n  removeItem: function (mdl) {\n    var lockedItem = this.isItemLocked(mdl.get('name'));\n    if (lockedItem) {\n      this.remove(lockedItem);\n    }\n  },\n\n  removeItems: function () {\n    this.reset([]);\n  },\n\n  isItemLocked: function (name) {\n    return this.find(function (d) {\n      return d.get('name') === name;\n    });\n  },\n\n  getItemsName: function () {\n    return this.pluck('name');\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (isSearchEnabled) { \n__p+=' <p class=\"CDB-Text is-semibold CDB-Size-small u-upperCase js-lockCategories\">'+\n((__t=( totalLocked ))==null?'':_.escape(__t))+\n' selected</p> ';\n } else { \n__p+=' <p class=\"CDB-Text is-semibold CDB-Size-small u-upperCase js-textInfo\"> ';\n if (isLocked) { \n__p+=' '+\n((__t=( totalCats ))==null?'':_.escape(__t))+\n' blocked <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-unlock\">unlock</button> ';\n } else { \n__p+=' ';\n if (noneSelected) { \n__p+=' None selected ';\n } else { \n__p+=' '+\n((__t=( allSelected ? \"All selected\" : acceptedCats + \" selected\" ))==null?'':_.escape(__t))+\n' ';\n if (canBeLocked) { \n__p+=' <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link u-lSpace js-lock\">lock</button> ';\n }\n__p+=' ';\n }\n__p+=' ';\n } \n__p+=' </p> ';\n if (canSelectAll) { \n__p+=' <div class=\"CDB-Widget-filterButtons\"> <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-link CDB-Widget-filterButton js-all\">all</button> </div> ';\n } \n__p+=' ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./options-template.tpl');\n\n/**\n * Category filter view\n *\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-filter CDB-Widget-contentSpaced CDB-Widget-contentSpaced--sideMargins',\n\n  events: {\n    'click .js-all': '_onSelectAll',\n    'click .js-lock': '_lockCategories',\n    'click .js-unlock': '_unlockCategories'\n  },\n\n  initialize: function () {\n    this.dataviewModel = this.options.dataviewModel;\n    this.widgetModel = this.options.widgetModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    var acceptedCats = this.dataviewModel.filter.acceptedCategories.size();\n    var rejectedCats = this.dataviewModel.filter.rejectedCategories.size();\n    var areAllRejected = this.dataviewModel.filter.areAllRejected();\n    var totalCats = this.dataviewModel.getData().size();\n    var isLocked = this.widgetModel.isLocked();\n\n    this.$el.html(\n      template({\n        isSearchEnabled: this.widgetModel.isSearchEnabled(),\n        isSearchApplied: this.dataviewModel.isSearchApplied(),\n        isLocked: isLocked,\n        canBeLocked: this.widgetModel.canBeLocked(),\n        allSelected: (rejectedCats === 0 && acceptedCats === 0 && !areAllRejected),\n        canSelectAll: !isLocked && (rejectedCats > 0 || acceptedCats > 0 || areAllRejected),\n        noneSelected: areAllRejected || (!totalCats && !acceptedCats),\n        acceptedCats: acceptedCats,\n        totalLocked: this.widgetModel.lockedCategories.size(),\n        totalCats: totalCats\n      })\n    );\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:search change:locked', this.render, this);\n    this.widgetModel.lockedCategories.bind('change add remove', this.render, this);\n    this.add_related_model(this.widgetModel);\n    this.add_related_model(this.widgetModel.lockedCategories);\n\n    this.dataviewModel.bind('change:data', this.render, this);\n    this.add_related_model(this.dataviewModel);\n\n    var f = this.dataviewModel.filter;\n    f.acceptedCategories.bind('add remove reset', this.render, this);\n    f.rejectedCategories.bind('add remove reset', this.render, this);\n    this.add_related_model(f.rejectedCategories);\n    this.add_related_model(f.acceptedCategories);\n  },\n\n  _lockCategories: function () {\n    this.widgetModel.lockCategories();\n  },\n\n  _unlockCategories: function () {\n    this.widgetModel.unlockCategories();\n  },\n\n  _onSelectAll: function () {\n    this.dataviewModel.filter.acceptAll();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-contentFlex\"> <button class=\"u-rSpace--m CDB-Text is-semibold u-upperCase CDB-Size-small js-searchToggle\"> <div class=\"CDB-Shape u-iBlock\"> <span class=\"CDB-Shape-magnify is-small is-blue\"></span> </div> <span class=\"u-iBlock u-actionTextColor\"> search in '+\n((__t=( categoriesCount ))==null?'':_.escape(__t))+\n' categor'+\n((__t=( categoriesCount === 1 ? 'y' : 'ies' ))==null?'':_.escape(__t))+\n' </span> </button> </div> ';\n if (showPaginator) { \n__p+=' <div class=\"CDB-Widget-navDots js-dots\"> ';\n for (var i = 0, l = pages; i < l; i++) { \n__p+='<button class=\"CDB-Shape-dot CDB-Widget-dot--navigation js-page ';\n if (currentPage === i) { \n__p+='is-selected';\n } \n__p+='\" data-page=\"'+\n((__t=( i ))==null?'':_.escape(__t))+\n'\"></button>';\n } \n__p+=' </div> ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar defaultTemplate = require('./paginator-template.tpl');\nvar MINCATEGORIES = 5;\n\n/**\n *  Display paginator for category widget\n *\n */\n\nmodule.exports = cdb.core.View.extend({\n  options: {\n    itemsPerPage: 6,\n    template: defaultTemplate,\n    paginator: false\n  },\n\n  className: 'CDB-Widget-nav CDB-Widget-contentSpaced',\n\n  events: {\n    'click .js-searchToggle': '_onSearchClicked',\n    'click .js-page': '_onDotClick'\n  },\n\n  initialize: function () {\n    this.dataviewModel = this.options.dataviewModel;\n    this.widgetModel = this.options.widgetModel;\n    this._$target = this.options.$target;\n    this.model = new cdb.core.Model({\n      page: 0\n    });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var categoriesCount = this.dataviewModel.getCount();\n\n    if (categoriesCount > MINCATEGORIES) {\n      var pages = Math.ceil(this.dataviewModel.getSize() / this.options.itemsPerPage);\n      var template = this.options.template;\n      this.$el.html(\n        template({\n          showPaginator: this.options.paginator,\n          currentPage: this.model.get('page'),\n          categoriesCount: categoriesCount,\n          pages: pages\n        })\n      );\n    } else {\n      this.model.set('page', 0);\n    }\n    this._scrollToPage();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    $(window).bind('resize.' + this.cid, _.bind(this._scrollToPage, this));\n    this.model.bind('change:page', this.render, this);\n    this.dataviewModel.bind('change:categoriesCount', this.render, this);\n    this.dataviewModel.bind('change:data change:searchData', function () {\n      this._setPage();\n      this.render();\n    }, this);\n    this.widgetModel.bind('change:search', this.toggle, this);\n    this.add_related_model(this.dataviewModel);\n    this.add_related_model(this.widgetModel);\n  },\n\n  // If current page doesn't exist due to a data change, we should reset it\n  _setPage: function () {\n    var count = this.dataviewModel.getSize();\n    var pages = Math.ceil(count / this._ITEMS_PER_PAGE);\n    if (this.model.get('page') > (pages - 1)) {\n      this.model.set({ page: 0 }, { silent: true });\n    }\n  },\n\n  _onSearchClicked: function () {\n    this.widgetModel.setupSearch();\n  },\n\n  _scrollToPage: function () {\n    var page = this.model.get('page');\n    var pageWidth = this._$target.find('.CDB-Widget-listGroup:eq(0)').outerWidth();\n    this._$target.css('margin-left', -(page * pageWidth));\n  },\n\n  _onDotClick: function (ev) {\n    var page = $(ev.target).data('page');\n    this.model.set('page', page);\n  },\n\n  toggle: function () {\n    this[ this.widgetModel.isSearchEnabled() ? 'hide' : 'show' ]();\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  clean: function () {\n    $(window).unbind('resize.' + this.cid);\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-contentFlex u-tSpace--m\"> <button class=\"CDB-Text is-semibold u-upperCase CDB-Size-small u-rSpace--m js-searchToggle u-actionTextColor\">cancel</button> </div> ';\n if (showPaginator) { \n__p+=' <div class=\"CDB-Widget-navDots js-dots u-tSpace--m\"> ';\n for (var i = 0, l = pages; i < l; i++) { \n__p+='<button class=\"CDB-Shape-dot CDB-Widget-dot--navigation js-page ';\n if (currentPage === i) { \n__p+='is-selected';\n } \n__p+='\" data-page=\"'+\n((__t=( i ))==null?'':_.escape(__t))+\n'\"></button>';\n } \n__p+=' </div> ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var PaginatorView = require('./paginator-view');\nvar searchTemplate = require('./search-paginator-template.tpl');\n\nmodule.exports = PaginatorView.extend({\n  className: 'CDB-Widget-nav is-hidden CDB-Widget-contentSpaced',\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n    var pages = Math.ceil(this.dataviewModel.getSearchCount() / this.options.itemsPerPage);\n    this.$el.html(\n      searchTemplate({\n        showPaginator: true,\n        currentPage: this.model.get('page'),\n        pages: pages\n      })\n    );\n    this._scrollToPage();\n\n    return this;\n  },\n\n  _setPage: function () {\n    var count = this.dataviewModel.getSearchCount();\n    var pages = Math.ceil(count / this._ITEMS_PER_PAGE);\n    if (this.model.get('page') > (pages - 1)) {\n      this.model.set({ page: 0 }, { silent: true });\n    }\n  },\n\n  toggle: function () {\n    this[ !this.widgetModel.isSearchEnabled() ? 'hide' : 'show' ]();\n  },\n\n  _onSearchClicked: function () {\n    this.widgetModel.cleanSearch();\n    this.widgetModel.toggleSearch();\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+=''+\n((__t=( value ))==null?'':_.escape(__t))+\n'';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (isSearchEnabled) { \n__p+='';\n if (isSearchApplied) { \n__p+=' <dt class=\"CDB-Widget-infoCount\">'+\n((__t=( resultsCount ))==null?'':_.escape(__t))+\n'</dt><dd class=\"CDB-Widget-infoDescription\">found</dd> ';\n } else { \n__p+=' &nbsp; ';\n } \n__p+='  ';\n } else { \n__p+=' <dt class=\"CDB-Widget-infoCount\">'+\n((__t=( nullsPer ))==null?'':_.escape(__t))+\n'%</dt><dd class=\"CDB-Widget-infoDescription\"> null rows</dd> <dt class=\"CDB-Widget-infoCount\"><span class=\"js-cats\">'+\n((__t=( catsPer ))==null?'':_.escape(__t))+\n'</span>%</dt><dd class=\"CDB-Widget-infoDescription\">of total</dd> ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar formatter = require('../../../formatter');\nvar template = require('./stats-template.tpl');\nvar animationTemplate = require('./cats-template.tpl');\nvar AnimateValues = require('../../animate-values');\n\n/**\n * Category stats info view\n *\n */\n\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace',\n  tagName: 'dl',\n\n  initialize: function () {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        isSearchEnabled: this.widgetModel.isSearchEnabled(),\n        isSearchApplied: this.dataviewModel.isSearchApplied(),\n        isLocked: this.widgetModel.isLocked(),\n        isOtherAvailable: this.dataviewModel.isOtherAvailable(),\n        resultsCount: this.dataviewModel.getSearchCount(),\n        totalCats: this._getCategoriesSize(),\n        nullsPer: this._getNullPercentage(),\n        catsPer: this._getCurrentCategoriesPercentage()\n      })\n    );\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateFromValues(this._getPreviousCategoriesPercentage(), this._getCurrentCategoriesPercentage(), '.js-cats',\n      animationTemplate, { defaultValue: '-', animationSpeed: 700, formatter: formatter.formatValue }\n    );\n\n    this._checkVisibility();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.dataviewModel.bind('change:data change:totalCount', this.render, this);\n    this.widgetModel.bind('change:search change:locked', this.render, this);\n    this.widgetModel.bind('change:show_stats', this._checkVisibility, this);\n    this.add_related_model(this.dataviewModel);\n    this.add_related_model(this.widgetModel);\n  },\n\n  _getNullPercentage: function () {\n    var nulls = this.dataviewModel.get('nulls');\n    var total = this.dataviewModel.get('totalCount') || 0;\n    return !nulls ? 0 : ((nulls / total) * 100).toFixed(2);\n  },\n\n  _getPreviousCategoriesPercentage: function () {\n    var total = this.dataviewModel.previous('totalCount') || 0;\n    var data = this.dataviewModel.getPreviousData();\n    return this._getCategoriesPercentage(data, total);\n  },\n\n  _getCurrentCategoriesPercentage: function () {\n    var total = this.dataviewModel.get('totalCount') || 0;\n    var data = this.dataviewModel.getData().toJSON();\n    return this._getCategoriesPercentage(data, total);\n  },\n\n  _getCategoriesPercentage: function (data, total) {\n    if (!total) {\n      return 0;\n    }\n\n    var currentTotal = data.reduce(function (memo, mdl) {\n      return !mdl.agg ? (memo + parseFloat(mdl.value)) : memo;\n    }, 0);\n\n    if (!currentTotal) {\n      return 0;\n    }\n\n    return ((currentTotal / total) * 100).toFixed(2);\n  },\n\n  _getCategoriesSize: function () {\n    return _.pluck(\n      this.dataviewModel.getData().reject(function (mdl) {\n        return mdl.get('agg');\n      }), 'name').length;\n  },\n\n  _checkVisibility: function () {\n    this.$el.toggle(!!this.widgetModel.get('show_stats'));\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (isSearchEnabled) { \n__p+=' <form class=\"CDB-Widget-search js-form\"> <div class=\"CDB-Shape CDB-Widget-searchLens u-iBlock u-rSpace js-searchIcon\"> <span class=\"CDB-Shape-magnify is-small is-blue\"></span> </div> <input type=\"text\" class=\"CDB-Text CDB-Size-large CDB-Widget-textInput CDB-Widget-searchTextInput js-textInput\" value=\"'+\n((__t=( q ))==null?'':_.escape(__t))+\n'\" placeholder=\"Search by '+\n((__t=( columnName ))==null?'':_.escape(__t))+\n'\"> ';\n if (canShowApply) { \n__p+=' <button type=\"button\" class=\"CDB-Text is-semibold u-upperCase CDB-Size-small CDB-Widget-searchApply js-applyLocked u-actionTextColor\">apply</button> ';\n } \n__p+=' </form> ';\n } else { \n__p+=' <div class=\"CDB-Widget-title CDB-Widget-contentSpaced js-title\"> <h3 class=\"CDB-Text CDB-Size-large u-ellipsis js-titleText\" title=\"'+\n((__t=( title ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3> <div class=\"CDB-Widget-options CDB-Widget-contentSpaced\"> <button class=\"CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-colors '+\n((__t=( isColorApplied ? 'is-selected' : '' ))==null?'':_.escape(__t))+\n' '+\n((__t=( isColorApplied ? 'js-cancelColors' : 'js-applyColors' ))==null?'':_.escape(__t))+\n'\" data-tooltip=\"\\n          '+\n((__t=( isColorApplied ? 'Remove colors' : 'Apply colors' ))==null?'':_.escape(__t))+\n'\\n        \"> <i class=\"CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top\"></i> </button> <button class=\"CDB-Shape js-actions u-lSpace\"> <div class=\"CDB-Shape-threePoints is-blue is-small\"> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> </div> </button> </div> </div> ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar $ = require('jquery');\nvar cdb = require('cartodb.js');\nvar DropdownView = require('../../dropdown/widget-dropdown-view');\nvar TooltipView = require('../../widget-tooltip-view');\nvar template = require('./search-title-template.tpl');\n\n/**\n *  Show category title or search any category\n *  + another options for this widget, as in,\n *  colorize categories, lock defined categories...\n *\n */\n\nmodule.exports = cdb.core.View.extend({\n  events: {\n    'keyup .js-textInput': '_onKeyupInput',\n    'submit .js-form': '_onSubmitForm',\n    'click .js-applyLocked': '_applyLocked',\n    'click .js-applyColors': '_applyColors',\n    'click .js-cancelColors': '_cancelColors'\n  },\n\n  initialize: function () {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        isCollapsed: this.widgetModel.get('collapsed'),\n        isColorApplied: this.widgetModel.isColorApplied(),\n        title: this.widgetModel.get('title'),\n        columnName: this.dataviewModel.get('column'),\n        q: this.dataviewModel.getSearchQuery(),\n        isLocked: this.widgetModel.isLocked(),\n        canBeLocked: this.widgetModel.canBeLocked(),\n        isSearchEnabled: this.widgetModel.isSearchEnabled(),\n        canShowApply: this.widgetModel.canApplyLocked()\n      })\n    );\n    this._initViews();\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:search', this._onSearchToggled, this);\n    this.widgetModel.bind('change:title change:collapsed change:isColorsApplied', this.render, this);\n    this.widgetModel.lockedCategories.bind('change add remove', this.render, this);\n    this.add_related_model(this.widgetModel);\n    this.add_related_model(this.widgetModel.lockedCategories);\n\n    this.dataviewModel.filter.bind('change', this.render, this);\n    this.add_related_model(this.dataviewModel.filter);\n  },\n\n  _initViews: function () {\n    var dropdown = new DropdownView({\n      target: this.$('.js-actions'),\n      container: this.$el\n    });\n\n    dropdown.bind('click', function (action) {\n      if (action === 'toggle') {\n        this.widgetModel.set('collapsed', !this.widgetModel.get('collapsed'));\n      }\n    }, this);\n\n    this.addView(dropdown);\n\n    var colorsTooltip = new TooltipView({\n      target: this.$('.js-colors')\n    });\n    $('body').append(colorsTooltip.render().el);\n    this.addView(colorsTooltip);\n  },\n\n  _onSearchToggled: function () {\n    var isSearchEnabled = this.widgetModel.isSearchEnabled();\n    this[isSearchEnabled ? '_bindESC' : '_unbindESC']();\n    this.render();\n    if (isSearchEnabled) {\n      this._focusOnInput();\n    }\n  },\n\n  _onSubmitForm: function (ev) {\n    if (ev) {\n      ev.preventDefault();\n    }\n    var q = this.$('.js-textInput').val();\n    if (this.dataviewModel.getSearchQuery() !== q) {\n      this.dataviewModel.setSearchQuery(q);\n      if (this.dataviewModel.isSearchValid()) {\n        this.dataviewModel.applySearch();\n      }\n    }\n  },\n\n  _focusOnInput: function () {\n    var self = this;\n    setTimeout(function () {\n      self.$('.js-textInput').focus();\n    }, 0);\n  },\n\n  _onKeyupInput: _.debounce(\n    function (ev) {\n      var q = this.$('.js-textInput').val();\n      if (ev.keyCode !== 13 && ev.keyCode !== 27 && q !== '') {\n        this._onSubmitForm();\n      }\n    }, 250\n  ),\n\n  _bindESC: function () {\n    $(document).bind('keyup.' + this.cid, _.bind(this._onKeyUp, this));\n  },\n\n  _unbindESC: function () {\n    $(document).unbind('keyup.' + this.cid);\n  },\n\n  _onKeyUp: function (ev) {\n    if (ev.keyCode === 27) {\n      this._cancelSearch();\n      return false;\n    }\n  },\n\n  _applyLocked: function () {\n    this.widgetModel.toggleSearch();\n    this.widgetModel.applyLocked();\n  },\n\n  _applyColors: function () {\n    this.widgetModel.applyColors();\n  },\n\n  _cancelColors: function () {\n    this.widgetModel.cancelColors();\n  },\n\n  _cancelSearch: function () {\n    this.widgetModel.cleanSearch();\n    this.widgetModel.disableSearch();\n  },\n\n  clean: function () {\n    this._unbindESC();\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CDB-Text CDB-Size-medium\"> <li class=\"CDB-Dropdown-item\"> <button class=\"CDB-Dropdown-link js-toggle\">Toggle widget</button> </li> <li class=\"CDB-Dropdown-item\"> <button class=\"CDB-Dropdown-link js-pin\">Pin widget</button> </li> ';\n if (normalizeHistogram) { \n__p+=' <li class=\"CDB-Dropdown-item\"> <button class=\"CDB-Dropdown-link js-normalize\">Normalize</button> </li> ';\n } \n__p+=' </ul>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar template = require('./template.tpl');\n\n/**\n * Standard widget dropdown view\n *\n */\nmodule.exports = cdb.core.View.extend({\n\n  _WIDGET_BOTTOM_PADDING: 20,\n\n  className: 'CDB-Dropdown',\n\n  events: {\n    'click .js-pin': '_pin',\n    'click .js-toggle': '_toggle',\n    'click .js-normalize': '_normalize'\n  },\n\n  initialize: function (opts) {\n    if (!opts.target) {\n      throw new Error('target is not defined');\n    }\n\n    this.model = new cdb.core.Model({ open: false });\n\n    this._$target = this.options.target;\n    this._$container = this.options.container;\n    this.options.flags = this.options.flags || {};\n    _.defaults(this.options.flags, {\n      normalizeHistogram: false\n    });\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template(this.options.flags));\n    return this;\n  },\n\n  _initBinds: function () {\n    this.add_related_model(this.model);\n\n    this.model.bind('change:open', this._onChangeOpen, this);\n\n    this._$target.click(\n      _.bind(this._toggleClick, this)\n    );\n  },\n\n  _bindGlobalClick: function () {\n    $(document).bind('click.' + this.cid, _.bind(this._onGlobalClick, this));\n  },\n\n  _unbindGlobalClick: function () {\n    $(document).unbind('click.' + this.cid);\n  },\n\n  _bindESC: function () {\n    $(document).bind('keyup.' + this.cid, _.bind(this._onKeyUp, this));\n  },\n\n  _unbindESC: function () {\n    $(document).unbind('keyup.' + this.cid);\n  },\n\n  _onGlobalClick: function (ev) {\n    if (this._$target.get(0) !== $(ev.target).closest(this._$target).get(0)) {\n      this.model.set('open', false);\n    }\n  },\n\n  _onKeyUp: function (ev) {\n    if (ev.keyCode === 27) {\n      this.model.set('open', false);\n      return false;\n    }\n  },\n\n  _onChangeOpen: function () {\n    if (this.model.get('open')) {\n      this._open();\n    } else {\n      this._close();\n    }\n  },\n\n  _pin: function () {\n    this.model.set('open', false);\n    this.trigger('click', 'pin');\n  },\n\n  _toggle: function () {\n    this.model.set('open', false);\n    this.trigger('click', 'toggle');\n  },\n\n  _normalize: function () {\n    this.model.set('normalize', !this.model.get('normalize'));\n    this.trigger('click', 'normalize', this.model.get('normalize'));\n  },\n\n  _open: function () {\n    this._bindESC();\n    this._bindGlobalClick();\n\n    this.render();\n    this._$container.append(this.$el);\n    this.$el.show();\n\n    this._adjustVerticalPosition();\n  },\n\n  _adjustVerticalPosition: function () {\n    var bodyHeight = $('body').height();\n    var bottom = this.$el.offset().top + this.$el.height();\n\n    this.$el.toggleClass('has-top-position', bottom + this._WIDGET_BOTTOM_PADDING > bodyHeight);\n  },\n\n  _close: function () {\n    this._unbindESC();\n    this._unbindGlobalClick();\n    this.$el.hide();\n  },\n\n  _toggleClick: function () {\n    this.model.set('open', !this.model.get('open'));\n  },\n\n  clean: function () {\n    this._unbindESC();\n    this._unbindGlobalClick();\n    this._$target.off('click');\n    cdb.core.View.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+=''+\n((__t=( prefix ))==null?'':_.escape(__t))+\n''+\n((__t=( value ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n'';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar d3 = require('d3');\nvar cdb = require('cartodb.js');\nvar formatter = require('../../formatter');\nvar template = require('./template.tpl');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar animationTemplate = require('./animation-template.tpl');\nvar AnimateValues = require('../animate-values.js');\n\n/**\n * Default widget content view:\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body',\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var value = this._dataviewModel.get('data');\n\n    var format = function (value) {\n      var formatter = d3.format('0,000');\n\n      if (_.isNumber(value)) {\n        return formatter(value.toFixed(2));\n      }\n      return 0;\n    };\n\n    var nulls = !_.isUndefined(this._dataviewModel.get('nulls')) && formatter.formatNumber(this._dataviewModel.get('nulls')) || '-';\n    var isCollapsed = this.model.get('collapsed');\n\n    var prefix = this.model.get('prefix');\n    var suffix = this.model.get('suffix');\n\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        showStats: this.model.get('show_stats'),\n        operation: this._dataviewModel.get('operation'),\n        value: value,\n        formatedValue: format(value),\n        description: this.model.get('description'),\n        nulls: nulls,\n        prefix: prefix,\n        suffix: suffix,\n        isCollapsed: isCollapsed\n      })\n    );\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateValue(\n      this._dataviewModel,\n      'data',\n      '.js-value',\n      animationTemplate,\n      {\n        animationSpeed: 700,\n        formatter: format,\n        templateData: {\n          prefix: prefix,\n          suffix: suffix\n        }\n      }\n    );\n\n    this.$el.toggleClass('is-collapsed', !!isCollapsed);\n\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('change:title change:description change:collapsed change:prefix change:suffix', this.render, this);\n    this._dataviewModel.bind('change:data', this.render, this);\n    this.add_related_model(this._dataviewModel);\n  },\n\n  _initViews: function () {\n    var dropdown = new DropdownView({\n      target: this.$('.js-actions'),\n      container: this.$('.js-header')\n    });\n\n    dropdown.bind('click', function (action) {\n      if (action === 'toggle') {\n        this.model.set('collapsed', !this.model.get('collapsed'));\n      }\n    }, this);\n\n    this.addView(dropdown);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header js-header\"> <div class=\"CDB-Widget-title CDB-Widget-contentSpaced\"> <h3 class=\"CDB-Text CDB-Size-large u-ellipsis '+\n((__t=( isCollapsed ? 'js-value is-collapsed' : 'js-title' ))==null?'':_.escape(__t))+\n'\">';\n if (isCollapsed) { \n__p+=''+\n((__t=( formatedValue ))==null?'':_.escape(__t))+\n'';\n } else { \n__p+=' '+\n((__t=( title ))==null?'':_.escape(__t))+\n'';\n } \n__p+='</h3> <div class=\"CDB-Widget-options\"> <button class=\"CDB-Shape js-actions\"> <div class=\"CDB-Shape-threePoints is-blue is-small\"> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> </div> </button> </div> </div> ';\n if (showStats) { \n__p+=' <dl class=\"CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace\"> <dt class=\"CDB-Widget-infoCount\">'+\n((__t=( nulls ))==null?'':_.escape(__t))+\n'</dt><dd class=\"CDB-Widget-infoDescription\">null rows</dd> </dl> ';\n } \n__p+=' </div> <div class=\"CDB-Widget-content\"> ';\n if (_.isNumber(value)) { \n__p+=' <h4 class=\"CDB-Text CDB-Size-huge '+\n((__t=( !isCollapsed ? 'js-value' : '' ))==null?'':_.escape(__t))+\n'\" title=\"'+\n((__t=( value ))==null?'':_.escape(__t))+\n'\"> '+\n((__t=( prefix ))==null?'':_.escape(__t))+\n''+\n((__t=( value ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n' </h4> ';\n if (description) { \n__p+=' <p class=\"CDB-Text CDB-Size-small u-tSpace js-description\">'+\n((__t=( description ))==null?'':_.escape(__t))+\n'</p> ';\n } \n__p+=' ';\n } else { \n__p+=' <div class=\"CDB-Widget-listItem--fake\"></div> ';\n } \n__p+=' </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+=''+\n((__t=( value ))==null?'':_.escape(__t))+\n''+\n((__t=( suffix ))==null?'':_.escape(__t))+\n'';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar d3 = require('d3');\nvar cdb = require('cartodb.js');\nvar formatter = require('../../formatter');\n\nmodule.exports = cdb.core.View.extend({\n\n  options: {\n    // render the chart once the width is set as default, provide false value for this prop to disable this behavior\n    // e.g. for \"mini\" histogram behavior\n    showOnWidthChange: true,\n    chartBarColorClass: '',\n    labelsMargin: 16, // px\n    hasAxisTip: false,\n    minimumBarHeight: 2,\n    animationSpeed: 750,\n    handleWidth: 6,\n    handleHeight: 23,\n    handleRadius: 3,\n    divisionWidth: 80,\n    animationBarDelay: function (d, i) {\n      return Math.random() * (100 + (i * 10));\n    },\n    transitionType: 'elastic'\n  },\n\n  initialize: function () {\n    this._originalData = this.options.originalData;\n\n    if (!_.isNumber(this.options.height)) throw new Error('height is required');\n\n    _.bindAll(this, '_selectBars', '_adjustBrushHandles', '_onBrushMove', '_onBrushStart', '_onMouseMove', '_onMouseOut');\n\n    // Use this special setup for each view instance ot have its own debounced listener\n    // TODO in theory there's the possiblity that the callback is called before the view is rendered in the DOM,\n    //  which would lead to the view not being visible until an explicit window resize.\n    //  a wasAddedToDOM event would've been nice to have\n    this._onWindowResize = _.debounce(this._resizeToParentElement.bind(this), 50);\n    $(window).bind('resize', this._onWindowResize);\n\n    // using tagName: 'svg' doesn't work,\n    // and w/o class=\"\" d3 won't instantiate properly\n    this.setElement($('<svg class=\"\"></svg>')[0]);\n\n    this.canvas = d3.select(this.el)\n      .attr('width', 0)\n      .attr('height', this.options.height);\n\n    this.canvas\n      .append('g')\n      .attr('class', 'CDB-WidgetCanvas');\n\n    this._setupModel();\n    this._setupBindings();\n    this._setupDimensions();\n    this._setupD3Bindings();\n\n    this.hide(); // will be toggled on width change\n  },\n\n  render: function () {\n    this._generateChart();\n    this._generateChartContent();\n    return this;\n  },\n\n  replaceData: function (data) {\n    this.model.set({ data: data });\n  },\n\n  toggleLabels: function (show) {\n    this.model.set('showLabels', show);\n  },\n\n  chartWidth: function () {\n    var m = this.model.get('margin');\n\n    // Get max because width might be negative initially\n    return Math.max(0, this.model.get('width') - m.left - m.right);\n  },\n\n  chartHeight: function () {\n    var m = this.model.get('margin');\n    var labelsMargin = this.model.get('showLabels')\n      ? this.options.labelsMargin\n      : 0;\n\n    return this.model.get('height') - m.top - m.bottom - labelsMargin;\n  },\n\n  _resizeToParentElement: function () {\n    if (this.$el.parent()) {\n      // Hide this view temporarily to get actual size of the parent container\n      var wasHidden = this.isHidden();\n\n      this.hide();\n\n      var width = this.$el.parent().width() || 0;\n\n      if (wasHidden) {\n        this.hide();\n      } else {\n        this.show();\n      }\n\n      this.model.set('width', width);\n    }\n  },\n\n  _onChangeLeftAxisTip: function () {\n    this._updateAxisTip('left');\n  },\n\n  _onChangeRightAxisTip: function () {\n    this._updateAxisTip('right');\n  },\n\n  _updateAxisTip: function (className) {\n    var textLabel = this.chart.select('.CDB-Chart-axisTipText.CDB-Chart-axisTip-' + className);\n    var axisTip = this.chart.select('.CDB-Chart-axisTip.CDB-Chart-axisTip-' + className);\n    var rectLabel = this.chart.select('.CDB-Chart-axisTipRect.CDB-Chart-axisTip-' + className);\n    var handle = this.chart.select('.CDB-Chart-handle.CDB-Chart-handle-' + className);\n\n    textLabel.data([this.model.get(className + '_axis_tip')]).text(function (d) {\n      return formatter.formatNumber(d);\n    });\n\n    var width = textLabel.node().getBBox().width;\n    rectLabel.attr('width', width + 4);\n\n    var parts = /translate\\(\\s*([^\\s,)]+), ([^\\s,)]+)/.exec(handle.attr('transform'));\n    var xPos = +parts[1] + 3;\n\n    if ((xPos - width / 2) < 0) {\n      axisTip.attr('transform', 'translate(0, 52)');\n      textLabel.attr('dx', -xPos);\n      rectLabel.attr('x', -xPos);\n    } else if ((xPos + width / 2 + 2) >= this.chartWidth()) {\n      axisTip.attr('transform', 'translate(0, 52)');\n      textLabel.attr('dx', this.chartWidth() - (xPos + width - 2));\n      rectLabel.attr('x', this.chartWidth() - (xPos + width));\n    } else {\n      axisTip.attr('transform', 'translate(-' + (width / 2) + ', 52)');\n      rectLabel.attr('x', 0);\n      textLabel.attr('dx', +2);\n    }\n  },\n\n  _onChangeData: function () {\n    if (this.model.previous('data').length !== this.model.get('data').length) {\n      this.reset();\n    } else {\n      this.refresh();\n    }\n  },\n\n  _onChangeRange: function () {\n    if (this.model.get('lo_index') === 0 && this.model.get('hi_index') === 0) {\n      return;\n    }\n    this.trigger('range_updated', this.model.get('lo_index'), this.model.get('hi_index'));\n  },\n\n  _onChangeWidth: function () {\n    var width = this.model.get('width');\n    this.$el.width(width);\n    this.chart.attr('width', width);\n    if (this.options.showOnWidthChange && width > 0) {\n      this.show();\n    }\n    this.reset();\n\n    var loBarIndex = this.model.get('lo_index');\n    var hiBarIndex = this.model.get('hi_index');\n    this.selectRange(loBarIndex, hiBarIndex);\n  },\n\n  _onChangeNormalized: function () {\n    // do not show shadow bars if they are not enabled\n    this._generateShadowBars();\n    this.updateYScale();\n    this.refresh();\n  },\n\n  _onChangeHeight: function () {\n    var height = this.model.get('height');\n\n    this.$el.height(height);\n    this.chart.attr('height', height);\n    this.leftHandle.attr('height', height);\n    this.rightHandle.attr('height', height);\n\n    this.reset();\n  },\n\n  _onChangShowLabels: function () {\n    this._axis.style('opacity', this.model.get('showLabels') ? 1 : 0);\n  },\n\n  _onChangePos: function () {\n    var pos = this.model.get('pos');\n    var margin = this.model.get('margin');\n\n    var x = +pos.x;\n    var y = +pos.y;\n\n    this.chart\n      .transition()\n      .duration(150)\n      .attr('transform', 'translate(' + (margin.left + x) + ', ' + (margin.top + y) + ')');\n  },\n\n  _onBrushStart: function () {\n    this.chart.classed('is-selectable', true);\n    this._axis.classed('is-disabled', true);\n  },\n\n  _onChangeDragging: function () {\n    this.chart.classed('is-dragging', this.model.get('dragging'));\n    this._updateAxisTipOpacity('right');\n    this._updateAxisTipOpacity('left');\n  },\n\n  _showAxisTip: function (className) {\n    var textLabel = this.chart.select('.CDB-Chart-axisTipText.CDB-Chart-axisTip-' + className);\n    var rectLabel = this.chart.select('.CDB-Chart-axisTipRect.CDB-Chart-axisTip-' + className);\n\n    if (textLabel) {\n      textLabel.transition().duration(200).attr('opacity', 1);\n    }\n    if (rectLabel) {\n      rectLabel.transition().duration(200).attr('opacity', 1);\n    }\n  },\n\n  _hideAxisTip: function (className) {\n    var textLabel = this.chart.select('.CDB-Chart-axisTipText.CDB-Chart-axisTip-' + className);\n    var rectLabel = this.chart.select('.CDB-Chart-axisTipRect.CDB-Chart-axisTip-' + className);\n\n    if (textLabel) {\n      textLabel.transition().duration(200).attr('opacity', 0);\n    }\n    if (rectLabel) {\n      rectLabel.transition().duration(200).attr('opacity', 0);\n    }\n  },\n\n  _updateAxisTipOpacity: function (className) {\n    if (this.model.get('dragging')) {\n      this._showAxisTip(className);\n    }\n  },\n\n  _onBrushMove: function () {\n    this.model.set({ dragging: true });\n    this._selectBars();\n    this._adjustBrushHandles();\n  },\n\n  _onMouseOut: function () {\n    var bars = this.chart.selectAll('.CDB-Chart-bar');\n    bars.classed('is-highlighted', false);\n    this.trigger('hover', { value: null });\n  },\n\n  _onMouseMove: function () {\n    var x = d3.event.offsetX;\n\n    var barIndex = Math.floor(x / this.barWidth);\n    var data = this.model.get('data');\n\n    if (data[barIndex] === undefined || data[barIndex] === null) {\n      return;\n    }\n\n    var freq = data[barIndex].freq;\n    var hoverProperties = {};\n\n    var bar = this.chart.select('.CDB-Chart-bar:nth-child(' + (barIndex + 1) + ')');\n\n    if (bar && bar.node() && !bar.classed('is-selected')) {\n      var left = (barIndex * this.barWidth) + (this.barWidth / 2);\n\n      var top = this.yScale(freq);\n\n      var h = this.chartHeight() - this.yScale(freq);\n\n      if (h < this.options.minimumBarHeight && h > 0) {\n        top = this.chartHeight() - this.options.minimumBarHeight;\n      }\n\n      if (!this._isDragging() && freq > 0) {\n        var d = formatter.formatNumber(freq);\n        hoverProperties = { top: top, left: left, data: d };\n      } else {\n        hoverProperties = null;\n      }\n    } else {\n      hoverProperties = null;\n    }\n\n    this.trigger('hover', hoverProperties);\n\n    this.chart.selectAll('.CDB-Chart-bar')\n      .classed('is-highlighted', false);\n\n    if (bar && bar.node()) {\n      bar.classed('is-highlighted', true);\n    }\n  },\n\n  reset: function () {\n    this._removeChartContent();\n    this._setupDimensions();\n    this._calcBarWidth();\n    this._generateChartContent();\n    this._generateShadowBars();\n  },\n\n  refresh: function () {\n    this._setupDimensions();\n    this._removeAxis();\n    this._generateAxis();\n    this._updateChart();\n\n    this.chart.select('.CDB-Chart-handles').moveToFront();\n    this.chart.select('.Brush').moveToFront();\n  },\n\n  resetIndexes: function () {\n    this.model.set({ lo_index: null, hi_index: null });\n  },\n\n  removeShadowBars: function () {\n    this.model.set('show_shadow_bars', false);\n  },\n\n  _removeShadowBars: function () {\n    this.chart.selectAll('.CDB-Chart-shadowBars').remove();\n  },\n\n  _removeBars: function () {\n    this.chart.selectAll('.CDB-Chart-bars').remove();\n  },\n\n  _removeBrush: function () {\n    this.chart.selectAll('.Brush').remove();\n    this.chart.classed('is-selectable', false);\n    this._axis.classed('is-disabled', false);\n  },\n\n  _removeLines: function () {\n    this.chart.select('.CDB-Chart-lines').remove();\n    this.chart.select('.CDB-Chart-line--bottom').remove();\n  },\n\n  _removeChartContent: function () {\n    this._removeBrush();\n    this._removeHandles();\n    this._removeBars();\n    this._removeAxis();\n    this._removeLines();\n  },\n\n  _generateChartContent: function () {\n    this._generateAxis();\n    this._generateLines();\n\n    this._generateBars();\n    this._generateHandles();\n    this._setupBrush();\n    this._generateBottomLine();\n  },\n\n  _generateLines: function () {\n    this._generateHorizontalLines();\n\n    if (this.options.type !== 'time') {\n      this._generateVerticalLines();\n    }\n  },\n\n  _generateVerticalLines: function () {\n    var lines = this.chart.select('.CDB-Chart-lines');\n\n    lines.append('g')\n      .selectAll('.CDB-Chart-line')\n      .data(this.verticalRange.slice(1, this.verticalRange.length - 1))\n      .enter().append('svg:line')\n      .attr('class', 'CDB-Chart-line')\n      .attr('y1', 0)\n      .attr('x1', function (d) { return d; })\n      .attr('y2', this.chartHeight())\n      .attr('x2', function (d) { return d; });\n  },\n\n  _generateHorizontalLines: function () {\n    var lines = this.chart.append('g')\n      .attr('class', 'CDB-Chart-lines');\n\n    lines.append('g')\n      .attr('class', 'y')\n      .selectAll('.CDB-Chart-line')\n      .data(this.horizontalRange.slice(0, this.horizontalRange.length - 1))\n      .enter().append('svg:line')\n      .attr('class', 'CDB-Chart-line')\n      .attr('x1', 0)\n      .attr('y1', function (d) { return d; })\n      .attr('x2', this.chartWidth())\n      .attr('y2', function (d) { return d; });\n  },\n\n  _generateBottomLine: function () {\n    this.chart.append('line')\n      .attr('class', 'CDB-Chart-line CDB-Chart-line--bottom')\n      .attr('x1', 0)\n      .attr('y1', this.chartHeight() - 1)\n      .attr('x2', this.chartWidth() - 1)\n      .attr('y2', this.chartHeight() - 1);\n  },\n\n  _setupD3Bindings: function () { // TODO: move to a helper\n    d3.selection.prototype.moveToBack = function () {\n      return this.each(function () {\n        var firstChild = this.parentNode.firstChild;\n        if (firstChild) {\n          this.parentNode.insertBefore(this, firstChild);\n        }\n      });\n    };\n\n    d3.selection.prototype.moveToFront = function () {\n      return this.each(function () {\n        this.parentNode.appendChild(this);\n      });\n    };\n  },\n\n  _setupModel: function () {\n    this.model = new cdb.core.Model({\n      bounded: false,\n      showLabels: true,\n      data: this.options.data,\n      height: this.options.height,\n      display: true,\n      show_shadow_bars: this.options.displayShadowBars,\n      margin: _.clone(this.options.margin),\n      width: 0, // will be set on resize listener\n      pos: { x: 0, y: 0 },\n      normalized: this.options.normalized\n    });\n  },\n\n  _setupBindings: function () {\n    this.model.bind('change:data', this._onChangeData, this);\n    this.model.bind('change:display', this._onChangeDisplay, this);\n    this.model.bind('change:dragging', this._onChangeDragging, this);\n    this.model.bind('change:height', this._onChangeHeight, this);\n    this.model.bind('change:left_axis_tip', this._onChangeLeftAxisTip, this);\n    this.model.bind('change:lo_index change:hi_index', this._onChangeRange, this);\n    this.model.bind('change:pos', this._onChangePos, this);\n    this.model.bind('change:right_axis_tip', this._onChangeRightAxisTip, this);\n    this.model.bind('change:showLabels', this._onChangShowLabels, this);\n    this.model.bind('change:show_shadow_bars', this._onChangeShowShadowBars, this);\n    this.model.bind('change:width', this._onChangeWidth, this);\n    this.model.bind('change:normalized', this._onChangeNormalized, this);\n\n    if (this._originalData) {\n      this._originalData.on('change:data', function () {\n        this._removeShadowBars();\n        this._generateShadowBars();\n      }, this);\n      this.add_related_model(this._originalData);\n    }\n  },\n\n  _setupDimensions: function () {\n    this._setupScales();\n    this._setupRanges();\n    this._onWindowResize();\n  },\n\n  _getXScale: function () {\n    return d3.scale.linear().domain([0, 100]).range([0, this.chartWidth()]);\n  },\n\n  _getYScale: function () {\n    var data = (this._originalData && this._originalData.getData()) || this.model.get('data');\n    if (this.model.get('normalized')) {\n      data = this.model.get('data');\n    }\n    return d3.scale.linear().domain([0, d3.max(data, function (d) { return _.isEmpty(d) ? 0 : d.freq; })]).range([this.chartHeight(), 0]);\n  },\n\n  updateXScale: function () {\n    this.xScale = this._getXScale();\n  },\n\n  updateYScale: function () {\n    this.yScale = this._getYScale();\n  },\n\n  resetYScale: function () {\n    this.yScale = this._originalYScale;\n  },\n\n  _getDataForScales: function () {\n    if (!this.model.get('bounded') && this._originalData) {\n      return this._originalData.getData();\n    } else {\n      return this.model.get('data');\n    }\n  },\n\n  _setupScales: function () {\n    var data = this._getDataForScales();\n    this.updateXScale();\n\n    if (!this._originalYScale || this.model.get('normalized')) {\n      this._originalYScale = this.yScale = this._getYScale();\n    }\n\n    if (!data || !data.length) {\n      return;\n    }\n\n    if (this.options.type === 'time') {\n      this.xAxisScale = d3.time.scale().domain([data[0].start * 1000, data[data.length - 1].end * 1000]).nice().range([0, this.chartWidth()]);\n    } else {\n      this.xAxisScale = d3.scale.linear().range([data[0].start, data[data.length - 1].end]).domain([0, this.chartWidth()]);\n    }\n  },\n\n  _setupRanges: function () {\n    var n = Math.round(this.chartWidth() / this.options.divisionWidth);\n    this.verticalRange = d3.range(0, this.chartWidth() + this.chartWidth() / n, this.chartWidth() / n);\n    this.horizontalRange = d3.range(0, this.chartHeight() + this.chartHeight() / 2, this.chartHeight() / 2);\n  },\n\n  _calcBarWidth: function () {\n    this.barWidth = this.chartWidth() / this.model.get('data').length;\n  },\n\n  _generateChart: function () {\n    var margin = this.model.get('margin');\n\n    this.chart = d3.select(this.el)\n      .selectAll('.CDB-WidgetCanvas')\n      .append('g')\n      .attr('class', 'CDB-Chart')\n      .attr('transform', 'translate(' + margin.left + ', ' + margin.top + ')');\n\n    this.chart.classed(this.options.className || '', true);\n  },\n\n  _onChangeShowShadowBars: function () {\n    if (this.model.get('show_shadow_bars')) {\n      this._generateShadowBars();\n    } else {\n      this._removeShadowBars();\n    }\n  },\n\n  _onChangeDisplay: function () {\n    if (this.model.get('display')) {\n      this._show();\n    } else {\n      this._hide();\n    }\n  },\n\n  hide: function () {\n    this.model.set('display', false);\n  },\n\n  show: function () {\n    this.model.set('display', true);\n  },\n\n  _hide: function () {\n    this.$el.hide();\n  },\n\n  _show: function () {\n    this.$el.show();\n  },\n\n  isHidden: function () {\n    return !this.model.get('display');\n  },\n\n  _selectBars: function () {\n    var self = this;\n    var extent = this.brush.extent();\n    var lo = extent[0];\n    var hi = extent[1];\n\n    this.model.set({ lo_index: this._getLoBarIndex(), hi_index: this._getHiBarIndex() });\n\n    this.chart.selectAll('.CDB-Chart-bar').classed('is-selected', function (d, i) {\n      var a = Math.floor(i * self.barWidth);\n      var b = Math.floor(a + self.barWidth);\n      var LO = Math.floor(self.xScale(lo));\n      var HI = Math.floor(self.xScale(hi));\n      var isIn = (a > LO && a < HI) || (b > LO && b < HI) || (a <= LO && b >= HI);\n      return !isIn;\n    });\n  },\n\n  _isDragging: function () {\n    return this.model.get('dragging');\n  },\n\n  _move: function (pos) {\n    this.model.set({ pos: pos });\n  },\n\n  expand: function (height) {\n    this.canvas.attr('height', this.model.get('height') + height);\n    this._move({ x: 0, y: height });\n  },\n\n  contract: function (height) {\n    this.canvas.attr('height', height);\n    this._move({ x: 0, y: 0 });\n  },\n\n  resizeHeight: function (height) {\n    this.model.set('height', height);\n  },\n\n  setNormalized: function (normalized) {\n    this.model.set('normalized', !!normalized);\n    return this;\n  },\n\n  removeSelection: function () {\n    this.resetIndexes();\n    this.chart.selectAll('.CDB-Chart-bar').classed('is-selected', false);\n    this._removeBrush();\n    this._setupBrush();\n  },\n\n  selectRange: function (loBarIndex, hiBarIndex) {\n    if (!loBarIndex && !hiBarIndex) {\n      return;\n    }\n\n    var loPosition = this._getBarPosition(loBarIndex);\n    var hiPosition = this._getBarPosition(hiBarIndex);\n\n    this._selectRange(loPosition, hiPosition);\n  },\n\n  _selectRange: function (loPosition, hiPosition) {\n    this.chart.select('.Brush').transition()\n      .duration(this.brush.empty() ? 0 : 150)\n      .call(this.brush.extent([loPosition, hiPosition]))\n      .call(this.brush.event);\n  },\n\n  _getLoBarIndex: function () {\n    var extent = this.brush.extent();\n    return Math.round(this.xScale(extent[0]) / this.barWidth);\n  },\n\n  _getHiBarIndex: function () {\n    var extent = this.brush.extent();\n    return Math.round(this.xScale(extent[1]) / this.barWidth);\n  },\n\n  _getBarIndex: function () {\n    var x = d3.event.sourceEvent.offsetX;\n    return Math.floor(x / this.barWidth);\n  },\n\n  _getBarPosition: function (index) {\n    var data = this.model.get('data');\n    return index * (100 / data.length);\n  },\n\n  _setupBrush: function () {\n    var self = this;\n\n    var brush = this.brush = d3.svg.brush().x(this.xScale);\n\n    function onBrushEnd () {\n      var data = self.model.get('data');\n      var loPosition, hiPosition;\n\n      self.model.set({ dragging: false });\n\n      if (brush.empty()) {\n        self.chart.selectAll('.CDB-Chart-bar').classed('is-selected', false);\n        d3.select(this).call(brush.extent([0, 0]));\n      } else {\n        var loBarIndex = self._getLoBarIndex();\n        var hiBarIndex = self._getHiBarIndex();\n\n        loPosition = self._getBarPosition(loBarIndex);\n        hiPosition = self._getBarPosition(hiBarIndex);\n\n        if (!d3.event.sourceEvent) {\n          return;\n        }\n\n        if (loBarIndex === hiBarIndex) {\n          if (hiBarIndex >= data.length) {\n            loPosition = self._getBarPosition(loBarIndex - 1);\n          } else {\n            hiPosition = self._getBarPosition(hiBarIndex + 1);\n          }\n        }\n\n        self._selectRange(loPosition, hiPosition);\n        self.model.set({ lo_index: loBarIndex, hi_index: hiBarIndex });\n        self._adjustBrushHandles();\n        self._selectBars();\n\n        self.trigger('on_brush_end', self.model.get('lo_index'), self.model.get('hi_index'));\n      }\n\n      if (d3.event.sourceEvent && loPosition === undefined && hiPosition === undefined) {\n        var barIndex = self._getBarIndex();\n\n        loPosition = self._getBarPosition(barIndex);\n        hiPosition = self._getBarPosition(barIndex + 1);\n\n        self.model.set({ lo_index: barIndex, hi_index: barIndex + 1 });\n        self._selectRange(loPosition, hiPosition);\n        self.trigger('on_brush_end', self.model.get('lo_index'), self.model.get('hi_index'));\n      }\n    }\n\n    this.brush\n      .on('brushstart', this._onBrushStart)\n      .on('brush', this._onBrushMove)\n      .on('brushend', onBrushEnd);\n\n    this.chart.append('g')\n      .attr('class', 'Brush')\n      .call(this.brush)\n      .selectAll('rect')\n      .attr('y', 0)\n      .attr('height', this.chartHeight())\n      .on('mouseout', this._onMouseOut)\n      .on('mousemove', this._onMouseMove);\n  },\n\n  _adjustBrushHandles: function () {\n    var extent = this.brush.extent();\n\n    var loExtent = extent[0];\n    var hiExtent = extent[1];\n\n    var leftX = this.xScale(loExtent) - this.options.handleWidth / 2;\n    var rightX = this.xScale(hiExtent) - this.options.handleWidth / 2;\n\n    this.chart.select('.CDB-Chart-handle-left')\n      .attr('transform', 'translate(' + leftX + ', 0)');\n\n    this.chart.select('.CDB-Chart-handle-right')\n      .attr('transform', 'translate(' + rightX + ', 0)');\n\n    if (this.options.hasAxisTip) {\n      this.model.set({\n        left_axis_tip: this.xAxisScale(leftX + 3),\n        right_axis_tip: this.xAxisScale(rightX + 3)\n      });\n    }\n  },\n\n  _generateAxisTip: function (className) {\n    var handle = this.chart.select('.CDB-Chart-handle.CDB-Chart-handle-' + className);\n\n    var axisTip = handle.selectAll('g')\n      .data([''])\n      .enter().append('g')\n      .attr('class', 'CDB-Chart-axisTip CDB-Chart-axisTip-' + className)\n      .attr('transform', function (d, i) { return 'translate(0,52)'; });\n\n    this.rectLabel = axisTip.append('rect')\n      .attr('class', 'CDB-Chart-axisTipRect CDB-Chart-axisTip-' + className)\n      .attr('height', 12)\n      .attr('width', 10);\n\n    this.textLabel = axisTip.append('text')\n      .attr('class', 'CDB-Text CDB-Size-small CDB-Chart-axisTipText CDB-Chart-axisTip-' + className)\n      .attr('dy', '11')\n      .attr('dx', '0')\n      .text(function (d) { return d; });\n  },\n\n  _generateHandle: function (className) {\n    var opts = { width: this.options.handleWidth, height: this.options.handleHeight, radius: this.options.handleRadius };\n    var yPos = (this.chartHeight() / 2) - (this.options.handleHeight / 2);\n\n    var handle = this.chart.select('.CDB-Chart-handles')\n      .append('g')\n      .attr('class', 'CDB-Chart-handle CDB-Chart-handle-' + className);\n\n    if (this.options.hasAxisTip) {\n      this._generateAxisTip(className);\n    }\n\n    handle\n      .append('line')\n      .attr('class', 'CDB-Chart-handleLine')\n      .attr('x1', 3)\n      .attr('y1', -4)\n      .attr('x2', 3)\n      .attr('y2', this.chartHeight() + 4);\n\n    if (this.options.hasHandles) {\n      handle\n        .append('rect')\n        .attr('class', 'CDB-Chart-handleRect')\n        .attr('transform', 'translate(0, ' + yPos + ')')\n        .attr('width', opts.width)\n        .attr('height', opts.height)\n        .attr('rx', opts.radius)\n        .attr('ry', opts.radius);\n\n      var y = 21; // initial position of the first grip\n\n      for (var i = 0; i < 3; i++) {\n        handle\n          .append('line')\n          .attr('class', 'CDB-Chart-handleGrip')\n          .attr('x1', 2)\n          .attr('y1', y + i * 3)\n          .attr('x2', 4)\n          .attr('y2', y + i * 3);\n      }\n    }\n\n    return handle;\n  },\n\n  _generateHandles: function () {\n    this.chart.append('g').attr('class', 'CDB-Chart-handles');\n    this.leftHandle = this._generateHandle('left');\n    this.rightHandle = this._generateHandle('right');\n  },\n\n  _generateHandleLine: function () {\n    return this.chart.select('.CDB-Chart-handles').append('line')\n      .attr('class', 'CDB-Chart-handleLine')\n      .attr('x1', 0)\n      .attr('y1', 0)\n      .attr('x2', 0)\n      .attr('y2', this.chartHeight());\n  },\n\n  _removeHandles: function () {\n    this.chart.select('.CDB-Chart-handles').remove();\n  },\n\n  _removeAxis: function () {\n    this.canvas.select('.CDB-Chart-axis').remove();\n  },\n\n  _generateAdjustAnchorMethod: function (ticks) {\n    return function (d, i) {\n      if (i === 0) {\n        return 'start';\n      } else if (i === (ticks.length - 1)) {\n        return 'end';\n      } else {\n        return 'middle';\n      }\n    };\n  },\n\n  _generateAxis: function () {\n    this._axis = this.options.type === 'time'\n      ? this._generateTimeAxis()\n      : this._generateNumericAxis();\n\n    this._onChangShowLabels();\n  },\n\n  _generateNumericAxis: function () {\n    var self = this;\n    var adjustTextAnchor = this._generateAdjustAnchorMethod(this.verticalRange);\n\n    var axis = this.chart.append('g')\n      .attr('class', 'CDB-Chart-axis CDB-Text CDB-Size-small');\n\n    axis\n      .append('g')\n      .selectAll('.Label')\n      .data(this.verticalRange)\n      .enter().append('text')\n      .attr('x', function (d) { return d; })\n      .attr('y', function (d) { return self.chartHeight() + 15; })\n      .attr('text-anchor', adjustTextAnchor)\n      .text(function (d) {\n        if (self.xAxisScale) {\n          return formatter.formatNumber(self.xAxisScale(d));\n        }\n      });\n\n    return axis;\n  },\n\n  _generateTimeAxis: function () {\n    var adjustTextAnchor = this._generateAdjustAnchorMethod(this.xAxisScale.ticks());\n\n    var xAxis = d3.svg.axis()\n      .orient('bottom')\n      .tickPadding(5)\n      .innerTickSize(-this.chartHeight())\n      .scale(this.xAxisScale)\n      .orient('bottom');\n\n    var axis = this.canvas.append('g')\n      .attr('class', 'CDB-Chart-axis CDB-Text CDB-Size-small')\n      .attr('transform', 'translate(0,' + (this.chartHeight() + 5) + ')')\n      .call(xAxis);\n\n    axis.selectAll('text').style('text-anchor', adjustTextAnchor);\n    axis.moveToBack();\n\n    return axis;\n  },\n\n  _updateChart: function () {\n    var self = this;\n    var data = this.model.get('data');\n\n    var bars = this.chart.selectAll('.CDB-Chart-bar')\n      .data(data);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-bar ' + this.options.chartBarColorClass)\n      .attr('data', function (d) { return _.isEmpty(d) ? 0 : d.freq; })\n      .attr('transform', function (d, i) {\n        return 'translate(' + (i * self.barWidth) + ', 0 )';\n      })\n      .attr('y', self.chartHeight())\n      .attr('height', 0)\n      .attr('width', Math.max(0, this.barWidth - 1));\n\n    bars\n      .transition()\n      .duration(200)\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n        return h;\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return self.yScale(d.freq);\n        }\n      });\n\n    bars\n      .exit()\n      .transition()\n      .duration(200)\n      .attr('height', function (d) {\n        return 0;\n      })\n      .attr('y', function (d) {\n        return self.chartHeight();\n      });\n  },\n\n  _generateBars: function () {\n    var self = this;\n    var data = this.model.get('data');\n\n    this._calcBarWidth();\n\n    var bars = this.chart.append('g')\n      .attr('transform', 'translate(0, 0)')\n      .attr('class', 'CDB-Chart-bars')\n      .selectAll('.CDB-Chart-bar')\n      .data(data);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-bar ' + this.options.chartBarColorClass)\n      .attr('data', function (d) { return _.isEmpty(d) ? 0 : d.freq; })\n      .attr('transform', function (d, i) {\n        return 'translate(' + (i * self.barWidth) + ', 0 )';\n      })\n      .attr('y', self.chartHeight())\n      .attr('height', 0)\n      .attr('width', Math.max(0, this.barWidth - 1));\n\n    bars\n      .transition()\n      .ease(this.options.transitionType)\n      .duration(this.options.animationSpeed)\n      .delay(this.options.animationBarDelay)\n      .transition()\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n        return h;\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        var h = self.chartHeight() - self.yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return self.yScale(d.freq);\n        }\n      });\n  },\n\n  showShadowBars: function () {\n    if (this.options.displayShadowBars) {\n      this.model.set('show_shadow_bars', true);\n    }\n  },\n\n  _generateShadowBars: function () {\n    var data = this._originalData && this._originalData.getData() || this.model.get('data');\n\n    if (!data || !data.length || !this.model.get('show_shadow_bars') || this.model.get('normalized')) {\n      this._removeShadowBars();\n      return;\n    }\n\n    this._removeShadowBars();\n\n    var self = this;\n\n    var yScale = d3.scale.linear().domain([0, d3.max(data, function (d) { return _.isEmpty(d) ? 0 : d.freq; })]).range([this.chartHeight(), 0]);\n\n    var barWidth = this.chartWidth() / data.length;\n\n    this.chart.append('g')\n      .attr('transform', 'translate(0, 0)')\n      .attr('class', 'CDB-Chart-shadowBars')\n      .selectAll('.CDB-Chart-shadowBar')\n      .data(data)\n      .enter()\n      .append('rect')\n      .attr('class', 'CDB-Chart-shadowBar')\n      .attr('data', function (d) { return _.isEmpty(d) ? 0 : d.freq; })\n      .attr('transform', function (d, i) {\n        return 'translate(' + (i * barWidth) + ', 0 )';\n      })\n      .attr('y', function (d) {\n        if (_.isEmpty(d)) {\n          return self.chartHeight();\n        }\n\n        var h = self.chartHeight() - yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          return self.chartHeight() - self.options.minimumBarHeight;\n        } else {\n          return yScale(d.freq);\n        }\n      })\n      .attr('width', Math.max(0, barWidth - 1))\n      .attr('height', function (d) {\n        if (_.isEmpty(d)) {\n          return 0;\n        }\n\n        var h = self.chartHeight() - yScale(d.freq);\n\n        if (h < self.options.minimumBarHeight && h > 0) {\n          h = self.options.minimumBarHeight;\n        }\n        return h;\n      });\n\n    // We need to explicitly move the lines of the grid behind the shadow bars\n    this.chart.selectAll('.CDB-Chart-shadowBars').moveToBack();\n    this.chart.selectAll('.CDB-Chart-lines').moveToBack();\n  },\n\n  unsetBounds: function () {\n    this.model.set('bounded', false);\n    this.updateYScale();\n    this.contract(this.options.height);\n    this.resetIndexes();\n    this.removeSelection();\n  },\n\n  setBounds: function () {\n    this.model.set('bounded', true);\n    this.updateYScale();\n    this.expand(4);\n    this.removeShadowBars();\n  },\n\n  clean: function () {\n    $(window).unbind('resize', this._onWindowResize);\n    cdb.core.View.prototype.clean.call(this);\n  }\n});\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar formatter = require('../../formatter');\nvar HistogramTitleView = require('./histogram-title-view');\nvar HistogramChartView = require('./chart');\nvar placeholder = require('./placeholder.tpl');\nvar template = require('./content.tpl');\nvar DropdownView = require('../dropdown/widget-dropdown-view');\nvar AnimateValues = require('../animate-values.js');\nvar animationTemplate = require('./animation-template.tpl');\n\n/**\n * Widget content view for a histogram\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body',\n\n  defaults: {\n    chartHeight: 48 + 20 + 4\n  },\n\n  events: {\n    'click .js-clear': '_resetWidget',\n    'click .js-zoom': '_zoom'\n  },\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this.filter = this._dataviewModel.filter;\n    this.lockedByUser = false;\n    this._initBinds();\n  },\n\n  _initViews: function () {\n    this._initTitleView();\n\n    var dropdown = new DropdownView({\n      target: this.$('.js-actions'),\n      container: this.$('.js-header'),\n      flags: {\n        normalizeHistogram: true\n      }\n    });\n\n    dropdown.bind('click', function (action, value) {\n      if (action === 'toggle') {\n        this.model.set('collapsed', !this.model.get('collapsed'));\n      } else if (action === 'normalize') {\n        this.histogramChartView.setNormalized(value);\n        this.miniHistogramChartView.setNormalized(value);\n      }\n    }, this);\n\n    this.addView(dropdown);\n\n    this._renderMiniChart();\n    this._renderMainChart();\n  },\n\n  _initTitleView: function () {\n    var titleView = new HistogramTitleView({\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n\n    this.$('.js-title').append(titleView.render().el);\n    this.addView(titleView);\n  },\n\n  _initBinds: function () {\n    this._originalData.once('change:data', this._onFirstLoad, this);\n    this.model.bind('change:collapsed', this.render, this);\n  },\n\n  _onFirstLoad: function () {\n    this.render();\n    this._dataviewModel.bind('change:data', this._onHistogramDataChanged, this);\n    this.add_related_model(this._dataviewModel);\n    this._dataviewModel.fetch();\n  },\n\n  _isZoomed: function () {\n    return this.model.get('zoomed');\n  },\n\n  _onHistogramDataChanged: function () {\n    // When the histogram is zoomed, we don't need to rely\n    // on the change url to update the histogram\n    // TODO the widget should not know about the URL… could this state be got from the dataview model somehow?\n    if (this._dataviewModel.changed.url && this._isZoomed()) {\n      return;\n    }\n\n    // if the action was initiated by the user\n    // don't replace the stored data\n    if (this.lockedByUser) {\n      this.lockedByUser = false;\n    } else {\n      if (!this._isZoomed()) {\n        this.histogramChartView.showShadowBars();\n        this.miniHistogramChartView.replaceData(this._dataviewModel.getData());\n      }\n      this.histogramChartView.replaceData(this._dataviewModel.getData());\n    }\n\n    if (this.unsettingRange) {\n      this._unsetRange();\n    }\n\n    this._updateStats();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var data = this._dataviewModel.getData();\n    var originalData = this._originalData.getData();\n    var isDataEmpty = !_.size(data) && !_.size(originalData);\n\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        showStats: this.model.get('show_stats'),\n        itemsCount: !isDataEmpty ? data.length : '-'\n      })\n    );\n\n    if (isDataEmpty) {\n      this._addPlaceholder();\n      this._initTitleView();\n    } else {\n      this._setupBindings();\n      this.$el.toggleClass('is-collapsed', !!this.model.get('collapsed'));\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _unsetRange: function () {\n    this.unsettingRange = false;\n    this.histogramChartView.replaceData(this._dataviewModel.getData());\n    this.model.set({ lo_index: null, hi_index: null });\n\n    if (!this._isZoomed()) {\n      this.histogramChartView.showShadowBars();\n    }\n  },\n\n  _addPlaceholder: function () {\n    this.$('.js-content').append(placeholder());\n  },\n\n  _renderMainChart: function () {\n    this.histogramChartView = new HistogramChartView(({\n      margin: { top: 4, right: 4, bottom: 4, left: 4 },\n      hasHandles: true,\n      hasAxisTip: true,\n      width: this.canvasWidth,\n      height: this.defaults.chartHeight,\n      data: this._dataviewModel.getData(),\n      originalData: this._originalData,\n      displayShadowBars: !this.model.get('normalized'),\n      normalized: this.model.get('normalized')\n    }));\n\n    this.$('.js-content').append(this.histogramChartView.el);\n    this.addView(this.histogramChartView);\n\n    this.histogramChartView.bind('range_updated', this._onRangeUpdated, this);\n    this.histogramChartView.bind('on_brush_end', this._onBrushEnd, this);\n    this.histogramChartView.bind('hover', this._onValueHover, this);\n    this.histogramChartView.render().show();\n\n    this._updateStats();\n  },\n\n  _renderMiniChart: function () {\n    this.miniHistogramChartView = new HistogramChartView(({\n      className: 'CDB-Chart--mini',\n      margin: { top: 0, right: 4, bottom: 4, left: 4 },\n      height: 40,\n      showOnWidthChange: false,\n      data: this._dataviewModel.getData(),\n      normalized: this.model.get('normalized'),\n      originalData: this._originalData\n    }));\n\n    this.addView(this.miniHistogramChartView);\n    this.$('.js-content').append(this.miniHistogramChartView.el);\n    this.miniHistogramChartView.bind('on_brush_end', this._onMiniRangeUpdated, this);\n    this.miniHistogramChartView.render();\n  },\n\n  _setupBindings: function () {\n    this._dataviewModel.bind('change:bins', this._onChangeBins, this);\n    this.model.bind('change:zoomed', this._onChangeZoomed, this);\n    this.model.bind('change:zoom_enabled', this._onChangeZoomEnabled, this);\n    this.model.bind('change:filter_enabled', this._onChangeFilterEnabled, this);\n    this.model.bind('change:total', this._onChangeTotal, this);\n    this.model.bind('change:nulls', this._onChangeNulls, this);\n    this.model.bind('change:max', this._onChangeMax, this);\n    this.model.bind('change:min', this._onChangeMin, this);\n    this.model.bind('change:avg', this._onChangeAvg, this);\n  },\n\n  _clearTooltip: function () {\n    this.$('.js-tooltip').stop().hide();\n  },\n\n  _onValueHover: function (info) {\n    var $tooltip = this.$('.js-tooltip');\n\n    if (info && info.data) {\n      var bottom = this.defaults.chartHeight + 3 - info.top;\n\n      $tooltip.css({ bottom: bottom, left: info.left });\n      $tooltip.text(info.data);\n      $tooltip.css({ left: info.left - $tooltip.width() / 2 });\n      $tooltip.fadeIn(70);\n    } else {\n      this._clearTooltip();\n    }\n  },\n\n  _onMiniRangeUpdated: function (loBarIndex, hiBarIndex) {\n    this.lockedByUser = false;\n\n    this._clearTooltip();\n    this.histogramChartView.removeSelection();\n\n    var data = this._originalData.getData();\n\n    if (loBarIndex >= 0 && loBarIndex < data.length && (hiBarIndex - 1) >= 0 && (hiBarIndex - 1) < data.length) {\n      this.filter.setRange(\n        data[loBarIndex].start,\n        data[hiBarIndex - 1].end\n      );\n      this._updateStats();\n    } else {\n      console.error('Error accessing array bounds', loBarIndex, hiBarIndex, data);\n    }\n  },\n\n  _onBrushEnd: function (loBarIndex, hiBarIndex) {\n    var data = this._dataviewModel.getData();\n\n    if (!data || !data.length) {\n      return;\n    }\n\n    if (this._isZoomed()) {\n      this.lockedByUser = true;\n    }\n\n    var properties = { filter_enabled: true, lo_index: loBarIndex, hi_index: hiBarIndex };\n\n    if (!this.model.get('zoomed')) {\n      properties.zoom_enabled = true;\n    }\n\n    this.model.set(properties);\n\n    if (loBarIndex >= 0 && loBarIndex < data.length && (hiBarIndex - 1) >= 0 && (hiBarIndex - 1) < data.length) {\n      this.filter.setRange(\n        data[loBarIndex].start,\n        data[hiBarIndex - 1].end\n      );\n      this._updateStats();\n    } else {\n      console.error('Error accessing array bounds', loBarIndex, hiBarIndex, data);\n    }\n  },\n\n  _onRangeUpdated: function (loBarIndex, hiBarIndex) {\n    var self = this;\n    if (this.model.get('zoomed')) {\n      this.model.set({ zoom_enabled: false, lo_index: loBarIndex, hi_index: hiBarIndex });\n    } else {\n      this.model.set({ lo_index: loBarIndex, hi_index: hiBarIndex });\n    }\n\n    var updateStats = _.debounce(function () { self._updateStats(); }, 400);\n    updateStats();\n  },\n\n  _onChangeFilterEnabled: function () {\n    this.$('.js-filter').toggleClass('is-hidden', !this.model.get('filter_enabled'));\n  },\n\n  _onChangeBins: function (mdl, bins) {\n    this._originalData.setBins(bins);\n    this.model.set({\n      zoom_enabled: false,\n      filter_enabled: false,\n      lo_index: null,\n      hi_index: null\n    });\n  },\n\n  _onChangeZoomEnabled: function () {\n    this.$('.js-zoom').toggleClass('is-hidden', !this.model.get('zoom_enabled'));\n  },\n\n  _changeHeaderValue: function (className, what, suffix) {\n    if (this.model.get(what) === undefined) {\n      this.$(className).text('0 ' + suffix);\n      return;\n    }\n\n    this._addTitleForValue(className, what, suffix);\n\n    var animator = new AnimateValues({\n      el: this.$el\n    });\n\n    animator.animateValue(this.model, what, className, animationTemplate, {\n      formatter: formatter.formatNumber,\n      templateData: { suffix: ' ' + suffix }\n    });\n  },\n\n  _onChangeNulls: function () {\n    this._changeHeaderValue('.js-nulls', 'nulls', '');\n  },\n\n  _onChangeTotal: function () {\n    this._changeHeaderValue('.js-val', 'total', 'SELECTED');\n  },\n\n  _onChangeMax: function () {\n    this._changeHeaderValue('.js-max', 'max', '');\n  },\n\n  _onChangeMin: function () {\n    this._changeHeaderValue('.js-min', 'min', '');\n  },\n\n  _onChangeAvg: function () {\n    this._changeHeaderValue('.js-avg', 'avg', '');\n  },\n\n  _addTitleForValue: function (className, what, unit) {\n    this.$(className).attr('title', this._formatNumberWithCommas(this.model.get(what).toFixed(2)) + ' ' + unit);\n  },\n\n  _formatNumberWithCommas: function (x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  },\n\n  _updateStats: function () {\n    var data = this._dataviewModel.getData();\n    var nulls = this._dataviewModel.get('nulls');\n    var min, max;\n\n    if (data && data.length) {\n      var loBarIndex = this.model.get('lo_index') || 0;\n      var hiBarIndex = this.model.get('hi_index') || data.length;\n\n      var sum = this._calcSum(data, loBarIndex, hiBarIndex);\n      var avg = this._calcAvg(data, loBarIndex, hiBarIndex);\n\n      if (loBarIndex >= 0 && loBarIndex < data.length) {\n        min = data[loBarIndex].start;\n      }\n\n      if (hiBarIndex >= 0 && hiBarIndex - 1 < data.length) {\n        max = data[hiBarIndex - 1].end;\n      }\n\n      this.model.set({ total: sum, nulls: nulls, min: min, max: max, avg: avg });\n    }\n  },\n\n  _calcAvg: function (data, start, end) {\n    var selectedData = data.slice(start, end);\n\n    var total = this._calcSum(data, start, end, total);\n\n    if (!total) {\n      return 0;\n    }\n\n    var area = _.reduce(selectedData, function (memo, d) {\n      return (d.avg && d.freq) ? (d.avg * d.freq) + memo : memo;\n    }, 0);\n\n    return area / total;\n  },\n\n  _calcSum: function (data, start, end) {\n    return _.reduce(data.slice(start, end), function (memo, d) {\n      return d.freq + memo;\n    }, 0);\n  },\n\n  _onChangeZoomed: function () {\n    if (this.model.get('zoomed')) {\n      this._onZoomIn();\n    } else {\n      this._resetWidget();\n    }\n  },\n\n  _showMiniRange: function () {\n    var loBarIndex = this.model.get('lo_index');\n    var hiBarIndex = this.model.get('hi_index');\n\n    this.miniHistogramChartView.selectRange(loBarIndex, hiBarIndex);\n    this.miniHistogramChartView.show();\n  },\n\n  _zoom: function () {\n    this.model.set({ zoomed: true, zoom_enabled: false });\n    this.histogramChartView.removeSelection();\n  },\n\n  _onZoomIn: function () {\n    this.lockedByUser = false;\n    this._showMiniRange();\n    this.histogramChartView.setBounds();\n    this._dataviewModel.enableFilter();\n    this._dataviewModel.fetch();\n  },\n\n  _resetWidget: function () {\n    this.lockedByUser = true;\n    this.unsettingRange = true;\n    this.model.set({\n      zoomed: false,\n      zoom_enabled: false,\n      filter_enabled: false,\n      lo_index: null,\n      hi_index: null\n    });\n    this._dataviewModel.disableFilter();\n    this.filter.unsetRange();\n    this.histogramChartView.unsetBounds();\n    this.miniHistogramChartView.hide();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header js-header\"> <div class=\"js-title\"></div> ';\n if (showStats) { \n__p+=' <dl class=\"CDB-Widget-info CDB-Text CDB-Size-small u-secondaryTextColor u-upperCase u-tSpace\"> <dt class=\"CDB-Widget-infoCount js-nulls\">0</dt><dd class=\"CDB-Widget-infoDescription\">NULL ROWS</dd> <dt class=\"CDB-Widget-infoCount js-min\">0</dt><dd class=\"CDB-Widget-infoDescription\">MIN</dd> <dt class=\"CDB-Widget-infoCount js-avg\">0</dt><dd class=\"CDB-Widget-infoDescription\">AVG</dd> <dt class=\"CDB-Widget-infoCount js-max\">0</dt><dd class=\"CDB-Widget-infoDescription\">MAX</dd> </dl> ';\n } \n__p+=' </div> <div class=\"CDB-Widget-content CDB-Widget-content--histogram js-content\"> <div class=\"CDB-Widget-tooltip CDB-Widget-tooltip--light CDB-Text CDB-Size-small js-tooltip\"></div> <div class=\"CDB-Widget-filter CDB-Widget-contentSpaced\"> <p class=\"CDB-Text CDB-Size-small is-semibold u-upperCase js-val\">…</p> <div class=\"CDB-Widget-filterButtons js-filter is-hidden\"> <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-zoom\">zoom</button> <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear\">clear</button> </div> </div> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-title CDB-Widget-contentSpaced\"> <h3 class=\"CDB-Text CDB-Size-large is-overflow\" title=\"'+\n((__t=( title ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3> <div class=\"CDB-Widget-options CDB-Widget-contentSpaced\"> <button class=\"CDB-Widget-buttonIcon CDB-Widget-buttonIcon--circle js-sizes '+\n((__t=( isSizesApplied ? 'is-selected' : '' ))==null?'':_.escape(__t))+\n' '+\n((__t=( isSizesApplied ? 'js-cancelSizes' : 'js-applySizes' ))==null?'':_.escape(__t))+\n'\" data-tooltip=\"'+\n((__t=( isSizesApplied ? 'Remove sizes' : 'Apply sizes' ))==null?'':_.escape(__t))+\n'\"> <i class=\"CDB-IconFont CDB-IconFont-drop CDB-IconFont--small CDB-IconFont--top\"></i> </button> <button class=\"CDB-Shape js-actions u-lSpace\"> <div class=\"CDB-Shape-threePoints is-blue is-small\"> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> <div class=\"CDB-Shape-threePointsItem\"></div> </div> </button> </div> </div>';\n}\nreturn __p;\n};\n",
    "var $ = require('jquery');\nvar cdb = require('cartodb.js');\nvar TooltipView = require('../widget-tooltip-view');\nvar template = require('./histogram-title-template.tpl');\n\n/**\n *  Show title + show if histogram sizes are applied or not\n *\n */\n\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-title CDB-Widget-contentSpaced',\n\n  events: {\n    'click .js-applySizes': '_applySizes',\n    'click .js-cancelSizes': '_cancelSizes'\n  },\n\n  initialize: function () {\n    this.widgetModel = this.options.widgetModel;\n    this.dataviewModel = this.options.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.html(\n      template({\n        title: this.widgetModel.get('title'),\n        isSizesApplied: this.dataviewModel.get('histogram_sizes'),\n        isCollapsed: this.widgetModel.get('collapsed')\n      })\n    );\n    this._initViews();\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.widgetModel.bind('change:title change:collapsed', this.render, this);\n    this.dataviewModel.bind('change:histogram_sizes', this.render, this);\n    this.add_related_model(this.dataviewModel);\n  },\n\n  _initViews: function () {\n    var sizesTooltip = new TooltipView({\n      target: this.$('.js-sizes')\n    });\n    $('body').append(sizesTooltip.render().el);\n    this.addView(sizesTooltip);\n  },\n\n  _applySizes: function () {\n    this.dataviewModel.set('histogram_sizes', true);\n  },\n\n  _cancelSizes: function () {\n    this.dataviewModel.set('histogram_sizes', false);\n  }\n\n});\n",
    "var WidgetModel = require('../widget-model');\n\n/**\n * Model for a histogram widget\n */\nmodule.exports = WidgetModel.extend({\n\n  initialize: function (attrs, opts) {\n    WidgetModel.prototype.initialize.apply(this, arguments);\n    this.on('change:collapsed', this._onCollapsedChange, this);\n  },\n\n  _onCollapsedChange: function (m, isCollapsed) {\n    this.dataviewModel.set('enabled', !isCollapsed);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CDB-Widget-chart CDB-Widget-chart--fake\"> ';\n for (var i = 0; i < 15; i++) { \n__p+=' <li class=\"CDB-Widget-chartItem CDB-Widget-chartItem--'+\n((__t=( _.sample(['small', 'medium', 'big'], 1)[0] ))==null?'':_.escape(__t))+\n' CDB-Widget-chartItem--fake\"></li> ';\n } \n__p+=' </ul>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header\"> <div class=\"CDB-Widget-title CDB-Widget-contentSpaced\"> <h3 class=\"CDB-Widget-textBig\" title=\"'+\n((__t=( title ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( title ))==null?'':_.escape(__t))+\n'</h3> </div> <dl class=\"CDB-Widget-info CDB-Widget-textSmaller CDB-Widget-textSmaller--upper u-tSpace\"> <dt>'+\n((__t=( itemsCount ))==null?'':_.escape(__t))+\n'</dt><dd class=\"CDB-Widget-info\">rows</dd> </dl> </div> <div class=\"CDB-Widget-content CDB-Widget-content--noSidesMargin\"> <div class=\"CDB-Widget-listWrapper js-content\"></div> </div> <div class=\"CDB-Widget-footer js-footer\"></div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar format = require('../../formatter');\nvar WidgetListItemsView = require('./items-view');\nvar WidgetListPaginatorView = require('./paginator-view');\nvar WidgetListEdgesView = require('./edges-view');\nvar template = require('./content-template.tpl');\nvar placeholderTemplate = require('./placeholder-template.tpl');\n\n/**\n * Default widget content view:\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body',\n\n  options: {\n    showScroll: false\n  },\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var data = this._dataviewModel.getData();\n    var isDataEmpty = _.isEmpty(data) || _.size(data) === 0;\n    this.$el.html(\n      template({\n        title: this.model.get('title'),\n        itemsCount: !isDataEmpty ? format.formatValue(data.length) : '-'\n      })\n    );\n\n    if (isDataEmpty) {\n      this.$('.js-content').append(placeholderTemplate());\n    } else {\n      this._initViews();\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this.listenTo(this.model, 'change:title', this.render);\n    this.listenTo(this._dataviewModel, 'change:data', this.render);\n    this.add_related_model(this._dataviewModel);\n  },\n\n  _initViews: function () {\n    // List view -> items view\n    this._list = new WidgetListItemsView({\n      model: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    this.$('.js-content').html(this._list.render().el);\n    this.addView(this._list);\n\n    var isScrollList = (this._list.$el.get(0).scrollHeight - this._list.$el.outerHeight()) > 0;\n\n    if (isScrollList || this.options.showScroll) {\n      // Paginator\n      this._pagination = new WidgetListPaginatorView({\n        $target: this._list.$el\n      });\n      this.$('.js-footer').append(this._pagination.render().el);\n      this.addView(this._pagination);\n\n      // Edges\n      this._edges = new WidgetListEdgesView({\n        $target: this._list.$el\n      });\n      this.$('.js-content').append(this._edges.render().el);\n      this.addView(this._edges);\n    }\n  }\n\n});\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\n\n/**\n *  List edges view:\n *\n *  - It shows the borders and the shadows, if needed.\n */\nmodule.exports = cdb.core.View.extend({\n  _TEMPLATE: ' ' +\n    '<div class=\"CDB-Widget-listEdge CDB-Widget-listEdge--top\">' +\n    '<div class=\"CDB-Widget-listEdgeShadow js-topShadow\"></div>' +\n    '<div class=\"CDB-Widget-listEdgeBorder\"></div>' +\n    '</div>' +\n    '<div class=\"CDB-Widget-listEdge CDB-Widget-listEdge--bottom\">' +\n    '<div class=\"CDB-Widget-listEdgeShadow js-bottomShadow\"></div>' +\n    '<div class=\"CDB-Widget-listEdgeBorder\"></div>' +\n    '</div>',\n\n  initialize: function () {\n    this._$target = this.options.$target;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    var template = _.template(this._TEMPLATE);\n    this.$el.html(template());\n    this._checkScroll();\n    return this;\n  },\n\n  _initBinds: function () {\n    var self = this;\n    this._$target.bind('scroll', function () {\n      self._checkScroll();\n    });\n  },\n\n  _unbindScroll: function () {\n    this._$target.unbind('scroll');\n  },\n\n  _checkScroll: function () {\n    var currentScroll = this._$target.scrollTop();\n    var maxScroll = this._$target.get(0).scrollHeight - this._$target.outerHeight();\n    this.$('.js-topShadow').toggle(currentScroll !== 0);\n    this.$('.js-bottomShadow').toggle(currentScroll !== maxScroll);\n  },\n\n  clean: function () {\n    this._unbindScroll();\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='';\n if (isClickable) { \n__p+=' <button type=\"button\" class=\"CDB-Widget-listItemInner CDB-Widget-listButton CDB-Widget-listButton--withBorder js-button\"> ';\n } else { \n__p+=' <div class=\"CDB-Widget-listItemInner CDB-Widget-listItemInner--withBorders\"> ';\n } \n__p+=' <div class=\"CDB-Widget-contentSpaced CDB-Widget-contentSpaced--topAligned CDB-Widget-contentSpaced--start\"> <em class=\"CDB-Shape-dot CDB-Widget-listDot\"></em> ';\n if (itemsCount > 0) { \n__p+=' <div class=\"CDB-Widget-contentFull\"> <p class=\"CDB-Widget-textSmall CDB-Widget-textSmall--upper CDB-Widget-textSmall--bold\" title=\"'+\n((__t=( items[0][1] ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( items[0][1] ))==null?'':_.escape(__t))+\n'</p> ';\n if (itemsCount > 2) { \n__p+=' <dl class=\"CDB-Widget-inlineList\"> ';\n for (var i = 1, l = itemsCount; i < l; i++) { \n__p+=' <div class=\"CDB-Widget-inlineListItem CDB-Widget-textSmaller CDB-Widget-textSmaller--noEllip\"> <dd class=\"CDB-Widget-textSmaller--bold CDB-Widget-textSmaller--dark u-rSpace\" title=\"'+\n((__t=( items[i][1] ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( items[i][1] ))==null?'':_.escape(__t))+\n'</dd> <dt title=\"'+\n((__t=( items[i][0] ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( items[i][0] ))==null?'':_.escape(__t))+\n'</dt> </div> ';\n } \n__p+=' </dl> ';\n } else if (itemsCount === 2) { \n__p+=' <dl class=\"CDB-Widget-textSmaller CDB-Widget-textSmaller--noEllip u-tSpace\"> <dd class=\"CDB-Widget-textSmaller--bold CDB-Widget-textSmaller--dark u-rSpace\" title=\"'+\n((__t=( items[1][1] ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( items[1][1] ))==null?'':_.escape(__t))+\n'</dd> <dt title=\"'+\n((__t=( items[1][0] ))==null?'':_.escape(__t))+\n'\">'+\n((__t=( items[1][0] ))==null?'':_.escape(__t))+\n'</dt> </dl> ';\n } \n__p+=' </div> ';\n } \n__p+=' </div> ';\n if (isClickable) { \n__p+=' </div></button> ';\n } else { \n__p+='  ';\n } \n__p+='';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar format = require('../../formatter');\nvar cdb = require('cartodb.js');\nvar template = require('./item-template.tpl');\n\nmodule.exports = cdb.core.View.extend({\n  tagName: 'li',\n  className: 'CDB-Widget-listItem',\n\n  events: {\n    'click .js-button': '_onItemClick'\n  },\n\n  initialize: function () {\n    this._widgetModel = this.options.widgetModel;\n    this._dataviewModel = this.options.dataviewModel;\n  },\n\n  render: function () {\n    var data = this.model.toJSON();\n    var hasInteractivity = this._hasInteractivity(data);\n    var items = this._sanitizeData(data);\n\n    this.$el.html(\n      template({\n        items: items,\n        isClickable: hasInteractivity,\n        itemsCount: _.size(items)\n      })\n    );\n\n    // If there is no cartodb_id defined, click event should\n    // be disabled\n    this[ hasInteractivity ? 'delegateEvents' : 'undelegateEvents' ]();\n    return this;\n  },\n\n  // Remove cartodb_id, if exists\n  // Replace titles if there are alternatives\n  // Convert data object to array items\n  _sanitizeData: function (data) {\n    var hasInteractivity = this._hasInteractivity(data);\n    data = _.omit(data, function (value, key, object) {\n      return key === 'cartodb_id';\n    });\n\n    var columnTitles = this._widgetModel.get('columns_title');\n    if (hasInteractivity && !_.isEmpty(columnTitles)) {\n      columnTitles = _.rest(columnTitles, 1);\n    }\n\n    // Convert to pair items and check if there is a column title\n    var arr = [];\n    var i = 0;\n\n    _.each(data, function (value, key) {\n      var title = columnTitles && columnTitles[i] || key;\n      arr.push([ title, format.formatValue(value) ]);\n      ++i;\n    });\n\n    return arr;\n  },\n\n  _hasInteractivity: function (data) {\n    return !_.isEmpty(\n      _.filter(data, function (value, key) {\n        return key === 'cartodb_id';\n      })\n    );\n  },\n\n  _onItemClick: function () {\n    this.trigger('itemClicked', this.model, this);\n  }\n\n});\n",
    "var cdb = require('cartodb.js');\nvar WidgetListItemView = require('./item-view');\n\n/**\n * View to render a set of list items\n * this.model is a widget Model\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-list js-list',\n  tagName: 'ul',\n\n  events: {\n    'scroll': '_checkScroll'\n  },\n\n  initialize: function (opts) {\n    this._dataviewModel = opts.dataviewModel;\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._renderList();\n    return this;\n  },\n\n  _renderList: function () {\n    this._dataviewModel.getData().each(this._addItem, this);\n  },\n\n  _addItem: function (mdl) {\n    var v = new WidgetListItemView({\n      model: mdl,\n      widgetModel: this.model,\n      dataviewModel: this._dataviewModel\n    });\n    v.bind('itemClicked', function () {\n      this.trigger('itemClicked', mdl, this);\n    }, this);\n    this.addView(v);\n    this.$el.append(v.render().el);\n  }\n\n});\n",
    "var $ = require('jquery');\nvar _ = require('underscore');\nvar cdb = require('cartodb.js');\n\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-nav CDB-Widget-contentSpaced',\n\n  _TEMPLATE: ' ' +\n    '<span></span>' +\n    '<div class=\"CDB-Widget-navArrows CDB-Widget-contentSpaced\">' +\n    '<button class=\"CDB-Shape-arrow CDB-Shape-arrow--up js-up\"></button>' +\n    '<button class=\"CDB-Shape-arrow CDB-Shape-arrow--down js-down\"></button>' +\n    '</div>',\n\n  events: {\n    'click .js-up': '_scrollUp',\n    'click .js-down': '_scrollDown'\n  },\n\n  initialize: function () {\n    if (!this.options.$target) {\n      throw new Error('target should be defined in order to be able to paginate');\n    }\n    this._$target = this.options.$target;\n    this._scrollHeight = this._$target.get(0).scrollHeight - this._$target.outerHeight();\n    this._initBinds();\n  },\n\n  render: function () {\n    var template = _.template(this._TEMPLATE);\n    this.$el.html(template());\n    this._checkScroll();\n    return this;\n  },\n\n  _initBinds: function () {\n    var self = this;\n    this._$target.bind('scroll', function () {\n      self._checkScroll();\n    });\n  },\n\n  _unbindScroll: function () {\n    this._$target.unbind('scroll');\n  },\n\n  _checkScroll: function () {\n    var currentScroll = this._$target.scrollTop();\n    this.$('.js-up').toggleClass('is-disabled', currentScroll === 0);\n    this.$('.js-down').toggleClass('is-disabled', currentScroll >= this._scrollHeight);\n  },\n\n  _getEdgeVisibleItems: function () {\n    var areaHeight = this._$target.outerHeight();\n    var firstEl = null;\n    var lastEl = null;\n    var items = this._$target.children('.CDB-Widget-listItem');\n\n    items.each(function (index, value) {\n      var top = $(this).position().top;\n      var height = $(this).outerHeight();\n\n      if (top > -1 && firstEl === null) { // first entirely visible element\n        firstEl = this;\n      } else if ((top + height) > areaHeight && lastEl === null) {\n        lastEl = items[index - 1]; // the last entirely visible was the element before\n      }\n    });\n\n    return [firstEl, lastEl];\n  },\n\n  _scrollDown: function () {\n    var lastVisibleItem = this._getEdgeVisibleItems()[1];\n    var currentScroll = this._$target.scrollTop();\n    var $next = $(lastVisibleItem).next();\n    if ($next.length) {\n      var top = $next.position().top;\n      var height = $next.outerHeight();\n      var scrollPos = top + height - this._$target.outerHeight() + currentScroll;\n      if (scrollPos > 0) {\n        this._$target.scrollTop(scrollPos);\n      }\n    }\n  },\n\n  _scrollUp: function () {\n    var firstVisibleItem = this._getEdgeVisibleItems()[0];\n    var currentScroll = this._$target.scrollTop();\n    var $prev = $(firstVisibleItem).prev();\n    if ($prev.length) {\n      var top = $prev.position().top;\n      var scrollPos = currentScroll + top;\n      this._$target.scrollTop(scrollPos);\n    }\n  },\n\n  clean: function () {\n    this._unbindScroll();\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<ul class=\"CDB-Widget-list CDB-Widget-list--withBorders\"> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> <li class=\"CDB-Widget-listItem CDB-Widget-listItem--fake\"></li> </ul>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar placeholderTemplate = require('./placeholder.tpl');\nvar HistogramView = require('./histogram-view');\n\n/**\n * Widget content view for a time-series\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body CDB-Widget-body--timeSeries',\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._originalData = this.model.dataviewModel.getUnfilteredDataModel();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this.$el.empty();\n\n    if (this._isDataEmpty()) {\n      this.$el.append(placeholderTemplate({\n        hasTorqueLayer: false\n      }));\n    } else {\n      this._appendView(new HistogramView({\n        model: this._dataviewModel,\n        rangeFilter: this._dataviewModel.filter,\n        torqueLayerModel: this._dataviewModel.layer\n      }));\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._originalData.once('change:data', this._onOriginalDataChange, this);\n    this._dataviewModel.once('error', function () {\n      console.log('the tiler does not support non-torque layers just yet…');\n    });\n    this._dataviewModel.once('change:data', this.render, this);\n    this.add_related_model(this._dataviewModel);\n    this.add_related_model(this._originalData);\n  },\n\n  _appendView: function (view) {\n    this.addView(view);\n    this.$el.append(view.render().el);\n  },\n\n  _isDataEmpty: function () {\n    var data = this._dataviewModel.getData();\n    return _.isEmpty(data) || _.size(data) === 0;\n  },\n\n  _onOriginalDataChange: function () {\n    // do an explicit fetch in order to get actual data\n    // with the filters applied (e.g. bbox)\n    this._dataviewModel.fetch();\n  }\n});\n",
    "var $ = require('jquery');\nvar cdb = require('cartodb.js');\nvar HistogramChartView = require('../histogram/chart');\nvar TimeSeriesHeaderView = require('./time-series-header-view');\n\n/**\n * Time-series histogram view.\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-content CDB-Widget-content--timeSeries',\n\n  defaults: {\n    mobileThreshold: 960, // px; should match CSS media-query\n    histogramChartHeight: 48 + // inline bars height\n      4 + // bottom margin\n      16 + // labels\n      4, // margins\n    histogramChartMobileHeight: 20 + // inline bars height (no bottom labels)\n      4 // margins\n  },\n\n  initialize: function () {\n    this._rangeFilter = this.options.rangeFilter;\n    this._originalData = this.model.getUnfilteredDataModel();\n    this.model.bind('change:data', this._onChangeData, this);\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._createHeaderView();\n    this._createHistogramView();\n    return this;\n  },\n\n  _createHeaderView: function () {\n    var headerView = new TimeSeriesHeaderView({\n      dataviewModel: this.model,\n      rangeFilter: this._rangeFilter\n    });\n    headerView.bind('resetFilter', this._onResetFilter, this);\n    this.addView(headerView);\n    this.$el.append(headerView.render().el);\n  },\n\n  _createHistogramView: function () {\n    this._chartView = new HistogramChartView({\n      type: 'time',\n      chartBarColorClass: 'CDB-Chart-bar--timeSeries',\n      animationSpeed: 100,\n      margin: {\n        top: 4,\n        right: 4,\n        bottom: 4,\n        left: 4\n      },\n      hasHandles: true,\n      animationBarDelay: function (d, i) {\n        return (i * 3);\n      },\n      height: this.defaults.histogramChartHeight,\n      data: this.model.getData(),\n      originalData: this._originalData,\n      displayShadowBars: true\n    });\n    this.addView(this._chartView);\n    this.$el.append(this._chartView.render().el);\n    this._chartView.show();\n\n    this._chartView.bind('on_brush_end', this._onBrushEnd, this);\n    this._chartView.model.bind('change:width', this._onChangeChartWidth, this);\n    this.add_related_model(this._chartView.model);\n  },\n\n  _onChangeData: function () {\n    if (this._chartView) {\n      this._chartView.replaceData(this.model.getData());\n      this._chartView.updateXScale();\n      this._chartView.updateYScale();\n    }\n  },\n\n  _onResetFilter: function () {\n    this._rangeFilter.unsetRange();\n    this._chartView.removeSelection();\n  },\n\n  _onBrushEnd: function (loBarIndex, hiBarIndex) {\n    var data = this.model.getData();\n    this._rangeFilter.setRange(\n      data[loBarIndex].start,\n      data[hiBarIndex - 1].end\n    );\n  },\n\n  _onChangeChartWidth: function () {\n    var isMobileSize = $(window).width() < this.defaults.mobileThreshold;\n\n    this._chartView.toggleLabels(!isMobileSize);\n\n    var height = isMobileSize\n      ? this.defaults.histogramChartMobileHeight\n      : this.defaults.histogramChartHeight;\n    this._chartView.model.set('height', height);\n  }\n\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header CDB-Widget-header--timeSeries\"> ';\n if (hasTorqueLayer) { \n__p+=' <div class=\"CDB-Widget-timeSeriesFakeControl\"></div> <div class=\"CDB-Widget-timeSeriesTimeInfo CDB-Widget-timeSeriesTimeInfo--fake\"></div> ';\n } \n__p+=' </div> <div class=\"CDB-Widget-content CDB-Widget-content--timeSeries\"> <div class=\"CDB-Widget-timeSeriesFakeChart ';\n if (hasTorqueLayer) { \n__p+='CDB-Widget-timeSeriesFakeChart--torque';\n } \n__p+='\"> ';\n for (var i = 0; i < 50; i++) { \n__p+=' <div class=\"CDB-Widget-timeSeriesFakeChartItem\" style=\"height: '+\n((__t=( Math.floor(Math.random() * 100) ))==null?'':_.escape(__t))+\n'%\"></div> ';\n } \n__p+=' </div> </div>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./time-series-header.tpl');\nvar d3 = require('d3');\n\n/**\n * View to reset render range.\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-header--timeSeries js-header CDB-Widget-contentSpaced',\n  events: {\n    'click .js-clear': '_onClick'\n  },\n\n  initialize: function () {\n    this._dataviewModel = this.options.dataviewModel;\n    this._rangeFilter = this.options.rangeFilter;\n    this._rangeFilter.bind('change', this.render, this);\n    this._setupScales();\n  },\n\n  render: function () {\n    this.$el.empty();\n    if (!this._rangeFilter.isEmpty()) {\n      this.$el.html(\n        template({\n          timeFormatter: this._timeFormatter,\n          dateFormatter: this._dateFormatter,\n          startDate: new Date(this._scale.invert(this._rangeFilter.get('min'))),\n          endDate: new Date(this._scale.invert(this._rangeFilter.get('max')))\n        })\n      );\n    }\n    return this;\n  },\n\n  _setupScales: function () {\n    var data = this._dataviewModel.get('data');\n    this._scale = d3.time.scale()\n      .domain([data[0].start * 1000, data[data.length - 1].end * 1000])\n      .nice()\n      .range([this._dataviewModel.get('start'), this._dataviewModel.get('end')]);\n\n    // for format rules see https://github.com/mbostock/d3/wiki/Time-Formatting\n    this._timeFormatter = d3.time.format('%H:%M');\n    this._dateFormatter = d3.time.format('%x');\n  },\n\n  _onClick: function () {\n    this.trigger('resetFilter', this);\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div> <p class=\"CDB-Text CDB-Size-large u-iBlock\"> Selected from </p> <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock\"> '+\n((__t=( timeFormatter(startDate) ))==null?'':_.escape(__t))+\n' '+\n((__t=( dateFormatter(startDate) ))==null?'':_.escape(__t))+\n' </p> <p class=\"CDB-Text CDB-Size-large u-iBlock\"> to </p> <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock\"> '+\n((__t=( timeFormatter(endDate) ))==null?'':_.escape(__t))+\n' '+\n((__t=( dateFormatter(endDate) ))==null?'':_.escape(__t))+\n' </p> </div> <div> <button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear\">Clear selection</button> </div>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\nvar torqueTemplate = require('./torque-template.tpl');\nvar placeholderTemplate = require('./placeholder.tpl');\nvar TorqueHistogramView = require('./torque-histogram-view');\nvar TorqueHeaderView = require('./torque-header-view');\n\n/**\n * Widget content view for a Torque time-series\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-body CDB-Widget-body--timeSeries',\n\n  initialize: function () {\n    this._dataviewModel = this.model.dataviewModel;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (this._isDataEmpty()) {\n      this.$el.html(placeholderTemplate({\n        hasTorqueLayer: true\n      }));\n    } else {\n      this.$el.html(torqueTemplate());\n\n      var torqueLayerModel = this._dataviewModel.layer;\n\n      this._appendView(\n        new TorqueHeaderView({\n          el: this.$('.js-header'),\n          dataviewModel: this._dataviewModel,\n          torqueLayerModel: torqueLayerModel\n        })\n      );\n\n      var view = new TorqueHistogramView({\n        dataviewModel: this._dataviewModel,\n        rangeFilter: this._dataviewModel.filter,\n        torqueLayerModel: torqueLayerModel\n      });\n      this._appendView(view);\n      this.$el.append(view.el);\n    }\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._originalData.once('change:data', this._onOriginalDataChange, this);\n    this.add_related_model(this._originalData);\n    this._dataviewModel.once('change:data', this.render, this);\n    this.add_related_model(this._dataviewModel);\n  },\n\n  _appendView: function (view) {\n    this.addView(view);\n    view.render();\n  },\n\n  _isDataEmpty: function () {\n    var data = this._dataviewModel.getData();\n    return _.isEmpty(data) || _.size(data) === 0;\n  },\n\n  _onOriginalDataChange: function () {\n    // do an explicit fetch in order to get actual data\n    // with the filters applied (e.g. bbox)\n    this._dataviewModel.fetch();\n  }\n});\n",
    "var cdb = require('cartodb.js');\nvar template = require('./torque-controls.tpl');\n\n/**\n * Torque animation controls, to manage run state\n */\nmodule.exports = cdb.core.View.extend({\n  tagName: 'button',\n  className: 'CDB-Widget-controlButton',\n\n  events: {\n    'click': '_onClick'\n  },\n\n  initialize: function () {\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._torqueLayerModel.bind('change:isRunning', this.render, this);\n    this.add_related_model(this._torqueLayerModel);\n  },\n\n  render: function () {\n    this.$el.html(\n      template({\n        iconClass: 'CDB-Widget-controlButtonIcon CDB-Widget-controlButtonIcon--' + (\n          this._torqueLayerModel.get('isRunning')\n            ? 'pause'\n            : 'play')\n      })\n    );\n\n    return this;\n  },\n\n  _onClick: function () {\n    if (this._torqueLayerModel.get('isRunning')) {\n      this._torqueLayerModel.pause();\n    } else {\n      this._torqueLayerModel.play();\n    }\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-controlButtonContent\"> <i class=\"'+\n((__t=( iconClass ))==null?'':_.escape(__t))+\n'\"></i> </div>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar TorqueControlsView = require('./torque-controls-view');\nvar TorqueTimeInfoView = require('./torque-time-info-view');\nvar TorqueRenderRangeInfoView = require('./torque-render-range-info-view');\nvar TorqueResetRenderRangeView = require('./torque-reset-render-range-view');\n\n/**\n * View for the header in the torque time-series view\n */\nmodule.exports = cdb.core.View.extend({\n  initialize: function () {\n    this._dataviewModel = this.options.dataviewModel;\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._rangeFilter = this._dataviewModel.filter;\n\n    this._rangeFilter.bind('change', this.render, this);\n    this.add_related_model(this._rangeFilter);\n  },\n\n  render: function () {\n    this.clearSubViews();\n\n    if (!this._rangeFilter.isEmpty()) {\n      this.el.classList.add('CDB-Widget-contentSpaced');\n      this._appendView(\n        new TorqueRenderRangeInfoView({\n          dataviewModel: this._dataviewModel\n        })\n      );\n      this._appendView(\n        new TorqueResetRenderRangeView({\n          torqueLayerModel: this._torqueLayerModel\n        })\n      );\n    } else {\n      this.el.classList.remove('CDB-Widget-contentSpaced');\n      this._appendView(\n        new TorqueControlsView({\n          torqueLayerModel: this._torqueLayerModel\n        })\n      );\n      this._appendView(\n        new TorqueTimeInfoView({\n          torqueLayerModel: this._torqueLayerModel\n        })\n      );\n    }\n\n    return this;\n  },\n\n  _appendView: function (view) {\n    this.addView(view);\n    this.$el.append(view.el);\n    view.render();\n  }\n});\n",
    "var $ = require('jquery');\nvar cdb = require('cartodb.js');\nvar HistogramChartView = require('../histogram/chart');\nvar TorqueTimeSliderView = require('./torque-time-slider-view');\n\n/**\n * Torque time-series histogram view.\n * Extends the common histogram chart view with time-control\n * this._dataviewModel is a histogram model\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-content CDB-Widget-content--timeSeries',\n\n  // TODO could be calculated from element styles instead of duplicated numbers here?\n  defaults: {\n    mobileThreshold: 960, // px; should match CSS media-query\n    histogramChartHeight: 48 + // inline bars height\n      4 + // bottom margin\n      16 + // bottom labels\n      4, // margins\n    histogramChartMobileHeight: 20 + // inline bars height (no bottom labels)\n      4 // margins\n  },\n\n  initialize: function () {\n    if (!this.options.torqueLayerModel) throw new Error('torqeLayerModel is required');\n    if (!this.options.rangeFilter) throw new Error('rangeFilter is required');\n\n    this._dataviewModel = this.options.dataviewModel;\n    this._rangeFilter = this.options.rangeFilter;\n    this._originalData = this._dataviewModel.getUnfilteredDataModel();\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._initBinds();\n  },\n\n  render: function () {\n    this.clearSubViews();\n    this._createHistogramView();\n    return this;\n  },\n\n  _initBinds: function () {\n    this._torqueLayerModel.bind('change:renderRange', this._onRenderRangeChanged, this);\n    this._torqueLayerModel.bind('change:steps change:start change:end', this._reSelectRange, this);\n    this.add_related_model(this._torqueLayerModel);\n    this._dataviewModel.bind('change:data', this._onChangeData, this);\n    this.add_related_model(this._dataviewModel);\n  },\n\n  _createHistogramView: function () {\n    this._chartView = new HistogramChartView({\n      type: 'time',\n      animationSpeed: 100,\n      animationBarDelay: function (d, i) {\n        return (i * 3);\n      },\n      chartBarColorClass: 'CDB-Chart-bar--timeSeries',\n      margin: {\n        top: 4,\n        right: 4,\n        bottom: 4,\n        left: 4\n      },\n      hasHandles: true,\n      height: this.defaults.histogramChartHeight,\n      data: this._dataviewModel.getData(),\n      originalData: this._originalData,\n      displayShadowBars: true\n    });\n\n    this.addView(this._chartView);\n    this.$el.append(this._chartView.render().el);\n    this._chartView.show();\n\n    this._chartView.bind('on_brush_end', this._onBrushEnd, this);\n    this._chartView.model.bind('change:width', this._onChangeChartWidth, this);\n    this.add_related_model(this._chartView.model);\n\n    var timeSliderView = new TorqueTimeSliderView({\n      dataviewModel: this._dataviewModel, // a histogram model\n      chartView: this._chartView,\n      torqueLayerModel: this._torqueLayerModel\n    });\n    this.addView(timeSliderView);\n    timeSliderView.render();\n  },\n\n  _onChangeData: function () {\n    if (this._chartView) {\n      this._chartView.replaceData(this._dataviewModel.getData());\n      this._chartView.updateXScale();\n      this._chartView.updateYScale();\n      this._reSelectRange();\n    }\n  },\n\n  _onRenderRangeChanged: function (m, r) {\n    if (r.start === undefined && r.end === undefined) {\n      this._chartView.removeSelection();\n      this._rangeFilter.unsetRange();\n    }\n  },\n\n  _onBrushEnd: function (loBarIndex, hiBarIndex) {\n    // TODO setting range filter causes selected-range to be reset, how to fix?\n    var data = this._dataviewModel.getData();\n    this._rangeFilter.setRange(\n       data[loBarIndex].start,\n       data[hiBarIndex - 1].end\n    );\n    this._reSelectRange();\n  },\n\n  timeToStep: function (timestamp) {\n    var steps = this._torqueLayerModel.get('steps');\n    var start = this._torqueLayerModel.get('start');\n    var end = this._torqueLayerModel.get('end');\n    var step = (steps * (1000 * timestamp - start)) / (end - start);\n    return step;\n  },\n\n  _reSelectRange: function () {\n    if (!this._rangeFilter.isEmpty()) {\n      var loStep = this.timeToStep(this._rangeFilter.get('min'));\n      var hiStep = this.timeToStep(this._rangeFilter.get('max'));\n\n      // clamp values since the range can be outside of the current torque thing\n      var steps = this._torqueLayerModel.get('steps');\n      this._torqueLayerModel.renderRange(\n        this._clampRangeVal(0, steps, loStep), // start\n        this._clampRangeVal(0, steps, hiStep) // end\n      );\n    }\n  },\n\n  _clampRangeVal: function (a, b, t) {\n    return Math.max(a, Math.min(b, t));\n  },\n\n  _onChangeChartWidth: function () {\n    var isMobileSize = $(window).width() < this.defaults.mobileThreshold;\n\n    this._chartView.toggleLabels(!isMobileSize);\n\n    var height = isMobileSize\n      ? this.defaults.histogramChartMobileHeight\n      : this.defaults.histogramChartHeight;\n    this._chartView.model.set('height', height);\n  }\n\n});\n",
    "var cdb = require('cartodb.js');\nvar d3 = require('d3');\nvar template = require('./torque-render-range-info.tpl');\n\n/**\n * View for to display info about a selected render range\n * this.model is expected to be a torqueLayer model\n */\nmodule.exports = cdb.core.View.extend({\n  initialize: function () {\n    this._dataviewModel = this.options.dataviewModel;\n    this._rangeFilter = this._dataviewModel.filter;\n    this._setupScales();\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template({\n      timeFormatter: this._timeFormatter,\n      dateFormatter: this._dateFormatter,\n      startDate: new Date(this._scale.invert(this._rangeFilter.get('min'))),\n      endDate: new Date(this._scale.invert(this._rangeFilter.get('max')))\n    }));\n\n    return this;\n  },\n\n  _initBinds: function () {\n    this._rangeFilter.bind('change', this.render, this);\n    this.add_related_model(this._rangeFilter);\n  },\n\n  _setupScales: function () {\n    var data = this._dataviewModel.get('data');\n    var start = this._dataviewModel.get('start');\n    var end = this._dataviewModel.get('end');\n\n    this._scale = d3.time.scale()\n      .domain([data[0].start * 1000, data[data.length - 1].end * 1000])\n      .nice()\n      .range([start, end]);\n\n    // for format rules see https://github.com/mbostock/d3/wiki/Time-Formatting\n    this._timeFormatter = d3.time.format('%H:%M');\n    this._dateFormatter = d3.time.format('%x');\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"CDB-Text CDB-Size-large u-iBlock\"> Selected from </p> <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock\"> '+\n((__t=( timeFormatter(startDate) ))==null?'':_.escape(__t))+\n' '+\n((__t=( dateFormatter(startDate) ))==null?'':_.escape(__t))+\n' </p> <p class=\"CDB-Text CDB-Size-large u-iBlock\"> to </p> <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock\"> '+\n((__t=( timeFormatter(endDate) ))==null?'':_.escape(__t))+\n' '+\n((__t=( dateFormatter(endDate) ))==null?'':_.escape(__t))+\n' </p>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./torque-reset-render-range.tpl');\n\n/**\n * View to reset render range.\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-filterButtons',\n  events: {\n    'click .js-clear': '_onClick'\n  },\n\n  initialize: function () {\n    this._torqueLayerModel = this.options.torqueLayerModel;\n  },\n\n  render: function () {\n    this.$el.html(template());\n    return this;\n  },\n\n  _onClick: function () {\n    this._torqueLayerModel.resetRenderRange();\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button class=\"CDB-Text CDB-Size-small u-upperCase u-actionTextColor CDB-Widget-filterButton js-clear\">Clear selection</button>';\n}\nreturn __p;\n};\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<div class=\"CDB-Widget-header CDB-Widget-header--timeSeries js-header\"></div>';\n}\nreturn __p;\n};\n",
    "var d3 = require('d3');\nvar cdb = require('cartodb.js');\nvar template = require('./torque-time-info.tpl');\n\n/**\n * View rendering the current step time\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-timeSeriesTimeInfo',\n\n  initialize: function () {\n    this._torqueLayerModel = this.options.torqueLayerModel;\n    this._torqueLayerModel.bind('change:step', this.render, this);\n    this.add_related_model(this._torqueLayerModel);\n\n    // for format rules see https://github.com/mbostock/d3/wiki/Time-Formatting\n    this._timeFormatter = d3.time.format('%H:%M');\n    this._dateFormatter = d3.time.format('%x');\n  },\n\n  render: function () {\n    var date = this._torqueLayerModel.get('time');\n\n    this.$el.html(\n      isNaN(date && date.getTime())\n        ? ''\n        : template({\n          time: this._timeFormatter(date),\n          date: this._dateFormatter(date)\n        })\n    );\n\n    return this;\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<p class=\"CDB-Text CDB-Size-large u-iBlock\"> '+\n((__t=( time ))==null?'':_.escape(__t))+\n' </p> <p class=\"CDB-Text CDB-Size-large u-secondaryTextColor u-iBlock u-lSpace\"> '+\n((__t=( date ))==null?'':_.escape(__t))+\n' </p>';\n}\nreturn __p;\n};\n",
    "var d3 = require('d3');\nvar cdb = require('cartodb.js');\n\n/**\n * Time-slider, expected to be used in a histogram view\n */\nmodule.exports = cdb.core.View.extend({\n  defaults: {\n    width: 4,\n    height: 8\n  },\n\n  initialize: function () {\n    if (!this.options.chartView) throw new Error('chartView is required');\n    if (!this.options.torqueLayerModel) throw new Error('torqeLayerModel is required');\n\n    this.model = new cdb.core.Model();\n\n    this._dataviewModel = this.options.dataviewModel;\n    this._chartView = this.options.chartView;\n    this._torqueLayerModel = this.options.torqueLayerModel;\n\n    this._torqueLayerModel.bind('change:start change:end', this._updateChartandTimeslider, this);\n    this._torqueLayerModel.bind('change:step', this._onChangeStep, this);\n    this._torqueLayerModel.bind('change:steps', this._updateChartandTimeslider, this);\n\n    this.add_related_model(this._torqueLayerModel);\n\n    this._chartView.model.bind('change:width', this._updateChartandTimeslider, this);\n    this._chartView.model.bind('change:height', this._onChangeChartHeight, this);\n    this.add_related_model(this._chartView.model);\n\n    this._dataviewModel.on('change:bins', this._updateChartandTimeslider, this);\n    this.add_related_model(this._dataviewModel);\n\n    this._dataviewModel.filter.on('change:min change:max', this._onFilterMinMaxChange, this);\n    this.add_related_model(this._dataviewModel.filter);\n\n    this._updateXScale();\n  },\n\n  render: function () {\n    // Make the render call idempotent; only create time slider once\n    if (!this.timeSlider) {\n      var dragBehavior = d3.behavior.drag()\n        .on('dragstart', this._onDragStart.bind(this))\n        .on('drag', this._onDrag.bind(this))\n        .on('dragend', this._onDragEnd.bind(this));\n\n      var d3el = this._chartView.canvas.append('rect');\n      this.timeSlider = d3el\n        .attr('class', 'CDB-TimeSlider')\n        .attr('width', this.defaults.width)\n        .attr('height', this._calcHeight())\n        .attr('rx', 3)\n        .attr('ry', 3)\n        .data([{ x: 0, y: 0 }])\n        .attr('transform', this._translateXY)\n        .call(dragBehavior);\n    }\n    this.setElement(d3el.node());\n\n    return this;\n  },\n\n  clean: function () {\n    if (this.timeSlider) {\n      this.timeSlider.remove();\n    }\n    cdb.core.View.prototype.clean.call(this);\n  },\n\n  _onDragStart: function () {\n    var isRunning = this._torqueLayerModel.get('isRunning');\n    if (isRunning) {\n      this._torqueLayerModel.pause();\n    }\n    this.model.set({\n      isDragging: true,\n      wasRunning: isRunning\n    });\n  },\n\n  _onDrag: function (d, i) {\n    var nextX = d.x + d3.event.dx;\n    if (this._isWithinRange(nextX)) {\n      d.x = nextX;\n      this.timeSlider.attr('transform', this._translateXY);\n\n      var step = Math.round(this._xScale.invert(d.x));\n      this._torqueLayerModel.setStep(step);\n    }\n  },\n\n  _onDragEnd: function () {\n    this.model.set('isDragging', false);\n    if (this.model.get('wasRunning')) {\n      this._torqueLayerModel.play();\n    }\n  },\n\n  _translateXY: function (d) {\n    return 'translate(' + [d.x, d.y] + ')';\n  },\n\n  _isWithinRange: function (x) {\n    return x >= 0 && x <= this._width();\n  },\n\n  _onChangeStep: function () {\n    // Time slider might not be created when this method is first called\n    if (this.timeSlider && !this.model.get('isDragging')) {\n      var data = this.timeSlider.data();\n      var newX = this._xScale(this._torqueLayerModel.get('step'));\n      if (!isNaN(newX)) {\n        data[0].x = newX;\n        this.timeSlider\n          .data(data)\n          .transition()\n          .ease('linear')\n          .attr('transform', this._translateXY);\n      }\n    }\n  },\n\n  _onFilterMinMaxChange: function (m, isFiltering) {\n    this.$el.toggle(!isFiltering);\n  },\n\n  _onChangeChartHeight: function () {\n    this.timeSlider.attr('height', this._calcHeight());\n  },\n\n  _updateChartandTimeslider: function () {\n    this._updateXScale();\n    this._onChangeStep();\n  },\n\n  _calcHeight: function () {\n    return this._chartView.chartHeight() + this.defaults.height;\n  },\n\n  _updateXScale: function () {\n    // calculate range based on the torque layer bounds (that are not the same than the histogram ones)\n    var range = 1000 * (this._dataviewModel.get('end') - this._dataviewModel.get('start'));\n    // get normalized start and end\n    var start = (this._torqueLayerModel.get('start') - 1000 * this._dataviewModel.get('start')) / range;\n    var end = (this._torqueLayerModel.get('end') - 1000 * this._dataviewModel.get('start')) / range;\n\n    this._xScale = d3.scale.linear()\n      .domain([0, this._torqueLayerModel.get('steps')])\n      .range([start * this._width(), end * this._width()]);\n  },\n\n  _width: function () {\n    return this._chartView.model.get('width');\n  }\n});\n",
    "var _ = require('underscore');\nmodule.exports = function(obj){\nvar __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){\n__p+='<button class=\"CDB-Widget-button CDB-Widget-errorButton js-refresh\"> <span class=\"CDB-Widget-textSmall CDB-Widget-textSmall--bold\">REFRESH</span> </button>';\n}\nreturn __p;\n};\n",
    "var cdb = require('cartodb.js');\nvar template = require('./widget-error-template.tpl');\n\n/**\n * Default widget error view:\n *\n * It will listen or not to dataviewModel changes when first load is done.\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-error is-hidden',\n\n  events: {\n    'click .js-refresh': '_onRefreshClick'\n  },\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  render: function () {\n    this.$el.html(template());\n    return this;\n  },\n\n  _initBinds: function () {\n    this.model.bind('error', function (mdl, err) {\n      if (!err || (err && err.statusText !== 'abort')) {\n        this.show();\n      }\n    }, this);\n    this.model.bind('loading loaded', this.hide, this);\n  },\n\n  _onRefreshClick: function () {\n    this.model.refresh();\n  },\n\n  show: function () {\n    this.$el.removeClass('is-hidden');\n  },\n\n  hide: function () {\n    this.$el.addClass('is-hidden');\n  }\n\n});\n",
    "var cdb = require('cartodb.js');\n\n/**\n *  Default widget loader view:\n *\n *  It will listen or not to dataviewModel changes when\n *  first load is done.\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Loader',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.model.bind('loading', this.show, this);\n    this.model.bind('error', function (mdl, err) {\n      if (!err || (err && err.statusText !== 'abort')) {\n        this.hide();\n      }\n    }, this);\n    this.model.bind('loaded', this.hide, this);\n  },\n\n  show: function () {\n    this.$el.addClass('is-visible');\n    clearTimeout(this._timeout);\n  },\n\n  hide: function () {\n    var self = this;\n    this._timeout = setTimeout(function () {\n      self.$el.removeClass('is-visible');\n    }, 500);\n  }\n\n});\n",
    "var _ = require('underscore');\nvar cdb = require('cartodb.js');\n\n/**\n * Default widget model\n *\n * Note: Currently all widgets have a dependency on a dataview, why it makes sense to have it here.\n * If you need a widget model that's backed up by a dataview model please implement your own model and adhere to the\n * public interface instead of extending/hacking this one.\n */\nmodule.exports = cdb.core.Model.extend({\n  defaults: {\n    attrsNames: [],\n    show_stats: false\n  },\n\n  initialize: function (attrs, opts) {\n    this.dataviewModel = opts.dataviewModel;\n  },\n\n  /**\n   * @public\n   * @param {Object} attrs, not that it should be\n   * @return {Boolean} true if at least one attribute was changed\n   * @throws {Error} Should throw an error if the attrs are invalid or inconsistent\n   */\n  update: function (attrs) {\n    var wAttrs = _.pick(attrs, this.get('attrsNames'));\n    this.set(wAttrs);\n    this.dataviewModel.update(attrs);\n    return !!(this.changedAttributes() || this.dataviewModel.changedAttributes());\n  },\n\n  /**\n   * @public\n   */\n  remove: function () {\n    this.dataviewModel.remove();\n    this.trigger('destroy', this);\n    this.stopListening();\n  }\n});\n",
    "var cdb = require('cartodb.js');\nvar _ = require('underscore');\n\n/**\n * Standard widget tooltip view\n *\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget-tooltip CDB-Widget-tooltip--light CDB-Text CDB-Size-small',\n\n  options: {\n    attribute: 'data-tooltip',\n    offsetX: 10,\n    offsetY: -28\n  },\n\n  initialize: function (opts) {\n    if (!opts.target) {\n      throw new Error('target is not defined');\n    }\n    this._$target = this.options.target;\n    this._initBinds();\n  },\n\n  render: function () {\n    var value = this._$target.attr(this.options.attribute);\n    this.$el.html(value);\n    return this;\n  },\n\n  _initBinds: function () {\n    this._$target.hover(\n      _.bind(this.show, this),\n      _.bind(this.hide, this)\n    );\n  },\n\n  _setPosition: function () {\n    var pos = this._$target.offset();\n    var width = this.$el.outerWidth();\n\n    this.$el.css({\n      top: pos.top + this.options.offsetY,\n      left: pos.left - (width / 2) + this.options.offsetX\n    });\n  },\n\n  show: function () {\n    this.render();\n    this._setPosition();\n    cdb.core.View.prototype.show.call(this);\n  },\n\n  clean: function () {\n    this._$target.off('mouseenter mouseleave');\n    cdb.core.View.prototype.clean.call(this);\n  }\n\n});\n",
    "var _ = require('underscore');\nvar WidgetView = require('./widget-view');\n\nvar WidgetViewFactory = function (defs) {\n  this.defs = [];\n  _.each(defs, function (def) {\n    this.addType(def);\n  }, this);\n};\n\nWidgetViewFactory.prototype.DEFAULT_CLASS_NAMES = 'CDB-Widget CDB-Widget--light';\n\nWidgetViewFactory.prototype.addType = function (def) {\n  if (!def.match) {\n    if (def.type) {\n      def.match = function (widget) {\n        return widget.get('type') === this.type;\n      };\n    } else {\n      throw new Error('def.type or def.match must be provided for createContentView to work');\n    }\n  }\n  if (!_.isFunction(def.createContentView)) throw new Error('def.createContentView must be a function');\n  this.defs.push(def);\n};\n\n/**\n * @returns {Object, undefined} Returns nothing if there is not matching view for the given model\n */\nWidgetViewFactory.prototype.createWidgetView = function (widget) {\n  var def = _.find(this.defs, function (def) {\n    return def.match(widget);\n  });\n\n  if (def) {\n    var attrs = {\n      className: this.DEFAULT_CLASS_NAMES,\n      model: widget,\n      contentView: def.createContentView(widget)\n    };\n\n    return new WidgetView(\n      _.isFunction(def.customizeWidgetAttrs)\n        ? def.customizeWidgetAttrs(attrs)\n        : attrs\n    );\n  }\n};\n\nmodule.exports = WidgetViewFactory;\n",
    "var cdb = require('cartodb.js');\nvar WidgetLoaderView = require('./widget-loader-view');\nvar WidgetErrorView = require('./widget-error-view');\n\n/**\n * Default widget view\n * The model is a expected to be widget model\n */\nmodule.exports = cdb.core.View.extend({\n  className: 'CDB-Widget CDB-Widget--light',\n\n  options: {\n    columns_title: []\n  },\n\n  initialize: function () {\n    if (this.model.dataviewModel) {\n      this.model.dataviewModel.layer.bind('change:visible', this._onChangeLayerVisible, this);\n      this.listenTo(this.model, 'destroy', this.clean);\n    }\n  },\n\n  render: function () {\n    var dataviewModel = this.model.dataviewModel;\n    if (dataviewModel) {\n      this._appendView(new WidgetLoaderView({\n        model: dataviewModel\n      }));\n\n      this._appendView(new WidgetErrorView({\n        model: dataviewModel\n      }));\n    }\n\n    this._appendView(this.options.contentView);\n\n    // Show or hide the widget depending on the layer visibility\n    this._setVisible(this.model.dataviewModel.layer.get('visible'));\n\n    return this;\n  },\n\n  _appendView: function (view) {\n    this.$el.append(view.render().el);\n    this.addView(view);\n  },\n\n  _setVisible: function (visible) {\n    this.$el.toggle(visible);\n  },\n\n  _onChangeLayerVisible: function (layer) {\n    // !! to force a boolean value, so only a true value actually shows the view\n    this._setVisible(!!layer.get('visible'));\n  }\n});\n",
    "var _ = require('underscore');\nvar Backbone = require('backbone');\n\n/**\n * Collection of Dataviews\n */\nmodule.exports = Backbone.Collection.extend({\n  comparator: 'order',\n\n  initialize: function () {\n    this._initBinds();\n  },\n\n  _initBinds: function () {\n    this.bind('change:order', _.debounce(this._onChangeOrder.bind(this), 10), this);\n    // If a category model applies the category colors, rest should remove/disable\n    // the category colors applied before.\n    this.bind('change:isColorsApplied', function (m, isColorCategorized) {\n      if (isColorCategorized) {\n        this.each(function (widgetModel) {\n          // Only set if model actually has the attr (i.e. it's a category model)\n          if (m !== widgetModel && _.isBoolean(widgetModel.get('isColorsApplied'))) {\n            widgetModel.set('isColorsApplied', false);\n          }\n        });\n      }\n    }, this);\n  },\n\n  _onChangeOrder: function () {\n    this.sort();\n    this.trigger('orderChanged', this);\n  }\n});\n"
  ]
}